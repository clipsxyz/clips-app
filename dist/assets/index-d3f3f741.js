function m2(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const g2="modulepreload",y2=function(e){return"/"+e},am={},my=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=y2(i),i in am)return;am[i]=!0;const a=i.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let f=s.length-1;f>=0;f--){const u=s[f];if(u.href===i&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":g2,a||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),a)return new Promise((f,u)=>{d.addEventListener("load",f),d.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})};function x2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gy={exports:{}},jc={},yy={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa=Symbol.for("react.element"),w2=Symbol.for("react.portal"),v2=Symbol.for("react.fragment"),b2=Symbol.for("react.strict_mode"),k2=Symbol.for("react.profiler"),S2=Symbol.for("react.provider"),_2=Symbol.for("react.context"),E2=Symbol.for("react.forward_ref"),N2=Symbol.for("react.suspense"),j2=Symbol.for("react.memo"),C2=Symbol.for("react.lazy"),lm=Symbol.iterator;function T2(e){return e===null||typeof e!="object"?null:(e=lm&&e[lm]||e["@@iterator"],typeof e=="function"?e:null)}var xy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wy=Object.assign,vy={};function Di(e,t,n){this.props=e,this.context=t,this.refs=vy,this.updater=n||xy}Di.prototype.isReactComponent={};Di.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Di.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function by(){}by.prototype=Di.prototype;function eh(e,t,n){this.props=e,this.context=t,this.refs=vy,this.updater=n||xy}var th=eh.prototype=new by;th.constructor=eh;wy(th,Di.prototype);th.isPureReactComponent=!0;var cm=Array.isArray,ky=Object.prototype.hasOwnProperty,nh={current:null},Sy={key:!0,ref:!0,__self:!0,__source:!0};function _y(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)ky.call(t,r)&&!Sy.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:oa,type:e,key:i,ref:a,props:s,_owner:nh.current}}function I2(e,t){return{$$typeof:oa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function rh(e){return typeof e=="object"&&e!==null&&e.$$typeof===oa}function R2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var dm=/\/+/g;function Cd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?R2(""+e.key):t.toString(36)}function dl(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case oa:case w2:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Cd(a,0):r,cm(s)?(n="",e!=null&&(n=e.replace(dm,"$&/")+"/"),dl(s,t,n,"",function(d){return d})):s!=null&&(rh(s)&&(s=I2(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(dm,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",cm(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Cd(i,l);a+=dl(i,t,n,c,s)}else if(c=T2(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Cd(i,l++),a+=dl(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function La(e,t,n){if(e==null)return e;var r=[],s=0;return dl(e,r,"","",function(i){return t.call(n,i,s++)}),r}function L2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $t={current:null},ul={transition:null},A2={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:ul,ReactCurrentOwner:nh};function Ey(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:La,forEach:function(e,t,n){La(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return La(e,function(){t++}),t},toArray:function(e){return La(e,function(t){return t})||[]},only:function(e){if(!rh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=Di;ve.Fragment=v2;ve.Profiler=k2;ve.PureComponent=eh;ve.StrictMode=b2;ve.Suspense=N2;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A2;ve.act=Ey;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=wy({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=nh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ky.call(t,c)&&!Sy.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:oa,type:e.type,key:s,ref:i,props:r,_owner:a}};ve.createContext=function(e){return e={$$typeof:_2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:S2,_context:e},e.Consumer=e};ve.createElement=_y;ve.createFactory=function(e){var t=_y.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:E2,render:e}};ve.isValidElement=rh;ve.lazy=function(e){return{$$typeof:C2,_payload:{_status:-1,_result:e},_init:L2}};ve.memo=function(e,t){return{$$typeof:j2,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=ul.transition;ul.transition={};try{e()}finally{ul.transition=t}};ve.unstable_act=Ey;ve.useCallback=function(e,t){return $t.current.useCallback(e,t)};ve.useContext=function(e){return $t.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return $t.current.useDeferredValue(e)};ve.useEffect=function(e,t){return $t.current.useEffect(e,t)};ve.useId=function(){return $t.current.useId()};ve.useImperativeHandle=function(e,t,n){return $t.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return $t.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return $t.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return $t.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return $t.current.useReducer(e,t,n)};ve.useRef=function(e){return $t.current.useRef(e)};ve.useState=function(e){return $t.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return $t.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return $t.current.useTransition()};ve.version="18.3.1";yy.exports=ve;var oe=yy.exports;const x=x2(oe),P2=m2({__proto__:null,default:x},[oe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2=oe,D2=Symbol.for("react.element"),O2=Symbol.for("react.fragment"),F2=Object.prototype.hasOwnProperty,B2=M2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$2={key:!0,ref:!0,__self:!0,__source:!0};function Ny(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)F2.call(t,r)&&!$2.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:D2,type:e,key:i,ref:a,props:s,_owner:B2.current}}jc.Fragment=O2;jc.jsx=Ny;jc.jsxs=Ny;gy.exports=jc;var o=gy.exports,xu={},jy={exports:{}},an={},Cy={exports:{}},Ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,Y){var $=D.length;D.push(Y);e:for(;0<$;){var Q=$-1>>>1,fe=D[Q];if(0<s(fe,Y))D[Q]=Y,D[$]=fe,$=Q;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var Y=D[0],$=D.pop();if($!==Y){D[0]=$;e:for(var Q=0,fe=D.length,B=fe>>>1;Q<B;){var C=2*(Q+1)-1,R=D[C],J=C+1,F=D[J];if(0>s(R,$))J<fe&&0>s(F,R)?(D[Q]=F,D[J]=$,Q=J):(D[Q]=R,D[C]=$,Q=C);else if(J<fe&&0>s(F,$))D[Q]=F,D[J]=$,Q=J;else break e}}return Y}function s(D,Y){var $=D.sortIndex-Y.sortIndex;return $!==0?$:D.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],d=[],f=1,u=null,h=3,p=!1,y=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=D)r(d),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=n(d)}}function k(D){if(w=!1,b(D),!y)if(n(c)!==null)y=!0,K(T);else{var Y=n(d);Y!==null&&re(k,Y.startTime-D)}}function T(D,Y){y=!1,w&&(w=!1,m(I),I=-1),p=!0;var $=h;try{for(b(Y),u=n(c);u!==null&&(!(u.expirationTime>Y)||D&&!N());){var Q=u.callback;if(typeof Q=="function"){u.callback=null,h=u.priorityLevel;var fe=Q(u.expirationTime<=Y);Y=e.unstable_now(),typeof fe=="function"?u.callback=fe:u===n(c)&&r(c),b(Y)}else r(c);u=n(c)}if(u!==null)var B=!0;else{var C=n(d);C!==null&&re(k,C.startTime-Y),B=!1}return B}finally{u=null,h=$,p=!1}}var E=!1,S=null,I=-1,q=5,A=-1;function N(){return!(e.unstable_now()-A<q)}function H(){if(S!==null){var D=e.unstable_now();A=D;var Y=!0;try{Y=S(!0,D)}finally{Y?L():(E=!1,S=null)}}else E=!1}var L;if(typeof g=="function")L=function(){g(H)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,U=M.port2;M.port1.onmessage=H,L=function(){U.postMessage(null)}}else L=function(){v(H,0)};function K(D){S=D,E||(E=!0,L())}function re(D,Y){I=v(function(){D(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,K(T))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var $=h;h=Y;try{return D()}finally{h=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=h;h=D;try{return Y()}finally{h=$}},e.unstable_scheduleCallback=function(D,Y,$){var Q=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Q+$:Q):$=Q,D){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=$+fe,D={id:f++,callback:Y,priorityLevel:D,startTime:$,expirationTime:fe,sortIndex:-1},$>Q?(D.sortIndex=$,t(d,D),n(c)===null&&D===n(d)&&(w?(m(I),I=-1):w=!0,re(k,$-Q))):(D.sortIndex=fe,t(c,D),y||p||(y=!0,K(T))),D},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(D){var Y=h;return function(){var $=h;h=Y;try{return D.apply(this,arguments)}finally{h=$}}}})(Ty);Cy.exports=Ty;var U2=Cy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z2=oe,rn=U2;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Iy=new Set,Ro={};function Ns(e,t){xi(e,t),xi(e+"Capture",t)}function xi(e,t){for(Ro[e]=t,e=0;e<t.length;e++)Iy.add(t[e])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wu=Object.prototype.hasOwnProperty,H2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,um={},fm={};function W2(e){return wu.call(fm,e)?!0:wu.call(um,e)?!1:H2.test(e)?fm[e]=!0:(um[e]=!0,!1)}function V2(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function q2(e,t,n,r){if(t===null||typeof t>"u"||V2(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ut(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_t[e]=new Ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_t[t]=new Ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_t[e]=new Ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_t[e]=new Ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_t[e]=new Ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_t[e]=new Ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_t[e]=new Ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_t[e]=new Ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_t[e]=new Ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var sh=/[\-:]([a-z])/g;function ih(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sh,ih);_t[t]=new Ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sh,ih);_t[t]=new Ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sh,ih);_t[t]=new Ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_t[e]=new Ut(e,1,!1,e.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_t[e]=new Ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function oh(e,t,n,r){var s=_t.hasOwnProperty(t)?_t[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(q2(t,n,s,r)&&(n=null),r||s===null?W2(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var yr=z2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Aa=Symbol.for("react.element"),$s=Symbol.for("react.portal"),Us=Symbol.for("react.fragment"),ah=Symbol.for("react.strict_mode"),vu=Symbol.for("react.profiler"),Ry=Symbol.for("react.provider"),Ly=Symbol.for("react.context"),lh=Symbol.for("react.forward_ref"),bu=Symbol.for("react.suspense"),ku=Symbol.for("react.suspense_list"),ch=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),Ay=Symbol.for("react.offscreen"),hm=Symbol.iterator;function Zi(e){return e===null||typeof e!="object"?null:(e=hm&&e[hm]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,Td;function uo(e){if(Td===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Td=t&&t[1]||""}return`
`+Td+e}var Id=!1;function Rd(e,t){if(!e||Id)return"";Id=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Id=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?uo(e):""}function G2(e){switch(e.tag){case 5:return uo(e.type);case 16:return uo("Lazy");case 13:return uo("Suspense");case 19:return uo("SuspenseList");case 0:case 2:case 15:return e=Rd(e.type,!1),e;case 11:return e=Rd(e.type.render,!1),e;case 1:return e=Rd(e.type,!0),e;default:return""}}function Su(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Us:return"Fragment";case $s:return"Portal";case vu:return"Profiler";case ah:return"StrictMode";case bu:return"Suspense";case ku:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ly:return(e.displayName||"Context")+".Consumer";case Ry:return(e._context.displayName||"Context")+".Provider";case lh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ch:return t=e.displayName||null,t!==null?t:Su(e.type)||"Memo";case vr:t=e._payload,e=e._init;try{return Su(e(t))}catch{}}return null}function Y2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Su(t);case 8:return t===ah?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Py(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function X2(e){var t=Py(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pa(e){e._valueTracker||(e._valueTracker=X2(e))}function My(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Py(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Nl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _u(e,t){var n=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function pm(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Dy(e,t){t=t.checked,t!=null&&oh(e,"checked",t,!1)}function Eu(e,t){Dy(e,t);var n=qr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Nu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Nu(e,t.type,qr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mm(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Nu(e,t,n){(t!=="number"||Nl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var fo=Array.isArray;function si(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ju(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ne(92));if(fo(n)){if(1<n.length)throw Error(ne(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qr(n)}}function Oy(e,t){var n=qr(t.value),r=qr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ym(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ma,By=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ma=Ma||document.createElement("div"),Ma.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ma.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},K2=["Webkit","ms","Moz","O"];Object.keys(go).forEach(function(e){K2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),go[t]=go[e]})});function $y(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||go.hasOwnProperty(e)&&go[e]?(""+t).trim():t+"px"}function Uy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$y(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Q2=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tu(e,t){if(t){if(Q2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function Iu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ru=null;function dh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lu=null,ii=null,oi=null;function xm(e){if(e=ca(e)){if(typeof Lu!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=Lc(t),Lu(e.stateNode,e.type,t))}}function zy(e){ii?oi?oi.push(e):oi=[e]:ii=e}function Hy(){if(ii){var e=ii,t=oi;if(oi=ii=null,xm(e),t)for(e=0;e<t.length;e++)xm(t[e])}}function Wy(e,t){return e(t)}function Vy(){}var Ld=!1;function qy(e,t,n){if(Ld)return e(t,n);Ld=!0;try{return Wy(e,t,n)}finally{Ld=!1,(ii!==null||oi!==null)&&(Vy(),Hy())}}function Ao(e,t){var n=e.stateNode;if(n===null)return null;var r=Lc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ne(231,t,typeof n));return n}var Au=!1;if(ur)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){Au=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{Au=!1}function J2(e,t,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var yo=!1,jl=null,Cl=!1,Pu=null,Z2={onError:function(e){yo=!0,jl=e}};function ek(e,t,n,r,s,i,a,l,c){yo=!1,jl=null,J2.apply(Z2,arguments)}function tk(e,t,n,r,s,i,a,l,c){if(ek.apply(this,arguments),yo){if(yo){var d=jl;yo=!1,jl=null}else throw Error(ne(198));Cl||(Cl=!0,Pu=d)}}function js(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Gy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wm(e){if(js(e)!==e)throw Error(ne(188))}function nk(e){var t=e.alternate;if(!t){if(t=js(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return wm(s),e;if(i===r)return wm(s),t;i=i.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?e:t}function Yy(e){return e=nk(e),e!==null?Xy(e):null}function Xy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xy(e);if(t!==null)return t;e=e.sibling}return null}var Ky=rn.unstable_scheduleCallback,vm=rn.unstable_cancelCallback,rk=rn.unstable_shouldYield,sk=rn.unstable_requestPaint,st=rn.unstable_now,ik=rn.unstable_getCurrentPriorityLevel,uh=rn.unstable_ImmediatePriority,Qy=rn.unstable_UserBlockingPriority,Tl=rn.unstable_NormalPriority,ok=rn.unstable_LowPriority,Jy=rn.unstable_IdlePriority,Cc=null,Yn=null;function ak(e){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Cc,e,void 0,(e.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:dk,lk=Math.log,ck=Math.LN2;function dk(e){return e>>>=0,e===0?32:31-(lk(e)/ck|0)|0}var Da=64,Oa=4194304;function ho(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Il(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ho(l):(i&=a,i!==0&&(r=ho(i)))}else a=n&~s,a!==0?r=ho(a):i!==0&&(r=ho(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-An(t),s=1<<n,r|=e[n],t&=~s;return r}function uk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fk(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-An(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=uk(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Mu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zy(){var e=Da;return Da<<=1,!(Da&4194240)&&(Da=64),e}function Ad(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function aa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-An(t),e[t]=n}function hk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-An(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function fh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-An(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Le=0;function ex(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tx,hh,nx,rx,sx,Du=!1,Fa=[],Mr=null,Dr=null,Or=null,Po=new Map,Mo=new Map,Nr=[],pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bm(e,t){switch(e){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":Po.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(t.pointerId)}}function to(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ca(t),t!==null&&hh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function mk(e,t,n,r,s){switch(t){case"focusin":return Mr=to(Mr,e,t,n,r,s),!0;case"dragenter":return Dr=to(Dr,e,t,n,r,s),!0;case"mouseover":return Or=to(Or,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Po.set(i,to(Po.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mo.set(i,to(Mo.get(i)||null,e,t,n,r,s)),!0}return!1}function ix(e){var t=is(e.target);if(t!==null){var n=js(t);if(n!==null){if(t=n.tag,t===13){if(t=Gy(n),t!==null){e.blockedOn=t,sx(e.priority,function(){nx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ou(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ru=r,n.target.dispatchEvent(r),Ru=null}else return t=ca(n),t!==null&&hh(t),e.blockedOn=n,!1;t.shift()}return!0}function km(e,t,n){fl(e)&&n.delete(t)}function gk(){Du=!1,Mr!==null&&fl(Mr)&&(Mr=null),Dr!==null&&fl(Dr)&&(Dr=null),Or!==null&&fl(Or)&&(Or=null),Po.forEach(km),Mo.forEach(km)}function no(e,t){e.blockedOn===t&&(e.blockedOn=null,Du||(Du=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,gk)))}function Do(e){function t(s){return no(s,e)}if(0<Fa.length){no(Fa[0],e);for(var n=1;n<Fa.length;n++){var r=Fa[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Mr!==null&&no(Mr,e),Dr!==null&&no(Dr,e),Or!==null&&no(Or,e),Po.forEach(t),Mo.forEach(t),n=0;n<Nr.length;n++)r=Nr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Nr.length&&(n=Nr[0],n.blockedOn===null);)ix(n),n.blockedOn===null&&Nr.shift()}var ai=yr.ReactCurrentBatchConfig,Rl=!0;function yk(e,t,n,r){var s=Le,i=ai.transition;ai.transition=null;try{Le=1,ph(e,t,n,r)}finally{Le=s,ai.transition=i}}function xk(e,t,n,r){var s=Le,i=ai.transition;ai.transition=null;try{Le=4,ph(e,t,n,r)}finally{Le=s,ai.transition=i}}function ph(e,t,n,r){if(Rl){var s=Ou(e,t,n,r);if(s===null)Hd(e,t,r,Ll,n),bm(e,r);else if(mk(s,e,t,n,r))r.stopPropagation();else if(bm(e,r),t&4&&-1<pk.indexOf(e)){for(;s!==null;){var i=ca(s);if(i!==null&&tx(i),i=Ou(e,t,n,r),i===null&&Hd(e,t,r,Ll,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hd(e,t,r,null,n)}}var Ll=null;function Ou(e,t,n,r){if(Ll=null,e=dh(r),e=is(e),e!==null)if(t=js(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Gy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ll=e,null}function ox(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ik()){case uh:return 1;case Qy:return 4;case Tl:case ok:return 16;case Jy:return 536870912;default:return 16}default:return 16}}var Tr=null,mh=null,hl=null;function ax(){if(hl)return hl;var e,t=mh,n=t.length,r,s="value"in Tr?Tr.value:Tr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return hl=s.slice(e,1<r?1-r:void 0)}function pl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ba(){return!0}function Sm(){return!1}function ln(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ba:Sm,this.isPropagationStopped=Sm,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ba)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ba)},persist:function(){},isPersistent:Ba}),t}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gh=ln(Oi),la=Xe({},Oi,{view:0,detail:0}),wk=ln(la),Pd,Md,ro,Tc=Xe({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ro&&(ro&&e.type==="mousemove"?(Pd=e.screenX-ro.screenX,Md=e.screenY-ro.screenY):Md=Pd=0,ro=e),Pd)},movementY:function(e){return"movementY"in e?e.movementY:Md}}),_m=ln(Tc),vk=Xe({},Tc,{dataTransfer:0}),bk=ln(vk),kk=Xe({},la,{relatedTarget:0}),Dd=ln(kk),Sk=Xe({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),_k=ln(Sk),Ek=Xe({},Oi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nk=ln(Ek),jk=Xe({},Oi,{data:0}),Em=ln(jk),Ck={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ik[e])?!!t[e]:!1}function yh(){return Rk}var Lk=Xe({},la,{key:function(e){if(e.key){var t=Ck[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yh,charCode:function(e){return e.type==="keypress"?pl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ak=ln(Lk),Pk=Xe({},Tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=ln(Pk),Mk=Xe({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yh}),Dk=ln(Mk),Ok=Xe({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fk=ln(Ok),Bk=Xe({},Tc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$k=ln(Bk),Uk=[9,13,27,32],xh=ur&&"CompositionEvent"in window,xo=null;ur&&"documentMode"in document&&(xo=document.documentMode);var zk=ur&&"TextEvent"in window&&!xo,lx=ur&&(!xh||xo&&8<xo&&11>=xo),jm=String.fromCharCode(32),Cm=!1;function cx(e,t){switch(e){case"keyup":return Uk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zs=!1;function Hk(e,t){switch(e){case"compositionend":return dx(t);case"keypress":return t.which!==32?null:(Cm=!0,jm);case"textInput":return e=t.data,e===jm&&Cm?null:e;default:return null}}function Wk(e,t){if(zs)return e==="compositionend"||!xh&&cx(e,t)?(e=ax(),hl=mh=Tr=null,zs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lx&&t.locale!=="ko"?null:t.data;default:return null}}var Vk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vk[e.type]:t==="textarea"}function ux(e,t,n,r){zy(r),t=Al(t,"onChange"),0<t.length&&(n=new gh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var wo=null,Oo=null;function qk(e){kx(e,0)}function Ic(e){var t=Vs(e);if(My(t))return e}function Gk(e,t){if(e==="change")return t}var fx=!1;if(ur){var Od;if(ur){var Fd="oninput"in document;if(!Fd){var Im=document.createElement("div");Im.setAttribute("oninput","return;"),Fd=typeof Im.oninput=="function"}Od=Fd}else Od=!1;fx=Od&&(!document.documentMode||9<document.documentMode)}function Rm(){wo&&(wo.detachEvent("onpropertychange",hx),Oo=wo=null)}function hx(e){if(e.propertyName==="value"&&Ic(Oo)){var t=[];ux(t,Oo,e,dh(e)),qy(qk,t)}}function Yk(e,t,n){e==="focusin"?(Rm(),wo=t,Oo=n,wo.attachEvent("onpropertychange",hx)):e==="focusout"&&Rm()}function Xk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ic(Oo)}function Kk(e,t){if(e==="click")return Ic(t)}function Qk(e,t){if(e==="input"||e==="change")return Ic(t)}function Jk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dn=typeof Object.is=="function"?Object.is:Jk;function Fo(e,t){if(Dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wu.call(t,s)||!Dn(e[s],t[s]))return!1}return!0}function Lm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Am(e,t){var n=Lm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lm(n)}}function px(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?px(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mx(){for(var e=window,t=Nl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Nl(e.document)}return t}function wh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zk(e){var t=mx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&px(n.ownerDocument.documentElement,n)){if(r!==null&&wh(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Am(n,i);var a=Am(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eS=ur&&"documentMode"in document&&11>=document.documentMode,Hs=null,Fu=null,vo=null,Bu=!1;function Pm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bu||Hs==null||Hs!==Nl(r)||(r=Hs,"selectionStart"in r&&wh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vo&&Fo(vo,r)||(vo=r,r=Al(Fu,"onSelect"),0<r.length&&(t=new gh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hs)))}function $a(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ws={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionend:$a("Transition","TransitionEnd")},Bd={},gx={};ur&&(gx=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Rc(e){if(Bd[e])return Bd[e];if(!Ws[e])return e;var t=Ws[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in gx)return Bd[e]=t[n];return e}var yx=Rc("animationend"),xx=Rc("animationiteration"),wx=Rc("animationstart"),vx=Rc("transitionend"),bx=new Map,Mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(e,t){bx.set(e,t),Ns(t,[e])}for(var $d=0;$d<Mm.length;$d++){var Ud=Mm[$d],tS=Ud.toLowerCase(),nS=Ud[0].toUpperCase()+Ud.slice(1);Qr(tS,"on"+nS)}Qr(yx,"onAnimationEnd");Qr(xx,"onAnimationIteration");Qr(wx,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(vx,"onTransitionEnd");xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rS=new Set("cancel close invalid load scroll toggle".split(" ").concat(po));function Dm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tk(r,t,void 0,e),e.currentTarget=null}function kx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Dm(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Dm(s,l,d),i=c}}}if(Cl)throw e=Pu,Cl=!1,Pu=null,e}function ze(e,t){var n=t[Wu];n===void 0&&(n=t[Wu]=new Set);var r=e+"__bubble";n.has(r)||(Sx(t,e,2,!1),n.add(r))}function zd(e,t,n){var r=0;t&&(r|=4),Sx(n,e,r,t)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function Bo(e){if(!e[Ua]){e[Ua]=!0,Iy.forEach(function(n){n!=="selectionchange"&&(rS.has(n)||zd(n,!1,e),zd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ua]||(t[Ua]=!0,zd("selectionchange",!1,t))}}function Sx(e,t,n,r){switch(ox(t)){case 1:var s=yk;break;case 4:s=xk;break;default:s=ph}n=s.bind(null,t,n,e),s=void 0,!Au||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hd(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=is(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}qy(function(){var d=i,f=dh(n),u=[];e:{var h=bx.get(e);if(h!==void 0){var p=gh,y=e;switch(e){case"keypress":if(pl(n)===0)break e;case"keydown":case"keyup":p=Ak;break;case"focusin":y="focus",p=Dd;break;case"focusout":y="blur",p=Dd;break;case"beforeblur":case"afterblur":p=Dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=bk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Dk;break;case yx:case xx:case wx:p=_k;break;case vx:p=Fk;break;case"scroll":p=wk;break;case"wheel":p=$k;break;case"copy":case"cut":case"paste":p=Nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Nm}var w=(t&4)!==0,v=!w&&e==="scroll",m=w?h!==null?h+"Capture":null:h;w=[];for(var g=d,b;g!==null;){b=g;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,m!==null&&(k=Ao(g,m),k!=null&&w.push($o(g,k,b)))),v)break;g=g.return}0<w.length&&(h=new p(h,y,null,n,f),u.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Ru&&(y=n.relatedTarget||n.fromElement)&&(is(y)||y[fr]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=d,y=y?is(y):null,y!==null&&(v=js(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=d),p!==y)){if(w=_m,k="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=Nm,k="onPointerLeave",m="onPointerEnter",g="pointer"),v=p==null?h:Vs(p),b=y==null?h:Vs(y),h=new w(k,g+"leave",p,n,f),h.target=v,h.relatedTarget=b,k=null,is(f)===d&&(w=new w(m,g+"enter",y,n,f),w.target=b,w.relatedTarget=v,k=w),v=k,p&&y)t:{for(w=p,m=y,g=0,b=w;b;b=Ms(b))g++;for(b=0,k=m;k;k=Ms(k))b++;for(;0<g-b;)w=Ms(w),g--;for(;0<b-g;)m=Ms(m),b--;for(;g--;){if(w===m||m!==null&&w===m.alternate)break t;w=Ms(w),m=Ms(m)}w=null}else w=null;p!==null&&Om(u,h,p,w,!1),y!==null&&v!==null&&Om(u,v,y,w,!0)}}e:{if(h=d?Vs(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var T=Gk;else if(Tm(h))if(fx)T=Qk;else{T=Xk;var E=Yk}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=Kk);if(T&&(T=T(e,d))){ux(u,T,n,f);break e}E&&E(e,h,d),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Nu(h,"number",h.value)}switch(E=d?Vs(d):window,e){case"focusin":(Tm(E)||E.contentEditable==="true")&&(Hs=E,Fu=d,vo=null);break;case"focusout":vo=Fu=Hs=null;break;case"mousedown":Bu=!0;break;case"contextmenu":case"mouseup":case"dragend":Bu=!1,Pm(u,n,f);break;case"selectionchange":if(eS)break;case"keydown":case"keyup":Pm(u,n,f)}var S;if(xh)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else zs?cx(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(lx&&n.locale!=="ko"&&(zs||I!=="onCompositionStart"?I==="onCompositionEnd"&&zs&&(S=ax()):(Tr=f,mh="value"in Tr?Tr.value:Tr.textContent,zs=!0)),E=Al(d,I),0<E.length&&(I=new Em(I,e,null,n,f),u.push({event:I,listeners:E}),S?I.data=S:(S=dx(n),S!==null&&(I.data=S)))),(S=zk?Hk(e,n):Wk(e,n))&&(d=Al(d,"onBeforeInput"),0<d.length&&(f=new Em("onBeforeInput","beforeinput",null,n,f),u.push({event:f,listeners:d}),f.data=S))}kx(u,t)})}function $o(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Al(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ao(e,n),i!=null&&r.unshift($o(e,i,s)),i=Ao(e,t),i!=null&&r.push($o(e,i,s))),e=e.return}return r}function Ms(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Om(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Ao(n,i),c!=null&&a.unshift($o(n,c,l))):s||(c=Ao(n,i),c!=null&&a.push($o(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var sS=/\r\n?/g,iS=/\u0000|\uFFFD/g;function Fm(e){return(typeof e=="string"?e:""+e).replace(sS,`
`).replace(iS,"")}function za(e,t,n){if(t=Fm(t),Fm(e)!==t&&n)throw Error(ne(425))}function Pl(){}var $u=null,Uu=null;function zu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hu=typeof setTimeout=="function"?setTimeout:void 0,oS=typeof clearTimeout=="function"?clearTimeout:void 0,Bm=typeof Promise=="function"?Promise:void 0,aS=typeof queueMicrotask=="function"?queueMicrotask:typeof Bm<"u"?function(e){return Bm.resolve(null).then(e).catch(lS)}:Hu;function lS(e){setTimeout(function(){throw e})}function Wd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Do(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Do(t)}function Fr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $m(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Fi=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Fi,Uo="__reactProps$"+Fi,fr="__reactContainer$"+Fi,Wu="__reactEvents$"+Fi,cS="__reactListeners$"+Fi,dS="__reactHandles$"+Fi;function is(e){var t=e[Vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[Vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$m(e);e!==null;){if(n=e[Vn])return n;e=$m(e)}return t}e=n,n=e.parentNode}return null}function ca(e){return e=e[Vn]||e[fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function Lc(e){return e[Uo]||null}var Vu=[],qs=-1;function Jr(e){return{current:e}}function He(e){0>qs||(e.current=Vu[qs],Vu[qs]=null,qs--)}function $e(e,t){qs++,Vu[qs]=e.current,e.current=t}var Gr={},Tt=Jr(Gr),qt=Jr(!1),ms=Gr;function wi(e,t){var n=e.type.contextTypes;if(!n)return Gr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Gt(e){return e=e.childContextTypes,e!=null}function Ml(){He(qt),He(Tt)}function Um(e,t,n){if(Tt.current!==Gr)throw Error(ne(168));$e(Tt,t),$e(qt,n)}function _x(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(ne(108,Y2(e)||"Unknown",s));return Xe({},n,r)}function Dl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gr,ms=Tt.current,$e(Tt,e),$e(qt,qt.current),!0}function zm(e,t,n){var r=e.stateNode;if(!r)throw Error(ne(169));n?(e=_x(e,t,ms),r.__reactInternalMemoizedMergedChildContext=e,He(qt),He(Tt),$e(Tt,e)):He(qt),$e(qt,n)}var rr=null,Ac=!1,Vd=!1;function Ex(e){rr===null?rr=[e]:rr.push(e)}function uS(e){Ac=!0,Ex(e)}function Zr(){if(!Vd&&rr!==null){Vd=!0;var e=0,t=Le;try{var n=rr;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rr=null,Ac=!1}catch(s){throw rr!==null&&(rr=rr.slice(e+1)),Ky(uh,Zr),s}finally{Le=t,Vd=!1}}return null}var Gs=[],Ys=0,Ol=null,Fl=0,gn=[],yn=0,gs=null,ir=1,or="";function rs(e,t){Gs[Ys++]=Fl,Gs[Ys++]=Ol,Ol=e,Fl=t}function Nx(e,t,n){gn[yn++]=ir,gn[yn++]=or,gn[yn++]=gs,gs=e;var r=ir;e=or;var s=32-An(r)-1;r&=~(1<<s),n+=1;var i=32-An(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ir=1<<32-An(t)+s|n<<s|r,or=i+e}else ir=1<<i|n<<s|r,or=e}function vh(e){e.return!==null&&(rs(e,1),Nx(e,1,0))}function bh(e){for(;e===Ol;)Ol=Gs[--Ys],Gs[Ys]=null,Fl=Gs[--Ys],Gs[Ys]=null;for(;e===gs;)gs=gn[--yn],gn[yn]=null,or=gn[--yn],gn[yn]=null,ir=gn[--yn],gn[yn]=null}var nn=null,tn=null,We=!1,Rn=null;function jx(e,t){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Hm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nn=e,tn=Fr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nn=e,tn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=gs!==null?{id:ir,overflow:or}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,nn=e,tn=null,!0):!1;default:return!1}}function qu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gu(e){if(We){var t=tn;if(t){var n=t;if(!Hm(e,t)){if(qu(e))throw Error(ne(418));t=Fr(n.nextSibling);var r=nn;t&&Hm(e,t)?jx(r,n):(e.flags=e.flags&-4097|2,We=!1,nn=e)}}else{if(qu(e))throw Error(ne(418));e.flags=e.flags&-4097|2,We=!1,nn=e}}}function Wm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nn=e}function Ha(e){if(e!==nn)return!1;if(!We)return Wm(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zu(e.type,e.memoizedProps)),t&&(t=tn)){if(qu(e))throw Cx(),Error(ne(418));for(;t;)jx(e,t),t=Fr(t.nextSibling)}if(Wm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tn=Fr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tn=null}}else tn=nn?Fr(e.stateNode.nextSibling):null;return!0}function Cx(){for(var e=tn;e;)e=Fr(e.nextSibling)}function vi(){tn=nn=null,We=!1}function kh(e){Rn===null?Rn=[e]:Rn.push(e)}var fS=yr.ReactCurrentBatchConfig;function so(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vm(e){var t=e._init;return t(e._payload)}function Tx(e){function t(m,g){if(e){var b=m.deletions;b===null?(m.deletions=[g],m.flags|=16):b.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function s(m,g){return m=zr(m,g),m.index=0,m.sibling=null,m}function i(m,g,b){return m.index=b,e?(b=m.alternate,b!==null?(b=b.index,b<g?(m.flags|=2,g):b):(m.flags|=2,g)):(m.flags|=1048576,g)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,g,b,k){return g===null||g.tag!==6?(g=Jd(b,m.mode,k),g.return=m,g):(g=s(g,b),g.return=m,g)}function c(m,g,b,k){var T=b.type;return T===Us?f(m,g,b.props.children,k,b.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vr&&Vm(T)===g.type)?(k=s(g,b.props),k.ref=so(m,g,b),k.return=m,k):(k=bl(b.type,b.key,b.props,null,m.mode,k),k.ref=so(m,g,b),k.return=m,k)}function d(m,g,b,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Zd(b,m.mode,k),g.return=m,g):(g=s(g,b.children||[]),g.return=m,g)}function f(m,g,b,k,T){return g===null||g.tag!==7?(g=ds(b,m.mode,k,T),g.return=m,g):(g=s(g,b),g.return=m,g)}function u(m,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Jd(""+g,m.mode,b),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Aa:return b=bl(g.type,g.key,g.props,null,m.mode,b),b.ref=so(m,null,g),b.return=m,b;case $s:return g=Zd(g,m.mode,b),g.return=m,g;case vr:var k=g._init;return u(m,k(g._payload),b)}if(fo(g)||Zi(g))return g=ds(g,m.mode,b,null),g.return=m,g;Wa(m,g)}return null}function h(m,g,b,k){var T=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:l(m,g,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Aa:return b.key===T?c(m,g,b,k):null;case $s:return b.key===T?d(m,g,b,k):null;case vr:return T=b._init,h(m,g,T(b._payload),k)}if(fo(b)||Zi(b))return T!==null?null:f(m,g,b,k,null);Wa(m,b)}return null}function p(m,g,b,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(b)||null,l(g,m,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Aa:return m=m.get(k.key===null?b:k.key)||null,c(g,m,k,T);case $s:return m=m.get(k.key===null?b:k.key)||null,d(g,m,k,T);case vr:var E=k._init;return p(m,g,b,E(k._payload),T)}if(fo(k)||Zi(k))return m=m.get(b)||null,f(g,m,k,T,null);Wa(g,k)}return null}function y(m,g,b,k){for(var T=null,E=null,S=g,I=g=0,q=null;S!==null&&I<b.length;I++){S.index>I?(q=S,S=null):q=S.sibling;var A=h(m,S,b[I],k);if(A===null){S===null&&(S=q);break}e&&S&&A.alternate===null&&t(m,S),g=i(A,g,I),E===null?T=A:E.sibling=A,E=A,S=q}if(I===b.length)return n(m,S),We&&rs(m,I),T;if(S===null){for(;I<b.length;I++)S=u(m,b[I],k),S!==null&&(g=i(S,g,I),E===null?T=S:E.sibling=S,E=S);return We&&rs(m,I),T}for(S=r(m,S);I<b.length;I++)q=p(S,m,I,b[I],k),q!==null&&(e&&q.alternate!==null&&S.delete(q.key===null?I:q.key),g=i(q,g,I),E===null?T=q:E.sibling=q,E=q);return e&&S.forEach(function(N){return t(m,N)}),We&&rs(m,I),T}function w(m,g,b,k){var T=Zi(b);if(typeof T!="function")throw Error(ne(150));if(b=T.call(b),b==null)throw Error(ne(151));for(var E=T=null,S=g,I=g=0,q=null,A=b.next();S!==null&&!A.done;I++,A=b.next()){S.index>I?(q=S,S=null):q=S.sibling;var N=h(m,S,A.value,k);if(N===null){S===null&&(S=q);break}e&&S&&N.alternate===null&&t(m,S),g=i(N,g,I),E===null?T=N:E.sibling=N,E=N,S=q}if(A.done)return n(m,S),We&&rs(m,I),T;if(S===null){for(;!A.done;I++,A=b.next())A=u(m,A.value,k),A!==null&&(g=i(A,g,I),E===null?T=A:E.sibling=A,E=A);return We&&rs(m,I),T}for(S=r(m,S);!A.done;I++,A=b.next())A=p(S,m,I,A.value,k),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?I:A.key),g=i(A,g,I),E===null?T=A:E.sibling=A,E=A);return e&&S.forEach(function(H){return t(m,H)}),We&&rs(m,I),T}function v(m,g,b,k){if(typeof b=="object"&&b!==null&&b.type===Us&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Aa:e:{for(var T=b.key,E=g;E!==null;){if(E.key===T){if(T=b.type,T===Us){if(E.tag===7){n(m,E.sibling),g=s(E,b.props.children),g.return=m,m=g;break e}}else if(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vr&&Vm(T)===E.type){n(m,E.sibling),g=s(E,b.props),g.ref=so(m,E,b),g.return=m,m=g;break e}n(m,E);break}else t(m,E);E=E.sibling}b.type===Us?(g=ds(b.props.children,m.mode,k,b.key),g.return=m,m=g):(k=bl(b.type,b.key,b.props,null,m.mode,k),k.ref=so(m,g,b),k.return=m,m=k)}return a(m);case $s:e:{for(E=b.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(m,g.sibling),g=s(g,b.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=Zd(b,m.mode,k),g.return=m,m=g}return a(m);case vr:return E=b._init,v(m,g,E(b._payload),k)}if(fo(b))return y(m,g,b,k);if(Zi(b))return w(m,g,b,k);Wa(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(m,g.sibling),g=s(g,b),g.return=m,m=g):(n(m,g),g=Jd(b,m.mode,k),g.return=m,m=g),a(m)):n(m,g)}return v}var bi=Tx(!0),Ix=Tx(!1),Bl=Jr(null),$l=null,Xs=null,Sh=null;function _h(){Sh=Xs=$l=null}function Eh(e){var t=Bl.current;He(Bl),e._currentValue=t}function Yu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function li(e,t){$l=e,Sh=Xs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vt=!0),e.firstContext=null)}function kn(e){var t=e._currentValue;if(Sh!==e)if(e={context:e,memoizedValue:t,next:null},Xs===null){if($l===null)throw Error(ne(308));Xs=e,$l.dependencies={lanes:0,firstContext:e}}else Xs=Xs.next=e;return t}var os=null;function Nh(e){os===null?os=[e]:os.push(e)}function Rx(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Nh(t)):(n.next=s.next,s.next=n),t.interleaved=n,hr(e,r)}function hr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var br=!1;function jh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Br(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,hr(e,n)}return s=r.interleaved,s===null?(t.next=t,Nh(r)):(t.next=s.next,s.next=t),r.interleaved=t,hr(e,n)}function ml(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fh(e,n)}}function qm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ul(e,t,n,r){var s=e.updateQueue;br=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var u=s.baseState;a=0,f=d=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,w=l;switch(h=t,p=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){u=y.call(p,u,h);break e}u=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,h=typeof y=="function"?y.call(p,u,h):y,h==null)break e;u=Xe({},u,h);break e;case 2:br=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=p,c=u):f=f.next=p,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(f===null&&(c=u),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);xs|=a,e.lanes=a,e.memoizedState=u}}function Gm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var da={},Xn=Jr(da),zo=Jr(da),Ho=Jr(da);function as(e){if(e===da)throw Error(ne(174));return e}function Ch(e,t){switch($e(Ho,t),$e(zo,e),$e(Xn,da),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Cu(t,e)}He(Xn),$e(Xn,t)}function ki(){He(Xn),He(zo),He(Ho)}function Ax(e){as(Ho.current);var t=as(Xn.current),n=Cu(t,e.type);t!==n&&($e(zo,e),$e(Xn,n))}function Th(e){zo.current===e&&(He(Xn),He(zo))}var Ge=Jr(0);function zl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qd=[];function Ih(){for(var e=0;e<qd.length;e++)qd[e]._workInProgressVersionPrimary=null;qd.length=0}var gl=yr.ReactCurrentDispatcher,Gd=yr.ReactCurrentBatchConfig,ys=0,Ye=null,ut=null,yt=null,Hl=!1,bo=!1,Wo=0,hS=0;function Nt(){throw Error(ne(321))}function Rh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dn(e[n],t[n]))return!1;return!0}function Lh(e,t,n,r,s,i){if(ys=i,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gl.current=e===null||e.memoizedState===null?yS:xS,e=n(r,s),bo){i=0;do{if(bo=!1,Wo=0,25<=i)throw Error(ne(301));i+=1,yt=ut=null,t.updateQueue=null,gl.current=wS,e=n(r,s)}while(bo)}if(gl.current=Wl,t=ut!==null&&ut.next!==null,ys=0,yt=ut=Ye=null,Hl=!1,t)throw Error(ne(300));return e}function Ah(){var e=Wo!==0;return Wo=0,e}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ye.memoizedState=yt=e:yt=yt.next=e,yt}function Sn(){if(ut===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=yt===null?Ye.memoizedState:yt.next;if(t!==null)yt=t,ut=e;else{if(e===null)throw Error(ne(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},yt===null?Ye.memoizedState=yt=e:yt=yt.next=e}return yt}function Vo(e,t){return typeof t=="function"?t(e):t}function Yd(e){var t=Sn(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=ut,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var f=d.lane;if((ys&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var u={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,a=r):c=c.next=u,Ye.lanes|=f,xs|=f}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,Dn(r,t.memoizedState)||(Vt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Ye.lanes|=i,xs|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xd(e){var t=Sn(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Dn(i,t.memoizedState)||(Vt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Px(){}function Mx(e,t){var n=Ye,r=Sn(),s=t(),i=!Dn(r.memoizedState,s);if(i&&(r.memoizedState=s,Vt=!0),r=r.queue,Ph(Fx.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,qo(9,Ox.bind(null,n,r,s,t),void 0,null),wt===null)throw Error(ne(349));ys&30||Dx(n,t,s)}return s}function Dx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ox(e,t,n,r){t.value=n,t.getSnapshot=r,Bx(t)&&$x(e)}function Fx(e,t,n){return n(function(){Bx(t)&&$x(e)})}function Bx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dn(e,n)}catch{return!0}}function $x(e){var t=hr(e,1);t!==null&&Pn(t,e,1,-1)}function Ym(e){var t=$n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:e},t.queue=e,e=e.dispatch=gS.bind(null,Ye,e),[t.memoizedState,e]}function qo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ux(){return Sn().memoizedState}function yl(e,t,n,r){var s=$n();Ye.flags|=e,s.memoizedState=qo(1|t,n,void 0,r===void 0?null:r)}function Pc(e,t,n,r){var s=Sn();r=r===void 0?null:r;var i=void 0;if(ut!==null){var a=ut.memoizedState;if(i=a.destroy,r!==null&&Rh(r,a.deps)){s.memoizedState=qo(t,n,i,r);return}}Ye.flags|=e,s.memoizedState=qo(1|t,n,i,r)}function Xm(e,t){return yl(8390656,8,e,t)}function Ph(e,t){return Pc(2048,8,e,t)}function zx(e,t){return Pc(4,2,e,t)}function Hx(e,t){return Pc(4,4,e,t)}function Wx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vx(e,t,n){return n=n!=null?n.concat([e]):null,Pc(4,4,Wx.bind(null,t,e),n)}function Mh(){}function qx(e,t){var n=Sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Gx(e,t){var n=Sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rh(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yx(e,t,n){return ys&21?(Dn(n,t)||(n=Zy(),Ye.lanes|=n,xs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vt=!0),e.memoizedState=n)}function pS(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=Gd.transition;Gd.transition={};try{e(!1),t()}finally{Le=n,Gd.transition=r}}function Xx(){return Sn().memoizedState}function mS(e,t,n){var r=Ur(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kx(e))Qx(t,n);else if(n=Rx(e,t,n,r),n!==null){var s=Ot();Pn(n,e,r,s),Jx(n,t,r)}}function gS(e,t,n){var r=Ur(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kx(e))Qx(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Dn(l,a)){var c=t.interleaved;c===null?(s.next=s,Nh(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Rx(e,t,s,r),n!==null&&(s=Ot(),Pn(n,e,r,s),Jx(n,t,r))}}function Kx(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function Qx(e,t){bo=Hl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jx(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fh(e,n)}}var Wl={readContext:kn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},yS={readContext:kn,useCallback:function(e,t){return $n().memoizedState=[e,t===void 0?null:t],e},useContext:kn,useEffect:Xm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yl(4194308,4,Wx.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yl(4194308,4,e,t)},useInsertionEffect:function(e,t){return yl(4,2,e,t)},useMemo:function(e,t){var n=$n();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$n();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mS.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=$n();return e={current:e},t.memoizedState=e},useState:Ym,useDebugValue:Mh,useDeferredValue:function(e){return $n().memoizedState=e},useTransition:function(){var e=Ym(!1),t=e[0];return e=pS.bind(null,e[1]),$n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,s=$n();if(We){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=t(),wt===null)throw Error(ne(349));ys&30||Dx(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Xm(Fx.bind(null,r,i,e),[e]),r.flags|=2048,qo(9,Ox.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=$n(),t=wt.identifierPrefix;if(We){var n=or,r=ir;n=(r&~(1<<32-An(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Wo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=hS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xS={readContext:kn,useCallback:qx,useContext:kn,useEffect:Ph,useImperativeHandle:Vx,useInsertionEffect:zx,useLayoutEffect:Hx,useMemo:Gx,useReducer:Yd,useRef:Ux,useState:function(){return Yd(Vo)},useDebugValue:Mh,useDeferredValue:function(e){var t=Sn();return Yx(t,ut.memoizedState,e)},useTransition:function(){var e=Yd(Vo)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:Px,useSyncExternalStore:Mx,useId:Xx,unstable_isNewReconciler:!1},wS={readContext:kn,useCallback:qx,useContext:kn,useEffect:Ph,useImperativeHandle:Vx,useInsertionEffect:zx,useLayoutEffect:Hx,useMemo:Gx,useReducer:Xd,useRef:Ux,useState:function(){return Xd(Vo)},useDebugValue:Mh,useDeferredValue:function(e){var t=Sn();return ut===null?t.memoizedState=e:Yx(t,ut.memoizedState,e)},useTransition:function(){var e=Xd(Vo)[0],t=Sn().memoizedState;return[e,t]},useMutableSource:Px,useSyncExternalStore:Mx,useId:Xx,unstable_isNewReconciler:!1};function Tn(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Xu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Mc={isMounted:function(e){return(e=e._reactInternals)?js(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ot(),s=Ur(e),i=ar(r,s);i.payload=t,n!=null&&(i.callback=n),t=Br(e,i,s),t!==null&&(Pn(t,e,s,r),ml(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ot(),s=Ur(e),i=ar(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Br(e,i,s),t!==null&&(Pn(t,e,s,r),ml(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ot(),r=Ur(e),s=ar(n,r);s.tag=2,t!=null&&(s.callback=t),t=Br(e,s,r),t!==null&&(Pn(t,e,r,n),ml(t,e,r))}};function Km(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Fo(n,r)||!Fo(s,i):!0}function Zx(e,t,n){var r=!1,s=Gr,i=t.contextType;return typeof i=="object"&&i!==null?i=kn(i):(s=Gt(t)?ms:Tt.current,r=t.contextTypes,i=(r=r!=null)?wi(e,s):Gr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Mc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Qm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Mc.enqueueReplaceState(t,t.state,null)}function Ku(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},jh(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=kn(i):(i=Gt(t)?ms:Tt.current,s.context=wi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Xu(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Mc.enqueueReplaceState(s,s.state,null),Ul(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Si(e,t){try{var n="",r=t;do n+=G2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Kd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var vS=typeof WeakMap=="function"?WeakMap:Map;function ew(e,t,n){n=ar(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,lf=r),Qu(e,t)},n}function tw(e,t,n){n=ar(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Qu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qu(e,t),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Jm(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new vS;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=PS.bind(null,e,t,n),t.then(e,e))}function Zm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function eg(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ar(-1,1),t.tag=2,Br(n,t,1))),n.lanes|=1),e)}var bS=yr.ReactCurrentOwner,Vt=!1;function At(e,t,n,r){t.child=e===null?Ix(t,null,n,r):bi(t,e.child,n,r)}function tg(e,t,n,r,s){n=n.render;var i=t.ref;return li(t,s),r=Lh(e,t,n,r,i,s),n=Ah(),e!==null&&!Vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pr(e,t,s)):(We&&n&&vh(t),t.flags|=1,At(e,t,r,s),t.child)}function ng(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Hh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,nw(e,t,i,r,s)):(e=bl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Fo,n(a,r)&&e.ref===t.ref)return pr(e,t,s)}return t.flags|=1,e=zr(i,r),e.ref=t.ref,e.return=t,t.child=e}function nw(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Fo(i,r)&&e.ref===t.ref)if(Vt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Vt=!0);else return t.lanes=e.lanes,pr(e,t,s)}return Ju(e,t,n,r,s)}function rw(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Qs,Zt),Zt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(Qs,Zt),Zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(Qs,Zt),Zt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,$e(Qs,Zt),Zt|=r;return At(e,t,s,n),t.child}function sw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ju(e,t,n,r,s){var i=Gt(n)?ms:Tt.current;return i=wi(t,i),li(t,s),n=Lh(e,t,n,r,i,s),r=Ah(),e!==null&&!Vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,pr(e,t,s)):(We&&r&&vh(t),t.flags|=1,At(e,t,n,s),t.child)}function rg(e,t,n,r,s){if(Gt(n)){var i=!0;Dl(t)}else i=!1;if(li(t,s),t.stateNode===null)xl(e,t),Zx(t,n,r),Ku(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=kn(d):(d=Gt(n)?ms:Tt.current,d=wi(t,d));var f=n.getDerivedStateFromProps,u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Qm(t,a,r,d),br=!1;var h=t.memoizedState;a.state=h,Ul(t,r,a,s),c=t.memoizedState,l!==r||h!==c||qt.current||br?(typeof f=="function"&&(Xu(t,n,f,r),c=t.memoizedState),(l=br||Km(t,n,l,r,h,c,d))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Lx(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Tn(t.type,l),a.props=d,u=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=kn(c):(c=Gt(n)?ms:Tt.current,c=wi(t,c));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==u||h!==c)&&Qm(t,a,r,c),br=!1,h=t.memoizedState,a.state=h,Ul(t,r,a,s);var y=t.memoizedState;l!==u||h!==y||qt.current||br?(typeof p=="function"&&(Xu(t,n,p,r),y=t.memoizedState),(d=br||Km(t,n,d,r,h,y,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Zu(e,t,n,r,i,s)}function Zu(e,t,n,r,s,i){sw(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&zm(t,n,!1),pr(e,t,i);r=t.stateNode,bS.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,l,i)):At(e,t,l,i),t.memoizedState=r.state,s&&zm(t,n,!0),t.child}function iw(e){var t=e.stateNode;t.pendingContext?Um(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Um(e,t.context,!1),Ch(e,t.containerInfo)}function sg(e,t,n,r,s){return vi(),kh(s),t.flags|=256,At(e,t,n,r),t.child}var ef={dehydrated:null,treeContext:null,retryLane:0};function tf(e){return{baseLanes:e,cachePool:null,transitions:null}}function ow(e,t,n){var r=t.pendingProps,s=Ge.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),$e(Ge,s&1),e===null)return Gu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Fc(a,r,0,null),e=ds(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=tf(n),t.memoizedState=ef,e):Dh(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return kS(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=zr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=zr(l,i):(i=ds(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?tf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=ef,r}return i=e.child,e=i.sibling,r=zr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Dh(e,t){return t=Fc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Va(e,t,n,r){return r!==null&&kh(r),bi(t,e.child,null,n),e=Dh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kS(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Kd(Error(ne(422))),Va(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Fc({mode:"visible",children:r.children},s,0,null),i=ds(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&bi(t,e.child,null,a),t.child.memoizedState=tf(a),t.memoizedState=ef,i);if(!(t.mode&1))return Va(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ne(419)),r=Kd(i,r,void 0),Va(e,t,a,r)}if(l=(a&e.childLanes)!==0,Vt||l){if(r=wt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(e,s),Pn(r,e,s,-1))}return zh(),r=Kd(Error(ne(421))),Va(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=MS.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,tn=Fr(s.nextSibling),nn=t,We=!0,Rn=null,e!==null&&(gn[yn++]=ir,gn[yn++]=or,gn[yn++]=gs,ir=e.id,or=e.overflow,gs=t),t=Dh(t,r.children),t.flags|=4096,t)}function ig(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Yu(e.return,t,n)}function Qd(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function aw(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(At(e,t,r.children,n),r=Ge.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ig(e,n,t);else if(e.tag===19)ig(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($e(Ge,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&zl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qd(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&zl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qd(t,!0,n,null,i);break;case"together":Qd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,n=zr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function SS(e,t,n){switch(t.tag){case 3:iw(t),vi();break;case 5:Ax(t);break;case 1:Gt(t.type)&&Dl(t);break;case 4:Ch(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;$e(Bl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?($e(Ge,Ge.current&1),t.flags|=128,null):n&t.child.childLanes?ow(e,t,n):($e(Ge,Ge.current&1),e=pr(e,t,n),e!==null?e.sibling:null);$e(Ge,Ge.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return aw(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ge,Ge.current),r)break;return null;case 22:case 23:return t.lanes=0,rw(e,t,n)}return pr(e,t,n)}var lw,nf,cw,dw;lw=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nf=function(){};cw=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,as(Xn.current);var i=null;switch(n){case"input":s=_u(e,s),r=_u(e,r),i=[];break;case"select":s=Xe({},s,{value:void 0}),r=Xe({},r,{value:void 0}),i=[];break;case"textarea":s=ju(e,s),r=ju(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Pl)}Tu(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ro.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ro.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ze("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};dw=function(e,t,n,r){n!==r&&(t.flags|=4)};function io(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _S(e,t,n){var r=t.pendingProps;switch(bh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return Gt(t.type)&&Ml(),jt(t),null;case 3:return r=t.stateNode,ki(),He(qt),He(Tt),Ih(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ha(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rn!==null&&(uf(Rn),Rn=null))),nf(e,t),jt(t),null;case 5:Th(t);var s=as(Ho.current);if(n=t.type,e!==null&&t.stateNode!=null)cw(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ne(166));return jt(t),null}if(e=as(Xn.current),Ha(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Vn]=t,r[Uo]=i,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<po.length;s++)ze(po[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":pm(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":gm(r,i),ze("invalid",r)}Tu(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&za(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&za(r.textContent,l,e),s=["children",""+l]):Ro.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ze("scroll",r)}switch(n){case"input":Pa(r),mm(r,i,!0);break;case"textarea":Pa(r),ym(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fy(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Vn]=t,e[Uo]=r,lw(e,t,!1,!1),t.stateNode=e;e:{switch(a=Iu(n,r),n){case"dialog":ze("cancel",e),ze("close",e),s=r;break;case"iframe":case"object":case"embed":ze("load",e),s=r;break;case"video":case"audio":for(s=0;s<po.length;s++)ze(po[s],e);s=r;break;case"source":ze("error",e),s=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),s=r;break;case"details":ze("toggle",e),s=r;break;case"input":pm(e,r),s=_u(e,r),ze("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Xe({},r,{value:void 0}),ze("invalid",e);break;case"textarea":gm(e,r),s=ju(e,r),ze("invalid",e);break;default:s=r}Tu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Uy(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&By(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Lo(e,c):typeof c=="number"&&Lo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ro.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",e):c!=null&&oh(e,i,c,a))}switch(n){case"input":Pa(e),mm(e,r,!1);break;case"textarea":Pa(e),ym(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?si(e,!!r.multiple,i,!1):r.defaultValue!=null&&si(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jt(t),null;case 6:if(e&&t.stateNode!=null)dw(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ne(166));if(n=as(Ho.current),as(Xn.current),Ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vn]=t,(i=r.nodeValue!==n)&&(e=nn,e!==null))switch(e.tag){case 3:za(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&za(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=t,t.stateNode=r}return jt(t),null;case 13:if(He(Ge),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&tn!==null&&t.mode&1&&!(t.flags&128))Cx(),vi(),t.flags|=98560,i=!1;else if(i=Ha(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ne(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[Vn]=t}else vi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jt(t),i=!1}else Rn!==null&&(uf(Rn),Rn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ge.current&1?pt===0&&(pt=3):zh())),t.updateQueue!==null&&(t.flags|=4),jt(t),null);case 4:return ki(),nf(e,t),e===null&&Bo(t.stateNode.containerInfo),jt(t),null;case 10:return Eh(t.type._context),jt(t),null;case 17:return Gt(t.type)&&Ml(),jt(t),null;case 19:if(He(Ge),i=t.memoizedState,i===null)return jt(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)io(i,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=zl(e),a!==null){for(t.flags|=128,io(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $e(Ge,Ge.current&1|2),t.child}e=e.sibling}i.tail!==null&&st()>_i&&(t.flags|=128,r=!0,io(i,!1),t.lanes=4194304)}else{if(!r)if(e=zl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),io(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!We)return jt(t),null}else 2*st()-i.renderingStartTime>_i&&n!==1073741824&&(t.flags|=128,r=!0,io(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=st(),t.sibling=null,n=Ge.current,$e(Ge,r?n&1|2:n&1),t):(jt(t),null);case 22:case 23:return Uh(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Zt&1073741824&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function ES(e,t){switch(bh(t),t.tag){case 1:return Gt(t.type)&&Ml(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ki(),He(qt),He(Tt),Ih(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Th(t),null;case 13:if(He(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));vi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Ge),null;case 4:return ki(),null;case 10:return Eh(t.type._context),null;case 22:case 23:return Uh(),null;case 24:return null;default:return null}}var qa=!1,Ct=!1,NS=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Ks(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(e,t,r)}else n.current=null}function rf(e,t,n){try{n()}catch(r){Ze(e,t,r)}}var og=!1;function jS(e,t){if($u=Rl,e=mx(),wh(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,f=0,u=e,h=null;t:for(;;){for(var p;u!==n||s!==0&&u.nodeType!==3||(l=a+s),u!==i||r!==0&&u.nodeType!==3||(c=a+r),u.nodeType===3&&(a+=u.nodeValue.length),(p=u.firstChild)!==null;)h=u,u=p;for(;;){if(u===e)break t;if(h===n&&++d===s&&(l=a),h===i&&++f===r&&(c=a),(p=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uu={focusedElem:e,selectionRange:n},Rl=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,v=y.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?w:Tn(t.type,w),v);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(k){Ze(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return y=og,og=!1,y}function ko(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&rf(t,n,i)}s=s.next}while(s!==r)}}function Dc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function uw(e){var t=e.alternate;t!==null&&(e.alternate=null,uw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vn],delete t[Uo],delete t[Wu],delete t[cS],delete t[dS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fw(e){return e.tag===5||e.tag===3||e.tag===4}function ag(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function of(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Pl));else if(r!==4&&(e=e.child,e!==null))for(of(e,t,n),e=e.sibling;e!==null;)of(e,t,n),e=e.sibling}function af(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(af(e,t,n),e=e.sibling;e!==null;)af(e,t,n),e=e.sibling}var kt=null,In=!1;function wr(e,t,n){for(n=n.child;n!==null;)hw(e,t,n),n=n.sibling}function hw(e,t,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Cc,n)}catch{}switch(n.tag){case 5:Ct||Ks(n,t);case 6:var r=kt,s=In;kt=null,wr(e,t,n),kt=r,In=s,kt!==null&&(In?(e=kt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(In?(e=kt,n=n.stateNode,e.nodeType===8?Wd(e.parentNode,n):e.nodeType===1&&Wd(e,n),Do(e)):Wd(kt,n.stateNode));break;case 4:r=kt,s=In,kt=n.stateNode.containerInfo,In=!0,wr(e,t,n),kt=r,In=s;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&rf(n,t,a),s=s.next}while(s!==r)}wr(e,t,n);break;case 1:if(!Ct&&(Ks(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ze(n,t,l)}wr(e,t,n);break;case 21:wr(e,t,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,wr(e,t,n),Ct=r):wr(e,t,n);break;default:wr(e,t,n)}}function lg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new NS),t.forEach(function(r){var s=DS.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:kt=l.stateNode,In=!1;break e;case 3:kt=l.stateNode.containerInfo,In=!0;break e;case 4:kt=l.stateNode.containerInfo,In=!0;break e}l=l.return}if(kt===null)throw Error(ne(160));hw(i,a,s),kt=null,In=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ze(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pw(t,e),t=t.sibling}function pw(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jn(t,e),Fn(e),r&4){try{ko(3,e,e.return),Dc(3,e)}catch(w){Ze(e,e.return,w)}try{ko(5,e,e.return)}catch(w){Ze(e,e.return,w)}}break;case 1:jn(t,e),Fn(e),r&512&&n!==null&&Ks(n,n.return);break;case 5:if(jn(t,e),Fn(e),r&512&&n!==null&&Ks(n,n.return),e.flags&32){var s=e.stateNode;try{Lo(s,"")}catch(w){Ze(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Dy(s,i),Iu(l,a);var d=Iu(l,i);for(a=0;a<c.length;a+=2){var f=c[a],u=c[a+1];f==="style"?Uy(s,u):f==="dangerouslySetInnerHTML"?By(s,u):f==="children"?Lo(s,u):oh(s,f,u,d)}switch(l){case"input":Eu(s,i);break;case"textarea":Oy(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?si(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?si(s,!!i.multiple,i.defaultValue,!0):si(s,!!i.multiple,i.multiple?[]:"",!1))}s[Uo]=i}catch(w){Ze(e,e.return,w)}}break;case 6:if(jn(t,e),Fn(e),r&4){if(e.stateNode===null)throw Error(ne(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){Ze(e,e.return,w)}}break;case 3:if(jn(t,e),Fn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Do(t.containerInfo)}catch(w){Ze(e,e.return,w)}break;case 4:jn(t,e),Fn(e);break;case 13:jn(t,e),Fn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bh=st())),r&4&&lg(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Ct=(d=Ct)||f,jn(t,e),Ct=d):jn(t,e),Fn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(ue=e,f=e.child;f!==null;){for(u=ue=f;ue!==null;){switch(h=ue,p=h.child,h.tag){case 0:case 11:case 14:case 15:ko(4,h,h.return);break;case 1:Ks(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){Ze(r,n,w)}}break;case 5:Ks(h,h.return);break;case 22:if(h.memoizedState!==null){dg(u);continue}}p!==null?(p.return=h,ue=p):dg(u)}f=f.sibling}e:for(f=null,u=e;;){if(u.tag===5){if(f===null){f=u;try{s=u.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=u.stateNode,c=u.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$y("display",a))}catch(w){Ze(e,e.return,w)}}}else if(u.tag===6){if(f===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(w){Ze(e,e.return,w)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:jn(t,e),Fn(e),r&4&&lg(e);break;case 21:break;default:jn(t,e),Fn(e)}}function Fn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(fw(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Lo(s,""),r.flags&=-33);var i=ag(e);af(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=ag(e);of(e,l,a);break;default:throw Error(ne(161))}}catch(c){Ze(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function CS(e,t,n){ue=e,mw(e)}function mw(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var s=ue,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||qa;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ct;l=qa;var d=Ct;if(qa=a,(Ct=c)&&!d)for(ue=s;ue!==null;)a=ue,c=a.child,a.tag===22&&a.memoizedState!==null?ug(s):c!==null?(c.return=a,ue=c):ug(s);for(;i!==null;)ue=i,mw(i),i=i.sibling;ue=s,qa=l,Ct=d}cg(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ue=i):cg(e)}}function cg(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ct||Dc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Tn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Gm(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Gm(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var u=f.dehydrated;u!==null&&Do(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Ct||t.flags&512&&sf(t)}catch(h){Ze(t,t.return,h)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function dg(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function ug(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Dc(4,t)}catch(c){Ze(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ze(t,s,c)}}var i=t.return;try{sf(t)}catch(c){Ze(t,i,c)}break;case 5:var a=t.return;try{sf(t)}catch(c){Ze(t,a,c)}}}catch(c){Ze(t,t.return,c)}if(t===e){ue=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ue=l;break}ue=t.return}}var TS=Math.ceil,Vl=yr.ReactCurrentDispatcher,Oh=yr.ReactCurrentOwner,vn=yr.ReactCurrentBatchConfig,Ne=0,wt=null,ct=null,St=0,Zt=0,Qs=Jr(0),pt=0,Go=null,xs=0,Oc=0,Fh=0,So=null,Wt=null,Bh=0,_i=1/0,er=null,ql=!1,lf=null,$r=null,Ga=!1,Ir=null,Gl=0,_o=0,cf=null,wl=-1,vl=0;function Ot(){return Ne&6?st():wl!==-1?wl:wl=st()}function Ur(e){return e.mode&1?Ne&2&&St!==0?St&-St:fS.transition!==null?(vl===0&&(vl=Zy()),vl):(e=Le,e!==0||(e=window.event,e=e===void 0?16:ox(e.type)),e):1}function Pn(e,t,n,r){if(50<_o)throw _o=0,cf=null,Error(ne(185));aa(e,n,r),(!(Ne&2)||e!==wt)&&(e===wt&&(!(Ne&2)&&(Oc|=n),pt===4&&jr(e,St)),Yt(e,r),n===1&&Ne===0&&!(t.mode&1)&&(_i=st()+500,Ac&&Zr()))}function Yt(e,t){var n=e.callbackNode;fk(e,t);var r=Il(e,e===wt?St:0);if(r===0)n!==null&&vm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vm(n),t===1)e.tag===0?uS(fg.bind(null,e)):Ex(fg.bind(null,e)),aS(function(){!(Ne&6)&&Zr()}),n=null;else{switch(ex(r)){case 1:n=uh;break;case 4:n=Qy;break;case 16:n=Tl;break;case 536870912:n=Jy;break;default:n=Tl}n=Sw(n,gw.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gw(e,t){if(wl=-1,vl=0,Ne&6)throw Error(ne(327));var n=e.callbackNode;if(ci()&&e.callbackNode!==n)return null;var r=Il(e,e===wt?St:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Yl(e,r);else{t=r;var s=Ne;Ne|=2;var i=xw();(wt!==e||St!==t)&&(er=null,_i=st()+500,cs(e,t));do try{LS();break}catch(l){yw(e,l)}while(1);_h(),Vl.current=i,Ne=s,ct!==null?t=0:(wt=null,St=0,t=pt)}if(t!==0){if(t===2&&(s=Mu(e),s!==0&&(r=s,t=df(e,s))),t===1)throw n=Go,cs(e,0),jr(e,r),Yt(e,st()),n;if(t===6)jr(e,r);else{if(s=e.current.alternate,!(r&30)&&!IS(s)&&(t=Yl(e,r),t===2&&(i=Mu(e),i!==0&&(r=i,t=df(e,i))),t===1))throw n=Go,cs(e,0),jr(e,r),Yt(e,st()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ne(345));case 2:ss(e,Wt,er);break;case 3:if(jr(e,r),(r&130023424)===r&&(t=Bh+500-st(),10<t)){if(Il(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ot(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Hu(ss.bind(null,e,Wt,er),t);break}ss(e,Wt,er);break;case 4:if(jr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-An(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TS(r/1960))-r,10<r){e.timeoutHandle=Hu(ss.bind(null,e,Wt,er),r);break}ss(e,Wt,er);break;case 5:ss(e,Wt,er);break;default:throw Error(ne(329))}}}return Yt(e,st()),e.callbackNode===n?gw.bind(null,e):null}function df(e,t){var n=So;return e.current.memoizedState.isDehydrated&&(cs(e,t).flags|=256),e=Yl(e,t),e!==2&&(t=Wt,Wt=n,t!==null&&uf(t)),e}function uf(e){Wt===null?Wt=e:Wt.push.apply(Wt,e)}function IS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Dn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jr(e,t){for(t&=~Fh,t&=~Oc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-An(t),r=1<<n;e[n]=-1,t&=~r}}function fg(e){if(Ne&6)throw Error(ne(327));ci();var t=Il(e,0);if(!(t&1))return Yt(e,st()),null;var n=Yl(e,t);if(e.tag!==0&&n===2){var r=Mu(e);r!==0&&(t=r,n=df(e,r))}if(n===1)throw n=Go,cs(e,0),jr(e,t),Yt(e,st()),n;if(n===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ss(e,Wt,er),Yt(e,st()),null}function $h(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(_i=st()+500,Ac&&Zr())}}function ws(e){Ir!==null&&Ir.tag===0&&!(Ne&6)&&ci();var t=Ne;Ne|=1;var n=vn.transition,r=Le;try{if(vn.transition=null,Le=1,e)return e()}finally{Le=r,vn.transition=n,Ne=t,!(Ne&6)&&Zr()}}function Uh(){Zt=Qs.current,He(Qs)}function cs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,oS(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(bh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ml();break;case 3:ki(),He(qt),He(Tt),Ih();break;case 5:Th(r);break;case 4:ki();break;case 13:He(Ge);break;case 19:He(Ge);break;case 10:Eh(r.type._context);break;case 22:case 23:Uh()}n=n.return}if(wt=e,ct=e=zr(e.current,null),St=Zt=t,pt=0,Go=null,Fh=Oc=xs=0,Wt=So=null,os!==null){for(t=0;t<os.length;t++)if(n=os[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}os=null}return e}function yw(e,t){do{var n=ct;try{if(_h(),gl.current=Wl,Hl){for(var r=Ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hl=!1}if(ys=0,yt=ut=Ye=null,bo=!1,Wo=0,Oh.current=null,n===null||n.return===null){pt=1,Go=t,ct=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=St,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,u=f.tag;if(!(f.mode&1)&&(u===0||u===11||u===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Zm(a);if(p!==null){p.flags&=-257,eg(p,a,l,i,t),p.mode&1&&Jm(i,d,t),t=p,c=d;var y=t.updateQueue;if(y===null){var w=new Set;w.add(c),t.updateQueue=w}else y.add(c);break e}else{if(!(t&1)){Jm(i,d,t),zh();break e}c=Error(ne(426))}}else if(We&&l.mode&1){var v=Zm(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),eg(v,a,l,i,t),kh(Si(c,l));break e}}i=c=Si(c,l),pt!==4&&(pt=2),So===null?So=[i]:So.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=ew(i,c,t);qm(i,m);break e;case 1:l=c;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($r===null||!$r.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=tw(i,l,t);qm(i,k);break e}}i=i.return}while(i!==null)}vw(n)}catch(T){t=T,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(1)}function xw(){var e=Vl.current;return Vl.current=Wl,e===null?Wl:e}function zh(){(pt===0||pt===3||pt===2)&&(pt=4),wt===null||!(xs&268435455)&&!(Oc&268435455)||jr(wt,St)}function Yl(e,t){var n=Ne;Ne|=2;var r=xw();(wt!==e||St!==t)&&(er=null,cs(e,t));do try{RS();break}catch(s){yw(e,s)}while(1);if(_h(),Ne=n,Vl.current=r,ct!==null)throw Error(ne(261));return wt=null,St=0,pt}function RS(){for(;ct!==null;)ww(ct)}function LS(){for(;ct!==null&&!rk();)ww(ct)}function ww(e){var t=kw(e.alternate,e,Zt);e.memoizedProps=e.pendingProps,t===null?vw(e):ct=t,Oh.current=null}function vw(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ES(n,t),n!==null){n.flags&=32767,ct=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pt=6,ct=null;return}}else if(n=_S(n,t,Zt),n!==null){ct=n;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);pt===0&&(pt=5)}function ss(e,t,n){var r=Le,s=vn.transition;try{vn.transition=null,Le=1,AS(e,t,n,r)}finally{vn.transition=s,Le=r}return null}function AS(e,t,n,r){do ci();while(Ir!==null);if(Ne&6)throw Error(ne(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(hk(e,i),e===wt&&(ct=wt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,Sw(Tl,function(){return ci(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vn.transition,vn.transition=null;var a=Le;Le=1;var l=Ne;Ne|=4,Oh.current=null,jS(e,n),pw(n,e),Zk(Uu),Rl=!!$u,Uu=$u=null,e.current=n,CS(n),sk(),Ne=l,Le=a,vn.transition=i}else e.current=n;if(Ga&&(Ga=!1,Ir=e,Gl=s),i=e.pendingLanes,i===0&&($r=null),ak(n.stateNode),Yt(e,st()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ql)throw ql=!1,e=lf,lf=null,e;return Gl&1&&e.tag!==0&&ci(),i=e.pendingLanes,i&1?e===cf?_o++:(_o=0,cf=e):_o=0,Zr(),null}function ci(){if(Ir!==null){var e=ex(Gl),t=vn.transition,n=Le;try{if(vn.transition=null,Le=16>e?16:e,Ir===null)var r=!1;else{if(e=Ir,Ir=null,Gl=0,Ne&6)throw Error(ne(331));var s=Ne;for(Ne|=4,ue=e.current;ue!==null;){var i=ue,a=i.child;if(ue.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ue=d;ue!==null;){var f=ue;switch(f.tag){case 0:case 11:case 15:ko(8,f,i)}var u=f.child;if(u!==null)u.return=f,ue=u;else for(;ue!==null;){f=ue;var h=f.sibling,p=f.return;if(uw(f),f===d){ue=null;break}if(h!==null){h.return=p,ue=h;break}ue=p}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var v=w.sibling;w.sibling=null,w=v}while(w!==null)}}ue=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ue=a;else e:for(;ue!==null;){if(i=ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ko(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,ue=m;break e}ue=i.return}}var g=e.current;for(ue=g;ue!==null;){a=ue;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,ue=b;else e:for(a=g;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Dc(9,l)}}catch(T){Ze(l,l.return,T)}if(l===a){ue=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,ue=k;break e}ue=l.return}}if(Ne=s,Zr(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Cc,e)}catch{}r=!0}return r}finally{Le=n,vn.transition=t}}return!1}function hg(e,t,n){t=Si(n,t),t=ew(e,t,1),e=Br(e,t,1),t=Ot(),e!==null&&(aa(e,1,t),Yt(e,t))}function Ze(e,t,n){if(e.tag===3)hg(e,e,n);else for(;t!==null;){if(t.tag===3){hg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){e=Si(n,e),e=tw(t,e,1),t=Br(t,e,1),e=Ot(),t!==null&&(aa(t,1,e),Yt(t,e));break}}t=t.return}}function PS(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&n,wt===e&&(St&n)===n&&(pt===4||pt===3&&(St&130023424)===St&&500>st()-Bh?cs(e,0):Fh|=n),Yt(e,t)}function bw(e,t){t===0&&(e.mode&1?(t=Oa,Oa<<=1,!(Oa&130023424)&&(Oa=4194304)):t=1);var n=Ot();e=hr(e,t),e!==null&&(aa(e,t,n),Yt(e,n))}function MS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bw(e,n)}function DS(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(t),bw(e,n)}var kw;kw=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||qt.current)Vt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Vt=!1,SS(e,t,n);Vt=!!(e.flags&131072)}else Vt=!1,We&&t.flags&1048576&&Nx(t,Fl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xl(e,t),e=t.pendingProps;var s=wi(t,Tt.current);li(t,n),s=Lh(null,t,r,e,s,n);var i=Ah();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gt(r)?(i=!0,Dl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jh(t),s.updater=Mc,t.stateNode=s,s._reactInternals=t,Ku(t,r,e,n),t=Zu(null,t,r,!0,i,n)):(t.tag=0,We&&i&&vh(t),At(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=FS(r),e=Tn(r,e),s){case 0:t=Ju(null,t,r,e,n);break e;case 1:t=rg(null,t,r,e,n);break e;case 11:t=tg(null,t,r,e,n);break e;case 14:t=ng(null,t,r,Tn(r.type,e),n);break e}throw Error(ne(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tn(r,s),Ju(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tn(r,s),rg(e,t,r,s,n);case 3:e:{if(iw(t),e===null)throw Error(ne(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Lx(e,t),Ul(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Si(Error(ne(423)),t),t=sg(e,t,r,n,s);break e}else if(r!==s){s=Si(Error(ne(424)),t),t=sg(e,t,r,n,s);break e}else for(tn=Fr(t.stateNode.containerInfo.firstChild),nn=t,We=!0,Rn=null,n=Ix(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vi(),r===s){t=pr(e,t,n);break e}At(e,t,r,n)}t=t.child}return t;case 5:return Ax(t),e===null&&Gu(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,zu(r,s)?a=null:i!==null&&zu(r,i)&&(t.flags|=32),sw(e,t),At(e,t,a,n),t.child;case 6:return e===null&&Gu(t),null;case 13:return ow(e,t,n);case 4:return Ch(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=bi(t,null,r,n):At(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tn(r,s),tg(e,t,r,s,n);case 7:return At(e,t,t.pendingProps,n),t.child;case 8:return At(e,t,t.pendingProps.children,n),t.child;case 12:return At(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,$e(Bl,r._currentValue),r._currentValue=a,i!==null)if(Dn(i.value,a)){if(i.children===s.children&&!qt.current){t=pr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ar(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Yu(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ne(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Yu(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}At(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,li(t,n),s=kn(s),r=r(s),t.flags|=1,At(e,t,r,n),t.child;case 14:return r=t.type,s=Tn(r,t.pendingProps),s=Tn(r.type,s),ng(e,t,r,s,n);case 15:return nw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Tn(r,s),xl(e,t),t.tag=1,Gt(r)?(e=!0,Dl(t)):e=!1,li(t,n),Zx(t,r,s),Ku(t,r,s,n),Zu(null,t,r,!0,e,n);case 19:return aw(e,t,n);case 22:return rw(e,t,n)}throw Error(ne(156,t.tag))};function Sw(e,t){return Ky(e,t)}function OS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,t,n,r){return new OS(e,t,n,r)}function Hh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FS(e){if(typeof e=="function")return Hh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lh)return 11;if(e===ch)return 14}return 2}function zr(e,t){var n=e.alternate;return n===null?(n=xn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bl(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Hh(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Us:return ds(n.children,s,i,t);case ah:a=8,s|=8;break;case vu:return e=xn(12,n,t,s|2),e.elementType=vu,e.lanes=i,e;case bu:return e=xn(13,n,t,s),e.elementType=bu,e.lanes=i,e;case ku:return e=xn(19,n,t,s),e.elementType=ku,e.lanes=i,e;case Ay:return Fc(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ry:a=10;break e;case Ly:a=9;break e;case lh:a=11;break e;case ch:a=14;break e;case vr:a=16,r=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=xn(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function ds(e,t,n,r){return e=xn(7,e,r,t),e.lanes=n,e}function Fc(e,t,n,r){return e=xn(22,e,r,t),e.elementType=Ay,e.lanes=n,e.stateNode={isHidden:!1},e}function Jd(e,t,n){return e=xn(6,e,null,t),e.lanes=n,e}function Zd(e,t,n){return t=xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BS(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ad(0),this.expirationTimes=Ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ad(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wh(e,t,n,r,s,i,a,l,c){return e=new BS(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jh(i),e}function $S(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$s,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function _w(e){if(!e)return Gr;e=e._reactInternals;e:{if(js(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var n=e.type;if(Gt(n))return _x(e,n,t)}return t}function Ew(e,t,n,r,s,i,a,l,c){return e=Wh(n,r,!0,e,s,i,a,l,c),e.context=_w(null),n=e.current,r=Ot(),s=Ur(n),i=ar(r,s),i.callback=t??null,Br(n,i,s),e.current.lanes=s,aa(e,s,r),Yt(e,r),e}function Bc(e,t,n,r){var s=t.current,i=Ot(),a=Ur(s);return n=_w(n),t.context===null?t.context=n:t.pendingContext=n,t=ar(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Br(s,t,a),e!==null&&(Pn(e,s,a,i),ml(e,s,a)),a}function Xl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vh(e,t){pg(e,t),(e=e.alternate)&&pg(e,t)}function US(){return null}var Nw=typeof reportError=="function"?reportError:function(e){console.error(e)};function qh(e){this._internalRoot=e}$c.prototype.render=qh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));Bc(e,t,null,null)};$c.prototype.unmount=qh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ws(function(){Bc(null,e,null,null)}),t[fr]=null}};function $c(e){this._internalRoot=e}$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=rx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nr.length&&t!==0&&t<Nr[n].priority;n++);Nr.splice(n,0,e),n===0&&ix(e)}};function Gh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Uc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mg(){}function zS(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Xl(a);i.call(d)}}var a=Ew(t,r,e,0,null,!1,!1,"",mg);return e._reactRootContainer=a,e[fr]=a.current,Bo(e.nodeType===8?e.parentNode:e),ws(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Xl(c);l.call(d)}}var c=Wh(e,0,!1,null,null,!1,!1,"",mg);return e._reactRootContainer=c,e[fr]=c.current,Bo(e.nodeType===8?e.parentNode:e),ws(function(){Bc(t,c,n,r)}),c}function zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Xl(a);l.call(c)}}Bc(t,a,e,s)}else a=zS(n,t,e,s,r);return Xl(a)}tx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ho(t.pendingLanes);n!==0&&(fh(t,n|1),Yt(t,st()),!(Ne&6)&&(_i=st()+500,Zr()))}break;case 13:ws(function(){var r=hr(e,1);if(r!==null){var s=Ot();Pn(r,e,1,s)}}),Vh(e,1)}};hh=function(e){if(e.tag===13){var t=hr(e,134217728);if(t!==null){var n=Ot();Pn(t,e,134217728,n)}Vh(e,134217728)}};nx=function(e){if(e.tag===13){var t=Ur(e),n=hr(e,t);if(n!==null){var r=Ot();Pn(n,e,t,r)}Vh(e,t)}};rx=function(){return Le};sx=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}};Lu=function(e,t,n){switch(t){case"input":if(Eu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Lc(r);if(!s)throw Error(ne(90));My(r),Eu(r,s)}}}break;case"textarea":Oy(e,n);break;case"select":t=n.value,t!=null&&si(e,!!n.multiple,t,!1)}};Wy=$h;Vy=ws;var HS={usingClientEntryPoint:!1,Events:[ca,Vs,Lc,zy,Hy,$h]},oo={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WS={bundleType:oo.bundleType,version:oo.version,rendererPackageName:oo.rendererPackageName,rendererConfig:oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Yy(e),e===null?null:e.stateNode},findFiberByHostInstance:oo.findFiberByHostInstance||US,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{Cc=Ya.inject(WS),Yn=Ya}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HS;an.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gh(t))throw Error(ne(200));return $S(e,t,null,n)};an.createRoot=function(e,t){if(!Gh(e))throw Error(ne(299));var n=!1,r="",s=Nw;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Wh(e,1,!1,null,null,n,!1,r,s),e[fr]=t.current,Bo(e.nodeType===8?e.parentNode:e),new qh(t)};an.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=Yy(t),e=e===null?null:e.stateNode,e};an.flushSync=function(e){return ws(e)};an.hydrate=function(e,t,n){if(!Uc(t))throw Error(ne(200));return zc(null,e,t,!0,n)};an.hydrateRoot=function(e,t,n){if(!Gh(e))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Nw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Ew(t,null,e,1,n??null,s,!1,i,a),e[fr]=t.current,Bo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new $c(t)};an.render=function(e,t,n){if(!Uc(t))throw Error(ne(200));return zc(null,e,t,!1,n)};an.unmountComponentAtNode=function(e){if(!Uc(e))throw Error(ne(40));return e._reactRootContainer?(ws(function(){zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0):!1};an.unstable_batchedUpdates=$h;an.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Uc(n))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return zc(e,t,n,!1,r)};an.version="18.3.1-next-f1338f8080-20240426";function jw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jw)}catch(e){console.error(e)}}jw(),jy.exports=an;var Cw=jy.exports,gg=Cw;xu.createRoot=gg.createRoot,xu.hydrateRoot=gg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yo(){return Yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yo.apply(this,arguments)}var Rr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rr||(Rr={}));const yg="popstate";function VS(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return ff("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Iw(s)}return GS(t,n,null,e)}function dt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Tw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qS(){return Math.random().toString(36).substr(2,8)}function xg(e,t){return{usr:e.state,key:e.key,idx:t}}function ff(e,t,n,r){return n===void 0&&(n=null),Yo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Bi(t):t,{state:n,key:t&&t.key||r||qS()})}function Iw(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Bi(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function GS(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=Rr.Pop,c=null,d=f();d==null&&(d=0,a.replaceState(Yo({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function u(){l=Rr.Pop;let v=f(),m=v==null?null:v-d;d=v,c&&c({action:l,location:w.location,delta:m})}function h(v,m){l=Rr.Push;let g=ff(w.location,v,m);n&&n(g,v),d=f()+1;let b=xg(g,d),k=w.createHref(g);try{a.pushState(b,"",k)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(k)}i&&c&&c({action:l,location:w.location,delta:1})}function p(v,m){l=Rr.Replace;let g=ff(w.location,v,m);n&&n(g,v),d=f();let b=xg(g,d),k=w.createHref(g);a.replaceState(b,"",k),i&&c&&c({action:l,location:w.location,delta:0})}function y(v){let m=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof v=="string"?v:Iw(v);return g=g.replace(/ $/,"%20"),dt(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let w={get action(){return l},get location(){return e(s,a)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(yg,u),c=v,()=>{s.removeEventListener(yg,u),c=null}},createHref(v){return t(s,v)},createURL:y,encodeLocation(v){let m=y(v);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:p,go(v){return a.go(v)}};return w}var wg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wg||(wg={}));function YS(e,t,n){return n===void 0&&(n="/"),XS(e,t,n,!1)}function XS(e,t,n,r){let s=typeof t=="string"?Bi(t):t,i=Aw(s.pathname||"/",n);if(i==null)return null;let a=Rw(e);KS(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=a_(i);l=i_(a[c],d,r)}return l}function Rw(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(dt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=us([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(dt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Rw(i.children,t,f,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:r_(d,i.index),routesMeta:f})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of Lw(i.path))s(i,a,c)}),t}function Lw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Lw(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function KS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:s_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const QS=/^:[\w-]+$/,JS=3,ZS=2,e_=1,t_=10,n_=-2,vg=e=>e==="*";function r_(e,t){let n=e.split("/"),r=n.length;return n.some(vg)&&(r+=n_),t&&(r+=ZS),n.filter(s=>!vg(s)).reduce((s,i)=>s+(QS.test(i)?JS:i===""?e_:t_),r)}function s_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function i_(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=i==="/"?t:t.slice(i.length)||"/",u=bg({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),h=c.route;if(!u&&d&&n&&!r[r.length-1].route.index&&(u=bg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:us([i,u.pathname]),pathnameBase:u_(us([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=us([i,u.pathnameBase]))}return a}function bg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=o_(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,u)=>{let{paramName:h,isOptional:p}=f;if(h==="*"){let w=l[u]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=l[u];return p&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:e}}function o_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Tw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function a_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Tw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Aw(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function l_(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Bi(e):e;return{pathname:n?n.startsWith("/")?n:c_(n,t):t,search:f_(r),hash:h_(s)}}function c_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function eu(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Pw(e,t){let n=d_(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Mw(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Bi(e):(s=Yo({},e),dt(!s.pathname||!s.pathname.includes("?"),eu("?","pathname","search",s)),dt(!s.pathname||!s.pathname.includes("#"),eu("#","pathname","hash",s)),dt(!s.search||!s.search.includes("#"),eu("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let u=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),u-=1;s.pathname=h.join("/")}l=u>=0?t[u]:"/"}let c=l_(s,l),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const us=e=>e.join("/").replace(/\/\/+/g,"/"),u_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),f_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,h_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function p_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Dw=["post","put","patch","delete"];new Set(Dw);const m_=["get",...Dw];new Set(m_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xo.apply(this,arguments)}const Yh=oe.createContext(null),g_=oe.createContext(null),ua=oe.createContext(null),Hc=oe.createContext(null),xr=oe.createContext({outlet:null,matches:[],isDataRoute:!1}),Ow=oe.createContext(null);function fa(){return oe.useContext(Hc)!=null}function Kt(){return fa()||dt(!1),oe.useContext(Hc).location}function Fw(e){oe.useContext(ua).static||oe.useLayoutEffect(e)}function nt(){let{isDataRoute:e}=oe.useContext(xr);return e?R_():y_()}function y_(){fa()||dt(!1);let e=oe.useContext(Yh),{basename:t,future:n,navigator:r}=oe.useContext(ua),{matches:s}=oe.useContext(xr),{pathname:i}=Kt(),a=JSON.stringify(Pw(s,n.v7_relativeSplatPath)),l=oe.useRef(!1);return Fw(()=>{l.current=!0}),oe.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let u=Mw(d,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:us([t,u.pathname])),(f.replace?r.replace:r.push)(u,f.state,f)},[t,r,a,i,e])}const x_=oe.createContext(null);function w_(e){let t=oe.useContext(xr).outlet;return t&&oe.createElement(x_.Provider,{value:e},t)}function Xh(){let{matches:e}=oe.useContext(xr),t=e[e.length-1];return t?t.params:{}}function v_(e,t){return b_(e,t)}function b_(e,t,n,r){fa()||dt(!1);let{navigator:s}=oe.useContext(ua),{matches:i}=oe.useContext(xr),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Kt(),f;if(t){var u;let v=typeof t=="string"?Bi(t):t;c==="/"||(u=v.pathname)!=null&&u.startsWith(c)||dt(!1),f=v}else f=d;let h=f.pathname||"/",p=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=YS(e,{pathname:p}),w=N_(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:us([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:us([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return t&&w?oe.createElement(Hc.Provider,{value:{location:Xo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Rr.Pop}},w):w}function k_(){let e=I_(),t=p_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return oe.createElement(oe.Fragment,null,oe.createElement("h2",null,"Unexpected Application Error!"),oe.createElement("h3",{style:{fontStyle:"italic"}},t),n?oe.createElement("pre",{style:s},n):null,i)}const S_=oe.createElement(k_,null);class __ extends oe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?oe.createElement(xr.Provider,{value:this.props.routeContext},oe.createElement(Ow.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E_(e){let{routeContext:t,match:n,children:r}=e,s=oe.useContext(Yh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),oe.createElement(xr.Provider,{value:t},r)}function N_(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);f>=0||dt(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let u=a[f];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=f),u.route.id){let{loaderData:h,errors:p}=n,y=u.route.loader&&h[u.route.id]===void 0&&(!p||p[u.route.id]===void 0);if(u.route.lazy||y){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,u,h)=>{let p,y=!1,w=null,v=null;n&&(p=l&&u.route.id?l[u.route.id]:void 0,w=u.route.errorElement||S_,c&&(d<0&&h===0?(L_("route-fallback",!1),y=!0,v=null):d===h&&(y=!0,v=u.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,h+1)),g=()=>{let b;return p?b=w:y?b=v:u.route.Component?b=oe.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=f,oe.createElement(E_,{match:u,routeContext:{outlet:f,matches:m,isDataRoute:n!=null},children:b})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?oe.createElement(__,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var Bw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Bw||{}),Kl=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Kl||{});function j_(e){let t=oe.useContext(Yh);return t||dt(!1),t}function C_(e){let t=oe.useContext(g_);return t||dt(!1),t}function T_(e){let t=oe.useContext(xr);return t||dt(!1),t}function $w(e){let t=T_(),n=t.matches[t.matches.length-1];return n.route.id||dt(!1),n.route.id}function I_(){var e;let t=oe.useContext(Ow),n=C_(Kl.UseRouteError),r=$w(Kl.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function R_(){let{router:e}=j_(Bw.UseNavigateStable),t=$w(Kl.UseNavigateStable),n=oe.useRef(!1);return Fw(()=>{n.current=!0}),oe.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Xo({fromRouteId:t},i)))},[e,t])}const kg={};function L_(e,t,n){!t&&!kg[e]&&(kg[e]=!0)}function A_(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function P_(e){let{to:t,replace:n,state:r,relative:s}=e;fa()||dt(!1);let{future:i,static:a}=oe.useContext(ua),{matches:l}=oe.useContext(xr),{pathname:c}=Kt(),d=nt(),f=Mw(t,Pw(l,i.v7_relativeSplatPath),c,s==="path"),u=JSON.stringify(f);return oe.useEffect(()=>d(JSON.parse(u),{replace:n,state:r,relative:s}),[d,u,s,n,r]),null}function M_(e){return w_(e.context)}function lt(e){dt(!1)}function D_(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Rr.Pop,navigator:i,static:a=!1,future:l}=e;fa()&&dt(!1);let c=t.replace(/^\/*/,"/"),d=oe.useMemo(()=>({basename:c,navigator:i,static:a,future:Xo({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=Bi(r));let{pathname:f="/",search:u="",hash:h="",state:p=null,key:y="default"}=r,w=oe.useMemo(()=>{let v=Aw(f,c);return v==null?null:{location:{pathname:v,search:u,hash:h,state:p,key:y},navigationType:s}},[c,f,u,h,p,y,s]);return w==null?null:oe.createElement(ua.Provider,{value:d},oe.createElement(Hc.Provider,{children:n,value:w}))}function O_(e){let{children:t,location:n}=e;return v_(hf(t),n)}new Promise(()=>{});function hf(e,t){t===void 0&&(t=[]);let n=[];return oe.Children.forEach(e,(r,s)=>{if(!oe.isValidElement(r))return;let i=[...t,s];if(r.type===oe.Fragment){n.push.apply(n,hf(r.props.children,i));return}r.type!==lt&&dt(!1),!r.props.index||!r.props.children||dt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=hf(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const F_="6";try{window.__reactRouterVersion=F_}catch{}const B_="startTransition",Sg=P2[B_];function $_(e){let{basename:t,children:n,future:r,window:s}=e,i=oe.useRef();i.current==null&&(i.current=VS({window:s,v5Compat:!0}));let a=i.current,[l,c]=oe.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=oe.useCallback(u=>{d&&Sg?Sg(()=>c(u)):c(u)},[c,d]);return oe.useLayoutEffect(()=>a.listen(f),[a,f]),oe.useEffect(()=>A_(r),[r]),oe.createElement(D_,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}var _g;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_g||(_g={}));var Eg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Eg||(Eg={}));const Uw=Object.prototype.toString;function Kh(e){switch(Uw.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return mr(e,Error)}}function $i(e,t){return Uw.call(e)===`[object ${t}]`}function Qh(e){return $i(e,"ErrorEvent")}function Ng(e){return $i(e,"DOMError")}function U_(e){return $i(e,"DOMException")}function Kn(e){return $i(e,"String")}function Jh(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Zh(e){return e===null||Jh(e)||typeof e!="object"&&typeof e!="function"}function Ei(e){return $i(e,"Object")}function Wc(e){return typeof Event<"u"&&mr(e,Event)}function z_(e){return typeof Element<"u"&&mr(e,Element)}function H_(e){return $i(e,"RegExp")}function Vc(e){return!!(e&&e.then&&typeof e.then=="function")}function W_(e){return Ei(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function zw(e){return typeof e=="number"&&e!==e}function mr(e,t){try{return e instanceof t}catch{return!1}}function Hw(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function di(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function jg(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{Hw(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function V_(e,t,n=!1){return Kn(e)?H_(t)?t.test(e):Kn(t)?n?e===t:e.includes(t):!1:!1}function Ui(e,t=[],n=!1){return t.some(r=>V_(e,r,n))}function q_(e,t,n=250,r,s,i,a){if(!i.exception||!i.exception.values||!a||!mr(a.originalException,Error))return;const l=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;l&&(i.exception.values=G_(pf(e,t,s,a.originalException,r,i.exception.values,l,0),n))}function pf(e,t,n,r,s,i,a,l){if(i.length>=n+1)return i;let c=[...i];if(mr(r[s],Error)){Cg(a,l);const d=e(t,r[s]),f=c.length;Tg(d,s,f,l),c=pf(e,t,n,r[s],s,[d,...c],d,f)}return Array.isArray(r.errors)&&r.errors.forEach((d,f)=>{if(mr(d,Error)){Cg(a,l);const u=e(t,d),h=c.length;Tg(u,`errors[${f}]`,h,l),c=pf(e,t,n,d,s,[u,...c],u,h)}}),c}function Cg(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Tg(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function G_(e,t){return e.map(n=>(n.value&&(n.value=di(n.value,t)),n))}function Xa(e){return e&&e.Math==Math?e:void 0}const Se=typeof globalThis=="object"&&Xa(globalThis)||typeof window=="object"&&Xa(window)||typeof self=="object"&&Xa(self)||typeof global=="object"&&Xa(global)||function(){return this}()||{};function ep(){return Se}function Ww(e,t,n){const r=n||Se,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}const ui=ep(),Y_=80;function Yr(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,a=0;const l=" > ",c=l.length;let d;const f=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||Y_;for(;n&&i++<r&&(d=X_(n,f),!(d==="html"||i>1&&a+s.length*c+d.length>=u));)s.push(d),a+=d.length,n=n.parentNode;return s.reverse().join(l)}catch{return"<unknown>"}}function X_(e,t){const n=e,r=[];let s,i,a,l,c;if(!n||!n.tagName)return"";if(ui.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const d=t&&t.length?t.filter(u=>n.getAttribute(u)).map(u=>[u,n.getAttribute(u)]):null;if(d&&d.length)d.forEach(u=>{r.push(`[${u[0]}="${u[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&Kn(s))for(i=s.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const f=["aria-label","type","name","title","alt"];for(c=0;c<f.length;c++)a=f[c],l=n.getAttribute(a),l&&r.push(`[${a}="${l}"]`);return r.join("")}function K_(){try{return ui.document.location.href}catch{return""}}function Q_(e){return ui.document&&ui.document.querySelector?ui.document.querySelector(e):null}function Vw(e){if(!ui.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const zi=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,J_="Sentry Logger ",mf=["debug","info","warn","error","log","assert","trace"],Ql={};function vs(e){if(!("console"in Se))return e();const t=Se.console,n={},r=Object.keys(Ql);r.forEach(s=>{const i=Ql[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Z_(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return zi?mf.forEach(n=>{t[n]=(...r)=>{e&&vs(()=>{Se.console[n](`${J_}[${n}]:`,...r)})}}):mf.forEach(n=>{t[n]=()=>{}}),t}const V=Z_(),eE=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function tE(e){return e==="http"||e==="https"}function Cs(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:a,protocol:l,publicKey:c}=e;return`${l}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${a}`}function nE(e){const t=eE.exec(e);if(!t){vs(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",i,a="",l]=t.slice(1);let c="",d=l;const f=d.split("/");if(f.length>1&&(c=f.slice(0,-1).join("/"),d=f.pop()),d){const u=d.match(/^\d+/);u&&(d=u[0])}return qw({host:i,pass:s,path:c,projectId:d,port:a,protocol:n,publicKey:r})}function qw(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function rE(e){if(!zi)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(a=>e[a]?!1:(V.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:n.match(/^\d+$/)?tE(r)?t&&isNaN(parseInt(t,10))?(V.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(V.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(V.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Gw(e){const t=typeof e=="string"?nE(e):qw(e);if(!(!t||!rE(t)))return t}class qn extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function xt(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);typeof s=="function"&&Yw(s,r),e[t]=s}function bs(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{zi&&V.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Yw(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,bs(e,"__sentry_original__",t)}catch{}}function tp(e){return e.__sentry_original__}function sE(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function Xw(e){if(Kh(e))return{message:e.message,name:e.name,stack:e.stack,...Rg(e)};if(Wc(e)){const t={type:e.type,target:Ig(e.target),currentTarget:Ig(e.currentTarget),...Rg(e)};return typeof CustomEvent<"u"&&mr(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Ig(e){try{return z_(e)?Yr(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Rg(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function iE(e,t=40){const n=Object.keys(Xw(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return di(n[0],t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:di(s,t)}return""}function Dt(e){return gf(e,new Map)}function gf(e,t){if(oE(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const s of Object.keys(e))typeof e[s]<"u"&&(r[s]=gf(e[s],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(s=>{r.push(gf(s,t))}),r}return e}function oE(e){if(!Ei(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const Kw=50,Lg=/\(error: (.*)\)/,Ag=/captureMessage|captureException/;function Qw(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const s=[],i=n.split(`
`);for(let a=r;a<i.length;a++){const l=i[a];if(l.length>1024)continue;const c=Lg.test(l)?l.replace(Lg,"$1"):l;if(!c.match(/\S*Error: /)){for(const d of t){const f=d(c);if(f){s.push(f);break}}if(s.length>=Kw)break}}return lE(s)}}function aE(e){return Array.isArray(e)?Qw(...e):e}function lE(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),Ag.test(t[t.length-1].function||"")&&(t.pop(),Ag.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,Kw).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const tu="<anonymous>";function gr(e){try{return!e||typeof e!="function"?tu:e.name||tu}catch{return tu}}const kl={},Pg={};function Ts(e,t){kl[e]=kl[e]||[],kl[e].push(t)}function Is(e,t){Pg[e]||(t(),Pg[e]=!0)}function Mn(e,t){const n=e&&kl[e];if(n)for(const r of n)try{r(t)}catch(s){zi&&V.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${gr(r)}
Error:`,s)}}function cE(e){const t="console";Ts(t,e),Is(t,dE)}function dE(){"console"in Se&&mf.forEach(function(e){e in Se.console&&xt(Se.console,e,function(t){return Ql[e]=t,function(...n){Mn("console",{args:n,level:e});const s=Ql[e];s&&s.apply(Se.console,n)}})})}function tt(){const e=Se,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function Jw(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Cr(e){const{message:t,event_id:n}=e;if(t)return t;const r=Jw(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function yf(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Ko(e,t){const n=Jw(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s&&s.data,...t.data};n.mechanism.data=i}}function Mg(e){if(e&&e.__sentry_captured__)return!0;try{bs(e,"__sentry_captured__",!0)}catch{}return!1}function Zw(e){return Array.isArray(e)?e:[e]}const Fs=Se,uE=1e3;let Dg,xf,wf;function ev(e){const t="dom";Ts(t,e),Is(t,fE)}function fE(){if(!Fs.document)return;const e=Mn.bind(null,"dom"),t=Og(e,!0);Fs.document.addEventListener("click",t,!1),Fs.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=Fs[n]&&Fs[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(xt(r,"addEventListener",function(s){return function(i,a,l){if(i==="click"||i=="keypress")try{const c=this,d=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},f=d[i]=d[i]||{refCount:0};if(!f.handler){const u=Og(e);f.handler=u,s.call(this,i,u,l)}f.refCount++}catch{}return s.call(this,i,a,l)}}),xt(r,"removeEventListener",function(s){return function(i,a,l){if(i==="click"||i=="keypress")try{const c=this,d=c.__sentry_instrumentation_handlers__||{},f=d[i];f&&(f.refCount--,f.refCount<=0&&(s.call(this,i,f.handler,l),f.handler=void 0,delete d[i]),Object.keys(d).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return s.call(this,i,a,l)}}))})}function hE(e){if(e.type!==xf)return!1;try{if(!e.target||e.target._sentryId!==wf)return!1}catch{}return!0}function pE(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function Og(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=mE(n);if(pE(n.type,r))return;bs(n,"_sentryCaptured",!0),r&&!r._sentryId&&bs(r,"_sentryId",tt());const s=n.type==="keypress"?"input":n.type;hE(n)||(e({event:n,name:s,global:t}),xf=n.type,wf=r?r._sentryId:void 0),clearTimeout(Dg),Dg=Fs.setTimeout(()=>{wf=void 0,xf=void 0},uE)}}function mE(e){try{return e.target}catch{return null}}const vf=ep();function tv(){if(!("fetch"in vf))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function bf(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function gE(){if(typeof EdgeRuntime=="string")return!0;if(!tv())return!1;if(bf(vf.fetch))return!0;let e=!1;const t=vf.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=bf(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){zi&&V.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function np(e){const t="fetch";Ts(t,e),Is(t,yE)}function yE(){gE()&&xt(Se,"fetch",function(e){return function(...t){const{method:n,url:r}=xE(t),s={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Mn("fetch",{...s}),e.apply(Se,t).then(i=>{const a={...s,endTimestamp:Date.now(),response:i};return Mn("fetch",a),i},i=>{const a={...s,endTimestamp:Date.now(),error:i};throw Mn("fetch",a),i})}})}function kf(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Fg(e){return typeof e=="string"?e:e?kf(e,"url")?e.url:e.toString?e.toString():"":""}function xE(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Fg(n),method:kf(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Fg(t),method:kf(t,"method")?String(t.method).toUpperCase():"GET"}}let Ka=null;function nv(e){const t="error";Ts(t,e),Is(t,wE)}function wE(){Ka=Se.onerror,Se.onerror=function(e,t,n,r,s){return Mn("error",{column:r,error:s,line:n,msg:e,url:t}),Ka&&!Ka.__SENTRY_LOADER__?Ka.apply(this,arguments):!1},Se.onerror.__SENTRY_INSTRUMENTED__=!0}let Qa=null;function rv(e){const t="unhandledrejection";Ts(t,e),Is(t,vE)}function vE(){Qa=Se.onunhandledrejection,Se.onunhandledrejection=function(e){return Mn("unhandledrejection",e),Qa&&!Qa.__SENTRY_LOADER__?Qa.apply(this,arguments):!0},Se.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Ja=ep();function bE(){const e=Ja.chrome,t=e&&e.app&&e.app.runtime,n="history"in Ja&&!!Ja.history.pushState&&!!Ja.history.replaceState;return!t&&n}const ao=Se;let Za;function qc(e){const t="history";Ts(t,e),Is(t,kE)}function kE(){if(!bE())return;const e=ao.onpopstate;ao.onpopstate=function(...n){const r=ao.location.href,s=Za;if(Za=r,Mn("history",{from:s,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=Za,a=String(s);Za=a,Mn("history",{from:i,to:a})}return n.apply(this,r)}}xt(ao.history,"pushState",t),xt(ao.history,"replaceState",t)}const SE=Se,Lr="__sentry_xhr_v3__";function rp(e){const t="xhr";Ts(t,e),Is(t,_E)}function _E(){if(!SE.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;xt(e,"open",function(t){return function(...n){const r=Date.now(),s=Kn(n[0])?n[0].toUpperCase():void 0,i=EE(n[1]);if(!s||!i)return t.apply(this,n);this[Lr]={method:s,url:i,request_headers:{}},s==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const a=()=>{const l=this[Lr];if(l&&this.readyState===4){try{l.status_code=this.status}catch{}const c={args:[s,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this};Mn("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?xt(this,"onreadystatechange",function(l){return function(...c){return a(),l.apply(this,c)}}):this.addEventListener("readystatechange",a),xt(this,"setRequestHeader",function(l){return function(...c){const[d,f]=c,u=this[Lr];return u&&Kn(d)&&Kn(f)&&(u.request_headers[d.toLowerCase()]=f),l.apply(this,c)}}),t.apply(this,n)}}),xt(e,"send",function(t){return function(...n){const r=this[Lr];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const s={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return Mn("xhr",s),t.apply(this,n)}})}function EE(e){if(Kn(e))return e;try{return e.toString()}catch{}}function NE(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function jE(){return"npm"}function CE(){return!NE()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Bg(){return typeof window<"u"&&(!CE()||TE())}function TE(){return Se.process!==void 0&&Se.process.type==="renderer"}function IE(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(s){if(e)return t.has(s)?!0:(t.add(s),!1);for(let i=0;i<t.length;i++)if(t[i]===s)return!0;return t.push(s),!1}function r(s){if(e)t.delete(s);else for(let i=0;i<t.length;i++)if(t[i]===s){t.splice(i,1);break}}return[n,r]}function Hn(e,t=100,n=1/0){try{return Sf("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function sv(e,t=3,n=100*1024){const r=Hn(e,t);return PE(r)>n?sv(e,t-1,n):r}function Sf(e,t,n=1/0,r=1/0,s=IE()){const[i,a]=s;if(t==null||["number","boolean","string"].includes(typeof t)&&!zw(t))return t;const l=RE(e,t);if(!l.startsWith("[object "))return l;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return l.replace("object ","");if(i(t))return"[Circular ~]";const d=t;if(d&&typeof d.toJSON=="function")try{const p=d.toJSON();return Sf("",p,c-1,r,s)}catch{}const f=Array.isArray(t)?[]:{};let u=0;const h=Xw(t);for(const p in h){if(!Object.prototype.hasOwnProperty.call(h,p))continue;if(u>=r){f[p]="[MaxProperties ~]";break}const y=h[p];f[p]=Sf(p,y,c-1,r,s),u++}return a(t),f}function RE(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Hw(t))return"[VueViewModel]";if(W_(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${gr(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=LE(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function LE(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function AE(e){return~-encodeURI(e).split(/%..|./).length}function PE(e){return AE(JSON.stringify(e))}var tr;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(tr||(tr={}));function Ni(e){return new en(t=>{t(e)})}function sp(e){return new en((t,n)=>{n(e)})}class en{constructor(t){en.prototype.__init.call(this),en.prototype.__init2.call(this),en.prototype.__init3.call(this),en.prototype.__init4.call(this),this._state=tr.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new en((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(a){s(a)}},i=>{if(!n)s(i);else try{r(n(i))}catch(a){s(a)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new en((n,r)=>{let s,i;return this.then(a=>{i=!1,s=a,t&&t()},a=>{i=!0,s=a,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}__init(){this._resolve=t=>{this._setResult(tr.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(tr.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===tr.PENDING){if(Vc(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===tr.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===tr.RESOLVED&&n[1](this._value),this._state===tr.REJECTED&&n[2](this._value),n[0]=!0)})}}}function ME(e){const t=[];function n(){return e===void 0||t.length<e}function r(a){return t.splice(t.indexOf(a),1)[0]}function s(a){if(!n())return sp(new qn("Not adding Promise because buffer limit was reached."));const l=a();return t.indexOf(l)===-1&&t.push(l),l.then(()=>r(l)).then(null,()=>r(l).then(null,()=>{})),l}function i(a){return new en((l,c)=>{let d=t.length;if(!d)return l(!0);const f=setTimeout(()=>{a&&a>0&&l(!1)},a);t.forEach(u=>{Ni(u).then(()=>{--d||(clearTimeout(f),l(!0))},c)})})}return{$:t,add:s,drain:i}}function fs(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const DE=["fatal","error","warning","log","info","debug"];function OE(e){return e==="warn"?"warning":DE.includes(e)?e:"log"}const iv=1e3;function ha(){return Date.now()/iv}function FE(){const{performance:e}=Se;if(!e||!e.now)return ha;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/iv}const pa=FE(),sn=(()=>{const{performance:e}=Se;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,a=e.timing&&e.timing.navigationStart,c=typeof a=="number"?Math.abs(a+n-r):t,d=c<t;return i||d?s<=c?e.timeOrigin:a:r})(),_f="baggage",ov="sentry-",BE=/^sentry-/,$E=8192;function UE(e){if(!Kn(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,s)=>{const i=$g(s);for(const a of Object.keys(i))r[a]=i[a];return r},{});else{if(!e)return;t=$g(e)}const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(BE)){const a=s.slice(ov.length);r[a]=i}return r},{});if(Object.keys(n).length>0)return n}function av(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${ov}${r}`]=s),n),{});return zE(t)}function $g(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function zE(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,a=s===0?i:`${t},${i}`;return a.length>$E?(zi&&V.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):a},"")}const HE=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function WE(e){if(!e)return;const t=e.match(HE);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function VE(e,t){const n=WE(e),r=UE(t),{traceId:s,parentSpanId:i,parentSampled:a}=n||{};return n?{traceId:s||tt(),parentSpanId:i||tt().substring(16),spanId:tt().substring(16),sampled:a,dsc:r||{}}:{traceId:s||tt(),spanId:tt().substring(16)}}function ip(e=tt(),t=tt().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function es(e,t=[]){return[e,t]}function qE(e,t){const[n,r]=e;return[n,[...r,t]]}function Ug(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function Ef(e,t){return(t||new TextEncoder).encode(e)}function GE(e,t){const[n,r]=e;let s=JSON.stringify(n);function i(a){typeof s=="string"?s=typeof a=="string"?s+a:[Ef(s,t),a]:s.push(typeof a=="string"?Ef(a,t):a)}for(const a of r){const[l,c]=a;if(i(`
${JSON.stringify(l)}
`),typeof c=="string"||c instanceof Uint8Array)i(c);else{let d;try{d=JSON.stringify(c)}catch{d=JSON.stringify(Hn(c))}i(d)}}return typeof s=="string"?s:YE(s)}function YE(e){const t=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function XE(e,t){const n=typeof e.data=="string"?Ef(e.data,t):e.data;return[Dt({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const KE={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function zg(e){return KE[e]}function op(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function lv(e,t,n,r){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Cs(r)},...s&&{trace:Dt({...s})}}}function QE(e,t,n){const r=[{type:"client_report"},{timestamp:n||ha(),discarded_events:e}];return es(t?{dsn:t}:{},[r])}const JE=60*1e3;function ZE(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?JE:r-t}function eN(e,t){return e[t]||e.all||0}function cv(e,t,n=Date.now()){return eN(e,t)>n}function dv(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(i)for(const l of i.trim().split(",")){const[c,d,,,f]=l.split(":",5),u=parseInt(c,10),h=(isNaN(u)?60:u)*1e3;if(!d)s.all=r+h;else for(const p of d.split(";"))p==="metric_bucket"?(!f||f.split(";").includes("custom"))&&(s[p]=r+h):s[p]=r+h}else a?s.all=r+ZE(a,r):t===429&&(s.all=r+60*1e3);return s}function tN(e,t){return e??t()}function nu(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...a)=>n.call(t,...a)),t=void 0)}return n}const he=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Gc="production";function ap(){return Ww("globalEventProcessors",()=>[])}function nN(e){ap().push(e)}function Jl(e,t,n,r=0){return new en((s,i)=>{const a=e[r];if(t===null||typeof a!="function")s(t);else{const l=a({...t},n);he&&a.id&&l===null&&V.log(`Event processor "${a.id}" dropped event`),Vc(l)?l.then(c=>Jl(e,c,n,r+1).then(s)).then(null,i):Jl(e,l,n,r+1).then(s).then(null,i)}})}function uv(e){const t=pa(),n={sid:tt(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>rN(n)};return e&&ks(n,e),n}function ks(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||pa(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:tt()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function fv(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),ks(e,n)}function rN(e){return Dt({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const sN=0,hv=1;function lp(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:a,tags:l,origin:c}=it(e);return Dt({data:r,op:s,parent_span_id:i,span_id:t,status:a,tags:l,trace_id:n,origin:c})}function Yc(e){const{traceId:t,spanId:n}=e.spanContext(),r=cp(e);return ip(t,n,r)}function Xc(e){return typeof e=="number"?Hg(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Hg(e.getTime()):pa()}function Hg(e){return e>9999999999?e/1e3:e}function it(e){return iN(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function iN(e){return typeof e.getSpanJSON=="function"}function cp(e){const{traceFlags:t}=e.spanContext();return!!(t&hv)}function pv(e,t,n,r,s,i){const{normalizeDepth:a=3,normalizeMaxBreadth:l=1e3}=e,c={...t,event_id:t.event_id||n.event_id||tt(),timestamp:t.timestamp||ha()},d=n.integrations||e.integrations.map(v=>v.name);oN(c,e),cN(c,d),t.type===void 0&&aN(c,e.stackParser);const f=uN(r,n.captureContext);n.mechanism&&Ko(c,n.mechanism);const u=s&&s.getEventProcessors?s.getEventProcessors():[],h=SN().getScopeData();if(i){const v=i.getScopeData();Yg(h,v)}if(f){const v=f.getScopeData();Yg(h,v)}const p=[...n.attachments||[],...h.attachments];p.length&&(n.attachments=p),wv(c,h);const y=[...u,...ap(),...h.eventProcessors];return Jl(y,c,n).then(v=>(v&&lN(v),typeof a=="number"&&a>0?dN(v,a,l):v))}function oN(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:Gc),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=di(e.message,i));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=di(a.value,i));const l=e.request;l&&l.url&&(l.url=di(l.url,i))}const Wg=new WeakMap;function aN(e,t){const n=Se._sentryDebugIds;if(!n)return;let r;const s=Wg.get(t);s?r=s:(r=new Map,Wg.set(t,r));const i=Object.keys(n).reduce((a,l)=>{let c;const d=r.get(l);d?c=d:(c=t(l),r.set(l,c));for(let f=c.length-1;f>=0;f--){const u=c[f];if(u.filename){a[u.filename]=n[l];break}}return a},{});try{e.exception.values.forEach(a=>{a.stacktrace.frames.forEach(l=>{l.filename&&(l.debug_id=i[l.filename])})})}catch{}}function lN(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function cN(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function dN(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:Hn(s.data,t,n)}}))},...e.user&&{user:Hn(e.user,t,n)},...e.contexts&&{contexts:Hn(e.contexts,t,n)},...e.extra&&{extra:Hn(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Hn(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>{const i=it(s).data;return i&&(s.data=Hn(i,t,n)),s})),r}function uN(e,t){if(!t)return e;const n=e?e.clone():new lr;return n.update(t),n}function fN(e){if(e)return hN(e)?{captureContext:e}:mN(e)?{captureContext:e}:e}function hN(e){return e instanceof lr||typeof e=="function"}const pN=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function mN(e){return Object.keys(e).some(t=>pN.includes(t))}function Kc(e,t){return Et().captureException(e,fN(t))}function mv(e,t){return Et().captureEvent(e,t)}function Xr(e,t){Et().addBreadcrumb(e,t)}function gN(e,t){Et().setContext(e,t)}function Vg(e){Et().setUser(e)}function gv(...e){const t=Et();if(e.length===2){const[n,r]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,r(n))):t.withScope(r)}return t.withScope(e[0])}function Re(){return Et().getClient()}function cn(){return Et().getScope()}function qg(e){const t=Re(),n=ts(),r=cn(),{release:s,environment:i=Gc}=t&&t.getOptions()||{},{userAgent:a}=Se.navigator||{},l=uv({release:s,environment:i,user:r.getUser()||n.getUser(),...a&&{userAgent:a},...e}),c=n.getSession();return c&&c.status==="ok"&&ks(c,{status:"exited"}),yv(),n.setSession(l),r.setSession(l),l}function yv(){const e=ts(),t=cn(),n=t.getSession()||e.getSession();n&&fv(n),xv(),e.setSession(),t.setSession()}function xv(){const e=ts(),t=cn(),n=Re(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Gg(e=!1){if(e){yv();return}xv()}function Zl(e){return e.transaction}function Qc(e,t,n){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},a=Dt({environment:r.environment||Gc,release:r.release,user_segment:i,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",a),a}function ji(e){const t=Re();if(!t)return{};const n=Qc(it(e).trace_id||"",t,cn()),r=Zl(e);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:i,source:a}=r.metadata;i!=null&&(n.sample_rate=`${i}`);const l=it(r);return a&&a!=="url"&&(n.transaction=l.description),n.sampled=String(cp(r)),t.emit&&t.emit("createDsc",n),n}function wv(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;yN(e,t),r&&vN(e,r),bN(e,n),xN(e,s),wN(e,i)}function Yg(e,t){const{extra:n,tags:r,user:s,contexts:i,level:a,sdkProcessingMetadata:l,breadcrumbs:c,fingerprint:d,eventProcessors:f,attachments:u,propagationContext:h,transactionName:p,span:y}=t;lo(e,"extra",n),lo(e,"tags",r),lo(e,"user",s),lo(e,"contexts",i),lo(e,"sdkProcessingMetadata",l),a&&(e.level=a),p&&(e.transactionName=p),y&&(e.span=y),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),f.length&&(e.eventProcessors=[...e.eventProcessors,...f]),u.length&&(e.attachments=[...e.attachments,...u]),e.propagationContext={...e.propagationContext,...h}}function lo(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function yN(e,t){const{extra:n,tags:r,user:s,contexts:i,level:a,transactionName:l}=t,c=Dt(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const d=Dt(r);d&&Object.keys(d).length&&(e.tags={...d,...e.tags});const f=Dt(s);f&&Object.keys(f).length&&(e.user={...f,...e.user});const u=Dt(i);u&&Object.keys(u).length&&(e.contexts={...u,...e.contexts}),a&&(e.level=a),l&&(e.transaction=l)}function xN(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function wN(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function vN(e,t){e.contexts={trace:lp(t),...e.contexts};const n=Zl(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:ji(t),...e.sdkProcessingMetadata};const r=it(n).description;r&&(e.tags={transaction:r,...e.tags})}}function bN(e,t){e.fingerprint=e.fingerprint?Zw(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const kN=100;let ru;class lr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Xg()}static clone(t){return t?t.clone():new lr}clone(){const t=new lr;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&ks(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t;if(n instanceof lr){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(Ei(n)){const r=t;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Xg(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:kN;if(r<=0)return this;const s={timestamp:ha(),...t},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:s,_extra:i,_user:a,_level:l,_fingerprint:c,_eventProcessors:d,_propagationContext:f,_sdkProcessingMetadata:u,_transactionName:h,_span:p}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:s,extra:i,user:a,level:l,fingerprint:c||[],eventProcessors:d,propagationContext:f,sdkProcessingMetadata:u,transactionName:h,span:p}}applyToEvent(t,n={},r=[]){wv(t,this.getScopeData());const s=[...r,...ap(),...this._eventProcessors];return Jl(s,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:tt();if(!this._client)return V.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r&&r.event_id?r.event_id:tt();if(!this._client)return V.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:tt();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(V.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function SN(){return ru||(ru=new lr),ru}function Xg(){return{traceId:tt(),spanId:tt().substring(16)}}const Nf="7.120.4",vv=parseFloat(Nf),_N=100;class bv{constructor(t,n,r,s=vv){this._version=s;let i;n?i=n:(i=new lr,i.setClient(t));let a;r?a=r:(a=new lr,a.setClient(t)),this._stack=[{scope:i}],t&&this.bindClient(t),this._isolationScope=a}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(s){throw this.popScope(),s}return Vc(r)?r.then(s=>(this.popScope(),s),s=>{throw this.popScope(),s}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:tt(),s=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:s,...n,event_id:r}),r}captureMessage(t,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:tt(),i=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s}),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:tt();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:a=_N}=s.getOptions&&s.getOptions()||{};if(a<=0)return;const c={timestamp:ha(),...t},d=i?vs(()=>i(c,n)):c;d!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",d,n),r.addBreadcrumb(d,a))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=Kg(this);try{t(this)}finally{Kg(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return he&&V.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return he&&!r&&(this.getClient()?V.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):V.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&fv(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i=Gc}=r&&r.getOptions()||{},{userAgent:a}=Se.navigator||{},l=uv({release:s,environment:i,user:n.getUser(),...a&&{userAgent:a},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&ks(c,{status:"exited"}),this.endSession(),n.setSession(l),l}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(t,...n){const s=ma().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[t]=="function")return s.extensions[t].apply(this,n);he&&V.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function ma(){return Se.__SENTRY__=Se.__SENTRY__||{extensions:{},hub:void 0},Se}function Kg(e){const t=ma(),n=jf(t);return kv(t,e),n}function Et(){const e=ma();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return EN(e)}function ts(){return Et().getIsolationScope()}function EN(e=ma()){return(!NN(e)||jf(e).isOlderThan(vv))&&kv(e,new bv),jf(e)}function NN(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function jf(e){return Ww("hub",()=>new bv,e)}function kv(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function Rs(e){return(e||Et()).getScope().getTransaction()}let Qg=!1;function jN(){Qg||(Qg=!0,nv(Cf),rv(Cf))}function Cf(){const e=Rs();if(e){const t="internal_error";he&&V.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}Cf.tag="sentry_tracingErrorCallback";var Jg;(function(e){const t="ok";e.Ok=t;const n="deadline_exceeded";e.DeadlineExceeded=n;const r="unauthenticated";e.Unauthenticated=r;const s="permission_denied";e.PermissionDenied=s;const i="not_found";e.NotFound=i;const a="resource_exhausted";e.ResourceExhausted=a;const l="invalid_argument";e.InvalidArgument=l;const c="unimplemented";e.Unimplemented=c;const d="unavailable";e.Unavailable=d;const f="internal_error";e.InternalError=f;const u="unknown_error";e.UnknownError=u;const h="cancelled";e.Cancelled=h;const p="already_exists";e.AlreadyExists=p;const y="failed_precondition";e.FailedPrecondition=y;const w="aborted";e.Aborted=w;const v="out_of_range";e.OutOfRange=v;const m="data_loss";e.DataLoss=m})(Jg||(Jg={}));function CN(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function dp(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=CN(t);n!=="unknown_error"&&e.setStatus(n)}function Hi(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=Re(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Sv(e){if(!Hi())return;const t=IN(e),n=Et(),r=e.scope?e.scope.getSpan():up();if(e.onlyIfParent&&!r)return;const a=(e.scope||cn()).clone();return TN(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:a})}function up(){return cn().getSpan()}function TN(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:s}){if(!Hi())return;const i=ts();let a;if(t&&!r)a=t.startChild(n);else if(t){const l=ji(t),{traceId:c,spanId:d}=t.spanContext(),f=cp(t);a=e.startTransaction({traceId:c,parentSpanId:d,parentSampled:f,...n,metadata:{dynamicSamplingContext:l,...n.metadata}})}else{const{traceId:l,dsc:c,parentSpanId:d,sampled:f}={...i.getPropagationContext(),...s.getPropagationContext()};a=e.startTransaction({traceId:l,parentSpanId:d,parentSampled:f,...n,metadata:{dynamicSamplingContext:c,...n.metadata}})}return s.setSpan(a),RN(a,s,i),a}function IN(e){if(e.startTime){const t={...e};return t.startTimestamp=Xc(e.startTime),delete t.startTime,t}return e}const _v="_sentryScope",Ev="_sentryIsolationScope";function RN(e,t,n){e&&(bs(e,Ev,n),bs(e,_v,t))}function LN(e){return{scope:e[_v],isolationScope:e[Ev]}}const cr="sentry.source",Js="sentry.sample_rate",el="sentry.op",Zs="sentry.origin",AN="profile_id";class Nv{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class Jc{constructor(t={}){this._traceId=t.traceId||tt(),this._spanId=t.spanId||tt().substring(16),this._startTime=t.startTimestamp||pa(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this.instrumenter=t.instrumenter||"sentry",this._attributes={},this.setAttributes({[Zs]:t.origin||"manual",[el]:t.op,...t.attributes}),this._name=t.name||t.description,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.status&&(this._status=t.status),t.endTimestamp&&(this._endTime=t.endTimestamp),t.exclusiveTime!==void 0&&(this._exclusiveTime=t.exclusiveTime),this._measurements=t.measurements?{...t.measurements}:{}}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}set parentSpanId(t){this._parentSpanId=t}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}get startTimestamp(){return this._startTime}set startTimestamp(t){this._startTime=t}get endTimestamp(){return this._endTime}set endTimestamp(t){this._endTime=t}get status(){return this._status}set status(t){this._status=t}get op(){return this._attributes[el]}set op(t){this.setAttribute(el,t)}get origin(){return this._attributes[Zs]}set origin(t){this.setAttribute(Zs,t)}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?hv:sN}}startChild(t){const n=new Jc({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=Zl(this);if(n.transaction=r,he&&r){const s=t&&t.op||"< unknown op >",i=it(n).description||"< unknown name >",a=r.spanContext().spanId,l=`[Tracing] Starting '${s}' span on transaction '${i}' (${a}).`;V.log(l),this._logMessage=l}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setAttribute(t,n){n===void 0?delete this._attributes[t]:this._attributes[t]=n}setAttributes(t){Object.keys(t).forEach(n=>this.setAttribute(n,t[n]))}setStatus(t){return this._status=t,this}setHttpStatus(t){return dp(this,t),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return this._status==="ok"}finish(t){return this.end(t)}end(t){if(this._endTime)return;const n=Zl(this);if(he&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&V.log(r.replace("Starting","Finishing"))}this._endTime=Xc(t)}toTraceparent(){return Yc(this)}toContext(){return Dt({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this._endTime=t.endTimestamp,this.op=t.op,this._parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this._startTime=t.startTimestamp||this._startTime,this._status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return lp(this)}getSpanJSON(){return Dt({data:this._getData(),description:this._name,op:this._attributes[el],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Zs],_metrics_summary:void 0,profile_id:this._attributes[AN],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:n}=this,r=Object.keys(t).length>0,s=Object.keys(n).length>0;if(!(!r&&!s))return r&&s?{...t,...n}:r?t:n}}class jv extends Jc{constructor(t,n){super(t),this._contexts={},this._hub=n||Et(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[cr]&&{source:this._attributes[cr]},...this._attributes[Js]&&{sampleRate:this._attributes[Js]}}}set metadata(t){this._metadata=t}setName(t,n="custom"){this._name=t,this.setAttribute(cr,n)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new Nv(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const n=Xc(t),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const t=super.toContext();return Dt({...t,name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return ji(this)}setHub(t){this._hub=t}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(t){if(this._endTime!==void 0)return;this._name||(he&&V.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){he&&V.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(f=>f!==this&&it(f).timestamp):[];if(this._trimEnd&&r.length>0){const f=r.map(u=>it(u).timestamp).filter(Boolean);this._endTime=f.reduce((u,h)=>u>h?u:h)}const{scope:s,isolationScope:i}=LN(this),{metadata:a}=this,{source:l}=a,c={contexts:{...this._contexts,trace:lp(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...a,capturedSpanScope:s,capturedSpanIsolationScope:i,...Dt({dynamicSamplingContext:ji(this)})},_metrics_summary:void 0,...l&&{transaction_info:{source:l}}};return Object.keys(this._measurements).length>0&&(he&&V.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),he&&V.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const Sl={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},PN="finishReason",Ds=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class MN extends Nv{constructor(t,n,r,s){super(s),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=r}add(t){if(t.spanContext().spanId!==this.transactionSpanId){const n=t.end;t.end=(...r)=>(this._popActivity(t.spanContext().spanId),n.apply(t,r)),it(t).timestamp===void 0&&this._pushActivity(t.spanContext().spanId)}super.add(t)}}class DN extends jv{constructor(t,n,r=Sl.idleTimeout,s=Sl.finalTimeout,i=Sl.heartbeatInterval,a=!1,l=!1){super(t,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=s,this._heartbeatInterval=i,this._onScope=a,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Ds[4],this._autoFinishAllowed=!l,a&&(he&&V.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),n.getScope().setSpan(this)),l||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Ds[3],this.end())},this._finalTimeout)}end(t){const n=Xc(t);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(PN,this._finishReason),this.spanRecorder){he&&V.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,n);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanContext().spanId===this.spanContext().spanId)return!0;it(r).timestamp||(r.setStatus("cancelled"),r.end(n),he&&V.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const{start_timestamp:s,timestamp:i}=it(r),a=s&&s<n,l=(this._finalTimeout+this._idleTimeout)/1e3,c=i&&s&&i-s<l;if(he){const d=JSON.stringify(r,void 0,2);a?c||V.log("[Tracing] discarding Span since it finished after Transaction final timeout",d):V.log("[Tracing] discarding Span since it happened after Transaction was finished",d)}return a&&c}),he&&V.log("[Tracing] flushing IdleTransaction")}else he&&V.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},r=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new MN(n,r,this.spanContext().spanId,t),he&&V.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Ds[5],this.end(t)))}setFinishReason(t){this._finishReason=t}sendAutoFinishSignal(){this._autoFinishAllowed||(he&&V.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Ds[1],this.end(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),he&&V.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,he&&V.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(he&&V.log(`[Tracing] popActivity ${t}`),delete this.activities[t],he&&V.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=pa();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Ds[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?this._autoFinishAllowed&&(he&&V.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Ds[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){he&&V.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function Cv(e,t,n){if(!Hi(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setAttribute(Js,Number(e.sampled)),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setAttribute(Js,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setAttribute(Js,Number(r))):(r=1,e.setAttribute(Js,r)),Tv(r)?r?(e.sampled=Math.random()<r,e.sampled?(he&&V.log(`[Tracing] starting ${e.op} transaction - ${it(e).description}`),e):(he&&V.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(he&&V.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):(he&&V.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Tv(e){return zw(e)||!(typeof e=="number"||typeof e=="boolean")?(he&&V.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?(he&&V.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function ON(){const t=this.getScope().getSpan();return t?{"sentry-trace":Yc(t)}:{}}function FN(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",i=e.instrumenter||"sentry";s!==i&&(he&&V.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let a=new jv(e,this);return a=Cv(a,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),a.isRecording()&&a.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function Iv(e,t,n,r,s,i,a,l=!1){const c=e.getClient(),d=c&&c.getOptions()||{};let f=new DN(t,e,n,r,a,s,l);return f=Cv(f,d,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...i}),f.isRecording()&&f.initSpanRecorder(d._experiments&&d._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",f),f}function BN(){const e=ma();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=FN),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=ON),jN())}function $N(e,t,n){const r=Rs();r&&r.setMeasurement(e,t,n)}function UN(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function zN(e,t,n,r){const s=op(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Cs(t)}},a="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return es(i,[a])}function HN(e,t,n,r){const s=op(n),i=e.type&&e.type!=="replay_event"?e.type:"event";UN(e,n&&n.sdk);const a=lv(e,s,r,t);return delete e.sdkProcessingMetadata,es(a,[[{type:i},e]])}const WN="7";function Rv(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function VN(e){return`${Rv(e)}${e.projectId}/envelope/`}function qN(e,t){return sE({sentry_key:e.publicKey,sentry_version:WN,...t&&{sentry_client:`${t.name}/${t.version}`}})}function GN(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${VN(e)}?${qN(e,r)}`}function YN(e,t){const n=Gw(e);if(!n)return"";const r=`${Rv(n)}embed/error-page/`;let s=`dsn=${Cs(n)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const a=t.user;if(!a)continue;a.name&&(s+=`&name=${encodeURIComponent(a.name)}`),a.email&&(s+=`&email=${encodeURIComponent(a.email)}`)}else s+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${s}`}const Zg=[];function XN(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function KN(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(a=>{a.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=Zw(n(t)):r=t;const s=XN(r),i=JN(s,a=>a.name==="Debug");if(i!==-1){const[a]=s.splice(i,1);s.push(a)}return s}function QN(e,t){const n={};return t.forEach(r=>{r&&Lv(e,r,n)}),n}function e0(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Lv(e,t,n){if(n[t.name]){he&&V.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Zg.indexOf(t.name)===-1&&(t.setupOnce(nN,Et),Zg.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,i)=>r(s,i,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=(i,a)=>r(i,a,e);s.id=t.name,e.addEventProcessor(s)}he&&V.log(`Integration installed: ${t.name}`)}function JN(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function ZN(e){let t="";for(const n of e){const r=Object.entries(n.tags),s=r.length>0?`|#${r.map(([i,a])=>`${i}:${a}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${s}|T${n.timestamp}
`}return t}function ej(e,t,n,r){const s={sent_at:new Date().toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(s.dsn=Cs(t));const i=tj(e);return es(s,[i])}function tj(e){const t=ZN(e);return[{type:"statsd",length:t.length},t]}const t0="Not capturing exception because it's already been captured.";class nj{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Gw(t.dsn):he&&V.warn("No DSN provided, client will not send events."),this._dsn){const n=GN(this._dsn,t);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(Mg(t)){he&&V.log(t0);return}let s=n&&n.event_id;return this._process(this.eventFromException(t,n).then(i=>this._captureEvent(i,n,r)).then(i=>{s=i})),s}captureMessage(t,n,r,s){let i=r&&r.event_id;const a=Jh(t)?t:String(t),l=Zh(t)?this.eventFromMessage(a,n,r):this.eventFromException(t,r);return this._process(l.then(c=>this._captureEvent(c,r,s)).then(c=>{i=c})),i}captureEvent(t,n,r){if(n&&n.originalException&&Mg(n.originalException)){he&&V.log(t0);return}let s=n&&n.event_id;const a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,n,a||r).then(l=>{s=l})),s}captureSession(t){typeof t.release!="string"?he&&V.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),ks(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s))):Ni(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return he&&V.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const n=this._integrations[t.name];Lv(this,t,this._integrations),n||e0(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=HN(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=qE(r,XE(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){const n=zN(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const s=typeof r=="number"?r:1,i=`${t}:${n}`;he&&V.log(`Recording outcome: "${i}"${s>1?` (${s} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+s}}captureAggregateMetrics(t){he&&V.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=ej(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=QN(this,t),e0(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,n){let r=!1,s=!1;const i=n.exception&&n.exception.values;if(i){s=!0;for(const c of i){const d=c.mechanism;if(d&&d.handled===!1){r=!0;break}}}const a=t.status==="ok";(a&&t.errors===0||a&&r)&&(ks(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new en(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,t&&r>=t&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s=ts()){const i=this.getOptions(),a=Object.keys(this._integrations);return!n.integrations&&a.length>0&&(n.integrations=a),this.emit("preprocessEvent",t,n),pv(i,t,n,r,this,s).then(l=>{if(l===null)return l;const c={...s.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(l.contexts&&l.contexts.trace)&&c){const{traceId:f,spanId:u,parentSpanId:h,dsc:p}=c;l.contexts={trace:{trace_id:f,span_id:u,parent_span_id:h},...l.contexts};const y=p||Qc(f,this,r);l.sdkProcessingMetadata={dynamicSamplingContext:y,...l.sdkProcessingMetadata}}return l})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(s=>s.event_id,s=>{if(he){const i=s;i.logLevel==="log"?V.log(i.message):V.warn(i)}})}_processEvent(t,n,r){const s=this.getOptions(),{sampleRate:i}=s,a=Pv(t),l=Av(t),c=t.type||"error",d=`before send for type \`${c}\``;if(l&&typeof i=="number"&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",t),sp(new qn(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const f=c==="replay_event"?"replay":c,h=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,h).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f,t),new qn("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;const w=sj(s,p,n);return rj(w,d)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f,t),a){const m=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",m)}throw new qn(`${d} returned \`null\`, will not send event.`,"log")}const y=r&&r.getSession();if(!a&&y&&this._updateSessionFromEvent(y,p),a){const v=p.sdkProcessingMetadata&&p.sdkProcessingMetadata.spanCountBeforeProcessing||0,m=p.spans?p.spans.length:0,g=v-m;g>0&&this.recordDroppedEvent("before_send","span",g)}const w=p.transaction_info;if(a&&w&&p.transaction!==t.transaction){const v="custom";p.transaction_info={...w,source:v}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof qn?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new qn(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{he&&V.error("Error while sending event:",n)});he&&V.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:t[n]}})}}function rj(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Vc(e))return e.then(r=>{if(!Ei(r)&&r!==null)throw new qn(n);return r},r=>{throw new qn(`${t} rejected with ${r}`)});if(!Ei(e)&&e!==null)throw new qn(n);return e}function sj(e,t,n){const{beforeSend:r,beforeSendTransaction:s}=e;if(Av(t)&&r)return r(t,n);if(Pv(t)&&s){if(t.spans){const i=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:i}}return s(t,n)}return t}function Av(e){return e.type===void 0}function Pv(e){return e.type==="transaction"}function ij(e){const t=Re();!t||!t.addEventProcessor||t.addEventProcessor(e)}function oj(e,t){t.debug===!0&&(he?V.enable():vs(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),cn().update(t.initialScope);const r=new e(t);aj(r),lj(r)}function aj(e){const n=Et().getStackTop();n.client=e,n.scope.setClient(e)}function lj(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}const cj=30;function Mv(e,t,n=ME(e.bufferSize||cj)){let r={};const s=a=>n.drain(a);function i(a){const l=[];if(Ug(a,(u,h)=>{const p=zg(h);if(cv(r,p)){const y=n0(u,h);e.recordDroppedEvent("ratelimit_backoff",p,y)}else l.push(u)}),l.length===0)return Ni();const c=es(a[0],l),d=u=>{Ug(c,(h,p)=>{const y=n0(h,p);e.recordDroppedEvent(u,zg(p),y)})},f=()=>t({body:GE(c,e.textEncoder)}).then(u=>(u.statusCode!==void 0&&(u.statusCode<200||u.statusCode>=300)&&he&&V.warn(`Sentry responded with status code ${u.statusCode} to sent event.`),r=dv(r,u),u),u=>{throw d("network_error"),u});return n.add(f).then(u=>u,u=>{if(u instanceof qn)return he&&V.error("Skipped sending event because buffer is full."),d("queue_overflow"),Ni();throw u})}return i.__sentry__baseTransport__=!0,{send:i,flush:s}}function n0(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function dj(e,t){const n={sent_at:new Date().toISOString()};t&&(n.dsn=Cs(t));const r=e.map(uj);return es(n,r)}function uj(e){return[{type:"span"},e]}function fj(e,t){const n=t&&mj(t)?t.getClient():t,r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return pj(e,r)||hj(e,s)}function hj(e,t){return t?r0(e)===r0(t):!1}function pj(e,t){return t?e.includes(t.host):!1}function r0(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function mj(e){return e.getClient!==void 0}function Dv(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:Nf})),version:Nf}),e._metadata=s}const gj=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],yj=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],xj="InboundFilters",wj=(e={})=>({name:xj,setupOnce(){},processEvent(t,n,r){const s=r.getOptions(),i=bj(e,s);return kj(t,i)?null:t}}),vj=wj;function bj(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:gj],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:yj],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function kj(e,t){return t.ignoreInternal&&Cj(e)?(he&&V.warn(`Event dropped due to being internal Sentry Error.
Event: ${Cr(e)}`),!0):Sj(e,t.ignoreErrors)?(he&&V.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Cr(e)}`),!0):_j(e,t.ignoreTransactions)?(he&&V.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Cr(e)}`),!0):Ej(e,t.denyUrls)?(he&&V.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Cr(e)}.
Url: ${ec(e)}`),!0):Nj(e,t.allowUrls)?!1:(he&&V.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Cr(e)}.
Url: ${ec(e)}`),!0)}function Sj(e,t){return e.type||!t||!t.length?!1:jj(e).some(n=>Ui(n,t))}function _j(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?Ui(n,t):!1}function Ej(e,t){if(!t||!t.length)return!1;const n=ec(e);return n?Ui(n,t):!1}function Nj(e,t){if(!t||!t.length)return!0;const n=ec(e);return n?Ui(n,t):!0}function jj(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),he&&t.length===0&&V.error(`Could not extract message for event ${Cr(e)}`),t}function Cj(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function Tj(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function ec(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?Tj(t):null}catch{return he&&V.error(`Cannot extract url for event ${Cr(e)}`),null}}let s0;const Ij="FunctionToString",i0=new WeakMap,Rj=()=>({name:Ij,setupOnce(){s0=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=tp(this),n=i0.has(Re())&&t!==void 0?t:this;return s0.apply(n,e)}}catch{}},setup(e){i0.set(e,!0)}}),Lj=Rj,Ve=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ye=Se;function Aj(){ye.document?ye.document.addEventListener("visibilitychange",()=>{const e=Rs();if(ye.document.hidden&&e){const t="cancelled",{op:n,status:r}=it(e);Ve&&V.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):Ve&&V.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const ga=(e,t,n)=>{let r,s;return i=>{t.value>=0&&(i||n)&&(s=t.value-(r||0),(s||r===void 0)&&(r=t.value,t.delta=s,e(t)))}},Pj=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Mj=()=>{const e=ye.performance.timing,t=ye.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},Zc=()=>ye.__WEB_VITALS_POLYFILL__?ye.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Mj()):ye.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],fp=()=>{const e=Zc();return e&&e.activationStart||0},ya=(e,t)=>{const n=Zc();let r="navigate";return n&&(ye.document&&ye.document.prerendering||fp()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:Pj(),navigationType:r}},Wi=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{t(s.getEntries())});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},xa=(e,t)=>{const n=r=>{(r.type==="pagehide"||ye.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};ye.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},Dj=(e,t={})=>{const n=ya("CLS",0);let r,s=0,i=[];const a=c=>{c.forEach(d=>{if(!d.hadRecentInput){const f=i[0],u=i[i.length-1];s&&i.length!==0&&d.startTime-u.startTime<1e3&&d.startTime-f.startTime<5e3?(s+=d.value,i.push(d)):(s=d.value,i=[d]),s>n.value&&(n.value=s,n.entries=i,r&&r())}})},l=Wi("layout-shift",a);if(l){r=ga(e,n,t.reportAllChanges);const c=()=>{a(l.takeRecords()),r(!0)};return xa(c),c}};let tc=-1;const Oj=()=>{ye.document&&ye.document.visibilityState&&(tc=ye.document.visibilityState==="hidden"&&!ye.document.prerendering?0:1/0)},Fj=()=>{xa(({timeStamp:e})=>{tc=e},!0)},hp=()=>(tc<0&&(Oj(),Fj()),{get firstHiddenTime(){return tc}}),Bj=e=>{const t=hp(),n=ya("FID");let r;const s=l=>{l.startTime<t.firstHiddenTime&&(n.value=l.processingStart-l.startTime,n.entries.push(l),r(!0))},i=l=>{l.forEach(s)},a=Wi("first-input",i);r=ga(e,n),a&&xa(()=>{i(a.takeRecords()),a.disconnect()},!0)};let Ov=0,su=1/0,tl=0;const $j=e=>{e.forEach(t=>{t.interactionId&&(su=Math.min(su,t.interactionId),tl=Math.max(tl,t.interactionId),Ov=tl?(tl-su)/7+1:0)})};let Tf;const Uj=()=>Tf?Ov:performance.interactionCount||0,zj=()=>{"interactionCount"in performance||Tf||(Tf=Wi("event",$j,{type:"event",buffered:!0,durationThreshold:0}))},Fv=()=>Uj(),o0=10,sr=[],iu={},a0=e=>{const t=sr[sr.length-1],n=iu[e.interactionId];if(n||sr.length<o0||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const r={id:e.interactionId,latency:e.duration,entries:[e]};iu[r.id]=r,sr.push(r)}sr.sort((r,s)=>s.latency-r.latency),sr.splice(o0).forEach(r=>{delete iu[r.id]})}},Hj=()=>{const e=Math.min(sr.length-1,Math.floor(Fv()/50));return sr[e]},Wj=(e,t)=>{t=t||{},zj();const n=ya("INP");let r;const s=a=>{a.forEach(c=>{c.interactionId&&a0(c),c.entryType==="first-input"&&!sr.some(f=>f.entries.some(u=>c.duration===u.duration&&c.startTime===u.startTime))&&a0(c)});const l=Hj();l&&l.latency!==n.value&&(n.value=l.latency,n.entries=l.entries,r())},i=Wi("event",s,{durationThreshold:t.durationThreshold||40});r=ga(e,n,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),xa(()=>{s(i.takeRecords()),n.value<0&&Fv()>0&&(n.value=0,n.entries=[]),r(!0)}))},l0={},Vj=e=>{const t=hp(),n=ya("LCP");let r;const s=a=>{const l=a[a.length-1];if(l){const c=Math.max(l.startTime-fp(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[l],r())}},i=Wi("largest-contentful-paint",s);if(i){r=ga(e,n);const a=()=>{l0[n.id]||(s(i.takeRecords()),i.disconnect(),l0[n.id]=!0,r(!0))};return["keydown","click"].forEach(l=>{ye.document&&addEventListener(l,a,{once:!0,capture:!0})}),xa(a,!0),a}},If=e=>{ye.document&&(ye.document.prerendering?addEventListener("prerenderingchange",()=>If(e),!0):ye.document.readyState!=="complete"?addEventListener("load",()=>If(e),!0):setTimeout(e,0))},qj=(e,t)=>{t=t||{};const n=ya("TTFB"),r=ga(e,n,t.reportAllChanges);If(()=>{const s=Zc();if(s){if(n.value=Math.max(s.responseStart-fp(),0),n.value<0||n.value>performance.now())return;n.entries=[s],r(!0)}})},Eo={},nc={};let Bv,$v,Uv,zv,Hv;function Gj(e,t=!1){return wa("cls",e,Qj,Bv,t)}function Wv(e,t=!1){return wa("lcp",e,Zj,Uv,t)}function Yj(e){return wa("ttfb",e,eC,zv)}function Xj(e){return wa("fid",e,Jj,$v)}function Kj(e){return wa("inp",e,tC,Hv)}function Ci(e,t){return Vv(e,t),nc[e]||(nC(e),nc[e]=!0),qv(e,t)}function Vi(e,t){const n=Eo[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(s){Ve&&V.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${gr(r)}
Error:`,s)}}function Qj(){return Dj(e=>{Vi("cls",{metric:e}),Bv=e},{reportAllChanges:!0})}function Jj(){return Bj(e=>{Vi("fid",{metric:e}),$v=e})}function Zj(){return Vj(e=>{Vi("lcp",{metric:e}),Uv=e})}function eC(){return qj(e=>{Vi("ttfb",{metric:e}),zv=e})}function tC(){return Wj(e=>{Vi("inp",{metric:e}),Hv=e})}function wa(e,t,n,r,s=!1){Vv(e,t);let i;return nc[e]||(i=n(),nc[e]=!0),r&&t({metric:r}),qv(e,t,s?i:void 0)}function nC(e){const t={};e==="event"&&(t.durationThreshold=0),Wi(e,n=>{Vi(e,{entries:n})},t)}function Vv(e,t){Eo[e]=Eo[e]||[],Eo[e].push(t)}function qv(e,t,n){return()=>{n&&n();const r=Eo[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function ou(e){return typeof e=="number"&&isFinite(e)}function Ti(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const rC=2147483647;function ht(e){return e/1e3}function pp(){return ye&&ye.addEventListener&&ye.performance}let c0=0,Je={},Un,No;function sC(){const e=pp();if(e&&sn){e.mark&&ye.performance.mark("sentry-tracing-init");const t=dC(),n=lC(),r=cC(),s=uC();return()=>{t(),n(),r(),s()}}return()=>{}}function iC(){Ci("longtask",({entries:e})=>{for(const t of e){const n=Rs();if(!n)return;const r=ht(sn+t.startTime),s=ht(t.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s})}})}function oC(){Ci("event",({entries:e})=>{for(const t of e){const n=Rs();if(!n)return;if(t.name==="click"){const r=ht(sn+t.startTime),s=ht(t.duration),i={description:Yr(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s},a=Vw(t.target);a&&(i.attributes={"ui.component_name":a}),n.startChild(i)}}})}function aC(e,t){if(pp()&&sn){const r=fC(e,t);return()=>{r()}}return()=>{}}function lC(){return Gj(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Ve&&V.log("[Measurements] Adding CLS"),Je.cls={value:e.value,unit:""},No=t)},!0)}function cC(){return Wv(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Ve&&V.log("[Measurements] Adding LCP"),Je.lcp={value:e.value,unit:"millisecond"},Un=t)},!0)}function dC(){return Xj(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=ht(sn),r=ht(t.startTime);Ve&&V.log("[Measurements] Adding FID"),Je.fid={value:e.value,unit:"millisecond"},Je["mark.fid"]={value:n+r,unit:"second"}})}function uC(){return Yj(({metric:e})=>{e.entries[e.entries.length-1]&&(Ve&&V.log("[Measurements] Adding TTFB"),Je.ttfb={value:e.value,unit:"millisecond"})})}const d0={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function fC(e,t){return Kj(({metric:n})=>{if(n.value===void 0)return;const r=n.entries.find(b=>b.duration===n.value&&d0[b.name]!==void 0),s=Re();if(!r||!s)return;const i=d0[r.name],a=s.getOptions(),l=ht(sn+r.startTime),c=ht(n.value),d=r.interactionId!==void 0?e[r.interactionId]:void 0;if(d===void 0)return;const{routeName:f,parentContext:u,activeTransaction:h,user:p,replayId:y}=d,w=p!==void 0?p.email||p.id||p.ip_address:void 0,v=h!==void 0?h.getProfileId():void 0,m=new Jc({startTimestamp:l,endTimestamp:l+c,op:`ui.interaction.${i}`,name:Yr(r.target),attributes:{release:a.release,environment:a.environment,transaction:f,...w!==void 0&&w!==""?{user:w}:{},...v!==void 0?{profile_id:v}:{},...y!==void 0?{replay_id:y}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),g=bC(u,a,t);if(g&&Math.random()<g){const b=m?dj([m],s.getDsn()):void 0,k=s&&s.getTransport();k&&b&&k.send(b).then(null,T=>{Ve&&V.error("Error while sending interaction:",T)});return}})}function hC(e){const t=pp();if(!t||!ye.performance.getEntries||!sn)return;Ve&&V.log("[Tracing] Adding & adjusting spans using Performance API");const n=ht(sn),r=t.getEntries(),{op:s,start_timestamp:i}=it(e);if(r.slice(c0).forEach(a=>{const l=ht(a.startTime),c=ht(a.duration);if(!(e.op==="navigation"&&i&&n+l<i))switch(a.entryType){case"navigation":{mC(e,a,n);break}case"mark":case"paint":case"measure":{pC(e,a,l,c,n);const d=hp(),f=a.startTime<d.firstHiddenTime;a.name==="first-paint"&&f&&(Ve&&V.log("[Measurements] Adding FP"),Je.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&f&&(Ve&&V.log("[Measurements] Adding FCP"),Je.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":{yC(e,a,a.name,l,c,n);break}}}),c0=Math.max(r.length-1,0),xC(e),s==="pageload"){vC(Je),["fcp","fp","lcp"].forEach(l=>{if(!Je[l]||!i||n>=i)return;const c=Je[l].value,d=n+ht(c),f=Math.abs((d-i)*1e3),u=f-c;Ve&&V.log(`[Measurements] Normalized ${l} from ${c} to ${f} (${u})`),Je[l].value=f});const a=Je["mark.fid"];a&&Je.fid&&(Ti(e,{description:"first input delay",endTimestamp:a.value+ht(Je.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:a.value}),delete Je["mark.fid"]),"fcp"in Je||delete Je.cls,Object.keys(Je).forEach(l=>{$N(l,Je[l].value,Je[l].unit)}),wC(e)}Un=void 0,No=void 0,Je={}}function pC(e,t,n,r,s){const i=s+n,a=i+r;return Ti(e,{description:t.name,endTimestamp:a,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i}),i}function mC(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{nl(e,t,r,n)}),nl(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),nl(e,t,"fetch",n,"cache","domainLookupStart"),nl(e,t,"domainLookup",n,"DNS"),gC(e,t,n)}function nl(e,t,n,r,s,i){const a=i?t[i]:t[`${n}End`],l=t[`${n}Start`];!l||!a||Ti(e,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+ht(l),endTimestamp:r+ht(a)})}function gC(e,t,n){t.responseEnd&&(Ti(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+ht(t.requestStart),endTimestamp:n+ht(t.responseEnd)}),Ti(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+ht(t.responseStart),endTimestamp:n+ht(t.responseEnd)}))}function yC(e,t,n,r,s,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=fs(n),l={};au(l,t,"transferSize","http.response_transfer_size"),au(l,t,"encodedBodySize","http.response_content_length"),au(l,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(l["resource.render_blocking_status"]=t.renderBlockingStatus),a.protocol&&(l["url.scheme"]=a.protocol.split(":").pop()),a.host&&(l["server.address"]=a.host),l["url.same_origin"]=n.includes(ye.location.origin);const c=i+r,d=c+s;Ti(e,{description:n.replace(ye.location.origin,""),endTimestamp:d,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:l})}function xC(e){const t=ye.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),ou(n.rtt)&&(Je["connection.rtt"]={value:n.rtt,unit:"millisecond"})),ou(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),ou(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function wC(e){Un&&(Ve&&V.log("[Measurements] Adding LCP Data"),Un.element&&e.setTag("lcp.element",Yr(Un.element)),Un.id&&e.setTag("lcp.id",Un.id),Un.url&&e.setTag("lcp.url",Un.url.trim().slice(0,200)),e.setTag("lcp.size",Un.size)),No&&No.sources&&(Ve&&V.log("[Measurements] Adding CLS Data"),No.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,Yr(t.node))))}function au(e,t,n,r){const s=t[n];s!=null&&s<rC&&(e[r]=s)}function vC(e){const t=Zc();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(Ve&&V.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function bC(e,t,n){if(!Hi(t))return!1;let r;return e!==void 0&&typeof t.tracesSampler=="function"?r=t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:ye.location}):e!==void 0&&e.sampled!==void 0?r=e.sampled:typeof t.tracesSampleRate<"u"?r=t.tracesSampleRate:r=1,Tv(r)?r===!0?n:r===!1?0:r*n:(Ve&&V.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}function kC(e,t,n,r,s="auto.http.browser"){if(!Hi()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const p=e.fetchData.__span;if(!p)return;const y=r[p];y&&(EC(y,e),delete r[p]);return}const a=cn(),l=Re(),{method:c,url:d}=e.fetchData,f=_C(d),u=f?fs(f).host:void 0,h=i?Sv({name:`${c} ${d}`,onlyIfParent:!0,attributes:{url:d,type:"fetch","http.method":c,"http.url":f,"server.address":u,[Zs]:s},op:"http.client"}):void 0;if(h&&(e.fetchData.__span=h.spanContext().spanId,r[h.spanContext().spanId]=h),n(e.fetchData.url)&&l){const p=e.args[0];e.args[1]=e.args[1]||{};const y=e.args[1];y.headers=SC(p,l,a,y,h)}return h}function SC(e,t,n,r,s){const i=s||n.getSpan(),a=ts(),{traceId:l,spanId:c,sampled:d,dsc:f}={...a.getPropagationContext(),...n.getPropagationContext()},u=i?Yc(i):ip(l,c,d),h=av(f||(i?ji(i):Qc(l,t,n))),p=r.headers||(typeof Request<"u"&&mr(e,Request)?e.headers:void 0);if(p)if(typeof Headers<"u"&&mr(p,Headers)){const y=new Headers(p);return y.append("sentry-trace",u),h&&y.append(_f,h),y}else if(Array.isArray(p)){const y=[...p,["sentry-trace",u]];return h&&y.push([_f,h]),y}else{const y="baggage"in p?p.baggage:void 0,w=[];return Array.isArray(y)?w.push(...y):y&&w.push(y),h&&w.push(h),{...p,"sentry-trace":u,baggage:w.length>0?w.join(","):void 0}}else return{"sentry-trace":u,baggage:h}}function _C(e){try{return new URL(e).href}catch{return}}function EC(e,t){if(t.response){dp(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus("internal_error");e.end()}const Rf=["localhost",/^\/(?!\/)/],Lf={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Rf,tracePropagationTargets:Rf};function NC(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:i,enableHTTPTimings:a}={traceFetch:Lf.traceFetch,traceXHR:Lf.traceXHR,...e},l=typeof i=="function"?i:f=>!0,c=f=>IC(f,r||s),d={};t&&np(f=>{const u=kC(f,l,c,d);if(u){const h=Gv(f.fetchData.url),p=h?fs(h).host:void 0;u.setAttributes({"http.url":h,"server.address":p})}a&&u&&u0(u)}),n&&rp(f=>{const u=RC(f,l,c,d);a&&u&&u0(u)})}function jC(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function u0(e){const{url:t}=it(e).data||{};if(!t||typeof t!="string")return;const n=Ci("resource",({entries:r})=>{r.forEach(s=>{jC(s)&&s.name.endsWith(t)&&(TC(s).forEach(a=>e.setAttribute(...a)),setTimeout(n))})})}function CC(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function Bn(e=0){return((sn||performance.timeOrigin)+e)/1e3}function TC(e){const{name:t,version:n}=CC(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),sn?[...r,["http.request.redirect_start",Bn(e.redirectStart)],["http.request.fetch_start",Bn(e.fetchStart)],["http.request.domain_lookup_start",Bn(e.domainLookupStart)],["http.request.domain_lookup_end",Bn(e.domainLookupEnd)],["http.request.connect_start",Bn(e.connectStart)],["http.request.secure_connection_start",Bn(e.secureConnectionStart)],["http.request.connection_end",Bn(e.connectEnd)],["http.request.request_start",Bn(e.requestStart)],["http.request.response_start",Bn(e.responseStart)],["http.request.response_end",Bn(e.responseEnd)]]:r}function IC(e,t){return Ui(e,t||Rf)}function RC(e,t,n,r){const s=e.xhr,i=s&&s[Lr];if(!Hi()||!s||s.__sentry_own_request__||!i)return;const a=t(i.url);if(e.endTimestamp&&a){const p=s.__sentry_xhr_span_id__;if(!p)return;const y=r[p];y&&i.status_code!==void 0&&(dp(y,i.status_code),y.end(),delete r[p]);return}const l=cn(),c=ts(),d=Gv(i.url),f=d?fs(d).host:void 0,u=a?Sv({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":d,url:i.url,"server.address":f,[Zs]:"auto.http.browser"},op:"http.client"}):void 0;u&&(s.__sentry_xhr_span_id__=u.spanContext().spanId,r[s.__sentry_xhr_span_id__]=u);const h=Re();if(s.setRequestHeader&&n(i.url)&&h){const{traceId:p,spanId:y,sampled:w,dsc:v}={...c.getPropagationContext(),...l.getPropagationContext()},m=u?Yc(u):ip(p,y,w),g=av(v||(u?ji(u):Qc(p,h,l)));LC(s,m,g)}return u}function LC(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(_f,n)}catch{}}function Gv(e){try{return new URL(e,ye.location.origin).href}catch{return}}const AC="BrowserTracing",PC={...Sl,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Lf},MC=(e={})=>{const t=Ve?!!(e.tracePropagationTargets||e.tracingOrigins):!1;BN(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...PC,...e},r=sC(),s={};n.enableInp&&aC(s,n.interactionsSampleRate),n.enableLongTask&&iC(),n._experiments.enableInteractions&&oC();const i={name:void 0,context:void 0};function a(l){const c=Et(),{beforeStartSpan:d,idleTimeout:f,finalTimeout:u,heartbeatInterval:h}=n,p=l.op==="pageload";let y;if(p){const g=p?f0("sentry-trace"):"",b=p?f0("baggage"):void 0,{traceId:k,dsc:T,parentSpanId:E,sampled:S}=VE(g,b);y={traceId:k,parentSpanId:E,parentSampled:S,...l,metadata:{...l.metadata,dynamicSamplingContext:T},trimEnd:!0}}else y={trimEnd:!0,...l};const w=d?d(y):y;w.metadata=w.name!==y.name?{...w.metadata,source:"custom"}:w.metadata,i.name=w.name,i.context=w,w.sampled===!1&&Ve&&V.log(`[Tracing] Will not send ${w.op} transaction because of beforeNavigate.`),Ve&&V.log(`[Tracing] Starting ${w.op} transaction on scope`);const{location:v}=ye,m=Iv(c,w,f,u,!0,{location:v},h,p);return p&&ye.document&&(ye.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(ye.document.readyState)&&m.sendAutoFinishSignal()}),["interactive","complete"].includes(ye.document.readyState)&&m.sendAutoFinishSignal()),m.registerBeforeFinishCallback(g=>{r(),hC(g)}),m}return{name:AC,setupOnce:()=>{},afterAllSetup(l){const c=l.getOptions(),{markBackgroundSpan:d,traceFetch:f,traceXHR:u,shouldCreateSpanForRequest:h,enableHTTPTimings:p,_experiments:y}=n,w=c&&c.tracePropagationTargets,v=w||n.tracePropagationTargets;Ve&&t&&w&&V.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let m,g=ye.location&&ye.location.href;if(l.on&&(l.on("startNavigationSpan",b=>{m&&(Ve&&V.log(`[Tracing] Finishing current transaction with op: ${it(m).op}`),m.end()),m=a({op:"navigation",...b})}),l.on("startPageLoadSpan",b=>{m&&(Ve&&V.log(`[Tracing] Finishing current transaction with op: ${it(m).op}`),m.end()),m=a({op:"pageload",...b})})),n.instrumentPageLoad&&l.emit&&ye.location){const b={name:ye.location.pathname,startTimestamp:sn?sn/1e3:void 0,origin:"auto.pageload.browser",attributes:{[cr]:"url"}};DC(l,b)}n.instrumentNavigation&&l.emit&&ye.location&&qc(({to:b,from:k})=>{if(k===void 0&&g&&g.indexOf(b)!==-1){g=void 0;return}if(k!==b){g=void 0;const T={name:ye.location.pathname,origin:"auto.navigation.browser",attributes:{[cr]:"url"}};OC(l,T)}}),d&&Aj(),y.enableInteractions&&FC(n,i),n.enableInp&&$C(s,i),NC({traceFetch:f,traceXHR:u,tracePropagationTargets:v,shouldCreateSpanForRequest:h,enableHTTPTimings:p})},options:n}};function DC(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=up();return(n&&it(n).op)==="pageload"?n:void 0}function OC(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=up();return(n&&it(n).op)==="navigation"?n:void 0}function f0(e){const t=Q_(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function FC(e,t){let n;const r=()=>{const{idleTimeout:s,finalTimeout:i,heartbeatInterval:a}=e,l="ui.action.click",c=Rs();if(c&&c.op&&["navigation","pageload"].includes(c.op)){Ve&&V.warn(`[Tracing] Did not create ${l} transaction because a pageload or navigation transaction is in progress.`);return}if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name){Ve&&V.warn(`[Tracing] Did not create ${l} transaction because _latestRouteName is missing.`);return}const{location:d}=ye,f={name:t.name,op:l,trimEnd:!0,data:{[cr]:t.context?UC(t.context):"url"}};n=Iv(Et(),f,s,i,!0,{location:d},a)};["click"].forEach(s=>{ye.document&&addEventListener(s,r,{once:!1,capture:!0})})}function BC(e){return"duration"in e}const h0=10;function $C(e,t){const n=({entries:r})=>{const s=Re(),i=s!==void 0&&s.getIntegrationByName!==void 0?s.getIntegrationByName("Replay"):void 0,a=i!==void 0?i.getReplayId():void 0,l=Rs(),c=cn(),d=c!==void 0?c.getUser():void 0;r.forEach(f=>{if(BC(f)){const u=f.interactionId;if(u===void 0)return;const h=e[u],p=f.duration,y=f.startTime,w=Object.keys(e),v=w.length>0?w.reduce((m,g)=>e[m].duration<e[g].duration?m:g):void 0;if(f.entryType==="first-input"&&w.map(g=>e[g]).some(g=>g.duration===p&&g.startTime===y)||!u)return;if(h)h.duration=Math.max(h.duration,p);else if(w.length<h0||v===void 0||p>e[v].duration){const m=t.name,g=t.context;m&&g&&(v&&Object.keys(e).length>=h0&&delete e[v],e[u]={routeName:m,duration:p,parentContext:g,user:d,activeTransaction:l,replayId:a,startTime:y})}}})};Ci("event",n),Ci("first-input",n)}function UC(e){const t=e.attributes&&e.attributes[cr],n=e.data&&e.data[cr],r=e.metadata&&e.metadata.source;return t||n||r}const Ee=Se;let Af=0;function Yv(){return Af>0}function zC(){Af++,setTimeout(()=>{Af--})}function Ii(e,t={},n){if(typeof e!="function")return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(tp(e))return e}catch{return e}const r=function(){const s=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const i=s.map(a=>Ii(a,t));return e.apply(this,i)}catch(i){throw zC(),gv(a=>{a.addEventProcessor(l=>(t.mechanism&&(yf(l,void 0,void 0),Ko(l,t.mechanism)),l.extra={...l.extra,arguments:s},l)),Kc(i)}),i}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}Yw(r,e),bs(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const wn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Xv(e,t){const n=mp(e,t),r={type:t&&t.name,value:qC(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function HC(e,t,n,r){const s=Re(),i=s&&s.getOptions().normalizeDepth,a={exception:{values:[{type:Wc(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:XC(t,{isUnhandledRejection:r})}]},extra:{__serialized__:sv(t,i)}};if(n){const l=mp(e,n);l.length&&(a.exception.values[0].stacktrace={frames:l})}return a}function lu(e,t){return{exception:{values:[Xv(e,t)]}}}function mp(e,t){const n=t.stacktrace||t.stack||"",r=VC(t);try{return e(n,r)}catch{}return[]}const WC=/Minified React error #\d+;/i;function VC(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(WC.test(e.message))return 1}return 0}function qC(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function GC(e,t,n,r){const s=n&&n.syntheticException||void 0,i=gp(e,t,s,r);return Ko(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),Ni(i)}function YC(e,t,n="info",r,s){const i=r&&r.syntheticException||void 0,a=Pf(e,t,i,s);return a.level=n,r&&r.event_id&&(a.event_id=r.event_id),Ni(a)}function gp(e,t,n,r,s){let i;if(Qh(t)&&t.error)return lu(e,t.error);if(Ng(t)||U_(t)){const a=t;if("stack"in t)i=lu(e,t);else{const l=a.name||(Ng(a)?"DOMError":"DOMException"),c=a.message?`${l}: ${a.message}`:l;i=Pf(e,c,n,r),yf(i,c)}return"code"in a&&(i.tags={...i.tags,"DOMException.code":`${a.code}`}),i}return Kh(t)?lu(e,t):Ei(t)||Wc(t)?(i=HC(e,t,n,s),Ko(i,{synthetic:!0}),i):(i=Pf(e,t,n,r),yf(i,`${t}`,void 0),Ko(i,{synthetic:!0}),i)}function Pf(e,t,n,r){const s={};if(r&&n){const i=mp(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]})}if(Jh(t)){const{__sentry_template_string__:i,__sentry_template_values__:a}=t;return s.logentry={message:i,params:a},s}return s.message=t,s}function XC(e,{isUnhandledRejection:t}){const n=iE(e),r=t?"promise rejection":"exception";return Qh(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Wc(e)?`Event \`${KC(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function KC(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function QC(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Cs(r)}},i=JC(e);return es(s,[i])}function JC(e){return[{type:"user_report"},e]}class ZC extends nj{constructor(t){const n=Ee.SENTRY_SDK_SOURCE||jE();Dv(t,"browser",["browser"],n),super(t),t.sendClientReports&&Ee.document&&Ee.document.addEventListener("visibilitychange",()=>{Ee.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return GC(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return YC(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){wn&&V.warn("SDK not enabled, will not capture user feedback.");return}const n=QC(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){wn&&V.log("No outcomes to send");return}if(!this._dsn){wn&&V.log("No dsn provided, will not send outcomes");return}wn&&V.log("Sending outcomes:",t);const n=QE(t,this._options.tunnel&&Cs(this._dsn));this._sendEnvelope(n)}}let mo;function e4(){if(mo)return mo;if(bf(Ee.fetch))return mo=Ee.fetch.bind(Ee);const e=Ee.document;let t=Ee.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){wn&&V.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return mo=t.bind(Ee)}function t4(){mo=void 0}function n4(e,t=e4()){let n=0,r=0;function s(i){const a=i.body.length;n+=a,r++;const l={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,l).then(c=>(n-=a,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return t4(),n-=a,r--,sp(c)}}return Mv(e,s)}const r4=4;function s4(e){function t(n){return new en((r,s)=>{const i=new XMLHttpRequest;i.onerror=s,i.onreadystatechange=()=>{i.readyState===r4&&r({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",e.url);for(const a in e.headers)Object.prototype.hasOwnProperty.call(e.headers,a)&&i.setRequestHeader(a,e.headers[a]);i.send(n.body)})}return Mv(e,t)}const ed="?",i4=30,o4=40,a4=50;function yp(e,t,n,r){const s={filename:e,function:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const l4=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,c4=/\((\S*)(?::(\d+))(?::(\d+))\)/,d4=e=>{const t=l4.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const i=c4.exec(t[2]);i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3])}const[r,s]=Kv(t[1]||ed,t[2]);return yp(s,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},u4=[i4,d4],f4=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,h4=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,p4=e=>{const t=f4.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=h4.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],s=t[1]||ed;return[s,r]=Kv(s,r),yp(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},m4=[a4,p4],g4=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,y4=e=>{const t=g4.exec(e);return t?yp(t[2],t[1]||ed,+t[3],t[4]?+t[4]:void 0):void 0},x4=[o4,y4],w4=[u4,m4,x4],v4=Qw(...w4),Kv=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:ed,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},rl=1024,b4="Breadcrumbs",k4=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:b4,setupOnce(){},setup(n){t.console&&cE(N4(n)),t.dom&&ev(E4(n,t.dom)),t.xhr&&rp(j4(n)),t.fetch&&np(C4(n)),t.history&&qc(T4(n)),t.sentry&&n.on&&n.on("beforeSendEvent",_4(n))}}},S4=k4;function _4(e){return function(n){Re()===e&&Xr({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Cr(n)},{event:n})}}function E4(e,t){return function(r){if(Re()!==e)return;let s,i,a=typeof t=="object"?t.serializeAttribute:void 0,l=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;l&&l>rl&&(wn&&V.warn(`\`dom.maxStringLength\` cannot exceed ${rl}, but a value of ${l} was configured. Sentry will use ${rl} instead.`),l=rl),typeof a=="string"&&(a=[a]);try{const d=r.event,f=I4(d)?d.target:d;s=Yr(f,{keyAttrs:a,maxStringLength:l}),i=Vw(f)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),Xr(c,{event:r.event,name:r.name,global:r.global})}}function N4(e){return function(n){if(Re()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:OE(n.level),message:jg(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${jg(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Xr(r,{input:n.args,level:n.level})}}function j4(e){return function(n){if(Re()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[Lr];if(!r||!s||!i)return;const{method:a,url:l,status_code:c,body:d}=i,f={method:a,url:l,status_code:c},u={xhr:n.xhr,input:d,startTimestamp:r,endTimestamp:s};Xr({category:"xhr",data:f,type:"http"},u)}}function C4(e){return function(n){if(Re()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const i=n.fetchData,a={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s};Xr({category:"fetch",data:i,level:"error",type:"http"},a)}else{const i=n.response,a={...n.fetchData,status_code:i&&i.status},l={input:n.args,response:i,startTimestamp:r,endTimestamp:s};Xr({category:"fetch",data:a,type:"http"},l)}}}function T4(e){return function(n){if(Re()!==e)return;let r=n.from,s=n.to;const i=fs(Ee.location.href);let a=r?fs(r):void 0;const l=fs(s);(!a||!a.path)&&(a=i),i.protocol===l.protocol&&i.host===l.host&&(s=l.relative),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),Xr({category:"navigation",data:{from:r,to:s}})}}function I4(e){return!!e&&!!e.target}const R4="Dedupe",L4=()=>{let e;return{name:R4,setupOnce(){},processEvent(t){if(t.type)return t;try{if(P4(t,e))return wn&&V.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},A4=L4;function P4(e,t){return t?!!(M4(e,t)||D4(e,t)):!1}function M4(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Jv(e,t)||!Qv(e,t))}function D4(e,t){const n=p0(t),r=p0(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Jv(e,t)||!Qv(e,t))}function Qv(e,t){let n=m0(e),r=m0(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],a=n[s];if(i.filename!==a.filename||i.lineno!==a.lineno||i.colno!==a.colno||i.function!==a.function)return!1}return!0}function Jv(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function p0(e){return e.exception&&e.exception.values&&e.exception.values[0]}function m0(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const O4="GlobalHandlers",F4=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:O4,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&($4(n),g0("onerror")),t.onunhandledrejection&&(U4(n),g0("onunhandledrejection"))}}},B4=F4;function $4(e){nv(t=>{const{stackParser:n,attachStacktrace:r}=eb();if(Re()!==e||Yv())return;const{msg:s,url:i,line:a,column:l,error:c}=t,d=c===void 0&&Kn(s)?W4(s,i,a,l):Zv(gp(n,c||s,void 0,r,!1),i,a,l);d.level="error",mv(d,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function U4(e){rv(t=>{const{stackParser:n,attachStacktrace:r}=eb();if(Re()!==e||Yv())return;const s=z4(t),i=Zh(s)?H4(s):gp(n,s,void 0,r,!0);i.level="error",mv(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function z4(e){if(Zh(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return e}function H4(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function W4(e,t,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=Qh(e)?e.message:e,a="Error";const l=i.match(s);return l&&(a=l[1],i=l[2]),Zv({exception:{values:[{type:a,value:i}]}},t,n,r)}function Zv(e,t,n,r){const s=e.exception=e.exception||{},i=s.values=s.values||[],a=i[0]=i[0]||{},l=a.stacktrace=a.stacktrace||{},c=l.frames=l.frames||[],d=isNaN(parseInt(r,10))?void 0:r,f=isNaN(parseInt(n,10))?void 0:n,u=Kn(t)&&t.length>0?t:K_();return c.length===0&&c.push({colno:d,filename:u,function:"?",in_app:!0,lineno:f}),e}function g0(e){wn&&V.log(`Global Handler attached: ${e}`)}function eb(){const e=Re();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const V4="HttpContext",q4=()=>({name:V4,setupOnce(){},preprocessEvent(e){if(!Ee.navigator&&!Ee.location&&!Ee.document)return;const t=e.request&&e.request.url||Ee.location&&Ee.location.href,{referrer:n}=Ee.document||{},{userAgent:r}=Ee.navigator||{},s={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:s};e.request=i}}),G4=q4,Y4="cause",X4=5,K4="LinkedErrors",Q4=(e={})=>{const t=e.limit||X4,n=e.key||Y4;return{name:K4,setupOnce(){},preprocessEvent(r,s,i){const a=i.getOptions();q_(Xv,a.stackParser,a.maxValueLength,n,t,r,s)}}},J4=Q4,Z4=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],eT="TryCatch",tT=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:eT,setupOnce(){t.setTimeout&&xt(Ee,"setTimeout",y0),t.setInterval&&xt(Ee,"setInterval",y0),t.requestAnimationFrame&&xt(Ee,"requestAnimationFrame",rT),t.XMLHttpRequest&&"XMLHttpRequest"in Ee&&xt(XMLHttpRequest.prototype,"send",sT);const n=t.eventTarget;n&&(Array.isArray(n)?n:Z4).forEach(iT)}}},nT=tT;function y0(e){return function(...t){const n=t[0];return t[0]=Ii(n,{mechanism:{data:{function:gr(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function rT(e){return function(t){return e.apply(this,[Ii(t,{mechanism:{data:{function:"requestAnimationFrame",handler:gr(e)},handled:!1,type:"instrument"}})])}}function sT(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&xt(n,s,function(i){const a={mechanism:{data:{function:s,handler:gr(i)},handled:!1,type:"instrument"}},l=tp(i);return l&&(a.mechanism.data.handler=gr(l)),Ii(i,a)})}),e.apply(this,t)}}function iT(e){const t=Ee,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(xt(n,"addEventListener",function(r){return function(s,i,a){try{typeof i.handleEvent=="function"&&(i.handleEvent=Ii(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:gr(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[s,Ii(i,{mechanism:{data:{function:"addEventListener",handler:gr(i),target:e},handled:!1,type:"instrument"}}),a])}}),xt(n,"removeEventListener",function(r){return function(s,i,a){const l=i;try{const c=l&&l.__sentry_wrapped__;c&&r.call(this,s,c,a)}catch{}return r.call(this,s,l,a)}}))}const oT=[vj(),Lj(),nT(),S4(),B4(),J4(),A4(),G4()];function aT(e){return[...oT]}function lT(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=aT()),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),Ee.SENTRY_RELEASE&&Ee.SENTRY_RELEASE.id&&(e.release=Ee.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t={...e,stackParser:aE(e.stackParser||v4),integrations:KN(e),transport:e.transport||(tv()?n4:s4)};oj(ZC,t),e.autoSessionTracking&&cT()}const x0=(e={},t=Et())=>{if(!Ee.document){wn&&V.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=t.getStackTop(),s=e.dsn||n&&n.getDsn();if(!s){wn&&V.error("DSN not configured for showReportDialog call");return}r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const i=Ee.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=YN(s,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:a}=e;if(a){const c=d=>{if(d.data==="__sentry_reportdialog_closed__")try{a()}finally{Ee.removeEventListener("message",c)}};Ee.addEventListener("message",c)}const l=Ee.document.head||Ee.document.body;l?l.appendChild(i):wn&&V.error("Not injecting report dialog. No injection point found in HTML")};function cT(){if(typeof Ee.document>"u"){wn&&V.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}qg({ignoreDuration:!0}),Gg(),qc(({from:e,to:t})=>{e!==void 0&&e!==t&&(qg({ignoreDuration:!0}),Gg())})}const Be=Se,xp="sentryReplaySession",dT="replay_event",wp="Unable to send Replay",uT=3e5,fT=9e5,hT=5e3,pT=5500,mT=6e4,gT=5e3,yT=3,w0=15e4,sl=5e3,xT=3e3,wT=300,vp=2e7,vT=4999,bT=15e3,v0=36e5;function kT(e,t){return e??t()}function rc(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...a)=>n.call(t,...a)),t=void 0)}return n}var ft;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(ft||(ft={}));function ST(e){return e.nodeType===e.ELEMENT_NODE}function jo(e){const t=rc([e,"optionalAccess",n=>n.host]);return rc([t,"optionalAccess",n=>n.shadowRoot])===e}function Co(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function _T(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function ET(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function sc(e){try{const t=e.rules||e.cssRules;return t?_T(Array.from(t,tb).join("")):null}catch{return null}}function tb(e){let t;if(jT(e))try{t=sc(e.styleSheet)||ET(e)}catch{}else if(CT(e)&&e.selectorText.includes(":"))return NT(e.cssText);return t||e.cssText}function NT(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function jT(e){return"styleSheet"in e}function CT(e){return"selectorText"in e}class nb{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;const n=rc([this,"access",r=>r.getMeta,"call",r=>r(t),"optionalAccess",r=>r.id]);return kT(n,()=>-1)}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function TT(){return new nb}function td({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Qo({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Ri(e){return e.toLowerCase()}function Mf(e){return e.toUpperCase()}const b0="__rrweb_original__";function IT(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const i=t.getImageData,a=b0 in i?i[b0]:i;if(new Uint32Array(a.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function bp(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Ri(t):null}function ic(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}let RT=1;const LT=new RegExp("[^a-z0-9-_:]"),Jo=-2;function kp(){return RT++}function AT(e){if(e instanceof HTMLFormElement)return"form";const t=Ri(e.tagName);return LT.test(t)?"div":t}function PT(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Os,k0;const MT=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,DT=/^(?:[a-z+]+:)?\/\//i,OT=/^www\..*/i,FT=/^(data:)([^,]*),(.*)/i;function oc(e,t){return(e||"").replace(MT,(n,r,s,i,a,l)=>{const c=s||a||l,d=r||i||"";if(!c)return n;if(DT.test(c)||OT.test(c))return`url(${d}${c}${d})`;if(FT.test(c))return`url(${d}${c}${d})`;if(c[0]==="/")return`url(${d}${PT(t)+c}${d})`;const f=t.split("/"),u=c.split("/");f.pop();for(const h of u)h!=="."&&(h===".."?f.pop():f.push(h));return`url(${d}${f.join("/")}${d})`})}const BT=/^[^ \t\n\r\u000c]+/,$T=/^[, \t\n\r\u000c]+/;function UT(e,t){if(t.trim()==="")return t;let n=0;function r(i){let a;const l=i.exec(t.substring(n));return l?(a=l[0],n+=a.length,a):""}const s=[];for(;r($T),!(n>=t.length);){let i=r(BT);if(i.slice(-1)===",")i=ei(e,i.substring(0,i.length-1)),s.push(i);else{let a="";i=ei(e,i);let l=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((i+a).trim());break}else if(l)c===")"&&(l=!1);else if(c===","){n+=1,s.push((i+a).trim());break}else c==="("&&(l=!0);a+=c,n+=1}}}return s.join(", ")}function ei(e,t){if(!t||t.trim()==="")return t;const n=e.createElement("a");return n.href=t,n.href}function zT(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Sp(){const e=document.createElement("a");return e.href="",e.href}function rb(e,t,n,r,s,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?ei(e,r):n==="srcset"?UT(e,r):n==="style"?oc(r,Sp()):t==="object"&&n==="data"?ei(e,r):typeof i=="function"?i(n,r,s):r)}function sb(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function HT(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const i=e.classList[s];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function WT(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function ls(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:ls(e.parentNode,t,n,r+1)}function ti(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(WT(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Li(e,t,n,r,s,i){try{const a=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(a===null)return!1;if(a.tagName==="INPUT"){const d=a.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(d))return!0}let l=-1,c=-1;if(i){if(c=ls(a,ti(r,s)),c<0)return!0;l=ls(a,ti(t,n),c>=0?c:1/0)}else{if(l=ls(a,ti(t,n)),l<0)return!1;c=ls(a,ti(r,s),l>=0?l:1/0)}return l>=0?c>=0?l<=c:!0:c>=0?!1:!!i}catch{}return!!i}function VT(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const l=setTimeout(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{clearTimeout(l),s=!0,t()});return}const a="about:blank";if(r.location.href!==a||e.src===a||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function qT(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const i=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(i),r=!0,t()})}function GT(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:l,maskAttributeFn:c,maskTextClass:d,unmaskTextClass:f,maskTextSelector:u,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:y={},maskTextFn:w,maskInputFn:v,dataURLOptions:m={},inlineImages:g,recordCanvas:b,keepIframeSrcFn:k,newlyAddedElement:T=!1}=t,E=YT(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:ft.Document,childNodes:[],compatMode:e.compatMode}:{type:ft.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ft.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return KT(e,{doc:n,blockClass:s,blockSelector:i,unblockSelector:a,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:y,maskInputFn:v,dataURLOptions:m,inlineImages:g,recordCanvas:b,keepIframeSrcFn:k,newlyAddedElement:T,rootId:E,maskAllText:l,maskTextClass:d,unmaskTextClass:f,maskTextSelector:u,unmaskTextSelector:h});case e.TEXT_NODE:return XT(e,{maskAllText:l,maskTextClass:d,unmaskTextClass:f,maskTextSelector:u,unmaskTextSelector:h,maskTextFn:w,maskInputOptions:y,maskInputFn:v,rootId:E});case e.CDATA_SECTION_NODE:return{type:ft.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:ft.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function YT(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function XT(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:i,unmaskTextSelector:a,maskTextFn:l,maskInputOptions:c,maskInputFn:d,rootId:f}=t,u=e.parentNode&&e.parentNode.tagName;let h=e.textContent;const p=u==="STYLE"?!0:void 0,y=u==="SCRIPT"?!0:void 0,w=u==="TEXTAREA"?!0:void 0;if(p&&h){try{e.nextSibling||e.previousSibling||rc([e,"access",m=>m.parentNode,"access",m=>m.sheet,"optionalAccess",m=>m.cssRules])&&(h=sc(e.parentNode.sheet))}catch(m){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${m}`,e)}h=oc(h,Sp())}y&&(h="SCRIPT_PLACEHOLDER");const v=Li(e,r,i,s,a,n);if(!p&&!y&&!w&&h&&v&&(h=l?l(h,e.parentElement):h.replace(/[\S]/g,"*")),w&&h&&(c.textarea||v)&&(h=d?d(h,e.parentNode):h.replace(/[\S]/g,"*")),u==="OPTION"&&h){const m=td({type:null,tagName:u,maskInputOptions:c});h=Qo({isMasked:Li(e,r,i,s,a,m),element:e,value:h,maskInputFn:d})}return{type:ft.Text,textContent:h||"",isStyle:p,rootId:f}}function KT(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:a,maskInputOptions:l={},maskAttributeFn:c,maskInputFn:d,dataURLOptions:f={},inlineImages:u,recordCanvas:h,keepIframeSrcFn:p,newlyAddedElement:y=!1,rootId:w,maskAllText:v,maskTextClass:m,unmaskTextClass:g,maskTextSelector:b,unmaskTextSelector:k}=t,T=HT(e,r,s,i),E=AT(e);let S={};const I=e.attributes.length;for(let A=0;A<I;A++){const N=e.attributes[A];N.name&&!sb(E,N.name,N.value)&&(S[N.name]=rb(n,E,Ri(N.name),N.value,e,c))}if(E==="link"&&a){const A=Array.from(n.styleSheets).find(H=>H.href===e.href);let N=null;A&&(N=sc(A)),N&&(delete S.rel,delete S.href,S._cssText=oc(N,A.href))}if(E==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const A=sc(e.sheet);A&&(S._cssText=oc(A,Sp()))}if(E==="input"||E==="textarea"||E==="select"||E==="option"){const A=e,N=bp(A),H=ic(A,Mf(E),N),L=A.checked;if(N!=="submit"&&N!=="button"&&H){const M=Li(A,m,b,g,k,td({type:N,tagName:Mf(E),maskInputOptions:l}));S.value=Qo({isMasked:M,element:A,value:H,maskInputFn:d})}L&&(S.checked=L)}if(E==="option"&&(e.selected&&!l.select?S.selected=!0:delete S.selected),E==="canvas"&&h){if(e.__context==="2d")IT(e)||(S.rr_dataURL=e.toDataURL(f.type,f.quality));else if(!("__context"in e)){const A=e.toDataURL(f.type,f.quality),N=document.createElement("canvas");N.width=e.width,N.height=e.height;const H=N.toDataURL(f.type,f.quality);A!==H&&(S.rr_dataURL=A)}}if(E==="img"&&u){Os||(Os=n.createElement("canvas"),k0=Os.getContext("2d"));const A=e,N=A.crossOrigin;A.crossOrigin="anonymous";const H=()=>{A.removeEventListener("load",H);try{Os.width=A.naturalWidth,Os.height=A.naturalHeight,k0.drawImage(A,0,0),S.rr_dataURL=Os.toDataURL(f.type,f.quality)}catch(L){console.warn(`Cannot inline img src=${A.currentSrc}! Error: ${L}`)}N?S.crossOrigin=N:A.removeAttribute("crossorigin")};A.complete&&A.naturalWidth!==0?H():A.addEventListener("load",H)}if((E==="audio"||E==="video")&&(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),y||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop)),T){const{width:A,height:N}=e.getBoundingClientRect();S={class:S.class,rr_width:`${A}px`,rr_height:`${N}px`}}E==="iframe"&&!p(S.src)&&(e.contentDocument||(S.rr_src=S.src),delete S.src);let q;try{customElements.get(E)&&(q=!0)}catch{}return{type:ft.Element,tagName:E,attributes:S,childNodes:[],isSVG:zT(e)||void 0,needBlock:T,rootId:w,isCustom:q}}function Fe(e){return e==null?"":e.toLowerCase()}function QT(e,t){if(t.comment&&e.type===ft.Comment)return!0;if(e.type===ft.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Fe(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Fe(e.attributes.name)==="application-name"||Fe(e.attributes.rel)==="icon"||Fe(e.attributes.rel)==="apple-touch-icon"||Fe(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Fe(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Fe(e.attributes.property).match(/^(og|twitter|fb):/)||Fe(e.attributes.name).match(/^(og|twitter):/)||Fe(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Fe(e.attributes.name)==="robots"||Fe(e.attributes.name)==="googlebot"||Fe(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Fe(e.attributes.name)==="author"||Fe(e.attributes.name)==="generator"||Fe(e.attributes.name)==="framework"||Fe(e.attributes.name)==="publisher"||Fe(e.attributes.name)==="progid"||Fe(e.attributes.property).match(/^article:/)||Fe(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Fe(e.attributes.name)==="google-site-verification"||Fe(e.attributes.name)==="yandex-verification"||Fe(e.attributes.name)==="csrf-token"||Fe(e.attributes.name)==="p:domain_verify"||Fe(e.attributes.name)==="verify-v1"||Fe(e.attributes.name)==="verification"||Fe(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function ni(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:u,skipChild:h=!1,inlineStylesheet:p=!0,maskInputOptions:y={},maskAttributeFn:w,maskTextFn:v,maskInputFn:m,slimDOMOptions:g,dataURLOptions:b={},inlineImages:k=!1,recordCanvas:T=!1,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I=5e3,onStylesheetLoad:q,stylesheetLoadTimeout:A=5e3,keepIframeSrcFn:N=()=>!1,newlyAddedElement:H=!1}=t;let{preserveWhiteSpace:L=!0}=t;const M=GT(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:l,unblockSelector:a,maskTextClass:c,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:u,inlineStylesheet:p,maskInputOptions:y,maskAttributeFn:w,maskTextFn:v,maskInputFn:m,dataURLOptions:b,inlineImages:k,recordCanvas:T,keepIframeSrcFn:N,newlyAddedElement:H});if(!M)return console.warn(e,"not serialized"),null;let U;r.hasNode(e)?U=r.getId(e):QT(M,g)||!L&&M.type===ft.Text&&!M.isStyle&&!M.textContent.replace(/^\s+|\s+$/gm,"").length?U=Jo:U=kp();const K=Object.assign(M,{id:U});if(r.add(e,K),U===Jo)return null;E&&E(e);let re=!h;if(K.type===ft.Element){re=re&&!K.needBlock,delete K.needBlock;const D=e.shadowRoot;D&&Co(D)&&(K.isShadowHost=!0)}if((K.type===ft.Document||K.type===ft.Element)&&re){g.headWhitespace&&K.type===ft.Element&&K.tagName==="head"&&(L=!1);const D={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:l,unblockSelector:a,maskTextClass:c,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:u,skipChild:h,inlineStylesheet:p,maskInputOptions:y,maskAttributeFn:w,maskTextFn:v,maskInputFn:m,slimDOMOptions:g,dataURLOptions:b,inlineImages:k,recordCanvas:T,preserveWhiteSpace:L,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:q,stylesheetLoadTimeout:A,keepIframeSrcFn:N};for(const Y of Array.from(e.childNodes)){const $=ni(Y,D);$&&K.childNodes.push($)}if(ST(e)&&e.shadowRoot)for(const Y of Array.from(e.shadowRoot.childNodes)){const $=ni(Y,D);$&&(Co(e.shadowRoot)&&($.isShadow=!0),K.childNodes.push($))}}return e.parentNode&&jo(e.parentNode)&&Co(e.parentNode)&&(K.isShadow=!0),K.type===ft.Element&&K.tagName==="iframe"&&VT(e,()=>{const D=e.contentDocument;if(D&&S){const Y=ni(D,{doc:D,mirror:r,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:p,maskInputOptions:y,maskAttributeFn:w,maskTextFn:v,maskInputFn:m,slimDOMOptions:g,dataURLOptions:b,inlineImages:k,recordCanvas:T,preserveWhiteSpace:L,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:q,stylesheetLoadTimeout:A,keepIframeSrcFn:N});Y&&S(e,Y)}},I),K.type===ft.Element&&K.tagName==="link"&&K.attributes.rel==="stylesheet"&&qT(e,()=>{if(q){const D=ni(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:p,maskInputOptions:y,maskAttributeFn:w,maskTextFn:v,maskInputFn:m,slimDOMOptions:g,dataURLOptions:b,inlineImages:k,recordCanvas:T,preserveWhiteSpace:L,onSerialize:E,onIframeLoad:S,iframeLoadTimeout:I,onStylesheetLoad:q,stylesheetLoadTimeout:A,keepIframeSrcFn:N});D&&q(e,D)}},A),K}function JT(e,t){const{mirror:n=new nb,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:a=!1,maskTextClass:l="rr-mask",unmaskTextClass:c=null,maskTextSelector:d=null,unmaskTextSelector:f=null,inlineStylesheet:u=!0,inlineImages:h=!1,recordCanvas:p=!1,maskAllInputs:y=!1,maskAttributeFn:w,maskTextFn:v,maskInputFn:m,slimDOM:g=!1,dataURLOptions:b,preserveWhiteSpace:k,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:S,onStylesheetLoad:I,stylesheetLoadTimeout:q,keepIframeSrcFn:A=()=>!1}=t||{};return ni(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:u,maskInputOptions:y===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:y===!1?{}:y,maskAttributeFn:w,maskTextFn:v,maskInputFn:m,slimDOMOptions:g===!0||g==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:g==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:g===!1?{}:g,dataURLOptions:b,inlineImages:h,recordCanvas:p,preserveWhiteSpace:k,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:S,onStylesheetLoad:I,stylesheetLoadTimeout:q,keepIframeSrcFn:A,newlyAddedElement:!1})}function kr(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...a)=>n.call(t,...a)),t=void 0)}return n}function Mt(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Bs=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let S0={map:{},getId(){return console.error(Bs),-1},getNode(){return console.error(Bs),null},removeNodeFromMap(){console.error(Bs)},has(){return console.error(Bs),!1},reset(){console.error(Bs)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(S0=new Proxy(S0,{get(e,t,n){return t==="map"&&console.error(Bs),Reflect.get(e,t,n)}}));function Zo(e,t,n={}){let r=null,s=0;return function(...i){const a=Date.now();!s&&n.leading===!1&&(s=a);const l=t-(a-s),c=this;l<=0||l>t?(r&&(i5(r),r=null),s=a,e.apply(c,i)):!r&&n.trailing!==!1&&(r=nd(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},l))}}function ib(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(a){nd(()=>{n.set.call(this,a)},0),i&&i.set&&i.set.call(this,a)}}),()=>ib(e,t,i||{},!0)}function _p(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let ac=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(ac=()=>new Date().getTime());function ob(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:kr([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||kr([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||kr([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:kr([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||kr([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||kr([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function ab(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function lb(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function cb(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function Ln(e,t,n,r,s){if(!e)return!1;const i=cb(e);if(!i)return!1;const a=ti(t,n);if(!s){const d=r&&i.matches(r);return a(i)&&!d}const l=ls(i,a);let c=-1;return l<0?!1:(r&&(c=ls(i,ti(null,r))),l>-1&&c<0?!0:l<c)}function ZT(e,t){return t.getId(e)!==-1}function cu(e,t){return t.getId(e)===Jo}function db(e,t){if(jo(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?db(e.parentNode,t):!0:!0}function Df(e){return!!e.changedTouches}function e5(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function ub(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function fb(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Of(e){return!!kr([e,"optionalAccess",t=>t.shadowRoot])}class t5{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return tN(this.styleIDMap.get(t),()=>-1)}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function hb(e){let t=null;return kr([e,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function n5(e){let t=e,n;for(;n=hb(t);)t=n;return t}function r5(e){const t=e.ownerDocument;if(!t)return!1;const n=n5(e);return t.contains(n)}function pb(e){const t=e.ownerDocument;return t?t.contains(e)||r5(e):!1}const _0={};function Ep(e){const t=_0[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return _0[e]=r.bind(window)}function s5(...e){return Ep("requestAnimationFrame")(...e)}function nd(...e){return Ep("setTimeout")(...e)}function i5(...e){return Ep("clearTimeout")(...e)}var xe=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(xe||{}),we=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(we||{}),Lt=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Lt||{}),Zn=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Zn||{});function o5(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...a)=>n.call(t,...a)),t=void 0)}return n}function E0(e){return"__ln"in e}class a5{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=o5([n,"optionalAccess",s=>s.next])||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&E0(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&E0(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const N0=(e,t)=>`${e}@${t}`;class l5{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new a5,s=c=>{let d=c,f=Jo;for(;f===Jo;)d=d&&d.nextSibling,f=d&&this.mirror.getId(d);return f},i=c=>{if(!c.parentNode||!pb(c))return;const d=jo(c.parentNode)?this.mirror.getId(hb(c)):this.mirror.getId(c.parentNode),f=s(c);if(d===-1||f===-1)return r.addNode(c);const u=ni(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:h=>{ub(h,this.mirror)&&this.iframeManager.addIframe(h),fb(h,this.mirror)&&this.stylesheetManager.trackLinkElement(h),Of(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(h,p)=>{this.iframeManager.attachIframe(h,p),this.shadowDomManager.observeAttachShadow(h)},onStylesheetLoad:(h,p)=>{this.stylesheetManager.attachLinkElement(h,p)}});u&&(t.push({parentId:d,nextId:f,node:u}),n.add(u.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)j0(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!C0(this.droppedSet,c)&&!j0(this.removes,c,this.mirror)||C0(this.movedSet,c)?i(c):this.droppedSet.add(c);let a=null;for(;r.length;){let c=null;if(a){const d=this.mirror.getId(a.value.parentNode),f=s(a.value);d!==-1&&f!==-1&&(c=a)}if(!c){let d=r.tail;for(;d;){const f=d;if(d=d.previous,f){const u=this.mirror.getId(f.value.parentNode);if(s(f.value)===-1)continue;if(u!==-1){c=f;break}else{const p=f.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const y=p.parentNode.host;if(this.mirror.getId(y)!==-1){c=f;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}a=c.previous,r.removeNode(c.value),i(c.value)}const l={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:d}=c;if(typeof d.style=="string"){const f=JSON.stringify(c.styleDiff),u=JSON.stringify(c._unchangedStyles);f.length<d.style.length&&(f+u).split("var(").length===d.style.split("var(").length&&(d.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:d}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l))},this.processMutation=t=>{if(!cu(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!Ln(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Li(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,cb(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const a=bp(n),l=n.tagName;s=ic(n,l,a);const c=td({maskInputOptions:this.maskInputOptions,tagName:l,type:a}),d=Li(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=Qo({isMasked:d,element:n,value:s,maskInputFn:this.maskInputFn})}if(Ln(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!n.contentDocument)r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!sb(n.tagName,r)&&(i.attributes[r]=rb(this.doc,Ri(n.tagName),Ri(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const a=this.unattachedDoc.createElement("span");t.oldValue&&a.setAttribute("style",t.oldValue);for(const l of Array.from(n.style)){const c=n.style.getPropertyValue(l),d=n.style.getPropertyPriority(l);c!==a.style.getPropertyValue(l)||d!==a.style.getPropertyPriority(l)?d===""?i.styleDiff[l]=c:i.styleDiff[l]=[c,d]:i._unchangedStyles[l]=[c,d]}for(const l of Array.from(a.style))n.style.getPropertyValue(l)===""&&(i.styleDiff[l]=!1)}break}case"childList":{if(Ln(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=jo(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ln(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||cu(n,this.mirror)||!ZT(n,this.mirror)||(this.addedSet.has(n)?(Ff(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||db(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[N0(r,s)]?Ff(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:jo(t.target)&&Co(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(cu(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[N0(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ln(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),Of(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ff(e,t){e.delete(t),t.childNodes.forEach(n=>Ff(e,n))}function j0(e,t,n){return e.length===0?!1:mb(e,t,n)}function mb(e,t,n){const{parentNode:r}=t;if(!r)return!1;const s=n.getId(r);return e.some(i=>i.id===s)?!0:mb(e,r,n)}function C0(e,t){return e.size===0?!1:gb(e,t)}function gb(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:gb(e,n):!1}let To;function c5(e){To=e}function d5(){To=void 0}const ke=e=>To?(...n)=>{try{return e(...n)}catch(r){if(To&&To(r)===!0)return()=>{};throw r}}:e;function Wn(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...a)=>n.call(t,...a)),t=void 0)}return n}const ri=[];function va(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function yb(e,t){const n=new l5;ri.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=Wn([window,"optionalAccess",a=>a.Zone,"optionalAccess",a=>a.__symbol__,"optionalCall",a=>a("MutationObserver")]);s&&window[s]&&(r=window[s]);const i=new r(ke(a=>{e.onMutation&&e.onMutation(a)===!1||n.processMutations.bind(n)(a)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function u5({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let a=[],l;const c=Zo(ke(u=>{const h=Date.now()-l;e(a.map(p=>(p.timeOffset-=h,p)),u),a=[],l=null}),i),d=ke(Zo(ke(u=>{const h=va(u),{clientX:p,clientY:y}=Df(u)?u.changedTouches[0]:u;l||(l=ac()),a.push({x:p,y,id:r.getId(h),timeOffset:ac()-l}),c(typeof DragEvent<"u"&&u instanceof DragEvent?we.Drag:u instanceof MouseEvent?we.MouseMove:we.TouchMove)}),s,{trailing:!1})),f=[Mt("mousemove",d,n),Mt("touchmove",d,n),Mt("drag",d,n)];return ke(()=>{f.forEach(u=>u())})}function f5({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:a}){if(a.mouseInteraction===!1)return()=>{};const l=a.mouseInteraction===!0||a.mouseInteraction===void 0?{}:a.mouseInteraction,c=[];let d=null;const f=u=>h=>{const p=va(h);if(Ln(p,r,s,i,!0))return;let y=null,w=u;if("pointerType"in h){switch(h.pointerType){case"mouse":y=Zn.Mouse;break;case"touch":y=Zn.Touch;break;case"pen":y=Zn.Pen;break}y===Zn.Touch?Lt[u]===Lt.MouseDown?w="TouchStart":Lt[u]===Lt.MouseUp&&(w="TouchEnd"):Zn.Pen}else Df(h)&&(y=Zn.Touch);y!==null?(d=y,(w.startsWith("Touch")&&y===Zn.Touch||w.startsWith("Mouse")&&y===Zn.Mouse)&&(y=null)):Lt[u]===Lt.Click&&(y=d,d=null);const v=Df(h)?h.changedTouches[0]:h;if(!v)return;const m=n.getId(p),{clientX:g,clientY:b}=v;ke(e)({type:Lt[w],id:m,x:g,y:b,...y!==null&&{pointerType:y}})};return Object.keys(Lt).filter(u=>Number.isNaN(Number(u))&&!u.endsWith("_Departed")&&l[u]!==!1).forEach(u=>{let h=Ri(u);const p=f(u);if(window.PointerEvent)switch(Lt[u]){case Lt.MouseDown:case Lt.MouseUp:h=h.replace("mouse","pointer");break;case Lt.TouchStart:case Lt.TouchEnd:return}c.push(Mt(h,p,t))}),ke(()=>{c.forEach(u=>u())})}function xb({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:a}){const l=ke(Zo(ke(c=>{const d=va(c);if(!d||Ln(d,r,s,i,!0))return;const f=n.getId(d);if(d===t&&t.defaultView){const u=ob(t.defaultView);e({id:f,x:u.left,y:u.top})}else e({id:f,x:d.scrollLeft,y:d.scrollTop})}),a.scroll||100));return Mt("scroll",l,t)}function h5({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=ke(Zo(ke(()=>{const i=ab(),a=lb();(n!==i||r!==a)&&(e({width:Number(a),height:Number(i)}),n=i,r=a)}),200));return Mt("resize",s,t)}const p5=["INPUT","TEXTAREA","SELECT"],T0=new WeakMap;function m5({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:a,ignoreSelector:l,maskInputOptions:c,maskInputFn:d,sampling:f,userTriggeredOnInput:u,maskTextClass:h,unmaskTextClass:p,maskTextSelector:y,unmaskTextSelector:w}){function v(S){let I=va(S);const q=S.isTrusted,A=I&&Mf(I.tagName);if(A==="OPTION"&&(I=I.parentElement),!I||!A||p5.indexOf(A)<0||Ln(I,r,s,i,!0))return;const N=I;if(N.classList.contains(a)||l&&N.matches(l))return;const H=bp(I);let L=ic(N,A,H),M=!1;const U=td({maskInputOptions:c,tagName:A,type:H}),K=Li(I,h,y,p,w,U);(H==="radio"||H==="checkbox")&&(M=I.checked),L=Qo({isMasked:K,element:I,value:L,maskInputFn:d}),m(I,u?{text:L,isChecked:M,userTriggered:q}:{text:L,isChecked:M});const re=I.name;H==="radio"&&re&&M&&t.querySelectorAll(`input[type="radio"][name="${re}"]`).forEach(D=>{if(D!==I){const Y=Qo({isMasked:K,element:D,value:ic(D,A,H),maskInputFn:d});m(D,u?{text:Y,isChecked:!M,userTriggered:!1}:{text:Y,isChecked:!M})}})}function m(S,I){const q=T0.get(S);if(!q||q.text!==I.text||q.isChecked!==I.isChecked){T0.set(S,I);const A=n.getId(S);ke(e)({...I,id:A})}}const b=(f.input==="last"?["change"]:["input","change"]).map(S=>Mt(S,ke(v),t)),k=t.defaultView;if(!k)return()=>{b.forEach(S=>S())};const T=k.Object.getOwnPropertyDescriptor(k.HTMLInputElement.prototype,"value"),E=[[k.HTMLInputElement.prototype,"value"],[k.HTMLInputElement.prototype,"checked"],[k.HTMLSelectElement.prototype,"value"],[k.HTMLTextAreaElement.prototype,"value"],[k.HTMLSelectElement.prototype,"selectedIndex"],[k.HTMLOptionElement.prototype,"selected"]];return T&&T.set&&b.push(...E.map(S=>ib(S[0],S[1],{set(){ke(v)({target:this,isTrusted:!1})}},!1,k))),ke(()=>{b.forEach(S=>S())})}function lc(e){const t=[];function n(r,s){if(il("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||il("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||il("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||il("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const a=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(a)}else if(r.parentStyleSheet){const a=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(a)}return s}return n(e,t)}function Sr(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function g5({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:ke((f,u,h)=>{const[p,y]=h,{id:w,styleId:v}=Sr(u,t,n.styleMirror);return(w&&w!==-1||v&&v!==-1)&&e({id:w,styleId:v,adds:[{rule:p,index:y}]}),f.apply(u,h)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:ke((f,u,h)=>{const[p]=h,{id:y,styleId:w}=Sr(u,t,n.styleMirror);return(y&&y!==-1||w&&w!==-1)&&e({id:y,styleId:w,removes:[{index:p}]}),f.apply(u,h)})});let a;r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:ke((f,u,h)=>{const[p]=h,{id:y,styleId:w}=Sr(u,t,n.styleMirror);return(y&&y!==-1||w&&w!==-1)&&e({id:y,styleId:w,replace:p}),f.apply(u,h)})}));let l;r.CSSStyleSheet.prototype.replaceSync&&(l=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:ke((f,u,h)=>{const[p]=h,{id:y,styleId:w}=Sr(u,t,n.styleMirror);return(y&&y!==-1||w&&w!==-1)&&e({id:y,styleId:w,replaceSync:p}),f.apply(u,h)})}));const c={};ol("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(ol("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),ol("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),ol("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const d={};return Object.entries(c).forEach(([f,u])=>{d[f]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=new Proxy(d[f].insertRule,{apply:ke((h,p,y)=>{const[w,v]=y,{id:m,styleId:g}=Sr(p.parentStyleSheet,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,adds:[{rule:w,index:[...lc(p),v||0]}]}),h.apply(p,y)})}),u.prototype.deleteRule=new Proxy(d[f].deleteRule,{apply:ke((h,p,y)=>{const[w]=y,{id:v,styleId:m}=Sr(p.parentStyleSheet,t,n.styleMirror);return(v&&v!==-1||m&&m!==-1)&&e({id:v,styleId:m,removes:[{index:[...lc(p),w]}]}),h.apply(p,y)})})}),ke(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,a&&(r.CSSStyleSheet.prototype.replace=a),l&&(r.CSSStyleSheet.prototype.replaceSync=l),Object.entries(c).forEach(([f,u])=>{u.prototype.insertRule=d[f].insertRule,u.prototype.deleteRule=d[f].deleteRule})})}function wb({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?Wn([n,"access",a=>a.defaultView,"optionalAccess",a=>a.Document]):Wn([n,"access",a=>a.ownerDocument,"optionalAccess",a=>a.defaultView,"optionalAccess",a=>a.ShadowRoot]),i=Wn([s,"optionalAccess",a=>a.prototype])?Object.getOwnPropertyDescriptor(Wn([s,"optionalAccess",a=>a.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Wn([i,"access",a=>a.get,"optionalAccess",a=>a.call,"call",a=>a(this)])},set(a){const l=Wn([i,"access",c=>c.set,"optionalAccess",c=>c.call,"call",c=>c(this,a)]);if(r!==null&&r!==-1)try{t.adoptStyleSheets(a,r)}catch{}return l}}),ke(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function y5({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:ke((l,c,d)=>{const[f,u,h]=d;if(n.has(f))return i.apply(c,[f,u,h]);const{id:p,styleId:y}=Sr(Wn([c,"access",w=>w.parentRule,"optionalAccess",w=>w.parentStyleSheet]),t,r.styleMirror);return(p&&p!==-1||y&&y!==-1)&&e({id:p,styleId:y,set:{property:f,value:u,priority:h},index:lc(c.parentRule)}),l.apply(c,d)})});const a=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:ke((l,c,d)=>{const[f]=d;if(n.has(f))return a.apply(c,[f]);const{id:u,styleId:h}=Sr(Wn([c,"access",p=>p.parentRule,"optionalAccess",p=>p.parentStyleSheet]),t,r.styleMirror);return(u&&u!==-1||h&&h!==-1)&&e({id:u,styleId:h,remove:{property:f},index:lc(c.parentRule)}),l.apply(c,d)})}),ke(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=a})}function x5({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:a}){const l=ke(d=>Zo(ke(f=>{const u=va(f);if(!u||Ln(u,t,n,r,!0))return;const{currentTime:h,volume:p,muted:y,playbackRate:w}=u;e({type:d,id:s.getId(u),currentTime:h,volume:p,muted:y,playbackRate:w})}),i.media||500)),c=[Mt("play",l(0),a),Mt("pause",l(1),a),Mt("seeked",l(2),a),Mt("volumechange",l(3),a),Mt("ratechange",l(4),a)];return ke(()=>{c.forEach(d=>d())})}function w5({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,d,f){const u=new i(c,d,f);return s.set(u,{family:c,buffer:typeof d!="string",descriptors:f,fontSource:typeof d=="string"?d:JSON.stringify(Array.from(new Uint8Array(d)))}),u};const a=_p(t.fonts,"add",function(l){return function(c){return nd(ke(()=>{const d=s.get(c);d&&(e(d),s.delete(c))}),0),l.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(a),ke(()=>{r.forEach(l=>l())})}function v5(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:a}=e;let l=!0;const c=ke(()=>{const d=t.getSelection();if(!d||l&&Wn([d,"optionalAccess",h=>h.isCollapsed]))return;l=d.isCollapsed||!1;const f=[],u=d.rangeCount||0;for(let h=0;h<u;h++){const p=d.getRangeAt(h),{startContainer:y,startOffset:w,endContainer:v,endOffset:m}=p;Ln(y,r,s,i,!0)||Ln(v,r,s,i,!0)||f.push({start:n.getId(y),startOffset:w,end:n.getId(v),endOffset:m})}a({ranges:f})});return c(),Mt("selectionchange",c)}function b5({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:_p(n.customElements,"define",function(s){return function(i,a,l){try{t({define:{name:i}})}catch{}return s.apply(this,[i,a,l])}})}function k5(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=yb(e,e.doc),s=u5(e),i=f5(e),a=xb(e),l=h5(e,{win:n}),c=m5(e),d=x5(e),f=g5(e,{win:n}),u=wb(e,e.doc),h=y5(e,{win:n}),p=e.collectFonts?w5(e):()=>{},y=v5(e),w=b5(e),v=[];for(const m of e.plugins)v.push(m.observer(m.callback,n,m.options));return ke(()=>{ri.forEach(m=>m.reset()),r.disconnect(),s(),i(),a(),l(),c(),d(),f(),u(),h(),p(),y(),w(),v.forEach(m=>m())})}function il(e){return typeof window[e]<"u"}function ol(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Bf{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const i=r||this.getIdToRemoteIdMap(t),a=s||this.getRemoteIdToIdMap(t);let l=i.get(n);return l||(l=this.generateIdFn(),i.set(n,l),a.set(l,n)),l}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}function I0(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...a)=>n.call(t,...a)),t=void 0)}return n}class S5{constructor(){this.crossOriginIframeMirror=new Bf(kp),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class _5{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Bf(kp),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Bf(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),I0([this,"access",r=>r.loadListener,"optionalCall",r=>r(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case xe.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:xe.IncrementalSnapshot,data:{source:we.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case xe.Meta:case xe.Load:case xe.DomContentLoaded:return!1;case xe.Plugin:return n;case xe.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case xe.IncrementalSnapshot:switch(n.data.source){case we.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case we.Drag:case we.TouchMove:case we.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case we.ViewportResize:return!1;case we.MediaInteraction:case we.MouseInteraction:case we.Scroll:case we.CanvasMutation:case we.Input:return this.replaceIds(n.data,t,["id"]),n;case we.StyleSheetRule:case we.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case we.Font:return n;case we.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case we.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),I0([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(s=>{this.replaceStyleIds(s,t,["styleId"])})]),n}}return!1}replace(t,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==ft.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class E5{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class N5{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!Co(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const r=yb({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(xb({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),nd(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(wb({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(_p(t.prototype,"attachShadow",function(s){return function(i){const a=s.call(this,i);return this.shadowRoot&&pb(this)&&r.addShadowRoot(this.shadowRoot,n),a}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class R0{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class j5{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new t5,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of t){let a;this.styleMirror.has(i)?a=this.styleMirror.getId(i):(a=this.styleMirror.add(i),s.push({styleId:a,rules:Array.from(i.rules||CSSRule,(l,c)=>({rule:tb(l),index:c}))})),r.styleIds.push(a)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class C5{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){s5(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Qe,cc;const Cn=TT();function Hr(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:a=null,ignoreClass:l="rr-ignore",ignoreSelector:c=null,maskAllText:d=!1,maskTextClass:f="rr-mask",unmaskTextClass:u=null,maskTextSelector:h=null,unmaskTextSelector:p=null,inlineStylesheet:y=!0,maskAllInputs:w,maskInputOptions:v,slimDOMOptions:m,maskAttributeFn:g,maskInputFn:b,maskTextFn:k,maxCanvasSize:T=null,packFn:E,sampling:S={},dataURLOptions:I={},mousemoveWait:q,recordCanvas:A=!1,recordCrossOriginIframes:N=!1,recordAfter:H=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:L=!1,collectFonts:M=!1,inlineImages:U=!1,plugins:K,keepIframeSrcFn:re=()=>!1,ignoreCSSAttributes:D=new Set([]),errorHandler:Y,onMutation:$,getCanvasManager:Q}=e;c5(Y);const fe=N?window.parent===window:!0;let B=!1;if(!fe)try{window.parent.document&&(B=!1)}catch{B=!0}if(fe&&!t)throw new Error("emit function is required");q!==void 0&&S.mousemove===void 0&&(S.mousemove=q),Cn.reset();const C=w===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:v!==void 0?v:{},R=m===!0||m==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:m==="all",headMetaDescKeywords:m==="all"}:m||{};e5();let J,F=0;const Z=ie=>{for(const ae of K||[])ae.eventProcessor&&(ie=ae.eventProcessor(ie));return E&&!B&&(ie=E(ie)),ie};Qe=(ie,ae)=>{const se=ie;if(se.timestamp=ac(),nu([ri,"access",G=>G[0],"optionalAccess",G=>G.isFrozen,"call",G=>G()])&&se.type!==xe.FullSnapshot&&!(se.type===xe.IncrementalSnapshot&&se.data.source===we.Mutation)&&ri.forEach(G=>G.unfreeze()),fe)nu([t,"optionalCall",G=>G(Z(se),ae)]);else if(B){const G={type:"rrweb",event:Z(se),origin:window.location.origin,isCheckout:ae};window.parent.postMessage(G,"*")}if(se.type===xe.FullSnapshot)J=se,F=0;else if(se.type===xe.IncrementalSnapshot){if(se.data.source===we.Mutation&&se.data.isAttachIframe)return;F++;const G=r&&F>=r,de=n&&J&&se.timestamp-J.timestamp>n;(G||de)&&te(!0)}};const P=ie=>{Qe({type:xe.IncrementalSnapshot,data:{source:we.Mutation,...ie}})},ee=ie=>Qe({type:xe.IncrementalSnapshot,data:{source:we.Scroll,...ie}}),X=ie=>Qe({type:xe.IncrementalSnapshot,data:{source:we.CanvasMutation,...ie}}),le=ie=>Qe({type:xe.IncrementalSnapshot,data:{source:we.AdoptedStyleSheet,...ie}}),j=new j5({mutationCb:P,adoptedStyleSheetCb:le}),z=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new S5:new _5({mirror:Cn,mutationCb:P,stylesheetManager:j,recordCrossOriginIframes:N,wrappedEmit:Qe});for(const ie of K||[])ie.getMirror&&ie.getMirror({nodeMirror:Cn,crossOriginIframeMirror:z.crossOriginIframeMirror,crossOriginIframeStyleMirror:z.crossOriginIframeStyleMirror});const _=new C5,O=I5(Q,{mirror:Cn,win:window,mutationCb:ie=>Qe({type:xe.IncrementalSnapshot,data:{source:we.CanvasMutation,...ie}}),recordCanvas:A,blockClass:s,blockSelector:i,unblockSelector:a,maxCanvasSize:T,sampling:S.canvas,dataURLOptions:I,errorHandler:Y}),ce=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new E5:new N5({mutationCb:P,scrollCb:ee,bypassOptions:{onMutation:$,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:d,maskTextClass:f,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:y,maskInputOptions:C,dataURLOptions:I,maskAttributeFn:g,maskTextFn:k,maskInputFn:b,recordCanvas:A,inlineImages:U,sampling:S,slimDOMOptions:R,iframeManager:z,stylesheetManager:j,canvasManager:O,keepIframeSrcFn:re,processedNodeManager:_},mirror:Cn}),te=(ie=!1)=>{Qe({type:xe.Meta,data:{href:window.location.href,width:lb(),height:ab()}},ie),j.reset(),ce.init(),ri.forEach(se=>se.lock());const ae=JT(document,{mirror:Cn,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:d,maskTextClass:f,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:y,maskAllInputs:C,maskAttributeFn:g,maskInputFn:b,maskTextFn:k,slimDOM:R,dataURLOptions:I,recordCanvas:A,inlineImages:U,onSerialize:se=>{ub(se,Cn)&&z.addIframe(se),fb(se,Cn)&&j.trackLinkElement(se),Of(se)&&ce.addShadowRoot(se.shadowRoot,document)},onIframeLoad:(se,G)=>{z.attachIframe(se,G),ce.observeAttachShadow(se)},onStylesheetLoad:(se,G)=>{j.attachLinkElement(se,G)},keepIframeSrcFn:re});if(!ae)return console.warn("Failed to snapshot the document");Qe({type:xe.FullSnapshot,data:{node:ae,initialOffset:ob(window)}}),ri.forEach(se=>se.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&j.adoptStyleSheets(document.adoptedStyleSheets,Cn.getId(document))};cc=te;try{const ie=[],ae=G=>ke(k5)({onMutation:$,mutationCb:P,mousemoveCb:(de,me)=>Qe({type:xe.IncrementalSnapshot,data:{source:me,positions:de}}),mouseInteractionCb:de=>Qe({type:xe.IncrementalSnapshot,data:{source:we.MouseInteraction,...de}}),scrollCb:ee,viewportResizeCb:de=>Qe({type:xe.IncrementalSnapshot,data:{source:we.ViewportResize,...de}}),inputCb:de=>Qe({type:xe.IncrementalSnapshot,data:{source:we.Input,...de}}),mediaInteractionCb:de=>Qe({type:xe.IncrementalSnapshot,data:{source:we.MediaInteraction,...de}}),styleSheetRuleCb:de=>Qe({type:xe.IncrementalSnapshot,data:{source:we.StyleSheetRule,...de}}),styleDeclarationCb:de=>Qe({type:xe.IncrementalSnapshot,data:{source:we.StyleDeclaration,...de}}),canvasMutationCb:X,fontCb:de=>Qe({type:xe.IncrementalSnapshot,data:{source:we.Font,...de}}),selectionCb:de=>{Qe({type:xe.IncrementalSnapshot,data:{source:we.Selection,...de}})},customElementCb:de=>{Qe({type:xe.IncrementalSnapshot,data:{source:we.CustomElement,...de}})},blockClass:s,ignoreClass:l,ignoreSelector:c,maskAllText:d,maskTextClass:f,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:p,maskInputOptions:C,inlineStylesheet:y,sampling:S,recordCanvas:A,inlineImages:U,userTriggeredOnInput:L,collectFonts:M,doc:G,maskAttributeFn:g,maskInputFn:b,maskTextFn:k,keepIframeSrcFn:re,blockSelector:i,unblockSelector:a,slimDOMOptions:R,dataURLOptions:I,mirror:Cn,iframeManager:z,stylesheetManager:j,shadowDomManager:ce,processedNodeManager:_,canvasManager:O,ignoreCSSAttributes:D,plugins:nu([K,"optionalAccess",de=>de.filter,"call",de=>de(me=>me.observer),"optionalAccess",de=>de.map,"call",de=>de(me=>({observer:me.observer,options:me.options,callback:_e=>Qe({type:xe.Plugin,data:{plugin:me.name,payload:_e}})}))])||[]},{});z.addLoadListener(G=>{try{ie.push(ae(G.contentDocument))}catch(de){console.warn(de)}});const se=()=>{te(),ie.push(ae(document))};return document.readyState==="interactive"||document.readyState==="complete"?se():(ie.push(Mt("DOMContentLoaded",()=>{Qe({type:xe.DomContentLoaded,data:{}}),H==="DOMContentLoaded"&&se()})),ie.push(Mt("load",()=>{Qe({type:xe.Load,data:{}}),H==="load"&&se()},window))),()=>{ie.forEach(G=>G()),_.destroy(),cc=void 0,d5()}}catch(ie){console.warn(ie)}}function T5(e){if(!cc)throw new Error("please take full snapshot after start recording");cc(e)}Hr.mirror=Cn;Hr.takeFullSnapshot=T5;function I5(e,t){try{return e?e(t):new R0}catch{return console.warn("Unable to initialize CanvasManager"),new R0}}const R5=3,L5=5;function Np(e){return e>9999999999?e:e*1e3}function du(e){return e>9999999999?e/1e3:e}function ba(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:xe.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Hn(t,10,1e3)}}),t.category==="console")))}const A5="button,a";function vb(e){return e.closest(A5)||e}function bb(e){const t=kb(e);return!t||!(t instanceof Element)?t:vb(t)}function kb(e){return P5(e)?e.target:e}function P5(e){return typeof e=="object"&&!!e&&"target"in e}let _r;function M5(e){return _r||(_r=[],D5()),_r.push(e),()=>{const t=_r?_r.indexOf(e):-1;t>-1&&_r.splice(t,1)}}function D5(){xt(Be,"open",function(e){return function(...t){if(_r)try{_r.forEach(n=>n())}catch{}return e.apply(Be,t)}})}function O5(e,t,n){e.handleClick(t,n)}class F5{constructor(t,n,r=ba){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=M5(()=>{this._lastMutation=L0()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if($5(n,this._ignoreSelector)||!U5(t))return;const r={timestamp:du(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=du(t)}registerScroll(t=Date.now()){this._lastScroll=du(t)}registerClick(t){const n=vb(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=L0();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:a,clickBreadcrumb:l}=t;if(i){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,d=c<this._timeout*1e3?"mutation":"timeout",f={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.slowClickDetected",data:{...l.data,url:Be.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:d,clickCount:a||1}};this._addBreadcrumbEvent(n,f);return}if(a>1){const c={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.multiClick",data:{...l.data,url:Be.location.href,route:n.getCurrentRoute(),clickCount:a,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const B5=["A","BUTTON","INPUT"];function $5(e,t){return!!(!B5.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function U5(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function L0(){return Date.now()/1e3}function z5(e,t){try{if(!H5(t))return;const{source:n}=t.data;if(n===we.Mutation&&e.registerMutation(t.timestamp),n===we.Scroll&&e.registerScroll(t.timestamp),W5(t)){const{type:r,id:s}=t.data,i=Hr.mirror.getNode(s);i instanceof HTMLElement&&r===Lt.Click&&e.registerClick(i)}}catch{}}function H5(e){return e.type===R5}function W5(e){return e.data.source===we.MouseInteraction}function Gn(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var dc;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(dc||(dc={}));const V5=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function q5(e){const t={};for(const n in e)if(V5.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const G5=e=>t=>{if(!e.isEnabled())return;const n=Y5(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&O5(e.clickDetector,n,bb(t.event)),ba(e,n)};function Sb(e,t){const n=Hr.mirror.getId(e),r=n&&Hr.mirror.getNode(n),s=r&&Hr.mirror.getMeta(r),i=s&&K5(s)?s:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(a=>a.type===dc.Text&&a.textContent).filter(Boolean).map(a=>a.trim()).join(""),attributes:q5(i.attributes)}}:{}}}function Y5(e){const{target:t,message:n}=X5(e);return Gn({category:`ui.${e.name}`,...Sb(t,n)})}function X5(e){const t=e.name==="click";let n,r=null;try{r=t?bb(e.event):kb(e.event),n=Yr(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function K5(e){return e.type===dc.Element}function Q5(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=J5(t);n&&ba(e,n)}function J5(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:a}=e;if(!a||Z5(a)||!i)return null;const l=t||r||s,c=i.length===1;if(!l&&c)return null;const d=Yr(a,{maxStringLength:200})||"<unknown>",f=Sb(a,d);return Gn({category:"ui.keyDown",message:d,data:{...f.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function Z5(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const A0={resource:s3,paint:n3,navigation:r3};function e3(e){return e.map(t3).filter(Boolean)}function t3(e){return A0[e.entryType]?A0[e.entryType](e):null}function Ai(e){return((sn||Be.performance.timeOrigin)+e)/1e3}function n3(e){const{duration:t,entryType:n,name:r,startTime:s}=e,i=Ai(s);return{type:n,name:r,start:i,end:i+t,data:void 0}}function r3(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:a,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,domInteractive:d,loadEventStart:f,loadEventEnd:u,redirectCount:h,startTime:p,transferSize:y,type:w}=e;return s===0?null:{type:`${t}.${w}`,start:Ai(p),end:Ai(i),name:n,data:{size:y,decodedBodySize:r,encodedBodySize:a,duration:s,domInteractive:d,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,loadEventStart:f,loadEventEnd:u,domComplete:i,redirectCount:h}}}function s3(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:a,encodedBodySize:l,responseStatus:c,transferSize:d}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Ai(i),end:Ai(s),name:r,data:{size:d,statusCode:c,decodedBodySize:a,encodedBodySize:l}}}function i3(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,s=e.value,i=Ai(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:s,size:s,nodeId:r?Hr.mirror.getId(r):void 0}}}function o3(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(Ci(s,n))}),r.push(Wv(({metric:s})=>{e.replayPerformanceEntries.push(i3(s))})),()=>{r.forEach(s=>s())}}const Me=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,a3='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function l3(){const e=new Blob([a3]);return URL.createObjectURL(e)}function Pt(e,t){Me&&(V.info(e),t&&_b(e))}function fi(e,t){Me&&(V.info(e),t&&setTimeout(()=>{_b(e)},0))}function _b(e){Xr({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class jp extends Error{constructor(){super(`Event buffer exceeded maximum size of ${vp}.`)}}class Eb{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>vp)throw new jp;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Np(t):null}}class c3{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){Pt("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const a=({data:l})=>{const c=l;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",a),!c.success){Me&&V.error("[Replay]",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",a),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class d3{constructor(t){this._worker=new c3(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Np(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>vp?Promise.reject(new jp):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{Me&&V.warn('[Replay] Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class u3{constructor(t){this._fallback=new Eb,this._compression=new d3(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{Pt("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n}=this._fallback,r=[];for(const s of t)r.push(this._compression.addEvent(s));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(s){Me&&V.warn("[Replay] Failed to add events when switching buffers.",s)}}}function f3({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=h3(t);if(n)return n}return Pt("[Replay] Using simple buffer"),new Eb}function h3(e){try{const t=e||p3();if(!t)return;Pt(`[Replay] Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new u3(n)}catch{Pt("[Replay] Failed to create compression worker")}}function p3(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?l3():""}function Cp(){try{return"sessionStorage"in Be&&!!Be.sessionStorage}catch{return!1}}function m3(e){g3(),e.session=void 0}function g3(){if(Cp())try{Be.sessionStorage.removeItem(xp)}catch{}}function Nb(e){return e===void 0?!1:Math.random()<e}function jb(e){const t=Date.now(),n=e.id||tt(),r=e.started||t,s=e.lastActivity||t,i=e.segmentId||0,a=e.sampled,l=e.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:a,previousSessionId:l}}function Tp(e){if(Cp())try{Be.sessionStorage.setItem(xp,JSON.stringify(e))}catch{}}function y3(e,t){return Nb(e)?"session":t?"buffer":!1}function P0({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=y3(e,t),i=jb({sampled:s,previousSessionId:r});return n&&Tp(i),i}function x3(e){if(!Cp())return null;try{const t=Be.sessionStorage.getItem(xp);if(!t)return null;const n=JSON.parse(t);return fi("[Replay] Loading existing session",e),jb(n)}catch{return null}}function $f(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Cb(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return $f(e.started,t,r)||$f(e.lastActivity,n,r)}function Tb(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!Cb(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function uu({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},s){const i=s.stickySession&&x3(e);return i?Tb(i,{sessionIdleExpire:t,maxReplayDuration:n})?(fi("[Replay] Session in sessionStorage is expired, creating new one..."),P0(s,{previousSessionId:i.id})):i:(fi("[Replay] Creating new session",e),P0(s,{previousSessionId:r}))}function w3(e){return e.type===xe.Custom}function Ip(e,t,n){return Rb(e,t)?(Ib(e,t,n),!0):!1}function v3(e,t,n){return Rb(e,t)?Ib(e,t,n):Promise.resolve(null)}async function Ib(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=e.getOptions(),s=b3(t,r.beforeAddRecordingEvent);return s?await e.eventBuffer.addEvent(s):void 0}catch(r){const s=r&&r instanceof jp?"addEventSizeExceeded":"addEvent";Me&&V.error(r),await e.stop({reason:s});const i=Re();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function Rb(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Np(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(Pt(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1):!0}function b3(e,t){try{if(typeof t=="function"&&w3(e))return t(e)}catch(n){return Me&&V.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return e}function Rp(e){return!e.type}function Uf(e){return e.type==="transaction"}function k3(e){return e.type==="replay_event"}function M0(e){return e.type==="feedback"}function Lb(e){const t=E3();return(n,r)=>{if(!e.isEnabled()||!Rp(n)&&!Uf(n))return;const s=r&&r.statusCode;if(!(t&&(!s||s<200||s>=300))){if(Uf(n)){S3(e,n);return}_3(e,n)}}}function S3(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function _3(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||setTimeout(()=>{e.sendBufferedReplayOrFlush()})}function E3(){const e=Re();if(!e)return!1;const t=e.getTransport();return t&&t.send.__sentry__baseTransport__||!1}function N3(e){return t=>{!e.isEnabled()||!Rp(t)||j3(e,t)}}function j3(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Gn({category:"replay.hydrate-error"});ba(e,r)}}function C3(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function T3(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:xe.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function I3(e,t){return e.recordingMode!=="buffer"||t.message===wp||!t.exception||t.type?!1:Nb(e.getOptions().errorSampleRate)}function R3(e,t=!1){const n=t?Lb(e):void 0;return Object.assign((r,s)=>e.isEnabled()?k3(r)?(delete r.breadcrumbs,r):!Rp(r)&&!Uf(r)&&!M0(r)||!e.checkAndHandleExpiredSession()?r:M0(r)?(e.flush(),r.contexts.feedback.replay_id=e.getSessionId(),T3(e,r),r):C3(r,s)&&!e.getOptions()._experiments.captureExceptions?(Me&&V.log("[Replay] Ignoring error from rrweb internals",r),null):((I3(e,r)||e.recordingMode==="session")&&(r.tags={...r.tags,replayId:e.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function rd(e,t){return t.map(({type:n,start:r,end:s,name:i,data:a})=>{const l=e.throttledAddEvent({type:xe.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:a}}});return typeof l=="string"?Promise.resolve(null):l})}function L3(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function A3(e){return t=>{if(!e.isEnabled())return;const n=L3(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(rd(e,[n]),!1)))}}function P3(e,t){return Me&&e.getOptions()._experiments.traceInternals?!1:fj(t,Re())}function sd(e,t){e.isEnabled()&&t!==null&&(P3(e,t.name)||e.addUpdate(()=>(rd(e,[t]),!0)))}function M3(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:s}=e;if(!n)return null;const{method:i,url:a}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:a,data:{method:i,statusCode:s?s.status:void 0}}}function D3(e){return t=>{if(!e.isEnabled())return;const n=M3(t);sd(e,n)}}function O3(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,s=r[Lr];if(!t||!n||!s)return null;const{method:i,url:a,status_code:l}=s;return a===void 0?null:{type:"resource.xhr",name:a,start:t/1e3,end:n/1e3,data:{method:i,statusCode:l}}}function F3(e){return t=>{if(!e.isEnabled())return;const n=O3(t);sd(e,n)}}function id(e,t){if(e)try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Db(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function Ab(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Pb(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Db(e)];if(!e)return[void 0]}catch{return Me&&V.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Me&&V.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function uc(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Mb(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:a,request:l,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:Dt({method:i,statusCode:a,request:l,response:c})}}function ea(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Wr(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:i}=B3(n);return r.body=s,i&&i.length>0&&(r._meta={warnings:i}),r}function zf(e,t){return Object.keys(e).reduce((n,r)=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=e[r]),n},{})}function Db(e){return new URLSearchParams(e).toString()}function B3(e){if(!e||typeof e!="string")return{body:e};const t=e.length>w0,n=$3(e);if(t){const r=e.slice(0,w0);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function $3(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function fc(e,t){const n=U3(e);return Ui(n,t)}function U3(e,t=Be.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Be.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function z3(e,t,n){try{const r=await W3(e,t,n),s=Mb("resource.fetch",r);sd(n.replay,s)}catch(r){Me&&V.error("[Replay] Failed to capture fetch breadcrumb",r)}}function H3(e,t,n){const{input:r,response:s}=t,i=r?Ob(r):void 0,a=id(i,n.textEncoder),l=s?Ab(s.headers.get("content-length")):void 0;a!==void 0&&(e.data.request_body_size=a),l!==void 0&&(e.data.response_body_size=l)}async function W3(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r}=t,{url:a,method:l,status_code:c=0,request_body_size:d,response_body_size:f}=e.data,u=fc(a,n.networkDetailAllowUrls)&&!fc(a,n.networkDetailDenyUrls),h=u?V3(n,t.input,d):ea(d),p=await q3(u,n,t.response,f);return{startTimestamp:s,endTimestamp:i,url:a,method:l,statusCode:c,request:h,response:p}}function V3({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?X3(n,t):{};if(!e)return Wr(s,r,void 0);const i=Ob(n),[a,l]=Pb(i),c=Wr(s,r,a);return l?uc(c,l):c}async function q3(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},s,i){if(!e&&i!==void 0)return ea(i);const a=s?Fb(s.headers,r):{};if(!s||!t&&i!==void 0)return Wr(a,i,void 0);const[l,c]=await Y3(s),d=G3(l,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:a});return c?uc(d,c):d}function G3(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:s,headers:i}){try{const a=e&&e.length&&r===void 0?id(e,n):r;return s?t?Wr(i,a,e):Wr(i,a,void 0):ea(a)}catch(a){return Me&&V.warn("[Replay] Failed to serialize response body",a),Wr(i,r,void 0)}}async function Y3(e){const t=K3(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await Q3(t)]}catch(n){return Me&&V.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}function Ob(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function Fb(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function X3(e,t){return e.length===1&&typeof e[0]!="string"?D0(e[0],t):e.length===2?D0(e[1],t):{}}function D0(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Fb(n,t):Array.isArray(n)?{}:zf(n,t):{}}function K3(e){try{return e.clone()}catch(t){Me&&V.warn("[Replay] Failed to clone response body",t)}}function Q3(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error("Timeout while trying to read response body")),500);J3(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function J3(e){return await e.text()}async function Z3(e,t,n){try{const r=t6(e,t,n),s=Mb("resource.xhr",r);sd(n.replay,s)}catch(r){Me&&V.error("[Replay] Failed to capture xhr breadcrumb",r)}}function e6(e,t,n){const{xhr:r,input:s}=t;if(!r)return;const i=id(s,n.textEncoder),a=r.getResponseHeader("content-length")?Ab(r.getResponseHeader("content-length")):i6(r.response,r.responseType,n.textEncoder);i!==void 0&&(e.data.request_body_size=i),a!==void 0&&(e.data.response_body_size=a)}function t6(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r,input:a,xhr:l}=t,{url:c,method:d,status_code:f=0,request_body_size:u,response_body_size:h}=e.data;if(!c)return null;if(!l||!fc(c,n.networkDetailAllowUrls)||fc(c,n.networkDetailDenyUrls)){const E=ea(u),S=ea(h);return{startTimestamp:s,endTimestamp:i,url:c,method:d,statusCode:f,request:E,response:S}}const p=l[Lr],y=p?zf(p.request_headers,n.networkRequestHeaders):{},w=zf(n6(l),n.networkResponseHeaders),[v,m]=n.networkCaptureBodies?Pb(a):[void 0],[g,b]=n.networkCaptureBodies?r6(l):[void 0],k=Wr(y,u,v),T=Wr(w,h,g);return{startTimestamp:s,endTimestamp:i,url:c,method:d,statusCode:f,request:m?uc(k,m):k,response:b?uc(T,b):T}}function n6(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return n[s.toLowerCase()]=i,n},{}):{}}function r6(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return s6(e.response,e.responseType)}catch(n){t.push(n)}return Me&&V.warn("[Replay] Failed to get xhr response body",...t),[void 0]}function s6(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch{return Me&&V.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Me&&V.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function i6(e,t,n){try{const r=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return id(r,n)}catch{return}}function o6(e){const t=Re();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:a,networkResponseHeaders:l}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:a,networkResponseHeaders:l};t&&t.on?t.on("beforeAddBreadcrumb",(d,f)=>a6(c,d,f)):(np(D3(e)),rp(F3(e)))}catch{}}function a6(e,t,n){if(t.data)try{l6(t)&&d6(n)&&(e6(t,n,e),Z3(t,n,e)),c6(t)&&u6(n)&&(H3(t,n,e),z3(t,n,e))}catch{Me&&V.warn("Error when enriching network breadcrumb")}}function l6(e){return e.category==="xhr"}function c6(e){return e.category==="fetch"}function d6(e){return e&&e.xhr}function u6(e){return e&&e.response}let O0=null;function f6(e){return!!e.category}const h6=e=>t=>{if(!e.isEnabled())return;const n=p6(t);n&&ba(e,n)};function p6(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();return O0===t||!t||(O0=t,!f6(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))?null:t.category==="console"?m6(t):Gn(t)}function m6(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return Gn(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>sl?(n=!0,`${s.slice(0,sl)}`):s;if(typeof s=="object")try{const i=Hn(s,7);return JSON.stringify(i).length>sl?(n=!0,`${JSON.stringify(i,null,2).slice(0,sl)}`):i}catch{}return s});return Gn({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function g6(e){const t=cn(),n=Re();t.addScopeListener(h6(e)),ev(G5(e)),qc(A3(e)),o6(e);const r=R3(e,!F0(n));n&&n.addEventProcessor?n.addEventProcessor(r):ij(r),F0(n)&&(n.on("beforeSendEvent",N3(e)),n.on("afterSendEvent",Lb(e)),n.on("createDsc",s=>{const i=e.getSessionId();i&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(s.replay_id=i)}),n.on("startTransaction",s=>{e.lastTransaction=s}),n.on("finishTransaction",s=>{e.lastTransaction=s}),n.on("beforeSendFeedback",(s,i)=>{const a=e.getSessionId();i&&i.includeReplay&&e.isEnabled()&&a&&s.contexts&&s.contexts.feedback&&(s.contexts.feedback.replay_id=a)}))}function F0(e){return!!(e&&e.on)}async function y6(e){try{return Promise.all(rd(e,[x6(Be.performance.memory)]))}catch{return[]}}function x6(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function w6(e,t,n){let r,s,i;const a=n&&n.maxWait?Math.max(n.maxWait,t):0;function l(){return c(),r=e(),r}function c(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function d(){return s!==void 0||i!==void 0?l():r}function f(){return s&&clearTimeout(s),s=setTimeout(l,t),a&&i===void 0&&(i=setTimeout(l,a)),r}return f.cancel=c,f.flush=d,f}function v6(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){Me&&V.warn("[Replay] Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&z5(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!Ip(e,n,s))return!0;if(!s)return!1;if(k6(e,s),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){const i=e.eventBuffer.getEarliestTimestamp();i&&(Pt(`[Replay] Updating session start time to earliest event in buffer to ${new Date(i)}`,e.getOptions()._experiments.traceInternals),e.session.started=i,e.getOptions().stickySession&&Tp(e.session))}return e.recordingMode==="session"&&e.flush(),!0})}}function b6(e){const t=e.getOptions();return{type:xe.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function k6(e,t){!t||!e.session||e.session.segmentId!==0||Ip(e,b6(e),!1)}function S6(e,t,n,r){return es(lv(e,op(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function _6({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function E6({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:s};e.emit&&e.emit("preprocessEvent",r,i);const a=await pv(e.getOptions(),r,i,t,e,ts());if(!a)return null;a.platform=a.platform||"javascript";const l=e.getSdkMetadata&&e.getSdkMetadata(),{name:c,version:d}=l&&l.sdk||{};return a.sdk={...a.sdk,name:c||"sentry.javascript.unknown",version:d||"0.0.0"},a}async function N6({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:i}){const a=_6({recordingData:e,headers:{segment_id:n}}),{urls:l,errorIds:c,traceIds:d,initialTimestamp:f}=r,u=Re(),h=cn(),p=u&&u.getTransport(),y=u&&u.getDsn();if(!u||!p||!y||!i.sampled)return;const w={type:dT,replay_start_timestamp:f/1e3,timestamp:s/1e3,error_ids:c,trace_ids:d,urls:l,replay_id:t,segment_id:n,replay_type:i.sampled},v=await E6({scope:h,client:u,replayId:t,event:w});if(!v){u.recordDroppedEvent("event_processor","replay",w),Pt("An event processor returned `null`, will not send event.");return}delete v.sdkProcessingMetadata;const m=S6(v,a,y,u.getOptions().tunnel);let g;try{g=await p.send(m)}catch(k){const T=new Error(wp);try{T.cause=k}catch{}throw T}if(!g)return g;if(typeof g.statusCode=="number"&&(g.statusCode<200||g.statusCode>=300))throw new Bb(g.statusCode);const b=dv({},g);if(cv(b,"replay"))throw new $b(b);return g}class Bb extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class $b extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function Ub(e,t={count:0,interval:gT}){const{recordingData:n,options:r}=e;if(n.length)try{return await N6(e),!0}catch(s){if(s instanceof Bb||s instanceof $b)throw s;if(gN("Replays",{_retryCount:t.count}),Me&&r._experiments&&r._experiments.captureExceptions&&Kc(s),t.count>=yT){const i=new Error(`${wp} - max retries exceeded`);try{i.cause=s}catch{}throw i}return t.interval*=++t.count,new Promise((i,a)=>{setTimeout(async()=>{try{await Ub(e,t),i(!0)}catch(l){a(l)}},t.interval)})}}const zb="__THROTTLED",j6="__SKIPPED";function C6(e,t,n){const r=new Map,s=l=>{const c=l-n;r.forEach((d,f)=>{f<c&&r.delete(f)})},i=()=>[...r.values()].reduce((l,c)=>l+c,0);let a=!1;return(...l)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=t){const f=a;return a=!0,f?j6:zb}a=!1;const d=r.get(c)||0;return r.set(c,d+1),e(...l)}}class Er{constructor({options:t,recordingOptions:n}){Er.prototype.__init.call(this),Er.prototype.__init2.call(this),Er.prototype.__init3.call(this),Er.prototype.__init4.call(this),Er.prototype.__init5.call(this),Er.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:uT,sessionIdleExpire:fT},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=w6(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=C6((a,l)=>v3(this,a,l),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(xT,r),timeout:r,scrollTimeout:wT,ignoreSelector:s?s.join(","):""}:void 0;i&&(this.clickDetector=new F5(this,i))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(t),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",fi(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");fi("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const t=uu({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");fi("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=uu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Hr({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:mT},emit:v6(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{Pt(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,m3(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Pt("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),Pt("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();Pt("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&$f(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${Be.location.pathname}${Be.location.hash}${Be.location.search}`,n=`${Be.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===zb){const s=Gn({category:"replay.throttled"});this.addUpdate(()=>!Ip(this,{type:L5,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastTransaction||cn().getTransaction(),r=(t&&it(t).data||{})[cr];if(!(!t||!r||!["route","custom"].includes(r)))return it(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=f3({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){Me&&V.error("[Replay]",t),Me&&this._options._experiments&&this._options._experiments.captureExceptions&&Kc(t)}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=uu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return Tb(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Be.document.addEventListener("visibilitychange",this._handleVisibilityChange),Be.addEventListener("blur",this._handleWindowBlur),Be.addEventListener("focus",this._handleWindowFocus),Be.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(g6(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=o3(this)}_removeListeners(){try{Be.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Be.removeEventListener("blur",this._handleWindowBlur),Be.removeEventListener("focus",this._handleWindowFocus),Be.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{Be.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=Gn({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=Gn({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{Q5(this,t)}}_doChangeToBackgroundTasks(t){!this.session||Cb(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){Pt("[Replay] Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:xe.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){const t=e3(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(rd(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){Me&&V.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await y6(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await Ub({replayId:t,recordingData:i,segmentId:s,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=Re();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){Me&&V.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,a=s>this._options.maxReplayDuration+5e3;if(i||a){Pt(`[Replay] Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),i&&this._debouncedFlush();return}const l=this.eventBuffer;if(l&&this.session.segmentId===0&&!l.hasCheckout&&Pt("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){Me&&V.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Tp(this.session)}__init6(){this._onMutationHandler=t=>{const n=t.length,r=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>s||i){const a=Gn({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(a)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function co(e,t,n,r){const s=typeof r=="string"?r.split(","):[],i=[...e,...s,...t];return typeof n<"u"&&(typeof n=="string"&&i.push(`.${n}`),vs(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),i.join(",")}function T6({mask:e,unmask:t,block:n,unblock:r,ignore:s,blockClass:i,blockSelector:a,maskTextClass:l,maskTextSelector:c,ignoreClass:d}){const f=['base[href="/"]'],u=co(e,[".sentry-mask","[data-sentry-mask]"],l,c),h=co(t,[".sentry-unmask","[data-sentry-unmask]"]),p={maskTextSelector:u,unmaskTextSelector:h,blockSelector:co(n,[".sentry-block","[data-sentry-block]",...f],i,a),unblockSelector:co(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:co(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],d)};return i instanceof RegExp&&(p.blockClass=i),l instanceof RegExp&&(p.maskTextClass=l),p}function I6({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const B0='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',R6=["content-length","content-type","accept"];let $0=!1;const L6=e=>new od(e);class od{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=hT,flushMaxDelay:n=pT,minReplayDuration:r=vT,maxReplayDuration:s=v0,stickySession:i=!0,useCompression:a=!0,workerUrl:l,_experiments:c={},sessionSampleRate:d,errorSampleRate:f,maskAllText:u=!0,maskAllInputs:h=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:y=750,mutationLimit:w=1e4,slowClickTimeout:v=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:b=[],networkCaptureBodies:k=!0,networkRequestHeaders:T=[],networkResponseHeaders:E=[],mask:S=[],maskAttributes:I=["title","placeholder"],unmask:q=[],block:A=[],unblock:N=[],ignore:H=[],maskFn:L,beforeAddRecordingEvent:M,beforeErrorSampling:U,blockClass:K,blockSelector:re,maskInputOptions:D,maskTextClass:Y,maskTextSelector:$,ignoreClass:Q}={}){this.name=od.id;const fe=T6({mask:S,unmask:q,block:A,unblock:N,ignore:H,blockClass:K,blockSelector:re,maskTextClass:Y,maskTextSelector:$,ignoreClass:Q});if(this._recordingOptions={maskAllInputs:h,maskAllText:u,maskInputOptions:{...D||{},password:!0},maskTextFn:L,maskInputFn:L,maskAttributeFn:(B,C,R)=>I6({maskAttributes:I,maskAllText:u,privacyOptions:fe,key:B,value:C,el:R}),...fe,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:B=>{try{B.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,bT),maxReplayDuration:Math.min(s,v0),stickySession:i,sessionSampleRate:d,errorSampleRate:f,useCompression:a,workerUrl:l,blockAllMedia:p,maskAllInputs:h,maskAllText:u,mutationBreadcrumbLimit:y,mutationLimit:w,slowClickTimeout:v,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:b,networkCaptureBodies:k,networkRequestHeaders:U0(T),networkResponseHeaders:U0(E),beforeAddRecordingEvent:M,beforeErrorSampling:U,_experiments:c},typeof d=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${d} })`),this._initialOptions.sessionSampleRate=d),typeof f=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${f} })`),this._initialOptions.errorSampleRate=f),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${B0}`:B0),this._isInitialized&&Bg())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return $0}set _isInitialized(t){$0=t}setupOnce(){Bg()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(t)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const t=A6(this._initialOptions);this._replay=new Er({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const n=Re().getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}od.__initStatic();function A6(e){const t=Re(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Dt(e)};return n?(e.sessionSampleRate==null&&e.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&vs(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(vs(()=>{console.warn("SDK client is not available.")}),r)}function U0(e){return[...R6,...e.map(t=>t.toLowerCase())]}function P6(e){const t={...e};Dv(t,"react"),lT(t)}var Hb={exports:{}},Ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bt=typeof Symbol=="function"&&Symbol.for,Lp=bt?Symbol.for("react.element"):60103,Ap=bt?Symbol.for("react.portal"):60106,ad=bt?Symbol.for("react.fragment"):60107,ld=bt?Symbol.for("react.strict_mode"):60108,cd=bt?Symbol.for("react.profiler"):60114,dd=bt?Symbol.for("react.provider"):60109,ud=bt?Symbol.for("react.context"):60110,Pp=bt?Symbol.for("react.async_mode"):60111,fd=bt?Symbol.for("react.concurrent_mode"):60111,hd=bt?Symbol.for("react.forward_ref"):60112,pd=bt?Symbol.for("react.suspense"):60113,M6=bt?Symbol.for("react.suspense_list"):60120,md=bt?Symbol.for("react.memo"):60115,gd=bt?Symbol.for("react.lazy"):60116,D6=bt?Symbol.for("react.block"):60121,O6=bt?Symbol.for("react.fundamental"):60117,F6=bt?Symbol.for("react.responder"):60118,B6=bt?Symbol.for("react.scope"):60119;function dn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Lp:switch(e=e.type,e){case Pp:case fd:case ad:case cd:case ld:case pd:return e;default:switch(e=e&&e.$$typeof,e){case ud:case hd:case gd:case md:case dd:return e;default:return t}}case Ap:return t}}}function Wb(e){return dn(e)===fd}Ae.AsyncMode=Pp;Ae.ConcurrentMode=fd;Ae.ContextConsumer=ud;Ae.ContextProvider=dd;Ae.Element=Lp;Ae.ForwardRef=hd;Ae.Fragment=ad;Ae.Lazy=gd;Ae.Memo=md;Ae.Portal=Ap;Ae.Profiler=cd;Ae.StrictMode=ld;Ae.Suspense=pd;Ae.isAsyncMode=function(e){return Wb(e)||dn(e)===Pp};Ae.isConcurrentMode=Wb;Ae.isContextConsumer=function(e){return dn(e)===ud};Ae.isContextProvider=function(e){return dn(e)===dd};Ae.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lp};Ae.isForwardRef=function(e){return dn(e)===hd};Ae.isFragment=function(e){return dn(e)===ad};Ae.isLazy=function(e){return dn(e)===gd};Ae.isMemo=function(e){return dn(e)===md};Ae.isPortal=function(e){return dn(e)===Ap};Ae.isProfiler=function(e){return dn(e)===cd};Ae.isStrictMode=function(e){return dn(e)===ld};Ae.isSuspense=function(e){return dn(e)===pd};Ae.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ad||e===fd||e===cd||e===ld||e===pd||e===M6||typeof e=="object"&&e!==null&&(e.$$typeof===gd||e.$$typeof===md||e.$$typeof===dd||e.$$typeof===ud||e.$$typeof===hd||e.$$typeof===O6||e.$$typeof===F6||e.$$typeof===B6||e.$$typeof===D6)};Ae.typeOf=dn;Hb.exports=Ae;var $6=Hb.exports,Vb=$6,U6={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},z6={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qb={};qb[Vb.ForwardRef]=U6;qb[Vb.Memo]=z6;const H6=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function W6(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}const z0={componentStack:null,error:null,eventId:null};function V6(e,t){const n=new WeakMap;function r(s,i){if(!n.has(s)){if(s.cause)return n.set(s,!0),r(s.cause,i);s.cause=i}}r(e,t)}class Mp extends oe.Component{constructor(t){super(t),Mp.prototype.__init.call(this),this.state=z0,this._openFallbackReportDialog=!0;const n=Re();n&&n.on&&t.showDialog&&(this._openFallbackReportDialog=!1,n.on("afterSendEvent",r=>{!r.type&&r.event_id===this._lastEventId&&x0({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,{componentStack:n}){const{beforeCapture:r,onError:s,showDialog:i,dialogOptions:a}=this.props;gv(l=>{if(W6(oe.version)&&Kh(t)){const d=new Error(t.message);d.name=`React ErrorBoundary ${t.name}`,d.stack=n,V6(t,d)}r&&r(l,t,n);const c=Kc(t,{captureContext:{contexts:{react:{componentStack:n}}},mechanism:{handled:!!this.props.fallback}});s&&s(t,n,c),i&&(this._lastEventId=c,this._openFallbackReportDialog&&x0({...a,eventId:c})),this.setState({error:t,componentStack:n,eventId:c})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:n,eventId:r}=this.state,{onUnmount:s}=this.props;s&&s(t,n,r)}__init(){this.resetErrorBoundary=()=>{const{onReset:t}=this.props,{error:n,componentStack:r,eventId:s}=this.state;t&&t(n,r,s),this.setState(z0)}}render(){const{fallback:t,children:n}=this.props,r=this.state;if(r.error){let s;return typeof t=="function"?s=t({error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):s=t,oe.isValidElement(s)?s:(t&&H6&&V.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}var Gb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},H0=x.createContext&&x.createContext(Gb),Vr=globalThis&&globalThis.__assign||function(){return Vr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Vr.apply(this,arguments)},q6=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};function Yb(e){return e&&e.map(function(t,n){return x.createElement(t.tag,Vr({key:n},t.attr),Yb(t.child))})}function pe(e){return function(t){return x.createElement(G6,Vr({attr:Vr({},e.attr)},t),Yb(e.child))}}function G6(e){var t=function(n){var r=e.attr,s=e.size,i=e.title,a=q6(e,["attr","size","title"]),l=s||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),x.createElement("svg",Vr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:Vr(Vr({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&x.createElement("title",null,i),e.children)};return H0!==void 0?x.createElement(H0.Consumer,null,function(n){return t(n)}):t(Gb)}function Dp(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function Y6(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"}}]})(e)}function hi(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"}}]})(e)}function Ss(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"}}]})(e)}function X6(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(e)}function Xb(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(e)}function hc(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"}}]})(e)}function Kb(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"}}]})(e)}function K6(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}}]})(e)}function Q6(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polygon",attr:{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"}}]})(e)}function Qb(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}}]})(e)}function Jb(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 14 4 9 9 4"}},{tag:"path",attr:{d:"M20 20v-7a4 4 0 0 0-4-4H4"}}]})(e)}function J6(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"}}]})(e)}function Zb(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function e1(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(e)}function _s(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}}]})(e)}function t1(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(e)}function yd(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"}},{tag:"polyline",attr:{points:"21 15 16 10 5 21"}}]})(e)}function Z6(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}}]})(e)}function eI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(e)}function Ft(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(e)}function W0(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}}]})(e)}function Hf(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(e)}function Op(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}}]})(e)}function tI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}},{tag:"path",attr:{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function nI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function n1(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"}}]})(e)}function V0(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"}},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"}}]})(e)}function rI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"}}]})(e)}function q0(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(e)}function sI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"16"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"16",y2:"12"}}]})(e)}function G0(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function xd(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"17 1 21 5 17 9"}},{tag:"path",attr:{d:"M3 11V9a4 4 0 0 1 4-4h14"}},{tag:"polyline",attr:{points:"7 23 3 19 7 15"}},{tag:"path",attr:{d:"M21 13v2a4 4 0 0 1-4 4H3"}}]})(e)}function iI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"path",attr:{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"}}]})(e)}function Fp(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function ta(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(e)}function ka(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(e)}function Y0(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",y1:"21",x2:"4",y2:"14"}},{tag:"line",attr:{x1:"4",y1:"10",x2:"4",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"20",y1:"21",x2:"20",y2:"16"}},{tag:"line",attr:{x1:"20",y1:"12",x2:"20",y2:"3"}},{tag:"line",attr:{x1:"1",y1:"14",x2:"7",y2:"14"}},{tag:"line",attr:{x1:"9",y1:"8",x2:"15",y2:"8"}},{tag:"line",attr:{x1:"17",y1:"16",x2:"23",y2:"16"}}]})(e)}function oI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"path",attr:{d:"M8 14s1.5 2 4 2 4-2 4-2"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"9.01",y2:"9"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"15.01",y2:"9"}}]})(e)}function r1(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"}},{tag:"polyline",attr:{points:"17 6 23 6 23 12"}}]})(e)}function aI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 7 4 4 20 4 20 7"}},{tag:"line",attr:{x1:"9",y1:"20",x2:"15",y2:"20"}},{tag:"line",attr:{x1:"12",y1:"4",x2:"12",y2:"20"}}]})(e)}function s1(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function lI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(e)}function cI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(e)}function dI(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"line",attr:{x1:"23",y1:"9",x2:"17",y2:"15"}},{tag:"line",attr:{x1:"17",y1:"9",x2:"23",y2:"15"}}]})(e)}function mt(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}function na(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}}]})(e)}function pc(e){return pe({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]})(e)}function gt({src:e,name:t,size:n="md",className:r="",hasStory:s=!1,onClick:i}){const l=(u=>{const h=u.trim().split(" ");return h.length===1?h[0].charAt(0).toUpperCase():(h[0].charAt(0)+h[h.length-1].charAt(0)).toUpperCase()})(t),d={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg"}[n],f=i?"button":"div";return s?o.jsxs(f,{onClick:i,className:`${d} ${r} relative rounded-full overflow-visible ${i?"cursor-pointer hover:scale-105 transition-transform":""}`,children:[o.jsxs("div",{className:"absolute inset-0 rounded-full",style:{padding:"3px"},children:[o.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(90deg, #60a5fa, #34d399, #22d3ee, #f472b6, #60a5fa)",backgroundSize:"300% 100%",animation:"shimmerGradient 2s linear infinite"}}),o.jsx("div",{className:"absolute inset-[3px] rounded-full bg-gray-900"}),o.jsx("div",{className:"absolute -inset-1 rounded-full",style:{animation:"pulseGlow 2.4s ease-out infinite"}})]}),o.jsxs("div",{className:"absolute inset-[3px] rounded-full overflow-hidden flex items-center justify-center",children:[e?o.jsx("img",{src:e,alt:`${t}'s profile picture`,className:"w-full h-full object-cover",onError:u=>{u.target.style.display="none"}}):null,o.jsx("div",{className:`absolute inset-0 rounded-full flex items-center justify-center font-bold text-white ${e?"opacity-0":"opacity-100"} transition-opacity duration-200`,style:{background:"#000000"},children:l})]})]}):o.jsxs(f,{onClick:i,className:`${d} ${r} rounded-full overflow-hidden flex items-center justify-center relative ${i?"cursor-pointer hover:scale-105 transition-transform":""}`,children:[e?o.jsx("img",{src:e,alt:`${t}'s profile picture`,className:"w-full h-full object-cover",onError:u=>{u.target.style.display="none"}}):null,o.jsx("div",{className:`absolute inset-0 rounded-full flex items-center justify-center font-bold text-white ${e?"opacity-0":"opacity-100"} transition-opacity duration-200`,style:{background:"#000000"},children:l})]})}const ra=new Map,sa=new Map,Bp=new Map;function i1(e,t){return[e,t].sort((n,r)=>n.localeCompare(r)).join("|")}async function X0(e,t){var r;const n=i1(e,t);return((r=ra.get(n))==null?void 0:r.slice().sort((s,i)=>i.timestamp-s.timestamp))||[]}async function pi(e,t,n){const r=i1(e,t),s=ra.get(r)||[],i={id:`msg-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,senderHandle:e,text:n.text,imageUrl:n.imageUrl,isSystemMessage:n.isSystemMessage,timestamp:n.timestamp??Date.now()};if(s.push(i),ra.set(r,s),sa.set(t,await o1(t)),!n.isSystemMessage&&n.text){const{createNotification:a,isStickerMessage:l,isReplyToPost:c}=await my(()=>Promise.resolve().then(()=>BR),void 0);l(n.text)?await a({type:"sticker",fromHandle:e,toHandle:t,message:n.text}):c(n.text)&&await a({type:"reply",fromHandle:e,toHandle:t,message:n.text})}return window.dispatchEvent(new CustomEvent("conversationUpdated",{detail:{participants:[e,t],message:i}})),window.dispatchEvent(new CustomEvent("inboxUnreadChanged",{detail:{handle:t,unread:sa.get(t)||0}})),i}async function uI(e){return sa.get(e)||0}async function fI(e,t){const n=`${e}::${t}`;Bp.set(n,Date.now()),sa.set(e,await o1(e)),window.dispatchEvent(new CustomEvent("inboxUnreadChanged",{detail:{handle:e,unread:sa.get(e)||0}}))}async function K0(e){const t=new Map;return ra.forEach((n,r)=>{const[s,i]=r.split("|");if(s!==e&&i!==e)return;const a=s===e?i:s,l=n.slice().sort((p,y)=>y.timestamp-p.timestamp),c=l[0],d=Bp.get(`${e}::${a}`)||0,f=l.filter(p=>p.senderHandle!==e&&p.timestamp>d&&!p.isSystemMessage).length,u=t.get(a)||{last:void 0,unread:0},h=!u.last||c&&c.timestamp>u.last.timestamp?c:u.last;t.set(a,{last:h,unread:f})}),Array.from(t.entries()).map(([n,r])=>({otherHandle:n,lastMessage:r.last,unread:r.unread})).sort((n,r)=>{var s,i;return(((s=r.lastMessage)==null?void 0:s.timestamp)||0)-(((i=n.lastMessage)==null?void 0:i.timestamp)||0)})}async function o1(e){let t=0;return ra.forEach((n,r)=>{const[s,i]=r.split("|");if(s!==e&&i!==e)return;const a=s===e?i:s,l=Bp.get(`${e}::${a}`)||0;t+=n.filter(c=>c.senderHandle!==e&&c.timestamp>l&&!c.isSystemMessage).length}),t}const Q0=new Set;async function hI(e){if(!e||Q0.has(e))return;const t=[{from:"Sarah@artane",text:"Hey Barry! Loved your last clip "},{from:"Liam@cork",text:"Up for a collab this week?"},{from:"Ava@galway",text:"That sunset shot was unreal "},{from:"Noah@london",text:"DM me when youre free "}];for(const n of t)await pi(n.from,e,{text:n.text});Q0.add(e)}const a1=x.createContext(null);function pI({children:e}){const[t,n]=x.useState(null);x.useEffect(()=>{var i;try{const a=localStorage.getItem("user");if(!a){const c={id:"test-user",name:"Test User",email:"test@example.com",password:"",age:25,interests:["Technology","Travel","Food"],local:"Finglas",regional:"Dublin",national:"Ireland",handle:"TestUser@Dublin",countryFlag:"",avatarUrl:void 0};n(c),localStorage.setItem("user",JSON.stringify(c));return}const l=JSON.parse(a);if(l&&!l.local){const c={id:l.id||((i=l.name)==null?void 0:i.toLowerCase())||"me",name:l.name||"Me",email:l.email||"",password:"",age:l.age||18,interests:l.interests||[],local:"",regional:"",national:"",handle:`${l.name||"User"}@Unknown`,countryFlag:l.countryFlag||void 0,avatarUrl:l.avatarUrl||void 0};n(c)}else n(l)}catch(a){console.error("Error loading user from localStorage:",a)}},[]);const r=i=>{const a={id:i.name.trim().toLowerCase()||"me",name:i.name.trim()||"Me",email:i.email||"",password:i.password||"",age:i.age||18,interests:i.interests||[],local:i.local||"",regional:i.regional||"",national:i.national||"",handle:i.handle||`${i.name.trim()}@Unknown`,countryFlag:i.countryFlag||void 0,avatarUrl:i.avatarUrl||void 0,bio:i.bio||void 0,socialLinks:i.socialLinks||void 0};n(a),localStorage.setItem("user",JSON.stringify(a)),Vg({id:a.id,username:a.name})},s=()=>{n(null),localStorage.removeItem("user"),Vg(null)};return o.jsx(a1.Provider,{value:{user:t,login:r,logout:s},children:e})}function Ke(){const e=x.useContext(a1);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function mI({activeTab:e,onLocationChange:t}){const n=nt(),r=Kt(),{user:s}=Ke();x.useState(!1),x.useState("");const[i,a]=x.useState(!1),[l,c]=x.useState(0),[d,f]=x.useState(null);x.useEffect(()=>{s!=null&&s.handle&&uI(s.handle).then(y=>{c(y),a(y>0)}).catch(()=>{});function h(y){var m,g;const w=(m=y.detail)==null?void 0:m.message,v=((g=y.detail)==null?void 0:g.participants)||[];s!=null&&s.handle&&v.includes(s.handle)&&w!=null&&w.senderHandle&&w.senderHandle!==s.handle&&(a(!0),f(w.senderHandle))}function p(y){var m,g;const w=(m=y.detail)==null?void 0:m.handle,v=((g=y.detail)==null?void 0:g.unread)??0;w===(s==null?void 0:s.handle)&&(a(v>0),c(v))}return window.addEventListener("conversationUpdated",h),window.addEventListener("inboxUnreadChanged",p),()=>{window.removeEventListener("conversationUpdated",h),window.removeEventListener("inboxUnreadChanged",p)}},[s==null?void 0:s.handle]);const u=()=>{n("/discover")};return o.jsx(o.Fragment,{children:o.jsx("div",{className:"sticky top-0 z-40 bg-white/80 dark:bg-gray-950/80 backdrop-blur border-b border-gray-200 dark:border-gray-800",children:r.pathname.startsWith("/discover")?o.jsxs("div",{className:"mx-auto max-w-md px-4 h-11 flex items-center justify-between",children:[o.jsx("button",{onClick:()=>n("/feed"),className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"Back to Feed",title:"Back to Feed",children:o.jsx(t1,{className:"w-5 h-5 text-gray-700 dark:text-gray-200"})}),o.jsx("button",{onClick:()=>n("/feed"),className:"font-bold text-lg bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 bg-clip-text text-transparent","aria-label":"Go to Home Feed",title:"Gazetteer",children:"Gazetteer"}),o.jsx("div",{className:"flex items-center",children:o.jsx(gt,{src:s==null?void 0:s.avatarUrl,name:((s==null?void 0:s.handle)||"User").split("@")[0],size:"sm"})})]}):o.jsxs("div",{className:"mx-auto max-w-md px-4 h-11 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>n("/feed"),className:"font-bold text-lg bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 bg-clip-text text-transparent","aria-label":"Go to Home Feed",title:"Gazetteer",children:"Gazetteer"}),o.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-3 py-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Discover new locations",children:[o.jsxs("div",{className:"relative w-6 h-6",children:[o.jsx("div",{className:"absolute inset-0 rounded-md bg-gradient-to-r from-emerald-500 via-blue-500 to-violet-500 opacity-75 blur-sm animate-pulse"}),o.jsxs("div",{className:"absolute inset-[1px] rounded-md bg-gray-950 dark:bg-gray-950",children:[o.jsx("div",{className:"absolute inset-0 rounded-md",style:{background:"linear-gradient(90deg, transparent, rgba(59,130,246,0.5), transparent)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:o.jsx(Q6,{className:"w-3 h-3 text-white"})})]})]}),o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Discover"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>n("/stories"),className:"flex items-center gap-2 px-3 py-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"View Stories",title:"Stories",children:[o.jsxs("div",{className:"relative w-6 h-6",children:[o.jsx("div",{className:"absolute inset-0 rounded-md bg-gradient-to-r from-emerald-500 via-blue-500 to-violet-500 opacity-75 blur-sm animate-pulse"}),o.jsxs("div",{className:"absolute inset-[1px] rounded-md bg-gray-950 dark:bg-gray-950",children:[o.jsx("div",{className:"absolute inset-0 rounded-md",style:{background:"linear-gradient(90deg, transparent, rgba(59,130,246,0.5), transparent)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:o.jsx(Ft,{className:"w-3 h-3 text-white"})})]})]}),o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Clips"})]}),o.jsx("button",{onClick:()=>n("/inbox"),className:"relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Open notifications",title:i?"New notifications":"Notifications",children:o.jsxs("div",{className:"relative w-6 h-6 ",children:[i&&o.jsx("div",{className:"absolute -inset-1 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 opacity-80 blur-sm animate-pulse"}),o.jsx(_s,{className:`relative w-6 h-6 ${i?"text-pink-500 animate-[pulseGlow_2s_ease-in-out_infinite]":"text-gray-600 dark:text-gray-300"}`}),i&&o.jsx("span",{className:"absolute -top-1 -right-1 min-w-[16px] h-4 px-1 bg-pink-500 text-white text-[10px] leading-4 rounded-full text-center",children:l>9?"9+":l})]})})]})]})})})}function Sa(){const[e,t]=oe.useState(navigator.onLine);return oe.useEffect(()=>{const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n),window.addEventListener("offline",r),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}},[]),e}const gI=[{id:"1",userHandle:"Username@Dublin",locationLabel:"Story location",tags:["Text","text","text","text","text"],mediaUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?q=80&w=800",stats:{likes:14,views:42,comments:3,shares:2,reclips:1},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"2",userHandle:"Alice@Finglas",locationLabel:"Near Phoenix Park",tags:["Food","cafe","brunch","city","friends"],mediaUrl:"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=800",stats:{likes:87,views:534,comments:12,shares:8,reclips:5},isBookmarked:!0,isFollowing:!1,userLiked:!0},{id:"3",userHandle:"Bob@Ireland",locationLabel:"Seaside",tags:["Travel","sea","wind","walk","sun"],mediaUrl:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=800",stats:{likes:12,views:150,comments:1,shares:0,reclips:0},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"4",userHandle:"Sarah@NewYork",locationLabel:"Central Park",tags:["City","park","nature","urban","green"],mediaUrl:"https://images.unsplash.com/photo-1494522358652-f30e61a0b1b0?q=80&w=800",stats:{likes:45,views:234,comments:8,shares:3,reclips:2},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"5",userHandle:"Mike@London",locationLabel:"Thames River",tags:["River","bridge","architecture","history","water"],mediaUrl:"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?q=80&w=800",stats:{likes:67,views:345,comments:15,shares:4,reclips:3},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"6",userHandle:"Emma@Paris",locationLabel:"Eiffel Tower",tags:["Landmark","tower","architecture","france","city"],mediaUrl:"https://images.unsplash.com/photo-1511739001486-6bfe10ce785f?q=80&w=800",stats:{likes:89,views:456,comments:22,shares:6,reclips:4},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"7",userHandle:"John@Tokyo",locationLabel:"Shibuya Crossing",tags:["City","crossing","neon","busy","urban"],mediaUrl:"https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?q=80&w=800",stats:{likes:34,views:178,comments:6,shares:1,reclips:0},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"8",userHandle:"Lisa@Sydney",locationLabel:"Opera House",tags:["Architecture","opera","harbor","australia","landmark"],mediaUrl:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=800",stats:{likes:56,views:289,comments:11,shares:2,reclips:1},isBookmarked:!1,isFollowing:!1,userLiked:!1}];function l1(e){const t=e.toLowerCase();return t.includes("finglas")?{local:"Finglas",regional:"Dublin",national:"Ireland"}:t.includes("artane")?{local:"Artane",regional:"Dublin",national:"Ireland"}:t.includes("dublin")?{local:"Dublin",regional:"Dublin",national:"Ireland"}:t.includes("ireland")?{local:"Various",regional:"Various",national:"Ireland"}:t.includes("ballymun")?{local:"Ballymun",regional:"Dublin",national:"Ireland"}:t.includes("newyork")||t.includes("new york")?{local:"New York",regional:"New York",national:"USA"}:t.includes("london")?{local:"London",regional:"London",national:"UK"}:t.includes("paris")?{local:"Paris",regional:"Paris",national:"France"}:t.includes("tokyo")?{local:"Tokyo",regional:"Tokyo",national:"Japan"}:t.includes("sydney")?{local:"Sydney",regional:"NSW",national:"Australia"}:{local:"",regional:"",national:""}}let Te=[],J0=!1;if(J0)console.log("Posts array already initialized, length:",Te.length);else{console.log("Initializing posts array...");const e=Date.now();Te=gI.map((s,i)=>{var d;const a=l1(s.userHandle),l=(d=s.id)==null?void 0:d.match(/\d{13}/),c=l?parseInt(l[0],10):e-i*36e5;return{...s,id:`post-${s.id}-${i}-${c}-${Math.random().toString(36).substr(2,9)}`,createdAt:c,...a}}),J0=!0,console.log("Initial posts loaded:",Te.length),console.log("Initial post IDs:",Te.map(s=>s.id)),console.log("Posts array created at:",new Date().toISOString()),console.log("Posts array reference ID:",Math.random().toString(36).substr(2,9));const t=Te.filter((s,i)=>Te.findIndex(a=>a.id===s.id)!==i);t.length>0?console.error("DUPLICATE IDs FOUND:",t.map(s=>s.id)):console.log("No duplicate IDs found in initial posts");const n=Date.now(),r=[{id:`artane-post-1-${n}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Artane, Dublin",tags:["Dublin","local","community"],text:"Beautiful sunny day in Artane! The community here is amazing. Love living in this part of Dublin. The parks, the people, everything about this area makes it special. ",createdAt:n-18e5,stats:{likes:23,views:156,comments:5,shares:2,reclips:1},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-2-${n-36e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Artane, Dublin",tags:["food","dublin","ireland"],text:"Just had the most amazing brunch at the local cafe! The Irish breakfast is unbeatable. Highly recommend this spot if you ever find yourself in the area. Full of flavour and the service is top-notch! ",createdAt:n-36e5,stats:{likes:45,views:312,comments:12,shares:8,reclips:3},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-3-${n-72e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Artane, Dublin",tags:["travel","views","ireland"],mediaUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",mediaType:"video",caption:"Stunning views from Howth Hill looking back towards Dublin",createdAt:n-72e5,stats:{likes:67,views:445,comments:8,shares:4,reclips:2},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-4-${n-864e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Dublin City Centre",tags:["city","dublin","architecture"],mediaUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",mediaType:"video",caption:"Walking through the vibrant streets of Dublin",createdAt:n-864e5,stats:{likes:89,views:678,comments:15,shares:7,reclips:5},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-5-${n-1728e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Artane, Dublin",tags:["thoughts","life","inspiration"],text:"Life in Dublin is never boring. There's always something happening, someone to meet, a new place to discover. Grateful to call this city home. The energy here is infectious! ",createdAt:n-1728e5,stats:{likes:34,views:189,comments:6,shares:3,reclips:1},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-6-${n-2592e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Phoenix Park, Dublin",tags:["nature","dublin","outdoors"],mediaUrl:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800",mediaType:"image",caption:"Perfect morning walk in Phoenix Park! The deer are out and about ",createdAt:n-2592e5,stats:{likes:42,views:287,comments:7,shares:4,reclips:2},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"}];Te=[...Te,...r]}let _a=[{id:"comment-1",postId:"1",userHandle:"Alice@Dublin",text:"This looks amazing! Where is this taken?",createdAt:Date.now()-36e5,likes:3,userLiked:!1,replies:[{id:"reply-1",postId:"1",userHandle:"Bob@Finglas",text:"It's at Phoenix Park! Great spot for photos.",createdAt:Date.now()-3e6,likes:1,userLiked:!1,parentId:"comment-1"},{id:"reply-2",postId:"1",userHandle:"Charlie@Ireland",text:"I was there last week, beautiful place!",createdAt:Date.now()-24e5,likes:0,userLiked:!1,parentId:"comment-1"}],replyCount:2},{id:"comment-2",postId:"1",userHandle:"Bob@Finglas",text:"Great shot! ",createdAt:Date.now()-18e5,likes:1,userLiked:!1,replies:[],replyCount:0},{id:"comment-3",postId:"2",userHandle:"Charlie@Ireland",text:"That brunch looks delicious! What cafe is this?",createdAt:Date.now()-72e5,likes:0,userLiked:!1,replies:[{id:"reply-3",postId:"2",userHandle:"Alice@Dublin",text:"It's The Fumbally! Best brunch in Dublin.",createdAt:Date.now()-6e6,likes:2,userLiked:!1,parentId:"comment-3"}],replyCount:1}];const fu={};function Ls(e){return fu[e]||(fu[e]={likes:{},bookmarks:{},follows:{},reclips:{},lastViewed:{}}),fu[e]}const Qt=(e=250)=>new Promise(t=>setTimeout(t,e));async function yI(e){await Qt();const t=Ls(e);return Object.keys(t.follows).filter(n=>t.follows[n]===!0)}function bn(e,t){const n=Ls(e);return{...t,userLiked:!!n.likes[t.id],isBookmarked:!!n.bookmarks[t.id],isFollowing:!!n.follows[t.userHandle],userReclipped:!!n.reclips[t.id]}}async function _l(e,t,n=5,r="me",s="",i="",a=""){try{await Qt();const l=e.toLowerCase();console.log("fetchPostsPage called with posts array length:",Te.length),console.log("Current posts IDs:",Te.map(p=>p.id)),console.log("Fetching posts for tab:",l,"with user data:",{userId:r,userLocal:s,userRegional:i,userNational:a,totalPosts:Te.length});const c=Te.filter(p=>{if(l==="following")return Ls(r).follows[p.userHandle]===!0;if(!["finglas","dublin","ireland","following"].includes(l)){const w=l.trim().toLowerCase();console.log("=== CUSTOM LOCATION FILTER FOR:",w,"===");const v=new Set(["ireland","uk","united kingdom","england","scotland","wales","france","spain","portugal","germany","netherlands","belgium","australia","usa","united states","canada"]),m=new Set(["dublin","london","paris","madrid","rome","berlin","amsterdam","lisbon","vienna","prague","budapest","copenhagen","stockholm","oslo","helsinki","zurich","new york","toronto","vancouver","mexico city","tokyo","seoul","beijing","shanghai","hong kong","singapore","sydney","melbourne","auckland"]),g=S=>(S||"").trim().toLowerCase(),b=g(p.userLocal),k=g(p.userRegional),T=g(p.userNational);let E=!1;return v.has(w)?E=T===w||w==="uk"&&(T==="united kingdom"||T==="uk")||w==="usa"&&(T==="usa"||T==="united states"):m.has(w)?E=k===w:E=b===w,E&&console.log("Post MATCHING for custom filter",w,":",{userHandle:p.userHandle,userLocal:p.userLocal,userRegional:p.userRegional,userNational:p.userNational}),E}return l==="finglas"?p.userLocal==="Finglas":l==="dublin"?p.userRegional==="Dublin":l==="ireland"?p.userNational==="Ireland":!1});console.log("Filtered posts for",l,":",c.length,"posts"),console.log("All posts with locations:",Te.map(p=>({userHandle:p.userHandle,userLocal:p.userLocal,userRegional:p.userRegional,userNational:p.userNational}))),console.log("Filtered posts:",c.map(p=>({userHandle:p.userHandle,userLocal:p.userLocal,userRegional:p.userRegional,userNational:p.userNational})));const d=c.slice().sort((p,y)=>{const w=p.createdAt||0;return(y.createdAt||0)-w});console.log("Sorted posts (first 3):",d.slice(0,3).map((p,y)=>({index:y,id:p.id.substring(0,60),createdAt:p.createdAt,timeAgo:new Date(p.createdAt).toISOString(),userHandle:p.userHandle})));const f=t??0,u=d.slice(f,f+n).map(p=>bn(r,p)),h=f+u.length<d.length?f+u.length:null;return console.log("Returning page with:",{itemsCount:u.length,nextCursor:h}),{items:u,nextCursor:h}}catch(l){throw console.error("Error in fetchPostsPage:",l),l}}async function hs(e,t){await Qt(150);const n=Ls(e),r=Te.find(i=>i.id===t),s=!!n.likes[t];return n.likes[t]=!s,r.stats.likes+=s?-1:1,bn(e,r)}async function mi(e,t){await Qt(150);const n=Te.find(s=>s.id===t),r=Ls(e);return r.follows[n.userHandle]=!r.follows[n.userHandle],bn(e,n)}async function mc(e,t){await Qt(100);const n=Te.find(l=>l.id===t);if(!n)return console.error("Post not found for incrementViews:",t),console.log("Available post IDs:",Te.map(l=>l.id)),{id:t,userHandle:"Unknown",locationLabel:"Unknown Location",tags:[],mediaUrl:"",createdAt:Date.now(),stats:{likes:0,views:0,comments:0,shares:0,reclips:0},isBookmarked:!1,isFollowing:!1,userLiked:!1};const r=Ls(e),s=Date.now(),i=r.lastViewed[t]||0,a=s-5*60*1e3;return(i<a||!i)&&(n.stats.views+=1),r.lastViewed[t]=s,bn(e,n)}async function xI(e,t){await Qt(100);const n=Te.find(r=>r.id===t);if(!n)throw console.error("Post not found for incrementShares:",t),new Error(`Post with id ${t} not found`);return n.stats.shares+=1,bn(e,n)}async function Io(e,t,n){await Qt(200);const r=Te.find(a=>a.id===t);if(!r)throw console.error("Original post not found for reclipPost:",t),new Error(`Original post with id ${t} not found`);if(r.userHandle===n)throw console.log("Cannot reclip your own post:",t),new Error("Cannot reclip your own post");const s=Ls(e);if(s.reclips[t])return console.log("User has already reclipped this post:",t),{originalPost:bn(e,r),reclippedPost:null};s.reclips[t]=!0,r.stats.reclips+=1;const i={...r,id:`reclip-${e}-${t}-${Date.now()}`,userHandle:n,originalUserHandle:r.userHandle,isReclipped:!0,originalPostId:t,reclippedBy:e,isBookmarked:!1,isFollowing:!1,userLiked:!1,userReclipped:!1,stats:{...r.stats}};return Te.push(i),{originalPost:bn(e,r),reclippedPost:bn(e,i)}}async function wI(e){return await Qt(200),_a.filter(t=>t.postId===e)}async function Wf(e,t=30){await Qt(150);const n=e.trim().toLowerCase();return Te.filter(i=>i.userHandle.toLowerCase()===n).slice().reverse().slice(0,t)}async function $p(e,t,n){await Qt(300);const r={id:crypto.randomUUID(),postId:e,userHandle:t,text:n,createdAt:Date.now(),likes:0,userLiked:!1};_a.push(r);const s=Te.find(i=>i.id===e);return s&&(s.stats.comments+=1),r}async function vI(e){await Qt(100);const t=_a.find(n=>n.id===e);if(!t)throw new Error("Comment not found");return t.userLiked=!t.userLiked,t.likes+=t.userLiked?1:-1,t}async function bI(e,t){await Qt(100);const n=_a.find(s=>s.id===e);if(!n||!n.replies)throw new Error("Parent comment or replies not found");const r=n.replies.find(s=>s.id===t);if(!r)throw new Error("Reply not found");return r.userLiked=!r.userLiked,r.likes+=r.userLiked?1:-1,n}async function kI(e,t,n,r){await Qt(300);const s={id:crypto.randomUUID(),postId:e,userHandle:n,text:r,createdAt:Date.now(),likes:0,userLiked:!1,parentId:t},i=_a.find(a=>a.id===t);return i&&(i.replies||(i.replies=[]),i.replies.push(s),i.replyCount=(i.replyCount||0)+1),s}async function SI(e,t,n,r,s,i,a,l,c,d,f){await Qt(500),console.log("Creating post with:",{userId:e,userHandle:t,text:n,location:r,imageUrl:s,mediaType:i,imageText:a,caption:l,userLocal:c,userRegional:d,userNational:f});const u=c&&d&&f?{userLocal:c,userRegional:d,userNational:f}:l1(t),h=Date.now(),p={id:`${crypto.randomUUID()}-${h}`,userHandle:t,locationLabel:r||"Unknown Location",tags:[],mediaUrl:s||"",mediaType:i||void 0,text:n||void 0,imageText:a||void 0,caption:l||void 0,createdAt:h,stats:{likes:0,views:0,comments:0,shares:0,reclips:0},isBookmarked:!1,isFollowing:!1,userLiked:!1,...u};return Te.unshift(p),console.log("Post created and added to posts array. Total posts:",Te.length),console.log("New post:",p),console.log("All post IDs:",Te.map(y=>y.id)),console.log("Posts array length before createPost:",Te.length),console.log("Posts array length after createPost:",Te.length),bn(e,p)}function Ea(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function _I(e,t){let n;const r=()=>{if(n)return n;const s=indexedDB.open(e);return s.onupgradeneeded=()=>s.result.createObjectStore(t),n=Ea(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(a=>i(a.transaction(t,s).objectStore(t)))}let hu;function wd(){return hu||(hu=_I("keyval-store","keyval")),hu}function EI(e,t=wd()){return t("readonly",n=>Ea(n.get(e)))}function NI(e,t,n=wd()){return n("readwrite",r=>(r.put(t,e),Ea(r.transaction)))}function jI(e,t,n=wd()){return n("readwrite",r=>new Promise((s,i)=>{r.get(e).onsuccess=function(){try{r.put(t(this.result),e),s(Ea(r.transaction))}catch(a){i(a)}}}))}function CI(e,t=wd()){return t("readwrite",n=>(n.delete(e),Ea(n.transaction)))}const Vf={get:EI,set:NI,del:CI,update:jI},qf="mutations";async function et(e){const t={...e,id:crypto.randomUUID(),at:Date.now()};await Vf.update(qf,(n=[])=>[...n,t])}async function TI(e){let t=await Vf.get(qf)??[];for(const n of t)try{await e(n),t=t.filter(r=>r.id!==n.id),await Vf.set(qf,t)}catch{break}}function Z0(e){const n=Date.now()-e,r=Math.floor(n/6e4),s=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<1?"now":r<60?`${r}m`:s<24?`${s}h`:`${i}d`}function II({comment:e,onLikeComment:t,onLikeReply:n,onReply:r,userId:s,postId:i}){var I;const{user:a}=Ke(),[l,c]=x.useState(e.userLiked),[d,f]=x.useState(e.likes),[u,h]=x.useState(!1),[p,y]=x.useState(!1),[w,v]=x.useState(!1),[m,g]=x.useState(""),[b,k]=x.useState(!1);x.useEffect(()=>{c(e.userLiked),f(e.likes)},[e.userLiked,e.likes]);const T=async()=>{if(!(!m.trim()||b)){k(!0);try{await r(e.id,m.trim()),g(""),v(!1)}catch(q){console.error("Failed to add reply:",q)}finally{k(!1)}}},E=e.replyCount||0,S=E>0;return o.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 mb-4",children:o.jsx("div",{className:"flex items-start justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(gt,{src:(a==null?void 0:a.handle)===e.userHandle?a==null?void 0:a.avatarUrl:void 0,name:((I=e.userHandle)==null?void 0:I.split("@")[0])||"User",size:"sm"}),o.jsx("span",{className:"font-medium text-sm",children:e.userHandle}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Z0(e.createdAt)})]}),o.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-3",children:e.text}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:()=>t(e.id),disabled:u,className:"flex items-center gap-1 px-2 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50","aria-pressed":l,"aria-label":l?"Unlike comment":"Like comment",children:[l?o.jsx(pc,{className:"text-red-500",size:16}):o.jsx(_s,{size:16}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:d})]}),o.jsx("button",{onClick:()=>v(!w),className:"text-xs text-gray-600 dark:text-gray-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors",children:"Reply"})]}),w&&o.jsx("div",{className:"mt-3 ml-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"text",value:m,onChange:q=>g(q.target.value),placeholder:"Write a reply...",className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent text-sm",disabled:b}),o.jsx("button",{onClick:T,disabled:!m.trim()||b,className:"p-2 rounded-lg bg-brand-600 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-brand-700 transition-colors",children:o.jsx(ta,{size:14})})]})}),S&&o.jsxs("div",{className:"mt-3 ml-4",children:[o.jsxs("button",{onClick:()=>y(!p),className:"flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors",children:[p?o.jsx(Kb,{size:14}):o.jsx(Xb,{size:14}),"View ",E," ",E===1?"reply":"replies"]}),p&&e.replies&&o.jsx("div",{className:"mt-2 space-y-3",children:e.replies.map(q=>{var A;return o.jsxs("div",{className:"border-l-2 border-gray-200 dark:border-gray-700 pl-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(gt,{src:(a==null?void 0:a.handle)===q.userHandle?a==null?void 0:a.avatarUrl:void 0,name:((A=q.userHandle)==null?void 0:A.split("@")[0])||"User",size:"sm"}),o.jsx("span",{className:"font-medium text-xs",children:q.userHandle}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Z0(q.createdAt)})]}),o.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-200 mb-2",children:q.text}),o.jsxs("button",{onClick:()=>n(e.id,q.id),className:"flex items-center gap-1 px-1 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[q.userLiked?o.jsx(pc,{className:"text-red-500",size:12}):o.jsx(_s,{size:12}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:q.likes})]})]},q.id)})})]})]})})})}function RI({placeholder:e,onSubmit:t,isLoading:n}){const{user:r}=Ke(),[s,i]=x.useState(""),a=l=>{l.preventDefault(),s.trim()&&!n&&(t(s.trim()),i(""))};return o.jsxs("form",{onSubmit:a,className:"flex items-center gap-2 p-3 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(gt,{src:r==null?void 0:r.avatarUrl,name:(r==null?void 0:r.name)||"User",size:"sm"}),o.jsx("input",{type:"text",value:s,onChange:l=>i(l.target.value),placeholder:e,className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent",disabled:n}),o.jsx("button",{type:"submit",disabled:!s.trim()||n,className:"p-2 rounded-lg bg-brand-600 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-brand-700 transition-colors",children:o.jsx(ta,{size:16})})]})}function Up({postId:e,isOpen:t,onClose:n}){const{user:r}=Ke(),s=Sa(),[i,a]=x.useState([]),[l,c]=x.useState(!1),[d,f]=x.useState(!1);x.useEffect(()=>{t&&u()},[t,e]);const u=async()=>{c(!0);try{const v=await wI(e);a(v)}catch(v){console.error("Failed to load comments:",v)}finally{c(!1)}},h=async v=>{if(r){f(!0);try{if(!s){await et({type:"comment",postId:e,userId:r.id,text:v});return}const m=await $p(e,r.handle||"darraghdublin",v);a(g=>[...g,m]),window.dispatchEvent(new CustomEvent(`commentAdded-${e}`))}catch(m){console.error("Failed to add comment:",m)}finally{f(!1)}}},p=async v=>{if(r)try{if(!s){await et({type:"commentLike",commentId:v,userId:r.id});return}const m=await vI(v);a(g=>g.map(b=>b.id===v?m:b))}catch(m){console.error("Failed to like comment:",m)}},y=async(v,m)=>{if(r)try{if(!s){await et({type:"replyLike",parentCommentId:v,replyId:m,userId:r.id});return}const g=await bI(v,m);a(b=>b.map(k=>k.id===v?g:k))}catch(g){console.error("Failed to like reply:",g)}},w=async(v,m)=>{if(r)try{if(!s){await et({type:"reply",postId:e,parentId:v,userId:r.id,text:m});return}const g=await kI(e,v,r.handle||"darraghdublin",m);a(b=>b.map(k=>{var T;return k.id===v?((T=k.replies)==null?void 0:T.find(S=>S.id===g.id))?k:{...k,replies:[...k.replies||[],g],replyCount:(k.replyCount||0)+1}:k})),window.dispatchEvent(new CustomEvent(`commentAdded-${e}`))}catch(g){console.error("Failed to add reply:",g)}};return t?o.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end md:items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:n}),o.jsxs("div",{className:"relative bg-white dark:bg-gray-950 w-full max-w-md h-[80vh] md:h-[70vh] rounded-t-2xl md:rounded-2xl shadow-xl flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Comments"}),o.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close comments",children:o.jsx(mt,{size:20})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600"})}):i.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[o.jsx(Op,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No comments yet"}),o.jsx("p",{className:"text-sm",children:"Be the first to comment!"})]}):o.jsx("div",{className:"space-y-4",children:i.map(v=>o.jsx(II,{comment:v,onLikeComment:p,onLikeReply:y,onReply:w,userId:(r==null?void 0:r.id)||"",postId:e},v.id))})}),o.jsx(RI,{placeholder:"Write a comment...",onSubmit:h,isLoading:d}),!s&&o.jsx("div",{className:"px-4 py-2 bg-amber-50 dark:bg-amber-950 text-amber-900 dark:text-amber-200 text-xs border-t border-amber-200 dark:border-amber-800",children:"You're offline. Comments will sync when back online."})]})]}):null}let un=[{id:"story-1",userId:"user-1",userHandle:"John@Dublin",mediaUrl:"https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=800",mediaType:"image",text:"Amazing sunset in Dublin! ",createdAt:Date.now()-5e3,expiresAt:Date.now()+24*60*60*1e3-5e3,location:"Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-2",userId:"user-1",userHandle:"John@Dublin",mediaUrl:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800",mediaType:"image",text:"Beautiful day for a walk! ",createdAt:Date.now()-3e3,expiresAt:Date.now()+24*60*60*1e3-3e3,location:"Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-3",userId:"user-2",userHandle:"Sarah@London",mediaUrl:"https://images.unsplash.com/photo-1517474307977-7c27ca92444a?w=800",mediaType:"image",text:"Love the architecture here! ",createdAt:Date.now()-1e4,expiresAt:Date.now()+24*60*60*1e3-1e4,location:"London",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-4",userId:"user-3",userHandle:"Mike@Paris",mediaUrl:"https://images.unsplash.com/photo-1502602898536-47ad22581b52?w=800",mediaType:"image",text:"Beautiful morning in Paris! ",createdAt:Date.now()-8e3,expiresAt:Date.now()+24*60*60*1e3-8e3,location:"Paris",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-5",userId:"user-4",userHandle:"Emma@NewYork",mediaUrl:"https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=800",mediaType:"image",text:"City never sleeps! ",createdAt:Date.now()-6e3,expiresAt:Date.now()+24*60*60*1e3-6e3,location:"New York",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-6",userId:"user-5",userHandle:"Username@Dublin",mediaUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=800",mediaType:"image",text:"Beautiful day in Dublin! ",createdAt:Date.now()-4e3,expiresAt:Date.now()+24*60*60*1e3-4e3,location:"Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-7",userId:"user-6",userHandle:"Alice@Finglas",mediaUrl:"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=800",mediaType:"image",text:"Great spot for coffee! ",createdAt:Date.now()-2e3,expiresAt:Date.now()+24*60*60*1e3-2e3,location:"Finglas",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-8",userId:"user-7",userHandle:"Sarah@NewYork",mediaUrl:"https://images.unsplash.com/photo-1494522358652-f30e61a0b1b0?w=800",mediaType:"image",text:"Park life! ",createdAt:Date.now()-1e3,expiresAt:Date.now()+24*60*60*1e3-1e3,location:"New York",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-9",userId:"user-8",userHandle:"Mike@London",mediaUrl:"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=800",mediaType:"image",text:"Thames vibes! ",createdAt:Date.now()-3e3,expiresAt:Date.now()+24*60*60*1e3-3e3,location:"London",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-sarah-1",userId:"sarah-artane-1",userHandle:"Sarah@Artane",mediaUrl:"https://images.unsplash.com/photo-1543007631-283050bb3e8c?w=800",mediaType:"image",text:"Beautiful morning in Artane! ",createdAt:Date.now()-5e3,expiresAt:Date.now()+24*60*60*1e3-5e3,location:"Artane, Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-sarah-2",userId:"sarah-artane-1",userHandle:"Sarah@Artane",mediaUrl:"https://videos.pexels.com/video-files/5439112/5439112-uhd_3840_2160_30fps.mp4",mediaType:"video",text:"Exploring the beautiful coast! ",createdAt:Date.now()-7e3,expiresAt:Date.now()+24*60*60*1e3-7e3,location:"Howth, Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0}];function On(e=300){return new Promise(t=>setTimeout(t,e))}async function LI(e){await On();const t=Date.now();return un.filter(s=>s.expiresAt>t).reduce((s,i)=>{const a=s.find(l=>l.userId===i.userId);return a?a.stories.push(i):s.push({userId:i.userId,userHandle:i.userHandle,name:i.userHandle.split("@")[0],avatarUrl:(i.userId===e,void 0),stories:[i]}),s},[])}async function AI(e,t){await On();const n=Date.now();return un.filter(r=>r.userId===t&&r.expiresAt>n).sort((r,s)=>r.createdAt-s.createdAt)}async function PI(e){await On();const t=Date.now(),n=un.filter(r=>r.userHandle===e&&r.expiresAt>t);return n.length===0?null:{userId:n[0].userId,userHandle:n[0].userHandle,name:n[0].userHandle.split("@")[0],avatarUrl:void 0,stories:n.sort((r,s)=>r.createdAt-s.createdAt)}}async function Gf(e,t,n,r,s,i,a,l,c,d){await On();const f=Date.now(),u=f+24*60*60*1e3,h={id:`story-${Date.now()}`,userId:e,userHandle:t,mediaUrl:n,mediaType:r,text:s,textColor:a,textSize:l,createdAt:f,expiresAt:u,location:i,views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0,sharedFromPost:c,sharedFromUser:d};return un.push(h),h}async function MI(e,t){await On();const n=un.find(r=>r.id===e);n&&!n.hasViewed&&(n.hasViewed=!0,n.views+=1)}async function DI(e){await On();const t=un.find(n=>n.id===e);t&&(t.views+=1)}async function OI(e,t,n,r){await On();const s=un.find(i=>i.id===e);s&&(s.reactions=s.reactions.filter(i=>i.userId!==t),s.reactions.push({id:`reaction-${Date.now()}`,userId:t,userHandle:n,emoji:r,createdAt:Date.now()}),s.userReaction=r)}async function FI(e,t,n,r){await On();const s=un.find(i=>i.id===e);s&&s.replies.push({id:`reply-${Date.now()}`,userId:t,userHandle:n,text:r,createdAt:Date.now()})}async function Yf(e){await On();const t=Date.now();return un.filter(r=>r.userHandle===e&&r.expiresAt>t).length>0}async function pu(e){await On();const t=Date.now();return un.filter(r=>r.userHandle===e&&r.expiresAt>t&&!r.hasViewed).length>0}async function BI(e,t){await On();const n=Date.now();return un.filter(i=>i.expiresAt>n).reduce((i,a)=>{if(a.userId===e||t.includes(a.userHandle)){const l=i.find(c=>c.userId===a.userId);l?l.stories.push(a):i.push({userId:a.userId,userHandle:a.userHandle,name:a.userHandle.split("@")[0],avatarUrl:void 0,stories:[a]})}return i},[])}async function ey(e){const t=Date.now();return un.some(n=>n.mediaUrl===e&&n.expiresAt>t)}function ty(e){return un.some(t=>t.mediaUrl===e)}function El(e,t=2e3){try{const n="app-toast-container";let r=document.getElementById(n);r||(r=document.createElement("div"),r.id=n,r.style.position="fixed",r.style.left="50%",r.style.bottom="24px",r.style.transform="translateX(-50%)",r.style.zIndex="9999",r.style.pointerEvents="none",document.body.appendChild(r));const s=document.createElement("div");s.textContent=e,s.style.pointerEvents="auto",s.style.background="rgba(17,24,39,0.92)",s.style.color="#fff",s.style.padding="10px 14px",s.style.marginTop="8px",s.style.borderRadius="10px",s.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)",s.style.fontSize="14px",s.style.fontWeight="600",s.style.opacity="0",s.style.transition="opacity 200ms ease, transform 200ms ease",s.style.transform="translateY(8px)",r.appendChild(s),requestAnimationFrame(()=>{s.style.opacity="1",s.style.transform="translateY(0)"}),setTimeout(()=>{s.style.opacity="0",s.style.transform="translateY(8px)",setTimeout(()=>s.remove(),220)},t)}catch{alert(e)}}const vd=({isOpen:e,onClose:t,post:n})=>{const[r,s]=oe.useState(!1),i=nt(),{user:a}=Ke();if(!e)return null;console.log("ShareModal rendered with post:",n);const l=`${window.location.origin}/post/${n.id}`,d=`${n.text?n.text.substring(0,100)+(n.text.length>100?"...":""):"Check out this post"} by ${n.userHandle}`,f=async()=>{try{await navigator.clipboard.writeText(l),s(!0),setTimeout(()=>s(!1),2e3)}catch(v){console.error("Failed to copy link:",v)}};async function u(v){const b=document.createElement("canvas");b.width=1080,b.height=1920;const k=b.getContext("2d"),T=k.createLinearGradient(0,0,1080,1920);T.addColorStop(0,"#0ea5e9"),T.addColorStop(.5,"#8b5cf6"),T.addColorStop(1,"#f43f5e"),k.fillStyle=T,k.fillRect(0,0,1080,1920),k.fillStyle="#ffffff",k.textAlign="center",k.textBaseline="middle";const S=1080-96*2;let I=64;k.font=`${I}px Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial`;function q(U){const K=U.split(/\s+/),re=[];let D="";for(const Y of K){const $=D?D+" "+Y:Y;k.measureText($).width>S?(D&&re.push(D),D=Y):D=$}return D&&re.push(D),re}const A=(v||"Shared from the feed").slice(0,240);let N=q(A);for(;N.length>10&&I>36;)I-=6,k.font=`${I}px Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial`,N=q(A);const H=I*1.35,L=N.length*H;let M=1920/2-L/2;for(const U of N)k.fillText(U,1080/2,M),M+=H;return b.toDataURL("image/png")}const h=async()=>{if(console.log("Share to story clicked",n),!a){alert("Please sign in to share stories.");return}const v=200,m=n.text&&n.text.length>v?n.text.substring(0,v)+"...":n.text;try{let g=n.mediaUrl,b=n.mediaType||"image";g||(g=await u(m||""),b="image"),await Gf(a.id,a.handle,g,b,m||void 0,void 0,void 0,"medium",n.id,n.userHandle),window.dispatchEvent(new CustomEvent("storyCreated",{detail:{userHandle:a.handle}})),t(),El("Shared to your stories"),i("/stories")}catch(g){console.error("Failed to share to story:",g),alert("Failed to share to stories. Please try again.")}},p=v=>{const m=encodeURIComponent(l),g=encodeURIComponent(d);let b="";switch(v){case"whatsapp":b=`https://wa.me/?text=${g}%20${m}`;break;case"facebook":b=`https://www.facebook.com/sharer/sharer.php?u=${m}`;break;case"twitter":b=`https://twitter.com/intent/tweet?text=${g}&url=${m}`;break;case"gmail":b=`mailto:?subject=${g}&body=${g}%0A%0A${m}`;break;case"linkedin":b=`https://www.linkedin.com/sharing/share-offsite/?url=${m}`;break;default:return}window.open(b,"_blank","width=600,height=400")},y=[{id:"copy",name:"Copy Link",icon:o.jsx(Qb,{className:"w-6 h-6"}),color:"bg-gray-100 hover:bg-gray-200 text-gray-800",action:f},{id:"whatsapp",name:"WhatsApp",icon:o.jsx("div",{className:"w-6 h-6 bg-green-500 rounded flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"W"})}),color:"bg-green-50 hover:bg-green-100 text-green-800",action:()=>p("whatsapp")},{id:"facebook",name:"Facebook",icon:o.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"f"})}),color:"bg-blue-50 hover:bg-blue-100 text-blue-800",action:()=>p("facebook")},{id:"twitter",name:"X (Twitter)",icon:o.jsx("div",{className:"w-6 h-6 bg-black rounded flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"X"})}),color:"bg-gray-50 hover:bg-gray-100 text-gray-800",action:()=>p("twitter")},{id:"gmail",name:"Gmail",icon:o.jsx("div",{className:"w-6 h-6 bg-red-500 rounded flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"G"})}),color:"bg-red-50 hover:bg-red-100 text-red-800",action:()=>p("gmail")},{id:"linkedin",name:"LinkedIn",icon:o.jsx("div",{className:"w-6 h-6 bg-blue-700 rounded flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"in"})}),color:"bg-blue-50 hover:bg-blue-100 text-blue-800",action:()=>p("linkedin")}],w=[{id:"story",name:"Share to Clip",icon:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"bg-gradient-to-br from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",action:h},...y];return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-[200]",children:o.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-md rounded-t-3xl shadow-2xl transform transition-transform duration-300 ease-out",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:o.jsx(ka,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Share Post"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Share this post with others"})]})]}),o.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:o.jsx(mt,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"grid grid-cols-2 gap-4 auto-rows-fr",children:w.map(v=>o.jsxs("button",{onClick:m=>{m.preventDefault(),m.stopPropagation(),v.action()},className:`flex items-center gap-3 p-4 rounded-xl transition-all duration-200 hover:scale-105 ${v.color}`,children:[v.icon,o.jsx("span",{className:"font-medium",children:v.name}),v.id==="copy"&&r&&o.jsx("span",{className:"text-xs text-green-600 ml-auto",children:"Copied!"})]},v.id))}),o.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:n.userHandle.charAt(0).toUpperCase()}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:n.userHandle}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.locationLabel})]}),n.text&&o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:n.text}),o.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[o.jsx(Z6,{className:"w-3 h-3 inline mr-1"}),l]})]})]})})]})]})})};function zp({post:e,isOpen:t,onClose:n,onLike:r,onFollow:s,onShare:i,onOpenComments:a,onReclip:l}){const[c,d]=x.useState(e.userLiked),[f,u]=x.useState(e.stats.likes),[h,p]=x.useState(e.stats.comments),[y,w]=x.useState(e.stats.shares),[v,m]=x.useState(e.stats.reclips),[g,b]=x.useState(e.isFollowing),[k,T]=x.useState(e.userReclipped||!1),[E,S]=x.useState(!1),[I,q]=x.useState(""),[A,N]=x.useState(!1),[H,L]=x.useState(!1),[M,U]=x.useState(!1),[K,re]=x.useState(0),D=x.useRef(null),Y=x.useRef(0),$=x.useRef(!1),{user:Q}=Ke(),fe=Sa();x.useEffect(()=>{d(e.userLiked),u(e.stats.likes),p(e.stats.comments),w(e.stats.shares),m(e.stats.reclips),b(e.isFollowing),T(e.userReclipped||!1)},[e.userLiked,e.stats.likes,e.stats.comments,e.stats.shares,e.stats.reclips,e.isFollowing,e.userReclipped]),x.useEffect(()=>{const X=()=>{p(_=>_+1)},le=_=>{console.log("ScenesModal: likeToggled event received",_.detail),_.detail&&_.detail.liked!==void 0&&d(_.detail.liked),_.detail&&_.detail.likes!==void 0&&u(_.detail.likes)},j=()=>{w(_=>_+1)},z=_=>{_.detail&&_.detail.reclips!==void 0?m(_.detail.reclips):m(O=>O+1),T(!0)};return window.addEventListener(`commentAdded-${e.id}`,X),window.addEventListener(`likeToggled-${e.id}`,le),window.addEventListener(`shareAdded-${e.id}`,j),window.addEventListener(`reclipAdded-${e.id}`,z),()=>{window.removeEventListener(`commentAdded-${e.id}`,X),window.removeEventListener(`likeToggled-${e.id}`,le),window.removeEventListener(`shareAdded-${e.id}`,j),window.removeEventListener(`reclipAdded-${e.id}`,z)}},[e.id]),x.useEffect(()=>{function X(le){le.key==="Escape"&&n()}return t&&(document.addEventListener("keydown",X),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",X),document.body.style.overflow=""}},[t,n]);async function B(){if(E)return;S(!0);let X;try{d(le=>(X=le,!le)),u(le=>X?Math.max(0,le-1):le+1),await r()}catch(le){d(X),u(j=>X?j+1:Math.max(0,j-1)),console.error("Error toggling like:",le)}finally{S(!1)}}const C=x.useCallback(async()=>{const X=Date.now();if(X-Y.current<300){if(L(!0),setTimeout(()=>L(!1),1e3),!E&&!c){S(!0);try{d(!0),u(j=>j+1),await r()}catch(j){d(!1),u(z=>Math.max(0,z-1)),console.error("Error toggling like:",j)}finally{S(!1)}}}else e.mediaType==="video"&&D.current&&(D.current.paused?D.current.play():D.current.pause());Y.current=X},[e.mediaType,r,E]),R=x.useCallback(X=>{if($.current){X.preventDefault();return}C()},[C]),J=x.useCallback(X=>{$.current=!0,C(),setTimeout(()=>{$.current=!1},300)},[C]);async function F(){if(!E){S(!0);try{b(X=>!X),await s()}catch(X){b(e.isFollowing),console.error("Error toggling follow:",X)}finally{S(!1)}}}function Z(){console.log("Share clicked in ScenesModal, opening ShareModal, current state:",M),U(!0),i().catch(console.error)}async function P(X){if(X&&(X.stopPropagation(),X.preventDefault()),!E&&e.userHandle!==(Q==null?void 0:Q.handle)&&!k){S(!0);try{await l()}catch(le){console.error("Error reclipping post:",le)}finally{S(!1)}}}async function ee(X){if(X.preventDefault(),!I.trim()||A||!Q)return;const le=I.trim();q(""),N(!0);try{p(j=>j+1),fe?await $p(e.id,(Q==null?void 0:Q.handle)||"darraghdublin",le):await et({type:"comment",postId:e.id,userId:Q.id,text:le}),window.dispatchEvent(new CustomEvent(`commentAdded-${e.id}`,{detail:{text:le}})),setTimeout(()=>{a()},100)}catch(j){console.error("Error adding comment:",j),q(le),p(z=>Math.max(0,z-1))}finally{N(!1)}}return t?(x.useEffect(()=>{console.log("ScenesModal - shareModalOpen changed:",M)},[M]),o.jsxs(o.Fragment,{children:[t&&o.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":"Scenes fullscreen viewer",className:"fixed inset-0 z-[100] bg-black flex items-center justify-center",children:[o.jsxs("div",{className:"absolute top-6 left-4 z-10 flex items-center gap-2",children:[o.jsx("div",{className:"p-1 rounded-md border-2 border-white",children:o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",className:"text-white flex-shrink-0",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),o.jsx("path",{d:"M9 7 L9 17 L17 12 Z",fill:"currentColor"})]})}),o.jsx("span",{className:"text-white text-xl font-bold tracking-tight",children:"Scenes"})]}),o.jsx("button",{onClick:n,"aria-label":"Close scenes",className:"absolute top-6 right-4 z-10 p-2 rounded-full bg-black/30 hover:bg-black/50 text-white transition-colors",children:o.jsx(mt,{size:24})}),o.jsxs("div",{className:"w-full h-full flex items-center justify-center relative select-none cursor-pointer",onClick:X=>{(X.target===X.currentTarget||X.target instanceof HTMLElement&&!X.target.closest("button"))&&R()},onTouchEnd:J,children:[e.mediaUrl?e.mediaType==="video"?o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("video",{ref:D,className:"w-full h-full object-contain pointer-events-none",src:e.mediaUrl,controls:!1,autoPlay:!0,loop:!0,playsInline:!0,muted:!0,onTimeUpdate:X=>{const le=X.currentTarget;le.duration&&re(le.currentTime/le.duration)}}),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-black/50 z-20",children:o.jsx("div",{className:"h-full transition-all duration-100",style:{width:`${Math.max(0,Math.min(100,K*100))}%`,background:"linear-gradient(90deg, #10b981, #3b82f6, #8b5cf6, #ec4899, #f59e0b)",boxShadow:"0 0 12px rgba(139,92,246,0.45)"}})})]}):o.jsx("img",{className:"w-full h-full object-contain",src:e.mediaUrl,alt:e.caption||e.text||"Post media"}):o.jsxs("div",{className:"text-white px-6 text-center max-w-md",children:[o.jsx("p",{className:"text-xl font-semibold mb-3",children:e.userHandle}),e.text&&o.jsx("p",{className:"whitespace-pre-line text-base opacity-90",children:e.text})]}),c&&o.jsxs("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 flex flex-col gap-3 pointer-events-none",children:[o.jsx("div",{className:"w-4 h-4",children:o.jsx("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{fill:"#ef4444",d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),o.jsx("div",{className:"w-3 h-3",children:o.jsx("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{fill:"#ef4444",d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),o.jsx("div",{className:"w-2.5 h-2.5",children:o.jsx("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{fill:"#ef4444",d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})})]}),o.jsx("div",{className:`absolute inset-0 flex items-center justify-center pointer-events-none z-20 ${H?"opacity-100":"opacity-0"}`,children:o.jsxs("div",{className:"relative",children:[o.jsx("svg",{className:"w-24 h-24 drop-shadow-lg animate-pulse transition-opacity duration-300",viewBox:"0 0 24 24",fill:"#ef4444",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})}),o.jsx("div",{className:`absolute inset-0 border-2 border-red-400 rounded-full transition-all duration-1000 ${H?"opacity-0 scale-150":"opacity-100 scale-100"}`}),o.jsx("div",{className:`absolute inset-0 border border-red-300 rounded-full transition-all duration-1200 delay-100 ${H?"opacity-0 scale-200":"opacity-100 scale-100"}`})]})})]}),o.jsxs("div",{className:"absolute right-4 bottom-32 z-20 flex flex-col items-center gap-6",onClick:X=>X.stopPropagation(),children:[o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx("button",{onClick:B,className:`p-3 rounded-full transition-all duration-200 ${c?"bg-white/20":"bg-black/30 hover:bg-black/50"}`,"aria-label":c?"Unlike":"Like",children:c?o.jsx(pc,{className:"text-red-500 w-6 h-6"}):o.jsx(_s,{className:"text-white w-6 h-6"})}),o.jsx("span",{className:"text-white text-xs font-semibold",children:f})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx("button",{onClick:Z,className:"p-3 rounded-full bg-black/30 hover:bg-black/50 transition-colors","aria-label":"Share",children:o.jsx(ka,{className:"text-white w-6 h-6"})}),o.jsx("span",{className:"text-white text-xs font-semibold",children:y})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx("button",{onClick:X=>P(X),disabled:e.userHandle===(Q==null?void 0:Q.handle)||k||E,className:`p-3 rounded-full transition-colors relative z-10 ${e.userHandle===(Q==null?void 0:Q.handle)||E?"opacity-30 cursor-not-allowed":k?"bg-green-500/20 hover:bg-green-500/30":"bg-black/30 hover:bg-black/50"}`,"aria-label":e.userHandle===(Q==null?void 0:Q.handle)?"Cannot reclip your own post":k?"Post already reclipped":"Reclip",title:e.userHandle===(Q==null?void 0:Q.handle)?"Cannot reclip your own post":k?"Post already reclipped":"Reclip",children:o.jsx(xd,{className:`w-6 h-6 ${k?"text-green-500":"text-white"}`})}),o.jsx("span",{className:"text-white text-xs font-semibold",children:v})]})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-10 bg-gradient-to-t from-black/90 via-black/70 to-transparent",children:o.jsxs("div",{className:"max-w-md mx-auto px-4 pr-16 pb-safe",children:[o.jsxs("div",{className:"pt-12 pb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx(gt,{name:e.userHandle.split("@")[0],size:"sm",className:"border-2 border-white"}),o.jsx("div",{className:"flex-1",children:o.jsx("button",{className:"text-white font-semibold text-sm hover:opacity-80",children:e.userHandle})}),!g&&o.jsx("button",{onClick:F,disabled:E,className:"px-4 py-1.5 bg-white text-black text-sm font-semibold rounded-md hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Following...":"Follow"}),g&&o.jsx("button",{onClick:F,disabled:E,className:"px-4 py-1.5 bg-white/10 text-white text-sm font-semibold rounded-md hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Unfollowing...":"Following"})]}),e.caption&&o.jsx("div",{className:"text-white text-sm mb-2 line-clamp-2",children:e.caption}),!e.mediaUrl&&e.text&&o.jsx("div",{className:"text-white text-sm opacity-90 whitespace-pre-line mb-2",children:e.text}),h>0&&o.jsxs("button",{onClick:a,className:"text-white text-xs opacity-80 hover:opacity-100 mb-3",children:["View all ",h," ",h===1?"comment":"comments"]})]}),o.jsx("div",{className:"pb-4",children:o.jsxs("form",{onSubmit:ee,className:"flex items-center gap-2",children:[o.jsx(gt,{src:Q==null?void 0:Q.avatarUrl,name:(Q==null?void 0:Q.name)||(Q==null?void 0:Q.handle)||"User",size:"sm",className:"border border-white/50"}),o.jsxs("div",{className:"relative flex-1 rounded-full",children:[!I&&o.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-full bg-gradient-to-r from-emerald-500 via-blue-500 to-violet-500 opacity-60 blur-sm animate-pulse"}),!I&&o.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-full overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(90deg, transparent, rgba(59,130,246,0.35), transparent)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}})}),o.jsx("input",{type:"text",value:I,onChange:X=>q(X.target.value),placeholder:"Add a comment...",className:"relative w-full px-4 py-2.5 rounded-full bg-white/10 backdrop-blur-sm border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50 focus:bg-white/15",disabled:A||!Q})]}),o.jsx("button",{type:"submit",disabled:!I.trim()||A||!Q,className:"px-4 py-2.5 text-white font-semibold text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-80 transition-opacity border-2 border-white rounded-full",children:A?"Posting...":"Post"})]})})]})})]}),M&&Cw.createPortal(o.jsx(vd,{post:e,isOpen:M,onClose:()=>{console.log("Closing ShareModal from Scenes"),U(!1)}}),document.body)]})):null}function $I({isOpen:e,onClose:t,onNavigate:n}){const{user:r}=Ke();if(!e)return null;const s=i=>{n(i),t()};return o.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-end animate-in fade-in duration-200",onClick:t,children:o.jsxs("div",{className:"w-full bg-white dark:bg-gray-950 rounded-t-3xl animate-in slide-in-from-bottom duration-300",onClick:i=>i.stopPropagation(),children:[o.jsxs("div",{className:"px-4 pt-4 pb-2",children:[o.jsx("div",{className:"h-1 w-12 bg-gray-300 dark:bg-gray-700 rounded-full mx-auto mb-4"}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Create"}),o.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:o.jsx(mt,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]})]}),o.jsxs("div",{className:"px-4 pb-6 space-y-3",children:[o.jsxs("button",{onClick:()=>s("/create/instant"),className:"w-full flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[o.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-tr from-red-500 via-pink-500 to-purple-600 p-0.5",children:o.jsx("div",{className:"w-full h-full rounded-full bg-gray-950 flex items-center justify-center",children:o.jsx(Ss,{className:"w-6 h-6 text-white"})})}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Instant Create"}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Open camera immediately and record a clip, then add filters"})]})]}),o.jsxs("button",{onClick:()=>s("/clip"),className:"w-full flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[o.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 p-0.5",children:o.jsx("div",{className:"w-full h-full rounded-full bg-gray-950 flex items-center justify-center",children:o.jsx(Ss,{className:"w-6 h-6 text-white"})})}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Create Clip"}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Share a photo or video that disappears after 24 hours"})]})]}),o.jsxs("button",{onClick:()=>s("/create"),className:"w-full flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[o.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center",children:o.jsx(yd,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Create Post"}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Share to your newsfeed with text, photos, or videos"})]})]}),o.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-800",children:o.jsxs("div",{className:"flex items-center gap-3 px-2 py-2",children:[o.jsx(gt,{src:r==null?void 0:r.avatarUrl,name:(r==null?void 0:r.name)||"User",size:"sm"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(r==null?void 0:r.name)||"User"}),o.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["@",(r==null?void 0:r.handle)||"user"]})]})]})})]})]})})}const UI={"Sarah@Artane":"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop","Liam@cork":"https://images.unsplash.com/photo-1607746882042-944635dfe10e?w=400&h=400&fit=crop","Ava@galway":"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400&h=400&fit=crop","Noah@london":"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=400&h=400&fit=crop"};function nr(e){if(e)return UI[e]||void 0}const zI={"Sarah@Artane":""};function c1(e){if(e)return zI[e]||void 0}function HI(e){const t=e.trim().toUpperCase();if(!/^[A-Z]{2}$/.test(t))return null;const n=127462,r=t.charCodeAt(0)-65,s=t.charCodeAt(1)-65;if(r<0||r>25||s<0||s>25)return null;const i=n+r,a=n+s;return`${i.toString(16)}-${a.toString(16)}`}function WI(e){if(!e)return null;const t=[];for(const n of Array.from(e)){const r=n.codePointAt(0);typeof r=="number"&&t.push(r)}return t.length<2?null:t.map(n=>n.toString(16)).join("-")}function VI(e){if(!e)return null;const t=e.trim();let n=null;return/^[A-Za-z]{2}$/.test(t)?n=HI(t):n=WI(t),n?`https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/${n}.svg`:null}function gc({value:e,size:t=18,className:n="",title:r}){if(!e)return null;const s=VI(e);return s?o.jsx("img",{src:s,width:t,height:t,className:n,alt:e,title:r||e,loading:"lazy",decoding:"async",style:{display:"inline-block"}}):o.jsx("span",{className:n,style:{fontSize:t},children:e})}function d1(e){const n=Date.now()-e,r=Math.floor(n/1e3);if(r<60)return"Just now";const s=Math.floor(r/60);if(s<60)return s===1?"1 minute ago":`${s} minutes ago`;const i=Math.floor(s/60);if(i<24)return i===1?"1 hour ago":`${i} hours ago`;const a=Math.floor(i/24);if(a<7)return a===1?"1 day ago":`${a} days ago`;const l=Math.floor(a/7);if(l<4)return l===1?"1 week ago":`${l} weeks ago`;const c=Math.floor(a/30);if(c<12)return c===1?"1 month ago":`${c} months ago`;const d=Math.floor(a/365);return d===1?"1 year ago":`${d} years ago`}let Hp=[{id:"ad-account-1",name:"Dublin Local Business",timezone:"Europe/Dublin",dailyBudget:100,currency:"EUR",lastBudgetReset:ia("Europe/Dublin"),createdAt:Date.now()-864e5*30},{id:"ad-account-2",name:"Global Brand",timezone:"America/New_York",dailyBudget:500,currency:"USD",lastBudgetReset:ia("America/New_York"),createdAt:Date.now()-864e5*60}],bd=[{id:"ad-1",adAccountId:"ad-account-1",advertiserHandle:"LocalCafe@Dublin",title:"Best Coffee in Dublin",description:"Visit us for the finest coffee experience",mediaUrl:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=800",mediaType:"image",callToAction:"Visit Website",linkUrl:"https://example.com",scheduledStart:Date.now()-36e5,scheduledEnd:Date.now()+864e5*7,createdAt:Date.now()-864e5,dailyBudget:50,spentToday:12.5,lastBudgetReset:ia("Europe/Dublin"),stats:{impressions:1250,clicks:45,conversions:8,spend:12.5},events:{impressions:[],clicks:[],conversions:[]},targetLocations:["Dublin","Ireland"],targetTags:["food","coffee"],isActive:!0}];function ia(e){const t=Date.now(),r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(new Date(t)),s=parseInt(r.find(y=>y.type==="year").value),i=parseInt(r.find(y=>y.type==="month").value)-1,a=parseInt(r.find(y=>y.type==="day").value),l=`${s}-${String(i+1).padStart(2,"0")}-${String(a).padStart(2,"0")}T00:00:00`,c=new Date(`${l}Z`),d=c.toLocaleString("en-US",{timeZone:e,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),[f,u,h]=d.split(":").map(Number),p=f*60*60*1e3+u*60*1e3+h*1e3;return c.getTime()-p}function u1(e){const t=e.timezone,n=ia(t);return e.lastBudgetReset<n}function f1(e){const t=Hp.find(r=>r.id===e);if(!t)throw new Error(`Ad account not found: ${e}`);const n=ia(t.timezone);return bd.forEach(r=>{r.adAccountId===e&&(r.spentToday=0,r.lastBudgetReset=n)}),t.lastBudgetReset=n,t}function qI(e){const t=Date.now();if(!e.isActive||e.scheduledStart&&t<e.scheduledStart||e.scheduledEnd&&t>e.scheduledEnd)return!1;const n=Hp.find(r=>r.id===e.adAccountId);return!(!n||(u1(n)&&f1(e.adAccountId),e.spentToday>=e.dailyBudget))}async function GI(e,t){const n=bd.find(i=>i.id===e);if(!n)throw new Error(`Ad not found: ${e}`);const r=Date.now();n.events.impressions.push(r),n.stats.impressions+=1;const s=.01;return n.spentToday+=s,n.stats.spend+=s,n}async function YI(e,t){const n=bd.find(i=>i.id===e);if(!n)throw new Error(`Ad not found: ${e}`);const r=Date.now();n.events.clicks.push(r),n.stats.clicks+=1;const s=.5;return n.spentToday+=s,n.stats.spend+=s,n}async function XI(e,t){return Hp.forEach(r=>{u1(r)&&f1(r.id)}),bd.filter(r=>!(!qI(r)||r.targetLocations&&r.targetLocations.length>0&&(!e||!r.targetLocations.some(s=>e.toLowerCase().includes(s.toLowerCase())))||r.targetTags&&r.targetTags.length>0&&(!t||!r.targetTags.some(s=>t.includes(s.toLowerCase()))))).sort((r,s)=>s.createdAt-r.createdAt)}let Xf=[];const KI=6*60*60*1e3;async function QI(e,t,n,r){const s=Date.now(),i=s+KI,a=Xf.find(c=>c.postId===e&&c.isActive);if(a)return a.feedType=n,a.price=r,a.activatedAt=s,a.expiresAt=i,a.isActive=!0,a;const l={postId:e,userId:t,feedType:n,price:r,activatedAt:s,expiresAt:i,isActive:!0};return Xf.push(l),l}async function kd(e){const t=Date.now(),n=Xf.find(r=>r.postId===e&&r.isActive&&r.expiresAt>t);return n&&n.expiresAt<=t?(n.isActive=!1,null):n||null}async function h1(e){const t=await kd(e);if(!t)return 0;const n=Date.now(),r=t.expiresAt-n;return Math.max(0,r)}const ny=[{type:"local",label:"Local Newsfeed",description:"Reach users in your local area",price:4.99,currency:"EUR",icon:o.jsx(Ft,{className:"w-6 h-6"}),audience:"Local audience"},{type:"regional",label:"Regional Newsfeed",description:"Reach a larger regional audience",price:6.99,currency:"EUR",icon:o.jsx(r1,{className:"w-6 h-6"}),audience:"Regional audience"},{type:"national",label:"National Newsfeed",description:"Maximum reach across the country",price:9.99,currency:"EUR",icon:o.jsx(e1,{className:"w-6 h-6"}),audience:"National audience"}];function JI({isOpen:e,post:t,onClose:n,onSelect:r}){const[s,i]=x.useState(null);if(!e||!t)return null;const a=c=>{i(c.type)},l=()=>{if(s){const c=ny.find(d=>d.type===s);c&&r(s,c.price)}};return o.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:n,children:o.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-950 rounded-2xl shadow-2xl animate-in slide-in-from-bottom duration-300 max-h-[90vh] overflow-y-auto",onClick:c=>c.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-950 border-b border-gray-200 dark:border-gray-800 px-6 pt-6 pb-4 rounded-t-2xl z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-100 dark:bg-brand-900 flex items-center justify-center",children:o.jsx(na,{className:"w-5 h-5 text-brand-600 dark:text-brand-400"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Boost Post"})]}),o.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:o.jsx(mt,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select a feed to boost your post. Your post will be promoted for ",o.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"6 hours"}),"."]})]}),o.jsx("div",{className:"px-6 py-4 space-y-3",children:ny.map(c=>{const d=s===c.type;return o.jsx("button",{onClick:()=>a(c),className:`w-full p-4 rounded-xl border-2 transition-all duration-200 text-left ${d?"border-brand-500 bg-brand-50 dark:bg-brand-900/20 shadow-lg scale-[1.02]":"border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 hover:border-brand-300 dark:hover:border-brand-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 transition-colors ${d?"bg-brand-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"}`,children:c.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:c.label}),o.jsx("div",{className:"flex items-baseline gap-1",children:o.jsxs("span",{className:"text-2xl font-bold text-brand-600 dark:text-brand-400",children:["",c.price.toFixed(2)]})})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:c.description}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:c.audience}),o.jsx("span",{className:"text-xs text-gray-400",children:""}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"6 hours boost"})]})]}),d&&o.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-500 flex items-center justify-center flex-shrink-0",children:o.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},c.type)})}),o.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-gray-950 border-t border-gray-200 dark:border-gray-800 px-6 py-4 rounded-b-2xl",children:[o.jsx("button",{onClick:l,disabled:!s,className:`w-full py-3 px-6 rounded-xl font-semibold text-white transition-all duration-200 ${s?"bg-brand-600 hover:bg-brand-700 dark:bg-brand-500 dark:hover:bg-brand-600 shadow-lg hover:shadow-xl active:scale-[0.98]":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed"}`,children:"Continue to Payment"}),o.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Your payment is secure and encrypted"})]})]})})}const qi=[];function Gi(e){return new Promise(t=>setTimeout(t,e))}async function ZI(e,t,n=!0){await Gi(200);const r={id:`collection-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,userId:e,name:t,isPrivate:n,postIds:[],createdAt:Date.now(),updatedAt:Date.now()};return qi.push(r),r}async function p1(e){return await Gi(100),qi.filter(n=>n.userId===e).map(n=>{if(n.postIds.length>0){const r=Te.find(s=>s.id===n.postIds[0]);r!=null&&r.mediaUrl&&(n.thumbnailUrl=r.mediaUrl)}return n}).sort((n,r)=>r.updatedAt-n.updatedAt)}async function ry(e,t){await Gi(150);const n=qi.find(r=>r.id===e);if(!n)throw new Error("Collection not found");if(!n.postIds.includes(t)&&(n.postIds.push(t),n.updatedAt=Date.now(),!n.thumbnailUrl)){const r=Te.find(s=>s.id===t);r!=null&&r.mediaUrl&&(n.thumbnailUrl=r.mediaUrl)}return n}async function eR(e,t){await Gi(150);const n=qi.find(r=>r.id===e);if(!n)throw new Error("Collection not found");if(n.postIds=n.postIds.filter(r=>r!==t),n.updatedAt=Date.now(),n.postIds.length===0)n.thumbnailUrl=void 0;else if(n.thumbnailUrl){const r=Te.find(s=>s.id===n.postIds[0]);r!=null&&r.mediaUrl&&(n.thumbnailUrl=r.mediaUrl)}return n}async function tR(e){await Gi(100);const t=qi.find(r=>r.id===e);if(!t)throw new Error("Collection not found");return t.postIds.map(r=>Te.find(s=>s.id===r)).filter(r=>r!==void 0).sort((r,s)=>s.createdAt-r.createdAt)}async function nR(e,t){return await Gi(100),qi.filter(n=>n.userId===e&&n.postIds.includes(t)).sort((n,r)=>r.updatedAt-n.updatedAt)}function rR({post:e,userId:t,isOpen:n,onClose:r,onSaved:s}){const[i,a]=x.useState([]),[l,c]=x.useState([]),[d,f]=x.useState(!1),[u,h]=x.useState(""),[p,y]=x.useState(!1),[w,v]=x.useState(null);x.useEffect(()=>{n&&t&&m()},[n,t,e.id]);async function m(){y(!0);try{const k=await p1(t);a(k);const T=await nR(t,e.id);c(T.map(E=>E.id))}catch(k){console.error("Error loading collections:",k)}finally{y(!1)}}async function g(){if(u.trim()){y(!0);try{const k=await ZI(t,u.trim(),!0);await ry(k.id,e.id),await m(),h(""),f(!1),s&&s()}catch(k){console.error("Error creating collection:",k)}finally{y(!1)}}}async function b(k){const T=l.includes(k);v(k);try{T?await eR(k,e.id):await ry(k,e.id),await m(),s&&s()}catch(E){console.error("Error toggling collection:",E)}finally{v(null)}}return n?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),o.jsxs("div",{className:"relative w-full bg-gray-800 dark:bg-gray-900 rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden flex flex-col animate-in slide-in-from-bottom duration-300",children:[o.jsx("div",{className:"flex justify-center pt-3 pb-2",children:o.jsx("div",{className:"w-12 h-1 bg-gray-600 dark:bg-gray-700 rounded-full"})}),o.jsxs("div",{className:"px-6 py-4 border-b border-gray-700 dark:border-gray-600 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Save Post"}),o.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors","aria-label":"Close",children:o.jsx(mt,{className:"w-5 h-5 text-gray-300"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl hover:bg-gray-700/50 dark:hover:bg-gray-600/50 transition-colors cursor-pointer",onClick:()=>{const k=i.find(T=>T.name==="Saved");k&&b(k.id)},children:[o.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-700 dark:bg-gray-600 flex items-center justify-center overflow-hidden flex-shrink-0",children:e.mediaUrl?o.jsx("img",{src:e.mediaUrl,alt:"Post thumbnail",className:"w-full h-full object-cover"}):o.jsx(hi,{className:"w-8 h-8 text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-white",children:"Saved"}),o.jsx("div",{className:"text-sm text-gray-400",children:"Private"})]}),l.length>0&&o.jsx(hi,{className:"w-5 h-5 text-yellow-400 fill-yellow-400 flex-shrink-0"})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Collections"}),o.jsx("button",{onClick:()=>f(!0),className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"New collection"})]}),d&&o.jsxs("div",{className:"mb-4 p-4 bg-gray-700/50 dark:bg-gray-600/50 rounded-xl",children:[o.jsx("input",{type:"text",value:u,onChange:k=>h(k.target.value),placeholder:"Collection name",className:"w-full px-4 py-2 bg-gray-600 dark:bg-gray-700 text-white placeholder-gray-400 rounded-lg border border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-3",autoFocus:!0,onKeyDown:k=>{k.key==="Enter"?g():k.key==="Escape"&&(f(!1),h(""))}}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:g,disabled:!u.trim()||p,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Create"}),o.jsx("button",{onClick:()=>{f(!1),h("")},className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg font-medium transition-colors",children:"Cancel"})]})]}),p&&i.length===0?o.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading collections..."}):i.length===0?o.jsx("div",{className:"text-center py-8 text-gray-400",children:"No collections yet. Create one to get started!"}):o.jsx("div",{className:"space-y-2",children:i.map(k=>{const T=l.includes(k.id),E=w===k.id;return o.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl hover:bg-gray-700/50 dark:hover:bg-gray-600/50 transition-colors",children:[o.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-700 dark:bg-gray-600 flex items-center justify-center overflow-hidden flex-shrink-0",children:k.thumbnailUrl?o.jsx("img",{src:k.thumbnailUrl,alt:k.name,className:"w-full h-full object-cover"}):o.jsx(hi,{className:"w-8 h-8 text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-white",children:k.name}),o.jsx("div",{className:"text-sm text-gray-400",children:k.isPrivate?"Private":"Public"})]}),o.jsx("button",{onClick:()=>b(k.id),disabled:E,className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors flex-shrink-0 ${T?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 hover:bg-gray-500"} disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":T?"Remove from collection":"Add to collection",children:E?o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):T?o.jsx(mt,{className:"w-5 h-5 text-white"}):o.jsx(G0,{className:"w-5 h-5 text-white"})})]},k.id)})})]}),o.jsxs("button",{onClick:()=>f(!0),className:"w-full py-4 rounded-full bg-gray-700 dark:bg-gray-600 hover:bg-gray-600 dark:hover:bg-gray-500 transition-colors flex items-center justify-center gap-2",children:[o.jsx(G0,{className:"w-6 h-6 text-white"}),o.jsx("span",{className:"text-white font-medium",children:"Add New Collection"})]})]})]})]}):null}function sR({onCreateClick:e}){const t=nt(),n=Kt(),r=(s,i,a,l)=>{const c=n.pathname===s;return o.jsxs("button",{onClick:l||(()=>t(s)),className:`flex flex-col items-center justify-center flex-1 py-2 ${c?"text-brand-600 font-semibold":"text-gray-500"} transition-colors`,"aria-current":c?"page":void 0,title:i,children:[a,o.jsx("span",{className:"text-xs mt-1",children:i})]})};return o.jsx("nav",{"aria-label":"Primary navigation",className:"fixed bottom-0 inset-x-0 bg-white dark:bg-gray-950 border-t border-gray-200 dark:border-gray-800 z-40 pb-safe",children:o.jsxs("div",{className:"mx-auto max-w-md flex",children:[r("/feed","Home",o.jsx(t1,{size:22})),r("/boost","Boost",o.jsx(na,{size:22})),r("/create","Create",o.jsx(sI,{size:22}),e),r("/search","Search",o.jsx(Fp,{size:22})),r("/profile","Profile",o.jsx(s1,{size:22}))]})})}function Wp(){const e=nt(),t=Kt(),[n,r]=x.useState("Ireland"),[s,i]=x.useState(null),[a,l]=x.useState(!1),c=s||n;return o.jsxs(o.Fragment,{children:[o.jsxs("main",{id:"main",className:"mx-auto max-w-md min-h-screen pb-[calc(64px+theme(spacing.safe))] md:shadow-card md:rounded-2xl md:border md:border-gray-200 md:dark:border-gray-800 md:bg-white md:dark:bg-gray-950",children:[o.jsx(mI,{activeTab:c,onLocationChange:i}),o.jsx(M_,{context:{activeTab:n,setActiveTab:r,customLocation:s,setCustomLocation:i}}),t.pathname!=="/discover"&&t.pathname!=="/create/filters"&&t.pathname!=="/create/instant"&&t.pathname!=="/payment"&&o.jsx(sR,{onCreateClick:()=>l(!0)})]}),o.jsx($I,{isOpen:a,onClose:()=>l(!1),onNavigate:d=>e(d)})]})}function iR(e){const t=["Finglas","Dublin","Ireland","Following"];return o.jsx("div",{role:"tablist","aria-label":"Locations",className:"grid grid-cols-4 gap-2 px-3",children:t.map(n=>{const r=e.active===n,s=`tab-${n}`,i=`panel-${n}`;return r?o.jsx("button",{id:s,role:"tab","aria-selected":r,"aria-controls":i,tabIndex:r?0:-1,onClick:a=>{var l;a.stopPropagation(),e.onChange(n),(l=e.onClearCustom)==null||l.call(e)},className:"rounded-lg p-[2px] animate-[shimmerGradient_3s_linear_infinite] transition-transform active:scale-[.98]",style:{background:"linear-gradient(to right, #2A1FC2, #1FC2C2, #000000, #2A1FC2, #1FC2C2, #000000)",backgroundSize:"400% 100%"},children:o.jsx("span",{className:"block rounded-md bg-gray-900 text-white text-sm py-2 font-medium",children:n})},n):o.jsx("button",{id:s,role:"tab","aria-selected":r,"aria-controls":i,tabIndex:r?0:-1,onClick:a=>{var l;a.stopPropagation(),e.onChange(n),(l=e.onClearCustom)==null||l.call(e)},className:`rounded-md border text-sm py-2 font-medium transition-transform active:scale-[.98]
              ${r?"bg-gray-900 text-white border-gray-900 dark:bg-white dark:text-gray-900 dark:border-white shadow-sm":"bg-white border-gray-300 text-gray-800 hover:bg-gray-50 dark:bg-gray-900 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-800"}`,children:n},n)})})}function oR({initial:e,onToggle:t}){const[n,r]=x.useState(e),[s,i]=x.useState(!1);async function a(){if(!s){i(!0),r(l=>!l);try{await t()}finally{i(!1)}}}return o.jsx("button",{onClick:a,disabled:s,"aria-pressed":n,"aria-label":n?"Unfollow user":"Follow user",title:n?"Unfollow":"Follow",className:`px-4 py-2 rounded-lg text-sm font-semibold disabled:opacity-60 transition-all duration-200 active:scale-[.98]
        ${n?"bg-gray-100 border border-gray-300 text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200":"bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600"}`,children:n?"Following":"Follow +"})}function aR({postId:e,onBoost:t}){const[n,r]=x.useState(!1),[s,i]=x.useState(!1),[a,l]=x.useState(0);x.useEffect(()=>{async function f(){const h=await kd(e);if(h&&h.isActive){i(!0);const p=await h1(e);l(p)}else i(!1),l(0)}f();const u=setInterval(()=>{f()},6e4);return()=>clearInterval(u)},[e]);const c=f=>{if(f<=0)return"";const u=Math.floor(f/(1e3*60*60)),h=Math.floor(f%(1e3*60*60)/(1e3*60));return u>0?`${u}h ${h}m`:`${h}m`};async function d(){if(!(n||s)){r(!0);try{await t()}finally{r(!1)}}}return s?o.jsxs("button",{disabled:!0,"aria-label":"Post is boosted",title:`Boosted - ${c(a)} remaining`,className:"px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-200 bg-red-600 text-white dark:bg-red-500 flex items-center gap-2 cursor-not-allowed",children:[o.jsx(na,{className:"w-4 h-4"}),o.jsx("span",{children:"Boosted"})]}):o.jsxs("button",{onClick:d,disabled:n,"aria-label":"Boost post",title:"Boost this post",className:"px-4 py-2 rounded-lg text-sm font-semibold disabled:opacity-60 transition-all duration-200 active:scale-[.98] bg-brand-600 text-white hover:bg-brand-700 dark:bg-brand-500 dark:hover:bg-brand-600 flex items-center gap-2",children:[o.jsx(na,{className:"w-4 h-4"}),o.jsx("span",{children:"Boost"})]})}function lR({post:e,onFollow:t,showBoostIcon:n,onBoost:r}){const{user:s}=Ke(),i=nt(),[a,l]=x.useState(!1),c=`post-title-${e.id}`,d=(s==null?void 0:s.handle)===e.userHandle,f=d?s==null?void 0:s.avatarUrl:void 0;x.useEffect(()=>{async function p(){try{let y;d?y=await Yf(e.userHandle):y=await pu(e.userHandle),l(y)}catch(y){console.error("Error checking story:",y)}}p()},[e.userHandle,d]),x.useEffect(()=>{function p(w){var v;((v=w.detail)==null?void 0:v.userHandle)===e.userHandle&&pu(e.userHandle).then(l).catch(console.error)}function y(w){var v;((v=w.detail)==null?void 0:v.userHandle)===e.userHandle&&(d?Yf(e.userHandle).then(l).catch(console.error):pu(e.userHandle).then(l).catch(console.error))}return window.addEventListener("storiesViewed",p),window.addEventListener("storyCreated",y),()=>{window.removeEventListener("storiesViewed",p),window.removeEventListener("storyCreated",y)}},[e.userHandle,d]);const u=()=>{a&&i("/stories",{state:{openUserHandle:e.userHandle}})},h=e.isReclipped&&e.originalUserHandle;return o.jsxs("div",{className:"flex items-start justify-between px-4 pt-4 pb-3",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 rounded-full opacity-75 blur-sm"}),o.jsx(gt,{src:f,name:e.userHandle.split("@")[0],size:"sm",hasStory:a,onClick:a?u:void 0})]}),o.jsxs("div",{className:"flex-1",onClick:p=>p.stopPropagation(),children:[h&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 flex items-center gap-1",children:[o.jsx(xd,{className:"w-3 h-3"}),o.jsxs("span",{children:[e.userHandle," reclipped"]})]}),o.jsxs("button",{onClick:p=>{p.stopPropagation(),i(`/user/${h?e.originalUserHandle:e.userHandle}`)},className:"text-left hover:opacity-70 transition-opacity w-full",children:[o.jsxs("h3",{id:c,className:"font-semibold flex items-center gap-1.5 text-gray-900 dark:text-gray-100",children:[o.jsx("span",{children:h?e.originalUserHandle:e.userHandle}),o.jsx(gc,{value:d?(s==null?void 0:s.countryFlag)||"":c1(h?e.originalUserHandle:e.userHandle)||"",size:16})]}),o.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center gap-2 mt-0.5",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ft,{className:"w-3 h-3"}),e.locationLabel||"No location set"]}),e.createdAt&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-gray-400",children:""}),o.jsx("span",{children:d1(e.createdAt)})]})]})]})]})]}),n&&d&&r?o.jsx(aR,{postId:e.id,onBoost:r}):!d&&t?o.jsx(oR,{initial:e.isFollowing,onToggle:t}):null]})}function cR({tags:e}){return e.length===0?null:o.jsx("div",{className:"flex flex-wrap gap-2 px-4 pb-3",children:e.slice(0,5).map((t,n)=>o.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 text-purple-700 dark:text-purple-300 border border-purple-200/50 dark:border-purple-700/50",children:["#",t]},n))})}function dR({text:e,onDoubleLike:t}){const[n,r]=x.useState(!1),[s,i]=x.useState(!1),a=x.useRef(0),l=x.useRef(!1),c=e.length>100,d=c&&!s?e.substring(0,100)+"...":e,f=["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#1e293b","#0f172a","#1a202c"],u=e.length%f.length,h=f[u];async function p(){const m=Date.now();if(m-a.current<300){r(!0);try{await t()}finally{setTimeout(()=>r(!1),600)}}a.current=m}function y(m){l.current=!0,p(),setTimeout(()=>{l.current=!1},300)}function w(m){if(l.current){m.preventDefault();return}p()}function v(m){m.stopPropagation(),i(!s)}return o.jsx("div",{className:"mx-4 mt-4 select-none",children:o.jsxs("div",{role:"button",tabIndex:0,"aria-label":"Double tap or press to like",onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),t())},onClick:w,onTouchEnd:y,className:"relative p-6 rounded-2xl min-h-[120px] flex items-center justify-center shadow-2xl hover:shadow-3xl transition-all duration-300",style:{background:h,boxShadow:`0 0 30px ${h}40, 0 0 60px ${h}20`},children:[o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xl text-white leading-relaxed whitespace-pre-wrap font-bold drop-shadow-lg",children:d}),c&&o.jsx("div",{className:"mt-3 flex justify-center",children:o.jsx("button",{onClick:v,className:"px-4 py-2 bg-black bg-opacity-50 rounded-full text-white text-sm font-medium hover:bg-opacity-70 transition-all duration-200 hover:scale-105","aria-label":s?"Show less":"Show more",children:s?"Show less":"Show more"})})]}),o.jsx("div",{className:`absolute inset-0 flex items-center justify-center pointer-events-none transition-all duration-300 ${n?"opacity-100 scale-100":"opacity-0 scale-50"}`,children:o.jsxs("div",{className:"relative",children:[o.jsx("svg",{className:"w-20 h-20 text-red-500 drop-shadow-lg animate-pulse",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})}),o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:`absolute top-2 left-2 w-4 h-4 text-red-400 transition-all duration-500 ${n?"opacity-100 translate-y-[-20px]":"opacity-0 translate-y-0"}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),o.jsx("div",{className:`absolute top-4 right-2 w-3 h-3 text-red-300 transition-all duration-700 delay-100 ${n?"opacity-100 translate-y-[-25px] translate-x-[10px]":"opacity-0 translate-y-0 translate-x-0"}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),o.jsx("div",{className:`absolute bottom-2 left-4 w-2 h-2 text-red-200 transition-all duration-600 delay-200 ${n?"opacity-100 translate-y-[-15px] translate-x-[-8px]":"opacity-0 translate-y-0 translate-x-0"}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),o.jsx("div",{className:`absolute bottom-4 right-4 w-3 h-3 text-red-400 transition-all duration-500 delay-150 ${n?"opacity-100 translate-y-[-20px] translate-x-[5px]":"opacity-0 translate-y-0 translate-x-0"}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})})]}),o.jsx("div",{className:`absolute inset-0 border-2 border-red-400 rounded-full transition-all duration-1000 ${n?"opacity-0 scale-150":"opacity-100 scale-100"}`}),o.jsx("div",{className:`absolute inset-0 border border-red-300 rounded-full transition-all duration-1200 delay-100 ${n?"opacity-0 scale-200":"opacity-100 scale-100"}`})]})})]})})}function uR({caption:e}){const[t,n]=x.useState(!1),r=100;if(e.length<=r)return o.jsx("div",{className:"text-gray-900 dark:text-gray-100 text-sm leading-relaxed",children:e});const s=t?e:e.substring(0,r)+"...";return o.jsxs("div",{className:"text-gray-900 dark:text-gray-100 text-sm leading-relaxed",children:[s,o.jsx("button",{onClick:()=>n(!t),className:"mt-2 text-white text-xs font-medium hover:underline focus:outline-none focus:ring-0 focus:border-0 ml-2",children:t?"Show less":"Show more"})]})}function m1({url:e,mediaType:t,text:n,imageText:r,onDoubleLike:s,onOpenScenes:i}){const[a,l]=x.useState(!1),[c,d]=x.useState(!1),[f,u]=x.useState(!0),[h,p]=x.useState(!1),[y,w]=x.useState(!1),[v,m]=x.useState(!0),[g,b]=x.useState(0),k=x.useRef(0),T=x.useRef(!1),E=x.useRef(null),S=x.useRef(null),I=()=>{E.current&&(E.current.paused?(E.current.play().catch(Y=>{console.error("Error playing video:",Y)}),d(!0),w(!1)):(E.current.pause(),d(!1),w(!0)))},q=Y=>{Y.stopPropagation();const $=Date.now();$-k.current<300?(l(!0),s().finally(()=>{setTimeout(()=>l(!1),600)})):I(),k.current=$},A=Y=>{Y.stopPropagation();const $=Date.now();$-k.current<300?(l(!0),s().finally(()=>{setTimeout(()=>l(!1),600)})):I(),k.current=$},N=Y=>{Y.stopPropagation(),E.current&&(E.current.muted=!E.current.muted,m(E.current.muted))};x.useEffect(()=>(t==="video"&&E.current&&(S.current=new IntersectionObserver(Y=>{Y.forEach($=>{$.isIntersecting?E.current&&(E.current.play().catch(Q=>{console.error("Error playing video:",Q)}),d(!0)):E.current&&(E.current.pause(),d(!1),w(!1))})},{threshold:.5}),S.current.observe(E.current)),()=>{S.current&&S.current.disconnect()}),[t]);const H=()=>{u(!1),p(!1)},L=()=>{u(!1),p(!0)},M=()=>{d(!0),w(!1)},U=()=>{d(!1),w(!0)};async function K(){const Y=Date.now();if(Y-k.current<300){l(!0);try{await s()}finally{setTimeout(()=>l(!1),600)}}k.current=Y}function re(Y){T.current=!0,K(),setTimeout(()=>{T.current=!1},300)}function D(Y){if(T.current){Y.preventDefault();return}K()}return n&&!e?o.jsx(dR,{text:n,onDoubleLike:s}):o.jsx("div",{className:"mx-4 my-4 select-none",children:o.jsxs("div",{role:"button",tabIndex:0,"aria-label":"Open media. Double tap or press to like",onKeyDown:Y=>{(Y.key==="Enter"||Y.key===" ")&&(Y.preventDefault(),s())},onClick:D,onTouchEnd:re,className:"relative w-full aspect-video rounded-xl overflow-hidden bg-gray-50 dark:bg-gray-900 shadow-inner",children:[t==="video"?o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:E,src:e,className:"absolute inset-0 w-full h-full object-cover",preload:"metadata",playsInline:!0,muted:v,loop:!0,onClick:q,onTouchEnd:A,onLoadedData:H,onError:L,onPlay:M,onPause:U,onTimeUpdate:()=>{const Y=E.current;Y&&Y.duration>0&&b(Y.currentTime/Y.duration)}}),f&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:o.jsx("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"})}),h&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75",children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"text-2xl mb-2",children:""}),o.jsx("div",{className:"text-sm",children:"Failed to load video"})]})}),!f&&!h&&o.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-300 ${y||!c?"opacity-100":"opacity-0"}`,onClick:q,onTouchEnd:A,children:o.jsx("div",{className:`w-16 h-16 bg-black bg-opacity-60 rounded-full flex items-center justify-center transition-all duration-300 hover:bg-opacity-80 hover:scale-110 active:scale-95 ${c?"hover:animate-[pauseButtonGlow_1.5s_ease-out_infinite]":"animate-[playButtonPulse_2s_ease-in-out_infinite] hover:animate-none"}`,children:c?o.jsxs("div",{className:"relative",children:[o.jsx("svg",{className:"w-8 h-8 text-white transition-all duration-200 hover:scale-110 hover:animate-[iconBounce_0.6s_ease-in-out]",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}),o.jsx("div",{className:"absolute inset-0 w-8 h-8 bg-white opacity-20 rounded-full blur-sm scale-150 animate-ping"})]}):o.jsxs("div",{className:"relative",children:[o.jsx("svg",{className:"w-8 h-8 text-white ml-1 transition-all duration-200 hover:scale-110 hover:animate-[iconBounce_0.6s_ease-in-out]",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M8 5v14l11-7z"})}),o.jsx("div",{className:"absolute inset-0 w-8 h-8 bg-white opacity-20 rounded-full blur-sm scale-150 animate-ping"})]})})}),!f&&!h&&o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx("button",{onClick:N,className:"w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all duration-200","aria-label":v?"Unmute video":"Mute video",children:v?o.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"})}):o.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"})})})}),i&&!f&&!h&&o.jsx("div",{className:"absolute bottom-4 right-4 flex items-center gap-2",children:o.jsx("button",{onClick:i,"aria-label":"Open in Scenes fullscreen",title:"Fullscreen",className:"w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all duration-200",children:o.jsx(W0,{className:"w-5 h-5 text-white"})})}),!f&&!h&&o.jsx("div",{className:"absolute left-0 right-0 bottom-0 h-1.5 bg-black/30",children:o.jsx("div",{className:"h-full",style:{width:`${Math.max(0,Math.min(100,g*100))}%`,background:"linear-gradient(90deg, #10b981, #3b82f6, #8b5cf6, #ec4899, #f59e0b)",boxShadow:"0 0 12px rgba(139,92,246,0.45)"}})})]}):o.jsxs(o.Fragment,{children:[o.jsx("img",{src:e,alt:"",loading:"lazy",decoding:"async",className:"absolute inset-0 w-full h-full object-cover",draggable:!1}),i&&o.jsx("div",{className:"absolute bottom-4 right-4",children:o.jsx("button",{onClick:i,"aria-label":"Open in Scenes fullscreen",title:"Fullscreen",className:"w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all duration-200",children:o.jsx(W0,{className:"w-5 h-5 text-white"})})})]}),r&&t==="image"&&o.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:o.jsx("div",{className:"px-3 py-2 text-lg font-bold drop-shadow-lg",style:{background:"linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3)",backgroundSize:"300% 300%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"gradientShift 3s ease-in-out infinite"},children:r})}),o.jsx("div",{className:`absolute inset-0 flex items-center justify-center pointer-events-none transition-all duration-300 ${a?"opacity-100 scale-100":"opacity-0 scale-50"}`,children:o.jsxs("div",{className:"relative",children:[o.jsx("svg",{className:"w-20 h-20 text-red-500 drop-shadow-lg animate-pulse",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})}),o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:`absolute top-2 left-2 w-4 h-4 text-red-400 transition-all duration-500 ${a?"opacity-100 translate-y-[-20px]":"opacity-0 translate-y-0"}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),o.jsx("div",{className:`absolute top-4 right-2 w-3 h-3 text-red-300 transition-all duration-700 delay-100 ${a?"opacity-100 translate-y-[-25px] translate-x-[10px]":"opacity-0 translate-y-0 translate-x-0"}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),o.jsx("div",{className:`absolute bottom-2 left-4 w-2 h-2 text-red-200 transition-all duration-600 delay-200 ${a?"opacity-100 translate-y-[-15px] translate-x-[-8px]":"opacity-0 translate-y-0 translate-x-0"}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),o.jsx("div",{className:`absolute bottom-4 right-4 w-3 h-3 text-red-400 transition-all duration-500 delay-150 ${a?"opacity-100 translate-y-[-20px] translate-x-[5px]":"opacity-0 translate-y-0 translate-x-0"}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})})]}),o.jsx("div",{className:`absolute inset-0 border-2 border-red-400 rounded-full transition-all duration-1000 ${a?"opacity-0 scale-150":"opacity-100 scale-100"}`}),o.jsx("div",{className:`absolute inset-0 border border-red-300 rounded-full transition-all duration-1200 delay-100 ${a?"opacity-0 scale-200":"opacity-100 scale-100"}`})]})})]})})}function fR({post:e,onLike:t,onShare:n,onOpenComments:r,onReclip:s,onSave:i,currentUserHandle:a,showMetricsIcon:l,onToggleMetrics:c,isMetricsOpen:d}){const[f,u]=x.useState(e.userLiked),[h,p]=x.useState(e.stats.likes),[y,w]=x.useState(e.stats.views),[v,m]=x.useState(e.stats.comments),[g,b]=x.useState(e.stats.shares),[k,T]=x.useState(e.stats.reclips),[E,S]=x.useState(e.userReclipped||!1),[I,q]=x.useState(!1);x.useEffect(()=>{u(e.userLiked),p(e.stats.likes),w(e.stats.views),m(e.stats.comments),b(e.stats.shares),T(e.stats.reclips),S(e.userReclipped||!1)},[e.userLiked,e.stats.likes,e.stats.views,e.stats.comments,e.stats.shares,e.stats.reclips,e.userReclipped]),x.useEffect(()=>{const L=()=>{m(D=>D+1)},M=()=>{b(D=>D+1)},U=()=>{T(D=>D+1)},K=()=>{w(D=>D+1)},re=D=>{u(D.detail.liked),p(D.detail.likes)};return window.addEventListener(`commentAdded-${e.id}`,L),window.addEventListener(`shareAdded-${e.id}`,M),window.addEventListener(`reclipAdded-${e.id}`,U),window.addEventListener(`viewAdded-${e.id}`,K),window.addEventListener(`likeToggled-${e.id}`,re),()=>{window.removeEventListener(`commentAdded-${e.id}`,L),window.removeEventListener(`shareAdded-${e.id}`,M),window.removeEventListener(`reclipAdded-${e.id}`,U),window.removeEventListener(`viewAdded-${e.id}`,K),window.removeEventListener(`likeToggled-${e.id}`,re)}},[e.id]);async function A(){if(!I){q(!0);try{await t()}finally{q(!1)}}}async function N(){if(!I){q(!0);try{await s()}finally{q(!1)}}}async function H(){if(!I){q(!0);try{await n()}finally{q(!1)}}}return o.jsx("div",{className:"px-4 pb-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("button",{className:"flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50",onClick:A,"aria-pressed":f,"aria-label":f?"Unlike":"Like",title:f?"Unlike":"Like",children:[f?o.jsx(pc,{className:"text-red-500 w-5 h-5"}):o.jsx(_s,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:h})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zb,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:y})]}),o.jsxs("button",{className:"flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50",onClick:r,"aria-label":"Comments",title:"Comments",children:[o.jsx(Op,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:v})]}),o.jsxs("button",{className:"flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50",onClick:H,"aria-label":"Share post",title:"Share post",children:[o.jsx(ka,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:g})]}),o.jsxs("button",{className:`flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50 ${e.userHandle===a?"opacity-30 cursor-not-allowed":""}`,onClick:N,disabled:e.userHandle===a,"aria-label":e.userHandle===a?"Cannot reclip your own post":"Reclip post",title:e.userHandle===a?"Cannot reclip your own post":"Reclip post",children:[o.jsx(xd,{className:`w-5 h-5 ${E?"text-green-500":"text-gray-600 dark:text-gray-400"}`}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:k})]}),l&&c&&o.jsx("button",{className:"flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50",onClick:c,"aria-label":"Toggle metrics",title:"View metrics",children:o.jsx(Y6,{className:`w-5 h-5 transition-colors ${d?"text-brand-600 dark:text-brand-400":"text-gray-600 dark:text-gray-400"}`})})]}),i&&o.jsx("button",{className:"transition-opacity hover:opacity-70 active:opacity-50",onClick:i,"aria-label":"Save post",title:"Save post",children:o.jsx(hi,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})})}function hR({post:e,isOpen:t}){const[n,r]=x.useState(!1),[s,i]=x.useState(0),[a,l]=x.useState("");x.useEffect(()=>{async function d(){const u=await kd(e.id);if(u&&u.isActive){r(!0);const h=await h1(e.id);switch(i(h),u.feedType){case"local":l("Local Newsfeed");break;case"regional":l("Regional Newsfeed");break;case"national":l("National Newsfeed");break}}else r(!1)}d();const f=setInterval(d,6e4);return()=>clearInterval(f)},[e.id]);const c=d=>{if(d<=0)return"";const f=Math.floor(d/(1e3*60*60)),u=Math.floor(d%(1e3*60*60)/(1e3*60));return f>0?`${f}h ${u}m`:`${u}m`};return n?o.jsxs("div",{className:`mx-4 mb-4 p-4 bg-white dark:bg-gray-900 rounded-xl border-2 border-brand-200 dark:border-brand-800 transition-all duration-300 overflow-hidden shadow-sm ${t?"max-h-[500px] opacity-100":"max-h-0 opacity-0 p-0 mb-0"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(r1,{className:"w-5 h-5 text-brand-600 dark:text-brand-400"}),o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Boost Metrics"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[o.jsx("span",{className:"px-2 py-1 bg-brand-100 dark:bg-brand-900 rounded-full text-brand-700 dark:text-brand-300 font-medium",children:a}),o.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:[c(s)," left"]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx(Zb,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-medium",children:"Views"})]}),o.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.views.toLocaleString()})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx(_s,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-medium",children:"Likes"})]}),o.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.likes.toLocaleString()})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx(Op,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-medium",children:"Comments"})]}),o.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.comments.toLocaleString()})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx(ka,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-medium",children:"Shares"})]}),o.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.shares.toLocaleString()})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx(xd,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-medium",children:"Reclips"})]}),o.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.reclips.toLocaleString()})]})]})]}):null}const Vp=x.memo(function({post:t,onLike:n,onFollow:r,onShare:s,onOpenComments:i,onView:a,onReclip:l,onOpenScenes:c,showBoostIcon:d,onBoost:f}){const{user:u}=Ke(),h=`post-title-${t.id}`,[p,y]=x.useState(!1),[w,v]=x.useState(!1),[m,g]=x.useState(!1),[b,k]=x.useState(!1),T=x.useRef(null);return x.useEffect(()=>{async function E(){const S=await kd(t.id);g(S!==null&&S.isActive)}if(d){E();const S=setInterval(E,6e4);return()=>clearInterval(S)}},[t.id,d]),x.useEffect(()=>{if(p)return;const E=new IntersectionObserver(S=>{S.forEach(I=>{I.isIntersecting&&!p&&(y(!0),E.disconnect(),a())})},{threshold:.5});return T.current&&E.observe(T.current),()=>E.disconnect()},[p]),o.jsxs("article",{ref:T,"aria-labelledby":h,className:"mx-4 mb-6 rounded-lg overflow-hidden bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 animate-[cardBounce_0.6s_ease-out]",children:[o.jsx(lR,{post:t,onFollow:r,showBoostIcon:d,onBoost:f}),o.jsx(cR,{tags:t.tags}),o.jsx("div",{className:"relative",children:o.jsx(m1,{url:t.mediaUrl,mediaType:t.mediaType,text:t.text,imageText:t.imageText,onDoubleLike:n,onOpenScenes:c})}),t.caption&&t.mediaUrl&&o.jsx("div",{className:"px-4 py-3",children:o.jsx(uR,{caption:t.caption})}),o.jsx(fR,{post:t,onLike:n,onShare:s,onOpenComments:i,onReclip:l,onSave:u?()=>k(!0):void 0,currentUserHandle:u==null?void 0:u.handle,showMetricsIcon:d&&m,onToggleMetrics:()=>v(!w),isMetricsOpen:w}),d&&o.jsx(hR,{post:t,isOpen:w}),u&&o.jsx(rR,{post:t,userId:u.id,isOpen:b,onClose:()=>k(!1)})]})}),pR=x.memo(function({ad:t,onImpression:n,onClick:r}){const s=`ad-title-${t.id}`,[i,a]=x.useState(!1),l=x.useRef(null);x.useEffect(()=>{if(i)return;const d=new IntersectionObserver(f=>{f.forEach(u=>{u.isIntersecting&&!i&&(a(!0),d.disconnect(),n())})},{threshold:.5});return l.current&&d.observe(l.current),()=>d.disconnect()},[i,n]);const c=async()=>{await r(),t.linkUrl&&window.open(t.linkUrl,"_blank","noopener,noreferrer")};return o.jsxs("article",{ref:l,"aria-labelledby":s,className:"mx-4 mb-6 rounded-lg overflow-hidden bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 animate-[cardBounce_0.6s_ease-out]",children:[o.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Sponsored"}),o.jsx("span",{className:"text-xs text-gray-400",children:""}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:t.advertiserHandle})]}),t.createdAt&&o.jsx("span",{className:"text-xs text-gray-400",children:d1(t.createdAt)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(m1,{url:t.mediaUrl,mediaType:t.mediaType,onDoubleLike:async()=>{},onOpenScenes:()=>{}}),o.jsx("button",{onClick:c,className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-brand-600 hover:bg-brand-700 text-white px-6 py-2 rounded-full font-semibold shadow-lg transition-colors",children:t.callToAction||"Learn More"})]}),t.description&&o.jsxs("div",{className:"px-4 py-3",children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:t.title}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:t.description})]})]})});function g1(){const{user:e}=Ke(),t=(e==null?void 0:e.id)??"anon",n=Sa(),r=Kt(),s=x.useRef(0),[i,a]=x.useState("Ireland"),[l,c]=x.useState(null),[d,f]=x.useState([]),[u,h]=x.useState([]),[p,y]=x.useState(0),[w,v]=x.useState(!1),[m,g]=x.useState(!1),[b,k]=x.useState(null),[T,E]=x.useState(!1),[S,I]=x.useState(null),[q,A]=x.useState(!1),[N,H]=x.useState(null),[L,M]=x.useState(!1),[U,K]=x.useState(null),re=l||i;x.useEffect(()=>{const R=new URLSearchParams(r.search).get("location");console.log("URL params changed, location param:",R,"current customLocation:",l),R?(console.log("URL provided location:",R,"setting customLocation..."),console.log("About to call setCustomLocation, will update from:",l,"to:",R),c(R),console.log("setCustomLocation called, customLocation should now be:",R),f([]),y(0),g(!1),k(null)):l&&(console.log("URL param cleared, clearing customLocation..."),c(null),f([]),y(0),g(!1),k(null))},[r.search,l]),x.useEffect(()=>{f([]),y(0),g(!1),console.log("Location changed to:",re,"customLocation:",l,"active:",i,"computed currentFilter:",re),s.current++,re.toLowerCase()},[t,re]),x.useEffect(()=>{const C=J=>{const F=J.detail.location;console.log("Feed received location change:",F),c(F),f([]),y(0),g(!1),k(null),window.location.pathname!=="/feed"&&(console.log("Navigating to feed page..."),window.dispatchEvent(new PopStateEvent("popstate")))};window.addEventListener("locationChange",C);const R=sessionStorage.getItem("pendingLocation");return console.log("Checking for pending location, found:",R),R&&(console.log("Feed found pending location:",R,"setting customLocation..."),sessionStorage.removeItem("pendingLocation"),setTimeout(()=>{console.log("Actually setting customLocation to:",R),c(R),f([]),y(0),g(!1),k(null)},100)),()=>window.removeEventListener("locationChange",C)},[]),x.useEffect(()=>{n&&TI(async C=>{C.type==="like"&&await hs(C.userId,C.postId),C.type==="follow"&&await mi(C.userId,C.postId),C.type==="comment"&&await $p(C.postId,C.userId,C.text),C.type==="view"&&await mc(C.userId,C.postId),C.type==="share"&&await xI(C.userId,C.postId),C.type==="reclip"&&await Io(C.userId,C.postId,C.userHandle)})},[n]);const D=C=>{I(C),E(!0)},Y=()=>{E(!1),I(null)};async function $(){if(console.log("loadMore called with:",{loading:w,end:m,cursor:p,currentFilter:re,customLocation:l,active:i}),w||m||p===null){console.log("loadMore early return:",{loading:w,end:m,cursor:p});return}v(!0),k(null);try{s.current++;const C=re;console.log("=== ABOUT TO FETCH POSTS ==="),console.log("currentFilter:",re),console.log("customLocation:",l),console.log("active:",i),console.log("Calling fetchPostsPage with filter:",re);const R=await _l(C,p,5,t,(e==null?void 0:e.local)||"",(e==null?void 0:e.regional)||"",(e==null?void 0:e.national)||"");if(console.log("fetchPostsPage returned:",{itemsCount:R.items.length,nextCursor:R.nextCursor}),C!==re){console.warn("Dropping stale page for filter",C,"current filter is now:",re);return}f(J=>{const F=p===0?[R.items]:[...J,R.items];return console.log("Setting pages:",{prevLength:J.length,newLength:F.length,cursor:p,isFirstPage:p===0,filterForRequest:C,currentFilter:re,pageItemsCount:R.items.length}),F}),y(R.nextCursor),g(R.nextCursor===null)}catch(C){console.error("loadMore error:",C),k((C==null?void 0:C.message)??"Failed to load posts.")}finally{v(!1)}}const Q=x.useRef(null);x.useEffect(()=>{console.log("Setting up postCreated event listener");const C=()=>{console.log("PostCreated event received - refreshing feed"),console.log("Current filter:",re),console.log("User data:",{userId:t,userLocal:e==null?void 0:e.local,userRegional:e==null?void 0:e.regional,userNational:e==null?void 0:e.national}),f([]),y(0),g(!1),v(!1),k(null),Q.current=null,console.log("About to call loadMore from handlePostCreated"),$()};return window.addEventListener("postCreated",C),console.log("postCreated event listener added"),()=>{console.log("Removing postCreated event listener"),window.removeEventListener("postCreated",C)}},[re,t,e]),x.useEffect(()=>{if(d.length===0||w||window.location.pathname!=="/feed")return;const C=d.flat();if(C.length>0){const J=C[0].id;(Q.current===null||J!==Q.current)&&(Q.current=J)}const R=setInterval(async()=>{if(!(w||m||window.location.pathname!=="/feed"))try{const J=await _l(re,0,5,t,(e==null?void 0:e.local)||"",(e==null?void 0:e.regional)||"",(e==null?void 0:e.national)||"");if(J.items.length>0){const F=J.items[0].id;if(Q.current===null||F!==Q.current){console.log("New posts detected! Refreshing feed...",{newestPostId:F,currentLatest:Q.current}),Q.current=F,f([]),y(0),g(!1),v(!1),k(null);const P=await _l(re,0,5,t,(e==null?void 0:e.local)||"",(e==null?void 0:e.regional)||"",(e==null?void 0:e.national)||"");f([P.items]),y(P.nextCursor),g(P.nextCursor===null),window.scrollTo({top:0,behavior:"smooth"})}}}catch(J){console.error("Error polling for new posts:",J)}},1e4);return()=>clearInterval(R)},[d.length,w,m,re,t,e==null?void 0:e.local,e==null?void 0:e.regional,e==null?void 0:e.national]),x.useEffect(()=>{console.log("Initial load effect triggered:",{cursor:p,pagesLength:d.length,currentFilter:re});const R=new URLSearchParams(r.search).get("location");if(R&&!l){console.log("Deferring initial load until customLocation is applied for URL location:",R);return}p!==null&&d.length===0&&(console.log("Calling loadMore from initial load effect"),$())},[p,re,r.search,l]);function fe(C,R){console.log("updateOne called for post:",C),f(J=>{const F=J.map(ee=>ee.map(X=>X.id===C?(console.log("Updating post:",C,"from likes:",X.stats.likes,"to:",R({...X}).stats.likes),R({...X})):X)),Z=F.flat(),P=Z.filter((ee,X)=>Z.findIndex(le=>le.id===ee.id)!==X);return P.length>0&&console.error("DUPLICATES AFTER UPDATE:",P.map(ee=>ee.id)),F})}x.useEffect(()=>{async function C(){try{const R=(e==null?void 0:e.local)||(e==null?void 0:e.regional)||(e==null?void 0:e.national)||"",F=await XI(R,[]);h(F)}catch(R){console.error("Error loading ads:",R)}}e&&C()},[re,e]);const B=x.useMemo(()=>{const C=d.flat(),R=C.filter((Z,P)=>C.findIndex(ee=>ee.id===Z.id)===P),J=C.filter((Z,P)=>C.findIndex(ee=>ee.id===Z.id)!==P).map(Z=>Z.id);console.log("Flattening pages:",{pagesCount:d.length,totalPosts:C.length,uniquePosts:R.length,postIDs:R.map(Z=>Z.id),duplicateIDs:J,textPosts:R.filter(Z=>Z.text&&!Z.mediaUrl).length}),J.length>0&&(console.error("DUPLICATE POSTS DETECTED AND REMOVED:",J),console.log("Text posts after deduplication:",R.filter(Z=>Z.text&&!Z.mediaUrl).map(Z=>{var P;return{id:Z.id,text:((P=Z.text)==null?void 0:P.substring(0,50))+"..."}})));const F=[...R.map(Z=>({type:"post",item:Z,createdAt:Z.createdAt||0})),...u.map(Z=>({type:"ad",item:Z,createdAt:Z.createdAt||0}))];return F.sort((Z,P)=>P.createdAt-Z.createdAt),F},[d,u]);return e?o.jsxs("div",{id:`panel-${i}`,role:"tabpanel","aria-labelledby":`tab-${i}`,className:"pb-2",children:[o.jsx("div",{className:"h-4"}),!n&&o.jsx("div",{className:"mx-3 mt-2 rounded-md bg-amber-50 text-amber-900 dark:bg-amber-950 dark:text-amber-200 border border-amber-200 dark:border-amber-800 px-3 py-2 text-xs",children:"You're offline. Actions will sync when back online."}),l?o.jsx("div",{className:"px-3 py-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[l," Feed"]})]})}):o.jsx(iR,{active:i,onChange:a,onClearCustom:()=>c(null)}),o.jsx("div",{className:"h-4"}),b&&o.jsx("div",{className:"mx-4 my-3 p-3 rounded-md border border-red-300 bg-red-50 text-red-800 dark:border-red-800 dark:bg-red-950 dark:text-red-200",children:o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsx("span",{className:"text-sm",children:b}),o.jsx("button",{onClick:()=>{k(null),$()},className:"px-3 py-1.5 rounded bg-red-600 text-white text-sm hover:bg-red-500",children:"Retry"})]})}),B.map(C=>{if(C.type==="ad"){const J=C.item;return o.jsx(pR,{ad:J,onImpression:async()=>{try{await GI(J.id,t)}catch(F){console.error("Error tracking ad impression:",F)}},onClick:async()=>{try{await YI(J.id,t)}catch(F){console.error("Error tracking ad click:",F)}}},J.id)}const R=C.item;return o.jsx(Vp,{post:R,onLike:async()=>{if(console.log("Like button clicked for post:",R.id,"userLiked:",R.userLiked),!n){fe(R.id,F=>({...F,userLiked:!F.userLiked})),await et({type:"like",postId:R.id,userId:t});return}const J=await hs(t,R.id);fe(R.id,F=>({...J})),window.dispatchEvent(new CustomEvent(`likeToggled-${R.id}`,{detail:{liked:J.userLiked,likes:J.stats.likes}})),console.log("Like event dispatched for post:",R.id,"with",{liked:J.userLiked,likes:J.stats.likes})},onFollow:async()=>{if(!n){await et({type:"follow",postId:R.id,userId:t});return}fe(R.id,J=>({...J,isFollowing:!J.isFollowing})),await mi(t,R.id)},onShare:async()=>{H(R),A(!0)},onOpenComments:()=>D(R.id),onView:async()=>{if(!n){await et({type:"view",postId:R.id,userId:t});return}const J=await mc(t,R.id);fe(R.id,F=>({...J})),window.dispatchEvent(new CustomEvent(`viewAdded-${R.id}`))},onReclip:async()=>{if(R.userHandle===(e==null?void 0:e.handle)){console.log("Cannot reclip your own post");return}if(R.userReclipped){console.log("Post already reclipped by user, ignoring reclip request");return}if(!n){fe(R.id,Z=>({...Z,userReclipped:!0,stats:{...Z.stats,reclips:Z.stats.reclips+1}})),await et({type:"reclip",postId:R.id,userId:t,userHandle:(e==null?void 0:e.handle)||"Unknown@Unknown"}),window.dispatchEvent(new CustomEvent(`reclipAdded-${R.id}`));return}const{originalPost:J,reclippedPost:F}=await Io(t,R.id,(e==null?void 0:e.handle)||"Unknown@Unknown");if(!F){console.log("Post already reclipped by user, ignoring reclip request"),fe(R.id,Z=>({...Z,userReclipped:J.userReclipped,stats:J.stats}));return}fe(R.id,Z=>({...Z,userReclipped:J.userReclipped,stats:J.stats})),f(Z=>[[F],...Z]),window.dispatchEvent(new CustomEvent(`reclipAdded-${R.id}`))},onOpenScenes:()=>{K(R),M(!0)}},R.id)}),w&&o.jsxs("div",{className:"px-4 py-6 animate-pulse",children:[o.jsx("div",{className:"h-4 w-40 bg-gray-200 dark:bg-gray-800 rounded mb-2"}),o.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mb-4"}),o.jsx("div",{className:"w-full aspect-square bg-gray-200 dark:bg-gray-800 rounded-xl"})]}),m&&B.length===0&&o.jsx("div",{className:"p-8 text-center text-gray-600 dark:text-gray-300",children:re.toLowerCase()==="following"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-lg font-semibold mb-1",children:"Unlock Your Following News Feed"}),o.jsx("div",{className:"text-gray-600 text-sm",children:"This feed only populates with the accounts you follow. Start tapping Follow to personalize your stream"})]}):l?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-lg font-semibold mb-1",children:["No posts from ",l," yet"]}),o.jsxs("div",{className:"text-gray-600 text-sm",children:["Be the first to share something from ",l,"!"]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-lg font-semibold mb-1",children:"No posts yet"}),o.jsx("div",{className:"text-gray-600 text-sm",children:"No posts available for this location"})]})}),m&&B.length>0&&o.jsx("div",{className:"p-4 text-center text-xs text-gray-500 dark:text-gray-400",children:"You're all caught up."}),S&&o.jsx(Up,{postId:S,isOpen:T,onClose:Y}),N&&o.jsx(vd,{post:N,isOpen:q,onClose:()=>{A(!1),H(null)}}),U&&(()=>{const C=U;return o.jsx(zp,{post:C,isOpen:L,onClose:()=>{M(!1),K(null)},onLike:async()=>{if(console.log("Like button clicked for post:",C.id,"userLiked:",C.userLiked),!n){const J={...C,userLiked:!C.userLiked};fe(C.id,F=>({...F,userLiked:!F.userLiked})),(U==null?void 0:U.id)===C.id&&K(J),window.dispatchEvent(new CustomEvent(`likeToggled-${C.id}`,{detail:{liked:J.userLiked,likes:C.stats.likes}})),await et({type:"like",postId:C.id,userId:t});return}const R=await hs(t,C.id);fe(C.id,J=>({...R})),(U==null?void 0:U.id)===C.id&&K(R),window.dispatchEvent(new CustomEvent(`likeToggled-${C.id}`,{detail:{liked:R.userLiked,likes:R.stats.likes}}))},onFollow:async()=>{if(!n){fe(C.id,J=>({...J,isFollowing:!J.isFollowing})),await et({type:"follow",postId:C.id,userId:t});return}const R=await mi(t,C.id);fe(C.id,J=>({...R}))},onShare:async()=>{H(C),A(!0)},onOpenComments:()=>D(C.id),onReclip:async()=>{if(C.userHandle===(e==null?void 0:e.handle)){console.log("Cannot reclip your own post");return}if(C.userReclipped){console.log("Post already reclipped by user, ignoring reclip request");return}const R=C.stats.reclips+1;if(!n){const Z={...C,userReclipped:!0,stats:{...C.stats,reclips:R}};fe(C.id,P=>({...P,userReclipped:!0,stats:{...P.stats,reclips:R}})),(U==null?void 0:U.id)===C.id&&K(Z),await et({type:"reclip",postId:C.id,userId:t,userHandle:(e==null?void 0:e.handle)||"Unknown@Unknown"}),window.dispatchEvent(new CustomEvent(`reclipAdded-${C.id}`,{detail:{reclips:R}}));return}const{originalPost:J,reclippedPost:F}=await Io(t,C.id,(e==null?void 0:e.handle)||"Unknown@Unknown");if(!F){console.log("Post already reclipped by user, ignoring reclip request"),fe(C.id,Z=>({...Z,userReclipped:J.userReclipped,stats:J.stats})),(U==null?void 0:U.id)===C.id&&K(J);return}fe(C.id,Z=>({...Z,userReclipped:J.userReclipped,stats:J.stats})),(U==null?void 0:U.id)===C.id&&K(J),f(Z=>[[F],...Z]),window.dispatchEvent(new CustomEvent(`reclipAdded-${C.id}`,{detail:{reclips:J.stats.reclips}}))}})})()]},`${re}-${l||"default"}`):o.jsxs("div",{className:"p-6",children:[o.jsx("a",{href:"/login",className:"text-brand-600 underline",children:"Sign in"})," to view your feed."]})}function y1(){const{user:e}=Ke(),t=(e==null?void 0:e.id)??"anon",n=Sa(),r=nt(),[s,i]=x.useState([]),[a,l]=x.useState(!0),[c,d]=x.useState(null),[f,u]=x.useState(!1),[h,p]=x.useState(null),[y,w]=x.useState(!1),[v,m]=x.useState(null),[g,b]=x.useState(!1),[k,T]=x.useState(null),[E,S]=x.useState(!1),[I,q]=x.useState(null);x.useEffect(()=>{async function M(){if(e!=null&&e.handle){l(!0),d(null);try{const K=(await Wf(e.handle,50)).map(re=>bn(t,re));i(K)}catch(U){console.error("Error loading user posts:",U),d("Failed to load your posts")}finally{l(!1)}}}M()},[e==null?void 0:e.handle,t]);const A=Kt();x.useEffect(()=>{const M=()=>{e!=null&&e.handle&&Wf(e.handle,50).then(K=>{const re=K.map(D=>bn(t,D));i(re)}).catch(console.error)},U=A.state;U!=null&&U.boostSuccess&&(M(),window.history.replaceState({...U,boostSuccess:!1},"")),U!=null&&U.newPost&&(U!=null&&U.showBoostModal)&&(q(U.newPost),S(!0),window.history.replaceState({...U,showBoostModal:!1},""))},[A.state,e==null?void 0:e.handle,t]);const N=M=>{p(M),u(!0)},H=()=>{u(!1),p(null)};function L(M,U){i(K=>K.map(re=>re.id===M?U({...re}):re))}return e?a?o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 w-40 bg-gray-200 dark:bg-gray-800 rounded"}),o.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded"})]})}):c?o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"text-red-600 dark:text-red-400",children:c})}):o.jsxs("div",{className:"pb-2",children:[o.jsx("div",{className:"h-4"}),o.jsxs("div",{className:"px-3 py-2",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Your Posts"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Boost your posts to reach more people"})]}),o.jsx("div",{className:"h-4"}),s.length===0?o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You haven't created any posts yet."})}):s.map(M=>o.jsx(Vp,{post:M,showBoostIcon:!0,onBoost:async()=>{q(M),S(!0)},onLike:async()=>{if(!n){L(M.id,K=>({...K,userLiked:!K.userLiked})),await et({type:"like",postId:M.id,userId:t});return}const U=await hs(t,M.id);L(M.id,K=>({...U})),window.dispatchEvent(new CustomEvent(`likeToggled-${M.id}`,{detail:{liked:U.userLiked,likes:U.stats.likes}}))},onShare:async()=>{m(M),w(!0)},onOpenComments:()=>N(M.id),onView:async()=>{if(!n){await et({type:"view",postId:M.id,userId:t});return}const U=await mc(t,M.id);L(M.id,K=>({...U})),window.dispatchEvent(new CustomEvent(`viewAdded-${M.id}`))},onReclip:async()=>{console.log("Cannot reclip your own post")},onOpenScenes:()=>{T(M),b(!0)}},M.id)),f&&h&&o.jsx(Up,{postId:h,isOpen:f,onClose:H}),y&&v&&o.jsx(vd,{post:v,isOpen:y,onClose:()=>{w(!1),m(null)}}),g&&k&&o.jsx(zp,{post:k,isOpen:g,onClose:()=>{b(!1),T(null)},onLike:async()=>{if(!n){L(k.id,U=>({...U,userLiked:!U.userLiked})),await et({type:"like",postId:k.id,userId:t});return}const M=await hs(t,k.id);L(k.id,U=>({...M})),window.dispatchEvent(new CustomEvent(`likeToggled-${k.id}`,{detail:{liked:M.userLiked,likes:M.stats.likes}}))},onFollow:async()=>{},onShare:async()=>{m(k),w(!0)},onOpenComments:()=>N(k.id),onReclip:async()=>{console.log("Cannot reclip your own post")}}),E&&I&&o.jsx(JI,{isOpen:E,post:I,onClose:()=>{S(!1),q(null)},onSelect:(M,U)=>{S(!1),r("/payment",{state:{post:I,feedType:M,price:U}})}})]}):o.jsxs("div",{className:"p-6",children:[o.jsx("a",{href:"/login",className:"text-brand-600 underline",children:"Sign in"})," to view your posts."]})}Wp.FeedPage=g1;Wp.BoostPage=y1;const mR=x.createContext(null);function gR({children:e}){return x.useEffect(()=>{document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")},[]),o.jsx(mR.Provider,{value:{theme:"dark"},children:e})}function yR(){const{user:e}=Ke(),t=nt(),n=Kt(),r=x.useRef(null),[s,i]=x.useState(null),[a,l]=x.useState(null),[c,d]=x.useState(""),[f,u]=x.useState("white"),[h,p]=x.useState("medium"),[y,w]=x.useState(""),[v,m]=x.useState(!1),[g,b]=x.useState(!1),[k,T]=x.useState(!1),[E,S]=x.useState(null),[I,q]=x.useState(!1),[A,N]=x.useState([]),[H,L]=x.useState(0),[M,U]=x.useState(!1),K=x.useRef(null),re=x.useRef(null),[D,Y]=x.useState(null);x.useEffect(()=>{var P,ee,X,le,j;console.log("ClipPage mounted, checking location state...");const F=(P=n.state)==null?void 0:P.sharedStory,Z=(ee=n.state)==null?void 0:ee.videoUrl;if(console.log("Shared story from location state:",F),F)try{console.log("Processing shared story data:",F),F.mediaUrl&&(console.log("Setting media from shared story:",F.mediaUrl),i(F.mediaUrl),l(F.mediaType||"image"),F.text&&d(F.text),F.sharedFromPost&&S({postId:F.sharedFromPost,userId:F.sharedFromUser}),console.log("Media set successfully"))}catch(z){console.error("Error processing shared story data:",z)}if(Z){i(Z),l("video"),(X=n.state)!=null&&X.filtered&&q(!0);const z=(le=n.state)==null?void 0:le.videoSegments,_=(j=n.state)==null?void 0:j.segmentIndex;z&&z.length>1&&(N(z),L(_||0)),T(!0),b(!1),setTimeout(()=>{var O;return(O=K.current)==null?void 0:O.focus()},0)}},[n.state]);const $=()=>{var F;(F=r.current)==null||F.click()},Q={white:"#FFFFFF",yellow:"#FFD700",red:"#FF0000",blue:"#0080FF",green:"#00FF00",purple:"#8000FF",pink:"#FF00FF",orange:"#FF8000",cyan:"#00FFFF",black:"#000000"},fe=F=>{var P;const Z=(P=F.target.files)==null?void 0:P[0];if(Z){const ee=new FileReader;ee.onload=X=>{var le;i((le=X.target)==null?void 0:le.result),Z.type.startsWith("image/")?l("image"):Z.type.startsWith("video/")&&l("video")},ee.readAsDataURL(Z)}},B=()=>{i(null),l(null),d("")},C=async()=>{if(!(!s||!e)){if(A.length>1){await R();return}m(!0);try{const F=s;await Gf(e.id,e.handle,F,a,c.trim()||void 0,y.trim()||void 0,f,h,E==null?void 0:E.postId,E==null?void 0:E.userId),window.dispatchEvent(new CustomEvent("storyCreated",{detail:{userHandle:e.handle}})),t("/feed")}catch(F){console.error("Error creating story:",F),alert("Failed to create story. Please try again.")}finally{m(!1)}}},R=async()=>{if(!(!e||A.length===0)){U(!0);try{for(let F=0;F<A.length;F++){L(F);const Z=A[F];await Gf(e.id,e.handle,Z,"video",F===0&&c.trim()||void 0,F===0&&y.trim()||void 0,f,h,F===0?E==null?void 0:E.postId:void 0,F===0?E==null?void 0:E.userId:void 0),window.dispatchEvent(new CustomEvent("storyCreated",{detail:{userHandle:e.handle}})),F<A.length-1&&await new Promise(P=>setTimeout(P,500))}t("/feed")}catch(F){console.error("Error creating story segments:",F),alert(`Failed to create story segment ${H+1}. Please try again.`)}finally{U(!1),L(0)}}},J=()=>{t("/feed")};return s?o.jsxs("div",{className:"fixed inset-0 bg-black z-50 overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/80 to-transparent p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{onClick:B,className:"p-2 bg-black/50 backdrop-blur-sm text-white rounded-full hover:bg-black/70 transition-colors",children:o.jsx(mt,{className:"w-6 h-6"})}),o.jsx("h1",{className:"text-white font-semibold text-base",children:"Your Story"}),o.jsx("button",{onClick:()=>T(!k),className:"p-2 bg-black/50 backdrop-blur-sm text-white rounded-full hover:bg-black/70 transition-colors",children:o.jsx(yd,{className:"w-6 h-6"})})]})}),o.jsx("div",{className:`w-full h-full flex items-center justify-center bg-black ${k?"pb-[40vh]":""}`,children:a==="image"?o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[o.jsx("img",{src:s,alt:"Story preview",className:"max-w-full max-h-full w-auto h-auto"}),I&&o.jsx("span",{className:"absolute top-4 left-4 z-10 px-2 py-1 rounded-full text-[11px] font-semibold bg-purple-600 text-white shadow",children:"Filtered"}),c&&o.jsx("div",{className:"absolute bottom-20 left-0 right-0 px-6 pointer-events-none",children:o.jsx("div",{className:`font-bold text-center ${h==="small"?"text-sm":h==="large"?"text-3xl":"text-xl"}`,style:{color:Q[f]||f,textShadow:"2px 2px 8px rgba(0,0,0,0.9), -1px -1px 0 rgba(0,0,0,0.9), 1px -1px 0 rgba(0,0,0,0.9), -1px 1px 0 rgba(0,0,0,0.9), 1px 1px 0 rgba(0,0,0,0.9)"},children:c})})]}):o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[o.jsx("div",{className:"flex items-center justify-center",style:{maxWidth:"100%",maxHeight:"100%",aspectRatio:D?`${D.w} / ${D.h}`:void 0},children:o.jsx("video",{ref:re,src:s,controls:!0,className:"w-full h-full",style:{objectFit:"contain",display:"block"},onLoadedMetadata:()=>{const F=re.current;F&&F.videoWidth&&F.videoHeight&&Y({w:F.videoWidth,h:F.videoHeight})}})}),I&&o.jsx("span",{className:"absolute top-4 left-4 z-10 px-2 py-1 rounded-full text-[11px] font-semibold bg-purple-600 text-white shadow",children:"Filtered"})]})}),k&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/95 backdrop-blur-md rounded-t-3xl p-6 animate-in slide-in-from-bottom duration-300 max-h-[70vh] overflow-y-auto",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("button",{onClick:()=>b(!g),className:"w-full py-4 rounded-2xl bg-gray-900 text-white font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center gap-3",children:[o.jsx(aI,{className:"w-5 h-5"}),g?"Hide Text Editor":"Add Text"]}),g&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("textarea",{ref:K,value:c,onChange:F=>d(F.target.value),placeholder:"Type your story text...",maxLength:200,className:"w-full h-32 p-4 rounded-2xl bg-gray-900 text-white placeholder-gray-500 resize-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),o.jsxs("div",{className:"text-right text-sm text-gray-500",children:[c.length,"/200"]}),c&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-3",children:"Text Color"}),o.jsx("div",{className:"flex gap-3 flex-wrap justify-center",children:Object.entries(Q).map(([F,Z])=>o.jsx("button",{onClick:()=>u(F),className:`w-12 h-12 rounded-full border-3 transition-all ${f===F?"border-white scale-110":"border-gray-600"}`,style:{backgroundColor:Z},title:F.charAt(0).toUpperCase()+F.slice(1)},F))})]}),c&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-3",children:"Text Size"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:["small","medium","large"].map(F=>o.jsx("button",{onClick:()=>p(F),className:`py-3 rounded-xl border-2 font-medium transition-all ${h===F?"border-white bg-white text-black":"border-gray-600 text-gray-400 hover:border-gray-500"}`,children:F.charAt(0).toUpperCase()+F.slice(1)},F))})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[o.jsx(Ft,{className:"w-4 h-4"}),"Add Location"]}),o.jsx("input",{type:"text",value:y,onChange:F=>w(F.target.value),placeholder:"Where are you?",className:"w-full px-4 py-3 rounded-xl bg-gray-900 text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),o.jsx("div",{className:"rounded-2xl bg-gray-900/50 p-4 text-center",children:o.jsx("div",{className:"text-sm text-gray-400",children:" Your story will be visible for 24 hours"})}),A.length>1&&o.jsxs("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 font-medium",children:[" Your video will be split into ",A.length," clips (15 seconds each)"]}),M&&o.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-500 mt-1",children:["Posting clips... (",H+1," of ",A.length,")"]})]}),o.jsx("button",{onClick:C,disabled:v||M,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 via-blue-500 to-blue-600 text-white font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-all shadow-lg hover:scale-[1.02] active:scale-[0.98]",children:M?`Posting ${A.length} Clips... (${H+1}/${A.length})`:v?"Sharing Your Story...":A.length>1?`Share ${A.length} Clips to Story`:"Share to Story"})]})}),!k&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-40 bg-gradient-to-t from-black/80 to-transparent p-6 pb-safe",children:o.jsx("div",{className:"flex items-center justify-center gap-4",children:o.jsx("button",{onClick:()=>T(!0),className:"px-6 py-3 rounded-full bg-white text-black font-semibold hover:bg-gray-200 transition-all shadow-lg",children:"Add to Story"})})})]}):o.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/80 to-transparent p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{onClick:J,className:"p-2 bg-black/50 backdrop-blur-sm text-white rounded-full hover:bg-black/70 transition-colors",children:o.jsx(mt,{className:"w-6 h-6"})}),o.jsx("h1",{className:"text-white font-bold text-lg",children:"Create Story"}),o.jsx("div",{className:"w-10"})]})}),o.jsx("div",{className:"flex items-center justify-center h-screen px-6",children:o.jsxs("div",{className:"text-center max-w-md",children:[o.jsxs("button",{onClick:$,className:"relative mx-auto mb-6 w-32 h-32 cursor-pointer hover:scale-105 transition-transform",children:[o.jsx("div",{className:"w-32 h-32 rounded-full p-0.5 absolute top-0 left-0",style:{background:"conic-gradient(from 0deg, #10b981, #3b82f6, #1d4ed8, #8b5cf6, #ec4899, #f59e0b, #10b981)"},children:o.jsx("div",{className:"w-full h-full rounded-full bg-black flex items-center justify-center relative overflow-hidden",children:o.jsx(Ss,{className:"w-16 h-16 text-white relative z-10"})})}),o.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 rounded-full opacity-30 pointer-events-none",style:{background:"radial-gradient(circle, rgba(59,130,246,0.5) 0%, rgba(16,185,129,0.5) 50%, transparent 70%)",animation:"pulse 2s ease-in-out infinite"}})]}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Add to your Clips page"}),o.jsx("p",{className:"text-gray-400 mb-8",children:"Share moments that disappear in 24 hours"}),o.jsxs("label",{className:"block",children:[o.jsxs("div",{className:"relative inline-block overflow-visible",children:[o.jsx("div",{className:"absolute -inset-[2px] rounded-full bg-gradient-to-r from-emerald-500 via-blue-500 via-purple-500 to-pink-500 blur-sm opacity-75"}),o.jsx("div",{className:"absolute -inset-[1px] rounded-full bg-gradient-to-r from-emerald-500 via-blue-500 via-purple-500 to-pink-500"}),o.jsx("div",{className:"relative px-8 py-4 rounded-full bg-white text-black font-semibold hover:scale-105 transition-transform cursor-pointer",children:o.jsx("span",{children:"Select Photo or Video"})})]}),o.jsx("input",{ref:r,type:"file",accept:"image/*,video/*",onChange:fe,className:"hidden"})]})]})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 via-blue-500/10 to-blue-600/10 pointer-events-none"})]})}function xR(){var H;const{user:e}=Ke(),t=nt(),n=Kt().state,[r,s]=x.useState(""),[i,a]=x.useState(""),[l,c]=x.useState(null),[d,f]=x.useState(null),[u,h]=x.useState(""),[p,y]=x.useState(!1),[w,v]=x.useState(!1),[m,g]=x.useState(!1),[b,k]=x.useState(null),T=x.useRef(null),E=x.useRef(null);function S(){const L=n==null?void 0:n.filterInfo;if(!L)return"";const M=[];return L.active==="bw"?M.push("grayscale(1)"):L.active==="sepia"?M.push("sepia(0.8)"):L.active==="vivid"?M.push(`saturate(${1.6*(L.saturation||1)}) contrast(${1.1*(L.contrast||1)})`):L.active==="cool"&&M.push(`hue-rotate(200deg) saturate(${1.2*(L.saturation||1)})`),L.brightness&&L.brightness!==1&&M.push(`brightness(${L.brightness})`),L.contrast&&L.contrast!==1&&M.push(`contrast(${L.contrast})`),L.saturation&&L.saturation!==1&&M.push(`saturate(${L.saturation})`),L.hue&&L.hue!==0&&M.push(`hue-rotate(${L.hue*360}deg)`),M.join(" ")}async function I(L){const M=n==null?void 0:n.filterInfo;if(!M||!M.exportFailed)return L;try{const U=document.createElement("video");U.src=L,U.crossOrigin="anonymous",U.muted=!0,U.playsInline=!0,await new Promise(le=>{if(U.readyState>=1)return le();const j=()=>{U.removeEventListener("loadedmetadata",j),le()};U.addEventListener("loadedmetadata",j),setTimeout(()=>{U.removeEventListener("loadedmetadata",j),le()},1500)});const K=U.videoWidth||720,re=U.videoHeight||1280,D=Math.max(K,re),Y=D>720?720/D:1,$=document.createElement("canvas");$.width=Math.round(K*Y),$.height=Math.round(re*Y);const Q=$.getContext("2d");if(!Q)return L;const fe=S(),B=$.captureStream(24);let C="video/webm;codecs=vp9";MediaRecorder.isTypeSupported(C)||(C="video/webm;codecs=vp8"),MediaRecorder.isTypeSupported(C)||(C="video/webm");const R=new MediaRecorder(B,{mimeType:C,videoBitsPerSecond:12e5}),J=[];R.ondataavailable=le=>{le.data&&le.data.size>0&&J.push(le.data)};const F=new Promise(le=>{R.onstop=()=>le()});let Z=-1;const P=()=>{if(U.ended){R.state!=="inactive"&&R.stop();return}U.currentTime!==Z&&(Q.filter=fe||"none",Q.drawImage(U,0,0,$.width,$.height),Z=U.currentTime),requestAnimationFrame(P)};U.currentTime=0,U.loop=!1,R.start(500),await U.play(),requestAnimationFrame(P);const ee=setTimeout(()=>{R.state==="recording"&&R.stop()},8e3);if(await F,clearTimeout(ee),J.length===0)return L;const X=new Blob(J,{type:C});return X.size<1e3?L:URL.createObjectURL(X)}catch{return L}}x.useEffect(()=>{(async()=>{if(n!=null&&n.videoUrl){let L=n.videoUrl;L=await I(L),c(L),f("video"),v(!!n.filtered||!!n.filterInfo),setTimeout(()=>{var M;return(M=T.current)==null?void 0:M.focus()},0)}})()},[n==null?void 0:n.videoUrl]),x.useEffect(()=>{console.log("CreatePage mounted with user:",e)},[e]);const q=L=>{var U;const M=(U=L.target.files)==null?void 0:U[0];if(M){const K=new FileReader;K.onload=re=>{var D;c((D=re.target)==null?void 0:D.result),M.type.startsWith("image/")?f("image"):M.type.startsWith("video/")&&f("video")},K.readAsDataURL(M)}},A=async L=>{if(L.preventDefault(),!(!r.trim()&&!l)&&e){y(!0);try{console.log("Creating post with user:",{id:e.id,handle:e.handle,regional:e.regional}),console.log("Posting video:",{selectedMedia:l?l.substring(0,50)+"...":null,mediaType:d,filteredFromFlow:w,isBlobUrl:l==null?void 0:l.startsWith("blob:"),isDataUrl:l==null?void 0:l.startsWith("data:")});const M=await SI(e.id,e.handle,r.trim(),i.trim(),l||void 0,d||void 0,u.trim()||void 0,l?r.trim():void 0,e.local,e.regional,e.national);console.log("Post created successfully, dispatching postCreated event"),window.dispatchEvent(new CustomEvent("postCreated")),m?(k(M),t("/boost",{state:{newPost:M,showBoostModal:!0}})):(s(""),a(""),c(null),f(null),h(""),t("/feed"))}catch(M){console.error("Error creating post:",M),alert("Failed to create post. Please try again.")}finally{y(!1)}}},N=()=>{c(null),f(null),h("")};return o.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-950",children:[o.jsx("div",{className:"sticky top-0 z-40 bg-white/80 dark:bg-gray-950/80 backdrop-blur border-b border-gray-200 dark:border-gray-800",children:o.jsxs("div",{className:"mx-auto max-w-md px-4 h-11 flex items-center justify-between",children:[o.jsx("h1",{className:"font-bold text-lg text-gray-900 dark:text-gray-100",children:"Create Post"}),o.jsx("button",{onClick:A,disabled:!r.trim()&&!l||p,className:"px-4 py-1 bg-brand-500 text-white rounded-full text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-brand-600 transition-colors",children:p?"Posting...":"Post"})]})}),o.jsxs("div",{className:"mx-auto max-w-md px-4 py-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(gt,{src:e==null?void 0:e.avatarUrl,name:(e==null?void 0:e.name)||"User",size:"md"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:(e==null?void 0:e.name)||"User"}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(e==null?void 0:e.handle)||"user@location"})]})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"rounded-xl border-2 border-dashed p-4 bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[o.jsx("textarea",{ref:T,value:r,onChange:L=>s(L.target.value),placeholder:l?"Write a caption for your post...":"Tap to type",className:"w-full h-32 p-4 text-gray-900 dark:text-gray-100 bg-transparent border-none resize-none placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none",maxLength:500}),o.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[o.jsx("span",{children:l?" Caption":" Post without images! Try it"}),o.jsxs("span",{children:[r.length,"/500"]})]})]})}),!l&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(yd,{className:"w-4 h-4 text-gray-500"}),o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Add Photo or Video"})]}),o.jsx("div",{className:"flex gap-3",children:o.jsxs("label",{className:"flex-1 p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-brand-500 hover:bg-brand-50 dark:hover:bg-brand-900/20 transition-colors",children:[o.jsx("input",{type:"file",accept:"image/*,video/*",onChange:q,className:"hidden"}),o.jsxs("div",{className:"text-center",children:[o.jsx(Ss,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tap to add photo or video"}),o.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Images & short videos"})]})]})})]}),l&&o.jsxs("div",{className:"relative mb-6",children:[w&&o.jsx("span",{className:"absolute top-2 left-2 z-10 px-2 py-1 rounded-full text-[11px] font-semibold bg-purple-600 text-white shadow",children:"Filtered"}),d==="image"?o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:l,alt:"Selected",className:"w-full h-64 object-cover rounded-2xl"}),u&&o.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:o.jsx("div",{className:"bg-black/70 text-white px-3 py-2 rounded-lg text-sm font-medium backdrop-blur-sm",children:u})})]}):d==="video"?o.jsx("video",{ref:E,src:l,controls:!0,className:"w-full h-64 object-cover rounded-2xl",preload:"metadata",style:(H=n==null?void 0:n.filterInfo)!=null&&H.exportFailed?(()=>{const L=n.filterInfo;if(!L)return{};let M="";return L.active==="bw"?M="grayscale(1)":L.active==="sepia"?M="sepia(0.8)":L.active==="vivid"?M=`saturate(${1.6*L.saturation}) contrast(${1.1*L.contrast})`:L.active==="cool"&&(M=`hue-rotate(200deg) saturate(${1.2*L.saturation})`),L.brightness!==1&&(M+=` brightness(${L.brightness})`),L.contrast!==1&&(M+=` contrast(${L.contrast})`),L.saturation!==1&&(M+=` saturate(${L.saturation})`),M?{filter:M}:{}})():void 0}):null,o.jsx("button",{onClick:N,className:"absolute top-2 right-2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors",children:o.jsx(mt,{className:"w-4 h-4"})})]}),l&&d==="image"&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Ss,{className:"w-4 h-4 text-gray-500"}),o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Add Text to Image"})]}),o.jsx("input",{type:"text",value:u,onChange:L=>h(L.target.value),placeholder:"",className:"w-full p-3 text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-transparent",maxLength:100}),o.jsxs("div",{className:"text-right text-xs text-gray-400 mt-1",children:[u.length,"/100"]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Ft,{className:"w-4 h-4 text-gray-500"}),o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Story Location"})]}),o.jsx("input",{type:"text",value:i,onChange:L=>a(L.target.value),placeholder:"Where did this happen?",className:"w-full p-3 text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-transparent placeholder-gray-500 dark:placeholder-gray-400"})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("label",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-brand-500 hover:bg-brand-50 dark:hover:bg-brand-900/20 transition-colors cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:m,onChange:L=>g(L.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-brand-600 focus:ring-brand-500 focus:ring-2"}),o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-100 dark:bg-brand-900 flex items-center justify-center",children:o.jsx(na,{className:"w-5 h-5 text-brand-600 dark:text-brand-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Boost this post"}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reach more people by boosting your post"})]})]})]})}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4",children:[o.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Tips for great posts:"}),o.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[o.jsx("li",{children:" Share what's happening in your local area"}),o.jsx("li",{children:" Add a clear photo or short video to tell your story"}),o.jsx("li",{children:" Include the specific location"}),o.jsx("li",{children:" Keep it authentic and engaging"})]})]})]})]})}function wR(){const{login:e}=Ke(),t=nt(),[n,r]=x.useState(1),[s,i]=x.useState(""),[a,l]=x.useState(""),[c,d]=x.useState(""),[f,u]=x.useState(""),[h,p]=x.useState(""),[y,w]=x.useState(""),[v,m]=x.useState(""),[g,b]=x.useState(""),[k,T]=x.useState(""),[E,S]=x.useState([]),[I,q]=x.useState(null),A=["Ballymun","Finglas","Cabra","Phibsborough","Drumcondra","Glasnevin","Coolock","Raheny","Clontarf","Howth"],N=["Dublin","Cork","Galway","Limerick","Waterford","Kilkenny","Sligo","Donegal","Kerry","Mayo"],H=["Ireland","Northern Ireland","UK","USA","Canada","Australia","New Zealand","Germany","France","Spain"],L=["Food & Dining","Sports","Music","Art & Culture","Technology","Travel","Fashion","Photography","Fitness","Gaming","Books","Movies","Nature","Cooking","Dancing"];function M($){if($.preventDefault(),!s||!a||!c||!f){alert("Please fill in all location fields");return}r(2)}function U($){if($.preventDefault(),!y||!v||!g||!k){alert("Please fill in all account fields");return}if(v!==g){alert("Passwords do not match");return}if(parseInt(k)<13){alert("You must be at least 13 years old");return}r(3)}function K($){$.preventDefault();const Q={name:s.trim(),email:y.trim(),password:v,age:parseInt(k),interests:E,local:a,regional:c,national:f,handle:`${s.trim()}@${a}`,countryFlag:h.trim(),avatarUrl:I};e(Q),t("/profile",{replace:!0})}function re($){var fe;const Q=(fe=$.target.files)==null?void 0:fe[0];if(Q){const B=new FileReader;B.onload=C=>{var R;q((R=C.target)==null?void 0:R.result)},B.readAsDataURL(Q)}}function D(){q(null)}function Y($){S(Q=>Q.includes($)?Q.filter(fe=>fe!==$):[...Q,$])}return o.jsxs("div",{className:"mx-auto max-w-md min-h-screen flex items-center justify-center p-6",children:[o.jsx("div",{className:"absolute top-4 right-4",children:o.jsx("button",{type:"button",onClick:()=>{e({name:"Test User",email:"test@example.com",password:"",age:25,interests:["Technology","Travel"],local:"Finglas",regional:"Dublin",national:"Ireland",handle:"TestUser@Dublin",countryFlag:""}),t("/feed",{replace:!0})},className:"px-3 py-1.5 text-xs bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:"Quick Login (Test)"})}),o.jsxs("form",{onSubmit:n===1?M:n===2?U:K,className:"w-full bg-white dark:bg-gray-950 border border-gray-200 dark:border-gray-800 rounded-xl p-6 space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Join Clips"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n===1?"Connect with your local community":n===2?"Complete your profile":"Add a profile picture"}),o.jsx("div",{className:"flex justify-center mt-3",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${n===1?"bg-brand-600":"bg-gray-300"}`}),o.jsx("div",{className:`w-3 h-3 rounded-full ${n===2?"bg-brand-600":"bg-gray-300"}`}),o.jsx("div",{className:`w-3 h-3 rounded-full ${n===3?"bg-brand-600":"bg-gray-300"}`})]})})]}),n===1&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(s1,{className:"inline w-4 h-4 mr-1"}),"Your Name"]}),o.jsx("input",{value:s,onChange:$=>i($.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent",placeholder:"Enter your name",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(Ft,{className:"inline w-4 h-4 mr-1"}),"Local Area"]}),o.jsxs("select",{value:a,onChange:$=>l($.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-brand-500 focus:border-transparent",required:!0,children:[o.jsx("option",{value:"",children:"Select your local area"}),A.map($=>o.jsx("option",{value:$,children:$},$))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(Ft,{className:"inline w-4 h-4 mr-1"}),"Regional Area"]}),o.jsxs("select",{value:c,onChange:$=>d($.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-brand-500 focus:border-transparent",required:!0,children:[o.jsx("option",{value:"",children:"Select your regional area"}),N.map($=>o.jsx("option",{value:$,children:$},$))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(e1,{className:"inline w-4 h-4 mr-1"}),"National Area"]}),o.jsxs("select",{value:f,onChange:$=>u($.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-brand-500 focus:border-transparent",required:!0,children:[o.jsx("option",{value:"",children:"Select your national area"}),H.map($=>o.jsx("option",{value:$,children:$},$))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Country Flag (emoji)"}),o.jsx("input",{value:h,onChange:$=>p($.target.value),maxLength:8,placeholder:"",className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"}),o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: paste your countrys emoji flag"})]})]}),n===2&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),o.jsx("input",{type:"email",value:y,onChange:$=>w($.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent",placeholder:"your@email.com",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),o.jsx("input",{type:"password",value:v,onChange:$=>m($.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent",placeholder:"Create a password",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),o.jsx("input",{type:"password",value:g,onChange:$=>b($.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent",placeholder:"Confirm your password",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Age"}),o.jsx("input",{type:"number",min:"13",max:"120",value:k,onChange:$=>T($.target.value),className:"w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent",placeholder:"Your age",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Interests (Select up to 5)"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:L.map($=>o.jsx("button",{type:"button",onClick:()=>Y($),className:`p-2 rounded-lg text-sm border transition-colors ${E.includes($)?"bg-brand-600 text-white border-brand-600":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,disabled:!E.includes($)&&E.length>=5,children:$},$))})]})]}),n===3&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Add a Profile Picture"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Choose a photo that represents you, or skip to use your initials"}),o.jsx("div",{className:"flex justify-center mb-6",children:o.jsx(gt,{src:I||void 0,name:s||"User",size:"xl",className:"border-4 border-gray-200 dark:border-gray-700"})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("label",{className:"block",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:re,className:"hidden"}),o.jsxs("div",{className:"w-full px-4 py-3 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors cursor-pointer text-center font-medium",children:[o.jsx(Ss,{className:"inline w-4 h-4 mr-2"}),"Choose Photo"]})]}),I&&o.jsxs("button",{type:"button",onClick:D,className:"w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-center font-medium",children:[o.jsx(mt,{className:"inline w-4 h-4 mr-2"}),"Remove Photo"]}),o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Your initials will be used if no photo is selected"})]})]})}),o.jsxs("div",{className:"flex space-x-3",children:[(n===2||n===3)&&o.jsx("button",{type:"button",onClick:()=>r(n-1),className:"flex-1 px-4 py-3 rounded-lg bg-gray-500 text-white font-medium hover:bg-gray-600 transition-colors",children:"Back"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 rounded-lg bg-brand-600 text-white font-medium hover:bg-brand-700 transition-colors",children:n===1||n===2?"Continue":"Join Clips"})]}),o.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400",children:"By joining, you agree to connect with your local community"}),o.jsx("button",{type:"button",onClick:()=>{localStorage.clear(),window.location.reload()},className:"w-full px-3 py-2 rounded bg-gray-500 text-white text-sm hover:bg-gray-600",children:"Clear Data & Refresh (Debug)"})]})]})}function vR(){var b,k,T,E;const{user:e,logout:t,login:n}=Ke(),r=nt(),[s,i]=x.useState(!1),[a,l]=x.useState((e==null?void 0:e.bio)||""),[c,d]=x.useState({website:((b=e==null?void 0:e.socialLinks)==null?void 0:b.website)||"",x:((k=e==null?void 0:e.socialLinks)==null?void 0:k.x)||"",instagram:((T=e==null?void 0:e.socialLinks)==null?void 0:T.instagram)||"",tiktok:((E=e==null?void 0:e.socialLinks)==null?void 0:E.tiktok)||""}),[f,u]=x.useState((e==null?void 0:e.countryFlag)||""),[h,p]=x.useState([]),[y,w]=x.useState(!1);x.useEffect(()=>{e!=null&&e.bio&&l(e.bio)},[e==null?void 0:e.bio]),x.useEffect(()=>{e!=null&&e.socialLinks&&d(e.socialLinks)},[e==null?void 0:e.socialLinks]),x.useEffect(()=>{e!=null&&e.id&&v()},[e==null?void 0:e.id]);async function v(){if(e!=null&&e.id)try{const S=await p1(e.id);p(S)}catch(S){console.error("Error loading collections:",S)}}const m=async S=>{var q;const I=(q=S.target.files)==null?void 0:q[0];if(console.log("File selected:",I),I){i(!0);try{const A=new FileReader;A.onload=N=>{var M;const H=(M=N.target)==null?void 0:M.result;console.log("New avatar URL:",H);const L={...e,avatarUrl:H};console.log("Updated user:",L),n(L),i(!1)},A.readAsDataURL(I)}catch(A){console.error("Error updating profile picture:",A),i(!1)}}},g=()=>{i(!0);const S={...e,avatarUrl:void 0};n(S),i(!1)};return e?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-brand-100 dark:from-gray-900 dark:to-gray-800",children:o.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[o.jsxs("div",{className:"text-center mb-8 relative",children:[o.jsx("div",{className:"absolute top-0 right-0",children:o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>w(!y),className:"p-3 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-shadow","aria-label":"Collections",title:"Collections",children:o.jsx(hi,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),y&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)}),o.jsx("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50 max-h-96 overflow-y-auto",children:o.jsx("div",{className:"p-2",children:h.length===0?o.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400 text-sm",children:"No collections yet"}):h.map(S=>o.jsxs("button",{onClick:()=>{w(!1),r(`/collection/${S.id}`,{state:{collectionName:S.name}})},className:"w-full p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-200 dark:bg-gray-700 flex items-center justify-center overflow-hidden flex-shrink-0",children:S.thumbnailUrl?o.jsx("img",{src:S.thumbnailUrl,alt:S.name,className:"w-full h-full object-cover"}):o.jsx(hi,{className:"w-6 h-6 text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:S.name}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[S.postIds.length," ",S.postIds.length===1?"post":"posts"]})]})]},S.id))})})]})]})}),o.jsxs("div",{className:"relative inline-block mb-4 mx-auto",children:[o.jsxs("label",{className:"cursor-pointer group",children:[o.jsx(gt,{src:e.avatarUrl,name:e.name,size:"xl",className:"border-4 border-white dark:border-gray-800 shadow-xl group-hover:shadow-2xl transition-all duration-200"}),o.jsx("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:o.jsx(Ss,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"})}),o.jsx("input",{type:"file",accept:"image/*",onChange:m,className:"hidden",disabled:s})]}),e.avatarUrl&&o.jsx("button",{onClick:g,disabled:s,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg",title:"Remove profile picture",children:o.jsx(mt,{className:"w-4 h-4"})})]}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:e.name}),o.jsxs("p",{className:"text-brand-600 dark:text-brand-400 font-medium",children:["@",e.handle]}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Tap your profile picture to change it"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700 mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Bio"}),o.jsx("textarea",{value:a,onChange:S=>l(S.target.value),onBlur:()=>{const S={...e,bio:a};n(S)},placeholder:"Tell us about yourself...",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 resize-none focus:ring-2 focus:ring-brand-500 focus:border-transparent",rows:4}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This will be visible on your profile"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700 mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Social Links"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),o.jsx("input",{type:"text",value:c.website,onChange:S=>d({...c,website:S.target.value}),onBlur:()=>{const S={...e,socialLinks:c};n(S)},placeholder:"https://example.com",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"X (Twitter)"}),o.jsx("input",{type:"text",value:c.x,onChange:S=>d({...c,x:S.target.value}),onBlur:()=>{const S={...e,socialLinks:c};n(S)},placeholder:"@username",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"Instagram"}),o.jsx("input",{type:"text",value:c.instagram,onChange:S=>d({...c,instagram:S.target.value}),onBlur:()=>{const S={...e,socialLinks:c};n(S)},placeholder:"@username",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"TikTok"}),o.jsx("input",{type:"text",value:c.tiktok,onChange:S=>d({...c,tiktok:S.target.value}),onBlur:()=>{const S={...e,socialLinks:c};n(S)},placeholder:"@username",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]})]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"These will be visible on your profile"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-brand-100 dark:bg-brand-900 rounded-lg flex items-center justify-center mr-3",children:o.jsx("svg",{className:"w-4 h-4 text-brand-600 dark:text-brand-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),"Personal Information"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.email||"Not provided"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Age"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.age||"Not provided"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Member Since"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Today"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Status"}),o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Active"})]})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-brand-100 dark:bg-brand-900 rounded-lg flex items-center justify-center mr-3",children:o.jsxs("svg",{className:"w-4 h-4 text-brand-600 dark:text-brand-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),"Location Settings"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[o.jsx("div",{className:"w-12 h-12 bg-brand-500 rounded-full flex items-center justify-center mx-auto mb-3",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:"Local"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.local||"Not set"})]}),o.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[o.jsx("div",{className:"w-12 h-12 bg-brand-500 rounded-full flex items-center justify-center mx-auto mb-3",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})})}),o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:"Regional"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.regional||"Not set"})]}),o.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[o.jsx("div",{className:"w-12 h-12 bg-brand-500 rounded-full flex items-center justify-center mx-auto mb-3",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:"National"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.national||"Not set"})]})]})]}),e.interests&&e.interests.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-brand-100 dark:bg-brand-900 rounded-lg flex items-center justify-center mr-3",children:o.jsx("svg",{className:"w-4 h-4 text-brand-600 dark:text-brand-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),"Interests"]}),o.jsx("div",{className:"flex flex-wrap gap-3",children:e.interests.map((S,I)=>o.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-brand-500 to-brand-600 text-white text-sm font-medium rounded-full shadow-sm",children:S},I))})]}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("button",{onClick:()=>r("/feed"),className:"flex-1 px-6 py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200 transform hover:scale-105",children:"Go to News Feed"}),o.jsx("button",{onClick:()=>{t(),r("/login",{replace:!0})},className:"px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-semibold rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Sign Out"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-brand-100 dark:bg-brand-900 rounded-lg flex items-center justify-center mr-3",children:o.jsx(gc,{value:f||"",size:18})}),"Country Flag"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"Pick a flag"}),o.jsx("div",{className:"grid grid-cols-8 gap-2",children:["IE","GB","FR","ES","IT","DE","PT","NL","US","CA","BR","MX","AU","NZ","JP","CN","IN","PK","ZA","KE","EG","TR","RU","UA"].map(S=>o.jsx("button",{type:"button",onClick:()=>{u(S),n({...e,countryFlag:S})},className:`h-9 rounded-md flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-700 ${f===S?"ring-2 ring-brand-500":""} px-1`,"aria-label":`Select flag ${S}`,children:o.jsx(gc,{value:S,size:20})},S))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"Or paste your flag emoji"}),o.jsx("input",{value:f,onChange:S=>u(S.target.value),onBlur:()=>n({...e,countryFlag:f}),maxLength:8,placeholder:"",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This flag shows beside your handle on feed and profile."})]})]})]})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-brand-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Not Signed In"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please sign in to view your profile"}),o.jsx("button",{onClick:()=>r("/login"),className:"px-6 py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Sign In"})]})})}async function al(e){const t=new URLSearchParams;t.set("q",e.q),e.types&&t.set("types",e.types),e.usersCursor!=null&&t.set("usersCursor",String(e.usersCursor)),e.locationsCursor!=null&&t.set("locationsCursor",String(e.locationsCursor)),e.postsCursor!=null&&t.set("postsCursor",String(e.postsCursor)),e.usersLimit!=null&&t.set("usersLimit",String(e.usersLimit)),e.locationsLimit!=null&&t.set("locationsLimit",String(e.locationsLimit)),e.postsLimit!=null&&t.set("postsLimit",String(e.postsLimit));const n=await fetch(`/api/search?${t.toString()}`);if(!n.ok)throw new Error("Search failed");return await n.json()}function bR(){var g,b,k,T,E,S,I,q,A;const e=nt(),[t,n]=x.useState(""),[r,s]=x.useState({}),[i,a]=x.useState(0),[l,c]=x.useState(null),[d,f]=x.useState(!1),[u,h]=x.useState("locations"),[p,y]=x.useState(!1);x.useEffect(()=>{const N=setInterval(()=>{a(H=>(H+1)%2)},2500);return()=>clearInterval(N)},[]);const w=["Search for stories by location","Search for people on Gazetteer"];x.useEffect(()=>{const N=t.trim(),H=setTimeout(()=>{if(!N){s({});return}al({q:N,types:"users,locations,posts",usersLimit:10,locationsLimit:10,postsLimit:12}).then(L=>s(L.sections)).catch(()=>s({}))},250);return()=>clearTimeout(H)},[t]),x.useEffect(()=>{Wf("Sarah@Artane",30).then(c).catch(()=>c([]))},[]);const v=N=>{sessionStorage.setItem("pendingLocation",N),window.dispatchEvent(new CustomEvent("locationChange",{detail:{location:N}})),e("/feed?location="+encodeURIComponent(N))},m=N=>{e("/user/"+encodeURIComponent(N))};return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Fp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",value:t,onChange:N=>n(N.target.value),onFocus:()=>{f(!0),y(!0)},onBlur:()=>y(!1),placeholder:"",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"}),!t&&o.jsx("div",{className:"pointer-events-none absolute left-10 right-4 top-1/2 -translate-y-1/2 select-none z-10",children:o.jsx("span",{style:{background:"linear-gradient(90deg, #87ceeb, #ffb6c1, #87cefa, #c084fc, #34d399, #f59e0b, #ef4444, #dc2626, #fca5a5, #60a5fa, #fb7185, #87ceeb)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",animation:"shimmer 6s linear infinite"},children:w[i]})})]}),!d&&!t.trim()&&l&&o.jsx("div",{className:"px-1",children:o.jsx("div",{className:"grid grid-cols-3 gap-1",children:l.map(N=>o.jsxs("div",{className:"aspect-square relative group bg-gray-900",children:[N.mediaUrl?N.mediaType==="video"?o.jsx("video",{src:N.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}):o.jsx("img",{src:N.mediaUrl,alt:"",className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full relative flex items-center justify-center p-3",style:{background:"#0f172a"},children:o.jsx("p",{className:"text-white text-xs font-semibold text-center line-clamp-6",children:N.text||"No preview"})}),N.locationLabel&&o.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black/70 rounded flex items-center gap-1",children:[o.jsx(Ft,{className:"w-3 h-3 text-white"}),o.jsx("span",{className:"text-[10px] text-white font-medium",children:N.locationLabel})]}),o.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-opacity"})]},N.id))})}),d&&t.trim()&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex gap-2",children:["locations","users","posts"].map(N=>{var L,M,U,K,re,D;const H=N==="locations"?((M=(L=r.locations)==null?void 0:L.items)==null?void 0:M.length)||0:N==="users"?((K=(U=r.users)==null?void 0:U.items)==null?void 0:K.length)||0:((D=(re=r.posts)==null?void 0:re.items)==null?void 0:D.length)||0;return o.jsxs("button",{onClick:()=>h(N),className:`px-3 py-1.5 rounded-full text-sm border ${u===N?"bg-blue-600 text-white border-blue-600":"bg-transparent text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-700"}`,children:[N.charAt(0).toUpperCase()+N.slice(1),H?` (${H})`:""]},N)})}),u==="locations"&&o.jsxs("div",{children:[(b=(g=r.locations)==null?void 0:g.items)!=null&&b.length?o.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800 rounded-lg border border-gray-200 dark:border-gray-800 overflow-hidden",children:r.locations.items.map(N=>o.jsxs("button",{onClick:()=>v(N.name),className:"w-full text-left flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800",children:[o.jsx("div",{className:"h-8 w-8 rounded-full bg-brand-100 dark:bg-brand-900 flex items-center justify-center",children:o.jsx(Ft,{className:"text-brand-600 dark:text-brand-400"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:N.name}),o.jsxs("div",{className:"text-xs text-gray-500",children:[N.type,N.country?`  ${N.country}`:""]})]})]},`${N.name}-${N.country||""}`))}):o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No matching locations"}),((k=r.locations)==null?void 0:k.nextCursor)!=null&&o.jsx("button",{onClick:async()=>{var H;const N=await al({q:t.trim(),types:"locations",locationsCursor:((H=r.locations)==null?void 0:H.nextCursor)||0,locationsLimit:10});s(L=>{var M,U,K;return{...L,locations:{items:[...((M=L.locations)==null?void 0:M.items)||[],...((U=N.sections.locations)==null?void 0:U.items)||[]],nextCursor:((K=N.sections.locations)==null?void 0:K.nextCursor)??null}}})},className:"mt-3 w-full py-2 rounded-lg border border-gray-300 dark:border-gray-700 text-sm",children:"Load more"})]}),u==="users"&&o.jsxs("div",{children:[(E=(T=r.users)==null?void 0:T.items)!=null&&E.length?o.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800 rounded-lg border border-gray-200 dark:border-gray-800 overflow-hidden",children:r.users.items.map(N=>o.jsxs("button",{onClick:()=>m(N.handle),className:"w-full text-left flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800",children:[o.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:o.jsx(lI,{className:"text-gray-700 dark:text-gray-200"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:N.handle}),N.display_name&&o.jsx("div",{className:"text-xs text-gray-500",children:N.display_name})]})]},N.handle))}):o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No users found"}),((S=r.users)==null?void 0:S.nextCursor)!=null&&o.jsx("button",{onClick:async()=>{var H;const N=await al({q:t.trim(),types:"users",usersCursor:((H=r.users)==null?void 0:H.nextCursor)||0,usersLimit:10});s(L=>{var M,U,K;return{...L,users:{items:[...((M=L.users)==null?void 0:M.items)||[],...((U=N.sections.users)==null?void 0:U.items)||[]],nextCursor:((K=N.sections.users)==null?void 0:K.nextCursor)??null}}})},className:"mt-3 w-full py-2 rounded-lg border border-gray-300 dark:border-gray-700 text-sm",children:"Load more"})]}),u==="posts"&&o.jsxs("div",{children:[(q=(I=r.posts)==null?void 0:I.items)!=null&&q.length?o.jsx("div",{className:"grid grid-cols-3 gap-1",children:r.posts.items.map(N=>o.jsxs("div",{className:"aspect-square relative bg-gray-900",children:[N.media_url?N.media_type==="video"?o.jsxs(o.Fragment,{children:[o.jsx("video",{src:N.media_url,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-10 h-10 bg-black/60 rounded-full flex items-center justify-center",children:o.jsx(rI,{className:"w-5 h-5 text-white"})})})]}):o.jsx("img",{src:N.media_url,alt:"",className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full relative flex items-center justify-center p-3",style:{background:"#0f172a"},children:o.jsx("p",{className:"text-white text-xs font-semibold text-center line-clamp-6",children:N.text_content||"No preview"})}),N.location_label&&o.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black/70 rounded flex items-center gap-1",children:[o.jsx(Ft,{className:"w-3 h-3 text-white"}),o.jsx("span",{className:"text-[10px] text-white font-medium",children:N.location_label})]})]},N.id))}):o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No posts found"}),((A=r.posts)==null?void 0:A.nextCursor)!=null&&o.jsx("button",{onClick:async()=>{var H;const N=await al({q:t.trim(),types:"posts",postsCursor:((H=r.posts)==null?void 0:H.nextCursor)||0,postsLimit:12});s(L=>{var M,U,K;return{...L,posts:{items:[...((M=L.posts)==null?void 0:M.items)||[],...((U=N.sections.posts)==null?void 0:U.items)||[]],nextCursor:((K=N.sections.posts)==null?void 0:K.nextCursor)??null}}})},className:"mt-3 w-full py-2 rounded-lg border border-gray-300 dark:border-gray-700 text-sm",children:"Load more"})]})]})]})}const kR={}.VITE_API_URL||"http://localhost:8000/api";async function SR(e,t=20){const n=new URL(`${kR}/locations/search`);n.searchParams.set("q",e),n.searchParams.set("limit",String(t));const r=await fetch(n.toString());if(!r.ok)throw new Error("Failed to fetch locations");return r.json()}function _R(){const e=nt(),{user:t}=Ke(),[n,r]=x.useState(""),[s,i]=x.useState([]),[a,l]=x.useState(!1),[c,d]=x.useState(-1),u=[{name:"Dublin"},{name:"Cork"},{name:"Galway"},{name:"Limerick"},{name:"Waterford"},{name:"Kilkenny"},{name:"Wexford"},{name:"Kildare"},{name:"Meath"},{name:"Wicklow"},{name:"London"},{name:"Manchester"},{name:"Birmingham"},{name:"Leeds"},{name:"Glasgow"},{name:"Edinburgh"},{name:"Cardiff"},{name:"Bristol"},{name:"Paris"},{name:"Rome"},{name:"Madrid"},{name:"Berlin"},{name:"Amsterdam"},{name:"Brussels"},{name:"Lisbon"},{name:"Vienna"},{name:"Prague"},{name:"Budapest"},{name:"Copenhagen"},{name:"Stockholm"},{name:"Oslo"},{name:"Helsinki"},{name:"Zurich"},{name:"New York"},{name:"Los Angeles"},{name:"Chicago"},{name:"Toronto"},{name:"Vancouver"},{name:"Mexico City"},{name:"Tokyo"},{name:"Seoul"},{name:"Beijing"},{name:"Shanghai"},{name:"Hong Kong"},{name:"Singapore"},{name:"Sydney"},{name:"Melbourne"},{name:"Auckland"}].filter(y=>y.name.toLowerCase().includes(n.toLowerCase()));x.useEffect(()=>{if(!n.trim()){i([]);return}const y=new AbortController,w=setTimeout(async()=>{try{l(!0);const v=await SR(n.trim(),20);y.signal.aborted||i(v)}catch{y.signal.aborted||i([])}finally{y.signal.aborted||l(!1)}},200);return()=>{clearTimeout(w),y.abort()}},[n]);function h(y){console.log("Discover: Selecting location:",y);try{sessionStorage.setItem("pendingLocation",y),window.dispatchEvent(new CustomEvent("locationChange",{detail:{location:y}}))}catch{}e(`/feed?location=${encodeURIComponent(y)}`)}const p=((t==null?void 0:t.name)||"Friend").split("@")[0];return o.jsxs("div",{className:"p-4 space-y-8 min-h-[70vh] flex flex-col items-center justify-center pb-32",children:[o.jsx("div",{className:"flex flex-col items-center gap-3",children:o.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:["Paris","London","Rome","Madrid","Berlin","Tokyo","Dublin","New York","Sydney","Toronto","Singapore","Amsterdam"].map(y=>o.jsxs("button",{onClick:()=>h(y),className:"px-5 py-2 rounded-full bg-gray-900 text-gray-100 hover:bg-gray-800 transition-colors text-sm flex items-center gap-2 shadow-sm",children:[o.jsx(Ft,{className:"w-4 h-4"}),o.jsx("span",{children:y})]},y))})}),o.jsx("div",{className:"text-center",children:o.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight text-sky-400",style:{background:"linear-gradient(90deg, #87ceeb, #ffb6c1, #87cefa, #c084fc, #34d399, #f59e0b, #ef4444, #dc2626, #fca5a5, #60a5fa, #fb7185, #87ceeb)",backgroundSize:"200% 100%",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",animation:"shimmer 6s linear infinite"},children:`Hello, ${p}`})}),o.jsx("div",{className:"h-10"}),o.jsx("div",{className:"fixed bottom-20 left-4 right-4 max-w-md mx-auto z-50",children:o.jsxs("div",{className:"relative rounded-full",children:[o.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-full bg-gradient-to-r from-emerald-500 via-blue-500 to-violet-500 opacity-60 blur-sm animate-pulse"}),o.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-full overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(90deg, transparent, rgba(59,130,246,0.35), transparent)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}})}),o.jsxs("div",{className:"relative",children:[o.jsx(Fp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{value:n,onChange:y=>{r(y.target.value),d(-1)},onKeyDown:y=>{if(y.key==="ArrowDown"){y.preventDefault();const w=Math.min(8,s.length)||Math.min(6,u.length);w>0&&d(v=>(v+1)%w)}else if(y.key==="ArrowUp"){y.preventDefault();const w=Math.min(8,s.length)||Math.min(6,u.length);w>0&&d(v=>(v-1+w)%w)}else if(y.key==="Enter"){const w=s.length>0?s.slice(0,8):u.slice(0,6).map(m=>({name:m.name,type:"city"})),v=c>=0&&w[c]?w[c].name:n.trim();v&&h(v)}},placeholder:"Discover other locations...",className:"w-full pl-10 pr-4 py-3 rounded-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-md border border-transparent"}),n&&(s.length>0||u.length>0)&&o.jsx("div",{className:"absolute left-0 right-0 mt-2 rounded-2xl bg-white/95 dark:bg-gray-900/95 shadow-xl ring-1 ring-black/5 backdrop-blur-md overflow-hidden",children:o.jsxs("ul",{className:"divide-y divide-gray-100/60 dark:divide-gray-800/60",children:[s.slice(0,8).map((y,w)=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>h(y.name),className:`w-full flex items-center gap-3 px-4 py-3 text-left ${c===w?"bg-gray-100 dark:bg-gray-800/70":"hover:bg-gray-50 dark:hover:bg-gray-800/70"}`,children:[o.jsx(Ft,{className:"w-4 h-4 text-sky-500"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:y.name}),o.jsxs("span",{className:"text-[11px] text-gray-500 capitalize",children:[y.type,y.country?`  ${y.country}`:""]})]})]})},`${y.type}-${y.name}`)),s.length===0&&u.slice(0,6).map((y,w)=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>h(y.name),className:`w-full flex items-center gap-3 px-4 py-3 text-left ${c===w?"bg-gray-100 dark:bg-gray-800/70":"hover:bg-gray-50 dark:hover:bg-gray-800/70"}`,children:[o.jsx(Ft,{className:"w-4 h-4 text-sky-500"}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:y.name})]})},y.name))]})})]})]})}),o.jsx("div",{className:"h-24"})]})}function ER(){var F,Z;const{user:e}=Ke(),t=nt(),r=(F=Kt().state)==null?void 0:F.openUserHandle,[s,i]=x.useState([]),[a,l]=x.useState(0),[c,d]=x.useState(0),[f,u]=x.useState(!0),[h,p]=x.useState(!1),[y,w]=x.useState(0),[v,m]=x.useState(!1),[g,b]=x.useState(!0),[k,T]=x.useState(!1),[E,S]=x.useState(!1),[I,q]=x.useState(""),[A,N]=x.useState(!0),H=x.useRef(null),L=x.useRef(0),M=x.useRef(!1);x.useEffect(()=>{M.current=v},[v]);const U=x.useCallback(async()=>{if(!(e!=null&&e.id)){u(!1);return}try{const P=await yI(e.id);let ee=await BI(e.id,P);if(r){const le=await PI(r);le&&ee.findIndex(z=>z.userHandle===r)===-1&&ee.push(le)}const X=ee.map(le=>le.userId===e.id&&e.avatarUrl?{...le,avatarUrl:e.avatarUrl}:le);i(X)}catch(P){console.error("Error loading stories:",P)}finally{u(!1)}},[e==null?void 0:e.id,e==null?void 0:e.avatarUrl,r]);x.useEffect(()=>{U()},[U]),x.useEffect(()=>{if(r&&s.length>0){const P=s.find(ee=>ee.userHandle===r);P&&K(P)}},[r,s.length]);async function K(P){if(!P||!(e!=null&&e.id)||!P.stories||P.stories.length===0)return;const ee=await AI(e.id,P.userId);if(!ee||ee.length===0)return;const X=s.findIndex(le=>le.userId===P.userId);X!==-1&&(i(le=>{const j=[...le];return j[X]={...P,stories:ee,avatarUrl:P.avatarUrl},j}),l(X),d(0),p(!0),w(0),m(!1),b(!0),L.current=0)}function re(){p(!1),w(0),m(!1),b(!0),L.current=0,r&&(window.dispatchEvent(new CustomEvent("storiesViewed",{detail:{userHandle:r}})),t(-1))}function D(){const P=s[a];P&&(c<P.stories.length-1?(d(c+1),w(0),b(!0),L.current=0):a<s.length-1?(l(a+1),d(0),w(0),b(!0),L.current=0):re())}function Y(){if(c>0)d(c-1),w(0),b(!0),L.current=0;else if(a>0){l(a-1);const P=s[a-1];d((P==null?void 0:P.stories.length)-1||0),w(0),b(!0),L.current=0}}async function $(P){if(!(!R||!(e!=null&&e.id)||!(e!=null&&e.handle)))try{await OI(R.id,e.id,e.handle,P),T(!1);const ee=await LI(e.id);i(ee)}catch(ee){console.error("Error adding reaction:",ee)}}async function Q(){if(!(!R||!(e!=null&&e.id)||!(e!=null&&e.handle)||!I.trim()))try{await FI(R.id,e.id,e.handle,I);const P=C==null?void 0:C.userHandle;P&&(await pi(e.handle,P,{text:I,imageUrl:R.mediaUrl}),await pi(P,e.handle,{text:"You replied to their story",isSystemMessage:!0}),El==null||El("Reply sent")),q(""),S(!1)}catch(P){console.error("Error adding reply:",P)}}x.useEffect(()=>{if(!h||!(e!=null&&e.id))return;const P=s[a];if(!P||!P.stories)return;const ee=P.stories[c];if(!ee)return;L.current=0,w(0),MI(ee.id,e.id).catch(console.error),DI(ee.id).catch(console.error);const X=15e3,le=50,j=setInterval(()=>{if(M.current)return;L.current+=le;const z=Math.min(L.current/X*100,100);w(z),z>=100&&(clearInterval(j),L.current=0,setTimeout(()=>{D()},300))},le);return()=>clearInterval(j)},[h,a,c,s,e==null?void 0:e.id]),x.useEffect(()=>{if(!h)return;let P;const ee=()=>{N(!0),P&&window.clearTimeout(P),P=window.setTimeout(()=>N(!1),2e3)};ee();const X=()=>ee();return window.addEventListener("mousemove",X),window.addEventListener("touchstart",X,{passive:!0}),window.addEventListener("keydown",X),()=>{P&&window.clearTimeout(P),window.removeEventListener("mousemove",X),window.removeEventListener("touchstart",X),window.removeEventListener("keydown",X)}},[h]),x.useEffect(()=>{if(!h)return;function P(ee){var j;const X=ee.target,le=(j=X==null?void 0:X.tagName)==null?void 0:j.toLowerCase();le==="input"||le==="textarea"||X!=null&&X.isContentEditable||(ee.key==="ArrowLeft"?(ee.preventDefault(),Y()):ee.key==="ArrowRight"?(ee.preventDefault(),D()):ee.key==="Escape"?(ee.preventDefault(),re()):ee.key===" "&&(ee.preventDefault(),m(z=>!z)))}return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[h,a,c,s]),x.useEffect(()=>{var P;if(!(!h||!H.current))try{const ee=s[a],X=(P=ee==null?void 0:ee.stories)==null?void 0:P[c];(X==null?void 0:X.mediaType)==="video"&&(v?H.current.pause().catch(()=>{}):H.current.play().catch(()=>{}))}catch(ee){console.error("Error controlling video:",ee)}},[v,h,a,c,s]);const fe=x.useMemo(()=>[...s].filter(P=>P.stories&&P.stories.length>0).sort((P,ee)=>{const X=P.stories.length>0?Math.max(...P.stories.map(j=>j.createdAt)):0;return(ee.stories.length>0?Math.max(...ee.stories.map(j=>j.createdAt)):0)-X}),[s]),B=P=>{const ee=Math.floor((Date.now()-P)/1e3);return ee<60?"Active now":ee<3600?`Active ${Math.floor(ee/60)}m ago`:ee<86400?`Active ${Math.floor(ee/3600)}h ago`:ee<604800?`Active ${Math.floor(ee/86400)}d ago`:`Active ${Math.floor(ee/604800)}w ago`};if(f)return o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading stories..."})]})});if(!e)return o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please sign in to view stories."}),o.jsx("button",{onClick:()=>t("/login"),className:"mt-4 px-4 py-2 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 text-white font-medium hover:opacity-90 transition-opacity",children:"Sign In"})]})});const C=s[a],R=(Z=C==null?void 0:C.stories)==null?void 0:Z[c],J=s.length>0;return h&&R&&C&&C.stories?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"fixed inset-0 bg-black z-50",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gray-900 z-50 flex gap-1 px-3 py-3",children:C.stories.map((P,ee)=>o.jsx("div",{className:"flex-1 bg-gray-800 rounded-full overflow-hidden relative h-1",children:o.jsx("div",{className:"h-full transition-all",style:ee<c?{width:"100%",background:"#ffffff",transitionDuration:"100ms"}:ee===c&&!v&&y>0?{width:`${y}%`,background:"linear-gradient(to right, #10b981, #3b82f6, #1d4ed8)",transitionDuration:"50ms"}:{width:ee===c?`${y}%`:"0%",background:ee===c?"rgba(255,255,255,0.5)":"#4b5563",transitionDuration:"100ms"}})},P.id))}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("div",{className:"relative w-[90vw] max-w-[420px] aspect-[9/16] rounded-[32px] pt-[16px] pr-[16px] pl-[16px] pb-[40px] bg-gradient-to-b from-green-500 via-blue-500 to-blue-600 shadow-[0_0_64px_rgba(59,130,246,0.55)]",children:[o.jsx("div",{className:"absolute inset-0 -z-10 rounded-[32px] blur-2xl opacity-50 bg-gradient-to-b from-green-500 via-blue-500 to-blue-600"}),o.jsx("div",{className:"w-full h-full rounded-[24px] overflow-hidden bg-black/80",children:(R==null?void 0:R.mediaType)==="video"?o.jsx("video",{ref:H,src:R==null?void 0:R.mediaUrl,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:g,playsInline:!0}):o.jsx("img",{src:R==null?void 0:R.mediaUrl,alt:"",className:"w-full h-full object-cover select-none",draggable:!1})})]})}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-black/60"})}),o.jsx("div",{className:"absolute top-16 left-0 right-0 px-6 z-50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(gt,{src:C==null?void 0:C.avatarUrl,name:(C==null?void 0:C.name)||"User",size:"sm"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:C==null?void 0:C.userHandle}),(R==null?void 0:R.location)&&o.jsx("p",{className:"text-white/70 text-xs",children:R.location})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[(R==null?void 0:R.mediaType)==="video"&&o.jsx("button",{onClick:()=>b(!g),className:"pointer-events-auto p-2 rounded-full hover:bg-white/20 transition-colors",title:g?"Unmute":"Mute",children:g?o.jsx(dI,{className:"w-6 h-6 text-white"}):o.jsx(cI,{className:"w-6 h-6 text-white"})}),o.jsx("button",{onClick:re,className:"pointer-events-auto p-2 rounded-full hover:bg-white/20 transition-colors",children:o.jsx(mt,{className:"w-6 h-6 text-white"})})]})]})}),(R==null?void 0:R.text)&&o.jsx("div",{className:"absolute bottom-20 left-0 right-0 px-6 z-50 pointer-events-none",children:o.jsx("p",{className:`font-semibold ${(R==null?void 0:R.textSize)==="small"?"text-sm":(R==null?void 0:R.textSize)==="large"?"text-2xl":"text-lg"}`,style:{color:(R==null?void 0:R.textColor)||"white",textShadow:"2px 2px 4px rgba(0,0,0,0.8), -1px -1px 0 rgba(0,0,0,0.8), 1px -1px 0 rgba(0,0,0,0.8), -1px 1px 0 rgba(0,0,0,0.8)"},children:R.text})}),o.jsxs("div",{className:`absolute right-4 bottom-10 z-[70] flex flex-col items-center gap-3 transition-opacity duration-200 ${A?"opacity-100":"opacity-0 pointer-events-none"}`,children:[o.jsx("div",{className:"relative p-[2px] rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 shadow-lg",children:o.jsx("button",{onClick:P=>{P.stopPropagation(),$("")},className:"pointer-events-auto w-12 h-12 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center hover:bg-white/20 transition-colors active:scale-95",children:R!=null&&R.userReaction?o.jsx("span",{className:"text-2xl",children:R.userReaction}):o.jsx(_s,{className:"w-6 h-6 text-white"})})}),o.jsx("div",{className:"p-[2px] rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 shadow-lg",children:o.jsx("button",{onClick:P=>{P.stopPropagation(),S(!0)},className:"pointer-events-auto w-12 h-12 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center hover:bg-white/20 transition-colors active:scale-95",children:o.jsx(Hf,{className:"w-6 h-6 text-white"})})}),(R==null?void 0:R.sharedFromPost)&&o.jsx("button",{onClick:P=>{P.stopPropagation(),p(!1),t("/feed")},className:"pointer-events-auto w-12 h-12 rounded-full bg-gradient-to-r from-green-500 via-blue-500 to-blue-600 flex items-center justify-center hover:opacity-90 transition-colors shadow-lg active:scale-95",title:"View full post",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]}),o.jsxs("div",{className:"absolute inset-0 z-40",children:[o.jsx("div",{onClick:()=>m(!v),className:"absolute left-1/3 right-1/3 top-0 bottom-0"}),o.jsx("button",{onClick:P=>{P.stopPropagation(),Y()},className:"absolute left-0 top-0 bottom-0 w-1/4 pointer-events-auto"}),o.jsx("button",{onClick:P=>{P.stopPropagation(),D()},className:"absolute right-0 top-0 bottom-0 w-1/4 pointer-events-auto"})]})]}),E&&R&&o.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-end",onClick:()=>S(!1),children:o.jsxs("div",{className:"w-full bg-white dark:bg-gray-900 rounded-t-3xl p-6 animate-in slide-in-from-bottom duration-300",onClick:P=>P.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Reply to ",C==null?void 0:C.userHandle]}),o.jsx("button",{onClick:()=>S(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:o.jsx(mt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),o.jsx("textarea",{value:I,onChange:P=>q(P.target.value),placeholder:"Type a reply...",className:"w-full h-24 p-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 resize-none focus:ring-2 focus:ring-brand-500 focus:border-transparent",autoFocus:!0}),o.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[o.jsx("button",{onClick:Q,disabled:!I.trim(),className:"flex-1 py-3 rounded-xl bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 text-white font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-opacity",children:"Send Reply"}),(C==null?void 0:C.userHandle)&&o.jsx("button",{onClick:()=>{S(!1),p(!1),t(`/messages/${encodeURIComponent(C.userHandle)}`)},className:"px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"View in chat"})]})]})})]}):o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Stories"}),o.jsx("button",{onClick:()=>t("/feed"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:o.jsx(mt,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),J?o.jsx("div",{className:"space-y-2",children:fe.map((P,ee)=>{if(!P.stories||P.stories.length===0)return null;const X=P.stories.some(z=>!z.hasViewed),le=P.stories.reduce((z,_)=>_.createdAt>z.createdAt?_:z),j=B(le.createdAt);return o.jsxs("button",{onClick:()=>K(P),className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[o.jsx("div",{className:"relative flex-shrink-0",children:X?o.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 p-0.5 animate-pulse",children:o.jsx("div",{className:"w-full h-full rounded-full bg-gray-950 flex items-center justify-center",children:o.jsx(gt,{src:P.avatarUrl,name:P.name,size:"lg"})})}):o.jsx("div",{className:"w-14 h-14 rounded-full",children:o.jsx(gt,{src:P.avatarUrl,name:P.name,size:"lg"})})}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:P.userHandle}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:j})]})]},P.userId)})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 flex items-center justify-center mx-auto mb-4",children:o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-950 flex items-center justify-center",children:o.jsx("div",{className:"w-8 h-8 border-2 border-white/30 rounded-full flex items-center justify-center",children:o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No stories available"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Share your first story to get started!"}),o.jsx("button",{onClick:()=>t("/create"),className:"mt-4 px-6 py-3 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 text-white font-medium hover:opacity-90 transition-opacity",children:"Create Story"})]})]})}function NR(){const e=nt(),{handle:t}=Xh(),{user:n}=Ke(),[r,s]=x.useState(null),[i,a]=x.useState([]),[l,c]=x.useState(!0),[d,f]=x.useState(!1),[u,h]=x.useState({following:0,followers:0,likes:0,views:0}),[p,y]=x.useState(null),[w,v]=x.useState(!1);return x.useEffect(()=>{(async()=>{if(t){c(!0);try{const g=["finglas","dublin","ireland","following"];let b=[];for(const N of g){const L=(await _l(N,null,100,(n==null?void 0:n.id)||"me",(n==null?void 0:n.local)||"",(n==null?void 0:n.regional)||"",(n==null?void 0:n.national)||"")).items.filter(M=>M.userHandle===t);b=[...b,...L]}const k=b.filter((N,H,L)=>H===L.findIndex(M=>M.id===N.id));let T=t===(n==null?void 0:n.handle)?n==null?void 0:n.avatarUrl:void 0;t==="Sarah@Artane"&&(T="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop");let E=t===(n==null?void 0:n.handle)?n==null?void 0:n.bio:void 0,S=t===(n==null?void 0:n.handle)?n==null?void 0:n.socialLinks:void 0;t==="Sarah@Artane"&&(E=" Living in Artane, Dublin! Love exploring Ireland, sharing local spots, and connecting with the community. Food enthusiast  Travel lover  Always up for an adventure!",S={website:"https://sarah-artane.com",x:"@sarah_artane",instagram:"@sarah.artane",tiktok:"@sarah_artane_dublin"});const I=k.reduce((N,H)=>{var L;return N+(((L=H.stats)==null?void 0:L.likes)||0)},0),q=k.reduce((N,H)=>{var L;return N+(((L=H.stats)==null?void 0:L.views)||0)},0),A={handle:t,name:t.split("@")[0],avatarUrl:T,bio:E||void 0,socialLinks:S||void 0,stats:{following:71,followers:43900,likes:I||941800,views:q}};s(A),h({following:A.stats.following,followers:A.stats.followers,likes:A.stats.likes,views:A.stats.views}),a(k)}catch(g){console.error("Error loading profile:",g)}finally{c(!1)}}})()},[t,n==null?void 0:n.id]),x.useEffect(()=>{async function m(){if(t)try{const k=await Yf(t);v(k)}catch(k){console.error("Error checking story:",k)}}m();const g=setInterval(()=>{m()},6e4),b=k=>{var E;const T=(E=k.detail)==null?void 0:E.userHandle;t===T&&v(!1)};return window.addEventListener("storiesViewed",b),()=>{clearInterval(g),window.removeEventListener("storiesViewed",b)}},[t]),l?o.jsx("div",{className:"min-h-screen bg-gray-950 text-white flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):r?o.jsxs("div",{className:"min-h-screen bg-gray-950 text-white",children:[o.jsx("div",{className:"sticky top-0 bg-gray-950 z-10 border-b border-gray-800",children:o.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[o.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-900 rounded-full transition-colors",children:o.jsx(hc,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{className:"p-2 hover:bg-gray-900 rounded-full transition-colors",children:o.jsx(ka,{className:"w-6 h-6"})}),o.jsx("button",{className:"p-2 hover:bg-gray-900 rounded-full transition-colors",children:o.jsx(n1,{className:"w-6 h-6"})})]})]})}),o.jsxs("div",{className:"px-4 py-6",children:[o.jsx("div",{className:`flex justify-center mb-4 ${w?"":"pointer-events-none"}`,children:o.jsx(gt,{src:r.avatarUrl,name:r.name,size:"xl",className:"!w-24 !h-24",hasStory:w,onClick:w?()=>e("/stories",{state:{openUserHandle:t}}):void 0})}),o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("h1",{className:"text-xl font-bold mb-1",children:r.name}),o.jsxs("p",{className:"text-sm text-gray-400 flex items-center justify-center gap-1",children:[o.jsx("span",{children:r.handle}),o.jsx(gc,{value:r.handle===(n==null?void 0:n.handle)?(n==null?void 0:n.countryFlag)||"":c1(r.handle)||"",size:16})]})]}),o.jsxs("div",{className:"flex justify-around mb-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold",children:u.following}),o.jsx("div",{className:"text-xs text-gray-400",children:"Following"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold",children:u.followers>1e3?`${(u.followers/1e3).toFixed(1)}K`:u.followers}),o.jsx("div",{className:"text-xs text-gray-400",children:"Followers"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold",children:u.views>1e3?`${(u.views/1e3).toFixed(1)}K`:u.views}),o.jsx("div",{className:"text-xs text-gray-400",children:"Views"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg font-bold",children:u.likes>1e3?`${(u.likes/1e3).toFixed(1)}K`:u.likes}),o.jsx("div",{className:"text-xs text-gray-400",children:"Likes"})]})]}),o.jsxs("div",{className:"flex gap-2 mb-4 relative z-10",children:[o.jsx("button",{onClick:async()=>{if(!(!(n!=null&&n.id)||!t))try{const m=i[0];m&&await mi(n.id,m.id),f(!d),window.dispatchEvent(new CustomEvent("followToggled",{detail:{handle:t,isFollowing:!d}}))}catch(m){console.error("Error toggling follow:",m)}},className:"flex-1 py-2 rounded-lg font-semibold transition-colors bg-brand-600 hover:bg-brand-700 text-white",children:d?"Following":"Follow"}),o.jsx("button",{onClick:m=>{m.stopPropagation(),m.preventDefault(),t&&e(`/messages/${t}`)},className:"flex-1 py-2 rounded-lg bg-gray-800 text-white font-semibold hover:bg-gray-700 transition-colors relative z-20",children:"Message"})]}),r.bio?o.jsx("div",{className:"mb-4 text-sm",children:o.jsx("p",{className:"text-gray-300",children:r.bio})}):o.jsx("div",{className:"mb-4 text-sm text-gray-500",children:o.jsx("p",{children:"No bio yet"})}),r.socialLinks&&(r.socialLinks.website||r.socialLinks.x||r.socialLinks.instagram||r.socialLinks.tiktok)&&o.jsxs("div",{className:"mb-6 flex flex-wrap gap-3",children:[r.socialLinks.website&&o.jsxs("a",{href:r.socialLinks.website.startsWith("http")?r.socialLinks.website:`https://${r.socialLinks.website}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2 text-sm",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Website"]}),r.socialLinks.x&&o.jsx("a",{href:`https://twitter.com/${r.socialLinks.x.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",title:r.socialLinks.x,children:o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),r.socialLinks.instagram&&o.jsx("a",{href:`https://instagram.com/${r.socialLinks.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",title:r.socialLinks.instagram,children:o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.897 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.897-.419-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.074-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"})})}),r.socialLinks.tiktok&&o.jsx("a",{href:`https://tiktok.com/@${r.socialLinks.tiktok.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",title:r.socialLinks.tiktok,children:o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M16.6 5.82s.51.5 2.13.5V1.63h-2.81v6.94s1.62-.07 2.81-.07v2.81c-1.68 0-2.81.07-2.81.07v3.39c0 3.89-3.53 5.21-6.7 5.21s-6.7-1.32-6.7-5.21c0-3.89 3.53-5.21 6.7-5.21.7 0 1.36.05 1.93.11V9.94h-2.93v2.81c1.24.28 2.03 1.32 2.03 2.29s-.79 2.01-2.03 2.29c-1.24.28-2.03 1.32-2.03 2.29s-.79 2.01-2.03 2.29c-1.24.28-2.03 1.32-2.03 2.29s-.79 2.01-2.03 2.29c-1.24.28-2.03 1.32-2.03 2.29s.79 2.01 2.03 2.29c1.24.28 2.03 1.32 2.03 2.29s-.79 2.01-2.03 2.29c-1.24.28-2.03 1.32-2.03 2.29s.79 2.01 2.03 2.29c1.24.28 2.03 1.32 2.03 2.29s-.79 2.01-2.03 2.29z"})})})]}),o.jsx("div",{className:"border-b border-gray-800 mb-4",children:o.jsx("div",{className:"flex justify-center",children:o.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-400",children:[o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),o.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]})})})]}),o.jsx("div",{className:"px-2",children:o.jsx("div",{className:"grid grid-cols-3 gap-1",children:i.length>0?i.map(m=>o.jsxs("div",{className:"aspect-square relative group cursor-pointer bg-gray-900",onClick:()=>y(m),children:[m.mediaUrl?m.mediaType==="video"?o.jsxs("div",{className:"w-full h-full relative bg-gray-900",children:[o.jsx("video",{src:m.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-16 h-16 bg-black bg-opacity-60 rounded-full flex items-center justify-center hover:bg-opacity-80 transition-opacity",children:o.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M8 5v14l11-7z"})})})}),o.jsxs("div",{className:"absolute bottom-2 right-2 px-2 py-0.5 bg-black bg-opacity-70 rounded flex items-center gap-1",children:[o.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M6.5 4.5a.5.5 0 01.09.09L11 7.5a.5.5 0 110 .92l-4.41 2.91a.5.5 0 11-.59-.81l4.41-2.91L6.91 4.5A.5.5 0 016.5 4.5zm3 0a.5.5 0 01.09.09l5 5a.5.5 0 110 .92l-5 5a.5.5 0 11-.59-.81L13.5 10l-4.41-2.91A.5.5 0 019.5 4.5zm-6 0a.5.5 0 01.09.09l5 5a.5.5 0 11-.59.81L3 5.5l4.41 2.91a.5.5 0 11-.59-.81l-5-5A.5.5 0 010 4.5z"})}),o.jsx("span",{className:"text-xs text-white font-medium",children:"Video"})]}),m.locationLabel&&o.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black bg-opacity-70 rounded flex items-center gap-1",children:[o.jsxs("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),o.jsx("span",{className:"text-xs text-white font-medium",children:m.locationLabel})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("img",{src:m.mediaUrl,alt:"",className:"w-full h-full object-cover"}),m.locationLabel&&o.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black bg-opacity-70 rounded flex items-center gap-1",children:[o.jsxs("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),o.jsx("span",{className:"text-xs text-white font-medium",children:m.locationLabel})]})]}):o.jsxs("div",{className:"w-full h-full relative flex items-center justify-center p-3",style:{background:(()=>{const g=["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#1e293b","#0f172a","#1a202c"];return g[m.text?m.text.length%g.length:0]})()},children:[o.jsx("p",{className:"text-white text-xs font-semibold text-center line-clamp-6",children:m.text||"No preview"}),m.locationLabel&&o.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black bg-opacity-70 rounded flex items-center gap-1",children:[o.jsxs("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),o.jsx("span",{className:"text-xs text-white font-medium",children:m.locationLabel})]})]}),o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity"})]},m.id)):o.jsxs("div",{className:"col-span-3 text-center py-12 text-gray-500",children:[o.jsx("p",{className:"text-lg mb-2",children:"No posts yet"}),o.jsx("p",{className:"text-sm",children:"When this user posts, you'll see them here."})]})})}),p&&o.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",onClick:()=>y(null),children:[o.jsx("button",{onClick:m=>{m.stopPropagation(),y(null)},className:"absolute top-4 left-4 w-10 h-10 bg-black bg-opacity-60 hover:bg-opacity-80 rounded-full flex items-center justify-center transition-colors z-10",children:o.jsx(mt,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"relative max-w-4xl w-full h-full flex items-center justify-center",onClick:m=>m.stopPropagation(),children:[p.mediaUrl?p.mediaType==="video"?o.jsx("video",{src:p.mediaUrl,className:"max-h-[90vh] w-auto",controls:!0,autoPlay:!0}):o.jsx("img",{src:p.mediaUrl,alt:"",className:"max-h-[90vh] w-auto object-contain"}):o.jsx("div",{className:"w-full max-w-2xl p-8",style:{background:(()=>{const m=["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#1e293b","#0f172a","#1a202c"];return m[p.text?p.text.length%m.length:0]})()},children:o.jsx("p",{className:"text-white text-xl font-bold leading-relaxed whitespace-pre-wrap",children:p.text})}),p.text&&p.mediaUrl&&o.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black bg-opacity-70 rounded-lg p-4",children:o.jsx("p",{className:"text-white text-sm",children:p.text})})]})]})]}):o.jsx("div",{className:"min-h-screen bg-gray-950 text-white flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xl mb-4",children:"User not found"}),o.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700",children:"Go Back"})]})})}function jR(e){return pe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M400 421.3V154.7c0-23.5-19.2-42.7-42.7-42.7H90.7C67.2 112 48 131.2 48 154.7v266.7c0 23.5 19.2 42.7 42.7 42.7h266.7c23.4-.1 42.6-19.3 42.6-42.8zM157.3 304l45.3 64 66.7-96 88 128H90.7l66.6-96z"}},{tag:"path",attr:{d:"M421.3 48H154.7C131.2 48 112 67.2 112 90.7V96h261.3c23.5 0 42.7 19.2 42.7 42.7V400h5.3c23.5 0 42.7-19.2 42.7-42.7V90.7c0-23.5-19.2-42.7-42.7-42.7z"}}]})(e)}function CR(e){return pe({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}},{tag:"path",attr:{d:"M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"}}]})(e)}function TR(e){return pe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function IR(e){return pe({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}}]})(e)}function RR(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 3H4.99C3.89 3 3 3.9 3 5l.01 14c0 1.1.89 2 1.99 2h10l6-6V5c0-1.1-.9-2-2-2zM7 8h10v2H7V8zm5 6H7v-2h5v2zm2 5.5V14h5.5L14 19.5z"}}]})(e)}function LR(e){return pe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"}}]})(e)}function AR(){const e=nt(),{handle:t}=Xh(),{user:n}=Ke(),[r,s]=oe.useState([]),[i,a]=oe.useState({}),[l,c]=oe.useState(""),[d,f]=oe.useState(!0),[u,h]=oe.useState(void 0),p=x.useRef(null),y=x.useRef(null),[w,v]=oe.useState(null),m=x.useRef(null),[g,b]=oe.useState(!1),k=x.useCallback(()=>{const B=y.current;if(!B)return;const C=()=>{B&&(B.scrollTop=B.scrollHeight)};C(),requestAnimationFrame(()=>{C(),setTimeout(()=>{C()},100)})},[]),T=x.useRef(null),E=x.useRef(0),S=x.useRef(null);x.useLayoutEffect(()=>{if(r.length>0&&!d){const B=r.length,C=r[r.length-1],R=(C==null?void 0:C.id)||null,J=B!==E.current,F=R!==T.current;if(J||F){E.current=B,T.current=R;const Z=()=>{const P=y.current;if(!P)return;const ee=P.scrollHeight,X=document.querySelector(".fixed.bottom-0.bg-gray-900"),le=X?X.getBoundingClientRect().height:80;P.scrollTop=ee,P.scrollTo({top:ee,behavior:"instant"}),requestAnimationFrame(()=>{P.scrollTop=ee});const j=S.current;j&&requestAnimationFrame(()=>{j.scrollIntoView({behavior:"instant",block:"end",inline:"nearest"}),requestAnimationFrame(()=>{setTimeout(()=>{const z=j.getBoundingClientRect(),_=P.getBoundingClientRect(),O=window.innerHeight,ce=document.querySelector(".fixed.bottom-0.bg-gray-900"),te=ce?ce.getBoundingClientRect().height:le,ie=O-te,se=z.top-_.top+P.scrollTop+z.height,me=ie-_.top-150,_e=se-me;P.scrollTop=_e,P.scrollTo({top:_e,behavior:"instant"}),requestAnimationFrame(()=>{P.scrollTop=_e,P.scrollTo({top:_e,behavior:"instant"})}),_e>P.scrollTop&&setTimeout(()=>{const be=j.getBoundingClientRect(),Pe=P.getBoundingClientRect(),De=document.querySelector(".fixed.bottom-0.bg-gray-900"),Ht=De?De.getBoundingClientRect().height:te,qe=window.innerHeight-Ht-Pe.top-180,Nn=be.top-Pe.top+P.scrollTop+be.height;if(Nn>P.scrollTop+qe){const pn=Nn-qe;P.scrollTop=pn,P.scrollTo({top:pn,behavior:"instant"}),requestAnimationFrame(()=>{Math.abs(P.scrollTop-pn)>1&&(P.scrollTop=pn,P.scrollTo({top:pn,behavior:"instant"}),setTimeout(()=>{P.scrollTop=pn,P.scrollTo({top:pn,behavior:"instant"})},50))})}},150)},50)})})};requestAnimationFrame(()=>{Z(),setTimeout(Z,50),setTimeout(Z,150),setTimeout(Z,300)})}}},[r,d]),x.useEffect(()=>{const B=y.current;if(!B)return;const C=new MutationObserver(()=>{const R=B.scrollHeight,J=B.scrollTop,F=B.clientHeight,Z=R-F;Math.abs(J-Z)<100&&Z>0&&requestAnimationFrame(()=>{B.scrollTop=R;const ee=S.current;if(ee){const X=document.querySelector(".fixed.bottom-0.bg-gray-900"),le=X?X.getBoundingClientRect().height:80;requestAnimationFrame(()=>{const j=ee.getBoundingClientRect(),_=window.innerHeight-le,O=B.getBoundingClientRect(),te=j.top-O.top+B.scrollTop+j.height,se=_-O.top-150,G=te-se;B.scrollTop=G,B.scrollTo({top:G,behavior:"instant"}),requestAnimationFrame(()=>{B.scrollTop=G,B.scrollTo({top:G,behavior:"instant"})}),G>B.scrollTop&&setTimeout(()=>{const de=ee.getBoundingClientRect(),me=B.getBoundingClientRect(),_e=document.querySelector(".fixed.bottom-0.bg-gray-900"),be=_e?_e.getBoundingClientRect().height:le,Jt=window.innerHeight-be-me.top-180,at=de.top-me.top+B.scrollTop+de.height;if(at>B.scrollTop+Jt){const qe=at-Jt;B.scrollTop=qe,B.scrollTo({top:qe,behavior:"instant"}),requestAnimationFrame(()=>{Math.abs(B.scrollTop-qe)>1&&(B.scrollTop=qe,B.scrollTo({top:qe,behavior:"instant"}))})}},150)})}})});return C.observe(B,{childList:!0,subtree:!0,attributes:!1,characterData:!1}),()=>C.disconnect()},[]),x.useEffect(()=>{async function B(){t&&t==="Sarah@Artane"&&h("https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop")}if(B(),!t||!(n!=null&&n.handle))return;X0(n.handle,t).then(R=>{const F=[...R].sort((P,ee)=>P.timestamp-ee.timestamp).map(P=>({...P,isFromMe:P.senderHandle===n.handle,senderAvatar:P.senderHandle===n.handle?n.avatarUrl||nr(n.handle):nr(t)}));s(F),f(!1),E.current=F.length,T.current=F.length>0?F[F.length-1].id:null,setTimeout(k,0),fI(n.handle,t).catch(()=>{});const Z=Array.from(new Set(F.map(P=>P.imageUrl).filter(Boolean)));Promise.all(Z.map(async P=>[P,await ey(P)])).then(P=>a(Object.fromEntries(P)))});const C=R=>{var F;const J=((F=R.detail)==null?void 0:F.participants)||[];!J.includes((n==null?void 0:n.handle)||"")||!J.includes(t||"")||X0(n.handle,t).then(Z=>{const ee=[...Z].sort((j,z)=>j.timestamp-z.timestamp).map(j=>({...j,isFromMe:j.senderHandle===n.handle,senderAvatar:j.senderHandle===n.handle?n.avatarUrl||nr(n.handle):nr(t)}));E.current=0,T.current=null,s(ee);const X=()=>{const j=y.current;if(!j)return;const z=j.scrollHeight;j.scrollTop=z;const _=S.current;if(_){const O=document.querySelector(".fixed.bottom-0.bg-gray-900"),ce=O?O.getBoundingClientRect().height:80;setTimeout(()=>{const te=_.getBoundingClientRect(),ae=window.innerHeight-ce;if(te.bottom>ae){const se=te.bottom-ae+20;j.scrollTop=j.scrollTop+se}},10)}};setTimeout(X,50),setTimeout(X,150),setTimeout(X,300);const le=Array.from(new Set(ee.map(j=>j.imageUrl).filter(Boolean)));Promise.all(le.map(async j=>[j,await ey(j)])).then(j=>a(Object.fromEntries(j)))})};return window.addEventListener("conversationUpdated",C),()=>window.removeEventListener("conversationUpdated",C)},[t,n==null?void 0:n.handle,k]);const I=async()=>{if(!l.trim()||!(n!=null&&n.handle)||!t)return;const B={id:`temp-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,senderHandle:n.handle,text:l,timestamp:Date.now(),isFromMe:!0,senderAvatar:n.avatarUrl||nr(n.handle),isSystemMessage:!1};s(C=>[...C,B].sort((J,F)=>J.timestamp-F.timestamp)),c(""),setTimeout(()=>k(),100),await pi(n.handle,t,{text:l})},q=async B=>{if(!(n!=null&&n.handle)||!t)return;const C={id:`temp-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,senderHandle:n.handle,text:B,timestamp:Date.now(),isFromMe:!0,senderAvatar:n.avatarUrl||nr(n.handle),isSystemMessage:!1};s(R=>[...R,C].sort((F,Z)=>F.timestamp-Z.timestamp)),b(!1),setTimeout(()=>k(),100),await pi(n.handle,t,{text:B})},A=()=>{var B;(B=p.current)==null||B.click()},N=B=>{var J;const C=(J=B.target.files)==null?void 0:J[0];if(!C)return;const R=new FileReader;R.onloadend=()=>{const F=R.result;if(!(n!=null&&n.handle)||!t)return;const Z={id:`temp-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,senderHandle:n.handle,imageUrl:F,timestamp:Date.now(),isFromMe:!0,senderAvatar:n.avatarUrl||nr(n.handle),isSystemMessage:!1};s(P=>[...P,Z].sort((X,le)=>X.timestamp-le.timestamp)),setTimeout(()=>k(),100),pi(n.handle,t,{imageUrl:F})},R.readAsDataURL(C)},H=B=>{const C=new Date(B),J=new Date().getTime()-C.getTime(),F=Math.floor(J/(1e3*60*60*24));return F===0?"Today "+C.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):F===1?"Yesterday "+C.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][C.getDay()]+" "+C.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},L=(B,C)=>{C.preventDefault(),C.stopPropagation(),v({message:B,x:C.type==="touchstart"?C.touches[0].clientX:C.clientX,y:C.type==="touchstart"?C.touches[0].clientY:C.clientY})},M=(B,C)=>{C.preventDefault(),C.stopPropagation(),v({message:B,x:C.clientX,y:C.clientY})},U=(B,C)=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{L(B,C)},500)},K=()=>{m.current&&(clearTimeout(m.current),m.current=null)},re=()=>{v(null)},D=()=>{w!=null&&w.message&&(c(`Replying to: ${w.message.text||"message"} - `),re())},Y=()=>{if(!(w!=null&&w.message))return;const B=w.message.text||"";B&&navigator.clipboard.writeText(B).then(()=>{}),re()},$=()=>{w!=null&&w.message&&re()},Q=()=>{w!=null&&w.message&&re()},fe=()=>{w!=null&&w.message&&(confirm("Report this message?"),re())};return x.useEffect(()=>{const B=()=>{w&&re()};if(w)return document.addEventListener("click",B),document.addEventListener("contextmenu",B),()=>{document.removeEventListener("click",B),document.removeEventListener("contextmenu",B)}},[w]),d?o.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):o.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[o.jsx("div",{className:"sticky top-0 bg-black border-b border-gray-800 z-10",children:o.jsxs("div",{className:"flex items-center px-4 py-3",children:[o.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-900 rounded-full transition-colors",children:o.jsx(hc,{className:"w-6 h-6"})}),t&&o.jsxs("div",{className:"flex items-center ml-3 flex-1",children:[o.jsx(gt,{src:u,name:t,size:"sm"}),o.jsx("div",{className:"ml-3 flex-1",children:o.jsx("div",{className:"flex items-center gap-1",children:o.jsx("span",{className:"font-medium",children:t})})})]})]})}),o.jsx("div",{ref:y,className:"flex-1 overflow-y-auto px-4 py-4 pb-40",style:{minHeight:0,maxHeight:"calc(100vh - 120px)"},children:o.jsx("div",{className:"space-y-3",children:r.map((B,C)=>{const R=C===0||B.timestamp-r[C-1].timestamp>6e4,J=C===r.length-1;return o.jsxs(x.Fragment,{children:[R&&B.isSystemMessage&&o.jsx("div",{className:"text-center py-2",children:o.jsx("span",{className:"text-xs text-gray-400",children:H(B.timestamp)})}),B.isSystemMessage&&o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-white text-sm",children:B.text})}),!B.isSystemMessage&&o.jsx("div",{ref:J?S:null,className:`flex ${B.isFromMe?"justify-end":"justify-start"} ${R?"mt-4":""}`,children:B.isFromMe?o.jsxs("div",{className:"bg-purple-600 rounded-2xl px-4 py-2 max-w-[70%] break-words cursor-pointer select-none",onContextMenu:F=>M(B,F),onTouchStart:F=>U(B,F),onTouchEnd:K,onTouchCancel:K,children:[B.imageUrl&&o.jsxs("div",{className:"relative mb-2",children:[o.jsx("img",{src:B.imageUrl,alt:"Sent image",className:"max-w-full rounded-lg"}),B.imageUrl&&ty(B.imageUrl)&&i[B.imageUrl]===!1&&o.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-[10px] text-white/90 px-2 py-1 rounded",children:"Story unavailable"})})]}),B.text&&o.jsx("p",{className:"text-white text-sm",children:B.text})]}):o.jsxs("div",{className:"flex items-start gap-2 max-w-[70%]",children:[B.senderAvatar&&o.jsx(gt,{src:B.senderAvatar,name:B.senderHandle,size:"sm"}),o.jsxs("div",{className:"bg-gray-800 rounded-2xl px-4 py-2 break-words cursor-pointer select-none",onContextMenu:F=>M(B,F),onTouchStart:F=>U(B,F),onTouchEnd:K,onTouchCancel:K,children:[B.imageUrl&&o.jsxs("div",{className:"relative mb-2",children:[o.jsx("img",{src:B.imageUrl,alt:"Received image",className:"max-w-full rounded-lg"}),B.imageUrl&&ty(B.imageUrl)&&i[B.imageUrl]===!1&&o.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-[10px] text-white/90 px-2 py-1 rounded",children:"Story unavailable"})})]}),B.text&&o.jsx("p",{className:"text-white text-sm",children:B.text})]})]})})]},B.id)})})}),o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900 border-t border-gray-800 px-4 py-3 z-20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[o.jsx("input",{type:"text",value:l,onChange:B=>c(B.target.value),onKeyPress:B=>{B.key==="Enter"&&I()},placeholder:"Message...",className:"flex-1 bg-gray-800 text-white placeholder-gray-500 px-4 py-2 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-600"}),l.trim()&&o.jsx("button",{onClick:I,className:"text-purple-600 hover:text-purple-500 transition-colors",children:o.jsx(ta,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"flex items-center gap-2",children:!l.trim()&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:A,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(jR,{className:"w-6 h-6 text-gray-400"})}),o.jsx("button",{className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(CR,{className:"w-6 h-6 text-gray-400"})}),o.jsx("input",{type:"file",ref:p,onChange:N,accept:"image/*",className:"hidden"})]})})]})}),w&&o.jsx("div",{className:"fixed bg-gray-900 border border-gray-700 rounded-lg shadow-2xl z-50 min-w-[200px]",style:{left:`${w.x}px`,top:`${w.y}px`,transform:"translate(-50%, -10px)"},onClick:B=>B.stopPropagation(),children:o.jsxs("div",{className:"py-2",children:[w.message&&o.jsx("div",{className:"px-4 py-2 text-xs text-gray-400 border-b border-gray-700",children:H(w.message.timestamp)}),o.jsxs("button",{onClick:D,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[o.jsx(Jb,{className:"w-5 h-5"}),o.jsx("span",{children:"Reply"})]}),o.jsxs("button",{onClick:()=>{b(!0),re()},className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[o.jsx(RR,{className:"w-5 h-5"}),o.jsx("span",{children:"Add sticker"})]}),o.jsxs("button",{onClick:$,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[o.jsx(IR,{className:"w-5 h-5"}),o.jsx("span",{children:"Forward"})]}),o.jsxs("button",{onClick:Y,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[o.jsx(Qb,{className:"w-5 h-5"}),o.jsx("span",{children:"Copy"})]}),o.jsxs("button",{onClick:Q,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[o.jsx(LR,{className:"w-5 h-5"}),o.jsx("span",{children:"Translate"})]}),o.jsxs("button",{onClick:fe,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-red-500 border-t border-gray-700",children:[o.jsx(TR,{className:"w-5 h-5"}),o.jsx("span",{children:"Report"})]}),o.jsxs("button",{onClick:()=>{re()},className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[o.jsx(n1,{className:"w-5 h-5"}),o.jsx("span",{children:"More"})]})]})}),g&&o.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end justify-center",onClick:()=>b(!1),children:o.jsxs("div",{className:"bg-gray-900 rounded-t-3xl w-full max-w-md max-h-[60vh] overflow-y-auto",onClick:B=>B.stopPropagation(),children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700 px-4 py-3 flex items-center justify-between",children:[o.jsx("h3",{className:"text-white font-semibold",children:"Add Sticker"}),o.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-white",children:o.jsx(hc,{className:"w-6 h-6 rotate-180"})})]}),o.jsx("div",{className:"p-4 grid grid-cols-4 gap-4",children:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].map(B=>o.jsx("button",{onClick:()=>q(B),className:"text-4xl hover:bg-gray-800 rounded-2xl p-4 transition-colors flex items-center justify-center aspect-square",children:B},B))}),o.jsxs("div",{className:"p-4 border-t border-gray-700",children:[o.jsx("h4",{className:"text-white font-semibold mb-3",children:"Hearts"}),o.jsx("div",{className:"grid grid-cols-6 gap-3",children:["","","","","","","","","","","","","","","","","","",""].map(B=>o.jsx("button",{onClick:()=>q(B),className:"text-3xl hover:bg-gray-800 rounded-xl p-3 transition-colors flex items-center justify-center aspect-square",children:B},B))})]}),o.jsxs("div",{className:"p-4 border-t border-gray-700",children:[o.jsx("h4",{className:"text-white font-semibold mb-3",children:"Gestures"}),o.jsx("div",{className:"grid grid-cols-6 gap-3",children:["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].map(B=>o.jsx("button",{onClick:()=>q(B),className:"text-3xl hover:bg-gray-800 rounded-xl p-3 transition-colors flex items-center justify-center aspect-square",children:B},B))})]})]})})]})}const Kr=new Map;function PR(e){if(!e)return!1;const t=e.trim();return/^[\p{Emoji}\p{Emoji_Presentation}\p{Emoji_Modifier_Base}\p{Emoji_Modifier}\p{Emoji_Component}]+$/u.test(t)&&t.length<=10}function MR(e){return e?e.trim().toLowerCase().startsWith("replying to:"):!1}async function DR(e){const t={id:`notif-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,...e,timestamp:Date.now(),read:!1},n=Kr.get(e.toHandle)||[];return n.unshift(t),Kr.set(e.toHandle,n),window.dispatchEvent(new CustomEvent("notificationCreated",{detail:t})),window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{handle:e.toHandle}})),t}async function Kf(e){return Kr.get(e)||[]}async function x1(e,t){const r=(Kr.get(t)||[]).find(s=>s.id===e);r&&(r.read=!0,window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{handle:t}})))}async function w1(e){(Kr.get(e)||[]).forEach(n=>n.read=!0),window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{handle:e}}))}async function OR(e){return(Kr.get(e)||[]).filter(n=>!n.read).length}async function FR(e,t){const r=(Kr.get(t)||[]).filter(s=>s.id!==e);Kr.set(t,r),window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{handle:t}}))}const BR=Object.freeze(Object.defineProperty({__proto__:null,createNotification:DR,deleteNotification:FR,getNotifications:Kf,getUnreadNotificationCount:OR,isReplyToPost:MR,isStickerMessage:PR,markAllNotificationsRead:w1,markNotificationRead:x1},Symbol.toStringTag,{value:"Module"}));function $R(){const e=nt(),{user:t}=Ke(),[n,r]=x.useState([]),[s,i]=x.useState([]),[a,l]=x.useState(!0),[c,d]=x.useState("notifications"),f=x.useCallback(async()=>{if(!(t!=null&&t.handle))return;const[v,m]=await Promise.all([K0(t.handle),Kf(t.handle)]);r(v),i(m),l(!1)},[t==null?void 0:t.handle]);if(x.useEffect(()=>{if(!(t!=null&&t.handle))return;f();const v=()=>{K0(t.handle).then(r)},m=()=>{Kf(t.handle).then(i)};return window.addEventListener("conversationUpdated",v),window.addEventListener("notificationsUpdated",m),()=>{window.removeEventListener("conversationUpdated",v),window.removeEventListener("notificationsUpdated",m)}},[t==null?void 0:t.handle,f]),!t)return o.jsx("div",{className:"p-6",children:"Please sign in to view notifications."});const u=s.filter(v=>!v.read).length,h=n.reduce((v,m)=>v+m.unread,0),p=async v=>{!v.read&&(t!=null&&t.handle)&&(await x1(v.id,t.handle),i(m=>m.map(g=>g.id===v.id?{...g,read:!0}:g))),v.type==="sticker"||v.type==="reply"?e(`/messages/${encodeURIComponent(v.fromHandle)}`):v.type==="dm"&&e(`/messages/${encodeURIComponent(v.fromHandle)}`)},y=v=>{switch(v.type){case"sticker":return`Sent you a sticker: ${v.message||""}`;case"reply":return"Replied to your post";case"dm":return"Sent you a message";default:return v.message||""}},w=v=>{switch(v){case"sticker":return o.jsx(oI,{className:"w-5 h-5 text-purple-500"});case"reply":return o.jsx(Jb,{className:"w-5 h-5 text-blue-500"});case"dm":return o.jsx(Hf,{className:"w-5 h-5 text-green-500"});default:return o.jsx(Hf,{className:"w-5 h-5 text-gray-500"})}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx("button",{onClick:()=>e("/feed"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Back to feed",children:o.jsx(hc,{className:"w-5 h-5"})}),o.jsx("h1",{className:"text-xl font-semibold",children:"Notifications"}),o.jsx("div",{className:"flex-1"}),o.jsx("button",{onClick:async()=>{t!=null&&t.handle&&(await hI(t.handle),await f())},className:"px-3 py-1 text-xs rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700",children:"Add mock DMs"})]}),o.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-800",children:[o.jsxs("button",{onClick:()=>d("notifications"),className:`px-4 py-2 font-medium transition-colors relative ${c==="notifications"?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-300"}`,children:["Notifications",u>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-pink-500 text-white text-xs rounded-full",children:u>9?"9+":u})]}),o.jsxs("button",{onClick:()=>d("conversations"),className:`px-4 py-2 font-medium transition-colors relative ${c==="conversations"?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-300"}`,children:["Messages",h>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-pink-500 text-white text-xs rounded-full",children:h>9?"9+":h})]})]}),a?o.jsx("div",{className:"text-gray-500",children:"Loading"}):c==="notifications"?s.length===0?o.jsx("div",{className:"text-gray-500 text-center py-8",children:"No notifications yet."}):o.jsxs("div",{className:"space-y-2",children:[u>0&&o.jsx("div",{className:"flex justify-end mb-2",children:o.jsx("button",{onClick:async()=>{t!=null&&t.handle&&(await w1(t.handle),await f())},className:"text-xs text-purple-500 hover:text-purple-400",children:"Mark all as read"})}),s.map(v=>o.jsxs("button",{onClick:()=>p(v),className:`w-full text-left flex items-center gap-3 py-3 px-2 rounded-lg transition-colors ${v.read?"hover:bg-gray-100 dark:hover:bg-gray-800":"bg-purple-900/20 hover:bg-purple-900/30 border-l-4 border-purple-500"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:w(v.type)}),o.jsx(gt,{name:v.fromHandle,src:nr(v.fromHandle),size:"sm"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:v.fromHandle}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:y(v)})]}),o.jsxs("div",{className:"flex flex-col items-end gap-1",children:[o.jsx("div",{className:"text-[10px] text-gray-400",children:new Date(v.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),!v.read&&o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"})]})]},v.id))]}):n.length===0?o.jsx("div",{className:"text-gray-500",children:"No conversations yet."}):o.jsx("div",{className:"divide-y divide-gray-800/40",children:n.map(v=>o.jsxs("button",{onClick:()=>e(`/messages/${encodeURIComponent(v.otherHandle)}`),className:"w-full text-left flex items-center gap-3 py-3 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg px-2",children:[o.jsx(gt,{name:v.otherHandle,src:nr(v.otherHandle),size:"sm"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:v.otherHandle}),v.lastMessage&&o.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[v.lastMessage.senderHandle===t.handle?"You: ":"",v.lastMessage.text||(v.lastMessage.imageUrl?"Photo":"Message")]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[v.lastMessage&&o.jsx("div",{className:"text-[10px] text-gray-400",children:new Date(v.lastMessage.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),v.unread>0&&o.jsx("span",{className:"min-w-[18px] h-[18px] px-1 bg-pink-500 text-white text-[10px] leading-[18px] rounded-full text-center",children:v.unread>9?"9+":v.unread})]})]},v.otherHandle))})]})}function UR(){const e=nt(),t=x.useRef(null),n=x.useRef(null),r=x.useRef(null),s=x.useRef([]),i=x.useRef(null),a=x.useRef(!0),[l,c]=x.useState(!1),[d,f]=x.useState(null),[u,h]=x.useState(0),[p,y]=x.useState(0),[w,v]=x.useState(!1),[m,g]=x.useState(!0),b=x.useRef(null),[k,T]=x.useState("user"),[E,S]=x.useState(!0),[I,q]=x.useState(null),[A,N]=x.useState(!1),[H,L]=x.useState(null),M=x.useRef(null),U=x.useRef(null),K=x.useRef(null),re=x.useRef(null),D=x.useRef(null),Y=x.useRef(!1),$=x.useRef(null),[Q,fe]=x.useState(2),[B,C]=x.useState(3),[R,J]=x.useState(!1),F=x.useRef(["https://images.unsplash.com/photo-1519681393784-d120267933ba?w=1200","https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=1200","https://images.unsplash.com/photo-1503264116251-35a269479413?w=1200","https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=1200"]),Z=x.useRef(0);async function P(_,O){try{i.current&&(i.current.getTracks().forEach(te=>te.stop()),i.current=null);const ce=await navigator.mediaDevices.getUserMedia({video:{facingMode:_},audio:O});if(i.current=ce,t.current){t.current.srcObject=ce;try{await t.current.play()}catch{}}}catch(ce){console.error("Stream init error:",ce)}}x.useEffect(()=>{if(!H){$.current=null;return}if(console.log("GS: Loading background from",H.substring(0,50)),H.includes("video")||/\.(mp4|webm|ogg)/i.test(H)){const O=document.createElement("video");O.src=H,O.loop=!0,O.muted=!0,O.playsInline=!0,O.onloadeddata=()=>{console.log("GS: Video background loaded");try{O.play()}catch{}$.current=O},O.onerror=()=>console.error("GS: Video background failed to load")}else{const O=new Image;O.crossOrigin="anonymous",O.onload=()=>{console.log("GS: Image background loaded",O.width,"x",O.height),$.current=O},O.onerror=()=>console.error("GS: Image background failed to load"),O.src=H}},[H]),x.useEffect(()=>{if(!A){re.current&&(clearInterval(re.current),re.current=null),D.current&&(cancelAnimationFrame(D.current),D.current=null);return}let _=!1,O=null;async function ce(){var te;try{window.SelfieSegmentation||await new Promise((me,_e)=>{const be=document.createElement("script");be.src="https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/selfie_segmentation.js",be.onload=()=>me(),be.onerror=()=>_e(new Error("Failed to load mediapipe")),document.body.appendChild(be)});const ie=((te=window.SelfieSegmentation)==null?void 0:te.SelfieSegmentation)||window.SelfieSegmentation;if(!ie)throw new Error("SelfieSegmentation global not found");O=new ie({locateFile:me=>`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${me}`}),O.setOptions({modelSelection:1}),K.current=O,Y.current=!0;const ae=U.current,se=t.current;if(!ae||!se)return;const G=ae.getContext("2d");if(!G)return;O.onResults(me=>{if(_||!ae||!G){console.log("GS: Skipping - cancelled:",_,"canvas:",!!ae,"ctx:",!!G);return}if(!me||!me.segmentationMask||!me.image){console.log("GS: Missing results",{hasMask:!!(me!=null&&me.segmentationMask),hasImage:!!(me!=null&&me.image)});return}const _e=ae.clientWidth||se.videoWidth||640,be=ae.clientHeight||se.videoHeight||480;(ae.width!==_e||ae.height!==be)&&(ae.width=_e,ae.height=be,console.log("GS: Canvas resized to",_e,be)),G.clearRect(0,0,ae.width,ae.height);const Pe=$.current;let De=!1;if(Pe)try{G.save(),G.filter=Q>0?`blur(${Q}px)`:"none",Pe instanceof HTMLImageElement?Pe.complete&&Pe.naturalWidth>0?(G.drawImage(Pe,0,0,ae.width,ae.height),De=!0):console.log("GS: Image not ready yet",{complete:Pe.complete,naturalWidth:Pe.naturalWidth}):Pe instanceof HTMLVideoElement&&(Pe.readyState>=2&&Pe.videoWidth>0?(G.drawImage(Pe,0,0,ae.width,ae.height),De=!0):console.log("GS: Video not ready yet",{readyState:Pe.readyState,videoWidth:Pe.videoWidth})),G.restore()}catch(Rt){console.warn("GS: Background draw error:",Rt)}De||(G.fillStyle="black",G.fillRect(0,0,ae.width,ae.height));const Ht=me.segmentationMask,Jt=me.image;if(Ht&&Jt){const Rt=document.createElement("canvas");Rt.width=ae.width,Rt.height=ae.height;const at=Rt.getContext("2d");at&&(at.drawImage(Jt,0,0,ae.width,ae.height),at.globalCompositeOperation="destination-in",B>0?(at.filter=`blur(${B}px)`,at.drawImage(Ht,0,0,ae.width,ae.height),at.filter="none"):at.drawImage(Ht,0,0,ae.width,ae.height),G.drawImage(Rt,0,0))}}),console.log("GS: Starting segmentation loop");const de=async()=>{if(!(!Y.current||_)){if(t.current&&t.current.readyState>=2)try{await O.send({image:t.current})}catch(me){console.error("GS: Segmentation send error:",me),Y.current=!1;return}D.current=requestAnimationFrame(de)}};D.current=requestAnimationFrame(de)}catch(ie){console.error("Failed to initialize green screen segmentation:",ie),N(!1)}}return ce(),()=>{var te,ie;_=!0,re.current&&(clearInterval(re.current),re.current=null),D.current&&(cancelAnimationFrame(D.current),D.current=null);try{(ie=(te=K.current)==null?void 0:te.close)==null||ie.call(te)}catch{}K.current=null,Y.current=!1}},[A,H]),x.useEffect(()=>(a.current=!0,P(k,E),()=>{if(a.current=!1,t.current&&(t.current.pause(),t.current.srcObject=null),r.current&&r.current.state!=="inactive")try{r.current.stop()}catch{}i.current&&(i.current.getTracks().forEach(_=>{try{_.stop()}catch{}}),i.current=null),d&&URL.revokeObjectURL(d)}),[]);function ee(){var ie,ae;const _=(ie=t.current)==null?void 0:ie.srcObject;if(!_)return;s.current=[];let O={};MediaRecorder.isTypeSupported("video/webm;codecs=vp9,opus")?O={mimeType:"video/webm;codecs=vp9,opus"}:MediaRecorder.isTypeSupported("video/webm;codecs=vp8,opus")?O={mimeType:"video/webm;codecs=vp8,opus"}:MediaRecorder.isTypeSupported("video/webm")?O={mimeType:"video/webm"}:MediaRecorder.isTypeSupported("video/mp4")&&(O={mimeType:"video/mp4"});let ce=_;if(A&&U.current){const se=U.current.captureStream(30),G=(((ae=i.current)==null?void 0:ae.getAudioTracks())||[])[0];G&&se.addTrack(G),ce=se}const te=new MediaRecorder(ce,O);r.current=te,te.ondataavailable=se=>{se.data&&se.data.size>0&&s.current.push(se.data)},te.onstop=()=>{if(s.current.length>0){const se=O.mimeType||"video/webm",G=new Blob(s.current,{type:se}),de=URL.createObjectURL(G);console.log("Preview URL created:",de,"Blob size:",G.size,"Type:",se),f(de)}else console.error("No video chunks recorded")},te.start(100),c(!0)}function X(){r.current&&r.current.state!=="inactive"&&(r.current.stop(),c(!1))}function le(_){if(!isFinite(_))return"0:00";const O=Math.floor(_/60),ce=Math.floor(_%60);return`${O}:${ce.toString().padStart(2,"0")}`}function j(){n.current&&(n.current.paused?n.current.play():n.current.pause())}x.useEffect(()=>{var _;if(d&&n.current){const O=n.current;(_=t.current)!=null&&_.srcObject&&(t.current.srcObject.getTracks().forEach(de=>de.stop()),t.current.srcObject=null);const ce=async()=>{const G=O.duration;h(G);try{await O.play(),v(!0)}catch(de){console.error("Error playing preview video:",de)}},te=()=>{y(O.currentTime)},ie=()=>{v(!0),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{g(!1)},3e3)},ae=()=>{v(!1),b.current&&clearTimeout(b.current),g(!0)},se=async()=>{try{await O.play(),v(!0)}catch(G){console.error("Error playing preview video:",G)}};return O.addEventListener("loadedmetadata",ce),O.addEventListener("loadeddata",se),O.addEventListener("timeupdate",te),O.addEventListener("play",ie),O.addEventListener("pause",ae),O.addEventListener("error",G=>{console.error("Video error:",G)}),()=>{O.removeEventListener("loadedmetadata",ce),O.removeEventListener("loadeddata",se),O.removeEventListener("timeupdate",te),O.removeEventListener("play",ie),O.removeEventListener("pause",ae),b.current&&clearTimeout(b.current)}}},[d,w]);function z(){d&&(i.current&&(i.current.getTracks().forEach(_=>_.stop()),i.current=null),t.current&&(t.current.pause(),t.current.srcObject=null),e("/create/filters",{state:{videoUrl:d,videoDuration:u}}))}return o.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[o.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/80 to-transparent p-4 flex items-center justify-between",children:[o.jsx("button",{onClick:()=>e("/feed"),className:"p-2 bg-black/50 backdrop-blur-sm text-white rounded-full hover:bg-black/70 transition-colors",children:o.jsx(Dp,{className:"w-6 h-6"})}),o.jsx("div",{className:"w-10"})]}),o.jsx("div",{className:"flex-1 flex items-center justify-center bg-black relative",children:d?o.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",onMouseEnter:()=>{g(!0),b.current&&clearTimeout(b.current)},onMouseLeave:()=>{w&&(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{g(!1)},3e3))},onClick:()=>{g(!0),b.current&&clearTimeout(b.current),j()},onTouchStart:()=>{g(!0),b.current&&clearTimeout(b.current)},children:[o.jsx("video",{ref:n,src:d,autoPlay:!0,playsInline:!0,muted:!1,className:"w-full h-full object-contain",loop:!0},d),m&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 transition-opacity",children:o.jsx("button",{onClick:_=>{_.stopPropagation(),j()},className:"w-20 h-20 rounded-full bg-black/60 backdrop-blur-sm flex items-center justify-center hover:bg-black/80 transition-all hover:scale-110 shadow-2xl","aria-label":w?"Pause":"Play",children:w?o.jsx(V0,{className:"w-10 h-10 text-white ml-1"}):o.jsx(q0,{className:"w-10 h-10 text-white ml-1"})})}),o.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/70 to-transparent p-4 transition-opacity ${m?"opacity-100":"opacity-0"}`,onClick:_=>_.stopPropagation(),children:[o.jsx("div",{className:"mb-3",children:o.jsx("div",{className:"w-full h-1 bg-white/20 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-500 transition-all duration-100",style:{width:`${u>0?p/u*100:0}%`}})})}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:_=>{_.stopPropagation(),j()},className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center hover:bg-white/30 transition-colors","aria-label":w?"Pause":"Play",children:w?o.jsx(V0,{className:"w-5 h-5 text-white"}):o.jsx(q0,{className:"w-5 h-5 text-white ml-0.5"})}),o.jsxs("span",{className:"text-white text-sm font-medium tabular-nums",children:[le(p)," / ",le(u)]})]})})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:t,playsInline:!0,muted:!0,className:`w-full h-full ${A?"hidden":"block"} object-cover`}),o.jsx("canvas",{ref:U,className:`${A?"block":"hidden"} absolute inset-0 w-full h-full object-cover`,style:{zIndex:A?10:0}})]})}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-50 bg-gradient-to-t from-black/80 to-transparent p-6 pb-safe",children:[!l&&!d&&o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("button",{onClick:()=>{q(3),setTimeout(()=>q(2),1e3),setTimeout(()=>q(1),2e3),setTimeout(()=>{q(null),ee()},3e3)},className:"w-20 h-20 rounded-full bg-red-600 border-4 border-white shadow-2xl flex items-center justify-center hover:scale-105 transition-transform active:scale-95","aria-label":"Record video",children:o.jsx(K6,{className:"w-10 h-10 text-white",fill:"white"})})}),l&&o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("button",{onClick:X,className:"w-20 h-20 rounded-full bg-gray-900 border-4 border-white shadow-2xl flex items-center justify-center hover:scale-105 transition-transform active:scale-95","aria-label":"Stop recording",children:o.jsx("div",{className:"w-8 h-8 rounded bg-white"})})}),d&&o.jsxs("div",{className:"flex items-center justify-center gap-4 pt-20",children:[o.jsx("button",{onClick:()=>{f(null)},className:"w-16 h-16 rounded-full bg-gray-800/90 backdrop-blur-sm border-2 border-white/30 shadow-2xl flex items-center justify-center hover:scale-105 hover:bg-gray-700 transition-all active:scale-95","aria-label":"Retake",children:o.jsx(mt,{className:"w-7 h-7 text-white"})}),o.jsx("button",{onClick:z,className:"w-16 h-16 rounded-full bg-gradient-to-r from-blue-600 to-blue-500 border-2 border-white/30 shadow-2xl flex items-center justify-center hover:scale-105 hover:from-blue-700 hover:to-blue-600 transition-all active:scale-95","aria-label":"Next",children:o.jsx(X6,{className:"w-7 h-7 text-white"})})]})]}),!d&&o.jsxs("div",{className:"absolute left-2 top-1/4 z-40 flex flex-col gap-3",children:[o.jsx("button",{title:"Flip camera",className:"p-2 rounded-full bg-black/40 text-white hover:bg-black/60",onClick:()=>{const _=k==="user"?"environment":"user";T(_),P(_,E)},children:o.jsx(iI,{className:"w-5 h-5"})}),o.jsx("button",{title:E?"Mute mic":"Unmute mic",className:"p-2 rounded-full bg-black/40 text-white hover:bg-black/60",onClick:()=>{const _=!E;S(_),P(k,_)},children:E?o.jsx(nI,{className:"w-5 h-5"}):o.jsx(tI,{className:"w-5 h-5"})}),o.jsx("button",{title:"Choose Green Screen background",className:`p-2 rounded-full ${A?"bg-green-600":"bg-black/40"} text-white hover:bg-black/60`,onClick:()=>{var _;(_=M.current)==null||_.click()},children:"GS"}),o.jsx("button",{title:"Preset background",className:"p-2 rounded-full bg-black/40 text-white hover:bg-black/60",onClick:()=>{const _=F.current;Z.current=(Z.current+1)%_.length,L(_[Z.current]),N(!0)},children:"PR"}),o.jsx("button",{title:R?"Hide guides":"Show guides",className:`p-2 rounded-full ${R?"bg-white/70 text-black":"bg-black/40 text-white"} hover:bg-black/60`,onClick:()=>J(!R),children:"G"}),o.jsx("input",{ref:M,type:"file",accept:"image/*,video/*",className:"hidden",onChange:_=>{var te;const O=(te=_.target.files)==null?void 0:te[0];if(!O)return;const ce=URL.createObjectURL(O);console.log("GS: File selected",{type:O.type,size:O.size,name:O.name}),L(ce),N(!0)}})]}),A&&o.jsxs("div",{className:"absolute bottom-20 right-2 z-40 bg-black/50 text-white rounded-xl p-3 space-y-3 backdrop-blur",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs mb-1",children:"Background blur"}),o.jsx("input",{type:"range",min:0,max:10,step:1,value:Q,onChange:_=>fe(parseInt(_.target.value))})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs mb-1",children:"Edge feather"}),o.jsx("input",{type:"range",min:0,max:8,step:1,value:B,onChange:_=>C(parseInt(_.target.value))})]})]}),R&&!d&&o.jsx("div",{className:"absolute inset-0 z-30 pointer-events-none",children:o.jsxs("div",{className:"absolute inset-0 grid grid-cols-3 grid-rows-3",children:[o.jsx("div",{className:"border border-white/30"}),o.jsx("div",{className:"border border-white/30"}),o.jsx("div",{className:"border border-white/30"}),o.jsx("div",{className:"border border-white/30"}),o.jsx("div",{className:"border border-white/30"}),o.jsx("div",{className:"border border-white/30"}),o.jsx("div",{className:"border border-white/30"}),o.jsx("div",{className:"border border-white/30"}),o.jsx("div",{className:"border border-white/30"})]})}),I!==null&&o.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/40",children:o.jsx("div",{className:"text-white text-6xl font-bold",children:I})})]})}const zR=[{id:"none",name:"None"},{id:"beauty",name:"Beauty"},{id:"bw",name:"B&W"},{id:"sepia",name:"Sepia"},{id:"vivid",name:"Vivid"},{id:"cool",name:"Cool"},{id:"vignette",name:"Vignette"}],ll=[{id:"none",name:"None",url:""},{id:"tealorange",name:"Teal & Orange",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/teal_orange_16.png",size:16,tiles:4},{id:"film",name:"Film Warm",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/film_warm_16.png",size:16,tiles:4},{id:"bleachbypass",name:"Bleach Bypass",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/bleach_bypass_16.png",size:16,tiles:4},{id:"cinematic",name:"Cinematic",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/cinematic_16.png",size:16,tiles:4},{id:"vintage",name:"Vintage",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/vintage_16.png",size:16,tiles:4},{id:"dramatic",name:"Dramatic",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/dramatic_16.png",size:16,tiles:4},{id:"cooltone",name:"Cool Tone",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/cool_tone_16.png",size:16,tiles:4},{id:"warmtone",name:"Warm Tone",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/warm_tone_16.png",size:16,tiles:4}];function HR(){const e=nt(),{state:t}=Kt(),{videoUrl:n}=t||{},[r,s]=x.useState("none"),[i,a]=x.useState(1),[l,c]=x.useState(1),[d,f]=x.useState(1),[u,h]=x.useState(0);x.useState(.4);const p=x.useRef(null),y=x.useRef(null),w=x.useRef(null),v=x.useRef(null),[m,g]=x.useState(!1),[b,k]=x.useState(!1),[T,E]=x.useState(!1),[S,I]=x.useState(!1),[q,A]=x.useState(null),[N,H]=x.useState(0),L=x.useRef(null),M=x.useRef(null),[U,K]=x.useState(null),[re,D]=x.useState(ll[0]),[Y,$]=x.useState(!0),[Q,fe]=x.useState(!1);if(x.useEffect(()=>{if(!n){e("/create/instant",{replace:!0});return}},[n,e]),!n)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-950",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No video found. Redirecting..."})})});x.useEffect(()=>{if(!n)return;const j=p.current,z=y.current;if(!j||!z){const O=setTimeout(()=>{p.current&&y.current},100);return()=>clearTimeout(O)}let _=null;try{_=z.getContext("webgl")||z.getContext("experimental-webgl")}catch(O){console.error("WebGL context error:",O)}if(_)$(!0);else{$(!1);try{j.play().catch(()=>{})}catch{}return}w.current=_;try{let O=function(Oe,Jn){const mn=_.createShader(Oe);if(!mn)return null;if(_.shaderSource(mn,Jn),_.compileShader(mn),!_.getShaderParameter(mn,_.COMPILE_STATUS)){const Ji=_.getShaderInfoLog(mn);return console.error("Shader compile error:",Ji),_.deleteShader(mn),null}return mn},ce=function(Oe){switch(Oe){case"beauty":return 6;case"bw":return 1;case"sepia":return 2;case"vivid":return 3;case"cool":return 4;case"vignette":return 5;default:return 0}};const te=`
attribute vec2 a_position;
attribute vec2 a_texCoord;
varying vec2 v_tex;
void main() {
  v_tex = vec2(a_texCoord.x, 1.0 - a_texCoord.y);
  gl_Position = vec4(a_position, 0.0, 1.0);
}`,ie=`
precision mediump float;
uniform sampler2D u_tex;
uniform sampler2D u_lut;
uniform float u_brightness;
uniform float u_contrast;
uniform float u_saturation;
uniform float u_hue;
uniform int u_mode; // 0 none, 1 bw, 2 sepia, 3 vivid, 4 cool, 5 vignette, 6 beauty
uniform vec2 u_resolution; // For beauty filter sampling
uniform int u_hasLut;
uniform float u_lutSize;  // e.g., 16.0
uniform float u_lutTiles; // e.g., 4.0 when 16 levels and 4x4 tiles
uniform float u_lutAmount; // 0..1 blend
varying vec2 v_tex;

vec3 rgb2hsv(vec3 c){
  vec4 K = vec4(0., -1./3., 2./3., -1.);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
  float d = q.x - min(q.w, q.y);
  float e = 1.0e-10;
  return vec3(abs(q.z + (q.w - q.y) / (6.*d + e)), d / (q.x + e), q.x);
}
vec3 hsv2rgb(vec3 c){
  vec4 K = vec4(1., 2./3., 1./3., 3.);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6. - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0., 1.), c.y);
}

void main(){
  vec4 tex = texture2D(u_tex, v_tex);
  vec3 col = tex.rgb;

  // hue/sat
  vec3 hsv = rgb2hsv(col);
  hsv.x = fract(hsv.x + u_hue); // hue rotate 0..1
  hsv.y *= u_saturation;
  col = hsv2rgb(hsv);

  // brightness/contrast
  col = (col - 0.5) * u_contrast + 0.5;
  col *= u_brightness;

  if (u_mode == 1) {
    float g = dot(col, vec3(0.299, 0.587, 0.114));
    col = vec3(g);
  } else if (u_mode == 2) {
    col = vec3(
      dot(col, vec3(0.393, 0.769, 0.189)),
      dot(col, vec3(0.349, 0.686, 0.168)),
      dot(col, vec3(0.272, 0.534, 0.131))
    );
  } else if (u_mode == 3) {
    col = clamp(col * vec3(1.1, 1.05, 1.2), 0.0, 1.0);
  } else if (u_mode == 4) {
    // cool tone by shifting hue slightly already covered; add slight blue boost
    col = clamp(col + vec3(-0.03, -0.01, 0.06), 0.0, 1.0);
  } else if (u_mode == 5) {
    vec2 uv = v_tex - 0.5;
    float d = length(uv) * 1.2;
    float vignette = smoothstep(1.0, u_brightness + 0.2 + 0.6, d);
    col *= (1.0 - vignette);
  } else if (u_mode == 6) {
    // Beauty filter: skin smoothing using simple gaussian-like blur
    vec2 texelSize = 1.0 / u_resolution;
    vec3 beauty = vec3(0.0);
    float total = 0.0;
    // Simple 3x3 kernel for skin smoothing
    for (int y = -1; y <= 1; y++) {
      for (int x = -1; x <= 1; x++) {
        vec2 offset = vec2(float(x), float(y)) * texelSize * 2.0;
        vec3 sample = texture2D(u_tex, v_tex + offset).rgb;
        // Weight by distance from center (gaussian-like)
        float weight = 1.0 / (1.0 + (abs(float(x)) + abs(float(y))) * 0.5);
        beauty += sample * weight;
        total += weight;
      }
    }
    beauty /= total;
    // Mix original with smoothed (70% smooth, 30% original for natural look)
    col = mix(col, beauty, 0.7);
    // Slight boost to skin tones (warm colors)
    col = mix(col, col * vec3(1.05, 1.02, 0.98), 0.3);
  }

  // 3D LUT sampling from tiled 2D texture (size x size tiles, each tile size x size)
  if (u_hasLut == 1 && u_lutAmount > 0.0) {
    float size = u_lutSize; // e.g., 16
    float tiles = u_lutTiles; // e.g., 4 when 16 levels
    // Clamp input color to [0,1]
    vec3 c = clamp(col, 0.0, 1.0);
    float blueIndex = c.b * (size - 1.0);
    float sliceX = mod(blueIndex, tiles);
    float sliceY = floor(blueIndex / tiles);
    // inner coords within tile (add half texel offset)
    vec2 tileScale = vec2(1.0 / (tiles * size));
    vec2 pix = c.rg * (size - 1.0) + 0.5;
    vec2 uv = (vec2(sliceX, sliceY) * size + pix) * tileScale;
    vec3 lutColor = texture2D(u_lut, uv).rgb;
    col = mix(col, lutColor, u_lutAmount);
  }

  gl_FragColor = vec4(col, tex.a);
}`,ae=O(_.VERTEX_SHADER,te),se=O(_.FRAGMENT_SHADER,ie);if(!ae||!se)throw new Error("Failed to compile shaders");const G=_.createProgram();if(!G)throw new Error("Failed to create program");if(_.attachShader(G,ae),_.attachShader(G,se),_.linkProgram(G),!_.getProgramParameter(G,_.LINK_STATUS)){const Oe=_.getProgramInfoLog(G);throw console.error("Program link error:",Oe),_.deleteProgram(G),new Error("Failed to link program")}_.useProgram(G);const de=_.createBuffer();_.bindBuffer(_.ARRAY_BUFFER,de),_.bufferData(_.ARRAY_BUFFER,new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),_.STATIC_DRAW);const me=_.getAttribLocation(G,"a_position"),_e=_.getAttribLocation(G,"a_texCoord");_.enableVertexAttribArray(me),_.enableVertexAttribArray(_e),_.vertexAttribPointer(me,2,_.FLOAT,!1,16,0),_.vertexAttribPointer(_e,2,_.FLOAT,!1,16,8);const be=_.createTexture();_.bindTexture(_.TEXTURE_2D,be),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE);const Pe=_.getUniformLocation(G,"u_brightness"),De=_.getUniformLocation(G,"u_contrast"),Ht=_.getUniformLocation(G,"u_saturation"),Jt=_.getUniformLocation(G,"u_hue"),Rt=_.getUniformLocation(G,"u_mode"),at=_.getUniformLocation(G,"u_hasLut"),qe=_.getUniformLocation(G,"u_lutSize"),En=_.getUniformLocation(G,"u_lutTiles"),Nn=_.getUniformLocation(G,"u_lutAmount"),pn=_.getUniformLocation(G,"u_resolution");_.uniform1i(_.getUniformLocation(G,"u_tex"),0),_.uniform1i(_.getUniformLocation(G,"u_lut"),1);const Ce=()=>{const Oe=z.clientWidth,Jn=z.clientHeight;if(Oe===0||Jn===0){v.current=requestAnimationFrame(Ce);return}if((z.width!==Oe||z.height!==Jn)&&(z.width=Oe,z.height=Jn,_.viewport(0,0,Oe,Jn)),j.readyState>=2&&j.videoWidth>0&&j.videoHeight>0)try{_.activeTexture(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,be),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,j)}catch(Ji){console.warn("WebGL texture update error (will retry):",Ji)}_.useProgram(G),_.uniform1f(Pe,i),_.uniform1f(De,l),_.uniform1f(Ht,d),_.uniform1f(Jt,u),_.uniform2f(pn,Oe,Jn);const mn=ce(r);_.uniform1i(Rt,mn),M.current&&U?(_.activeTexture(_.TEXTURE1),_.bindTexture(_.TEXTURE_2D,M.current),_.uniform1i(at,1),_.uniform1f(qe,U.size),_.uniform1f(En,U.tiles),_.uniform1f(Nn,N),_.activeTexture(_.TEXTURE0)):(_.uniform1i(at,0),_.uniform1f(Nn,0)),_.drawArrays(_.TRIANGLE_STRIP,0,4),v.current=requestAnimationFrame(Ce)};if(j.onloadedmetadata=()=>{v.current==null&&Ce()},j.onplay=()=>{v.current==null&&Ce()},j.readyState>=2)Ce();else try{j.play().catch(()=>{})}catch{}}catch(O){console.error("WebGL initialization error:",O),$(!1);try{const ce=p.current;ce&&ce.play().catch(()=>{})}catch{}}return()=>{v.current&&cancelAnimationFrame(v.current)}},[r,i,l,d,u,n,N,U]);async function B(j){var ce;const z=(ce=j.target.files)==null?void 0:ce[0];if(!z)return;const _=URL.createObjectURL(z),O=new Image;O.crossOrigin="anonymous",O.onload=()=>{const te=w.current;if(!te)return;const ie=te.createTexture();te.bindTexture(te.TEXTURE_2D,ie),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MAG_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE);try{te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,0)}catch{}te.texImage2D(te.TEXTURE_2D,0,te.RGBA,te.RGBA,te.UNSIGNED_BYTE,O),M.current=ie;const ae=O.width;let se=16;ae%32===0&&(se=32);const G=Math.sqrt(ae/se),de=Number.isFinite(G)&&Math.round(G)===G;K(de?{size:se,tiles:G}:{size:16,tiles:4}),L.current=O,URL.revokeObjectURL(_)},O.onerror=()=>URL.revokeObjectURL(_),O.src=_}function C(j){if(D(j),!j.url){M.current=null,K(null);return}const z=new Image;z.crossOrigin="anonymous",z.onload=()=>{const _=w.current;if(!_)return;const O=_.createTexture();_.bindTexture(_.TEXTURE_2D,O),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE);try{_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,0)}catch{}if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,z),M.current=O,j.size&&j.tiles)K({size:j.size,tiles:j.tiles});else{const ce=z.width;let te=16;ce%32===0&&(te=32);const ie=Math.sqrt(ce/te),ae=Number.isFinite(ie)&&Math.round(ie)===ie;K(ae?{size:te,tiles:ie}:{size:16,tiles:4})}},z.onerror=()=>{console.warn("Failed to load LUT:",j.url),M.current=null,K(null),H(0)},z.src=j.url}async function R(){if(!y.current||!p.current)return null;A(null),g(!0);const j=y.current,z=p.current;try{z.currentTime=0;const _=z.loop;z.loop=!1,await new Promise(Ce=>{z.readyState>=2?Ce(null):z.onloadeddata=()=>Ce(null)}),await z.play(),await new Promise(Ce=>{if(!z.paused&&z.currentTime>0){Ce();return}const Oe=setInterval(()=>{!z.paused&&z.currentTime>0&&(clearInterval(Oe),Ce())},100);setTimeout(()=>{clearInterval(Oe),Ce()},1e3)}),z.paused&&(console.warn("Video failed to play, retrying..."),await z.play().catch(Ce=>{throw console.error("Video play error:",Ce),new Error("Video failed to play")})),console.log("Video is playing",{currentTime:z.currentTime,paused:z.paused,readyState:z.readyState});let O=0;const ce=30;if(await new Promise(Ce=>{const Oe=()=>{const Jn=w.current,mn=v.current!==null,Ji=z.readyState>=2&&z.videoWidth>0&&z.videoHeight>0,p2=!z.paused&&z.currentTime>0;if(mn&&Ji&&p2&&(O++,O>=5)){console.log("WebGL render loop is running, video is ready, starting export"),Ce();return}if(O>=ce){console.warn("Timeout waiting for WebGL to be ready, proceeding anyway"),Ce();return}requestAnimationFrame(Oe)};setTimeout(()=>Oe(),100)}),z.paused)throw new Error("Video is not playing, cannot export");console.log("Video is ready for export",{readyState:z.readyState,videoWidth:z.videoWidth,videoHeight:z.videoHeight,canvasWidth:j.width,canvasHeight:j.height});const te=N,ie=U;(N>0||U)&&console.log("Temporarily disabling LUT during export to prevent timeout");const ae=isFinite(z.duration)&&z.duration>0?z.duration:60,se=Math.min(ae*3e3,6e4);if(console.log("Export starting",{videoDuration:ae,maxExportTime:se,hasLut:!!U,lutAmount:N}),console.log("Exporting WebGL canvas (color filters only, AR filters skipped during export)"),console.log("Exporting WebGL canvas directly"),console.log("Canvas state before export:",{width:j.width,height:j.height,renderLoopActive:v.current!==null,videoPlaying:!z.paused,videoCurrentTime:z.currentTime}),v.current===null&&(console.warn("Render loop not running, attempting to start..."),z.readyState>=2)){const Ce=()=>{if(!w.current||!p.current||!y.current)return;const Jn=p.current,mn=y.current}}const G=j.captureStream(24);console.log("Stream created:",{active:G.active,id:G.id,getTracks:G.getVideoTracks().length});const de=G.getVideoTracks();if(de.length===0)throw console.error("Stream has no video tracks!"),new Error("Export stream has no video tracks");console.log("Stream has",de.length,"video track(s)");const me=[];let _e="video/webm;codecs=vp9";MediaRecorder.isTypeSupported(_e)||(_e="video/webm;codecs=vp8"),MediaRecorder.isTypeSupported(_e)||(_e="video/webm");const be=new MediaRecorder(G,{mimeType:_e,videoBitsPerSecond:14e5});let Pe=0;be.ondataavailable=Ce=>{Ce.data&&Ce.data.size>0&&(me.push(Ce.data),Pe++,console.log(`Chunk ${Pe} received:`,Ce.data.size,"bytes, total chunks:",me.length))};const De=new Promise(Ce=>{be.onstop=()=>{console.log("MediaRecorder stopped, chunks:",me.length),Ce()}}),Ht=setTimeout(()=>{console.warn("Export timeout, stopping MediaRecorder"),be.state!=="inactive"&&be.stop()},se);be.start(1e3),console.log("MediaRecorder started",{mimeType:_e,state:be.state,videoTracks:G.getVideoTracks().length,audioTracks:G.getAudioTracks().length,streamActive:G.active}),z.paused&&(console.log("Video was paused, resuming..."),await z.play());const Jt=setTimeout(()=>{Pe===0&&be.state==="recording"&&(console.error("No chunks received after 3 seconds - export may be failing"),console.log("Video state:",{paused:z.paused,currentTime:z.currentTime,readyState:z.readyState,ended:z.ended}),console.log("Canvas state:",{width:j.width,height:j.height,renderLoop:v.current!==null}))},3e3),Rt=()=>{console.log("Video ended, stopping export"),clearTimeout(Ht),clearTimeout(Jt),be.state!=="inactive"&&(be.requestData(),be.stop())};z.addEventListener("ended",Rt,{once:!0});const at=setInterval(()=>{z.paused&&!z.ended&&(console.warn("Video paused during export, resuming..."),z.play().catch(Ce=>console.error("Failed to resume video:",Ce))),(z.ended||z.currentTime>=ae-.1&&ae>0)&&(clearInterval(at),clearTimeout(Ht),clearTimeout(Jt),be.state!=="inactive"&&(be.requestData(),be.stop()))},100);if(await De,clearTimeout(Ht),clearInterval(at),console.log("Export finished",{chunks:me.length,totalSize:me.reduce((Ce,Oe)=>Ce+(Oe instanceof Blob?Oe.size:Oe.length||0),0),videoDuration:ae,videoEnded:z.ended}),me.length===0)throw console.error("No chunks recorded"),new Error("Export failed: No video data recorded");const qe=me.reduce((Ce,Oe)=>Ce+(Oe instanceof Blob?Oe.size:Oe.length||0),0);if(qe<1e3)throw console.error("Export chunks too small:",qe),new Error("Export failed: Video data too small");const En=new Blob(me,{type:_e});if(En.size<1e3)throw console.error("Export blob too small:",En.size),new Error("Export failed: Blob too small");const Nn=URL.createObjectURL(En);console.log("Export complete successfully",{blobSize:En.size,url:Nn.substring(0,50)+"...",chunks:me.length,mimeType:_e});const pn=document.createElement("video");return pn.src=Nn,pn.onerror=()=>{console.error("Exported blob URL is invalid"),URL.revokeObjectURL(Nn)},A(Nn),Nn}catch(_){return console.error(_),null}finally{p.current&&(p.current.loop=wasLooping),g(!1)}}function J(){const j=[];return r==="bw"?j.push("grayscale(1)"):r==="sepia"?j.push("sepia(0.8)"):r==="vivid"?j.push("saturate(1.6) contrast(1.1)"):r==="cool"&&j.push("hue-rotate(200deg) saturate(1.2)"),i!==1&&j.push(`brightness(${i})`),l!==1&&j.push(`contrast(${l})`),d!==1&&j.push(`saturate(${d})`),u!==0&&j.push(`hue-rotate(${u*360}deg)`),j.join(" ")}async function F(){try{const j=p.current;if(!j)return null;await new Promise(qe=>{if(j.readyState>=1)return qe();const En=()=>{j.removeEventListener("loadedmetadata",En),qe()};j.addEventListener("loadedmetadata",En),setTimeout(()=>{j.removeEventListener("loadedmetadata",En),qe()},2e3)});const z=document.createElement("canvas"),_=j.videoWidth||720,O=j.videoHeight||1280,ce=Math.max(_,O),te=ce>720?720/ce:1;z.width=Math.round(_*te),z.height=Math.round(O*te);const ie=z.getContext("2d");if(!ie)return null;const ae=J(),se=z.captureStream(24);let G="video/webm;codecs=vp9";MediaRecorder.isTypeSupported(G)||(G="video/webm;codecs=vp8"),MediaRecorder.isTypeSupported(G)||(G="video/webm");const de=new MediaRecorder(se,{mimeType:G,videoBitsPerSecond:12e5}),me=[];de.ondataavailable=qe=>{qe.data&&qe.data.size>0&&me.push(qe.data)};const _e=new Promise(qe=>{de.onstop=()=>qe()});let be=-1,Pe=!1;const De=()=>{if(!(!ie||!j)&&!Pe){if(j.currentTime!==be&&(ie.filter=ae||"none",ie.drawImage(j,0,0,z.width,z.height),be=j.currentTime),j.ended){Pe=!0,de.state!=="inactive"&&de.stop();return}requestAnimationFrame(De)}};j.currentTime=0,j.loop=!1,de.start(500),await j.play(),requestAnimationFrame(De);const Ht=isFinite(j.duration)&&j.duration>0?j.duration:10,Jt=setTimeout(()=>{de.state==="recording"&&de.stop()},Math.min(2e4,Ht*2e3));if(await _e,clearTimeout(Jt),me.length===0)return null;const Rt=new Blob(me,{type:G});if(Rt.size<1e3)return null;const at=URL.createObjectURL(Rt);return A(at),at}catch(j){return console.error("Canvas2D export failed:",j),null}}function Z(){return r!=="none"||i!==1||l!==1||d!==1||u!==0||N>0}async function P(){if(T||S)return;if(E(!0),console.log("handleSendToFeed called",{videoUrl:n,exportUrl:q,hasFilters:Z(),exporting:m,active:r,brightness:i,contrast:l,saturation:d}),!n){console.error("No videoUrl available"),g(!1),E(!1);return}if(m){console.log("Already exporting, waiting..."),E(!1);return}let j=q;const z=Z();if(z){console.log("Filters applied, attempting fast 2D export first...",{active:r,brightness:i,contrast:l,saturation:d});try{const O=p.current;O&&(O.readyState<1||!O.duration||!isFinite(O.duration))&&(console.log("Waiting for video metadata..."),await new Promise(se=>{if(O.readyState>=1&&O.duration&&isFinite(O.duration)){se();return}const G=()=>{O.removeEventListener("loadedmetadata",G),se()};O.addEventListener("loadedmetadata",G),setTimeout(()=>{O.removeEventListener("loadedmetadata",G),se()},2e3)}));const ce=O!=null&&O.duration&&isFinite(O.duration)?O.duration:5,te=Math.min(8e3,Math.max(2e3,ce*2e3));console.log("Export timeout calculation",{videoDuration:ce,calculatedTimeout:ce*4e3,finalTimeout:te,videoReadyState:O==null?void 0:O.readyState,isFinite:O!=null&&O.duration?isFinite(O.duration):!1});const ie=F(),ae=new Promise(se=>{setTimeout(()=>se(null),te)});if(j=await Promise.race([ie,ae]),!j){console.warn("2D export did not complete in time, trying WebGL export briefly...");const se=R(),G=new Promise(de=>setTimeout(()=>de(null),te));j=await Promise.race([se,G])}console.log("Export result:",{urlToUse:j?"success":"null",blobSize:j?"exists":"none",hasUrl:!!j}),j?console.log("Export successful, using exported video URL"):console.error("Both WebGL and 2D exports failed. Proceeding with original + filter info.")}catch(O){console.error("Export failed or timed out:",O),j=await F()}}else console.log("No filters applied, using original video");let _=j||n;if(!_){console.error("No final URL available"),g(!1),alert("Error: No video URL available");return}if(j&&j.startsWith("blob:")){console.log("Converting blob URL to data URL...");try{const ce=await(await fetch(j)).blob(),te=new FileReader,ie=await new Promise((ae,se)=>{te.onloadend=()=>ae(te.result),te.onerror=se,te.readAsDataURL(ce)});_=ie,console.log("Converted blob URL to data URL",{originalSize:ce.size,dataUrlSize:ie.length,isDataUrl:ie.startsWith("data:")})}catch(O){console.error("Failed to convert blob URL to data URL:",O)}}console.log("Navigating to /create",{finalUrl:_.substring(0,50)+"...",filtered:z&&j!==null,hasFilters:z,urlToUse:j?"exists":"null",videoUrl:n?"exists":"null",isBlobUrl:j==null?void 0:j.startsWith("blob:"),isDataUrl:_.startsWith("data:"),filtersApplied:z?{active:r,brightness:i,contrast:l,saturation:d}:null}),g(!1);try{e("/create",{state:{videoUrl:_,filtered:z&&j!==null,filterInfo:z?{active:r,brightness:i,contrast:l,saturation:d,hue:u,exportFailed:j===null}:null}}),console.log("Navigation called successfully")}catch(O){console.error("Navigation error:",O),alert("Error navigating to create page. Please try again.")}E(!1)}async function ee(j,z,_){return new Promise(O=>{const ce=document.createElement("video");ce.src=j,ce.crossOrigin="anonymous",ce.muted=!0,ce.playsInline=!0,ce.onloadedmetadata=async()=>{const te=document.createElement("canvas");te.width=ce.videoWidth,te.height=ce.videoHeight;const ie=te.getContext("2d"),ae=[],se=te.captureStream(30),G=new MediaRecorder(se,{mimeType:"video/webm;codecs=vp9"});G.ondataavailable=De=>{De.data&&De.data.size>0&&ae.push(De.data)};const de=new Promise(De=>{G.onstop=()=>De()});G.start(),ce.currentTime=z,await new Promise(De=>{ce.onseeked=async()=>{await ce.play(),De(null)}});const me=Math.min(z+_,ce.duration);let _e=ce.currentTime;const be=()=>{const De=ce.currentTime;if(De>=me||ce.ended){G.stop();return}De>_e&&(ie.drawImage(ce,0,0,te.width,te.height),_e=De),requestAnimationFrame(be)};be(),await de;const Pe=new Blob(ae,{type:"video/webm"});O(URL.createObjectURL(Pe))},ce.onerror=()=>O(null)})}async function X(j){return new Promise(z=>{const _=document.createElement("video");_.src=j,_.crossOrigin="anonymous",_.muted=!0,_.playsInline=!0;let O=!1;const ce=ie=>{O||(O=!0,z(ie))},te=setTimeout(()=>ce([j]),6e3);_.onloadedmetadata=async()=>{const ie=_.duration;if(ie<=15){clearTimeout(te),ce([j]);return}const ae=Math.ceil(ie/15),se=[];for(let G=0;G<ae;G++){const de=G*15,me=await ee(j,de,15);me&&se.push(me)}clearTimeout(te),ce(se)},_.onerror=()=>{clearTimeout(te),ce([j])}})}async function le(){if(!(!n||T||S)){I(!0);try{let j=q;if(Z()&&!j){const O=p.current,ce=O!=null&&O.duration&&isFinite(O.duration)?O.duration:5,te=Math.min(8e3,Math.max(2e3,ce*2e3));g(!0);const ie=F(),ae=new Promise(se=>setTimeout(()=>se(null),te));if(j=await Promise.race([ie,ae]),!j){const se=R(),G=new Promise(de=>setTimeout(()=>de(null),te));j=await Promise.race([se,G])}}let z=j||n;if(!z){alert("No video available to post.");return}k(!0);const _=await Promise.race([X(z),new Promise(O=>setTimeout(()=>O([z]),6e3))]);if(!_||_.length===0){e("/clip",{state:{videoUrl:z,videoSegments:[z],filtered:Z(),segmentIndex:0}});return}e("/clip",{state:{videoUrl:_[0],videoSegments:_,filtered:Z(),segmentIndex:0}})}catch(j){console.error("Error preparing Clips posting:",j),alert("Failed to prepare clip. Please try again.")}finally{k(!1),g(!1),I(!1)}}}return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
                .slider-thumb::-webkit-slider-thumb {
                    appearance: none;
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
                    border: 2px solid rgba(255, 255, 255, 0.9);
                    cursor: pointer;
                    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.5), 0 0 0 4px rgba(139, 92, 246, 0.1);
                    transition: all 0.2s ease;
                }
                .slider-thumb::-webkit-slider-thumb:hover {
                    transform: scale(1.1);
                    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.7), 0 0 0 6px rgba(139, 92, 246, 0.15);
                }
                .slider-thumb::-webkit-slider-thumb:active {
                    transform: scale(0.95);
                }
                .slider-thumb::-moz-range-thumb {
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
                    border: 2px solid rgba(255, 255, 255, 0.9);
                    cursor: pointer;
                    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.5);
                    transition: all 0.2s ease;
                }
                .slider-thumb::-moz-range-thumb:hover {
                    transform: scale(1.1);
                    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.7);
                }
            `}),o.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col z-50",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/80 to-transparent p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{onClick:()=>e("/create/instant"),className:"p-2 rounded-full bg-black/50 backdrop-blur-sm text-white hover:bg-black/70 transition-colors",children:o.jsx(mt,{className:"w-6 h-6"})}),o.jsx("div",{className:"w-10"}),o.jsx("div",{className:"w-10"})]})}),o.jsx("div",{className:"flex-1 flex items-center justify-center relative overflow-hidden",children:o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("video",{ref:p,src:n,playsInline:!0,muted:!0,loop:!0,autoPlay:!0,className:Y?"hidden":"absolute inset-0 w-full h-full object-cover",style:Y?void 0:{filter:r==="bw"?"grayscale(1)":r==="sepia"?"sepia(0.8)":r==="vivid"?"saturate(1.6) contrast(1.1)":r==="cool"?"hue-rotate(200deg) saturate(1.2)":"none"}}),o.jsx("canvas",{ref:y,className:"absolute inset-0 w-full h-full"})]})}),o.jsx("div",{className:`absolute bottom-32 left-0 right-0 z-50 px-4 pb-4 transition-all ${Q?"opacity-0 pointer-events-none":"opacity-100"}`,"data-filters-section":!0,children:o.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:zR.map(j=>o.jsxs("button",{onClick:()=>s(j.id),className:`flex-shrink-0 flex flex-col items-center gap-1 transition-all ${r===j.id?"scale-110":"scale-100"}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-full border-2 overflow-hidden transition-all ${r===j.id?"border-white shadow-lg shadow-white/60 ring-1 ring-white/30":"border-white/40"}`,children:o.jsx("div",{className:`w-full h-full ${j.id==="none"?"bg-gray-800":j.id==="bw"?"bg-gray-400":j.id==="sepia"?"bg-amber-200":j.id==="vivid"?"bg-purple-400":j.id==="cool"?"bg-blue-400":j.id==="vignette"?"bg-gray-600":"bg-pink-200"}`})}),o.jsx("span",{className:`text-[10px] font-semibold transition-colors ${r===j.id?"text-white":"text-white/60"}`,children:j.name})]},j.id))})}),Q&&o.jsxs("div",{className:"absolute bottom-44 left-0 right-0 z-[60] bg-gradient-to-b from-black/95 via-black/90 to-black/95 backdrop-blur-xl rounded-t-3xl shadow-2xl border-t border-white/10 max-h-[50vh] overflow-y-auto animate-in slide-in-from-bottom duration-300",children:[o.jsxs("div",{className:"sticky top-0 bg-black/95 backdrop-blur-xl z-10 border-b border-white/10 px-4 pt-4 pb-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[o.jsx(Y0,{className:"w-5 h-5"}),"Adjustments"]}),o.jsx("button",{onClick:()=>fe(!1),className:"p-2 rounded-full hover:bg-white/10 transition-colors","aria-label":"Close adjustments",children:o.jsx(mt,{className:"w-5 h-5 text-white/70"})})]}),o.jsx("div",{className:"w-12 h-1 bg-white/30 rounded-full mx-auto"})]}),o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:"Basic Adjustments"}),o.jsx("div",{className:"space-y-5",children:[{label:"Brightness",icon:"",value:i,min:.4,max:1.8,step:.01,onChange:j=>a(j),default:1},{label:"Contrast",icon:"",value:l,min:.5,max:2,step:.01,onChange:j=>c(j),default:1},{label:"Saturation",icon:"",value:d,min:0,max:2,step:.01,onChange:j=>f(j),default:1},{label:"Hue",icon:"",value:u,min:-1,max:1,step:.001,onChange:j=>h(j),default:0}].map(({label:j,icon:z,value:_,min:O,max:ce,step:te,onChange:ie,default:ae})=>{const se=_===ae,G=(_-O)/(ce-O)*100;return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:z}),o.jsx("span",{className:"text-sm font-semibold text-white",children:j})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[!se&&o.jsx("button",{onClick:()=>ie(ae),className:"text-xs text-white/60 hover:text-white transition-colors px-2 py-1 rounded hover:bg-white/10",title:"Reset to default",children:"Reset"}),o.jsxs("span",{className:"text-sm font-bold text-white/90 min-w-[3rem] text-right",children:[_>0?"+":"",((_-ae)*100).toFixed(0),"%"]})]})]}),o.jsx("div",{className:"relative",children:o.jsx("input",{type:"range",min:O,max:ce,step:te,value:_,onChange:de=>ie(parseFloat(de.target.value)),className:"w-full h-3 bg-white/10 rounded-full appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, rgba(139, 92, 246, 0.8) 0%, rgba(139, 92, 246, 0.8) ${G}%, rgba(255, 255, 255, 0.1) ${G}%, rgba(255, 255, 255, 0.1) 100%)`}})})]},j)})})]}),o.jsxs("div",{className:"border-t border-white/10 pt-6",children:[o.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:"Color Grading"}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-sm font-semibold text-white",children:"LUT Intensity"})]}),o.jsxs("span",{className:"text-sm font-bold text-white/90 min-w-[3rem] text-right",children:[Math.round(N*100),"%"]})]}),o.jsx("input",{type:"range",min:0,max:1,step:.01,value:N,onChange:j=>H(parseFloat(j.target.value)),className:"w-full h-3 bg-white/10 rounded-full appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, rgba(139, 92, 246, 0.8) 0%, rgba(139, 92, 246, 0.8) ${N*100}%, rgba(255, 255, 255, 0.1) ${N*100}%, rgba(255, 255, 255, 0.1) 100%)`}})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Preset LUTs"}),o.jsx("select",{className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white text-sm font-medium hover:bg-white/10 focus:bg-white/10 focus:border-purple-500/50 transition-all cursor-pointer",value:re.id,onChange:j=>{const z=ll.find(_=>_.id===j.target.value)||ll[0];C(z)},children:ll.map(j=>o.jsx("option",{value:j.id,className:"bg-gray-900",children:j.name},j.id))})]}),o.jsxs("div",{className:"space-y-3 mt-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Custom LUT"}),o.jsxs("label",{className:"block w-full px-4 py-3 rounded-xl border-2 border-dashed border-white/30 bg-white/5 backdrop-blur-sm text-white text-sm font-medium cursor-pointer hover:bg-white/10 hover:border-purple-500/50 transition-all text-center",children:[o.jsx("input",{type:"file",accept:"image/png",onChange:B,className:"hidden"}),o.jsxs("span",{className:"flex items-center justify-center gap-2",children:[o.jsx(yd,{className:"w-4 h-4"}),"Choose LUT File"]})]}),U&&o.jsx("div",{className:"px-3 py-2 rounded-lg bg-purple-500/20 border border-purple-500/30",children:o.jsxs("p",{className:"text-xs text-white/90 font-medium",children:[" Loaded: ",U.size," grid (",U.tiles,"",U.tiles," tiles)"]})})]})]})]})]}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-50 bg-gradient-to-t from-black/90 via-black/80 to-transparent p-4 pb-safe",children:[o.jsxs("button",{onClick:()=>fe(!Q),className:"w-full mb-3 py-2 px-4 rounded-xl bg-white/10 backdrop-blur-sm text-white text-sm font-medium hover:bg-white/20 transition-colors flex items-center justify-center gap-2",children:[o.jsx(Y0,{className:"w-4 h-4"}),o.jsx("span",{children:"Adjustments"}),Q?o.jsx(Kb,{className:"w-4 h-4"}):o.jsx(Xb,{className:"w-4 h-4"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("button",{onClick:P,disabled:T||S,className:"py-3 rounded-xl bg-blue-600 text-white font-semibold disabled:opacity-60 flex items-center justify-center gap-2 shadow-lg transition-all relative",children:T?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{children:"Processing..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(ta,{className:"w-4 h-4"}),o.jsx("span",{children:"News Feed"})]})}),o.jsx("button",{onClick:le,disabled:T||S,className:"py-3 rounded-xl bg-purple-600 text-white font-semibold disabled:opacity-60 flex items-center justify-center gap-2 shadow-lg transition-all relative",children:S?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{children:"Processing"})]}):o.jsxs(o.Fragment,{children:[o.jsx(ta,{className:"w-4 h-4"}),o.jsx("span",{children:"Clips"})]})})]})]})]})]})}function WR(){const e=nt(),{user:t}=Ke(),[n,r]=oe.useState(!1),[s,i]=oe.useState(!1),[a,l]=oe.useState(!1),[c,d]=oe.useState(!1),[f,u]=oe.useState(!1);return oe.useEffect(()=>{const h=setTimeout(()=>i(!0),200),p=setTimeout(()=>l(!0),800),y=setTimeout(()=>d(!0),1500),w=setTimeout(()=>u(!0),2200);if(!(new URLSearchParams(window.location.search).get("stay")==="true")){const g=setTimeout(()=>{r(!0),t?e("/feed",{replace:!0}):e("/login",{replace:!0})},3500);return()=>{clearTimeout(p),clearTimeout(y),clearTimeout(w),clearTimeout(g)}}return()=>{clearTimeout(h),clearTimeout(p),clearTimeout(y),clearTimeout(w)}},[t,e]),o.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center",style:{perspective:"1000px"},children:[o.jsxs("div",{className:"flex flex-col items-center gap-8",style:{transformStyle:"preserve-3d"},children:[o.jsx("div",{className:"flex items-center justify-center transition-all duration-700 ease-out",style:{opacity:s?1:0,transform:s?"scale(1) rotate(0deg)":"scale(0.5) rotate(-180deg)",filter:s?"blur(0px)":"blur(8px)"},children:o.jsx("div",{className:"relative p-1 rounded-md border-2 border-white shadow-lg",children:o.jsx("div",{className:"p-1 rounded-md border-2 border-white",children:o.jsx("div",{className:"w-12 h-12 flex items-center justify-center",children:o.jsx(Ft,{className:"text-white drop-shadow-lg",size:32})})})})}),o.jsxs("div",{className:"flex flex-col items-center gap-2 min-h-[120px]",children:[o.jsx("div",{className:"text-center",children:o.jsx("span",{className:`text-4xl font-bold text-white tracking-tight transition-all duration-700 ease-out ${a?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 -translate-y-8"}`,style:{transform:a?"scale(1) translateY(0px)":"scale(0.3) translateY(-32px)",filter:a?"blur(0px)":"blur(4px)"},children:"EVERY"})}),o.jsx("div",{className:"text-center",children:o.jsx("span",{className:`text-4xl font-bold text-white tracking-tight transition-all duration-700 ease-out ${c?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 -translate-y-8"}`,style:{transform:c?"scale(1) translateY(0px)":"scale(0.3) translateY(-32px)",filter:c?"blur(0px)":"blur(4px)"},children:"STORY"})}),o.jsx("div",{className:"text-center",children:o.jsx("span",{className:`text-2xl font-semibold text-gray-300 tracking-tight transition-all duration-700 ease-out ${f?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 -translate-y-8"}`,style:{transform:f?"scale(1) translateY(0px)":"scale(0.3) translateY(-32px)",filter:f?"blur(0px)":"blur(4px)"},children:"HAS A LOCATION"})})]})]}),f&&o.jsxs("div",{className:"mt-16 flex gap-2 transition-opacity duration-500",style:{opacity:f?1:0},children:[o.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce shadow-lg",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-3 h-3 bg-pink-600 rounded-full animate-bounce shadow-lg",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce shadow-lg",style:{animationDelay:"300ms"}})]}),o.jsx("div",{className:"absolute bottom-8 text-gray-400 text-sm transition-opacity duration-500",style:{opacity:f?1:0},children:"Gazetteer 25"})]})}/*!
* sweetalert2 v11.26.3
* Released under the MIT License.
*/function v1(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function VR(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sy(e,t){return e.get(v1(e,t))}function qR(e,t,n){VR(e,t),t.set(e,n)}function GR(e,t,n){return e.set(v1(e,t),n),n}const YR=100,ge={},XR=()=>{ge.previousActiveElement instanceof HTMLElement?(ge.previousActiveElement.focus(),ge.previousActiveElement=null):document.body&&document.body.focus()},KR=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;ge.restoreFocusTimeout=setTimeout(()=>{XR(),t()},YR),window.scrollTo(n,r)}),b1="swal2-",QR=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],W=QR.reduce((e,t)=>(e[t]=b1+t,e),{}),JR=["success","warning","info","question","error"],yc=JR.reduce((e,t)=>(e[t]=b1+t,e),{}),k1="SweetAlert2:",qp=e=>e.charAt(0).toUpperCase()+e.slice(1),Bt=e=>{console.warn(`${k1} ${typeof e=="object"?e.join(" "):e}`)},As=e=>{console.error(`${k1} ${e}`)},iy=[],ZR=e=>{iy.includes(e)||(iy.push(e),Bt(e))},S1=(e,t=null)=>{ZR(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},Sd=e=>typeof e=="function"?e():e,Gp=e=>e&&typeof e.toPromise=="function",Na=e=>Gp(e)?e.toPromise():Promise.resolve(e),Yp=e=>e&&Promise.resolve(e)===e,zt=()=>document.body.querySelector(`.${W.container}`),ja=e=>{const t=zt();return t?t.querySelector(e):null},fn=e=>ja(`.${e}`),je=()=>fn(W.popup),Yi=()=>fn(W.icon),eL=()=>fn(W["icon-content"]),_1=()=>fn(W.title),Xp=()=>fn(W["html-container"]),E1=()=>fn(W.image),Kp=()=>fn(W["progress-steps"]),_d=()=>fn(W["validation-message"]),Qn=()=>ja(`.${W.actions} .${W.confirm}`),Xi=()=>ja(`.${W.actions} .${W.cancel}`),Ps=()=>ja(`.${W.actions} .${W.deny}`),tL=()=>fn(W["input-label"]),Ki=()=>ja(`.${W.loader}`),Ca=()=>fn(W.actions),N1=()=>fn(W.footer),Ed=()=>fn(W["timer-progress-bar"]),Qp=()=>fn(W.close),nL=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Jp=()=>{const e=je();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((i,a)=>{const l=parseInt(i.getAttribute("tabindex")||"0"),c=parseInt(a.getAttribute("tabindex")||"0");return l>c?1:l<c?-1:0}),r=e.querySelectorAll(nL),s=Array.from(r).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(s))].filter(i=>Xt(i))},Zp=()=>dr(document.body,W.shown)&&!dr(document.body,W["toast-shown"])&&!dr(document.body,W["no-backdrop"]),Nd=()=>{const e=je();return e?dr(e,W.toast):!1},rL=()=>{const e=je();return e?e.hasAttribute("data-loading"):!1},hn=(e,t)=>{if(e.textContent="",t){const r=new DOMParser().parseFromString(t,"text/html"),s=r.querySelector("head");s&&Array.from(s.childNodes).forEach(a=>{e.appendChild(a)});const i=r.querySelector("body");i&&Array.from(i.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?e.appendChild(a.cloneNode(!0)):e.appendChild(a)})}},dr=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},sL=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(W).includes(n)&&!Object.values(yc).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},on=(e,t,n)=>{if(sL(e,t),!t.customClass)return;const r=t.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Bt(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Ie(e,r)}},jd=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${W.popup} > .${W[t]}`);case"checkbox":return e.querySelector(`.${W.popup} > .${W.checkbox} input`);case"radio":return e.querySelector(`.${W.popup} > .${W.radio} input:checked`)||e.querySelector(`.${W.popup} > .${W.radio} input:first-child`);case"range":return e.querySelector(`.${W.popup} > .${W.range} input`);default:return e.querySelector(`.${W.popup} > .${W.input}`)}},j1=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},C1=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(r=>{Array.isArray(e)?e.forEach(s=>{n?s.classList.add(r):s.classList.remove(r)}):n?e.classList.add(r):e.classList.remove(r)}))},Ie=(e,t)=>{C1(e,t,!0)},_n=(e,t)=>{C1(e,t,!1)},Ar=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const s=n[r];if(s instanceof HTMLElement&&dr(s,t))return s}},ps=(e,t,n)=>{n===`${parseInt(`${n}`)}`&&(n=parseInt(n)),n||parseInt(`${n}`)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},vt=(e,t="flex")=>{e&&(e.style.display=t)},It=e=>{e&&(e.style.display="none")},em=(e,t="block")=>{e&&new MutationObserver(()=>{Ta(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},oy=(e,t,n,r)=>{const s=e.querySelector(t);s&&s.style.setProperty(n,r)},Ta=(e,t,n="flex")=>{t?vt(e,n):It(e)},Xt=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),iL=()=>!Xt(Qn())&&!Xt(Ps())&&!Xt(Xi()),Qf=e=>e.scrollHeight>e.clientHeight,oL=(e,t)=>{let n=e;for(;n&&n!==t;){if(Qf(n))return!0;n=n.parentElement}return!1},T1=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},tm=(e,t=!1)=>{const n=Ed();n&&Xt(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},aL=()=>{const e=Ed();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),r=t/n*100;e.style.width=`${r}%`},lL=()=>typeof window>"u"||typeof document>"u",cL=`
 <div aria-labelledby="${W.title}" aria-describedby="${W["html-container"]}" class="${W.popup}" tabindex="-1">
   <button type="button" class="${W.close}"></button>
   <ul class="${W["progress-steps"]}"></ul>
   <div class="${W.icon}"></div>
   <img class="${W.image}" />
   <h2 class="${W.title}" id="${W.title}"></h2>
   <div class="${W["html-container"]}" id="${W["html-container"]}"></div>
   <input class="${W.input}" id="${W.input}" />
   <input type="file" class="${W.file}" />
   <div class="${W.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${W.select}" id="${W.select}"></select>
   <div class="${W.radio}"></div>
   <label class="${W.checkbox}">
     <input type="checkbox" id="${W.checkbox}" />
     <span class="${W.label}"></span>
   </label>
   <textarea class="${W.textarea}" id="${W.textarea}"></textarea>
   <div class="${W["validation-message"]}" id="${W["validation-message"]}"></div>
   <div class="${W.actions}">
     <div class="${W.loader}"></div>
     <button type="button" class="${W.confirm}"></button>
     <button type="button" class="${W.deny}"></button>
     <button type="button" class="${W.cancel}"></button>
   </div>
   <div class="${W.footer}"></div>
   <div class="${W["timer-progress-bar-container"]}">
     <div class="${W["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),dL=()=>{const e=zt();return e?(e.remove(),_n([document.documentElement,document.body],[W["no-backdrop"],W["toast-shown"],W["has-column"]]),!0):!1},ns=()=>{ge.currentInstance.resetValidationMessage()},uL=()=>{const e=je(),t=Ar(e,W.input),n=Ar(e,W.file),r=e.querySelector(`.${W.range} input`),s=e.querySelector(`.${W.range} output`),i=Ar(e,W.select),a=e.querySelector(`.${W.checkbox} input`),l=Ar(e,W.textarea);t.oninput=ns,n.onchange=ns,i.onchange=ns,a.onchange=ns,l.oninput=ns,r.oninput=()=>{ns(),s.value=r.value},r.onchange=()=>{ns(),s.value=r.value}},fL=e=>typeof e=="string"?document.querySelector(e):e,hL=e=>{const t=je();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},pL=e=>{window.getComputedStyle(e).direction==="rtl"&&Ie(zt(),W.rtl)},mL=e=>{const t=dL();if(lL()){As("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=W.container,t&&Ie(n,W["no-transition"]),hn(n,cL),n.dataset.swal2Theme=e.theme;const r=fL(e.target);r.appendChild(n),e.topLayer&&(n.setAttribute("popover",""),n.showPopover()),hL(e),pL(r),uL()},nm=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?gL(e,t):e&&hn(t,e)},gL=(e,t)=>{e.jquery?yL(t,e):hn(t,e.toString())},yL=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},xL=(e,t)=>{const n=Ca(),r=Ki();!n||!r||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?It(n):vt(n),on(n,t,"actions"),wL(n,r,t),hn(r,t.loaderHtml||""),on(r,t,"loader"))};function wL(e,t,n){const r=Qn(),s=Ps(),i=Xi();!r||!s||!i||(gu(r,"confirm",n),gu(s,"deny",n),gu(i,"cancel",n),vL(r,s,i,n),n.reverseButtons&&(n.toast?(e.insertBefore(i,r),e.insertBefore(s,r)):(e.insertBefore(i,t),e.insertBefore(s,t),e.insertBefore(r,t))))}function vL(e,t,n,r){if(!r.buttonsStyling){_n([e,t,n],W.styled);return}Ie([e,t,n],W.styled),r.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),mu(e),mu(t),mu(n)}function mu(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function gu(e,t,n){const r=qp(t);Ta(e,n[`show${r}Button`],"inline-block"),hn(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=W[t],on(e,n,`${t}Button`)}const bL=(e,t)=>{const n=Qp();n&&(hn(n,t.closeButtonHtml||""),on(n,t,"closeButton"),Ta(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},kL=(e,t)=>{const n=zt();n&&(SL(n,t.backdrop),_L(n,t.position),EL(n,t.grow),on(n,t,"container"))};function SL(e,t){typeof t=="string"?e.style.background=t:t||Ie([document.documentElement,document.body],W["no-backdrop"])}function _L(e,t){t&&(t in W?Ie(e,W[t]):(Bt('The "position" parameter is not valid, defaulting to "center"'),Ie(e,W.center)))}function EL(e,t){t&&Ie(e,W[`grow-${t}`])}var Ue={innerParams:new WeakMap,domCache:new WeakMap};const NL=["input","file","range","select","radio","checkbox","textarea"],jL=(e,t)=>{const n=je();if(!n)return;const r=Ue.innerParams.get(e),s=!r||t.input!==r.input;NL.forEach(i=>{const a=Ar(n,W[i]);a&&(IL(i,t.inputAttributes),a.className=W[i],s&&It(a))}),t.input&&(s&&CL(t),RL(t))},CL=e=>{if(!e.input)return;if(!rt[e.input]){As(`Unexpected type of input! Expected ${Object.keys(rt).join(" | ")}, got "${e.input}"`);return}const t=I1(e.input);if(!t)return;const n=rt[e.input](t,e);vt(t),e.inputAutoFocus&&setTimeout(()=>{j1(n)})},TL=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},IL=(e,t)=>{const n=je();if(!n)return;const r=jd(n,e);if(r){TL(r);for(const s in t)r.setAttribute(s,t[s])}},RL=e=>{if(!e.input)return;const t=I1(e.input);t&&on(t,e,"input")},rm=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Ia=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),s=W["input-label"];r.setAttribute("for",e.id),r.className=s,typeof n.customClass=="object"&&Ie(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},I1=e=>{const t=je();if(t)return Ar(t,W[e]||W.input)},xc=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:Yp(t)||Bt(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},rt={};rt.text=rt.email=rt.password=rt.number=rt.tel=rt.url=rt.search=rt.date=rt["datetime-local"]=rt.time=rt.week=rt.month=(e,t)=>(xc(e,t.inputValue),Ia(e,e,t),rm(e,t),e.type=t.input,e);rt.file=(e,t)=>(Ia(e,e,t),rm(e,t),e);rt.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return xc(n,t.inputValue),n.type=t.input,xc(r,t.inputValue),Ia(n,e,t),e};rt.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");hn(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Ia(e,e,t),e};rt.radio=e=>(e.textContent="",e);rt.checkbox=(e,t)=>{const n=jd(je(),"checkbox");n.value="1",n.checked=!!t.inputValue;const r=e.querySelector("span");return hn(r,t.inputPlaceholder||t.inputLabel),n};rt.textarea=(e,t)=>{xc(e,t.inputValue),rm(e,t),Ia(e,e,t);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(je()).width),s=()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?je().style.width=`${i}px`:ps(je(),"width",t.width)};new MutationObserver(s).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const LL=(e,t)=>{const n=Xp();n&&(em(n),on(n,t,"htmlContainer"),t.html?(nm(t.html,n),vt(n,"block")):t.text?(n.textContent=t.text,vt(n,"block")):It(n),jL(e,t))},AL=(e,t)=>{const n=N1();n&&(em(n),Ta(n,!!t.footer,"block"),t.footer&&nm(t.footer,n),on(n,t,"footer"))},PL=(e,t)=>{const n=Ue.innerParams.get(e),r=Yi();if(!r)return;if(n&&t.icon===n.icon){ly(r,t),ay(r,t);return}if(!t.icon&&!t.iconHtml){It(r);return}if(t.icon&&Object.keys(yc).indexOf(t.icon)===-1){As(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),It(r);return}vt(r),ly(r,t),ay(r,t),Ie(r,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",R1)},ay=(e,t)=>{for(const[n,r]of Object.entries(yc))t.icon!==n&&_n(e,r);Ie(e,t.icon&&yc[t.icon]),OL(e,t),R1(),on(e,t,"icon")},R1=()=>{const e=je();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},ML=e=>`
  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${e.animation?'<div class="swal2-success-fix"></div>':""}
  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,DL=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,ly=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=cy(t.iconHtml):t.icon==="success"?(r=ML(t),n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?r=DL:t.icon&&(r=cy({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&hn(e,r)},OL=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])oy(e,n,"background-color",t.iconColor);oy(e,".swal2-success-ring","border-color",t.iconColor)}},cy=e=>`<div class="${W["icon-content"]}">${e}</div>`,FL=(e,t)=>{const n=E1();if(n){if(!t.imageUrl){It(n);return}vt(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),ps(n,"width",t.imageWidth),ps(n,"height",t.imageHeight),n.className=W.image,on(n,t,"image")}};let sm=!1,L1=0,A1=0,P1=0,M1=0;const BL=e=>{e.addEventListener("mousedown",wc),document.body.addEventListener("mousemove",vc),e.addEventListener("mouseup",bc),e.addEventListener("touchstart",wc),document.body.addEventListener("touchmove",vc),e.addEventListener("touchend",bc)},$L=e=>{e.removeEventListener("mousedown",wc),document.body.removeEventListener("mousemove",vc),e.removeEventListener("mouseup",bc),e.removeEventListener("touchstart",wc),document.body.removeEventListener("touchmove",vc),e.removeEventListener("touchend",bc)},wc=e=>{const t=je();if(e.target===t||Yi().contains(e.target)){sm=!0;const n=D1(e);L1=n.clientX,A1=n.clientY,P1=parseInt(t.style.insetInlineStart)||0,M1=parseInt(t.style.insetBlockStart)||0,Ie(t,"swal2-dragging")}},vc=e=>{const t=je();if(sm){let{clientX:n,clientY:r}=D1(e);t.style.insetInlineStart=`${P1+(n-L1)}px`,t.style.insetBlockStart=`${M1+(r-A1)}px`}},bc=()=>{const e=je();sm=!1,_n(e,"swal2-dragging")},D1=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},UL=(e,t)=>{const n=zt(),r=je();if(!(!n||!r)){if(t.toast){ps(n,"width",t.width),r.style.width="100%";const s=Ki();s&&r.insertBefore(s,Yi())}else ps(r,"width",t.width);ps(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),It(_d()),zL(r,t),t.draggable&&!t.toast?(Ie(r,W.draggable),BL(r)):(_n(r,W.draggable),$L(r))}},zL=(e,t)=>{const n=t.showClass||{};e.className=`${W.popup} ${Xt(e)?n.popup:""}`,t.toast?(Ie([document.documentElement,document.body],W["toast-shown"]),Ie(e,W.toast)):Ie(e,W.modal),on(e,t,"popup"),typeof t.customClass=="string"&&Ie(e,t.customClass),t.icon&&Ie(e,W[`icon-${t.icon}`])},HL=(e,t)=>{const n=Kp();if(!n)return;const{progressSteps:r,currentProgressStep:s}=t;if(!r||r.length===0||s===void 0){It(n);return}vt(n),n.textContent="",s>=r.length&&Bt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((i,a)=>{const l=WL(i);if(n.appendChild(l),a===s&&Ie(l,W["active-progress-step"]),a!==r.length-1){const c=VL(t);n.appendChild(c)}})},WL=e=>{const t=document.createElement("li");return Ie(t,W["progress-step"]),hn(t,e),t},VL=e=>{const t=document.createElement("li");return Ie(t,W["progress-step-line"]),e.progressStepsDistance&&ps(t,"width",e.progressStepsDistance),t},qL=(e,t)=>{const n=_1();n&&(em(n),Ta(n,!!(t.title||t.titleText),"block"),t.title&&nm(t.title,n),t.titleText&&(n.innerText=t.titleText),on(n,t,"title"))},O1=(e,t)=>{UL(e,t),kL(e,t),HL(e,t),PL(e,t),FL(e,t),qL(e,t),bL(e,t),LL(e,t),xL(e,t),AL(e,t);const n=je();typeof t.didRender=="function"&&n&&t.didRender(n),ge.eventEmitter.emit("didRender",n)},GL=()=>Xt(je()),F1=()=>{var e;return(e=Qn())===null||e===void 0?void 0:e.click()},YL=()=>{var e;return(e=Ps())===null||e===void 0?void 0:e.click()},XL=()=>{var e;return(e=Xi())===null||e===void 0?void 0:e.click()},Qi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),B1=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},KL=(e,t,n)=>{B1(e),t.toast||(e.keydownHandler=r=>JL(t,r,n),e.keydownTarget=t.keydownListenerCapture?window:je(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Jf=(e,t)=>{var n;const r=Jp();if(r.length){e=e+t,e===-2&&(e=r.length-1),e===r.length?e=0:e===-1&&(e=r.length-1),r[e].focus();return}(n=je())===null||n===void 0||n.focus()},$1=["ArrowRight","ArrowDown"],QL=["ArrowLeft","ArrowUp"],JL=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?ZL(t,e):t.key==="Tab"?eA(t):[...$1,...QL].includes(t.key)?tA(t.key):t.key==="Escape"&&nA(t,e,n)))},ZL=(e,t)=>{if(!Sd(t.allowEnterKey))return;const n=jd(je(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;F1(),e.preventDefault()}},eA=e=>{const t=e.target,n=Jp();let r=-1;for(let s=0;s<n.length;s++)if(t===n[s]){r=s;break}e.shiftKey?Jf(r,-1):Jf(r,1),e.stopPropagation(),e.preventDefault()},tA=e=>{const t=Ca(),n=Qn(),r=Ps(),s=Xi();if(!t||!n||!r||!s)return;const i=[n,r,s];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const a=$1.includes(e)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let c=0;c<t.children.length;c++){if(l=l[a],!l)return;if(l instanceof HTMLButtonElement&&Xt(l))break}l instanceof HTMLButtonElement&&l.focus()}},nA=(e,t,n)=>{e.preventDefault(),Sd(t.allowEscapeKey)&&n(Qi.esc)};var Pi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const rA=()=>{const e=zt();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},U1=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},z1=typeof window<"u"&&!!window.GestureEvent,sA=()=>{if(z1&&!dr(document.body,W.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,Ie(document.body,W.iosfix),iA()}},iA=()=>{const e=zt();if(!e)return;let t;e.ontouchstart=n=>{t=oA(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},oA=e=>{const t=e.target,n=zt(),r=Xp();return!n||!r||aA(e)||lA(e)?!1:t===n||!Qf(n)&&t instanceof HTMLElement&&!oL(t,r)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Qf(r)&&r.contains(t))},aA=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",lA=e=>e.touches&&e.touches.length>1,cA=()=>{if(dr(document.body,W.iosfix)){const e=parseInt(document.body.style.top,10);_n(document.body,W.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},dA=()=>{const e=document.createElement("div");e.className=W["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let gi=null;const uA=e=>{gi===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(gi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${gi+dA()}px`)},fA=()=>{gi!==null&&(document.body.style.paddingRight=`${gi}px`,gi=null)};function H1(e,t,n,r){Nd()?dy(e,r):(KR(n).then(()=>dy(e,r)),B1(ge)),z1?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),Zp()&&(fA(),cA(),U1()),hA()}function hA(){_n([document.documentElement,document.body],[W.shown,W["height-auto"],W["no-backdrop"],W["toast-shown"]])}function Pr(e){e=mA(e);const t=Pi.swalPromiseResolve.get(this),n=pA(this);this.isAwaitingPromise?e.isDismissed||(Ra(this),t(e)):n&&t(e)}const pA=e=>{const t=je();if(!t)return!1;const n=Ue.innerParams.get(e);if(!n||dr(t,n.hideClass.popup))return!1;_n(t,n.showClass.popup),Ie(t,n.hideClass.popup);const r=zt();return _n(r,n.showClass.backdrop),Ie(r,n.hideClass.backdrop),gA(e,t,n),!0};function W1(e){const t=Pi.swalPromiseReject.get(this);Ra(this),t&&t(e)}const Ra=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Ue.innerParams.get(e)||e._destroy())},mA=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),gA=(e,t,n)=>{var r;const s=zt(),i=T1(t);typeof n.willClose=="function"&&n.willClose(t),(r=ge.eventEmitter)===null||r===void 0||r.emit("willClose",t),i?yA(e,t,s,n.returnFocus,n.didClose):H1(e,s,n.returnFocus,n.didClose)},yA=(e,t,n,r,s)=>{ge.swalCloseEventFinishedCallback=H1.bind(null,e,n,r,s);const i=function(a){if(a.target===t){var l;(l=ge.swalCloseEventFinishedCallback)===null||l===void 0||l.call(ge),delete ge.swalCloseEventFinishedCallback,t.removeEventListener("animationend",i),t.removeEventListener("transitionend",i)}};t.addEventListener("animationend",i),t.addEventListener("transitionend",i)},dy=(e,t)=>{setTimeout(()=>{var n;typeof t=="function"&&t.bind(e.params)(),(n=ge.eventEmitter)===null||n===void 0||n.emit("didClose"),e._destroy&&e._destroy()})},Mi=e=>{let t=je();if(t||new Nc,t=je(),!t)return;const n=Ki();Nd()?It(Yi()):xA(t,e),vt(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},xA=(e,t)=>{const n=Ca(),r=Ki();!n||!r||(!t&&Xt(Qn())&&(t=Qn()),vt(n),t&&(It(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),Ie([e,n],W.loading))},wA=(e,t)=>{t.input==="select"||t.input==="radio"?_A(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(Gp(t.inputValue)||Yp(t.inputValue))&&(Mi(Qn()),EA(e,t))},vA=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return bA(n);case"radio":return kA(n);case"file":return SA(n);default:return t.inputAutoTrim?n.value.trim():n.value}},bA=e=>e.checked?1:0,kA=e=>e.checked?e.value:null,SA=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,_A=(e,t)=>{const n=je();if(!n)return;const r=s=>{t.input==="select"?NA(n,kc(s),t):t.input==="radio"&&jA(n,kc(s),t)};Gp(t.inputOptions)||Yp(t.inputOptions)?(Mi(Qn()),Na(t.inputOptions).then(s=>{e.hideLoading(),r(s)})):typeof t.inputOptions=="object"?r(t.inputOptions):As(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},EA=(e,t)=>{const n=e.getInput();n&&(It(n),Na(t.inputValue).then(r=>{n.value=t.input==="number"?`${parseFloat(r)||0}`:`${r}`,vt(n),n.focus(),e.hideLoading()}).catch(r=>{As(`Error in inputValue promise: ${r}`),n.value="",vt(n),n.focus(),e.hideLoading()}))};function NA(e,t,n){const r=Ar(e,W.select);if(!r)return;const s=(i,a,l)=>{const c=document.createElement("option");c.value=l,hn(c,a),c.selected=V1(l,n.inputValue),i.appendChild(c)};t.forEach(i=>{const a=i[0],l=i[1];if(Array.isArray(l)){const c=document.createElement("optgroup");c.label=a,c.disabled=!1,r.appendChild(c),l.forEach(d=>s(c,d[1],d[0]))}else s(r,l,a)}),r.focus()}function jA(e,t,n){const r=Ar(e,W.radio);if(!r)return;t.forEach(i=>{const a=i[0],l=i[1],c=document.createElement("input"),d=document.createElement("label");c.type="radio",c.name=W.radio,c.value=a,V1(a,n.inputValue)&&(c.checked=!0);const f=document.createElement("span");hn(f,l),f.className=W.label,d.appendChild(c),d.appendChild(f),r.appendChild(d)});const s=r.querySelectorAll("input");s.length&&s[0].focus()}const kc=e=>{const t=[];return e instanceof Map?e.forEach((n,r)=>{let s=n;typeof s=="object"&&(s=kc(s)),t.push([r,s])}):Object.keys(e).forEach(n=>{let r=e[n];typeof r=="object"&&(r=kc(r)),t.push([n,r])}),t},V1=(e,t)=>!!t&&t.toString()===e.toString(),CA=e=>{const t=Ue.innerParams.get(e);e.disableButtons(),t.input?q1(e,"confirm"):om(e,!0)},TA=e=>{const t=Ue.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?q1(e,"deny"):im(e,!1)},IA=(e,t)=>{e.disableButtons(),t(Qi.cancel)},q1=(e,t)=>{const n=Ue.innerParams.get(e);if(!n.input){As(`The "input" parameter is needed to be set when using returnInputValueOn${qp(t)}`);return}const r=e.getInput(),s=vA(e,n);n.inputValidator?RA(e,s,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):t==="deny"?im(e,s):om(e,s)},RA=(e,t,n)=>{const r=Ue.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>Na(r.inputValidator(t,r.validationMessage))).then(i=>{e.enableButtons(),e.enableInput(),i?e.showValidationMessage(i):n==="deny"?im(e,t):om(e,t)})},im=(e,t)=>{const n=Ue.innerParams.get(e||void 0);n.showLoaderOnDeny&&Mi(Ps()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>Na(n.preDeny(t,n.validationMessage))).then(s=>{s===!1?(e.hideLoading(),Ra(e)):e.close({isDenied:!0,value:typeof s>"u"?t:s})}).catch(s=>G1(e||void 0,s))):e.close({isDenied:!0,value:t})},uy=(e,t)=>{e.close({isConfirmed:!0,value:t})},G1=(e,t)=>{e.rejectPromise(t)},om=(e,t)=>{const n=Ue.innerParams.get(e||void 0);n.showLoaderOnConfirm&&Mi(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>Na(n.preConfirm(t,n.validationMessage))).then(s=>{Xt(_d())||s===!1?(e.hideLoading(),Ra(e)):uy(e,typeof s>"u"?t:s)}).catch(s=>G1(e||void 0,s))):uy(e,t)};function Sc(){const e=Ue.innerParams.get(this);if(!e)return;const t=Ue.domCache.get(this);It(t.loader),Nd()?e.icon&&vt(Yi()):LA(t),_n([t.popup,t.actions],W.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const LA=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?vt(t[0],"inline-block"):iL()&&It(e.actions)};function Y1(){const e=Ue.innerParams.get(this),t=Ue.domCache.get(this);return t?jd(t.popup,e.input):null}function X1(e,t,n){const r=Ue.domCache.get(e);t.forEach(s=>{r[s].disabled=n})}function K1(e,t){const n=je();if(!(!n||!e))if(e.type==="radio"){const r=n.querySelectorAll(`[name="${W.radio}"]`);for(let s=0;s<r.length;s++)r[s].disabled=t}else e.disabled=t}function Q1(){X1(this,["confirmButton","denyButton","cancelButton"],!1)}function J1(){X1(this,["confirmButton","denyButton","cancelButton"],!0)}function Z1(){K1(this.getInput(),!1)}function e2(){K1(this.getInput(),!0)}function t2(e){const t=Ue.domCache.get(this),n=Ue.innerParams.get(this);hn(t.validationMessage,e),t.validationMessage.className=W["validation-message"],n.customClass&&n.customClass.validationMessage&&Ie(t.validationMessage,n.customClass.validationMessage),vt(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",W["validation-message"]),j1(r),Ie(r,W.inputerror))}function n2(){const e=Ue.domCache.get(this);e.validationMessage&&It(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),_n(t,W.inputerror))}const yi={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},AA=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],PA={allowEnterKey:void 0},MA=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],r2=e=>Object.prototype.hasOwnProperty.call(yi,e),s2=e=>AA.indexOf(e)!==-1,i2=e=>PA[e],DA=e=>{r2(e)||Bt(`Unknown parameter "${e}"`)},OA=e=>{MA.includes(e)&&Bt(`The parameter "${e}" is incompatible with toasts`)},FA=e=>{const t=i2(e);t&&S1(e,t)},o2=e=>{e.backdrop===!1&&e.allowOutsideClick&&Bt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&Bt(`Invalid theme "${e.theme}"`);for(const t in e)DA(t),e.toast&&OA(t),FA(t)};function a2(e){const t=zt(),n=je(),r=Ue.innerParams.get(this);if(!n||dr(n,r.hideClass.popup)){Bt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const s=BA(e),i=Object.assign({},r,s);o2(i),t.dataset.swal2Theme=i.theme,O1(this,i),Ue.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const BA=e=>{const t={};return Object.keys(e).forEach(n=>{s2(n)?t[n]=e[n]:Bt(`Invalid parameter to update: ${n}`)}),t};function l2(){const e=Ue.domCache.get(this),t=Ue.innerParams.get(this);if(!t){c2(this);return}e.popup&&ge.swalCloseEventFinishedCallback&&(ge.swalCloseEventFinishedCallback(),delete ge.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),ge.eventEmitter.emit("didDestroy"),$A(this)}const $A=e=>{c2(e),delete e.params,delete ge.keydownHandler,delete ge.keydownTarget,delete ge.currentInstance},c2=e=>{e.isAwaitingPromise?(yu(Ue,e),e.isAwaitingPromise=!0):(yu(Pi,e),yu(Ue,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},yu=(e,t)=>{for(const n in e)e[n].delete(t)};var UA=Object.freeze({__proto__:null,_destroy:l2,close:Pr,closeModal:Pr,closePopup:Pr,closeToast:Pr,disableButtons:J1,disableInput:e2,disableLoading:Sc,enableButtons:Q1,enableInput:Z1,getInput:Y1,handleAwaitingPromise:Ra,hideLoading:Sc,rejectPromise:W1,resetValidationMessage:n2,showValidationMessage:t2,update:a2});const zA=(e,t,n)=>{e.toast?HA(e,t,n):(VA(t),qA(t),GA(e,t,n))},HA=(e,t,n)=>{t.popup.onclick=()=>{e&&(WA(e)||e.timer||e.input)||n(Qi.close)}},WA=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let _c=!1;const VA=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(_c=!0)}}},qA=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(_c=!0)}}},GA=(e,t,n)=>{t.container.onclick=r=>{if(_c){_c=!1;return}r.target===t.container&&Sd(e.allowOutsideClick)&&n(Qi.backdrop)}},YA=e=>typeof e=="object"&&e.jquery,fy=e=>e instanceof Element||YA(e),XA=e=>{const t={};return typeof e[0]=="object"&&!fy(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,r)=>{const s=e[r];typeof s=="string"||fy(s)?t[n]=s:s!==void 0&&As(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof s}`)}),t};function KA(...e){return new this(...e)}function QA(e){class t extends this{_main(r,s){return super._main(r,Object.assign({},e,s))}}return t}const JA=()=>ge.timeout&&ge.timeout.getTimerLeft(),d2=()=>{if(ge.timeout)return aL(),ge.timeout.stop()},u2=()=>{if(ge.timeout){const e=ge.timeout.start();return tm(e),e}},ZA=()=>{const e=ge.timeout;return e&&(e.running?d2():u2())},eP=e=>{if(ge.timeout){const t=ge.timeout.increase(e);return tm(t,!0),t}},tP=()=>!!(ge.timeout&&ge.timeout.isRunning());let hy=!1;const Zf={};function nP(e="data-swal-template"){Zf[e]=this,hy||(document.body.addEventListener("click",rP),hy=!0)}const rP=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in Zf){const r=t.getAttribute(n);if(r){Zf[n].fire({template:r});return}}};class sP{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const r=this._getHandlersByEventName(t);r.includes(n)||r.push(n)}once(t,n){const r=(...s)=>{this.removeListener(t,r),n.apply(this,s)};this.on(t,r)}emit(t,...n){this._getHandlersByEventName(t).forEach(r=>{try{r.apply(this,n)}catch(s){console.error(s)}})}removeListener(t,n){const r=this._getHandlersByEventName(t),s=r.indexOf(n);s>-1&&r.splice(s,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}ge.eventEmitter=new sP;const iP=(e,t)=>{ge.eventEmitter.on(e,t)},oP=(e,t)=>{ge.eventEmitter.once(e,t)},aP=(e,t)=>{if(!e){ge.eventEmitter.reset();return}t?ge.eventEmitter.removeListener(e,t):ge.eventEmitter.removeAllListeners(e)};var lP=Object.freeze({__proto__:null,argsToParams:XA,bindClickHandler:nP,clickCancel:XL,clickConfirm:F1,clickDeny:YL,enableLoading:Mi,fire:KA,getActions:Ca,getCancelButton:Xi,getCloseButton:Qp,getConfirmButton:Qn,getContainer:zt,getDenyButton:Ps,getFocusableElements:Jp,getFooter:N1,getHtmlContainer:Xp,getIcon:Yi,getIconContent:eL,getImage:E1,getInputLabel:tL,getLoader:Ki,getPopup:je,getProgressSteps:Kp,getTimerLeft:JA,getTimerProgressBar:Ed,getTitle:_1,getValidationMessage:_d,increaseTimer:eP,isDeprecatedParameter:i2,isLoading:rL,isTimerRunning:tP,isUpdatableParameter:s2,isValidParameter:r2,isVisible:GL,mixin:QA,off:aP,on:iP,once:oP,resumeTimer:u2,showLoading:Mi,stopTimer:d2,toggleTimer:ZA});class cP{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const f2=["swal-title","swal-html","swal-footer"],dP=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return xP(n),Object.assign(uP(n),fP(n),hP(n),pP(n),mP(n),gP(n),yP(n,f2))},uP=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(r=>{Es(r,["name","value"]);const s=r.getAttribute("name"),i=r.getAttribute("value");!s||!i||(typeof yi[s]=="boolean"?t[s]=i!=="false":typeof yi[s]=="object"?t[s]=JSON.parse(i):t[s]=i)}),t},fP=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(r=>{const s=r.getAttribute("name"),i=r.getAttribute("value");!s||!i||(t[s]=new Function(`return ${i}`)())}),t},hP=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(r=>{Es(r,["type","color","aria-label"]);const s=r.getAttribute("type");!s||!["confirm","cancel","deny"].includes(s)||(t[`${s}ButtonText`]=r.innerHTML,t[`show${qp(s)}Button`]=!0,r.hasAttribute("color")&&(t[`${s}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(t[`${s}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),t},pP=e=>{const t={},n=e.querySelector("swal-image");return n&&(Es(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},mP=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Es(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},gP=e=>{const t={},n=e.querySelector("swal-input");n&&(Es(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach(s=>{Es(s,["value"]);const i=s.getAttribute("value");if(!i)return;const a=s.innerHTML;t.inputOptions[i]=a})),t},yP=(e,t)=>{const n={};for(const r in t){const s=t[r],i=e.querySelector(s);i&&(Es(i,[]),n[s.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},xP=e=>{const t=f2.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const r=n.tagName.toLowerCase();t.includes(r)||Bt(`Unrecognized element <${r}>`)})},Es=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&Bt([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},h2=10,wP=e=>{const t=zt(),n=je();typeof e.willOpen=="function"&&e.willOpen(n),ge.eventEmitter.emit("willOpen",n);const s=window.getComputedStyle(document.body).overflowY;kP(t,n,e),setTimeout(()=>{vP(t,n)},h2),Zp()&&(bP(t,e.scrollbarPadding,s),rA()),!Nd()&&!ge.previousActiveElement&&(ge.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),ge.eventEmitter.emit("didOpen",n)},Ec=e=>{const t=je();if(e.target!==t)return;const n=zt();t.removeEventListener("animationend",Ec),t.removeEventListener("transitionend",Ec),n.style.overflowY="auto",_n(n,W["no-transition"])},vP=(e,t)=>{T1(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Ec),t.addEventListener("transitionend",Ec)):e.style.overflowY="auto"},bP=(e,t,n)=>{sA(),t&&n!=="hidden"&&uA(n),setTimeout(()=>{e.scrollTop=0})},kP=(e,t,n)=>{Ie(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),vt(t,"grid"),setTimeout(()=>{Ie(t,n.showClass.popup),t.style.removeProperty("opacity")},h2)):vt(t,"grid"),Ie([document.documentElement,document.body],W.shown),n.heightAuto&&n.backdrop&&!n.toast&&Ie([document.documentElement,document.body],W["height-auto"])};var py={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function SP(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=py.email),e.input==="url"&&(e.inputValidator=py.url))}function _P(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Bt('Target parameter is not valid, defaulting to "body"'),e.target="body")}function EP(e){SP(e),e.showLoaderOnConfirm&&!e.preConfirm&&Bt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),_P(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),mL(e)}let zn;var cl=new WeakMap;class ot{constructor(...t){if(qR(this,cl,void 0),typeof window>"u")return;zn=this;const n=Object.freeze(this.constructor.argsToParams(t));this.params=n,this.isAwaitingPromise=!1,GR(cl,this,this._main(zn.params))}_main(t,n={}){if(o2(Object.assign({},n,t)),ge.currentInstance){const i=Pi.swalPromiseResolve.get(ge.currentInstance),{isAwaitingPromise:a}=ge.currentInstance;ge.currentInstance._destroy(),a||i({isDismissed:!0}),Zp()&&U1()}ge.currentInstance=zn;const r=jP(t,n);EP(r),Object.freeze(r),ge.timeout&&(ge.timeout.stop(),delete ge.timeout),clearTimeout(ge.restoreFocusTimeout);const s=CP(zn);return O1(zn,r),Ue.innerParams.set(zn,r),NP(zn,s,r)}then(t){return sy(cl,this).then(t)}finally(t){return sy(cl,this).finally(t)}}const NP=(e,t,n)=>new Promise((r,s)=>{const i=a=>{e.close({isDismissed:!0,dismiss:a,isConfirmed:!1,isDenied:!1})};Pi.swalPromiseResolve.set(e,r),Pi.swalPromiseReject.set(e,s),t.confirmButton.onclick=()=>{CA(e)},t.denyButton.onclick=()=>{TA(e)},t.cancelButton.onclick=()=>{IA(e,i)},t.closeButton.onclick=()=>{i(Qi.close)},zA(n,t,i),KL(ge,n,i),wA(e,n),wP(n),TP(ge,n,i),IP(t,n),setTimeout(()=>{t.container.scrollTop=0})}),jP=(e,t)=>{const n=dP(e),r=Object.assign({},yi,t,n,e);return r.showClass=Object.assign({},yi.showClass,r.showClass),r.hideClass=Object.assign({},yi.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},CP=e=>{const t={popup:je(),container:zt(),actions:Ca(),confirmButton:Qn(),denyButton:Ps(),cancelButton:Xi(),loader:Ki(),closeButton:Qp(),validationMessage:_d(),progressSteps:Kp()};return Ue.domCache.set(e,t),t},TP=(e,t,n)=>{const r=Ed();It(r),t.timer&&(e.timeout=new cP(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(vt(r),on(r,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&tm(t.timer)})))},IP=(e,t)=>{if(!t.toast){if(!Sd(t.allowEnterKey)){S1("allowEnterKey"),AP();return}RP(e)||LP(e,t)||Jf(-1,1)}},RP=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&Xt(n))return n.focus(),!0;return!1},LP=(e,t)=>t.focusDeny&&Xt(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&Xt(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&Xt(e.confirmButton)?(e.confirmButton.focus(),!0):!1,AP=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};ot.prototype.disableButtons=J1;ot.prototype.enableButtons=Q1;ot.prototype.getInput=Y1;ot.prototype.disableInput=e2;ot.prototype.enableInput=Z1;ot.prototype.hideLoading=Sc;ot.prototype.disableLoading=Sc;ot.prototype.showValidationMessage=t2;ot.prototype.resetValidationMessage=n2;ot.prototype.close=Pr;ot.prototype.closePopup=Pr;ot.prototype.closeModal=Pr;ot.prototype.closeToast=Pr;ot.prototype.rejectPromise=W1;ot.prototype.update=a2;ot.prototype._destroy=l2;Object.assign(ot,lP);Object.keys(UA).forEach(e=>{ot[e]=function(...t){return zn&&zn[e]?zn[e](...t):null}});ot.DismissReason=Qi;ot.version="11.26.3";const Nc=ot;Nc.default=Nc;typeof document<"u"&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');function PP(){const e=nt(),t=Kt(),{user:n}=Ke(),r=t.state,[s,i]=x.useState(""),[a,l]=x.useState(""),[c,d]=x.useState(""),[f,u]=x.useState(""),[h,p]=x.useState(!1);if(x.useEffect(()=>{r||e("/boost")},[r,e]),!r)return null;const{post:y,feedType:w,price:v}=r,m=I=>{const q=I.replace(/\s+/g,"").replace(/[^0-9]/gi,""),A=q.match(/\d{4,16}/g),N=A&&A[0]||"",H=[];for(let L=0,M=N.length;L<M;L+=4)H.push(N.substring(L,L+4));return H.length?H.join(" "):q},g=I=>{const q=I.replace(/\D/g,"");return q.length>=2?q.substring(0,2)+"/"+q.substring(2,4):q},b=I=>{i(m(I.target.value))},k=I=>{d(g(I.target.value))},T=I=>{const q=I.target.value.replace(/\D/g,"");u(q.substring(0,3))},E=async I=>{I.preventDefault(),p(!0);try{await new Promise(A=>setTimeout(A,2e3)),n!=null&&n.id&&await QI(y.id,n.id,w,v),p(!1),(await Nc.fire({icon:"success",title:"Payment Complete!",html:`
                    <p style="margin: 1rem 0; color: #374151;">Your payment is complete and your post is boosted for <strong>6 hours</strong> in the <strong>${S(w)}</strong>.</p>
                    <p style="margin-top: 1rem; color: #6B7280; font-size: 0.9rem;">Thank you for using our boost service!</p>
                `,showCancelButton:!0,confirmButtonText:"Back to Newsfeed",cancelButtonText:"Stay on Boost Page",confirmButtonColor:"#8B5CF6",cancelButtonColor:"#6B7280",customClass:{popup:"rounded-2xl",confirmButton:"px-6 py-2 rounded-lg font-semibold",cancelButton:"px-6 py-2 rounded-lg font-semibold"},buttonsStyling:!0,allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed?e("/feed",{state:{boostSuccess:!0,postId:y.id}}):e("/boost",{state:{boostSuccess:!0,postId:y.id}})}catch(q){console.error("Payment error:",q),p(!1)}},S=I=>{switch(I){case"local":return"Local Newsfeed";case"regional":return"Regional Newsfeed";case"national":return"National Newsfeed"}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-blue-50 dark:from-gray-900 dark:to-gray-950",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx("div",{className:"sticky top-0 z-10 bg-white/80 dark:bg-gray-950/80 backdrop-blur border-b border-gray-200 dark:border-gray-800 px-4 py-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>e("/boost"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Back",children:o.jsx(Dp,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),o.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Payment"})]})}),o.jsx("div",{className:"px-4 pt-6 pb-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-lg p-4 mb-4",children:[o.jsx("h2",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Order Summary"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Boost Type"}),o.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:S(w)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Duration"}),o.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"6 hours"})]}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-800 pt-3 flex items-center justify-between",children:[o.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Total"}),o.jsxs("span",{className:"text-2xl font-bold text-brand-600 dark:text-brand-400",children:["",v.toFixed(2)]})]})]})]})}),o.jsx("div",{className:"px-4 pb-6",children:o.jsxs("form",{onSubmit:E,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Number"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:o.jsx(J6,{className:"w-5 h-5 text-gray-400"})}),o.jsx("input",{type:"text",value:s,onChange:b,placeholder:"1234 5678 9012 3456",maxLength:19,required:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cardholder Name"}),o.jsx("input",{type:"text",value:a,onChange:I=>l(I.target.value),placeholder:"John Doe",required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expiry Date"}),o.jsx("input",{type:"text",value:c,onChange:k,placeholder:"MM/YY",maxLength:5,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CVV"}),o.jsx("input",{type:"text",value:f,onChange:T,placeholder:"123",maxLength:3,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-xl",children:[o.jsx(eI,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 mt-0.5 flex-shrink-0"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Your payment information is encrypted and secure. We use industry-standard SSL encryption to protect your data."})]}),o.jsx("button",{type:"submit",disabled:h,className:`w-full py-4 px-6 rounded-xl font-semibold text-white transition-all duration-200 ${h?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-brand-600 hover:bg-brand-700 dark:bg-brand-500 dark:hover:bg-brand-600 shadow-lg hover:shadow-xl active:scale-[0.98]"}`,children:h?o.jsxs("span",{className:"flex items-center justify-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):`Pay ${v.toFixed(2)}`})]})})]})})}function MP(){const{collectionId:e}=Xh(),t=nt(),n=Kt(),{user:r}=Ke(),s=Sa(),i=(r==null?void 0:r.id)||"",[a,l]=x.useState([]),[c,d]=x.useState(!0),[f,u]=x.useState("Collection"),[h,p]=x.useState(!1),[y,w]=x.useState(null),[v,m]=x.useState(!1),[g,b]=x.useState(null),[k,T]=x.useState(!1),[E,S]=x.useState(null);function I(N,H){l(L=>L.map(M=>M.id===N?H(M):M))}function q(N){w(N),p(!0)}x.useEffect(()=>{const N=n.state;N!=null&&N.collectionName&&u(N.collectionName)},[n.state]),x.useEffect(()=>{e&&(r!=null&&r.id)&&A()},[e,r==null?void 0:r.id]);async function A(){if(!(!e||!(r!=null&&r.id))){d(!0);try{const H=(await tR(e)).map(L=>bn(r.id,L));l(H)}catch(N){console.error("Error loading collection posts:",N)}finally{d(!1)}}}return r?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-brand-100 dark:from-gray-900 dark:to-gray-800 pb-20",children:[o.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:o.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 flex items-center gap-4",children:[o.jsx("button",{onClick:()=>t("/profile"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Back",children:o.jsx(Dp,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:f}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.length," ",a.length===1?"post":"posts"]})]})]})}),o.jsx("div",{className:"max-w-2xl mx-auto pt-6",children:c?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"inline-block w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"}),o.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading posts..."})]}):a.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No posts in this collection yet"})}):o.jsx("div",{className:"space-y-6",children:a.map(N=>o.jsx(Vp,{post:N,onLike:async()=>{if(!s){I(N.id,L=>({...L,userLiked:!L.userLiked})),await et({type:"like",postId:N.id,userId:i});return}const H=await hs(i,N.id);I(N.id,L=>({...H})),window.dispatchEvent(new CustomEvent(`likeToggled-${N.id}`,{detail:{liked:H.userLiked,likes:H.stats.likes}}))},onFollow:async()=>{if(!s){await et({type:"follow",postId:N.id,userId:i});return}const H=await mi(i,N.id);I(N.id,L=>({...H}))},onShare:async()=>{b(N),m(!0)},onOpenComments:()=>q(N.id),onView:async()=>{if(!s){await et({type:"view",postId:N.id,userId:i});return}const H=await mc(i,N.id);I(N.id,L=>({...H})),window.dispatchEvent(new CustomEvent(`viewAdded-${N.id}`))},onReclip:async()=>{if(N.userHandle===(r==null?void 0:r.handle)){console.log("Cannot reclip your own post");return}if(N.userReclipped){console.log("Post already reclipped by user, ignoring reclip request");return}if(!s){I(N.id,L=>({...L,userReclipped:!0,stats:{...L.stats,reclips:L.stats.reclips+1}})),await et({type:"reclip",postId:N.id,userId:i,userHandle:(r==null?void 0:r.handle)||"Unknown@Unknown"}),window.dispatchEvent(new CustomEvent(`reclipAdded-${N.id}`));return}const{originalPost:H}=await Io(i,N.id,(r==null?void 0:r.handle)||"Unknown@Unknown");I(N.id,L=>({...H})),window.dispatchEvent(new CustomEvent(`reclipAdded-${N.id}`,{detail:{reclips:H.stats.reclips}}))},onOpenScenes:()=>{S(N),T(!0)}},N.id))})}),y&&o.jsx(Up,{postId:y,isOpen:h,onClose:()=>{p(!1),w(null)}}),g&&o.jsx(vd,{post:g,isOpen:v,onClose:()=>{m(!1),b(null)}}),E&&o.jsx(zp,{post:E,isOpen:k,onClose:()=>{T(!1),S(null)},onLike:async()=>{if(!s){I(E.id,H=>({...H,userLiked:!H.userLiked})),await et({type:"like",postId:E.id,userId:i});return}const N=await hs(i,E.id);I(E.id,H=>({...N})),S(N),window.dispatchEvent(new CustomEvent(`likeToggled-${E.id}`,{detail:{liked:N.userLiked,likes:N.stats.likes}}))},onFollow:async()=>{if(!s){await et({type:"follow",postId:E.id,userId:i});return}const N=await mi(i,E.id);I(E.id,H=>({...N})),S(N)},onShare:async()=>{b(E),m(!0)},onOpenComments:()=>q(E.id),onReclip:async()=>{if(E.userHandle===(r==null?void 0:r.handle)){console.log("Cannot reclip your own post");return}if(E.userReclipped){console.log("Post already reclipped by user, ignoring reclip request");return}if(!s){I(E.id,H=>({...H,userReclipped:!0,stats:{...H.stats,reclips:H.stats.reclips+1}})),await et({type:"reclip",postId:E.id,userId:i,userHandle:(r==null?void 0:r.handle)||"Unknown@Unknown"}),window.dispatchEvent(new CustomEvent(`reclipAdded-${E.id}`));return}const{originalPost:N}=await Io(i,E.id,(r==null?void 0:r.handle)||"Unknown@Unknown");I(E.id,H=>({...N})),S(N),window.dispatchEvent(new CustomEvent(`reclipAdded-${E.id}`,{detail:{reclips:N.stats.reclips}}))}})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-brand-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Not Signed In"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please sign in to view collections"}),o.jsx("button",{onClick:()=>t("/login"),className:"px-6 py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Sign In"})]})})}function DP(){return o.jsx(Mp,{fallback:o.jsx("div",{className:"p-6 text-red-600",children:"Something went wrong."}),children:o.jsx(pI,{children:o.jsx(gR,{children:o.jsx($_,{children:o.jsxs(O_,{children:[o.jsx(lt,{path:"/splash",element:o.jsx(WR,{})}),o.jsxs(lt,{path:"/",element:o.jsx(Wp,{}),children:[o.jsx(lt,{index:!0,element:o.jsx(P_,{to:"/splash",replace:!0})}),o.jsx(lt,{path:"feed",element:o.jsx(g1,{})}),o.jsx(lt,{path:"create",element:o.jsx(xR,{})}),o.jsx(lt,{path:"create/instant",element:o.jsx(UR,{})}),o.jsx(lt,{path:"create/filters",element:o.jsx(HR,{})}),o.jsx(lt,{path:"login",element:o.jsx(wR,{})}),o.jsx(lt,{path:"boost",element:o.jsx(y1,{})}),o.jsx(lt,{path:"payment",element:o.jsx(PP,{})}),o.jsx(lt,{path:"clip",element:o.jsx(yR,{})}),o.jsx(lt,{path:"stories",element:o.jsx(ER,{})}),o.jsx(lt,{path:"discover",element:o.jsx(_R,{})}),o.jsx(lt,{path:"search",element:o.jsx(bR,{})}),o.jsx(lt,{path:"profile",element:o.jsx(vR,{})}),o.jsx(lt,{path:"user/:handle",element:o.jsx(NR,{})}),o.jsx(lt,{path:"collection/:collectionId",element:o.jsx(MP,{})})]}),o.jsx(lt,{path:"messages/:handle",element:o.jsx(AR,{})}),o.jsx(lt,{path:"inbox",element:o.jsx($R,{})})]})})})})})}function OP(){({}).VITE_SENTRY_DSN&&P6({dsn:{}.VITE_SENTRY_DSN,release:{}.VITE_RELEASE_VERSION,integrations:[MC(),L6()],tracesSampleRate:.1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,environment:"production"})}OP();my(()=>import("./vitals-19dc2f25.js"),[]).then(e=>e.initVitals());xu.createRoot(document.getElementById("root")).render(o.jsx(x.StrictMode,{children:o.jsx(DP,{})}));
