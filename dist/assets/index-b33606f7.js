var p3=Object.defineProperty;var g3=(e,t,n)=>t in e?p3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Nr=(e,t,n)=>(g3(e,typeof t!="symbol"?t+"":t,n),n),dw=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var _t=(e,t,n)=>(dw(e,t,"read from private field"),n?n.call(e):t.get(e)),Ga=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_c=(e,t,n,r)=>(dw(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);function x3(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const y3="modulepreload",b3=function(e){return"/"+e},uw={},En=function(t,n,r){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=b3(i),i in uw)return;uw[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let u=a.length-1;u>=0;u--){const f=a[u];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":y3,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((u,f)=>{d.addEventListener("load",u),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};function v3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var DS={exports:{}},dm={},FS={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu=Symbol.for("react.element"),w3=Symbol.for("react.portal"),k3=Symbol.for("react.fragment"),S3=Symbol.for("react.strict_mode"),j3=Symbol.for("react.profiler"),N3=Symbol.for("react.provider"),C3=Symbol.for("react.context"),T3=Symbol.for("react.forward_ref"),E3=Symbol.for("react.suspense"),_3=Symbol.for("react.memo"),R3=Symbol.for("react.lazy"),fw=Symbol.iterator;function L3(e){return e===null||typeof e!="object"?null:(e=fw&&e[fw]||e["@@iterator"],typeof e=="function"?e:null)}var BS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OS=Object.assign,US={};function ic(e,t,n){this.props=e,this.context=t,this.refs=US,this.updater=n||BS}ic.prototype.isReactComponent={};ic.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ic.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zS(){}zS.prototype=ic.prototype;function Xx(e,t,n){this.props=e,this.context=t,this.refs=US,this.updater=n||BS}var Jx=Xx.prototype=new zS;Jx.constructor=Xx;OS(Jx,ic.prototype);Jx.isPureReactComponent=!0;var hw=Array.isArray,$S=Object.prototype.hasOwnProperty,Zx={current:null},HS={key:!0,ref:!0,__self:!0,__source:!0};function WS(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)$S.call(t,r)&&!HS.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:cu,type:e,key:i,ref:o,props:a,_owner:Zx.current}}function I3(e,t){return{$$typeof:cu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qx(e){return typeof e=="object"&&e!==null&&e.$$typeof===cu}function P3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var mw=/\/+/g;function Np(e,t){return typeof e=="object"&&e!==null&&e.key!=null?P3(""+e.key):t.toString(36)}function Pf(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case cu:case w3:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Np(o,0):r,hw(a)?(n="",e!=null&&(n=e.replace(mw,"$&/")+"/"),Pf(a,t,n,"",function(d){return d})):a!=null&&(Qx(a)&&(a=I3(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(mw,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",hw(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Np(i,l);o+=Pf(i,t,n,c,a)}else if(c=L3(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Np(i,l++),o+=Pf(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ku(e,t,n){if(e==null)return e;var r=[],a=0;return Pf(e,r,"","",function(i){return t.call(n,i,a++)}),r}function M3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fr={current:null},Mf={transition:null},A3={ReactCurrentDispatcher:Fr,ReactCurrentBatchConfig:Mf,ReactCurrentOwner:Zx};function VS(){throw Error("act(...) is not supported in production builds of React.")}Dt.Children={map:Ku,forEach:function(e,t,n){Ku(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ku(e,function(){t++}),t},toArray:function(e){return Ku(e,function(t){return t})||[]},only:function(e){if(!Qx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dt.Component=ic;Dt.Fragment=k3;Dt.Profiler=j3;Dt.PureComponent=Xx;Dt.StrictMode=S3;Dt.Suspense=E3;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A3;Dt.act=VS;Dt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=OS({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Zx.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)$S.call(t,c)&&!HS.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:cu,type:e.type,key:a,ref:i,props:r,_owner:o}};Dt.createContext=function(e){return e={$$typeof:C3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:N3,_context:e},e.Consumer=e};Dt.createElement=WS;Dt.createFactory=function(e){var t=WS.bind(null,e);return t.type=e,t};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(e){return{$$typeof:T3,render:e}};Dt.isValidElement=Qx;Dt.lazy=function(e){return{$$typeof:R3,_payload:{_status:-1,_result:e},_init:M3}};Dt.memo=function(e,t){return{$$typeof:_3,type:e,compare:t===void 0?null:t}};Dt.startTransition=function(e){var t=Mf.transition;Mf.transition={};try{e()}finally{Mf.transition=t}};Dt.unstable_act=VS;Dt.useCallback=function(e,t){return Fr.current.useCallback(e,t)};Dt.useContext=function(e){return Fr.current.useContext(e)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(e){return Fr.current.useDeferredValue(e)};Dt.useEffect=function(e,t){return Fr.current.useEffect(e,t)};Dt.useId=function(){return Fr.current.useId()};Dt.useImperativeHandle=function(e,t,n){return Fr.current.useImperativeHandle(e,t,n)};Dt.useInsertionEffect=function(e,t){return Fr.current.useInsertionEffect(e,t)};Dt.useLayoutEffect=function(e,t){return Fr.current.useLayoutEffect(e,t)};Dt.useMemo=function(e,t){return Fr.current.useMemo(e,t)};Dt.useReducer=function(e,t,n){return Fr.current.useReducer(e,t,n)};Dt.useRef=function(e){return Fr.current.useRef(e)};Dt.useState=function(e){return Fr.current.useState(e)};Dt.useSyncExternalStore=function(e,t,n){return Fr.current.useSyncExternalStore(e,t,n)};Dt.useTransition=function(){return Fr.current.useTransition()};Dt.version="18.3.1";FS.exports=Dt;var D=FS.exports;const m=v3(D),D3=x3({__proto__:null,default:m},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F3=D,B3=Symbol.for("react.element"),O3=Symbol.for("react.fragment"),U3=Object.prototype.hasOwnProperty,z3=F3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$3={key:!0,ref:!0,__self:!0,__source:!0};function GS(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)U3.call(t,r)&&!$3.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:B3,type:e,key:i,ref:o,props:a,_owner:z3.current}}dm.Fragment=O3;dm.jsx=GS;dm.jsxs=GS;DS.exports=dm;var s=DS.exports,Ag={},KS={exports:{}},as={},YS={exports:{}},qS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,J){var U=z.length;z.push(J);e:for(;0<U;){var ue=U-1>>>1,fe=z[ue];if(0<a(fe,J))z[ue]=J,z[U]=fe,U=ue;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var J=z[0],U=z.pop();if(U!==J){z[0]=U;e:for(var ue=0,fe=z.length,Ae=fe>>>1;ue<Ae;){var _e=2*(ue+1)-1,Re=z[_e],Se=_e+1,de=z[Se];if(0>a(Re,U))Se<fe&&0>a(de,Re)?(z[ue]=de,z[Se]=U,ue=Se):(z[ue]=Re,z[_e]=U,ue=_e);else if(Se<fe&&0>a(de,U))z[ue]=de,z[Se]=U,ue=Se;else break e}}return J}function a(z,J){var U=z.sortIndex-J.sortIndex;return U!==0?U:z.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,h=3,g=!1,y=!1,p=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var J=n(d);J!==null;){if(J.callback===null)r(d);else if(J.startTime<=z)r(d),J.sortIndex=J.expirationTime,t(c,J);else break;J=n(d)}}function w(z){if(p=!1,b(z),!y)if(n(c)!==null)y=!0,X(N);else{var J=n(d);J!==null&&V(w,J.startTime-z)}}function N(z,J){y=!1,p&&(p=!1,x(_),_=-1),g=!0;var U=h;try{for(b(J),f=n(c);f!==null&&(!(f.expirationTime>J)||z&&!E());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,h=f.priorityLevel;var fe=ue(f.expirationTime<=J);J=e.unstable_now(),typeof fe=="function"?f.callback=fe:f===n(c)&&r(c),b(J)}else r(c);f=n(c)}if(f!==null)var Ae=!0;else{var _e=n(d);_e!==null&&V(w,_e.startTime-J),Ae=!1}return Ae}finally{f=null,h=U,g=!1}}var R=!1,C=null,_=-1,W=5,T=-1;function E(){return!(e.unstable_now()-T<W)}function B(){if(C!==null){var z=e.unstable_now();T=z;var J=!0;try{J=C(!0,z)}finally{J?H():(R=!1,C=null)}}else R=!1}var H;if(typeof v=="function")H=function(){v(B)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ie=q.port2;q.port1.onmessage=B,H=function(){ie.postMessage(null)}}else H=function(){S(B,0)};function X(z){C=z,R||(R=!0,H())}function V(z,J){_=S(function(){z(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){y||g||(y=!0,X(N))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var J=3;break;default:J=h}var U=h;h=J;try{return z()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var U=h;h=z;try{return J()}finally{h=U}},e.unstable_scheduleCallback=function(z,J,U){var ue=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ue+U:ue):U=ue,z){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=U+fe,z={id:u++,callback:J,priorityLevel:z,startTime:U,expirationTime:fe,sortIndex:-1},U>ue?(z.sortIndex=U,t(d,z),n(c)===null&&z===n(d)&&(p?(x(_),_=-1):p=!0,V(w,U-ue))):(z.sortIndex=fe,t(c,z),y||g||(y=!0,X(N))),z},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(z){var J=h;return function(){var U=h;h=J;try{return z.apply(this,arguments)}finally{h=U}}}})(qS);YS.exports=qS;var H3=YS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W3=D,ns=H3;function Ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XS=new Set,vd={};function Io(e,t){Ml(e,t),Ml(e+"Capture",t)}function Ml(e,t){for(vd[e]=t,e=0;e<t.length;e++)XS.add(t[e])}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dg=Object.prototype.hasOwnProperty,V3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pw={},gw={};function G3(e){return Dg.call(gw,e)?!0:Dg.call(pw,e)?!1:V3.test(e)?gw[e]=!0:(pw[e]=!0,!1)}function K3(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y3(e,t,n,r){if(t===null||typeof t>"u"||K3(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Br(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var pr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pr[e]=new Br(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pr[t]=new Br(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pr[e]=new Br(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pr[e]=new Br(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pr[e]=new Br(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pr[e]=new Br(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pr[e]=new Br(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pr[e]=new Br(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pr[e]=new Br(e,5,!1,e.toLowerCase(),null,!1,!1)});var ey=/[\-:]([a-z])/g;function ty(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ey,ty);pr[t]=new Br(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ey,ty);pr[t]=new Br(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ey,ty);pr[t]=new Br(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pr[e]=new Br(e,1,!1,e.toLowerCase(),null,!1,!1)});pr.xlinkHref=new Br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pr[e]=new Br(e,1,!1,e.toLowerCase(),null,!0,!0)});function ny(e,t,n,r){var a=pr.hasOwnProperty(t)?pr[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Y3(t,n,a,r)&&(n=null),r||a===null?G3(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $a=W3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yu=Symbol.for("react.element"),Yo=Symbol.for("react.portal"),qo=Symbol.for("react.fragment"),ry=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),JS=Symbol.for("react.provider"),ZS=Symbol.for("react.context"),sy=Symbol.for("react.forward_ref"),Bg=Symbol.for("react.suspense"),Og=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),Xa=Symbol.for("react.lazy"),QS=Symbol.for("react.offscreen"),xw=Symbol.iterator;function Rc(e){return e===null||typeof e!="object"?null:(e=xw&&e[xw]||e["@@iterator"],typeof e=="function"?e:null)}var In=Object.assign,Cp;function Wc(e){if(Cp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Cp=t&&t[1]||""}return`
`+Cp+e}var Tp=!1;function Ep(e,t){if(!e||Tp)return"";Tp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Tp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Wc(e):""}function q3(e){switch(e.tag){case 5:return Wc(e.type);case 16:return Wc("Lazy");case 13:return Wc("Suspense");case 19:return Wc("SuspenseList");case 0:case 2:case 15:return e=Ep(e.type,!1),e;case 11:return e=Ep(e.type.render,!1),e;case 1:return e=Ep(e.type,!0),e;default:return""}}function Ug(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qo:return"Fragment";case Yo:return"Portal";case Fg:return"Profiler";case ry:return"StrictMode";case Bg:return"Suspense";case Og:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ZS:return(e.displayName||"Context")+".Consumer";case JS:return(e._context.displayName||"Context")+".Provider";case sy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ay:return t=e.displayName||null,t!==null?t:Ug(e.type)||"Memo";case Xa:t=e._payload,e=e._init;try{return Ug(e(t))}catch{}}return null}function X3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ug(t);case 8:return t===ry?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Li(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ej(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function J3(e){var t=ej(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qu(e){e._valueTracker||(e._valueTracker=J3(e))}function tj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ej(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Zf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zg(e,t){var n=t.checked;return In({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yw(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Li(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nj(e,t){t=t.checked,t!=null&&ny(e,"checked",t,!1)}function $g(e,t){nj(e,t);var n=Li(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hg(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hg(e,t.type,Li(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bw(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hg(e,t,n){(t!=="number"||Zf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vc=Array.isArray;function vl(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Li(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Wg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return In({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vw(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ie(92));if(Vc(n)){if(1<n.length)throw Error(Ie(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Li(n)}}function rj(e,t){var n=Li(t.value),r=Li(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ww(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xu,aj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xu=Xu||document.createElement("div"),Xu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z3=["Webkit","ms","Moz","O"];Object.keys(Zc).forEach(function(e){Z3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zc[t]=Zc[e]})});function ij(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zc.hasOwnProperty(e)&&Zc[e]?(""+t).trim():t+"px"}function oj(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=ij(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Q3=In({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gg(e,t){if(t){if(Q3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ie(62))}}function Kg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yg=null;function iy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qg=null,wl=null,kl=null;function kw(e){if(e=fu(e)){if(typeof qg!="function")throw Error(Ie(280));var t=e.stateNode;t&&(t=pm(t),qg(e.stateNode,e.type,t))}}function lj(e){wl?kl?kl.push(e):kl=[e]:wl=e}function cj(){if(wl){var e=wl,t=kl;if(kl=wl=null,kw(e),t)for(e=0;e<t.length;e++)kw(t[e])}}function dj(e,t){return e(t)}function uj(){}var _p=!1;function fj(e,t,n){if(_p)return e(t,n);_p=!0;try{return dj(e,t,n)}finally{_p=!1,(wl!==null||kl!==null)&&(uj(),cj())}}function kd(e,t){var n=e.stateNode;if(n===null)return null;var r=pm(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ie(231,t,typeof n));return n}var Xg=!1;if(Ia)try{var Lc={};Object.defineProperty(Lc,"passive",{get:function(){Xg=!0}}),window.addEventListener("test",Lc,Lc),window.removeEventListener("test",Lc,Lc)}catch{Xg=!1}function eR(e,t,n,r,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var Qc=!1,Qf=null,eh=!1,Jg=null,tR={onError:function(e){Qc=!0,Qf=e}};function nR(e,t,n,r,a,i,o,l,c){Qc=!1,Qf=null,eR.apply(tR,arguments)}function rR(e,t,n,r,a,i,o,l,c){if(nR.apply(this,arguments),Qc){if(Qc){var d=Qf;Qc=!1,Qf=null}else throw Error(Ie(198));eh||(eh=!0,Jg=d)}}function Po(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sw(e){if(Po(e)!==e)throw Error(Ie(188))}function sR(e){var t=e.alternate;if(!t){if(t=Po(e),t===null)throw Error(Ie(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Sw(a),e;if(i===r)return Sw(a),t;i=i.sibling}throw Error(Ie(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(Ie(189))}}if(n.alternate!==r)throw Error(Ie(190))}if(n.tag!==3)throw Error(Ie(188));return n.stateNode.current===n?e:t}function mj(e){return e=sR(e),e!==null?pj(e):null}function pj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pj(e);if(t!==null)return t;e=e.sibling}return null}var gj=ns.unstable_scheduleCallback,jw=ns.unstable_cancelCallback,aR=ns.unstable_shouldYield,iR=ns.unstable_requestPaint,Kn=ns.unstable_now,oR=ns.unstable_getCurrentPriorityLevel,oy=ns.unstable_ImmediatePriority,xj=ns.unstable_UserBlockingPriority,th=ns.unstable_NormalPriority,lR=ns.unstable_LowPriority,yj=ns.unstable_IdlePriority,um=null,ia=null;function cR(e){if(ia&&typeof ia.onCommitFiberRoot=="function")try{ia.onCommitFiberRoot(um,e,void 0,(e.current.flags&128)===128)}catch{}}var Ds=Math.clz32?Math.clz32:fR,dR=Math.log,uR=Math.LN2;function fR(e){return e>>>=0,e===0?32:31-(dR(e)/uR|0)|0}var Ju=64,Zu=4194304;function Gc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=Gc(l):(i&=o,i!==0&&(r=Gc(i)))}else o=n&~a,o!==0?r=Gc(o):i!==0&&(r=Gc(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ds(t),a=1<<n,r|=e[n],t&=~a;return r}function hR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mR(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ds(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=hR(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Zg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bj(){var e=Ju;return Ju<<=1,!(Ju&4194240)&&(Ju=64),e}function Rp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function du(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ds(t),e[t]=n}function pR(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ds(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function ly(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ds(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var sn=0;function vj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wj,cy,kj,Sj,jj,Qg=!1,Qu=[],xi=null,yi=null,bi=null,Sd=new Map,jd=new Map,ni=[],gR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nw(e,t){switch(e){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":Sd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jd.delete(t.pointerId)}}function Ic(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=fu(t),t!==null&&cy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function xR(e,t,n,r,a){switch(t){case"focusin":return xi=Ic(xi,e,t,n,r,a),!0;case"dragenter":return yi=Ic(yi,e,t,n,r,a),!0;case"mouseover":return bi=Ic(bi,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Sd.set(i,Ic(Sd.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,jd.set(i,Ic(jd.get(i)||null,e,t,n,r,a)),!0}return!1}function Nj(e){var t=io(e.target);if(t!==null){var n=Po(t);if(n!==null){if(t=n.tag,t===13){if(t=hj(n),t!==null){e.blockedOn=t,jj(e.priority,function(){kj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Af(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=e0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Yg=r,n.target.dispatchEvent(r),Yg=null}else return t=fu(n),t!==null&&cy(t),e.blockedOn=n,!1;t.shift()}return!0}function Cw(e,t,n){Af(e)&&n.delete(t)}function yR(){Qg=!1,xi!==null&&Af(xi)&&(xi=null),yi!==null&&Af(yi)&&(yi=null),bi!==null&&Af(bi)&&(bi=null),Sd.forEach(Cw),jd.forEach(Cw)}function Pc(e,t){e.blockedOn===t&&(e.blockedOn=null,Qg||(Qg=!0,ns.unstable_scheduleCallback(ns.unstable_NormalPriority,yR)))}function Nd(e){function t(a){return Pc(a,e)}if(0<Qu.length){Pc(Qu[0],e);for(var n=1;n<Qu.length;n++){var r=Qu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(xi!==null&&Pc(xi,e),yi!==null&&Pc(yi,e),bi!==null&&Pc(bi,e),Sd.forEach(t),jd.forEach(t),n=0;n<ni.length;n++)r=ni[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ni.length&&(n=ni[0],n.blockedOn===null);)Nj(n),n.blockedOn===null&&ni.shift()}var Sl=$a.ReactCurrentBatchConfig,rh=!0;function bR(e,t,n,r){var a=sn,i=Sl.transition;Sl.transition=null;try{sn=1,dy(e,t,n,r)}finally{sn=a,Sl.transition=i}}function vR(e,t,n,r){var a=sn,i=Sl.transition;Sl.transition=null;try{sn=4,dy(e,t,n,r)}finally{sn=a,Sl.transition=i}}function dy(e,t,n,r){if(rh){var a=e0(e,t,n,r);if(a===null)Up(e,t,r,sh,n),Nw(e,r);else if(xR(a,e,t,n,r))r.stopPropagation();else if(Nw(e,r),t&4&&-1<gR.indexOf(e)){for(;a!==null;){var i=fu(a);if(i!==null&&wj(i),i=e0(e,t,n,r),i===null&&Up(e,t,r,sh,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Up(e,t,r,null,n)}}var sh=null;function e0(e,t,n,r){if(sh=null,e=iy(r),e=io(e),e!==null)if(t=Po(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hj(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sh=e,null}function Cj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oR()){case oy:return 1;case xj:return 4;case th:case lR:return 16;case yj:return 536870912;default:return 16}default:return 16}}var oi=null,uy=null,Df=null;function Tj(){if(Df)return Df;var e,t=uy,n=t.length,r,a="value"in oi?oi.value:oi.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return Df=a.slice(e,1<r?1-r:void 0)}function Ff(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ef(){return!0}function Tw(){return!1}function is(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ef:Tw,this.isPropagationStopped=Tw,this}return In(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ef)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ef)},persist:function(){},isPersistent:ef}),t}var oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fy=is(oc),uu=In({},oc,{view:0,detail:0}),wR=is(uu),Lp,Ip,Mc,fm=In({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mc&&(Mc&&e.type==="mousemove"?(Lp=e.screenX-Mc.screenX,Ip=e.screenY-Mc.screenY):Ip=Lp=0,Mc=e),Lp)},movementY:function(e){return"movementY"in e?e.movementY:Ip}}),Ew=is(fm),kR=In({},fm,{dataTransfer:0}),SR=is(kR),jR=In({},uu,{relatedTarget:0}),Pp=is(jR),NR=In({},oc,{animationName:0,elapsedTime:0,pseudoElement:0}),CR=is(NR),TR=In({},oc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ER=is(TR),_R=In({},oc,{data:0}),_w=is(_R),RR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=IR[e])?!!t[e]:!1}function hy(){return PR}var MR=In({},uu,{key:function(e){if(e.key){var t=RR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ff(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?LR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hy,charCode:function(e){return e.type==="keypress"?Ff(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ff(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),AR=is(MR),DR=In({},fm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rw=is(DR),FR=In({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hy}),BR=is(FR),OR=In({},oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),UR=is(OR),zR=In({},fm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$R=is(zR),HR=[9,13,27,32],my=Ia&&"CompositionEvent"in window,ed=null;Ia&&"documentMode"in document&&(ed=document.documentMode);var WR=Ia&&"TextEvent"in window&&!ed,Ej=Ia&&(!my||ed&&8<ed&&11>=ed),Lw=String.fromCharCode(32),Iw=!1;function _j(e,t){switch(e){case"keyup":return HR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xo=!1;function VR(e,t){switch(e){case"compositionend":return Rj(t);case"keypress":return t.which!==32?null:(Iw=!0,Lw);case"textInput":return e=t.data,e===Lw&&Iw?null:e;default:return null}}function GR(e,t){if(Xo)return e==="compositionend"||!my&&_j(e,t)?(e=Tj(),Df=uy=oi=null,Xo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ej&&t.locale!=="ko"?null:t.data;default:return null}}var KR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!KR[e.type]:t==="textarea"}function Lj(e,t,n,r){lj(r),t=ah(t,"onChange"),0<t.length&&(n=new fy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var td=null,Cd=null;function YR(e){$j(e,0)}function hm(e){var t=Qo(e);if(tj(t))return e}function qR(e,t){if(e==="change")return t}var Ij=!1;if(Ia){var Mp;if(Ia){var Ap="oninput"in document;if(!Ap){var Mw=document.createElement("div");Mw.setAttribute("oninput","return;"),Ap=typeof Mw.oninput=="function"}Mp=Ap}else Mp=!1;Ij=Mp&&(!document.documentMode||9<document.documentMode)}function Aw(){td&&(td.detachEvent("onpropertychange",Pj),Cd=td=null)}function Pj(e){if(e.propertyName==="value"&&hm(Cd)){var t=[];Lj(t,Cd,e,iy(e)),fj(YR,t)}}function XR(e,t,n){e==="focusin"?(Aw(),td=t,Cd=n,td.attachEvent("onpropertychange",Pj)):e==="focusout"&&Aw()}function JR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hm(Cd)}function ZR(e,t){if(e==="click")return hm(t)}function QR(e,t){if(e==="input"||e==="change")return hm(t)}function eL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Us=typeof Object.is=="function"?Object.is:eL;function Td(e,t){if(Us(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Dg.call(t,a)||!Us(e[a],t[a]))return!1}return!0}function Dw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fw(e,t){var n=Dw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dw(n)}}function Mj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Aj(){for(var e=window,t=Zf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Zf(e.document)}return t}function py(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tL(e){var t=Aj(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Mj(n.ownerDocument.documentElement,n)){if(r!==null&&py(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=Fw(n,i);var o=Fw(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nL=Ia&&"documentMode"in document&&11>=document.documentMode,Jo=null,t0=null,nd=null,n0=!1;function Bw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;n0||Jo==null||Jo!==Zf(r)||(r=Jo,"selectionStart"in r&&py(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nd&&Td(nd,r)||(nd=r,r=ah(t0,"onSelect"),0<r.length&&(t=new fy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jo)))}function tf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zo={animationend:tf("Animation","AnimationEnd"),animationiteration:tf("Animation","AnimationIteration"),animationstart:tf("Animation","AnimationStart"),transitionend:tf("Transition","TransitionEnd")},Dp={},Dj={};Ia&&(Dj=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function mm(e){if(Dp[e])return Dp[e];if(!Zo[e])return e;var t=Zo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Dj)return Dp[e]=t[n];return e}var Fj=mm("animationend"),Bj=mm("animationiteration"),Oj=mm("animationstart"),Uj=mm("transitionend"),zj=new Map,Ow="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bi(e,t){zj.set(e,t),Io(t,[e])}for(var Fp=0;Fp<Ow.length;Fp++){var Bp=Ow[Fp],rL=Bp.toLowerCase(),sL=Bp[0].toUpperCase()+Bp.slice(1);Bi(rL,"on"+sL)}Bi(Fj,"onAnimationEnd");Bi(Bj,"onAnimationIteration");Bi(Oj,"onAnimationStart");Bi("dblclick","onDoubleClick");Bi("focusin","onFocus");Bi("focusout","onBlur");Bi(Uj,"onTransitionEnd");Ml("onMouseEnter",["mouseout","mouseover"]);Ml("onMouseLeave",["mouseout","mouseover"]);Ml("onPointerEnter",["pointerout","pointerover"]);Ml("onPointerLeave",["pointerout","pointerover"]);Io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Io("onBeforeInput",["compositionend","keypress","textInput","paste"]);Io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kc));function Uw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,rR(r,t,void 0,e),e.currentTarget=null}function $j(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Uw(a,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Uw(a,l,d),i=c}}}if(eh)throw e=Jg,eh=!1,Jg=null,e}function kn(e,t){var n=t[o0];n===void 0&&(n=t[o0]=new Set);var r=e+"__bubble";n.has(r)||(Hj(t,e,2,!1),n.add(r))}function Op(e,t,n){var r=0;t&&(r|=4),Hj(n,e,r,t)}var nf="_reactListening"+Math.random().toString(36).slice(2);function Ed(e){if(!e[nf]){e[nf]=!0,XS.forEach(function(n){n!=="selectionchange"&&(aL.has(n)||Op(n,!1,e),Op(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nf]||(t[nf]=!0,Op("selectionchange",!1,t))}}function Hj(e,t,n,r){switch(Cj(t)){case 1:var a=bR;break;case 4:a=vR;break;default:a=dy}n=a.bind(null,t,n,e),a=void 0,!Xg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Up(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=io(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}fj(function(){var d=i,u=iy(n),f=[];e:{var h=zj.get(e);if(h!==void 0){var g=fy,y=e;switch(e){case"keypress":if(Ff(n)===0)break e;case"keydown":case"keyup":g=AR;break;case"focusin":y="focus",g=Pp;break;case"focusout":y="blur",g=Pp;break;case"beforeblur":case"afterblur":g=Pp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ew;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=SR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=BR;break;case Fj:case Bj:case Oj:g=CR;break;case Uj:g=UR;break;case"scroll":g=wR;break;case"wheel":g=$R;break;case"copy":case"cut":case"paste":g=ER;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Rw}var p=(t&4)!==0,S=!p&&e==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var v=d,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=kd(v,x),w!=null&&p.push(_d(v,w,b)))),S)break;v=v.return}0<p.length&&(h=new g(h,y,null,n,u),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==Yg&&(y=n.relatedTarget||n.fromElement)&&(io(y)||y[Pa]))break e;if((g||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=d,y=y?io(y):null,y!==null&&(S=Po(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=d),g!==y)){if(p=Ew,w="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(p=Rw,w="onPointerLeave",x="onPointerEnter",v="pointer"),S=g==null?h:Qo(g),b=y==null?h:Qo(y),h=new p(w,v+"leave",g,n,u),h.target=S,h.relatedTarget=b,w=null,io(u)===d&&(p=new p(x,v+"enter",y,n,u),p.target=b,p.relatedTarget=S,w=p),S=w,g&&y)t:{for(p=g,x=y,v=0,b=p;b;b=Ho(b))v++;for(b=0,w=x;w;w=Ho(w))b++;for(;0<v-b;)p=Ho(p),v--;for(;0<b-v;)x=Ho(x),b--;for(;v--;){if(p===x||x!==null&&p===x.alternate)break t;p=Ho(p),x=Ho(x)}p=null}else p=null;g!==null&&zw(f,h,g,p,!1),y!==null&&S!==null&&zw(f,S,y,p,!0)}}e:{if(h=d?Qo(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var N=qR;else if(Pw(h))if(Ij)N=QR;else{N=JR;var R=XR}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=ZR);if(N&&(N=N(e,d))){Lj(f,N,n,u);break e}R&&R(e,h,d),e==="focusout"&&(R=h._wrapperState)&&R.controlled&&h.type==="number"&&Hg(h,"number",h.value)}switch(R=d?Qo(d):window,e){case"focusin":(Pw(R)||R.contentEditable==="true")&&(Jo=R,t0=d,nd=null);break;case"focusout":nd=t0=Jo=null;break;case"mousedown":n0=!0;break;case"contextmenu":case"mouseup":case"dragend":n0=!1,Bw(f,n,u);break;case"selectionchange":if(nL)break;case"keydown":case"keyup":Bw(f,n,u)}var C;if(my)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Xo?_j(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Ej&&n.locale!=="ko"&&(Xo||_!=="onCompositionStart"?_==="onCompositionEnd"&&Xo&&(C=Tj()):(oi=u,uy="value"in oi?oi.value:oi.textContent,Xo=!0)),R=ah(d,_),0<R.length&&(_=new _w(_,e,null,n,u),f.push({event:_,listeners:R}),C?_.data=C:(C=Rj(n),C!==null&&(_.data=C)))),(C=WR?VR(e,n):GR(e,n))&&(d=ah(d,"onBeforeInput"),0<d.length&&(u=new _w("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:d}),u.data=C))}$j(f,t)})}function _d(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ah(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=kd(e,n),i!=null&&r.unshift(_d(e,i,a)),i=kd(e,t),i!=null&&r.push(_d(e,i,a))),e=e.return}return r}function Ho(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zw(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,a?(c=kd(n,i),c!=null&&o.unshift(_d(n,c,l))):a||(c=kd(n,i),c!=null&&o.push(_d(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var iL=/\r\n?/g,oL=/\u0000|\uFFFD/g;function $w(e){return(typeof e=="string"?e:""+e).replace(iL,`
`).replace(oL,"")}function rf(e,t,n){if(t=$w(t),$w(e)!==t&&n)throw Error(Ie(425))}function ih(){}var r0=null,s0=null;function a0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var i0=typeof setTimeout=="function"?setTimeout:void 0,lL=typeof clearTimeout=="function"?clearTimeout:void 0,Hw=typeof Promise=="function"?Promise:void 0,cL=typeof queueMicrotask=="function"?queueMicrotask:typeof Hw<"u"?function(e){return Hw.resolve(null).then(e).catch(dL)}:i0;function dL(e){setTimeout(function(){throw e})}function zp(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Nd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Nd(t)}function vi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ww(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var lc=Math.random().toString(36).slice(2),ea="__reactFiber$"+lc,Rd="__reactProps$"+lc,Pa="__reactContainer$"+lc,o0="__reactEvents$"+lc,uL="__reactListeners$"+lc,fL="__reactHandles$"+lc;function io(e){var t=e[ea];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pa]||n[ea]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ww(e);e!==null;){if(n=e[ea])return n;e=Ww(e)}return t}e=n,n=e.parentNode}return null}function fu(e){return e=e[ea]||e[Pa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ie(33))}function pm(e){return e[Rd]||null}var l0=[],el=-1;function Oi(e){return{current:e}}function Sn(e){0>el||(e.current=l0[el],l0[el]=null,el--)}function bn(e,t){el++,l0[el]=e.current,e.current=t}var Ii={},wr=Oi(Ii),Gr=Oi(!1),So=Ii;function Al(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Kr(e){return e=e.childContextTypes,e!=null}function oh(){Sn(Gr),Sn(wr)}function Vw(e,t,n){if(wr.current!==Ii)throw Error(Ie(168));bn(wr,t),bn(Gr,n)}function Wj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Ie(108,X3(e)||"Unknown",a));return In({},n,r)}function lh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,So=wr.current,bn(wr,e),bn(Gr,Gr.current),!0}function Gw(e,t,n){var r=e.stateNode;if(!r)throw Error(Ie(169));n?(e=Wj(e,t,So),r.__reactInternalMemoizedMergedChildContext=e,Sn(Gr),Sn(wr),bn(wr,e)):Sn(Gr),bn(Gr,n)}var wa=null,gm=!1,$p=!1;function Vj(e){wa===null?wa=[e]:wa.push(e)}function hL(e){gm=!0,Vj(e)}function Ui(){if(!$p&&wa!==null){$p=!0;var e=0,t=sn;try{var n=wa;for(sn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wa=null,gm=!1}catch(a){throw wa!==null&&(wa=wa.slice(e+1)),gj(oy,Ui),a}finally{sn=t,$p=!1}}return null}var tl=[],nl=0,ch=null,dh=0,ps=[],gs=0,jo=null,ja=1,Na="";function no(e,t){tl[nl++]=dh,tl[nl++]=ch,ch=e,dh=t}function Gj(e,t,n){ps[gs++]=ja,ps[gs++]=Na,ps[gs++]=jo,jo=e;var r=ja;e=Na;var a=32-Ds(r)-1;r&=~(1<<a),n+=1;var i=32-Ds(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,ja=1<<32-Ds(t)+a|n<<a|r,Na=i+e}else ja=1<<i|n<<a|r,Na=e}function gy(e){e.return!==null&&(no(e,1),Gj(e,1,0))}function xy(e){for(;e===ch;)ch=tl[--nl],tl[nl]=null,dh=tl[--nl],tl[nl]=null;for(;e===jo;)jo=ps[--gs],ps[gs]=null,Na=ps[--gs],ps[gs]=null,ja=ps[--gs],ps[gs]=null}var ts=null,es=null,Nn=!1,Ps=null;function Kj(e,t){var n=xs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Kw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ts=e,es=vi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ts=e,es=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jo!==null?{id:ja,overflow:Na}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ts=e,es=null,!0):!1;default:return!1}}function c0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function d0(e){if(Nn){var t=es;if(t){var n=t;if(!Kw(e,t)){if(c0(e))throw Error(Ie(418));t=vi(n.nextSibling);var r=ts;t&&Kw(e,t)?Kj(r,n):(e.flags=e.flags&-4097|2,Nn=!1,ts=e)}}else{if(c0(e))throw Error(Ie(418));e.flags=e.flags&-4097|2,Nn=!1,ts=e}}}function Yw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ts=e}function sf(e){if(e!==ts)return!1;if(!Nn)return Yw(e),Nn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!a0(e.type,e.memoizedProps)),t&&(t=es)){if(c0(e))throw Yj(),Error(Ie(418));for(;t;)Kj(e,t),t=vi(t.nextSibling)}if(Yw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){es=vi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}es=null}}else es=ts?vi(e.stateNode.nextSibling):null;return!0}function Yj(){for(var e=es;e;)e=vi(e.nextSibling)}function Dl(){es=ts=null,Nn=!1}function yy(e){Ps===null?Ps=[e]:Ps.push(e)}var mL=$a.ReactCurrentBatchConfig;function Ac(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ie(309));var r=n.stateNode}if(!r)throw Error(Ie(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ie(284));if(!n._owner)throw Error(Ie(290,e))}return e}function af(e,t){throw e=Object.prototype.toString.call(t),Error(Ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qw(e){var t=e._init;return t(e._payload)}function qj(e){function t(x,v){if(e){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function a(x,v){return x=ji(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,b,w){return v===null||v.tag!==6?(v=qp(b,x.mode,w),v.return=x,v):(v=a(v,b),v.return=x,v)}function c(x,v,b,w){var N=b.type;return N===qo?u(x,v,b.props.children,w,b.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Xa&&qw(N)===v.type)?(w=a(v,b.props),w.ref=Ac(x,v,b),w.return=x,w):(w=Wf(b.type,b.key,b.props,null,x.mode,w),w.ref=Ac(x,v,b),w.return=x,w)}function d(x,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Xp(b,x.mode,w),v.return=x,v):(v=a(v,b.children||[]),v.return=x,v)}function u(x,v,b,w,N){return v===null||v.tag!==7?(v=go(b,x.mode,w,N),v.return=x,v):(v=a(v,b),v.return=x,v)}function f(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=qp(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Yu:return b=Wf(v.type,v.key,v.props,null,x.mode,b),b.ref=Ac(x,null,v),b.return=x,b;case Yo:return v=Xp(v,x.mode,b),v.return=x,v;case Xa:var w=v._init;return f(x,w(v._payload),b)}if(Vc(v)||Rc(v))return v=go(v,x.mode,b,null),v.return=x,v;af(x,v)}return null}function h(x,v,b,w){var N=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:l(x,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yu:return b.key===N?c(x,v,b,w):null;case Yo:return b.key===N?d(x,v,b,w):null;case Xa:return N=b._init,h(x,v,N(b._payload),w)}if(Vc(b)||Rc(b))return N!==null?null:u(x,v,b,w,null);af(x,b)}return null}function g(x,v,b,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,l(v,x,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yu:return x=x.get(w.key===null?b:w.key)||null,c(v,x,w,N);case Yo:return x=x.get(w.key===null?b:w.key)||null,d(v,x,w,N);case Xa:var R=w._init;return g(x,v,b,R(w._payload),N)}if(Vc(w)||Rc(w))return x=x.get(b)||null,u(v,x,w,N,null);af(v,w)}return null}function y(x,v,b,w){for(var N=null,R=null,C=v,_=v=0,W=null;C!==null&&_<b.length;_++){C.index>_?(W=C,C=null):W=C.sibling;var T=h(x,C,b[_],w);if(T===null){C===null&&(C=W);break}e&&C&&T.alternate===null&&t(x,C),v=i(T,v,_),R===null?N=T:R.sibling=T,R=T,C=W}if(_===b.length)return n(x,C),Nn&&no(x,_),N;if(C===null){for(;_<b.length;_++)C=f(x,b[_],w),C!==null&&(v=i(C,v,_),R===null?N=C:R.sibling=C,R=C);return Nn&&no(x,_),N}for(C=r(x,C);_<b.length;_++)W=g(C,x,_,b[_],w),W!==null&&(e&&W.alternate!==null&&C.delete(W.key===null?_:W.key),v=i(W,v,_),R===null?N=W:R.sibling=W,R=W);return e&&C.forEach(function(E){return t(x,E)}),Nn&&no(x,_),N}function p(x,v,b,w){var N=Rc(b);if(typeof N!="function")throw Error(Ie(150));if(b=N.call(b),b==null)throw Error(Ie(151));for(var R=N=null,C=v,_=v=0,W=null,T=b.next();C!==null&&!T.done;_++,T=b.next()){C.index>_?(W=C,C=null):W=C.sibling;var E=h(x,C,T.value,w);if(E===null){C===null&&(C=W);break}e&&C&&E.alternate===null&&t(x,C),v=i(E,v,_),R===null?N=E:R.sibling=E,R=E,C=W}if(T.done)return n(x,C),Nn&&no(x,_),N;if(C===null){for(;!T.done;_++,T=b.next())T=f(x,T.value,w),T!==null&&(v=i(T,v,_),R===null?N=T:R.sibling=T,R=T);return Nn&&no(x,_),N}for(C=r(x,C);!T.done;_++,T=b.next())T=g(C,x,_,T.value,w),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?_:T.key),v=i(T,v,_),R===null?N=T:R.sibling=T,R=T);return e&&C.forEach(function(B){return t(x,B)}),Nn&&no(x,_),N}function S(x,v,b,w){if(typeof b=="object"&&b!==null&&b.type===qo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Yu:e:{for(var N=b.key,R=v;R!==null;){if(R.key===N){if(N=b.type,N===qo){if(R.tag===7){n(x,R.sibling),v=a(R,b.props.children),v.return=x,x=v;break e}}else if(R.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Xa&&qw(N)===R.type){n(x,R.sibling),v=a(R,b.props),v.ref=Ac(x,R,b),v.return=x,x=v;break e}n(x,R);break}else t(x,R);R=R.sibling}b.type===qo?(v=go(b.props.children,x.mode,w,b.key),v.return=x,x=v):(w=Wf(b.type,b.key,b.props,null,x.mode,w),w.ref=Ac(x,v,b),w.return=x,x=w)}return o(x);case Yo:e:{for(R=b.key;v!==null;){if(v.key===R)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=a(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Xp(b,x.mode,w),v.return=x,x=v}return o(x);case Xa:return R=b._init,S(x,v,R(b._payload),w)}if(Vc(b))return y(x,v,b,w);if(Rc(b))return p(x,v,b,w);af(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=a(v,b),v.return=x,x=v):(n(x,v),v=qp(b,x.mode,w),v.return=x,x=v),o(x)):n(x,v)}return S}var Fl=qj(!0),Xj=qj(!1),uh=Oi(null),fh=null,rl=null,by=null;function vy(){by=rl=fh=null}function wy(e){var t=uh.current;Sn(uh),e._currentValue=t}function u0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function jl(e,t){fh=e,by=rl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wr=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(by!==e)if(e={context:e,memoizedValue:t,next:null},rl===null){if(fh===null)throw Error(Ie(308));rl=e,fh.dependencies={lanes:0,firstContext:e}}else rl=rl.next=e;return t}var oo=null;function ky(e){oo===null?oo=[e]:oo.push(e)}function Jj(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,ky(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ma(e,r)}function Ma(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ja=!1;function Sy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ea(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Yt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ma(e,n)}return a=r.interleaved,a===null?(t.next=t,ky(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ma(e,n)}function Bf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ly(e,n)}}function Xw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hh(e,t,n,r){var a=e.updateQueue;Ja=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,u=d=c=null,l=i;do{var h=l.lane,g=l.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,p=l;switch(h=t,g=n,p.tag){case 1:if(y=p.payload,typeof y=="function"){f=y.call(g,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=p.payload,h=typeof y=="function"?y.call(g,f,h):y,h==null)break e;f=In({},f,h);break e;case 2:Ja=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else g={eventTime:g,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=f):u=u.next=g,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(u===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Co|=o,e.lanes=o,e.memoizedState=f}}function Jw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ie(191,a));a.call(r)}}}var hu={},oa=Oi(hu),Ld=Oi(hu),Id=Oi(hu);function lo(e){if(e===hu)throw Error(Ie(174));return e}function jy(e,t){switch(bn(Id,t),bn(Ld,e),bn(oa,hu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vg(t,e)}Sn(oa),bn(oa,t)}function Bl(){Sn(oa),Sn(Ld),Sn(Id)}function Qj(e){lo(Id.current);var t=lo(oa.current),n=Vg(t,e.type);t!==n&&(bn(Ld,e),bn(oa,n))}function Ny(e){Ld.current===e&&(Sn(oa),Sn(Ld))}var _n=Oi(0);function mh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hp=[];function Cy(){for(var e=0;e<Hp.length;e++)Hp[e]._workInProgressVersionPrimary=null;Hp.length=0}var Of=$a.ReactCurrentDispatcher,Wp=$a.ReactCurrentBatchConfig,No=0,Ln=null,tr=null,ar=null,ph=!1,rd=!1,Pd=0,pL=0;function xr(){throw Error(Ie(321))}function Ty(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Us(e[n],t[n]))return!1;return!0}function Ey(e,t,n,r,a,i){if(No=i,Ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Of.current=e===null||e.memoizedState===null?bL:vL,e=n(r,a),rd){i=0;do{if(rd=!1,Pd=0,25<=i)throw Error(Ie(301));i+=1,ar=tr=null,t.updateQueue=null,Of.current=wL,e=n(r,a)}while(rd)}if(Of.current=gh,t=tr!==null&&tr.next!==null,No=0,ar=tr=Ln=null,ph=!1,t)throw Error(Ie(300));return e}function _y(){var e=Pd!==0;return Pd=0,e}function qs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?Ln.memoizedState=ar=e:ar=ar.next=e,ar}function Ss(){if(tr===null){var e=Ln.alternate;e=e!==null?e.memoizedState:null}else e=tr.next;var t=ar===null?Ln.memoizedState:ar.next;if(t!==null)ar=t,tr=e;else{if(e===null)throw Error(Ie(310));tr=e,e={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},ar===null?Ln.memoizedState=ar=e:ar=ar.next=e}return ar}function Md(e,t){return typeof t=="function"?t(e):t}function Vp(e){var t=Ss(),n=t.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=e;var r=tr,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((No&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Ln.lanes|=u,Co|=u}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,Us(r,t.memoizedState)||(Wr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Ln.lanes|=i,Co|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gp(e){var t=Ss(),n=t.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Us(i,t.memoizedState)||(Wr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function eN(){}function tN(e,t){var n=Ln,r=Ss(),a=t(),i=!Us(r.memoizedState,a);if(i&&(r.memoizedState=a,Wr=!0),r=r.queue,Ry(sN.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ar!==null&&ar.memoizedState.tag&1){if(n.flags|=2048,Ad(9,rN.bind(null,n,r,a,t),void 0,null),or===null)throw Error(Ie(349));No&30||nN(n,t,a)}return a}function nN(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function rN(e,t,n,r){t.value=n,t.getSnapshot=r,aN(t)&&iN(e)}function sN(e,t,n){return n(function(){aN(t)&&iN(e)})}function aN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Us(e,n)}catch{return!0}}function iN(e){var t=Ma(e,1);t!==null&&Fs(t,e,1,-1)}function Zw(e){var t=qs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Md,lastRenderedState:e},t.queue=e,e=e.dispatch=yL.bind(null,Ln,e),[t.memoizedState,e]}function Ad(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function oN(){return Ss().memoizedState}function Uf(e,t,n,r){var a=qs();Ln.flags|=e,a.memoizedState=Ad(1|t,n,void 0,r===void 0?null:r)}function xm(e,t,n,r){var a=Ss();r=r===void 0?null:r;var i=void 0;if(tr!==null){var o=tr.memoizedState;if(i=o.destroy,r!==null&&Ty(r,o.deps)){a.memoizedState=Ad(t,n,i,r);return}}Ln.flags|=e,a.memoizedState=Ad(1|t,n,i,r)}function Qw(e,t){return Uf(8390656,8,e,t)}function Ry(e,t){return xm(2048,8,e,t)}function lN(e,t){return xm(4,2,e,t)}function cN(e,t){return xm(4,4,e,t)}function dN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uN(e,t,n){return n=n!=null?n.concat([e]):null,xm(4,4,dN.bind(null,t,e),n)}function Ly(){}function fN(e,t){var n=Ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ty(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hN(e,t){var n=Ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ty(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function mN(e,t,n){return No&21?(Us(n,t)||(n=bj(),Ln.lanes|=n,Co|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wr=!0),e.memoizedState=n)}function gL(e,t){var n=sn;sn=n!==0&&4>n?n:4,e(!0);var r=Wp.transition;Wp.transition={};try{e(!1),t()}finally{sn=n,Wp.transition=r}}function pN(){return Ss().memoizedState}function xL(e,t,n){var r=Si(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gN(e))xN(t,n);else if(n=Jj(e,t,n,r),n!==null){var a=Pr();Fs(n,e,r,a),yN(n,t,r)}}function yL(e,t,n){var r=Si(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gN(e))xN(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,Us(l,o)){var c=t.interleaved;c===null?(a.next=a,ky(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=Jj(e,t,a,r),n!==null&&(a=Pr(),Fs(n,e,r,a),yN(n,t,r))}}function gN(e){var t=e.alternate;return e===Ln||t!==null&&t===Ln}function xN(e,t){rd=ph=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yN(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ly(e,n)}}var gh={readContext:ks,useCallback:xr,useContext:xr,useEffect:xr,useImperativeHandle:xr,useInsertionEffect:xr,useLayoutEffect:xr,useMemo:xr,useReducer:xr,useRef:xr,useState:xr,useDebugValue:xr,useDeferredValue:xr,useTransition:xr,useMutableSource:xr,useSyncExternalStore:xr,useId:xr,unstable_isNewReconciler:!1},bL={readContext:ks,useCallback:function(e,t){return qs().memoizedState=[e,t===void 0?null:t],e},useContext:ks,useEffect:Qw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Uf(4194308,4,dN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uf(4,2,e,t)},useMemo:function(e,t){var n=qs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xL.bind(null,Ln,e),[r.memoizedState,e]},useRef:function(e){var t=qs();return e={current:e},t.memoizedState=e},useState:Zw,useDebugValue:Ly,useDeferredValue:function(e){return qs().memoizedState=e},useTransition:function(){var e=Zw(!1),t=e[0];return e=gL.bind(null,e[1]),qs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ln,a=qs();if(Nn){if(n===void 0)throw Error(Ie(407));n=n()}else{if(n=t(),or===null)throw Error(Ie(349));No&30||nN(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Qw(sN.bind(null,r,i,e),[e]),r.flags|=2048,Ad(9,rN.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=qs(),t=or.identifierPrefix;if(Nn){var n=Na,r=ja;n=(r&~(1<<32-Ds(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Pd++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vL={readContext:ks,useCallback:fN,useContext:ks,useEffect:Ry,useImperativeHandle:uN,useInsertionEffect:lN,useLayoutEffect:cN,useMemo:hN,useReducer:Vp,useRef:oN,useState:function(){return Vp(Md)},useDebugValue:Ly,useDeferredValue:function(e){var t=Ss();return mN(t,tr.memoizedState,e)},useTransition:function(){var e=Vp(Md)[0],t=Ss().memoizedState;return[e,t]},useMutableSource:eN,useSyncExternalStore:tN,useId:pN,unstable_isNewReconciler:!1},wL={readContext:ks,useCallback:fN,useContext:ks,useEffect:Ry,useImperativeHandle:uN,useInsertionEffect:lN,useLayoutEffect:cN,useMemo:hN,useReducer:Gp,useRef:oN,useState:function(){return Gp(Md)},useDebugValue:Ly,useDeferredValue:function(e){var t=Ss();return tr===null?t.memoizedState=e:mN(t,tr.memoizedState,e)},useTransition:function(){var e=Gp(Md)[0],t=Ss().memoizedState;return[e,t]},useMutableSource:eN,useSyncExternalStore:tN,useId:pN,unstable_isNewReconciler:!1};function Ls(e,t){if(e&&e.defaultProps){t=In({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function f0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:In({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ym={isMounted:function(e){return(e=e._reactInternals)?Po(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pr(),a=Si(e),i=Ea(r,a);i.payload=t,n!=null&&(i.callback=n),t=wi(e,i,a),t!==null&&(Fs(t,e,a,r),Bf(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pr(),a=Si(e),i=Ea(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=wi(e,i,a),t!==null&&(Fs(t,e,a,r),Bf(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pr(),r=Si(e),a=Ea(n,r);a.tag=2,t!=null&&(a.callback=t),t=wi(e,a,r),t!==null&&(Fs(t,e,r,n),Bf(t,e,r))}};function e1(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Td(n,r)||!Td(a,i):!0}function bN(e,t,n){var r=!1,a=Ii,i=t.contextType;return typeof i=="object"&&i!==null?i=ks(i):(a=Kr(t)?So:wr.current,r=t.contextTypes,i=(r=r!=null)?Al(e,a):Ii),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ym,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function t1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ym.enqueueReplaceState(t,t.state,null)}function h0(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Sy(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ks(i):(i=Kr(t)?So:wr.current,a.context=Al(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(f0(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ym.enqueueReplaceState(a,a.state,null),hh(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ol(e,t){try{var n="",r=t;do n+=q3(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Kp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function m0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kL=typeof WeakMap=="function"?WeakMap:Map;function vN(e,t,n){n=Ea(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){yh||(yh=!0,j0=r),m0(e,t)},n}function wN(e,t,n){n=Ea(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){m0(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){m0(e,t),typeof r!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function n1(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new kL;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=DL.bind(null,e,t,n),t.then(e,e))}function r1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function s1(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ea(-1,1),t.tag=2,wi(n,t,1))),n.lanes|=1),e)}var SL=$a.ReactCurrentOwner,Wr=!1;function Er(e,t,n,r){t.child=e===null?Xj(t,null,n,r):Fl(t,e.child,n,r)}function a1(e,t,n,r,a){n=n.render;var i=t.ref;return jl(t,a),r=Ey(e,t,n,r,i,a),n=_y(),e!==null&&!Wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Aa(e,t,a)):(Nn&&n&&gy(t),t.flags|=1,Er(e,t,r,a),t.child)}function i1(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!Oy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,kN(e,t,i,r,a)):(e=Wf(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Td,n(o,r)&&e.ref===t.ref)return Aa(e,t,a)}return t.flags|=1,e=ji(i,r),e.ref=t.ref,e.return=t,t.child=e}function kN(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Td(i,r)&&e.ref===t.ref)if(Wr=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Wr=!0);else return t.lanes=e.lanes,Aa(e,t,a)}return p0(e,t,n,r,a)}function SN(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn(al,Zr),Zr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bn(al,Zr),Zr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,bn(al,Zr),Zr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,bn(al,Zr),Zr|=r;return Er(e,t,a,n),t.child}function jN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function p0(e,t,n,r,a){var i=Kr(n)?So:wr.current;return i=Al(t,i),jl(t,a),n=Ey(e,t,n,r,i,a),r=_y(),e!==null&&!Wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Aa(e,t,a)):(Nn&&r&&gy(t),t.flags|=1,Er(e,t,n,a),t.child)}function o1(e,t,n,r,a){if(Kr(n)){var i=!0;lh(t)}else i=!1;if(jl(t,a),t.stateNode===null)zf(e,t),bN(t,n,r),h0(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=ks(d):(d=Kr(n)?So:wr.current,d=Al(t,d));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&t1(t,o,r,d),Ja=!1;var h=t.memoizedState;o.state=h,hh(t,r,o,a),c=t.memoizedState,l!==r||h!==c||Gr.current||Ja?(typeof u=="function"&&(f0(t,n,u,r),c=t.memoizedState),(l=Ja||e1(t,n,l,r,h,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Zj(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Ls(t.type,l),o.props=d,f=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ks(c):(c=Kr(n)?So:wr.current,c=Al(t,c));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&t1(t,o,r,c),Ja=!1,h=t.memoizedState,o.state=h,hh(t,r,o,a);var y=t.memoizedState;l!==f||h!==y||Gr.current||Ja?(typeof g=="function"&&(f0(t,n,g,r),y=t.memoizedState),(d=Ja||e1(t,n,d,r,h,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),o.props=r,o.state=y,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return g0(e,t,n,r,i,a)}function g0(e,t,n,r,a,i){jN(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&Gw(t,n,!1),Aa(e,t,i);r=t.stateNode,SL.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Fl(t,e.child,null,i),t.child=Fl(t,null,l,i)):Er(e,t,l,i),t.memoizedState=r.state,a&&Gw(t,n,!0),t.child}function NN(e){var t=e.stateNode;t.pendingContext?Vw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vw(e,t.context,!1),jy(e,t.containerInfo)}function l1(e,t,n,r,a){return Dl(),yy(a),t.flags|=256,Er(e,t,n,r),t.child}var x0={dehydrated:null,treeContext:null,retryLane:0};function y0(e){return{baseLanes:e,cachePool:null,transitions:null}}function CN(e,t,n){var r=t.pendingProps,a=_n.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),bn(_n,a&1),e===null)return d0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wm(o,r,0,null),e=go(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=y0(n),t.memoizedState=x0,e):Iy(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return jL(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ji(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=ji(l,i):(i=go(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?y0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=x0,r}return i=e.child,e=i.sibling,r=ji(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Iy(e,t){return t=wm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function of(e,t,n,r){return r!==null&&yy(r),Fl(t,e.child,null,n),e=Iy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jL(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Kp(Error(Ie(422))),of(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=wm({mode:"visible",children:r.children},a,0,null),i=go(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Fl(t,e.child,null,o),t.child.memoizedState=y0(o),t.memoizedState=x0,i);if(!(t.mode&1))return of(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Ie(419)),r=Kp(i,r,void 0),of(e,t,o,r)}if(l=(o&e.childLanes)!==0,Wr||l){if(r=or,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ma(e,a),Fs(r,e,a,-1))}return By(),r=Kp(Error(Ie(421))),of(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=FL.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,es=vi(a.nextSibling),ts=t,Nn=!0,Ps=null,e!==null&&(ps[gs++]=ja,ps[gs++]=Na,ps[gs++]=jo,ja=e.id,Na=e.overflow,jo=t),t=Iy(t,r.children),t.flags|=4096,t)}function c1(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),u0(e.return,t,n)}function Yp(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function TN(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Er(e,t,r.children,n),r=_n.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&c1(e,n,t);else if(e.tag===19)c1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(bn(_n,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&mh(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Yp(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&mh(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Yp(t,!0,n,null,i);break;case"together":Yp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Aa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Co|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ie(153));if(t.child!==null){for(e=t.child,n=ji(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ji(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function NL(e,t,n){switch(t.tag){case 3:NN(t),Dl();break;case 5:Qj(t);break;case 1:Kr(t.type)&&lh(t);break;case 4:jy(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;bn(uh,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(bn(_n,_n.current&1),t.flags|=128,null):n&t.child.childLanes?CN(e,t,n):(bn(_n,_n.current&1),e=Aa(e,t,n),e!==null?e.sibling:null);bn(_n,_n.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return TN(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),bn(_n,_n.current),r)break;return null;case 22:case 23:return t.lanes=0,SN(e,t,n)}return Aa(e,t,n)}var EN,b0,_N,RN;EN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};b0=function(){};_N=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,lo(oa.current);var i=null;switch(n){case"input":a=zg(e,a),r=zg(e,r),i=[];break;case"select":a=In({},a,{value:void 0}),r=In({},r,{value:void 0}),i=[];break;case"textarea":a=Wg(e,a),r=Wg(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ih)}Gg(n,r);var o;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vd.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vd.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&kn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};RN=function(e,t,n,r){n!==r&&(t.flags|=4)};function Dc(e,t){if(!Nn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function CL(e,t,n){var r=t.pendingProps;switch(xy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(t),null;case 1:return Kr(t.type)&&oh(),yr(t),null;case 3:return r=t.stateNode,Bl(),Sn(Gr),Sn(wr),Cy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(sf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ps!==null&&(T0(Ps),Ps=null))),b0(e,t),yr(t),null;case 5:Ny(t);var a=lo(Id.current);if(n=t.type,e!==null&&t.stateNode!=null)_N(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ie(166));return yr(t),null}if(e=lo(oa.current),sf(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ea]=t,r[Rd]=i,e=(t.mode&1)!==0,n){case"dialog":kn("cancel",r),kn("close",r);break;case"iframe":case"object":case"embed":kn("load",r);break;case"video":case"audio":for(a=0;a<Kc.length;a++)kn(Kc[a],r);break;case"source":kn("error",r);break;case"img":case"image":case"link":kn("error",r),kn("load",r);break;case"details":kn("toggle",r);break;case"input":yw(r,i),kn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},kn("invalid",r);break;case"textarea":vw(r,i),kn("invalid",r)}Gg(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&rf(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&rf(r.textContent,l,e),a=["children",""+l]):vd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&kn("scroll",r)}switch(n){case"input":qu(r),bw(r,i,!0);break;case"textarea":qu(r),ww(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ih)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sj(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ea]=t,e[Rd]=r,EN(e,t,!1,!1),t.stateNode=e;e:{switch(o=Kg(n,r),n){case"dialog":kn("cancel",e),kn("close",e),a=r;break;case"iframe":case"object":case"embed":kn("load",e),a=r;break;case"video":case"audio":for(a=0;a<Kc.length;a++)kn(Kc[a],e);a=r;break;case"source":kn("error",e),a=r;break;case"img":case"image":case"link":kn("error",e),kn("load",e),a=r;break;case"details":kn("toggle",e),a=r;break;case"input":yw(e,r),a=zg(e,r),kn("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=In({},r,{value:void 0}),kn("invalid",e);break;case"textarea":vw(e,r),a=Wg(e,r),kn("invalid",e);break;default:a=r}Gg(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?oj(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&aj(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wd(e,c):typeof c=="number"&&wd(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&kn("scroll",e):c!=null&&ny(e,i,c,o))}switch(n){case"input":qu(e),bw(e,r,!1);break;case"textarea":qu(e),ww(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Li(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?vl(e,!!r.multiple,i,!1):r.defaultValue!=null&&vl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ih)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yr(t),null;case 6:if(e&&t.stateNode!=null)RN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ie(166));if(n=lo(Id.current),lo(oa.current),sf(t)){if(r=t.stateNode,n=t.memoizedProps,r[ea]=t,(i=r.nodeValue!==n)&&(e=ts,e!==null))switch(e.tag){case 3:rf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rf(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ea]=t,t.stateNode=r}return yr(t),null;case 13:if(Sn(_n),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Nn&&es!==null&&t.mode&1&&!(t.flags&128))Yj(),Dl(),t.flags|=98560,i=!1;else if(i=sf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Ie(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ie(317));i[ea]=t}else Dl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yr(t),i=!1}else Ps!==null&&(T0(Ps),Ps=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||_n.current&1?sr===0&&(sr=3):By())),t.updateQueue!==null&&(t.flags|=4),yr(t),null);case 4:return Bl(),b0(e,t),e===null&&Ed(t.stateNode.containerInfo),yr(t),null;case 10:return wy(t.type._context),yr(t),null;case 17:return Kr(t.type)&&oh(),yr(t),null;case 19:if(Sn(_n),i=t.memoizedState,i===null)return yr(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Dc(i,!1);else{if(sr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=mh(e),o!==null){for(t.flags|=128,Dc(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return bn(_n,_n.current&1|2),t.child}e=e.sibling}i.tail!==null&&Kn()>Ul&&(t.flags|=128,r=!0,Dc(i,!1),t.lanes=4194304)}else{if(!r)if(e=mh(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Dc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Nn)return yr(t),null}else 2*Kn()-i.renderingStartTime>Ul&&n!==1073741824&&(t.flags|=128,r=!0,Dc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Kn(),t.sibling=null,n=_n.current,bn(_n,r?n&1|2:n&1),t):(yr(t),null);case 22:case 23:return Fy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Zr&1073741824&&(yr(t),t.subtreeFlags&6&&(t.flags|=8192)):yr(t),null;case 24:return null;case 25:return null}throw Error(Ie(156,t.tag))}function TL(e,t){switch(xy(t),t.tag){case 1:return Kr(t.type)&&oh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bl(),Sn(Gr),Sn(wr),Cy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ny(t),null;case 13:if(Sn(_n),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ie(340));Dl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sn(_n),null;case 4:return Bl(),null;case 10:return wy(t.type._context),null;case 22:case 23:return Fy(),null;case 24:return null;default:return null}}var lf=!1,br=!1,EL=typeof WeakSet=="function"?WeakSet:Set,qe=null;function sl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){On(e,t,r)}else n.current=null}function v0(e,t,n){try{n()}catch(r){On(e,t,r)}}var d1=!1;function _L(e,t){if(r0=rh,e=Aj(),py(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=e,h=null;t:for(;;){for(var g;f!==n||a!==0&&f.nodeType!==3||(l=o+a),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===e)break t;if(h===n&&++d===a&&(l=o),h===i&&++u===r&&(c=o),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(s0={focusedElem:e,selectionRange:n},rh=!1,qe=t;qe!==null;)if(t=qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qe=e;else for(;qe!==null;){t=qe;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var p=y.memoizedProps,S=y.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:Ls(t.type,p),S);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(w){On(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,qe=e;break}qe=t.return}return y=d1,d1=!1,y}function sd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&v0(t,n,i)}a=a.next}while(a!==r)}}function bm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function w0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function LN(e){var t=e.alternate;t!==null&&(e.alternate=null,LN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ea],delete t[Rd],delete t[o0],delete t[uL],delete t[fL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function IN(e){return e.tag===5||e.tag===3||e.tag===4}function u1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||IN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function k0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ih));else if(r!==4&&(e=e.child,e!==null))for(k0(e,t,n),e=e.sibling;e!==null;)k0(e,t,n),e=e.sibling}function S0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(S0(e,t,n),e=e.sibling;e!==null;)S0(e,t,n),e=e.sibling}var fr=null,Is=!1;function Ka(e,t,n){for(n=n.child;n!==null;)PN(e,t,n),n=n.sibling}function PN(e,t,n){if(ia&&typeof ia.onCommitFiberUnmount=="function")try{ia.onCommitFiberUnmount(um,n)}catch{}switch(n.tag){case 5:br||sl(n,t);case 6:var r=fr,a=Is;fr=null,Ka(e,t,n),fr=r,Is=a,fr!==null&&(Is?(e=fr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):fr.removeChild(n.stateNode));break;case 18:fr!==null&&(Is?(e=fr,n=n.stateNode,e.nodeType===8?zp(e.parentNode,n):e.nodeType===1&&zp(e,n),Nd(e)):zp(fr,n.stateNode));break;case 4:r=fr,a=Is,fr=n.stateNode.containerInfo,Is=!0,Ka(e,t,n),fr=r,Is=a;break;case 0:case 11:case 14:case 15:if(!br&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&v0(n,t,o),a=a.next}while(a!==r)}Ka(e,t,n);break;case 1:if(!br&&(sl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){On(n,t,l)}Ka(e,t,n);break;case 21:Ka(e,t,n);break;case 22:n.mode&1?(br=(r=br)||n.memoizedState!==null,Ka(e,t,n),br=r):Ka(e,t,n);break;default:Ka(e,t,n)}}function f1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new EL),t.forEach(function(r){var a=BL.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Es(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:fr=l.stateNode,Is=!1;break e;case 3:fr=l.stateNode.containerInfo,Is=!0;break e;case 4:fr=l.stateNode.containerInfo,Is=!0;break e}l=l.return}if(fr===null)throw Error(Ie(160));PN(i,o,a),fr=null,Is=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){On(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)MN(t,e),t=t.sibling}function MN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Es(t,e),Ks(e),r&4){try{sd(3,e,e.return),bm(3,e)}catch(p){On(e,e.return,p)}try{sd(5,e,e.return)}catch(p){On(e,e.return,p)}}break;case 1:Es(t,e),Ks(e),r&512&&n!==null&&sl(n,n.return);break;case 5:if(Es(t,e),Ks(e),r&512&&n!==null&&sl(n,n.return),e.flags&32){var a=e.stateNode;try{wd(a,"")}catch(p){On(e,e.return,p)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&nj(a,i),Kg(l,o);var d=Kg(l,i);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?oj(a,f):u==="dangerouslySetInnerHTML"?aj(a,f):u==="children"?wd(a,f):ny(a,u,f,d)}switch(l){case"input":$g(a,i);break;case"textarea":rj(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?vl(a,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?vl(a,!!i.multiple,i.defaultValue,!0):vl(a,!!i.multiple,i.multiple?[]:"",!1))}a[Rd]=i}catch(p){On(e,e.return,p)}}break;case 6:if(Es(t,e),Ks(e),r&4){if(e.stateNode===null)throw Error(Ie(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){On(e,e.return,p)}}break;case 3:if(Es(t,e),Ks(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nd(t.containerInfo)}catch(p){On(e,e.return,p)}break;case 4:Es(t,e),Ks(e);break;case 13:Es(t,e),Ks(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Ay=Kn())),r&4&&f1(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(br=(d=br)||u,Es(t,e),br=d):Es(t,e),Ks(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(qe=e,u=e.child;u!==null;){for(f=qe=u;qe!==null;){switch(h=qe,g=h.child,h.tag){case 0:case 11:case 14:case 15:sd(4,h,h.return);break;case 1:sl(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(p){On(r,n,p)}}break;case 5:sl(h,h.return);break;case 22:if(h.memoizedState!==null){m1(f);continue}}g!==null?(g.return=h,qe=g):m1(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ij("display",o))}catch(p){On(e,e.return,p)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(p){On(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Es(t,e),Ks(e),r&4&&f1(e);break;case 21:break;default:Es(t,e),Ks(e)}}function Ks(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(IN(n)){var r=n;break e}n=n.return}throw Error(Ie(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(wd(a,""),r.flags&=-33);var i=u1(e);S0(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=u1(e);k0(e,l,o);break;default:throw Error(Ie(161))}}catch(c){On(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RL(e,t,n){qe=e,AN(e)}function AN(e,t,n){for(var r=(e.mode&1)!==0;qe!==null;){var a=qe,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||lf;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||br;l=lf;var d=br;if(lf=o,(br=c)&&!d)for(qe=a;qe!==null;)o=qe,c=o.child,o.tag===22&&o.memoizedState!==null?p1(a):c!==null?(c.return=o,qe=c):p1(a);for(;i!==null;)qe=i,AN(i),i=i.sibling;qe=a,lf=l,br=d}h1(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,qe=i):h1(e)}}function h1(e){for(;qe!==null;){var t=qe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:br||bm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!br)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ls(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Jw(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Jw(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Nd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}br||t.flags&512&&w0(t)}catch(h){On(t,t.return,h)}}if(t===e){qe=null;break}if(n=t.sibling,n!==null){n.return=t.return,qe=n;break}qe=t.return}}function m1(e){for(;qe!==null;){var t=qe;if(t===e){qe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,qe=n;break}qe=t.return}}function p1(e){for(;qe!==null;){var t=qe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bm(4,t)}catch(c){On(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){On(t,a,c)}}var i=t.return;try{w0(t)}catch(c){On(t,i,c)}break;case 5:var o=t.return;try{w0(t)}catch(c){On(t,o,c)}}}catch(c){On(t,t.return,c)}if(t===e){qe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,qe=l;break}qe=t.return}}var LL=Math.ceil,xh=$a.ReactCurrentDispatcher,Py=$a.ReactCurrentOwner,vs=$a.ReactCurrentBatchConfig,Yt=0,or=null,Qn=null,mr=0,Zr=0,al=Oi(0),sr=0,Dd=null,Co=0,vm=0,My=0,ad=null,Hr=null,Ay=0,Ul=1/0,ba=null,yh=!1,j0=null,ki=null,cf=!1,li=null,bh=0,id=0,N0=null,$f=-1,Hf=0;function Pr(){return Yt&6?Kn():$f!==-1?$f:$f=Kn()}function Si(e){return e.mode&1?Yt&2&&mr!==0?mr&-mr:mL.transition!==null?(Hf===0&&(Hf=bj()),Hf):(e=sn,e!==0||(e=window.event,e=e===void 0?16:Cj(e.type)),e):1}function Fs(e,t,n,r){if(50<id)throw id=0,N0=null,Error(Ie(185));du(e,n,r),(!(Yt&2)||e!==or)&&(e===or&&(!(Yt&2)&&(vm|=n),sr===4&&ri(e,mr)),Yr(e,r),n===1&&Yt===0&&!(t.mode&1)&&(Ul=Kn()+500,gm&&Ui()))}function Yr(e,t){var n=e.callbackNode;mR(e,t);var r=nh(e,e===or?mr:0);if(r===0)n!==null&&jw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&jw(n),t===1)e.tag===0?hL(g1.bind(null,e)):Vj(g1.bind(null,e)),cL(function(){!(Yt&6)&&Ui()}),n=null;else{switch(vj(r)){case 1:n=oy;break;case 4:n=xj;break;case 16:n=th;break;case 536870912:n=yj;break;default:n=th}n=HN(n,DN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function DN(e,t){if($f=-1,Hf=0,Yt&6)throw Error(Ie(327));var n=e.callbackNode;if(Nl()&&e.callbackNode!==n)return null;var r=nh(e,e===or?mr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vh(e,r);else{t=r;var a=Yt;Yt|=2;var i=BN();(or!==e||mr!==t)&&(ba=null,Ul=Kn()+500,po(e,t));do try{ML();break}catch(l){FN(e,l)}while(1);vy(),xh.current=i,Yt=a,Qn!==null?t=0:(or=null,mr=0,t=sr)}if(t!==0){if(t===2&&(a=Zg(e),a!==0&&(r=a,t=C0(e,a))),t===1)throw n=Dd,po(e,0),ri(e,r),Yr(e,Kn()),n;if(t===6)ri(e,r);else{if(a=e.current.alternate,!(r&30)&&!IL(a)&&(t=vh(e,r),t===2&&(i=Zg(e),i!==0&&(r=i,t=C0(e,i))),t===1))throw n=Dd,po(e,0),ri(e,r),Yr(e,Kn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Ie(345));case 2:ro(e,Hr,ba);break;case 3:if(ri(e,r),(r&130023424)===r&&(t=Ay+500-Kn(),10<t)){if(nh(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Pr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=i0(ro.bind(null,e,Hr,ba),t);break}ro(e,Hr,ba);break;case 4:if(ri(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Ds(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=Kn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LL(r/1960))-r,10<r){e.timeoutHandle=i0(ro.bind(null,e,Hr,ba),r);break}ro(e,Hr,ba);break;case 5:ro(e,Hr,ba);break;default:throw Error(Ie(329))}}}return Yr(e,Kn()),e.callbackNode===n?DN.bind(null,e):null}function C0(e,t){var n=ad;return e.current.memoizedState.isDehydrated&&(po(e,t).flags|=256),e=vh(e,t),e!==2&&(t=Hr,Hr=n,t!==null&&T0(t)),e}function T0(e){Hr===null?Hr=e:Hr.push.apply(Hr,e)}function IL(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Us(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ri(e,t){for(t&=~My,t&=~vm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ds(t),r=1<<n;e[n]=-1,t&=~r}}function g1(e){if(Yt&6)throw Error(Ie(327));Nl();var t=nh(e,0);if(!(t&1))return Yr(e,Kn()),null;var n=vh(e,t);if(e.tag!==0&&n===2){var r=Zg(e);r!==0&&(t=r,n=C0(e,r))}if(n===1)throw n=Dd,po(e,0),ri(e,t),Yr(e,Kn()),n;if(n===6)throw Error(Ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ro(e,Hr,ba),Yr(e,Kn()),null}function Dy(e,t){var n=Yt;Yt|=1;try{return e(t)}finally{Yt=n,Yt===0&&(Ul=Kn()+500,gm&&Ui())}}function To(e){li!==null&&li.tag===0&&!(Yt&6)&&Nl();var t=Yt;Yt|=1;var n=vs.transition,r=sn;try{if(vs.transition=null,sn=1,e)return e()}finally{sn=r,vs.transition=n,Yt=t,!(Yt&6)&&Ui()}}function Fy(){Zr=al.current,Sn(al)}function po(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lL(n)),Qn!==null)for(n=Qn.return;n!==null;){var r=n;switch(xy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oh();break;case 3:Bl(),Sn(Gr),Sn(wr),Cy();break;case 5:Ny(r);break;case 4:Bl();break;case 13:Sn(_n);break;case 19:Sn(_n);break;case 10:wy(r.type._context);break;case 22:case 23:Fy()}n=n.return}if(or=e,Qn=e=ji(e.current,null),mr=Zr=t,sr=0,Dd=null,My=vm=Co=0,Hr=ad=null,oo!==null){for(t=0;t<oo.length;t++)if(n=oo[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}oo=null}return e}function FN(e,t){do{var n=Qn;try{if(vy(),Of.current=gh,ph){for(var r=Ln.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}ph=!1}if(No=0,ar=tr=Ln=null,rd=!1,Pd=0,Py.current=null,n===null||n.return===null){sr=1,Dd=t,Qn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=mr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=r1(o);if(g!==null){g.flags&=-257,s1(g,o,l,i,t),g.mode&1&&n1(i,d,t),t=g,c=d;var y=t.updateQueue;if(y===null){var p=new Set;p.add(c),t.updateQueue=p}else y.add(c);break e}else{if(!(t&1)){n1(i,d,t),By();break e}c=Error(Ie(426))}}else if(Nn&&l.mode&1){var S=r1(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),s1(S,o,l,i,t),yy(Ol(c,l));break e}}i=c=Ol(c,l),sr!==4&&(sr=2),ad===null?ad=[i]:ad.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=vN(i,c,t);Xw(i,x);break e;case 1:l=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ki===null||!ki.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=wN(i,l,t);Xw(i,w);break e}}i=i.return}while(i!==null)}UN(n)}catch(N){t=N,Qn===n&&n!==null&&(Qn=n=n.return);continue}break}while(1)}function BN(){var e=xh.current;return xh.current=gh,e===null?gh:e}function By(){(sr===0||sr===3||sr===2)&&(sr=4),or===null||!(Co&268435455)&&!(vm&268435455)||ri(or,mr)}function vh(e,t){var n=Yt;Yt|=2;var r=BN();(or!==e||mr!==t)&&(ba=null,po(e,t));do try{PL();break}catch(a){FN(e,a)}while(1);if(vy(),Yt=n,xh.current=r,Qn!==null)throw Error(Ie(261));return or=null,mr=0,sr}function PL(){for(;Qn!==null;)ON(Qn)}function ML(){for(;Qn!==null&&!aR();)ON(Qn)}function ON(e){var t=$N(e.alternate,e,Zr);e.memoizedProps=e.pendingProps,t===null?UN(e):Qn=t,Py.current=null}function UN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=TL(n,t),n!==null){n.flags&=32767,Qn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{sr=6,Qn=null;return}}else if(n=CL(n,t,Zr),n!==null){Qn=n;return}if(t=t.sibling,t!==null){Qn=t;return}Qn=t=e}while(t!==null);sr===0&&(sr=5)}function ro(e,t,n){var r=sn,a=vs.transition;try{vs.transition=null,sn=1,AL(e,t,n,r)}finally{vs.transition=a,sn=r}return null}function AL(e,t,n,r){do Nl();while(li!==null);if(Yt&6)throw Error(Ie(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ie(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(pR(e,i),e===or&&(Qn=or=null,mr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cf||(cf=!0,HN(th,function(){return Nl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vs.transition,vs.transition=null;var o=sn;sn=1;var l=Yt;Yt|=4,Py.current=null,_L(e,n),MN(n,e),tL(s0),rh=!!r0,s0=r0=null,e.current=n,RL(n),iR(),Yt=l,sn=o,vs.transition=i}else e.current=n;if(cf&&(cf=!1,li=e,bh=a),i=e.pendingLanes,i===0&&(ki=null),cR(n.stateNode),Yr(e,Kn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(yh)throw yh=!1,e=j0,j0=null,e;return bh&1&&e.tag!==0&&Nl(),i=e.pendingLanes,i&1?e===N0?id++:(id=0,N0=e):id=0,Ui(),null}function Nl(){if(li!==null){var e=vj(bh),t=vs.transition,n=sn;try{if(vs.transition=null,sn=16>e?16:e,li===null)var r=!1;else{if(e=li,li=null,bh=0,Yt&6)throw Error(Ie(331));var a=Yt;for(Yt|=4,qe=e.current;qe!==null;){var i=qe,o=i.child;if(qe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(qe=d;qe!==null;){var u=qe;switch(u.tag){case 0:case 11:case 15:sd(8,u,i)}var f=u.child;if(f!==null)f.return=u,qe=f;else for(;qe!==null;){u=qe;var h=u.sibling,g=u.return;if(LN(u),u===d){qe=null;break}if(h!==null){h.return=g,qe=h;break}qe=g}}}var y=i.alternate;if(y!==null){var p=y.child;if(p!==null){y.child=null;do{var S=p.sibling;p.sibling=null,p=S}while(p!==null)}}qe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,qe=o;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sd(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,qe=x;break e}qe=i.return}}var v=e.current;for(qe=v;qe!==null;){o=qe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,qe=b;else e:for(o=v;qe!==null;){if(l=qe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:bm(9,l)}}catch(N){On(l,l.return,N)}if(l===o){qe=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,qe=w;break e}qe=l.return}}if(Yt=a,Ui(),ia&&typeof ia.onPostCommitFiberRoot=="function")try{ia.onPostCommitFiberRoot(um,e)}catch{}r=!0}return r}finally{sn=n,vs.transition=t}}return!1}function x1(e,t,n){t=Ol(n,t),t=vN(e,t,1),e=wi(e,t,1),t=Pr(),e!==null&&(du(e,1,t),Yr(e,t))}function On(e,t,n){if(e.tag===3)x1(e,e,n);else for(;t!==null;){if(t.tag===3){x1(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ki===null||!ki.has(r))){e=Ol(n,e),e=wN(t,e,1),t=wi(t,e,1),e=Pr(),t!==null&&(du(t,1,e),Yr(t,e));break}}t=t.return}}function DL(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pr(),e.pingedLanes|=e.suspendedLanes&n,or===e&&(mr&n)===n&&(sr===4||sr===3&&(mr&130023424)===mr&&500>Kn()-Ay?po(e,0):My|=n),Yr(e,t)}function zN(e,t){t===0&&(e.mode&1?(t=Zu,Zu<<=1,!(Zu&130023424)&&(Zu=4194304)):t=1);var n=Pr();e=Ma(e,t),e!==null&&(du(e,t,n),Yr(e,n))}function FL(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zN(e,n)}function BL(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(t),zN(e,n)}var $N;$N=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gr.current)Wr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Wr=!1,NL(e,t,n);Wr=!!(e.flags&131072)}else Wr=!1,Nn&&t.flags&1048576&&Gj(t,dh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zf(e,t),e=t.pendingProps;var a=Al(t,wr.current);jl(t,n),a=Ey(null,t,r,e,a,n);var i=_y();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Kr(r)?(i=!0,lh(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Sy(t),a.updater=ym,t.stateNode=a,a._reactInternals=t,h0(t,r,e,n),t=g0(null,t,r,!0,i,n)):(t.tag=0,Nn&&i&&gy(t),Er(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zf(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=UL(r),e=Ls(r,e),a){case 0:t=p0(null,t,r,e,n);break e;case 1:t=o1(null,t,r,e,n);break e;case 11:t=a1(null,t,r,e,n);break e;case 14:t=i1(null,t,r,Ls(r.type,e),n);break e}throw Error(Ie(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ls(r,a),p0(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ls(r,a),o1(e,t,r,a,n);case 3:e:{if(NN(t),e===null)throw Error(Ie(387));r=t.pendingProps,i=t.memoizedState,a=i.element,Zj(e,t),hh(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ol(Error(Ie(423)),t),t=l1(e,t,r,n,a);break e}else if(r!==a){a=Ol(Error(Ie(424)),t),t=l1(e,t,r,n,a);break e}else for(es=vi(t.stateNode.containerInfo.firstChild),ts=t,Nn=!0,Ps=null,n=Xj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dl(),r===a){t=Aa(e,t,n);break e}Er(e,t,r,n)}t=t.child}return t;case 5:return Qj(t),e===null&&d0(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,a0(r,a)?o=null:i!==null&&a0(r,i)&&(t.flags|=32),jN(e,t),Er(e,t,o,n),t.child;case 6:return e===null&&d0(t),null;case 13:return CN(e,t,n);case 4:return jy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fl(t,null,r,n):Er(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ls(r,a),a1(e,t,r,a,n);case 7:return Er(e,t,t.pendingProps,n),t.child;case 8:return Er(e,t,t.pendingProps.children,n),t.child;case 12:return Er(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,bn(uh,r._currentValue),r._currentValue=o,i!==null)if(Us(i.value,o)){if(i.children===a.children&&!Gr.current){t=Aa(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ea(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),u0(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ie(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),u0(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Er(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,jl(t,n),a=ks(a),r=r(a),t.flags|=1,Er(e,t,r,n),t.child;case 14:return r=t.type,a=Ls(r,t.pendingProps),a=Ls(r.type,a),i1(e,t,r,a,n);case 15:return kN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ls(r,a),zf(e,t),t.tag=1,Kr(r)?(e=!0,lh(t)):e=!1,jl(t,n),bN(t,r,a),h0(t,r,a,n),g0(null,t,r,!0,e,n);case 19:return TN(e,t,n);case 22:return SN(e,t,n)}throw Error(Ie(156,t.tag))};function HN(e,t){return gj(e,t)}function OL(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(e,t,n,r){return new OL(e,t,n,r)}function Oy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function UL(e){if(typeof e=="function")return Oy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sy)return 11;if(e===ay)return 14}return 2}function ji(e,t){var n=e.alternate;return n===null?(n=xs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wf(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")Oy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case qo:return go(n.children,a,i,t);case ry:o=8,a|=8;break;case Fg:return e=xs(12,n,t,a|2),e.elementType=Fg,e.lanes=i,e;case Bg:return e=xs(13,n,t,a),e.elementType=Bg,e.lanes=i,e;case Og:return e=xs(19,n,t,a),e.elementType=Og,e.lanes=i,e;case QS:return wm(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case JS:o=10;break e;case ZS:o=9;break e;case sy:o=11;break e;case ay:o=14;break e;case Xa:o=16,r=null;break e}throw Error(Ie(130,e==null?e:typeof e,""))}return t=xs(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function go(e,t,n,r){return e=xs(7,e,r,t),e.lanes=n,e}function wm(e,t,n,r){return e=xs(22,e,r,t),e.elementType=QS,e.lanes=n,e.stateNode={isHidden:!1},e}function qp(e,t,n){return e=xs(6,e,null,t),e.lanes=n,e}function Xp(e,t,n){return t=xs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zL(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rp(0),this.expirationTimes=Rp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rp(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uy(e,t,n,r,a,i,o,l,c){return e=new zL(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sy(i),e}function $L(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function WN(e){if(!e)return Ii;e=e._reactInternals;e:{if(Po(e)!==e||e.tag!==1)throw Error(Ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Kr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ie(171))}if(e.tag===1){var n=e.type;if(Kr(n))return Wj(e,n,t)}return t}function VN(e,t,n,r,a,i,o,l,c){return e=Uy(n,r,!0,e,a,i,o,l,c),e.context=WN(null),n=e.current,r=Pr(),a=Si(n),i=Ea(r,a),i.callback=t??null,wi(n,i,a),e.current.lanes=a,du(e,a,r),Yr(e,r),e}function km(e,t,n,r){var a=t.current,i=Pr(),o=Si(a);return n=WN(n),t.context===null?t.context=n:t.pendingContext=n,t=Ea(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=wi(a,t,o),e!==null&&(Fs(e,a,o,i),Bf(e,a,o)),o}function wh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function y1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zy(e,t){y1(e,t),(e=e.alternate)&&y1(e,t)}function HL(){return null}var GN=typeof reportError=="function"?reportError:function(e){console.error(e)};function $y(e){this._internalRoot=e}Sm.prototype.render=$y.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ie(409));km(e,t,null,null)};Sm.prototype.unmount=$y.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;To(function(){km(null,e,null,null)}),t[Pa]=null}};function Sm(e){this._internalRoot=e}Sm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ni.length&&t!==0&&t<ni[n].priority;n++);ni.splice(n,0,e),n===0&&Nj(e)}};function Hy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function b1(){}function WL(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=wh(o);i.call(d)}}var o=VN(t,r,e,0,null,!1,!1,"",b1);return e._reactRootContainer=o,e[Pa]=o.current,Ed(e.nodeType===8?e.parentNode:e),To(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var d=wh(c);l.call(d)}}var c=Uy(e,0,!1,null,null,!1,!1,"",b1);return e._reactRootContainer=c,e[Pa]=c.current,Ed(e.nodeType===8?e.parentNode:e),To(function(){km(t,c,n,r)}),c}function Nm(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=wh(o);l.call(c)}}km(t,o,e,a)}else o=WL(n,t,e,a,r);return wh(o)}wj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Gc(t.pendingLanes);n!==0&&(ly(t,n|1),Yr(t,Kn()),!(Yt&6)&&(Ul=Kn()+500,Ui()))}break;case 13:To(function(){var r=Ma(e,1);if(r!==null){var a=Pr();Fs(r,e,1,a)}}),zy(e,1)}};cy=function(e){if(e.tag===13){var t=Ma(e,134217728);if(t!==null){var n=Pr();Fs(t,e,134217728,n)}zy(e,134217728)}};kj=function(e){if(e.tag===13){var t=Si(e),n=Ma(e,t);if(n!==null){var r=Pr();Fs(n,e,t,r)}zy(e,t)}};Sj=function(){return sn};jj=function(e,t){var n=sn;try{return sn=e,t()}finally{sn=n}};qg=function(e,t,n){switch(t){case"input":if($g(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=pm(r);if(!a)throw Error(Ie(90));tj(r),$g(r,a)}}}break;case"textarea":rj(e,n);break;case"select":t=n.value,t!=null&&vl(e,!!n.multiple,t,!1)}};dj=Dy;uj=To;var VL={usingClientEntryPoint:!1,Events:[fu,Qo,pm,lj,cj,Dy]},Fc={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GL={bundleType:Fc.bundleType,version:Fc.version,rendererPackageName:Fc.rendererPackageName,rendererConfig:Fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$a.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mj(e),e===null?null:e.stateNode},findFiberByHostInstance:Fc.findFiberByHostInstance||HL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{um=df.inject(GL),ia=df}catch{}}as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VL;as.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hy(t))throw Error(Ie(200));return $L(e,t,null,n)};as.createRoot=function(e,t){if(!Hy(e))throw Error(Ie(299));var n=!1,r="",a=GN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Uy(e,1,!1,null,null,n,!1,r,a),e[Pa]=t.current,Ed(e.nodeType===8?e.parentNode:e),new $y(t)};as.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ie(188)):(e=Object.keys(e).join(","),Error(Ie(268,e)));return e=mj(t),e=e===null?null:e.stateNode,e};as.flushSync=function(e){return To(e)};as.hydrate=function(e,t,n){if(!jm(t))throw Error(Ie(200));return Nm(null,e,t,!0,n)};as.hydrateRoot=function(e,t,n){if(!Hy(e))throw Error(Ie(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=GN;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=VN(t,null,e,1,n??null,a,!1,i,o),e[Pa]=t.current,Ed(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Sm(t)};as.render=function(e,t,n){if(!jm(t))throw Error(Ie(200));return Nm(null,e,t,!1,n)};as.unmountComponentAtNode=function(e){if(!jm(e))throw Error(Ie(40));return e._reactRootContainer?(To(function(){Nm(null,null,e,!1,function(){e._reactRootContainer=null,e[Pa]=null})}),!0):!1};as.unstable_batchedUpdates=Dy;as.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jm(n))throw Error(Ie(200));if(e==null||e._reactInternals===void 0)throw Error(Ie(38));return Nm(e,t,n,!1,r)};as.version="18.3.1-next-f1338f8080-20240426";function KN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KN)}catch(e){console.error(e)}}KN(),KS.exports=as;var YN=KS.exports,v1=YN;Ag.createRoot=v1.createRoot,Ag.hydrateRoot=v1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fd(){return Fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fd.apply(this,arguments)}var ci;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ci||(ci={}));const w1="popstate";function KL(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return E0("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:XN(a)}return qL(t,n,null,e)}function er(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function YL(){return Math.random().toString(36).substr(2,8)}function k1(e,t){return{usr:e.state,key:e.key,idx:t}}function E0(e,t,n,r){return n===void 0&&(n=null),Fd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?cc(t):t,{state:n,key:t&&t.key||r||YL()})}function XN(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function cc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function qL(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=ci.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Fd({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function f(){l=ci.Pop;let S=u(),x=S==null?null:S-d;d=S,c&&c({action:l,location:p.location,delta:x})}function h(S,x){l=ci.Push;let v=E0(p.location,S,x);n&&n(v,S),d=u()+1;let b=k1(v,d),w=p.createHref(v);try{o.pushState(b,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(w)}i&&c&&c({action:l,location:p.location,delta:1})}function g(S,x){l=ci.Replace;let v=E0(p.location,S,x);n&&n(v,S),d=u();let b=k1(v,d),w=p.createHref(v);o.replaceState(b,"",w),i&&c&&c({action:l,location:p.location,delta:0})}function y(S){let x=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof S=="string"?S:XN(S);return v=v.replace(/ $/,"%20"),er(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let p={get action(){return l},get location(){return e(a,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(w1,f),c=S,()=>{a.removeEventListener(w1,f),c=null}},createHref(S){return t(a,S)},createURL:y,encodeLocation(S){let x=y(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:g,go(S){return o.go(S)}};return p}var S1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(S1||(S1={}));function XL(e,t,n){return n===void 0&&(n="/"),JL(e,t,n,!1)}function JL(e,t,n,r){let a=typeof t=="string"?cc(t):t,i=QN(a.pathname||"/",n);if(i==null)return null;let o=JN(e);ZL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=cI(i);l=oI(o[c],d,r)}return l}function JN(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(er(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=xo([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(er(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),JN(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:aI(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of ZN(i.path))a(i,o,c)}),t}function ZN(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=ZN(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function ZL(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:iI(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const QL=/^:[\w-]+$/,eI=3,tI=2,nI=1,rI=10,sI=-2,j1=e=>e==="*";function aI(e,t){let n=e.split("/"),r=n.length;return n.some(j1)&&(r+=sI),t&&(r+=tI),n.filter(a=>!j1(a)).reduce((a,i)=>a+(QL.test(i)?eI:i===""?nI:rI),r)}function iI(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function oI(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=N1({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!f&&d&&n&&!r[r.length-1].route.index&&(f=N1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:xo([i,f.pathname]),pathnameBase:hI(xo([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=xo([i,f.pathnameBase]))}return o}function N1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=lI(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((d,u,f)=>{let{paramName:h,isOptional:g}=u;if(h==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const y=l[f];return g&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function lI(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),qN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function cI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function QN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function dI(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?cc(e):e;return{pathname:n?n.startsWith("/")?n:uI(n,t):t,search:mI(r),hash:pI(a)}}function uI(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Jp(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function eC(e,t){let n=fI(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function tC(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=cc(e):(a=Fd({},e),er(!a.pathname||!a.pathname.includes("?"),Jp("?","pathname","search",a)),er(!a.pathname||!a.pathname.includes("#"),Jp("#","pathname","hash",a)),er(!a.search||!a.search.includes("#"),Jp("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=dI(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const xo=e=>e.join("/").replace(/\/\/+/g,"/"),hI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nC=["post","put","patch","delete"];new Set(nC);const xI=["get",...nC];new Set(xI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bd.apply(this,arguments)}const Wy=D.createContext(null),yI=D.createContext(null),mu=D.createContext(null),Cm=D.createContext(null),Ha=D.createContext({outlet:null,matches:[],isDataRoute:!1}),rC=D.createContext(null);function pu(){return D.useContext(Cm)!=null}function qn(){return pu()||er(!1),D.useContext(Cm).location}function sC(e){D.useContext(mu).static||D.useLayoutEffect(e)}function Xt(){let{isDataRoute:e}=D.useContext(Ha);return e?PI():bI()}function bI(){pu()||er(!1);let e=D.useContext(Wy),{basename:t,future:n,navigator:r}=D.useContext(mu),{matches:a}=D.useContext(Ha),{pathname:i}=qn(),o=JSON.stringify(eC(a,n.v7_relativeSplatPath)),l=D.useRef(!1);return sC(()=>{l.current=!0}),D.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=tC(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:xo([t,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[t,r,o,i,e])}const vI=D.createContext(null);function wI(e){let t=D.useContext(Ha).outlet;return t&&D.createElement(vI.Provider,{value:e},t)}function Vy(){let{matches:e}=D.useContext(Ha),t=e[e.length-1];return t?t.params:{}}function kI(e,t){return SI(e,t)}function SI(e,t,n,r){pu()||er(!1);let{navigator:a}=D.useContext(mu),{matches:i}=D.useContext(Ha),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=qn(),u;if(t){var f;let S=typeof t=="string"?cc(t):t;c==="/"||(f=S.pathname)!=null&&f.startsWith(c)||er(!1),u=S}else u=d;let h=u.pathname||"/",g=h;if(c!=="/"){let S=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=XL(e,{pathname:g}),p=EI(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:xo([c,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:xo([c,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return t&&p?D.createElement(Cm.Provider,{value:{location:Bd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ci.Pop}},p):p}function jI(){let e=II(),t=gI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:a},n):null,i)}const NI=D.createElement(jI,null);class CI extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?D.createElement(Ha.Provider,{value:this.props.routeContext},D.createElement(rC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TI(e){let{routeContext:t,match:n,children:r}=e,a=D.useContext(Wy);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ha.Provider,{value:t},r)}function EI(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);u>=0||er(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:h,errors:g}=n,y=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||y){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,f,h)=>{let g,y=!1,p=null,S=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||NI,c&&(d<0&&h===0?(MI("route-fallback",!1),y=!0,S=null):d===h&&(y=!0,S=f.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),v=()=>{let b;return g?b=p:y?b=S:f.route.Component?b=D.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=u,D.createElement(TI,{match:f,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?D.createElement(CI,{location:n.location,revalidation:n.revalidation,component:p,error:g,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var aC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(aC||{}),kh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kh||{});function _I(e){let t=D.useContext(Wy);return t||er(!1),t}function RI(e){let t=D.useContext(yI);return t||er(!1),t}function LI(e){let t=D.useContext(Ha);return t||er(!1),t}function iC(e){let t=LI(),n=t.matches[t.matches.length-1];return n.route.id||er(!1),n.route.id}function II(){var e;let t=D.useContext(rC),n=RI(kh.UseRouteError),r=iC(kh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function PI(){let{router:e}=_I(aC.UseNavigateStable),t=iC(kh.UseNavigateStable),n=D.useRef(!1);return sC(()=>{n.current=!0}),D.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Bd({fromRouteId:t},i)))},[e,t])}const C1={};function MI(e,t,n){!t&&!C1[e]&&(C1[e]=!0)}function AI(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function DI(e){let{to:t,replace:n,state:r,relative:a}=e;pu()||er(!1);let{future:i,static:o}=D.useContext(mu),{matches:l}=D.useContext(Ha),{pathname:c}=qn(),d=Xt(),u=tC(t,eC(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(u);return D.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:a}),[d,f,a,n,r]),null}function FI(e){return wI(e.context)}function xn(e){er(!1)}function BI(e){let{basename:t="/",children:n=null,location:r,navigationType:a=ci.Pop,navigator:i,static:o=!1,future:l}=e;pu()&&er(!1);let c=t.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:c,navigator:i,static:o,future:Bd({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=cc(r));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:y="default"}=r,p=D.useMemo(()=>{let S=QN(u,c);return S==null?null:{location:{pathname:S,search:f,hash:h,state:g,key:y},navigationType:a}},[c,u,f,h,g,y,a]);return p==null?null:D.createElement(mu.Provider,{value:d},D.createElement(Cm.Provider,{children:n,value:p}))}function OI(e){let{children:t,location:n}=e;return kI(_0(t),n)}new Promise(()=>{});function _0(e,t){t===void 0&&(t=[]);let n=[];return D.Children.forEach(e,(r,a)=>{if(!D.isValidElement(r))return;let i=[...t,a];if(r.type===D.Fragment){n.push.apply(n,_0(r.props.children,i));return}r.type!==xn&&er(!1),!r.props.index||!r.props.children||er(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_0(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R0(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function UI(e,t){let n=R0(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const zI="6";try{window.__reactRouterVersion=zI}catch{}const $I="startTransition",T1=D3[$I];function HI(e){let{basename:t,children:n,future:r,window:a}=e,i=D.useRef();i.current==null&&(i.current=KL({window:a,v5Compat:!0}));let o=i.current,[l,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=D.useCallback(f=>{d&&T1?T1(()=>c(f)):c(f)},[c,d]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>AI(r),[r]),D.createElement(BI,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var E1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(E1||(E1={}));var _1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_1||(_1={}));function WI(e){let t=D.useRef(R0(e)),n=D.useRef(!1),r=qn(),a=D.useMemo(()=>UI(r.search,n.current?null:t.current),[r.search]),i=Xt(),o=D.useCallback((l,c)=>{const d=R0(typeof l=="function"?l(a):l);n.current=!0,i("?"+d,c)},[i,a]);return[a,o]}const oC=Object.prototype.toString;function Gy(e){switch(oC.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Da(e,Error)}}function dc(e,t){return oC.call(e)===`[object ${t}]`}function Ky(e){return dc(e,"ErrorEvent")}function R1(e){return dc(e,"DOMError")}function VI(e){return dc(e,"DOMException")}function la(e){return dc(e,"String")}function Yy(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function qy(e){return e===null||Yy(e)||typeof e!="object"&&typeof e!="function"}function zl(e){return dc(e,"Object")}function Tm(e){return typeof Event<"u"&&Da(e,Event)}function GI(e){return typeof Element<"u"&&Da(e,Element)}function KI(e){return dc(e,"RegExp")}function Em(e){return!!(e&&e.then&&typeof e.then=="function")}function YI(e){return zl(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function lC(e){return typeof e=="number"&&e!==e}function Da(e,t){try{return e instanceof t}catch{return!1}}function cC(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Cl(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function L1(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const a=e[r];try{cC(a)?n.push("[VueViewModel]"):n.push(String(a))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function qI(e,t,n=!1){return la(e)?KI(t)?t.test(e):la(t)?n?e===t:e.includes(t):!1:!1}function uc(e,t=[],n=!1){return t.some(r=>qI(e,r,n))}function XI(e,t,n=250,r,a,i,o){if(!i.exception||!i.exception.values||!o||!Da(o.originalException,Error))return;const l=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;l&&(i.exception.values=JI(L0(e,t,a,o.originalException,r,i.exception.values,l,0),n))}function L0(e,t,n,r,a,i,o,l){if(i.length>=n+1)return i;let c=[...i];if(Da(r[a],Error)){I1(o,l);const d=e(t,r[a]),u=c.length;P1(d,a,u,l),c=L0(e,t,n,r[a],a,[d,...c],d,u)}return Array.isArray(r.errors)&&r.errors.forEach((d,u)=>{if(Da(d,Error)){I1(o,l);const f=e(t,d),h=c.length;P1(f,`errors[${u}]`,h,l),c=L0(e,t,n,d,a,[f,...c],f,h)}}),c}function I1(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function P1(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function JI(e,t){return e.map(n=>(n.value&&(n.value=Cl(n.value,t)),n))}function uf(e){return e&&e.Math==Math?e:void 0}const Ht=typeof globalThis=="object"&&uf(globalThis)||typeof window=="object"&&uf(window)||typeof self=="object"&&uf(self)||typeof global=="object"&&uf(global)||function(){return this}()||{};function Xy(){return Ht}function dC(e,t,n){const r=n||Ht,a=r.__SENTRY__=r.__SENTRY__||{};return a[e]||(a[e]=t())}const Tl=Xy(),ZI=80;function Pi(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,a=[];let i=0,o=0;const l=" > ",c=l.length;let d;const u=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||ZI;for(;n&&i++<r&&(d=QI(n,u),!(d==="html"||i>1&&o+a.length*c+d.length>=f));)a.push(d),o+=d.length,n=n.parentNode;return a.reverse().join(l)}catch{return"<unknown>"}}function QI(e,t){const n=e,r=[];let a,i,o,l,c;if(!n||!n.tagName)return"";if(Tl.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const d=t&&t.length?t.filter(f=>n.getAttribute(f)).map(f=>[f,n.getAttribute(f)]):null;if(d&&d.length)d.forEach(f=>{r.push(`[${f[0]}="${f[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),a=n.className,a&&la(a))for(i=a.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)o=u[c],l=n.getAttribute(o),l&&r.push(`[${o}="${l}"]`);return r.join("")}function eP(){try{return Tl.document.location.href}catch{return""}}function tP(e){return Tl.document&&Tl.document.querySelector?Tl.document.querySelector(e):null}function uC(e){if(!Tl.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const fc=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,nP="Sentry Logger ",I0=["debug","info","warn","error","log","assert","trace"],Sh={};function Eo(e){if(!("console"in Ht))return e();const t=Ht.console,n={},r=Object.keys(Sh);r.forEach(a=>{const i=Sh[a];n[a]=t[a],t[a]=i});try{return e()}finally{r.forEach(a=>{t[a]=n[a]})}}function rP(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return fc?I0.forEach(n=>{t[n]=(...r)=>{e&&Eo(()=>{Ht.console[n](`${nP}[${n}]:`,...r)})}}):I0.forEach(n=>{t[n]=()=>{}}),t}const be=rP(),sP=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function aP(e){return e==="http"||e==="https"}function Mo(e,t=!1){const{host:n,path:r,pass:a,port:i,projectId:o,protocol:l,publicKey:c}=e;return`${l}://${c}${t&&a?`:${a}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function iP(e){const t=sP.exec(e);if(!t){Eo(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,a="",i,o="",l]=t.slice(1);let c="",d=l;const u=d.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),d=u.pop()),d){const f=d.match(/^\d+/);f&&(d=f[0])}return fC({host:i,pass:a,path:c,projectId:d,port:o,protocol:n,publicKey:r})}function fC(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function oP(e){if(!fc)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(be.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?aP(r)?t&&isNaN(parseInt(t,10))?(be.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(be.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(be.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function hC(e){const t=typeof e=="string"?iP(e):fC(e);if(!(!t||!oP(t)))return t}class ta extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function ir(e,t,n){if(!(t in e))return;const r=e[t],a=n(r);typeof a=="function"&&mC(a,r),e[t]=a}function _o(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{fc&&be.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function mC(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,_o(e,"__sentry_original__",t)}catch{}}function Jy(e){return e.__sentry_original__}function lP(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function pC(e){if(Gy(e))return{message:e.message,name:e.name,stack:e.stack,...A1(e)};if(Tm(e)){const t={type:e.type,target:M1(e.target),currentTarget:M1(e.currentTarget),...A1(e)};return typeof CustomEvent<"u"&&Da(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function M1(e){try{return GI(e)?Pi(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function A1(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function cP(e,t=40){const n=Object.keys(pC(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Cl(n[0],t);for(let r=n.length;r>0;r--){const a=n.slice(0,r).join(", ");if(!(a.length>t))return r===n.length?a:Cl(a,t)}return""}function Lr(e){return P0(e,new Map)}function P0(e,t){if(dP(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const a of Object.keys(e))typeof e[a]<"u"&&(r[a]=P0(e[a],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(a=>{r.push(P0(a,t))}),r}return e}function dP(e){if(!zl(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const gC=50,D1=/\(error: (.*)\)/,F1=/captureMessage|captureException/;function xC(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const a=[],i=n.split(`
`);for(let o=r;o<i.length;o++){const l=i[o];if(l.length>1024)continue;const c=D1.test(l)?l.replace(D1,"$1"):l;if(!c.match(/\S*Error: /)){for(const d of t){const u=d(c);if(u){a.push(u);break}}if(a.length>=gC)break}}return fP(a)}}function uP(e){return Array.isArray(e)?xC(...e):e}function fP(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),F1.test(t[t.length-1].function||"")&&(t.pop(),F1.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,gC).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const Zp="<anonymous>";function Fa(e){try{return!e||typeof e!="function"?Zp:e.name||Zp}catch{return Zp}}const Vf={},B1={};function Ao(e,t){Vf[e]=Vf[e]||[],Vf[e].push(t)}function Do(e,t){B1[e]||(t(),B1[e]=!0)}function Bs(e,t){const n=e&&Vf[e];if(n)for(const r of n)try{r(t)}catch(a){fc&&be.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Fa(r)}
Error:`,a)}}function hP(e){const t="console";Ao(t,e),Do(t,mP)}function mP(){"console"in Ht&&I0.forEach(function(e){e in Ht.console&&ir(Ht.console,e,function(t){return Sh[e]=t,function(...n){Bs("console",{args:n,level:e});const a=Sh[e];a&&a.apply(Ht.console,n)}})})}function $n(){const e=Ht,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function yC(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function si(e){const{message:t,event_id:n}=e;if(t)return t;const r=yC(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function M0(e,t,n){const r=e.exception=e.exception||{},a=r.values=r.values||[],i=a[0]=a[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Od(e,t){const n=yC(e);if(!n)return;const r={type:"generic",handled:!0},a=n.mechanism;if(n.mechanism={...r,...a,...t},t&&"data"in t){const i={...a&&a.data,...t.data};n.mechanism.data=i}}function O1(e){if(e&&e.__sentry_captured__)return!0;try{_o(e,"__sentry_captured__",!0)}catch{}return!1}function bC(e){return Array.isArray(e)?e:[e]}const Go=Ht,pP=1e3;let U1,A0,D0;function vC(e){const t="dom";Ao(t,e),Do(t,gP)}function gP(){if(!Go.document)return;const e=Bs.bind(null,"dom"),t=z1(e,!0);Go.document.addEventListener("click",t,!1),Go.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=Go[n]&&Go[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(ir(r,"addEventListener",function(a){return function(i,o,l){if(i==="click"||i=="keypress")try{const c=this,d=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},u=d[i]=d[i]||{refCount:0};if(!u.handler){const f=z1(e);u.handler=f,a.call(this,i,f,l)}u.refCount++}catch{}return a.call(this,i,o,l)}}),ir(r,"removeEventListener",function(a){return function(i,o,l){if(i==="click"||i=="keypress")try{const c=this,d=c.__sentry_instrumentation_handlers__||{},u=d[i];u&&(u.refCount--,u.refCount<=0&&(a.call(this,i,u.handler,l),u.handler=void 0,delete d[i]),Object.keys(d).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return a.call(this,i,o,l)}}))})}function xP(e){if(e.type!==A0)return!1;try{if(!e.target||e.target._sentryId!==D0)return!1}catch{}return!0}function yP(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function z1(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=bP(n);if(yP(n.type,r))return;_o(n,"_sentryCaptured",!0),r&&!r._sentryId&&_o(r,"_sentryId",$n());const a=n.type==="keypress"?"input":n.type;xP(n)||(e({event:n,name:a,global:t}),A0=n.type,D0=r?r._sentryId:void 0),clearTimeout(U1),U1=Go.setTimeout(()=>{D0=void 0,A0=void 0},pP)}}function bP(e){try{return e.target}catch{return null}}const F0=Xy();function wC(){if(!("fetch"in F0))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function B0(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function vP(){if(typeof EdgeRuntime=="string")return!0;if(!wC())return!1;if(B0(F0.fetch))return!0;let e=!1;const t=F0.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=B0(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){fc&&be.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Zy(e){const t="fetch";Ao(t,e),Do(t,wP)}function wP(){vP()&&ir(Ht,"fetch",function(e){return function(...t){const{method:n,url:r}=kP(t),a={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Bs("fetch",{...a}),e.apply(Ht,t).then(i=>{const o={...a,endTimestamp:Date.now(),response:i};return Bs("fetch",o),i},i=>{const o={...a,endTimestamp:Date.now(),error:i};throw Bs("fetch",o),i})}})}function O0(e,t){return!!e&&typeof e=="object"&&!!e[t]}function $1(e){return typeof e=="string"?e:e?O0(e,"url")?e.url:e.toString?e.toString():"":""}function kP(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:$1(n),method:O0(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:$1(t),method:O0(t,"method")?String(t.method).toUpperCase():"GET"}}let ff=null;function kC(e){const t="error";Ao(t,e),Do(t,SP)}function SP(){ff=Ht.onerror,Ht.onerror=function(e,t,n,r,a){return Bs("error",{column:r,error:a,line:n,msg:e,url:t}),ff&&!ff.__SENTRY_LOADER__?ff.apply(this,arguments):!1},Ht.onerror.__SENTRY_INSTRUMENTED__=!0}let hf=null;function SC(e){const t="unhandledrejection";Ao(t,e),Do(t,jP)}function jP(){hf=Ht.onunhandledrejection,Ht.onunhandledrejection=function(e){return Bs("unhandledrejection",e),hf&&!hf.__SENTRY_LOADER__?hf.apply(this,arguments):!0},Ht.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const mf=Xy();function NP(){const e=mf.chrome,t=e&&e.app&&e.app.runtime,n="history"in mf&&!!mf.history.pushState&&!!mf.history.replaceState;return!t&&n}const Bc=Ht;let pf;function _m(e){const t="history";Ao(t,e),Do(t,CP)}function CP(){if(!NP())return;const e=Bc.onpopstate;Bc.onpopstate=function(...n){const r=Bc.location.href,a=pf;if(pf=r,Bs("history",{from:a,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const a=r.length>2?r[2]:void 0;if(a){const i=pf,o=String(a);pf=o,Bs("history",{from:i,to:o})}return n.apply(this,r)}}ir(Bc.history,"pushState",t),ir(Bc.history,"replaceState",t)}const TP=Ht,di="__sentry_xhr_v3__";function Qy(e){const t="xhr";Ao(t,e),Do(t,EP)}function EP(){if(!TP.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;ir(e,"open",function(t){return function(...n){const r=Date.now(),a=la(n[0])?n[0].toUpperCase():void 0,i=_P(n[1]);if(!a||!i)return t.apply(this,n);this[di]={method:a,url:i,request_headers:{}},a==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const l=this[di];if(l&&this.readyState===4){try{l.status_code=this.status}catch{}const c={args:[a,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this};Bs("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?ir(this,"onreadystatechange",function(l){return function(...c){return o(),l.apply(this,c)}}):this.addEventListener("readystatechange",o),ir(this,"setRequestHeader",function(l){return function(...c){const[d,u]=c,f=this[di];return f&&la(d)&&la(u)&&(f.request_headers[d.toLowerCase()]=u),l.apply(this,c)}}),t.apply(this,n)}}),ir(e,"send",function(t){return function(...n){const r=this[di];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const a={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return Bs("xhr",a),t.apply(this,n)}})}function _P(e){if(la(e))return e;try{return e.toString()}catch{}}function RP(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function LP(){return"npm"}function IP(){return!RP()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function H1(){return typeof window<"u"&&(!IP()||PP())}function PP(){return Ht.process!==void 0&&Ht.process.type==="renderer"}function MP(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(a){if(e)return t.has(a)?!0:(t.add(a),!1);for(let i=0;i<t.length;i++)if(t[i]===a)return!0;return t.push(a),!1}function r(a){if(e)t.delete(a);else for(let i=0;i<t.length;i++)if(t[i]===a){t.splice(i,1);break}}return[n,r]}function Zs(e,t=100,n=1/0){try{return U0("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function jC(e,t=3,n=100*1024){const r=Zs(e,t);return BP(r)>n?jC(e,t-1,n):r}function U0(e,t,n=1/0,r=1/0,a=MP()){const[i,o]=a;if(t==null||["number","boolean","string"].includes(typeof t)&&!lC(t))return t;const l=AP(e,t);if(!l.startsWith("[object "))return l;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return l.replace("object ","");if(i(t))return"[Circular ~]";const d=t;if(d&&typeof d.toJSON=="function")try{const g=d.toJSON();return U0("",g,c-1,r,a)}catch{}const u=Array.isArray(t)?[]:{};let f=0;const h=pC(t);for(const g in h){if(!Object.prototype.hasOwnProperty.call(h,g))continue;if(f>=r){u[g]="[MaxProperties ~]";break}const y=h[g];u[g]=U0(g,y,c-1,r,a),f++}return o(t),u}function AP(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(cC(t))return"[VueViewModel]";if(YI(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${Fa(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=DP(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function DP(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function FP(e){return~-encodeURI(e).split(/%..|./).length}function BP(e){return FP(JSON.stringify(e))}var va;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(va||(va={}));function $l(e){return new Qr(t=>{t(e)})}function eb(e){return new Qr((t,n)=>{n(e)})}class Qr{constructor(t){Qr.prototype.__init.call(this),Qr.prototype.__init2.call(this),Qr.prototype.__init3.call(this),Qr.prototype.__init4.call(this),this._state=va.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new Qr((r,a)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){a(o)}},i=>{if(!n)a(i);else try{r(n(i))}catch(o){a(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Qr((n,r)=>{let a,i;return this.then(o=>{i=!1,a=o,t&&t()},o=>{i=!0,a=o,t&&t()}).then(()=>{if(i){r(a);return}n(a)})})}__init(){this._resolve=t=>{this._setResult(va.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(va.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===va.PENDING){if(Em(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===va.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===va.RESOLVED&&n[1](this._value),this._state===va.REJECTED&&n[2](this._value),n[0]=!0)})}}}function OP(e){const t=[];function n(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]}function a(o){if(!n())return eb(new ta("Not adding Promise because buffer limit was reached."));const l=o();return t.indexOf(l)===-1&&t.push(l),l.then(()=>r(l)).then(null,()=>r(l).then(null,()=>{})),l}function i(o){return new Qr((l,c)=>{let d=t.length;if(!d)return l(!0);const u=setTimeout(()=>{o&&o>0&&l(!1)},o);t.forEach(f=>{$l(f).then(()=>{--d||(clearTimeout(u),l(!0))},c)})})}return{$:t,add:a,drain:i}}function yo(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const UP=["fatal","error","warning","log","info","debug"];function zP(e){return e==="warn"?"warning":UP.includes(e)?e:"log"}const NC=1e3;function gu(){return Date.now()/NC}function $P(){const{performance:e}=Ht;if(!e||!e.now)return gu;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/NC}const xu=$P(),rs=(()=>{const{performance:e}=Ht;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),a=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=a<t,o=e.timing&&e.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,d=c<t;return i||d?a<=c?e.timeOrigin:o:r})(),z0="baggage",CC="sentry-",HP=/^sentry-/,WP=8192;function VP(e){if(!la(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,a)=>{const i=W1(a);for(const o of Object.keys(i))r[o]=i[o];return r},{});else{if(!e)return;t=W1(e)}const n=Object.entries(t).reduce((r,[a,i])=>{if(a.match(HP)){const o=a.slice(CC.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function TC(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,a])=>(a&&(n[`${CC}${r}`]=a),n),{});return GP(t)}function W1(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function GP(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],a)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=a===0?i:`${t},${i}`;return o.length>WP?(fc&&be.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}const KP=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function YP(e){if(!e)return;const t=e.match(KP);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function qP(e,t){const n=YP(e),r=VP(t),{traceId:a,parentSpanId:i,parentSampled:o}=n||{};return n?{traceId:a||$n(),parentSpanId:i||$n().substring(16),spanId:$n().substring(16),sampled:o,dsc:r||{}}:{traceId:a||$n(),spanId:$n().substring(16)}}function tb(e=$n(),t=$n().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function zi(e,t=[]){return[e,t]}function XP(e,t){const[n,r]=e;return[n,[...r,t]]}function V1(e,t){const n=e[1];for(const r of n){const a=r[0].type;if(t(r,a))return!0}return!1}function $0(e,t){return(t||new TextEncoder).encode(e)}function JP(e,t){const[n,r]=e;let a=JSON.stringify(n);function i(o){typeof a=="string"?a=typeof o=="string"?a+o:[$0(a,t),o]:a.push(typeof o=="string"?$0(o,t):o)}for(const o of r){const[l,c]=o;if(i(`
${JSON.stringify(l)}
`),typeof c=="string"||c instanceof Uint8Array)i(c);else{let d;try{d=JSON.stringify(c)}catch{d=JSON.stringify(Zs(c))}i(d)}}return typeof a=="string"?a:ZP(a)}function ZP(e){const t=e.reduce((a,i)=>a+i.length,0),n=new Uint8Array(t);let r=0;for(const a of e)n.set(a,r),r+=a.length;return n}function QP(e,t){const n=typeof e.data=="string"?$0(e.data,t):e.data;return[Lr({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const eM={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function G1(e){return eM[e]}function nb(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function EC(e,t,n,r){const a=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Mo(r)},...a&&{trace:Lr({...a})}}}function tM(e,t,n){const r=[{type:"client_report"},{timestamp:n||gu(),discarded_events:e}];return zi(t?{dsn:t}:{},[r])}const nM=60*1e3;function rM(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?nM:r-t}function sM(e,t){return e[t]||e.all||0}function _C(e,t,n=Date.now()){return sM(e,t)>n}function RC(e,{statusCode:t,headers:n},r=Date.now()){const a={...e},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const l of i.trim().split(",")){const[c,d,,,u]=l.split(":",5),f=parseInt(c,10),h=(isNaN(f)?60:f)*1e3;if(!d)a.all=r+h;else for(const g of d.split(";"))g==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(a[g]=r+h):a[g]=r+h}else o?a.all=r+rM(o,r):t===429&&(a.all=r+60*1e3);return a}function aM(e,t){return e??t()}function Qp(e){let t,n=e[0],r=1;for(;r<e.length;){const a=e[r],i=e[r+1];if(r+=2,(a==="optionalAccess"||a==="optionalCall")&&n==null)return;a==="access"||a==="optionalAccess"?(t=n,n=i(n)):(a==="call"||a==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}const rt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Rm="production";function rb(){return dC("globalEventProcessors",()=>[])}function iM(e){rb().push(e)}function jh(e,t,n,r=0){return new Qr((a,i)=>{const o=e[r];if(t===null||typeof o!="function")a(t);else{const l=o({...t},n);rt&&o.id&&l===null&&be.log(`Event processor "${o.id}" dropped event`),Em(l)?l.then(c=>jh(e,c,n,r+1).then(a)).then(null,i):jh(e,l,n,r+1).then(a).then(null,i)}})}function LC(e){const t=xu(),n={sid:$n(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>oM(n)};return e&&Ro(n,e),n}function Ro(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||xu(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:$n()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function IC(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),Ro(e,n)}function oM(e){return Lr({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const lM=0,PC=1;function sb(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:a,parent_span_id:i,status:o,tags:l,origin:c}=Yn(e);return Lr({data:r,op:a,parent_span_id:i,span_id:t,status:o,tags:l,trace_id:n,origin:c})}function Lm(e){const{traceId:t,spanId:n}=e.spanContext(),r=ab(e);return tb(t,n,r)}function Im(e){return typeof e=="number"?K1(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?K1(e.getTime()):xu()}function K1(e){return e>9999999999?e/1e3:e}function Yn(e){return cM(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function cM(e){return typeof e.getSpanJSON=="function"}function ab(e){const{traceFlags:t}=e.spanContext();return!!(t&PC)}function MC(e,t,n,r,a,i){const{normalizeDepth:o=3,normalizeMaxBreadth:l=1e3}=e,c={...t,event_id:t.event_id||n.event_id||$n(),timestamp:t.timestamp||gu()},d=n.integrations||e.integrations.map(S=>S.name);dM(c,e),hM(c,d),t.type===void 0&&uM(c,e.stackParser);const u=pM(r,n.captureContext);n.mechanism&&Od(c,n.mechanism);const f=a&&a.getEventProcessors?a.getEventProcessors():[],h=TM().getScopeData();if(i){const S=i.getScopeData();Z1(h,S)}if(u){const S=u.getScopeData();Z1(h,S)}const g=[...n.attachments||[],...h.attachments];g.length&&(n.attachments=g),OC(c,h);const y=[...f,...rb(),...h.eventProcessors];return jh(y,c,n).then(S=>(S&&fM(S),typeof o=="number"&&o>0?mM(S,o,l):S))}function dM(e,t){const{environment:n,release:r,dist:a,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:Rm),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&a!==void 0&&(e.dist=a),e.message&&(e.message=Cl(e.message,i));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Cl(o.value,i));const l=e.request;l&&l.url&&(l.url=Cl(l.url,i))}const Y1=new WeakMap;function uM(e,t){const n=Ht._sentryDebugIds;if(!n)return;let r;const a=Y1.get(t);a?r=a:(r=new Map,Y1.set(t,r));const i=Object.keys(n).reduce((o,l)=>{let c;const d=r.get(l);d?c=d:(c=t(l),r.set(l,c));for(let u=c.length-1;u>=0;u--){const f=c[u];if(f.filename){o[f.filename]=n[l];break}}return o},{});try{e.exception.values.forEach(o=>{o.stacktrace.frames.forEach(l=>{l.filename&&(l.debug_id=i[l.filename])})})}catch{}}function fM(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(a=>{a.debug_id&&(a.abs_path?t[a.abs_path]=a.debug_id:a.filename&&(t[a.filename]=a.debug_id),delete a.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function hM(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function mM(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(a=>({...a,...a.data&&{data:Zs(a.data,t,n)}}))},...e.user&&{user:Zs(e.user,t,n)},...e.contexts&&{contexts:Zs(e.contexts,t,n)},...e.extra&&{extra:Zs(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Zs(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(a=>{const i=Yn(a).data;return i&&(a.data=Zs(i,t,n)),a})),r}function pM(e,t){if(!t)return e;const n=e?e.clone():new _a;return n.update(t),n}function gM(e){if(e)return xM(e)?{captureContext:e}:bM(e)?{captureContext:e}:e}function xM(e){return e instanceof _a||typeof e=="function"}const yM=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function bM(e){return Object.keys(e).some(t=>yM.includes(t))}function Pm(e,t){return gr().captureException(e,gM(t))}function AC(e,t){return gr().captureEvent(e,t)}function Mi(e,t){gr().addBreadcrumb(e,t)}function vM(e,t){gr().setContext(e,t)}function q1(e){gr().setUser(e)}function DC(...e){const t=gr();if(e.length===2){const[n,r]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,r(n))):t.withScope(r)}return t.withScope(e[0])}function en(){return gr().getClient()}function os(){return gr().getScope()}function X1(e){const t=en(),n=$i(),r=os(),{release:a,environment:i=Rm}=t&&t.getOptions()||{},{userAgent:o}=Ht.navigator||{},l=LC({release:a,environment:i,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession();return c&&c.status==="ok"&&Ro(c,{status:"exited"}),FC(),n.setSession(l),r.setSession(l),l}function FC(){const e=$i(),t=os(),n=t.getSession()||e.getSession();n&&IC(n),BC(),e.setSession(),t.setSession()}function BC(){const e=$i(),t=os(),n=en(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function J1(e=!1){if(e){FC();return}BC()}function Nh(e){return e.transaction}function Mm(e,t,n){const r=t.getOptions(),{publicKey:a}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},o=Lr({environment:r.environment||Rm,release:r.release,user_segment:i,public_key:a,trace_id:e});return t.emit&&t.emit("createDsc",o),o}function Hl(e){const t=en();if(!t)return{};const n=Mm(Yn(e).trace_id||"",t,os()),r=Nh(e);if(!r)return n;const a=r&&r._frozenDynamicSamplingContext;if(a)return a;const{sampleRate:i,source:o}=r.metadata;i!=null&&(n.sample_rate=`${i}`);const l=Yn(r);return o&&o!=="url"&&(n.transaction=l.description),n.sampled=String(ab(r)),t.emit&&t.emit("createDsc",n),n}function OC(e,t){const{fingerprint:n,span:r,breadcrumbs:a,sdkProcessingMetadata:i}=t;wM(e,t),r&&jM(e,r),NM(e,n),kM(e,a),SM(e,i)}function Z1(e,t){const{extra:n,tags:r,user:a,contexts:i,level:o,sdkProcessingMetadata:l,breadcrumbs:c,fingerprint:d,eventProcessors:u,attachments:f,propagationContext:h,transactionName:g,span:y}=t;Oc(e,"extra",n),Oc(e,"tags",r),Oc(e,"user",a),Oc(e,"contexts",i),Oc(e,"sdkProcessingMetadata",l),o&&(e.level=o),g&&(e.transactionName=g),y&&(e.span=y),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...h}}function Oc(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function wM(e,t){const{extra:n,tags:r,user:a,contexts:i,level:o,transactionName:l}=t,c=Lr(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const d=Lr(r);d&&Object.keys(d).length&&(e.tags={...d,...e.tags});const u=Lr(a);u&&Object.keys(u).length&&(e.user={...u,...e.user});const f=Lr(i);f&&Object.keys(f).length&&(e.contexts={...f,...e.contexts}),o&&(e.level=o),l&&(e.transaction=l)}function kM(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function SM(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function jM(e,t){e.contexts={trace:sb(t),...e.contexts};const n=Nh(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Hl(t),...e.sdkProcessingMetadata};const r=Yn(n).description;r&&(e.tags={transaction:r,...e.tags})}}function NM(e,t){e.fingerprint=e.fingerprint?bC(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const CM=100;let eg;class _a{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Q1()}static clone(t){return t?t.clone():new _a}clone(){const t=new _a;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Ro(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t;if(n instanceof _a){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(zl(n)){const r=t;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Q1(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:CM;if(r<=0)return this;const a={timestamp:gu(),...t},i=this._breadcrumbs;return i.push(a),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:a,_extra:i,_user:o,_level:l,_fingerprint:c,_eventProcessors:d,_propagationContext:u,_sdkProcessingMetadata:f,_transactionName:h,_span:g}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:a,extra:i,user:o,level:l,fingerprint:c||[],eventProcessors:d,propagationContext:u,sdkProcessingMetadata:f,transactionName:h,span:g}}applyToEvent(t,n={},r=[]){OC(t,this.getScopeData());const a=[...r,...rb(),...this._eventProcessors];return jh(a,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:$n();if(!this._client)return be.warn("No client configured on scope - will not capture exception!"),r;const a=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:a,...n,event_id:r},this),r}captureMessage(t,n,r){const a=r&&r.event_id?r.event_id:$n();if(!this._client)return be.warn("No client configured on scope - will not capture message!"),a;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:a},this),a}captureEvent(t,n){const r=n&&n.event_id?n.event_id:$n();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(be.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function TM(){return eg||(eg=new _a),eg}function Q1(){return{traceId:$n(),spanId:$n().substring(16)}}const H0="7.120.4",UC=parseFloat(H0),EM=100;class zC{constructor(t,n,r,a=UC){this._version=a;let i;n?i=n:(i=new _a,i.setClient(t));let o;r?o=r:(o=new _a,o.setClient(t)),this._stack=[{scope:i}],t&&this.bindClient(t),this._isolationScope=o}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(a){throw this.popScope(),a}return Em(r)?r.then(a=>(this.popScope(),a),a=>{throw this.popScope(),a}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:$n(),a=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:a,...n,event_id:r}),r}captureMessage(t,n,r){const a=this._lastEventId=r&&r.event_id?r.event_id:$n(),i=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:a}),a}captureEvent(t,n){const r=n&&n.event_id?n.event_id:$n();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:a}=this.getStackTop();if(!a)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=EM}=a.getOptions&&a.getOptions()||{};if(o<=0)return;const c={timestamp:gu(),...t},d=i?Eo(()=>i(c,n)):c;d!==null&&(a.emit&&a.emit("beforeAddBreadcrumb",d,n),r.addBreadcrumb(d,o))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=ek(this);try{t(this)}finally{ek(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return rt&&be.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return rt&&!r&&(this.getClient()?be.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):be.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&IC(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:a,environment:i=Rm}=r&&r.getOptions()||{},{userAgent:o}=Ht.navigator||{},l=LC({release:a,environment:i,user:n.getUser(),...o&&{userAgent:o},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&Ro(c,{status:"exited"}),this.endSession(),n.setSession(l),l}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(t,...n){const a=yu().__SENTRY__;if(a&&a.extensions&&typeof a.extensions[t]=="function")return a.extensions[t].apply(this,n);rt&&be.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function yu(){return Ht.__SENTRY__=Ht.__SENTRY__||{extensions:{},hub:void 0},Ht}function ek(e){const t=yu(),n=W0(t);return $C(t,e),n}function gr(){const e=yu();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return _M(e)}function $i(){return gr().getIsolationScope()}function _M(e=yu()){return(!RM(e)||W0(e).isOlderThan(UC))&&$C(e,new zC),W0(e)}function RM(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function W0(e){return dC("hub",()=>new zC,e)}function $C(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function Fo(e){return(e||gr()).getScope().getTransaction()}let tk=!1;function LM(){tk||(tk=!0,kC(V0),SC(V0))}function V0(){const e=Fo();if(e){const t="internal_error";rt&&be.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}V0.tag="sentry_tracingErrorCallback";var nk;(function(e){const t="ok";e.Ok=t;const n="deadline_exceeded";e.DeadlineExceeded=n;const r="unauthenticated";e.Unauthenticated=r;const a="permission_denied";e.PermissionDenied=a;const i="not_found";e.NotFound=i;const o="resource_exhausted";e.ResourceExhausted=o;const l="invalid_argument";e.InvalidArgument=l;const c="unimplemented";e.Unimplemented=c;const d="unavailable";e.Unavailable=d;const u="internal_error";e.InternalError=u;const f="unknown_error";e.UnknownError=f;const h="cancelled";e.Cancelled=h;const g="already_exists";e.AlreadyExists=g;const y="failed_precondition";e.FailedPrecondition=y;const p="aborted";e.Aborted=p;const S="out_of_range";e.OutOfRange=S;const x="data_loss";e.DataLoss=x})(nk||(nk={}));function IM(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function ib(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=IM(t);n!=="unknown_error"&&e.setStatus(n)}function hc(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=en(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function HC(e){if(!hc())return;const t=MM(e),n=gr(),r=e.scope?e.scope.getSpan():ob();if(e.onlyIfParent&&!r)return;const o=(e.scope||os()).clone();return PM(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:o})}function ob(){return os().getSpan()}function PM(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:a}){if(!hc())return;const i=$i();let o;if(t&&!r)o=t.startChild(n);else if(t){const l=Hl(t),{traceId:c,spanId:d}=t.spanContext(),u=ab(t);o=e.startTransaction({traceId:c,parentSpanId:d,parentSampled:u,...n,metadata:{dynamicSamplingContext:l,...n.metadata}})}else{const{traceId:l,dsc:c,parentSpanId:d,sampled:u}={...i.getPropagationContext(),...a.getPropagationContext()};o=e.startTransaction({traceId:l,parentSpanId:d,parentSampled:u,...n,metadata:{dynamicSamplingContext:c,...n.metadata}})}return a.setSpan(o),AM(o,a,i),o}function MM(e){if(e.startTime){const t={...e};return t.startTimestamp=Im(e.startTime),delete t.startTime,t}return e}const WC="_sentryScope",VC="_sentryIsolationScope";function AM(e,t,n){e&&(_o(e,VC,n),_o(e,WC,t))}function DM(e){return{scope:e[WC],isolationScope:e[VC]}}const Ra="sentry.source",il="sentry.sample_rate",gf="sentry.op",ol="sentry.origin",FM="profile_id";class GC{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class Am{constructor(t={}){this._traceId=t.traceId||$n(),this._spanId=t.spanId||$n().substring(16),this._startTime=t.startTimestamp||xu(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this.instrumenter=t.instrumenter||"sentry",this._attributes={},this.setAttributes({[ol]:t.origin||"manual",[gf]:t.op,...t.attributes}),this._name=t.name||t.description,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.status&&(this._status=t.status),t.endTimestamp&&(this._endTime=t.endTimestamp),t.exclusiveTime!==void 0&&(this._exclusiveTime=t.exclusiveTime),this._measurements=t.measurements?{...t.measurements}:{}}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}set parentSpanId(t){this._parentSpanId=t}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}get startTimestamp(){return this._startTime}set startTimestamp(t){this._startTime=t}get endTimestamp(){return this._endTime}set endTimestamp(t){this._endTime=t}get status(){return this._status}set status(t){this._status=t}get op(){return this._attributes[gf]}set op(t){this.setAttribute(gf,t)}get origin(){return this._attributes[ol]}set origin(t){this.setAttribute(ol,t)}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?PC:lM}}startChild(t){const n=new Am({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=Nh(this);if(n.transaction=r,rt&&r){const a=t&&t.op||"< unknown op >",i=Yn(n).description||"< unknown name >",o=r.spanContext().spanId,l=`[Tracing] Starting '${a}' span on transaction '${i}' (${o}).`;be.log(l),this._logMessage=l}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setAttribute(t,n){n===void 0?delete this._attributes[t]:this._attributes[t]=n}setAttributes(t){Object.keys(t).forEach(n=>this.setAttribute(n,t[n]))}setStatus(t){return this._status=t,this}setHttpStatus(t){return ib(this,t),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return this._status==="ok"}finish(t){return this.end(t)}end(t){if(this._endTime)return;const n=Nh(this);if(rt&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&be.log(r.replace("Starting","Finishing"))}this._endTime=Im(t)}toTraceparent(){return Lm(this)}toContext(){return Lr({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this._endTime=t.endTimestamp,this.op=t.op,this._parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this._startTime=t.startTimestamp||this._startTime,this._status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return sb(this)}getSpanJSON(){return Lr({data:this._getData(),description:this._name,op:this._attributes[gf],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ol],_metrics_summary:void 0,profile_id:this._attributes[FM],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:n}=this,r=Object.keys(t).length>0,a=Object.keys(n).length>0;if(!(!r&&!a))return r&&a?{...t,...n}:r?t:n}}class KC extends Am{constructor(t,n){super(t),this._contexts={},this._hub=n||gr(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Ra]&&{source:this._attributes[Ra]},...this._attributes[il]&&{sampleRate:this._attributes[il]}}}set metadata(t){this._metadata=t}setName(t,n="custom"){this._name=t,this.setAttribute(Ra,n)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new GC(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const n=Im(t),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const t=super.toContext();return Lr({...t,name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return Hl(this)}setHub(t){this._hub=t}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(t){if(this._endTime!==void 0)return;this._name||(rt&&be.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){rt&&be.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(u=>u!==this&&Yn(u).timestamp):[];if(this._trimEnd&&r.length>0){const u=r.map(f=>Yn(f).timestamp).filter(Boolean);this._endTime=u.reduce((f,h)=>f>h?f:h)}const{scope:a,isolationScope:i}=DM(this),{metadata:o}=this,{source:l}=o,c={contexts:{...this._contexts,trace:sb(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...o,capturedSpanScope:a,capturedSpanIsolationScope:i,...Lr({dynamicSamplingContext:Hl(this)})},_metrics_summary:void 0,...l&&{transaction_info:{source:l}}};return Object.keys(this._measurements).length>0&&(rt&&be.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),rt&&be.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const Gf={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},BM="finishReason",Wo=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class OM extends GC{constructor(t,n,r,a){super(a),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=r}add(t){if(t.spanContext().spanId!==this.transactionSpanId){const n=t.end;t.end=(...r)=>(this._popActivity(t.spanContext().spanId),n.apply(t,r)),Yn(t).timestamp===void 0&&this._pushActivity(t.spanContext().spanId)}super.add(t)}}class UM extends KC{constructor(t,n,r=Gf.idleTimeout,a=Gf.finalTimeout,i=Gf.heartbeatInterval,o=!1,l=!1){super(t,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=a,this._heartbeatInterval=i,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Wo[4],this._autoFinishAllowed=!l,o&&(rt&&be.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),n.getScope().setSpan(this)),l||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Wo[3],this.end())},this._finalTimeout)}end(t){const n=Im(t);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(BM,this._finishReason),this.spanRecorder){rt&&be.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,n);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanContext().spanId===this.spanContext().spanId)return!0;Yn(r).timestamp||(r.setStatus("cancelled"),r.end(n),rt&&be.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const{start_timestamp:a,timestamp:i}=Yn(r),o=a&&a<n,l=(this._finalTimeout+this._idleTimeout)/1e3,c=i&&a&&i-a<l;if(rt){const d=JSON.stringify(r,void 0,2);o?c||be.log("[Tracing] discarding Span since it finished after Transaction final timeout",d):be.log("[Tracing] discarding Span since it happened after Transaction was finished",d)}return o&&c}),rt&&be.log("[Tracing] flushing IdleTransaction")}else rt&&be.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=a=>{this._finished||this._pushActivity(a)},r=a=>{this._finished||this._popActivity(a)};this.spanRecorder=new OM(n,r,this.spanContext().spanId,t),rt&&be.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Wo[5],this.end(t)))}setFinishReason(t){this._finishReason=t}sendAutoFinishSignal(){this._autoFinishAllowed||(rt&&be.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Wo[1],this.end(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),rt&&be.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,rt&&be.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(rt&&be.log(`[Tracing] popActivity ${t}`),delete this.activities[t],rt&&be.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=xu();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Wo[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?this._autoFinishAllowed&&(rt&&be.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Wo[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){rt&&be.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function YC(e,t,n){if(!hc(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setAttribute(il,Number(e.sampled)),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setAttribute(il,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setAttribute(il,Number(r))):(r=1,e.setAttribute(il,r)),qC(r)?r?(e.sampled=Math.random()<r,e.sampled?(rt&&be.log(`[Tracing] starting ${e.op} transaction - ${Yn(e).description}`),e):(rt&&be.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(rt&&be.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):(rt&&be.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function qC(e){return lC(e)||!(typeof e=="number"||typeof e=="boolean")?(rt&&be.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?(rt&&be.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function zM(){const t=this.getScope().getSpan();return t?{"sentry-trace":Lm(t)}:{}}function $M(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},a=r.instrumenter||"sentry",i=e.instrumenter||"sentry";a!==i&&(rt&&be.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${a}\` instrumenter.
The transaction will not be sampled. Please use the ${a} instrumentation to start transactions.`),e.sampled=!1);let o=new KC(e,this);return o=YC(o,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),o.isRecording()&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function XC(e,t,n,r,a,i,o,l=!1){const c=e.getClient(),d=c&&c.getOptions()||{};let u=new UM(t,e,n,r,o,a,l);return u=YC(u,d,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...i}),u.isRecording()&&u.initSpanRecorder(d._experiments&&d._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function HM(){const e=yu();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=$M),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=zM),LM())}function WM(e,t,n){const r=Fo();r&&r.setMeasurement(e,t,n)}function VM(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function GM(e,t,n,r){const a=nb(n),i={sent_at:new Date().toISOString(),...a&&{sdk:a},...!!r&&t&&{dsn:Mo(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return zi(i,[o])}function KM(e,t,n,r){const a=nb(n),i=e.type&&e.type!=="replay_event"?e.type:"event";VM(e,n&&n.sdk);const o=EC(e,a,r,t);return delete e.sdkProcessingMetadata,zi(o,[[{type:i},e]])}const YM="7";function JC(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function qM(e){return`${JC(e)}${e.projectId}/envelope/`}function XM(e,t){return lP({sentry_key:e.publicKey,sentry_version:YM,...t&&{sentry_client:`${t.name}/${t.version}`}})}function JM(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${qM(e)}?${XM(e,r)}`}function ZM(e,t){const n=hC(e);if(!n)return"";const r=`${JC(n)}embed/error-page/`;let a=`dsn=${Mo(n)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=t.user;if(!o)continue;o.name&&(a+=`&name=${encodeURIComponent(o.name)}`),o.email&&(a+=`&email=${encodeURIComponent(o.email)}`)}else a+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${a}`}const rk=[];function QM(e){const t={};return e.forEach(n=>{const{name:r}=n,a=t[r];a&&!a.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function eA(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=bC(n(t)):r=t;const a=QM(r),i=nA(a,o=>o.name==="Debug");if(i!==-1){const[o]=a.splice(i,1);a.push(o)}return a}function tA(e,t){const n={};return t.forEach(r=>{r&&ZC(e,r,n)}),n}function sk(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function ZC(e,t,n){if(n[t.name]){rt&&be.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,rk.indexOf(t.name)===-1&&(t.setupOnce(iM,gr),rk.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(a,i)=>r(a,i,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),a=(i,o)=>r(i,o,e);a.id=t.name,e.addEventProcessor(a)}rt&&be.log(`Integration installed: ${t.name}`)}function nA(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function rA(e){let t="";for(const n of e){const r=Object.entries(n.tags),a=r.length>0?`|#${r.map(([i,o])=>`${i}:${o}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${a}|T${n.timestamp}
`}return t}function sA(e,t,n,r){const a={sent_at:new Date().toISOString()};n&&n.sdk&&(a.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(a.dsn=Mo(t));const i=aA(e);return zi(a,[i])}function aA(e){const t=rA(e);return[{type:"statsd",length:t.length},t]}const ak="Not capturing exception because it's already been captured.";class iA{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=hC(t.dsn):rt&&be.warn("No DSN provided, client will not send events."),this._dsn){const n=JM(this._dsn,t);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(O1(t)){rt&&be.log(ak);return}let a=n&&n.event_id;return this._process(this.eventFromException(t,n).then(i=>this._captureEvent(i,n,r)).then(i=>{a=i})),a}captureMessage(t,n,r,a){let i=r&&r.event_id;const o=Yy(t)?t:String(t),l=qy(t)?this.eventFromMessage(o,n,r):this.eventFromException(t,r);return this._process(l.then(c=>this._captureEvent(c,r,a)).then(c=>{i=c})),i}captureEvent(t,n,r){if(n&&n.originalException&&O1(n.originalException)){rt&&be.log(ak);return}let a=n&&n.event_id;const o=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,n,o||r).then(l=>{a=l})),a}captureSession(t){typeof t.release!="string"?rt&&be.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),Ro(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(a=>r&&a))):$l(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return rt&&be.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const n=this._integrations[t.name];ZC(this,t,this._integrations),n||sk(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=KM(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=XP(r,QP(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const a=this._sendEnvelope(r);a&&a.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){const n=GM(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const a=typeof r=="number"?r:1,i=`${t}:${n}`;rt&&be.log(`Recording outcome: "${i}"${a>1?` (${a} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+a}}captureAggregateMetrics(t){rt&&be.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=sA(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=tA(this,t),sk(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,n){let r=!1,a=!1;const i=n.exception&&n.exception.values;if(i){a=!0;for(const c of i){const d=c.mechanism;if(d&&d.handled===!1){r=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(Ro(t,{...r&&{status:"crashed"},errors:t.errors||Number(a||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Qr(n=>{let r=0;const a=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=a,t&&r>=t&&(clearInterval(i),n(!1)))},a)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,a=$i()){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",t,n),MC(i,t,n,r,this,a).then(l=>{if(l===null)return l;const c={...a.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(l.contexts&&l.contexts.trace)&&c){const{traceId:u,spanId:f,parentSpanId:h,dsc:g}=c;l.contexts={trace:{trace_id:u,span_id:f,parent_span_id:h},...l.contexts};const y=g||Mm(u,this,r);l.sdkProcessingMetadata={dynamicSamplingContext:y,...l.sdkProcessingMetadata}}return l})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(a=>a.event_id,a=>{if(rt){const i=a;i.logLevel==="log"?be.log(i.message):be.warn(i)}})}_processEvent(t,n,r){const a=this.getOptions(),{sampleRate:i}=a,o=eT(t),l=QC(t),c=t.type||"error",d=`before send for type \`${c}\``;if(l&&typeof i=="number"&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",t),eb(new ta(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u=c==="replay_event"?"replay":c,h=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,h).then(g=>{if(g===null)throw this.recordDroppedEvent("event_processor",u,t),new ta("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return g;const p=lA(a,g,n);return oA(p,d)}).then(g=>{if(g===null){if(this.recordDroppedEvent("before_send",u,t),o){const x=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",x)}throw new ta(`${d} returned \`null\`, will not send event.`,"log")}const y=r&&r.getSession();if(!o&&y&&this._updateSessionFromEvent(y,g),o){const S=g.sdkProcessingMetadata&&g.sdkProcessingMetadata.spanCountBeforeProcessing||0,x=g.spans?g.spans.length:0,v=S-x;v>0&&this.recordDroppedEvent("before_send","span",v)}const p=g.transaction_info;if(o&&p&&g.transaction!==t.transaction){const S="custom";g.transaction_info={...p,source:S}}return this.sendEvent(g,n),g}).then(null,g=>{throw g instanceof ta?g:(this.captureException(g,{data:{__sentry__:!0},originalException:g}),new ta(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${g}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{rt&&be.error("Error while sending event:",n)});rt&&be.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,a]=n.split(":");return{reason:r,category:a,quantity:t[n]}})}}function oA(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Em(e))return e.then(r=>{if(!zl(r)&&r!==null)throw new ta(n);return r},r=>{throw new ta(`${t} rejected with ${r}`)});if(!zl(e)&&e!==null)throw new ta(n);return e}function lA(e,t,n){const{beforeSend:r,beforeSendTransaction:a}=e;if(QC(t)&&r)return r(t,n);if(eT(t)&&a){if(t.spans){const i=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:i}}return a(t,n)}return t}function QC(e){return e.type===void 0}function eT(e){return e.type==="transaction"}function cA(e){const t=en();!t||!t.addEventProcessor||t.addEventProcessor(e)}function dA(e,t){t.debug===!0&&(rt?be.enable():Eo(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),os().update(t.initialScope);const r=new e(t);uA(r),fA(r)}function uA(e){const n=gr().getStackTop();n.client=e,n.scope.setClient(e)}function fA(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}const hA=30;function tT(e,t,n=OP(e.bufferSize||hA)){let r={};const a=o=>n.drain(o);function i(o){const l=[];if(V1(o,(f,h)=>{const g=G1(h);if(_C(r,g)){const y=ik(f,h);e.recordDroppedEvent("ratelimit_backoff",g,y)}else l.push(f)}),l.length===0)return $l();const c=zi(o[0],l),d=f=>{V1(c,(h,g)=>{const y=ik(h,g);e.recordDroppedEvent(f,G1(g),y)})},u=()=>t({body:JP(c,e.textEncoder)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&rt&&be.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),r=RC(r,f),f),f=>{throw d("network_error"),f});return n.add(u).then(f=>f,f=>{if(f instanceof ta)return rt&&be.error("Skipped sending event because buffer is full."),d("queue_overflow"),$l();throw f})}return i.__sentry__baseTransport__=!0,{send:i,flush:a}}function ik(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function mA(e,t){const n={sent_at:new Date().toISOString()};t&&(n.dsn=Mo(t));const r=e.map(pA);return zi(n,r)}function pA(e){return[{type:"span"},e]}function gA(e,t){const n=t&&bA(t)?t.getClient():t,r=n&&n.getDsn(),a=n&&n.getOptions().tunnel;return yA(e,r)||xA(e,a)}function xA(e,t){return t?ok(e)===ok(t):!1}function yA(e,t){return t?e.includes(t.host):!1}function ok(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function bA(e){return e.getClient!==void 0}function nT(e,t,n=[t],r="npm"){const a=e._metadata||{};a.sdk||(a.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:H0})),version:H0}),e._metadata=a}const vA=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],wA=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],kA="InboundFilters",SA=(e={})=>({name:kA,setupOnce(){},processEvent(t,n,r){const a=r.getOptions(),i=NA(e,a);return CA(t,i)?null:t}}),jA=SA;function NA(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:vA],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:wA],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function CA(e,t){return t.ignoreInternal&&IA(e)?(rt&&be.warn(`Event dropped due to being internal Sentry Error.
Event: ${si(e)}`),!0):TA(e,t.ignoreErrors)?(rt&&be.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${si(e)}`),!0):EA(e,t.ignoreTransactions)?(rt&&be.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${si(e)}`),!0):_A(e,t.denyUrls)?(rt&&be.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${si(e)}.
Url: ${Ch(e)}`),!0):RA(e,t.allowUrls)?!1:(rt&&be.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${si(e)}.
Url: ${Ch(e)}`),!0)}function TA(e,t){return e.type||!t||!t.length?!1:LA(e).some(n=>uc(n,t))}function EA(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?uc(n,t):!1}function _A(e,t){if(!t||!t.length)return!1;const n=Ch(e);return n?uc(n,t):!1}function RA(e,t){if(!t||!t.length)return!0;const n=Ch(e);return n?uc(n,t):!0}function LA(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),rt&&t.length===0&&be.error(`Could not extract message for event ${si(e)}`),t}function IA(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function PA(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Ch(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?PA(t):null}catch{return rt&&be.error(`Cannot extract url for event ${si(e)}`),null}}let lk;const MA="FunctionToString",ck=new WeakMap,AA=()=>({name:MA,setupOnce(){lk=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Jy(this),n=ck.has(en())&&t!==void 0?t:this;return lk.apply(n,e)}}catch{}},setup(e){ck.set(e,!0)}}),DA=AA,Cn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,yt=Ht;function FA(){yt.document?yt.document.addEventListener("visibilitychange",()=>{const e=Fo();if(yt.document.hidden&&e){const t="cancelled",{op:n,status:r}=Yn(e);Cn&&be.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):Cn&&be.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const bu=(e,t,n)=>{let r,a;return i=>{t.value>=0&&(i||n)&&(a=t.value-(r||0),(a||r===void 0)&&(r=t.value,t.delta=a,e(t)))}},BA=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,OA=()=>{const e=yt.performance.timing,t=yt.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},Dm=()=>yt.__WEB_VITALS_POLYFILL__?yt.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||OA()):yt.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],lb=()=>{const e=Dm();return e&&e.activationStart||0},vu=(e,t)=>{const n=Dm();let r="navigate";return n&&(yt.document&&yt.document.prerendering||lb()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:BA(),navigationType:r}},mc=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(a=>{t(a.getEntries())});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},wu=(e,t)=>{const n=r=>{(r.type==="pagehide"||yt.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};yt.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},UA=(e,t={})=>{const n=vu("CLS",0);let r,a=0,i=[];const o=c=>{c.forEach(d=>{if(!d.hadRecentInput){const u=i[0],f=i[i.length-1];a&&i.length!==0&&d.startTime-f.startTime<1e3&&d.startTime-u.startTime<5e3?(a+=d.value,i.push(d)):(a=d.value,i=[d]),a>n.value&&(n.value=a,n.entries=i,r&&r())}})},l=mc("layout-shift",o);if(l){r=bu(e,n,t.reportAllChanges);const c=()=>{o(l.takeRecords()),r(!0)};return wu(c),c}};let Th=-1;const zA=()=>{yt.document&&yt.document.visibilityState&&(Th=yt.document.visibilityState==="hidden"&&!yt.document.prerendering?0:1/0)},$A=()=>{wu(({timeStamp:e})=>{Th=e},!0)},cb=()=>(Th<0&&(zA(),$A()),{get firstHiddenTime(){return Th}}),HA=e=>{const t=cb(),n=vu("FID");let r;const a=l=>{l.startTime<t.firstHiddenTime&&(n.value=l.processingStart-l.startTime,n.entries.push(l),r(!0))},i=l=>{l.forEach(a)},o=mc("first-input",i);r=bu(e,n),o&&wu(()=>{i(o.takeRecords()),o.disconnect()},!0)};let rT=0,tg=1/0,xf=0;const WA=e=>{e.forEach(t=>{t.interactionId&&(tg=Math.min(tg,t.interactionId),xf=Math.max(xf,t.interactionId),rT=xf?(xf-tg)/7+1:0)})};let G0;const VA=()=>G0?rT:performance.interactionCount||0,GA=()=>{"interactionCount"in performance||G0||(G0=mc("event",WA,{type:"event",buffered:!0,durationThreshold:0}))},sT=()=>VA(),dk=10,ka=[],ng={},uk=e=>{const t=ka[ka.length-1],n=ng[e.interactionId];if(n||ka.length<dk||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const r={id:e.interactionId,latency:e.duration,entries:[e]};ng[r.id]=r,ka.push(r)}ka.sort((r,a)=>a.latency-r.latency),ka.splice(dk).forEach(r=>{delete ng[r.id]})}},KA=()=>{const e=Math.min(ka.length-1,Math.floor(sT()/50));return ka[e]},YA=(e,t)=>{t=t||{},GA();const n=vu("INP");let r;const a=o=>{o.forEach(c=>{c.interactionId&&uk(c),c.entryType==="first-input"&&!ka.some(u=>u.entries.some(f=>c.duration===f.duration&&c.startTime===f.startTime))&&uk(c)});const l=KA();l&&l.latency!==n.value&&(n.value=l.latency,n.entries=l.entries,r())},i=mc("event",a,{durationThreshold:t.durationThreshold||40});r=bu(e,n,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),wu(()=>{a(i.takeRecords()),n.value<0&&sT()>0&&(n.value=0,n.entries=[]),r(!0)}))},fk={},qA=e=>{const t=cb(),n=vu("LCP");let r;const a=o=>{const l=o[o.length-1];if(l){const c=Math.max(l.startTime-lb(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[l],r())}},i=mc("largest-contentful-paint",a);if(i){r=bu(e,n);const o=()=>{fk[n.id]||(a(i.takeRecords()),i.disconnect(),fk[n.id]=!0,r(!0))};return["keydown","click"].forEach(l=>{yt.document&&addEventListener(l,o,{once:!0,capture:!0})}),wu(o,!0),o}},K0=e=>{yt.document&&(yt.document.prerendering?addEventListener("prerenderingchange",()=>K0(e),!0):yt.document.readyState!=="complete"?addEventListener("load",()=>K0(e),!0):setTimeout(e,0))},XA=(e,t)=>{t=t||{};const n=vu("TTFB"),r=bu(e,n,t.reportAllChanges);K0(()=>{const a=Dm();if(a){if(n.value=Math.max(a.responseStart-lb(),0),n.value<0||n.value>performance.now())return;n.entries=[a],r(!0)}})},od={},Eh={};let aT,iT,oT,lT,cT;function JA(e,t=!1){return ku("cls",e,t6,aT,t)}function dT(e,t=!1){return ku("lcp",e,r6,oT,t)}function ZA(e){return ku("ttfb",e,s6,lT)}function QA(e){return ku("fid",e,n6,iT)}function e6(e){return ku("inp",e,a6,cT)}function Wl(e,t){return uT(e,t),Eh[e]||(i6(e),Eh[e]=!0),fT(e,t)}function pc(e,t){const n=od[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(a){Cn&&be.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Fa(r)}
Error:`,a)}}function t6(){return UA(e=>{pc("cls",{metric:e}),aT=e},{reportAllChanges:!0})}function n6(){return HA(e=>{pc("fid",{metric:e}),iT=e})}function r6(){return qA(e=>{pc("lcp",{metric:e}),oT=e})}function s6(){return XA(e=>{pc("ttfb",{metric:e}),lT=e})}function a6(){return YA(e=>{pc("inp",{metric:e}),cT=e})}function ku(e,t,n,r,a=!1){uT(e,t);let i;return Eh[e]||(i=n(),Eh[e]=!0),r&&t({metric:r}),fT(e,t,a?i:void 0)}function i6(e){const t={};e==="event"&&(t.durationThreshold=0),mc(e,n=>{pc(e,{entries:n})},t)}function uT(e,t){od[e]=od[e]||[],od[e].push(t)}function fT(e,t,n){return()=>{n&&n();const r=od[e];if(!r)return;const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}function rg(e){return typeof e=="number"&&isFinite(e)}function Vl(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const o6=2147483647;function rr(e){return e/1e3}function db(){return yt&&yt.addEventListener&&yt.performance}let hk=0,Fn={},Xs,ld;function l6(){const e=db();if(e&&rs){e.mark&&yt.performance.mark("sentry-tracing-init");const t=m6(),n=f6(),r=h6(),a=p6();return()=>{t(),n(),r(),a()}}return()=>{}}function c6(){Wl("longtask",({entries:e})=>{for(const t of e){const n=Fo();if(!n)return;const r=rr(rs+t.startTime),a=rr(t.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+a})}})}function d6(){Wl("event",({entries:e})=>{for(const t of e){const n=Fo();if(!n)return;if(t.name==="click"){const r=rr(rs+t.startTime),a=rr(t.duration),i={description:Pi(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+a},o=uC(t.target);o&&(i.attributes={"ui.component_name":o}),n.startChild(i)}}})}function u6(e,t){if(db()&&rs){const r=g6(e,t);return()=>{r()}}return()=>{}}function f6(){return JA(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Cn&&be.log("[Measurements] Adding CLS"),Fn.cls={value:e.value,unit:""},ld=t)},!0)}function h6(){return dT(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Cn&&be.log("[Measurements] Adding LCP"),Fn.lcp={value:e.value,unit:"millisecond"},Xs=t)},!0)}function m6(){return QA(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=rr(rs),r=rr(t.startTime);Cn&&be.log("[Measurements] Adding FID"),Fn.fid={value:e.value,unit:"millisecond"},Fn["mark.fid"]={value:n+r,unit:"second"}})}function p6(){return ZA(({metric:e})=>{e.entries[e.entries.length-1]&&(Cn&&be.log("[Measurements] Adding TTFB"),Fn.ttfb={value:e.value,unit:"millisecond"})})}const mk={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function g6(e,t){return e6(({metric:n})=>{if(n.value===void 0)return;const r=n.entries.find(b=>b.duration===n.value&&mk[b.name]!==void 0),a=en();if(!r||!a)return;const i=mk[r.name],o=a.getOptions(),l=rr(rs+r.startTime),c=rr(n.value),d=r.interactionId!==void 0?e[r.interactionId]:void 0;if(d===void 0)return;const{routeName:u,parentContext:f,activeTransaction:h,user:g,replayId:y}=d,p=g!==void 0?g.email||g.id||g.ip_address:void 0,S=h!==void 0?h.getProfileId():void 0,x=new Am({startTimestamp:l,endTimestamp:l+c,op:`ui.interaction.${i}`,name:Pi(r.target),attributes:{release:o.release,environment:o.environment,transaction:u,...p!==void 0&&p!==""?{user:p}:{},...S!==void 0?{profile_id:S}:{},...y!==void 0?{replay_id:y}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),v=N6(f,o,t);if(v&&Math.random()<v){const b=x?mA([x],a.getDsn()):void 0,w=a&&a.getTransport();w&&b&&w.send(b).then(null,N=>{Cn&&be.error("Error while sending interaction:",N)});return}})}function x6(e){const t=db();if(!t||!yt.performance.getEntries||!rs)return;Cn&&be.log("[Tracing] Adding & adjusting spans using Performance API");const n=rr(rs),r=t.getEntries(),{op:a,start_timestamp:i}=Yn(e);if(r.slice(hk).forEach(o=>{const l=rr(o.startTime),c=rr(o.duration);if(!(e.op==="navigation"&&i&&n+l<i))switch(o.entryType){case"navigation":{b6(e,o,n);break}case"mark":case"paint":case"measure":{y6(e,o,l,c,n);const d=cb(),u=o.startTime<d.firstHiddenTime;o.name==="first-paint"&&u&&(Cn&&be.log("[Measurements] Adding FP"),Fn.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&u&&(Cn&&be.log("[Measurements] Adding FCP"),Fn.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{w6(e,o,o.name,l,c,n);break}}}),hk=Math.max(r.length-1,0),k6(e),a==="pageload"){j6(Fn),["fcp","fp","lcp"].forEach(l=>{if(!Fn[l]||!i||n>=i)return;const c=Fn[l].value,d=n+rr(c),u=Math.abs((d-i)*1e3),f=u-c;Cn&&be.log(`[Measurements] Normalized ${l} from ${c} to ${u} (${f})`),Fn[l].value=u});const o=Fn["mark.fid"];o&&Fn.fid&&(Vl(e,{description:"first input delay",endTimestamp:o.value+rr(Fn.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:o.value}),delete Fn["mark.fid"]),"fcp"in Fn||delete Fn.cls,Object.keys(Fn).forEach(l=>{WM(l,Fn[l].value,Fn[l].unit)}),S6(e)}Xs=void 0,ld=void 0,Fn={}}function y6(e,t,n,r,a){const i=a+n,o=i+r;return Vl(e,{description:t.name,endTimestamp:o,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i}),i}function b6(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{yf(e,t,r,n)}),yf(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),yf(e,t,"fetch",n,"cache","domainLookupStart"),yf(e,t,"domainLookup",n,"DNS"),v6(e,t,n)}function yf(e,t,n,r,a,i){const o=i?t[i]:t[`${n}End`],l=t[`${n}Start`];!l||!o||Vl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:a||n,startTimestamp:r+rr(l),endTimestamp:r+rr(o)})}function v6(e,t,n){t.responseEnd&&(Vl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+rr(t.requestStart),endTimestamp:n+rr(t.responseEnd)}),Vl(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+rr(t.responseStart),endTimestamp:n+rr(t.responseEnd)}))}function w6(e,t,n,r,a,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const o=yo(n),l={};sg(l,t,"transferSize","http.response_transfer_size"),sg(l,t,"encodedBodySize","http.response_content_length"),sg(l,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(l["resource.render_blocking_status"]=t.renderBlockingStatus),o.protocol&&(l["url.scheme"]=o.protocol.split(":").pop()),o.host&&(l["server.address"]=o.host),l["url.same_origin"]=n.includes(yt.location.origin);const c=i+r,d=c+a;Vl(e,{description:n.replace(yt.location.origin,""),endTimestamp:d,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:l})}function k6(e){const t=yt.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),rg(n.rtt)&&(Fn["connection.rtt"]={value:n.rtt,unit:"millisecond"})),rg(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),rg(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function S6(e){Xs&&(Cn&&be.log("[Measurements] Adding LCP Data"),Xs.element&&e.setTag("lcp.element",Pi(Xs.element)),Xs.id&&e.setTag("lcp.id",Xs.id),Xs.url&&e.setTag("lcp.url",Xs.url.trim().slice(0,200)),e.setTag("lcp.size",Xs.size)),ld&&ld.sources&&(Cn&&be.log("[Measurements] Adding CLS Data"),ld.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,Pi(t.node))))}function sg(e,t,n,r){const a=t[n];a!=null&&a<o6&&(e[r]=a)}function j6(e){const t=Dm();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(Cn&&be.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function N6(e,t,n){if(!hc(t))return!1;let r;return e!==void 0&&typeof t.tracesSampler=="function"?r=t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:yt.location}):e!==void 0&&e.sampled!==void 0?r=e.sampled:typeof t.tracesSampleRate<"u"?r=t.tracesSampleRate:r=1,qC(r)?r===!0?n:r===!1?0:r*n:(Cn&&be.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}function C6(e,t,n,r,a="auto.http.browser"){if(!hc()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const g=e.fetchData.__span;if(!g)return;const y=r[g];y&&(_6(y,e),delete r[g]);return}const o=os(),l=en(),{method:c,url:d}=e.fetchData,u=E6(d),f=u?yo(u).host:void 0,h=i?HC({name:`${c} ${d}`,onlyIfParent:!0,attributes:{url:d,type:"fetch","http.method":c,"http.url":u,"server.address":f,[ol]:a},op:"http.client"}):void 0;if(h&&(e.fetchData.__span=h.spanContext().spanId,r[h.spanContext().spanId]=h),n(e.fetchData.url)&&l){const g=e.args[0];e.args[1]=e.args[1]||{};const y=e.args[1];y.headers=T6(g,l,o,y,h)}return h}function T6(e,t,n,r,a){const i=a||n.getSpan(),o=$i(),{traceId:l,spanId:c,sampled:d,dsc:u}={...o.getPropagationContext(),...n.getPropagationContext()},f=i?Lm(i):tb(l,c,d),h=TC(u||(i?Hl(i):Mm(l,t,n))),g=r.headers||(typeof Request<"u"&&Da(e,Request)?e.headers:void 0);if(g)if(typeof Headers<"u"&&Da(g,Headers)){const y=new Headers(g);return y.append("sentry-trace",f),h&&y.append(z0,h),y}else if(Array.isArray(g)){const y=[...g,["sentry-trace",f]];return h&&y.push([z0,h]),y}else{const y="baggage"in g?g.baggage:void 0,p=[];return Array.isArray(y)?p.push(...y):y&&p.push(y),h&&p.push(h),{...g,"sentry-trace":f,baggage:p.length>0?p.join(","):void 0}}else return{"sentry-trace":f,baggage:h}}function E6(e){try{return new URL(e).href}catch{return}}function _6(e,t){if(t.response){ib(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus("internal_error");e.end()}const Y0=["localhost",/^\/(?!\/)/],q0={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Y0,tracePropagationTargets:Y0};function R6(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:a,shouldCreateSpanForRequest:i,enableHTTPTimings:o}={traceFetch:q0.traceFetch,traceXHR:q0.traceXHR,...e},l=typeof i=="function"?i:u=>!0,c=u=>M6(u,r||a),d={};t&&Zy(u=>{const f=C6(u,l,c,d);if(f){const h=hT(u.fetchData.url),g=h?yo(h).host:void 0;f.setAttributes({"http.url":h,"server.address":g})}o&&f&&pk(f)}),n&&Qy(u=>{const f=A6(u,l,c,d);o&&f&&pk(f)})}function L6(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function pk(e){const{url:t}=Yn(e).data||{};if(!t||typeof t!="string")return;const n=Wl("resource",({entries:r})=>{r.forEach(a=>{L6(a)&&a.name.endsWith(t)&&(P6(a).forEach(o=>e.setAttribute(...o)),setTimeout(n))})})}function I6(e){let t="unknown",n="unknown",r="";for(const a of e){if(a==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(a))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=a}return r===e&&(t=r),{name:t,version:n}}function Ys(e=0){return((rs||performance.timeOrigin)+e)/1e3}function P6(e){const{name:t,version:n}=I6(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),rs?[...r,["http.request.redirect_start",Ys(e.redirectStart)],["http.request.fetch_start",Ys(e.fetchStart)],["http.request.domain_lookup_start",Ys(e.domainLookupStart)],["http.request.domain_lookup_end",Ys(e.domainLookupEnd)],["http.request.connect_start",Ys(e.connectStart)],["http.request.secure_connection_start",Ys(e.secureConnectionStart)],["http.request.connection_end",Ys(e.connectEnd)],["http.request.request_start",Ys(e.requestStart)],["http.request.response_start",Ys(e.responseStart)],["http.request.response_end",Ys(e.responseEnd)]]:r}function M6(e,t){return uc(e,t||Y0)}function A6(e,t,n,r){const a=e.xhr,i=a&&a[di];if(!hc()||!a||a.__sentry_own_request__||!i)return;const o=t(i.url);if(e.endTimestamp&&o){const g=a.__sentry_xhr_span_id__;if(!g)return;const y=r[g];y&&i.status_code!==void 0&&(ib(y,i.status_code),y.end(),delete r[g]);return}const l=os(),c=$i(),d=hT(i.url),u=d?yo(d).host:void 0,f=o?HC({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":d,url:i.url,"server.address":u,[ol]:"auto.http.browser"},op:"http.client"}):void 0;f&&(a.__sentry_xhr_span_id__=f.spanContext().spanId,r[a.__sentry_xhr_span_id__]=f);const h=en();if(a.setRequestHeader&&n(i.url)&&h){const{traceId:g,spanId:y,sampled:p,dsc:S}={...c.getPropagationContext(),...l.getPropagationContext()},x=f?Lm(f):tb(g,y,p),v=TC(S||(f?Hl(f):Mm(g,h,l)));D6(a,x,v)}return f}function D6(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(z0,n)}catch{}}function hT(e){try{return new URL(e,yt.location.origin).href}catch{return}}const F6="BrowserTracing",B6={...Gf,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...q0},O6=(e={})=>{const t=Cn?!!(e.tracePropagationTargets||e.tracingOrigins):!1;HM(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...B6,...e},r=l6(),a={};n.enableInp&&u6(a,n.interactionsSampleRate),n.enableLongTask&&c6(),n._experiments.enableInteractions&&d6();const i={name:void 0,context:void 0};function o(l){const c=gr(),{beforeStartSpan:d,idleTimeout:u,finalTimeout:f,heartbeatInterval:h}=n,g=l.op==="pageload";let y;if(g){const v=g?gk("sentry-trace"):"",b=g?gk("baggage"):void 0,{traceId:w,dsc:N,parentSpanId:R,sampled:C}=qP(v,b);y={traceId:w,parentSpanId:R,parentSampled:C,...l,metadata:{...l.metadata,dynamicSamplingContext:N},trimEnd:!0}}else y={trimEnd:!0,...l};const p=d?d(y):y;p.metadata=p.name!==y.name?{...p.metadata,source:"custom"}:p.metadata,i.name=p.name,i.context=p,p.sampled===!1&&Cn&&be.log(`[Tracing] Will not send ${p.op} transaction because of beforeNavigate.`),Cn&&be.log(`[Tracing] Starting ${p.op} transaction on scope`);const{location:S}=yt,x=XC(c,p,u,f,!0,{location:S},h,g);return g&&yt.document&&(yt.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(yt.document.readyState)&&x.sendAutoFinishSignal()}),["interactive","complete"].includes(yt.document.readyState)&&x.sendAutoFinishSignal()),x.registerBeforeFinishCallback(v=>{r(),x6(v)}),x}return{name:F6,setupOnce:()=>{},afterAllSetup(l){const c=l.getOptions(),{markBackgroundSpan:d,traceFetch:u,traceXHR:f,shouldCreateSpanForRequest:h,enableHTTPTimings:g,_experiments:y}=n,p=c&&c.tracePropagationTargets,S=p||n.tracePropagationTargets;Cn&&t&&p&&be.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let x,v=yt.location&&yt.location.href;if(l.on&&(l.on("startNavigationSpan",b=>{x&&(Cn&&be.log(`[Tracing] Finishing current transaction with op: ${Yn(x).op}`),x.end()),x=o({op:"navigation",...b})}),l.on("startPageLoadSpan",b=>{x&&(Cn&&be.log(`[Tracing] Finishing current transaction with op: ${Yn(x).op}`),x.end()),x=o({op:"pageload",...b})})),n.instrumentPageLoad&&l.emit&&yt.location){const b={name:yt.location.pathname,startTimestamp:rs?rs/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Ra]:"url"}};U6(l,b)}n.instrumentNavigation&&l.emit&&yt.location&&_m(({to:b,from:w})=>{if(w===void 0&&v&&v.indexOf(b)!==-1){v=void 0;return}if(w!==b){v=void 0;const N={name:yt.location.pathname,origin:"auto.navigation.browser",attributes:{[Ra]:"url"}};z6(l,N)}}),d&&FA(),y.enableInteractions&&$6(n,i),n.enableInp&&W6(a,i),R6({traceFetch:u,traceXHR:f,tracePropagationTargets:S,shouldCreateSpanForRequest:h,enableHTTPTimings:g})},options:n}};function U6(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=ob();return(n&&Yn(n).op)==="pageload"?n:void 0}function z6(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=ob();return(n&&Yn(n).op)==="navigation"?n:void 0}function gk(e){const t=tP(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function $6(e,t){let n;const r=()=>{const{idleTimeout:a,finalTimeout:i,heartbeatInterval:o}=e,l="ui.action.click",c=Fo();if(c&&c.op&&["navigation","pageload"].includes(c.op)){Cn&&be.warn(`[Tracing] Did not create ${l} transaction because a pageload or navigation transaction is in progress.`);return}if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name){Cn&&be.warn(`[Tracing] Did not create ${l} transaction because _latestRouteName is missing.`);return}const{location:d}=yt,u={name:t.name,op:l,trimEnd:!0,data:{[Ra]:t.context?V6(t.context):"url"}};n=XC(gr(),u,a,i,!0,{location:d},o)};["click"].forEach(a=>{yt.document&&addEventListener(a,r,{once:!1,capture:!0})})}function H6(e){return"duration"in e}const xk=10;function W6(e,t){const n=({entries:r})=>{const a=en(),i=a!==void 0&&a.getIntegrationByName!==void 0?a.getIntegrationByName("Replay"):void 0,o=i!==void 0?i.getReplayId():void 0,l=Fo(),c=os(),d=c!==void 0?c.getUser():void 0;r.forEach(u=>{if(H6(u)){const f=u.interactionId;if(f===void 0)return;const h=e[f],g=u.duration,y=u.startTime,p=Object.keys(e),S=p.length>0?p.reduce((x,v)=>e[x].duration<e[v].duration?x:v):void 0;if(u.entryType==="first-input"&&p.map(v=>e[v]).some(v=>v.duration===g&&v.startTime===y)||!f)return;if(h)h.duration=Math.max(h.duration,g);else if(p.length<xk||S===void 0||g>e[S].duration){const x=t.name,v=t.context;x&&v&&(S&&Object.keys(e).length>=xk&&delete e[S],e[f]={routeName:x,duration:g,parentContext:v,user:d,activeTransaction:l,replayId:o,startTime:y})}}})};Wl("event",n),Wl("first-input",n)}function V6(e){const t=e.attributes&&e.attributes[Ra],n=e.data&&e.data[Ra],r=e.metadata&&e.metadata.source;return t||n||r}const Kt=Ht;let X0=0;function mT(){return X0>0}function G6(){X0++,setTimeout(()=>{X0--})}function Gl(e,t={},n){if(typeof e!="function")return e;try{const a=e.__sentry_wrapped__;if(a)return typeof a=="function"?a:e;if(Jy(e))return e}catch{return e}const r=function(){const a=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const i=a.map(o=>Gl(o,t));return e.apply(this,i)}catch(i){throw G6(),DC(o=>{o.addEventProcessor(l=>(t.mechanism&&(M0(l,void 0,void 0),Od(l,t.mechanism)),l.extra={...l.extra,arguments:a},l)),Pm(i)}),i}};try{for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}catch{}mC(r,e),_o(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const ys=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function pT(e,t){const n=ub(e,t),r={type:t&&t.name,value:X6(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function K6(e,t,n,r){const a=en(),i=a&&a.getOptions().normalizeDepth,o={exception:{values:[{type:Tm(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Q6(t,{isUnhandledRejection:r})}]},extra:{__serialized__:jC(t,i)}};if(n){const l=ub(e,n);l.length&&(o.exception.values[0].stacktrace={frames:l})}return o}function ag(e,t){return{exception:{values:[pT(e,t)]}}}function ub(e,t){const n=t.stacktrace||t.stack||"",r=q6(t);try{return e(n,r)}catch{}return[]}const Y6=/Minified React error #\d+;/i;function q6(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(Y6.test(e.message))return 1}return 0}function X6(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function J6(e,t,n,r){const a=n&&n.syntheticException||void 0,i=fb(e,t,a,r);return Od(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),$l(i)}function Z6(e,t,n="info",r,a){const i=r&&r.syntheticException||void 0,o=J0(e,t,i,a);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),$l(o)}function fb(e,t,n,r,a){let i;if(Ky(t)&&t.error)return ag(e,t.error);if(R1(t)||VI(t)){const o=t;if("stack"in t)i=ag(e,t);else{const l=o.name||(R1(o)?"DOMError":"DOMException"),c=o.message?`${l}: ${o.message}`:l;i=J0(e,c,n,r),M0(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return Gy(t)?ag(e,t):zl(t)||Tm(t)?(i=K6(e,t,n,a),Od(i,{synthetic:!0}),i):(i=J0(e,t,n,r),M0(i,`${t}`,void 0),Od(i,{synthetic:!0}),i)}function J0(e,t,n,r){const a={};if(r&&n){const i=ub(e,n);i.length&&(a.exception={values:[{value:t,stacktrace:{frames:i}}]})}if(Yy(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return a.logentry={message:i,params:o},a}return a.message=t,a}function Q6(e,{isUnhandledRejection:t}){const n=cP(e),r=t?"promise rejection":"exception";return Ky(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Tm(e)?`Event \`${eD(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function eD(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function tD(e,{metadata:t,tunnel:n,dsn:r}){const a={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Mo(r)}},i=nD(e);return zi(a,[i])}function nD(e){return[{type:"user_report"},e]}class rD extends iA{constructor(t){const n=Kt.SENTRY_SDK_SOURCE||LP();nT(t,"browser",["browser"],n),super(t),t.sendClientReports&&Kt.document&&Kt.document.addEventListener("visibilitychange",()=>{Kt.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return J6(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Z6(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){ys&&be.warn("SDK not enabled, will not capture user feedback.");return}const n=tD(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){ys&&be.log("No outcomes to send");return}if(!this._dsn){ys&&be.log("No dsn provided, will not send outcomes");return}ys&&be.log("Sending outcomes:",t);const n=tM(t,this._options.tunnel&&Mo(this._dsn));this._sendEnvelope(n)}}let Yc;function sD(){if(Yc)return Yc;if(B0(Kt.fetch))return Yc=Kt.fetch.bind(Kt);const e=Kt.document;let t=Kt.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){ys&&be.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return Yc=t.bind(Kt)}function aD(){Yc=void 0}function iD(e,t=sD()){let n=0,r=0;function a(i){const o=i.body.length;n+=o,r++;const l={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,l).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return aD(),n-=o,r--,eb(c)}}return tT(e,a)}const oD=4;function lD(e){function t(n){return new Qr((r,a)=>{const i=new XMLHttpRequest;i.onerror=a,i.onreadystatechange=()=>{i.readyState===oD&&r({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",e.url);for(const o in e.headers)Object.prototype.hasOwnProperty.call(e.headers,o)&&i.setRequestHeader(o,e.headers[o]);i.send(n.body)})}return tT(e,t)}const Fm="?",cD=30,dD=40,uD=50;function hb(e,t,n,r){const a={filename:e,function:t,in_app:!0};return n!==void 0&&(a.lineno=n),r!==void 0&&(a.colno=r),a}const fD=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,hD=/\((\S*)(?::(\d+))(?::(\d+))\)/,mD=e=>{const t=fD.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const i=hD.exec(t[2]);i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3])}const[r,a]=gT(t[1]||Fm,t[2]);return hb(a,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},pD=[cD,mD],gD=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,xD=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,yD=e=>{const t=gD.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=xD.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],a=t[1]||Fm;return[a,r]=gT(a,r),hb(r,a,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},bD=[uD,yD],vD=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,wD=e=>{const t=vD.exec(e);return t?hb(t[2],t[1]||Fm,+t[3],t[4]?+t[4]:void 0):void 0},kD=[dD,wD],SD=[pD,bD,kD],jD=xC(...SD),gT=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Fm,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},bf=1024,ND="Breadcrumbs",CD=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:ND,setupOnce(){},setup(n){t.console&&hP(RD(n)),t.dom&&vC(_D(n,t.dom)),t.xhr&&Qy(LD(n)),t.fetch&&Zy(ID(n)),t.history&&_m(PD(n)),t.sentry&&n.on&&n.on("beforeSendEvent",ED(n))}}},TD=CD;function ED(e){return function(n){en()===e&&Mi({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:si(n)},{event:n})}}function _D(e,t){return function(r){if(en()!==e)return;let a,i,o=typeof t=="object"?t.serializeAttribute:void 0,l=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;l&&l>bf&&(ys&&be.warn(`\`dom.maxStringLength\` cannot exceed ${bf}, but a value of ${l} was configured. Sentry will use ${bf} instead.`),l=bf),typeof o=="string"&&(o=[o]);try{const d=r.event,u=MD(d)?d.target:d;a=Pi(u,{keyAttrs:o,maxStringLength:l}),i=uC(u)}catch{a="<unknown>"}if(a.length===0)return;const c={category:`ui.${r.name}`,message:a};i&&(c.data={"ui.component_name":i}),Mi(c,{event:r.event,name:r.name,global:r.global})}}function RD(e){return function(n){if(en()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:zP(n.level),message:L1(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${L1(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Mi(r,{input:n.args,level:n.level})}}function LD(e){return function(n){if(en()!==e)return;const{startTimestamp:r,endTimestamp:a}=n,i=n.xhr[di];if(!r||!a||!i)return;const{method:o,url:l,status_code:c,body:d}=i,u={method:o,url:l,status_code:c},f={xhr:n.xhr,input:d,startTimestamp:r,endTimestamp:a};Mi({category:"xhr",data:u,type:"http"},f)}}function ID(e){return function(n){if(en()!==e)return;const{startTimestamp:r,endTimestamp:a}=n;if(a&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:a};Mi({category:"fetch",data:i,level:"error",type:"http"},o)}else{const i=n.response,o={...n.fetchData,status_code:i&&i.status},l={input:n.args,response:i,startTimestamp:r,endTimestamp:a};Mi({category:"fetch",data:o,type:"http"},l)}}}function PD(e){return function(n){if(en()!==e)return;let r=n.from,a=n.to;const i=yo(Kt.location.href);let o=r?yo(r):void 0;const l=yo(a);(!o||!o.path)&&(o=i),i.protocol===l.protocol&&i.host===l.host&&(a=l.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),Mi({category:"navigation",data:{from:r,to:a}})}}function MD(e){return!!e&&!!e.target}const AD="Dedupe",DD=()=>{let e;return{name:AD,setupOnce(){},processEvent(t){if(t.type)return t;try{if(BD(t,e))return ys&&be.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},FD=DD;function BD(e,t){return t?!!(OD(e,t)||UD(e,t)):!1}function OD(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!yT(e,t)||!xT(e,t))}function UD(e,t){const n=yk(t),r=yk(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!yT(e,t)||!xT(e,t))}function xT(e,t){let n=bk(e),r=bk(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let a=0;a<r.length;a++){const i=r[a],o=n[a];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function yT(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function yk(e){return e.exception&&e.exception.values&&e.exception.values[0]}function bk(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const zD="GlobalHandlers",$D=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:zD,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(WD(n),vk("onerror")),t.onunhandledrejection&&(VD(n),vk("onunhandledrejection"))}}},HD=$D;function WD(e){kC(t=>{const{stackParser:n,attachStacktrace:r}=vT();if(en()!==e||mT())return;const{msg:a,url:i,line:o,column:l,error:c}=t,d=c===void 0&&la(a)?YD(a,i,o,l):bT(fb(n,c||a,void 0,r,!1),i,o,l);d.level="error",AC(d,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function VD(e){SC(t=>{const{stackParser:n,attachStacktrace:r}=vT();if(en()!==e||mT())return;const a=GD(t),i=qy(a)?KD(a):fb(n,a,void 0,r,!0);i.level="error",AC(i,{originalException:a,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function GD(e){if(qy(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return e}function KD(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function YD(e,t,n,r){const a=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=Ky(e)?e.message:e,o="Error";const l=i.match(a);return l&&(o=l[1],i=l[2]),bT({exception:{values:[{type:o,value:i}]}},t,n,r)}function bT(e,t,n,r){const a=e.exception=e.exception||{},i=a.values=a.values||[],o=i[0]=i[0]||{},l=o.stacktrace=o.stacktrace||{},c=l.frames=l.frames||[],d=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,f=la(t)&&t.length>0?t:eP();return c.length===0&&c.push({colno:d,filename:f,function:"?",in_app:!0,lineno:u}),e}function vk(e){ys&&be.log(`Global Handler attached: ${e}`)}function vT(){const e=en();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const qD="HttpContext",XD=()=>({name:qD,setupOnce(){},preprocessEvent(e){if(!Kt.navigator&&!Kt.location&&!Kt.document)return;const t=e.request&&e.request.url||Kt.location&&Kt.location.href,{referrer:n}=Kt.document||{},{userAgent:r}=Kt.navigator||{},a={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:a};e.request=i}}),JD=XD,ZD="cause",QD=5,eF="LinkedErrors",tF=(e={})=>{const t=e.limit||QD,n=e.key||ZD;return{name:eF,setupOnce(){},preprocessEvent(r,a,i){const o=i.getOptions();XI(pT,o.stackParser,o.maxValueLength,n,t,r,a)}}},nF=tF,rF=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],sF="TryCatch",aF=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:sF,setupOnce(){t.setTimeout&&ir(Kt,"setTimeout",wk),t.setInterval&&ir(Kt,"setInterval",wk),t.requestAnimationFrame&&ir(Kt,"requestAnimationFrame",oF),t.XMLHttpRequest&&"XMLHttpRequest"in Kt&&ir(XMLHttpRequest.prototype,"send",lF);const n=t.eventTarget;n&&(Array.isArray(n)?n:rF).forEach(cF)}}},iF=aF;function wk(e){return function(...t){const n=t[0];return t[0]=Gl(n,{mechanism:{data:{function:Fa(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function oF(e){return function(t){return e.apply(this,[Gl(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Fa(e)},handled:!1,type:"instrument"}})])}}function lF(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(a=>{a in n&&typeof n[a]=="function"&&ir(n,a,function(i){const o={mechanism:{data:{function:a,handler:Fa(i)},handled:!1,type:"instrument"}},l=Jy(i);return l&&(o.mechanism.data.handler=Fa(l)),Gl(i,o)})}),e.apply(this,t)}}function cF(e){const t=Kt,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(ir(n,"addEventListener",function(r){return function(a,i,o){try{typeof i.handleEvent=="function"&&(i.handleEvent=Gl(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Fa(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[a,Gl(i,{mechanism:{data:{function:"addEventListener",handler:Fa(i),target:e},handled:!1,type:"instrument"}}),o])}}),ir(n,"removeEventListener",function(r){return function(a,i,o){const l=i;try{const c=l&&l.__sentry_wrapped__;c&&r.call(this,a,c,o)}catch{}return r.call(this,a,l,o)}}))}const dF=[jA(),DA(),iF(),TD(),HD(),nF(),FD(),JD()];function uF(e){return[...dF]}function fF(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=uF()),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),Kt.SENTRY_RELEASE&&Kt.SENTRY_RELEASE.id&&(e.release=Kt.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t={...e,stackParser:uP(e.stackParser||jD),integrations:eA(e),transport:e.transport||(wC()?iD:lD)};dA(rD,t),e.autoSessionTracking&&hF()}const kk=(e={},t=gr())=>{if(!Kt.document){ys&&be.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=t.getStackTop(),a=e.dsn||n&&n.getDsn();if(!a){ys&&be.error("DSN not configured for showReportDialog call");return}r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const i=Kt.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=ZM(a,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:o}=e;if(o){const c=d=>{if(d.data==="__sentry_reportdialog_closed__")try{o()}finally{Kt.removeEventListener("message",c)}};Kt.addEventListener("message",c)}const l=Kt.document.head||Kt.document.body;l?l.appendChild(i):ys&&be.error("Not injecting report dialog. No injection point found in HTML")};function hF(){if(typeof Kt.document>"u"){ys&&be.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}X1({ignoreDuration:!0}),J1(),_m(({from:e,to:t})=>{e!==void 0&&e!==t&&(X1({ignoreDuration:!0}),J1())})}const yn=Ht,mb="sentryReplaySession",mF="replay_event",pb="Unable to send Replay",pF=3e5,gF=9e5,xF=5e3,yF=5500,bF=6e4,vF=5e3,wF=3,Sk=15e4,vf=5e3,kF=3e3,SF=300,gb=2e7,jF=4999,NF=15e3,jk=36e5;function CF(e,t){return e??t()}function _h(e){let t,n=e[0],r=1;for(;r<e.length;){const a=e[r],i=e[r+1];if(r+=2,(a==="optionalAccess"||a==="optionalCall")&&n==null)return;a==="access"||a==="optionalAccess"?(t=n,n=i(n)):(a==="call"||a==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}var nr;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(nr||(nr={}));function TF(e){return e.nodeType===e.ELEMENT_NODE}function cd(e){const t=_h([e,"optionalAccess",n=>n.host]);return _h([t,"optionalAccess",n=>n.shadowRoot])===e}function dd(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function EF(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function _F(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Rh(e){try{const t=e.rules||e.cssRules;return t?EF(Array.from(t,wT).join("")):null}catch{return null}}function wT(e){let t;if(LF(e))try{t=Rh(e.styleSheet)||_F(e)}catch{}else if(IF(e)&&e.selectorText.includes(":"))return RF(e.cssText);return t||e.cssText}function RF(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function LF(e){return"styleSheet"in e}function IF(e){return"selectorText"in e}class kT{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;const n=_h([this,"access",r=>r.getMeta,"call",r=>r(t),"optionalAccess",r=>r.id]);return CF(n,()=>-1)}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const a=this.nodeMetaMap.get(r);a&&this.nodeMetaMap.set(n,a)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function PF(){return new kT}function Bm({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Ud({isMasked:e,element:t,value:n,maskInputFn:r}){let a=n||"";return e?(r&&(a=r(a,t)),"*".repeat(a.length)):a}function Kl(e){return e.toLowerCase()}function Z0(e){return e.toUpperCase()}const Nk="__rrweb_original__";function MF(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let a=0;a<e.height;a+=n){const i=t.getImageData,o=Nk in i?i[Nk]:i;if(new Uint32Array(o.call(t,r,a,Math.min(n,e.width-r),Math.min(n,e.height-a)).data.buffer).some(c=>c!==0))return!1}return!0}function xb(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Kl(t):null}function Lh(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}let AF=1;const DF=new RegExp("[^a-z0-9-_:]"),zd=-2;function yb(){return AF++}function FF(e){if(e instanceof HTMLFormElement)return"form";const t=Kl(e.tagName);return DF.test(t)?"div":t}function BF(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Vo,Ck;const OF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,UF=/^(?:[a-z+]+:)?\/\//i,zF=/^www\..*/i,$F=/^(data:)([^,]*),(.*)/i;function Ih(e,t){return(e||"").replace(OF,(n,r,a,i,o,l)=>{const c=a||o||l,d=r||i||"";if(!c)return n;if(UF.test(c)||zF.test(c))return`url(${d}${c}${d})`;if($F.test(c))return`url(${d}${c}${d})`;if(c[0]==="/")return`url(${d}${BF(t)+c}${d})`;const u=t.split("/"),f=c.split("/");u.pop();for(const h of f)h!=="."&&(h===".."?u.pop():u.push(h));return`url(${d}${u.join("/")}${d})`})}const HF=/^[^ \t\n\r\u000c]+/,WF=/^[, \t\n\r\u000c]+/;function VF(e,t){if(t.trim()==="")return t;let n=0;function r(i){let o;const l=i.exec(t.substring(n));return l?(o=l[0],n+=o.length,o):""}const a=[];for(;r(WF),!(n>=t.length);){let i=r(HF);if(i.slice(-1)===",")i=ll(e,i.substring(0,i.length-1)),a.push(i);else{let o="";i=ll(e,i);let l=!1;for(;;){const c=t.charAt(n);if(c===""){a.push((i+o).trim());break}else if(l)c===")"&&(l=!1);else if(c===","){n+=1,a.push((i+o).trim());break}else c==="("&&(l=!0);o+=c,n+=1}}}return a.join(", ")}function ll(e,t){if(!t||t.trim()==="")return t;const n=e.createElement("a");return n.href=t,n.href}function GF(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function bb(){const e=document.createElement("a");return e.href="",e.href}function ST(e,t,n,r,a,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?ll(e,r):n==="srcset"?VF(e,r):n==="style"?Ih(r,bb()):t==="object"&&n==="data"?ll(e,r):typeof i=="function"?i(n,r,a):r)}function jT(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function KF(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let a=e.classList.length;a--;){const i=e.classList[a];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function YF(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function co(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:co(e.parentNode,t,n,r+1)}function cl(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(YF(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Yl(e,t,n,r,a,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const d=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(d))return!0}let l=-1,c=-1;if(i){if(c=co(o,cl(r,a)),c<0)return!0;l=co(o,cl(t,n),c>=0?c:1/0)}else{if(l=co(o,cl(t,n)),l<0)return!1;c=co(o,cl(r,a),l>=0?l:1/0)}return l>=0?c>=0?l<=c:!0:c>=0?!1:!!i}catch{}return!!i}function qF(e,t,n){const r=e.contentWindow;if(!r)return;let a=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const l=setTimeout(()=>{a||(t(),a=!0)},n);e.addEventListener("load",()=>{clearTimeout(l),a=!0,t()});return}const o="about:blank";if(r.location.href!==o||e.src===o||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function XF(e,t,n){let r=!1,a;try{a=e.sheet}catch{return}if(a)return;const i=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(i),r=!0,t()})}function JF(e,t){const{doc:n,mirror:r,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskAttributeFn:c,maskTextClass:d,unmaskTextClass:u,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:g,maskInputOptions:y={},maskTextFn:p,maskInputFn:S,dataURLOptions:x={},inlineImages:v,recordCanvas:b,keepIframeSrcFn:w,newlyAddedElement:N=!1}=t,R=ZF(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:nr.Document,childNodes:[],compatMode:e.compatMode}:{type:nr.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:nr.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:R};case e.ELEMENT_NODE:return e8(e,{doc:n,blockClass:a,blockSelector:i,unblockSelector:o,inlineStylesheet:g,maskAttributeFn:c,maskInputOptions:y,maskInputFn:S,dataURLOptions:x,inlineImages:v,recordCanvas:b,keepIframeSrcFn:w,newlyAddedElement:N,rootId:R,maskAllText:l,maskTextClass:d,unmaskTextClass:u,maskTextSelector:f,unmaskTextSelector:h});case e.TEXT_NODE:return QF(e,{maskAllText:l,maskTextClass:d,unmaskTextClass:u,maskTextSelector:f,unmaskTextSelector:h,maskTextFn:p,maskInputOptions:y,maskInputFn:S,rootId:R});case e.CDATA_SECTION_NODE:return{type:nr.CDATA,textContent:"",rootId:R};case e.COMMENT_NODE:return{type:nr.Comment,textContent:e.textContent||"",rootId:R};default:return!1}}function ZF(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function QF(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:a,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:l,maskInputOptions:c,maskInputFn:d,rootId:u}=t,f=e.parentNode&&e.parentNode.tagName;let h=e.textContent;const g=f==="STYLE"?!0:void 0,y=f==="SCRIPT"?!0:void 0,p=f==="TEXTAREA"?!0:void 0;if(g&&h){try{e.nextSibling||e.previousSibling||_h([e,"access",x=>x.parentNode,"access",x=>x.sheet,"optionalAccess",x=>x.cssRules])&&(h=Rh(e.parentNode.sheet))}catch(x){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${x}`,e)}h=Ih(h,bb())}y&&(h="SCRIPT_PLACEHOLDER");const S=Yl(e,r,i,a,o,n);if(!g&&!y&&!p&&h&&S&&(h=l?l(h,e.parentElement):h.replace(/[\S]/g,"*")),p&&h&&(c.textarea||S)&&(h=d?d(h,e.parentNode):h.replace(/[\S]/g,"*")),f==="OPTION"&&h){const x=Bm({type:null,tagName:f,maskInputOptions:c});h=Ud({isMasked:Yl(e,r,i,a,o,x),element:e,value:h,maskInputFn:d})}return{type:nr.Text,textContent:h||"",isStyle:g,rootId:u}}function e8(e,t){const{doc:n,blockClass:r,blockSelector:a,unblockSelector:i,inlineStylesheet:o,maskInputOptions:l={},maskAttributeFn:c,maskInputFn:d,dataURLOptions:u={},inlineImages:f,recordCanvas:h,keepIframeSrcFn:g,newlyAddedElement:y=!1,rootId:p,maskAllText:S,maskTextClass:x,unmaskTextClass:v,maskTextSelector:b,unmaskTextSelector:w}=t,N=KF(e,r,a,i),R=FF(e);let C={};const _=e.attributes.length;for(let T=0;T<_;T++){const E=e.attributes[T];E.name&&!jT(R,E.name,E.value)&&(C[E.name]=ST(n,R,Kl(E.name),E.value,e,c))}if(R==="link"&&o){const T=Array.from(n.styleSheets).find(B=>B.href===e.href);let E=null;T&&(E=Rh(T)),E&&(delete C.rel,delete C.href,C._cssText=Ih(E,T.href))}if(R==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const T=Rh(e.sheet);T&&(C._cssText=Ih(T,bb()))}if(R==="input"||R==="textarea"||R==="select"||R==="option"){const T=e,E=xb(T),B=Lh(T,Z0(R),E),H=T.checked;if(E!=="submit"&&E!=="button"&&B){const q=Yl(T,x,b,v,w,Bm({type:E,tagName:Z0(R),maskInputOptions:l}));C.value=Ud({isMasked:q,element:T,value:B,maskInputFn:d})}H&&(C.checked=H)}if(R==="option"&&(e.selected&&!l.select?C.selected=!0:delete C.selected),R==="canvas"&&h){if(e.__context==="2d")MF(e)||(C.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const T=e.toDataURL(u.type,u.quality),E=document.createElement("canvas");E.width=e.width,E.height=e.height;const B=E.toDataURL(u.type,u.quality);T!==B&&(C.rr_dataURL=T)}}if(R==="img"&&f){Vo||(Vo=n.createElement("canvas"),Ck=Vo.getContext("2d"));const T=e,E=T.crossOrigin;T.crossOrigin="anonymous";const B=()=>{T.removeEventListener("load",B);try{Vo.width=T.naturalWidth,Vo.height=T.naturalHeight,Ck.drawImage(T,0,0),C.rr_dataURL=Vo.toDataURL(u.type,u.quality)}catch(H){console.warn(`Cannot inline img src=${T.currentSrc}! Error: ${H}`)}E?C.crossOrigin=E:T.removeAttribute("crossorigin")};T.complete&&T.naturalWidth!==0?B():T.addEventListener("load",B)}if((R==="audio"||R==="video")&&(C.rr_mediaState=e.paused?"paused":"played",C.rr_mediaCurrentTime=e.currentTime),y||(e.scrollLeft&&(C.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(C.rr_scrollTop=e.scrollTop)),N){const{width:T,height:E}=e.getBoundingClientRect();C={class:C.class,rr_width:`${T}px`,rr_height:`${E}px`}}R==="iframe"&&!g(C.src)&&(e.contentDocument||(C.rr_src=C.src),delete C.src);let W;try{customElements.get(R)&&(W=!0)}catch{}return{type:nr.Element,tagName:R,attributes:C,childNodes:[],isSVG:GF(e)||void 0,needBlock:N,rootId:p,isCustom:W}}function gn(e){return e==null?"":e.toLowerCase()}function t8(e,t){if(t.comment&&e.type===nr.Comment)return!0;if(e.type===nr.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(gn(e.attributes.name).match(/^msapplication-tile(image|color)$/)||gn(e.attributes.name)==="application-name"||gn(e.attributes.rel)==="icon"||gn(e.attributes.rel)==="apple-touch-icon"||gn(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&gn(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(gn(e.attributes.property).match(/^(og|twitter|fb):/)||gn(e.attributes.name).match(/^(og|twitter):/)||gn(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(gn(e.attributes.name)==="robots"||gn(e.attributes.name)==="googlebot"||gn(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(gn(e.attributes.name)==="author"||gn(e.attributes.name)==="generator"||gn(e.attributes.name)==="framework"||gn(e.attributes.name)==="publisher"||gn(e.attributes.name)==="progid"||gn(e.attributes.property).match(/^article:/)||gn(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(gn(e.attributes.name)==="google-site-verification"||gn(e.attributes.name)==="yandex-verification"||gn(e.attributes.name)==="csrf-token"||gn(e.attributes.name)==="p:domain_verify"||gn(e.attributes.name)==="verify-v1"||gn(e.attributes.name)==="verification"||gn(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function dl(e,t){const{doc:n,mirror:r,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:f,skipChild:h=!1,inlineStylesheet:g=!0,maskInputOptions:y={},maskAttributeFn:p,maskTextFn:S,maskInputFn:x,slimDOMOptions:v,dataURLOptions:b={},inlineImages:w=!1,recordCanvas:N=!1,onSerialize:R,onIframeLoad:C,iframeLoadTimeout:_=5e3,onStylesheetLoad:W,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:E=()=>!1,newlyAddedElement:B=!1}=t;let{preserveWhiteSpace:H=!0}=t;const q=JF(e,{doc:n,mirror:r,blockClass:a,blockSelector:i,maskAllText:l,unblockSelector:o,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:f,inlineStylesheet:g,maskInputOptions:y,maskAttributeFn:p,maskTextFn:S,maskInputFn:x,dataURLOptions:b,inlineImages:w,recordCanvas:N,keepIframeSrcFn:E,newlyAddedElement:B});if(!q)return console.warn(e,"not serialized"),null;let ie;r.hasNode(e)?ie=r.getId(e):t8(q,v)||!H&&q.type===nr.Text&&!q.isStyle&&!q.textContent.replace(/^\s+|\s+$/gm,"").length?ie=zd:ie=yb();const X=Object.assign(q,{id:ie});if(r.add(e,X),ie===zd)return null;R&&R(e);let V=!h;if(X.type===nr.Element){V=V&&!X.needBlock,delete X.needBlock;const z=e.shadowRoot;z&&dd(z)&&(X.isShadowHost=!0)}if((X.type===nr.Document||X.type===nr.Element)&&V){v.headWhitespace&&X.type===nr.Element&&X.tagName==="head"&&(H=!1);const z={doc:n,mirror:r,blockClass:a,blockSelector:i,maskAllText:l,unblockSelector:o,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:f,skipChild:h,inlineStylesheet:g,maskInputOptions:y,maskAttributeFn:p,maskTextFn:S,maskInputFn:x,slimDOMOptions:v,dataURLOptions:b,inlineImages:w,recordCanvas:N,preserveWhiteSpace:H,onSerialize:R,onIframeLoad:C,iframeLoadTimeout:_,onStylesheetLoad:W,stylesheetLoadTimeout:T,keepIframeSrcFn:E};for(const J of Array.from(e.childNodes)){const U=dl(J,z);U&&X.childNodes.push(U)}if(TF(e)&&e.shadowRoot)for(const J of Array.from(e.shadowRoot.childNodes)){const U=dl(J,z);U&&(dd(e.shadowRoot)&&(U.isShadow=!0),X.childNodes.push(U))}}return e.parentNode&&cd(e.parentNode)&&dd(e.parentNode)&&(X.isShadow=!0),X.type===nr.Element&&X.tagName==="iframe"&&qF(e,()=>{const z=e.contentDocument;if(z&&C){const J=dl(z,{doc:z,mirror:r,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:g,maskInputOptions:y,maskAttributeFn:p,maskTextFn:S,maskInputFn:x,slimDOMOptions:v,dataURLOptions:b,inlineImages:w,recordCanvas:N,preserveWhiteSpace:H,onSerialize:R,onIframeLoad:C,iframeLoadTimeout:_,onStylesheetLoad:W,stylesheetLoadTimeout:T,keepIframeSrcFn:E});J&&C(e,J)}},_),X.type===nr.Element&&X.tagName==="link"&&X.attributes.rel==="stylesheet"&&XF(e,()=>{if(W){const z=dl(e,{doc:n,mirror:r,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:u,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:g,maskInputOptions:y,maskAttributeFn:p,maskTextFn:S,maskInputFn:x,slimDOMOptions:v,dataURLOptions:b,inlineImages:w,recordCanvas:N,preserveWhiteSpace:H,onSerialize:R,onIframeLoad:C,iframeLoadTimeout:_,onStylesheetLoad:W,stylesheetLoadTimeout:T,keepIframeSrcFn:E});z&&W(e,z)}},T),X}function n8(e,t){const{mirror:n=new kT,blockClass:r="rr-block",blockSelector:a=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:l="rr-mask",unmaskTextClass:c=null,maskTextSelector:d=null,unmaskTextSelector:u=null,inlineStylesheet:f=!0,inlineImages:h=!1,recordCanvas:g=!1,maskAllInputs:y=!1,maskAttributeFn:p,maskTextFn:S,maskInputFn:x,slimDOM:v=!1,dataURLOptions:b,preserveWhiteSpace:w,onSerialize:N,onIframeLoad:R,iframeLoadTimeout:C,onStylesheetLoad:_,stylesheetLoadTimeout:W,keepIframeSrcFn:T=()=>!1}=t||{};return dl(e,{doc:e,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,maskAllText:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:f,maskInputOptions:y===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:y===!1?{}:y,maskAttributeFn:p,maskTextFn:S,maskInputFn:x,slimDOMOptions:v===!0||v==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:v==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:v===!1?{}:v,dataURLOptions:b,inlineImages:h,recordCanvas:g,preserveWhiteSpace:w,onSerialize:N,onIframeLoad:R,iframeLoadTimeout:C,onStylesheetLoad:_,stylesheetLoadTimeout:W,keepIframeSrcFn:T,newlyAddedElement:!1})}function Za(e){let t,n=e[0],r=1;for(;r<e.length;){const a=e[r],i=e[r+1];if(r+=2,(a==="optionalAccess"||a==="optionalCall")&&n==null)return;a==="access"||a==="optionalAccess"?(t=n,n=i(n)):(a==="call"||a==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}function Rr(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Ko=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Tk={map:{},getId(){return console.error(Ko),-1},getNode(){return console.error(Ko),null},removeNodeFromMap(){console.error(Ko)},has(){return console.error(Ko),!1},reset(){console.error(Ko)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Tk=new Proxy(Tk,{get(e,t,n){return t==="map"&&console.error(Ko),Reflect.get(e,t,n)}}));function $d(e,t,n={}){let r=null,a=0;return function(...i){const o=Date.now();!a&&n.leading===!1&&(a=o);const l=t-(o-a),c=this;l<=0||l>t?(r&&(c8(r),r=null),a=o,e.apply(c,i)):!r&&n.trailing!==!1&&(r=Om(()=>{a=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},l))}}function NT(e,t,n,r,a=window){const i=a.Object.getOwnPropertyDescriptor(e,t);return a.Object.defineProperty(e,t,r?n:{set(o){Om(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>NT(e,t,i||{},!0)}function vb(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],a=n(r);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=a,()=>{e[t]=r}}catch{return()=>{}}}let Ph=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Ph=()=>new Date().getTime());function CT(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:Za([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||Za([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||Za([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:Za([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||Za([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||Za([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function TT(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ET(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function _T(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function Ms(e,t,n,r,a){if(!e)return!1;const i=_T(e);if(!i)return!1;const o=cl(t,n);if(!a){const d=r&&i.matches(r);return o(i)&&!d}const l=co(i,o);let c=-1;return l<0?!1:(r&&(c=co(i,cl(null,r))),l>-1&&c<0?!0:l<c)}function r8(e,t){return t.getId(e)!==-1}function ig(e,t){return t.getId(e)===zd}function RT(e,t){if(cd(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?RT(e.parentNode,t):!0:!0}function Q0(e){return!!e.changedTouches}function s8(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function LT(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function IT(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function ex(e){return!!Za([e,"optionalAccess",t=>t.shadowRoot])}class a8{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return aM(this.styleIDMap.get(t),()=>-1)}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function PT(e){let t=null;return Za([e,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function i8(e){let t=e,n;for(;n=PT(t);)t=n;return t}function o8(e){const t=e.ownerDocument;if(!t)return!1;const n=i8(e);return t.contains(n)}function MT(e){const t=e.ownerDocument;return t?t.contains(e)||o8(e):!1}const Ek={};function wb(e){const t=Ek[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(a)}catch{}return Ek[e]=r.bind(window)}function l8(...e){return wb("requestAnimationFrame")(...e)}function Om(...e){return wb("setTimeout")(...e)}function c8(...e){return wb("clearTimeout")(...e)}var Rt=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Rt||{}),Lt=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Lt||{}),Cr=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Cr||{}),ya=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ya||{});function d8(e){let t,n=e[0],r=1;for(;r<e.length;){const a=e[r],i=e[r+1];if(r+=2,(a==="optionalAccess"||a==="optionalCall")&&n==null)return;a==="access"||a==="optionalAccess"?(t=n,n=i(n)):(a==="call"||a==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}function _k(e){return"__ln"in e}class u8{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=d8([n,"optionalAccess",a=>a.next])||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&_k(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&_k(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Rk=(e,t)=>`${e}@${t}`;class f8{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new u8,a=c=>{let d=c,u=zd;for(;u===zd;)d=d&&d.nextSibling,u=d&&this.mirror.getId(d);return u},i=c=>{if(!c.parentNode||!MT(c))return;const d=cd(c.parentNode)?this.mirror.getId(PT(c)):this.mirror.getId(c.parentNode),u=a(c);if(d===-1||u===-1)return r.addNode(c);const f=dl(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:h=>{LT(h,this.mirror)&&this.iframeManager.addIframe(h),IT(h,this.mirror)&&this.stylesheetManager.trackLinkElement(h),ex(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(h,g)=>{this.iframeManager.attachIframe(h,g),this.shadowDomManager.observeAttachShadow(h)},onStylesheetLoad:(h,g)=>{this.stylesheetManager.attachLinkElement(h,g)}});f&&(t.push({parentId:d,nextId:u,node:f}),n.add(f.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Lk(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Ik(this.droppedSet,c)&&!Lk(this.removes,c,this.mirror)||Ik(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const d=this.mirror.getId(o.value.parentNode),u=a(o.value);d!==-1&&u!==-1&&(c=o)}if(!c){let d=r.tail;for(;d;){const u=d;if(d=d.previous,u){const f=this.mirror.getId(u.value.parentNode);if(a(u.value)===-1)continue;if(f!==-1){c=u;break}else{const g=u.value;if(g.parentNode&&g.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const y=g.parentNode.host;if(this.mirror.getId(y)!==-1){c=u;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const l={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:d}=c;if(typeof d.style=="string"){const u=JSON.stringify(c.styleDiff),f=JSON.stringify(c._unchangedStyles);u.length<d.style.length&&(u+f).split("var(").length===d.style.split("var(").length&&(d.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:d}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l))},this.processMutation=t=>{if(!ig(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!Ms(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Yl(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,_T(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,a=t.target.getAttribute(r);if(r==="value"){const o=xb(n),l=n.tagName;a=Lh(n,l,o);const c=Bm({maskInputOptions:this.maskInputOptions,tagName:l,type:o}),d=Yl(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);a=Ud({isMasked:d,element:n,value:a,maskInputFn:this.maskInputFn})}if(Ms(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||a===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(a))if(!n.contentDocument)r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!jT(n.tagName,r)&&(i.attributes[r]=ST(this.doc,Kl(n.tagName),Kl(r),a,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");t.oldValue&&o.setAttribute("style",t.oldValue);for(const l of Array.from(n.style)){const c=n.style.getPropertyValue(l),d=n.style.getPropertyPriority(l);c!==o.style.getPropertyValue(l)||d!==o.style.getPropertyPriority(l)?d===""?i.styleDiff[l]=c:i.styleDiff[l]=[c,d]:i._unchangedStyles[l]=[c,d]}for(const l of Array.from(o.style))n.style.getPropertyValue(l)===""&&(i.styleDiff[l]=!1)}break}case"childList":{if(Ms(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),a=cd(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ms(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ig(n,this.mirror)||!r8(n,this.mirror)||(this.addedSet.has(n)?(tx(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||RT(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Rk(r,a)]?tx(this.movedSet,n):this.removes.push({parentId:a,id:r,isShadow:cd(t.target)&&dd(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(ig(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Rk(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ms(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),ex(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function tx(e,t){e.delete(t),t.childNodes.forEach(n=>tx(e,n))}function Lk(e,t,n){return e.length===0?!1:AT(e,t,n)}function AT(e,t,n){const{parentNode:r}=t;if(!r)return!1;const a=n.getId(r);return e.some(i=>i.id===a)?!0:AT(e,r,n)}function Ik(e,t){return e.size===0?!1:DT(e,t)}function DT(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:DT(e,n):!1}let ud;function h8(e){ud=e}function m8(){ud=void 0}const $t=e=>ud?(...n)=>{try{return e(...n)}catch(r){if(ud&&ud(r)===!0)return()=>{};throw r}}:e;function Qs(e){let t,n=e[0],r=1;for(;r<e.length;){const a=e[r],i=e[r+1];if(r+=2,(a==="optionalAccess"||a==="optionalCall")&&n==null)return;a==="access"||a==="optionalAccess"?(t=n,n=i(n)):(a==="call"||a==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}const ul=[];function Su(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function FT(e,t){const n=new f8;ul.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const a=Qs([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);a&&window[a]&&(r=window[a]);const i=new r($t(o=>{e.onMutation&&e.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function p8({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const a=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],l;const c=$d($t(f=>{const h=Date.now()-l;e(o.map(g=>(g.timeOffset-=h,g)),f),o=[],l=null}),i),d=$t($d($t(f=>{const h=Su(f),{clientX:g,clientY:y}=Q0(f)?f.changedTouches[0]:f;l||(l=Ph()),o.push({x:g,y,id:r.getId(h),timeOffset:Ph()-l}),c(typeof DragEvent<"u"&&f instanceof DragEvent?Lt.Drag:f instanceof MouseEvent?Lt.MouseMove:Lt.TouchMove)}),a,{trailing:!1})),u=[Rr("mousemove",d,n),Rr("touchmove",d,n),Rr("drag",d,n)];return $t(()=>{u.forEach(f=>f())})}function g8({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const l=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let d=null;const u=f=>h=>{const g=Su(h);if(Ms(g,r,a,i,!0))return;let y=null,p=f;if("pointerType"in h){switch(h.pointerType){case"mouse":y=ya.Mouse;break;case"touch":y=ya.Touch;break;case"pen":y=ya.Pen;break}y===ya.Touch?Cr[f]===Cr.MouseDown?p="TouchStart":Cr[f]===Cr.MouseUp&&(p="TouchEnd"):ya.Pen}else Q0(h)&&(y=ya.Touch);y!==null?(d=y,(p.startsWith("Touch")&&y===ya.Touch||p.startsWith("Mouse")&&y===ya.Mouse)&&(y=null)):Cr[f]===Cr.Click&&(y=d,d=null);const S=Q0(h)?h.changedTouches[0]:h;if(!S)return;const x=n.getId(g),{clientX:v,clientY:b}=S;$t(e)({type:Cr[p],id:x,x:v,y:b,...y!==null&&{pointerType:y}})};return Object.keys(Cr).filter(f=>Number.isNaN(Number(f))&&!f.endsWith("_Departed")&&l[f]!==!1).forEach(f=>{let h=Kl(f);const g=u(f);if(window.PointerEvent)switch(Cr[f]){case Cr.MouseDown:case Cr.MouseUp:h=h.replace("mouse","pointer");break;case Cr.TouchStart:case Cr.TouchEnd:return}c.push(Rr(h,g,t))}),$t(()=>{c.forEach(f=>f())})}function BT({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,sampling:o}){const l=$t($d($t(c=>{const d=Su(c);if(!d||Ms(d,r,a,i,!0))return;const u=n.getId(d);if(d===t&&t.defaultView){const f=CT(t.defaultView);e({id:u,x:f.left,y:f.top})}else e({id:u,x:d.scrollLeft,y:d.scrollTop})}),o.scroll||100));return Rr("scroll",l,t)}function x8({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const a=$t($d($t(()=>{const i=TT(),o=ET();(n!==i||r!==o)&&(e({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return Rr("resize",a,t)}const y8=["INPUT","TEXTAREA","SELECT"],Pk=new WeakMap;function b8({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,ignoreClass:o,ignoreSelector:l,maskInputOptions:c,maskInputFn:d,sampling:u,userTriggeredOnInput:f,maskTextClass:h,unmaskTextClass:g,maskTextSelector:y,unmaskTextSelector:p}){function S(C){let _=Su(C);const W=C.isTrusted,T=_&&Z0(_.tagName);if(T==="OPTION"&&(_=_.parentElement),!_||!T||y8.indexOf(T)<0||Ms(_,r,a,i,!0))return;const E=_;if(E.classList.contains(o)||l&&E.matches(l))return;const B=xb(_);let H=Lh(E,T,B),q=!1;const ie=Bm({maskInputOptions:c,tagName:T,type:B}),X=Yl(_,h,y,g,p,ie);(B==="radio"||B==="checkbox")&&(q=_.checked),H=Ud({isMasked:X,element:_,value:H,maskInputFn:d}),x(_,f?{text:H,isChecked:q,userTriggered:W}:{text:H,isChecked:q});const V=_.name;B==="radio"&&V&&q&&t.querySelectorAll(`input[type="radio"][name="${V}"]`).forEach(z=>{if(z!==_){const J=Ud({isMasked:X,element:z,value:Lh(z,T,B),maskInputFn:d});x(z,f?{text:J,isChecked:!q,userTriggered:!1}:{text:J,isChecked:!q})}})}function x(C,_){const W=Pk.get(C);if(!W||W.text!==_.text||W.isChecked!==_.isChecked){Pk.set(C,_);const T=n.getId(C);$t(e)({..._,id:T})}}const b=(u.input==="last"?["change"]:["input","change"]).map(C=>Rr(C,$t(S),t)),w=t.defaultView;if(!w)return()=>{b.forEach(C=>C())};const N=w.Object.getOwnPropertyDescriptor(w.HTMLInputElement.prototype,"value"),R=[[w.HTMLInputElement.prototype,"value"],[w.HTMLInputElement.prototype,"checked"],[w.HTMLSelectElement.prototype,"value"],[w.HTMLTextAreaElement.prototype,"value"],[w.HTMLSelectElement.prototype,"selectedIndex"],[w.HTMLOptionElement.prototype,"selected"]];return N&&N.set&&b.push(...R.map(C=>NT(C[0],C[1],{set(){$t(S)({target:this,isTrusted:!1})}},!1,w))),$t(()=>{b.forEach(C=>C())})}function Mh(e){const t=[];function n(r,a){if(wf("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||wf("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||wf("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||wf("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);a.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);a.unshift(o)}return a}return n(e,t)}function Qa(e,t,n){let r,a;return e?(e.ownerNode?r=t.getId(e.ownerNode):a=n.getId(e),{styleId:a,id:r}):{}}function v8({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const a=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:$t((u,f,h)=>{const[g,y]=h,{id:p,styleId:S}=Qa(f,t,n.styleMirror);return(p&&p!==-1||S&&S!==-1)&&e({id:p,styleId:S,adds:[{rule:g,index:y}]}),u.apply(f,h)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:$t((u,f,h)=>{const[g]=h,{id:y,styleId:p}=Qa(f,t,n.styleMirror);return(y&&y!==-1||p&&p!==-1)&&e({id:y,styleId:p,removes:[{index:g}]}),u.apply(f,h)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:$t((u,f,h)=>{const[g]=h,{id:y,styleId:p}=Qa(f,t,n.styleMirror);return(y&&y!==-1||p&&p!==-1)&&e({id:y,styleId:p,replace:g}),u.apply(f,h)})}));let l;r.CSSStyleSheet.prototype.replaceSync&&(l=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:$t((u,f,h)=>{const[g]=h,{id:y,styleId:p}=Qa(f,t,n.styleMirror);return(y&&y!==-1||p&&p!==-1)&&e({id:y,styleId:p,replaceSync:g}),u.apply(f,h)})}));const c={};kf("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(kf("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),kf("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),kf("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const d={};return Object.entries(c).forEach(([u,f])=>{d[u]={insertRule:f.prototype.insertRule,deleteRule:f.prototype.deleteRule},f.prototype.insertRule=new Proxy(d[u].insertRule,{apply:$t((h,g,y)=>{const[p,S]=y,{id:x,styleId:v}=Qa(g.parentStyleSheet,t,n.styleMirror);return(x&&x!==-1||v&&v!==-1)&&e({id:x,styleId:v,adds:[{rule:p,index:[...Mh(g),S||0]}]}),h.apply(g,y)})}),f.prototype.deleteRule=new Proxy(d[u].deleteRule,{apply:$t((h,g,y)=>{const[p]=y,{id:S,styleId:x}=Qa(g.parentStyleSheet,t,n.styleMirror);return(S&&S!==-1||x&&x!==-1)&&e({id:S,styleId:x,removes:[{index:[...Mh(g),p]}]}),h.apply(g,y)})})}),$t(()=>{r.CSSStyleSheet.prototype.insertRule=a,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),l&&(r.CSSStyleSheet.prototype.replaceSync=l),Object.entries(c).forEach(([u,f])=>{f.prototype.insertRule=d[u].insertRule,f.prototype.deleteRule=d[u].deleteRule})})}function OT({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const a=n.nodeName==="#document"?Qs([n,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]):Qs([n,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),i=Qs([a,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(Qs([a,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!a||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Qs([i,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const l=Qs([i,"access",c=>c.set,"optionalAccess",c=>c.call,"call",c=>c(this,o)]);if(r!==null&&r!==-1)try{t.adoptStyleSheets(o,r)}catch{}return l}}),$t(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function w8({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:a}){const i=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:$t((l,c,d)=>{const[u,f,h]=d;if(n.has(u))return i.apply(c,[u,f,h]);const{id:g,styleId:y}=Qa(Qs([c,"access",p=>p.parentRule,"optionalAccess",p=>p.parentStyleSheet]),t,r.styleMirror);return(g&&g!==-1||y&&y!==-1)&&e({id:g,styleId:y,set:{property:u,value:f,priority:h},index:Mh(c.parentRule)}),l.apply(c,d)})});const o=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:$t((l,c,d)=>{const[u]=d;if(n.has(u))return o.apply(c,[u]);const{id:f,styleId:h}=Qa(Qs([c,"access",g=>g.parentRule,"optionalAccess",g=>g.parentStyleSheet]),t,r.styleMirror);return(f&&f!==-1||h&&h!==-1)&&e({id:f,styleId:h,remove:{property:u},index:Mh(c.parentRule)}),l.apply(c,d)})}),$t(()=>{a.CSSStyleDeclaration.prototype.setProperty=i,a.CSSStyleDeclaration.prototype.removeProperty=o})}function k8({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:a,sampling:i,doc:o}){const l=$t(d=>$d($t(u=>{const f=Su(u);if(!f||Ms(f,t,n,r,!0))return;const{currentTime:h,volume:g,muted:y,playbackRate:p}=f;e({type:d,id:a.getId(f),currentTime:h,volume:g,muted:y,playbackRate:p})}),i.media||500)),c=[Rr("play",l(0),o),Rr("pause",l(1),o),Rr("seeked",l(2),o),Rr("volumechange",l(3),o),Rr("ratechange",l(4),o)];return $t(()=>{c.forEach(d=>d())})}function S8({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],a=new WeakMap,i=n.FontFace;n.FontFace=function(c,d,u){const f=new i(c,d,u);return a.set(f,{family:c,buffer:typeof d!="string",descriptors:u,fontSource:typeof d=="string"?d:JSON.stringify(Array.from(new Uint8Array(d)))}),f};const o=vb(t.fonts,"add",function(l){return function(c){return Om($t(()=>{const d=a.get(c);d&&(e(d),a.delete(c))}),0),l.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),$t(()=>{r.forEach(l=>l())})}function j8(e){const{doc:t,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,selectionCb:o}=e;let l=!0;const c=$t(()=>{const d=t.getSelection();if(!d||l&&Qs([d,"optionalAccess",h=>h.isCollapsed]))return;l=d.isCollapsed||!1;const u=[],f=d.rangeCount||0;for(let h=0;h<f;h++){const g=d.getRangeAt(h),{startContainer:y,startOffset:p,endContainer:S,endOffset:x}=g;Ms(y,r,a,i,!0)||Ms(S,r,a,i,!0)||u.push({start:n.getId(y),startOffset:p,end:n.getId(S),endOffset:x})}o({ranges:u})});return c(),Rr("selectionchange",c)}function N8({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:vb(n.customElements,"define",function(a){return function(i,o,l){try{t({define:{name:i}})}catch{}return a.apply(this,[i,o,l])}})}function C8(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=FT(e,e.doc),a=p8(e),i=g8(e),o=BT(e),l=x8(e,{win:n}),c=b8(e),d=k8(e),u=v8(e,{win:n}),f=OT(e,e.doc),h=w8(e,{win:n}),g=e.collectFonts?S8(e):()=>{},y=j8(e),p=N8(e),S=[];for(const x of e.plugins)S.push(x.observer(x.callback,n,x.options));return $t(()=>{ul.forEach(x=>x.reset()),r.disconnect(),a(),i(),o(),l(),c(),d(),u(),f(),h(),g(),y(),p(),S.forEach(x=>x())})}function wf(e){return typeof window[e]<"u"}function kf(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class nx{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,a){const i=r||this.getIdToRemoteIdMap(t),o=a||this.getRemoteIdToIdMap(t);let l=i.get(n);return l||(l=this.generateIdFn(),i.set(n,l),o.set(l,n)),l}getIds(t,n){const r=this.getIdToRemoteIdMap(t),a=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,a))}getRemoteId(t,n,r){const a=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=a.get(n);return i||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(a=>this.getRemoteId(t,a,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}function Mk(e){let t,n=e[0],r=1;for(;r<e.length;){const a=e[r],i=e[r+1];if(r+=2,(a==="optionalAccess"||a==="optionalCall")&&n==null)return;a==="access"||a==="optionalAccess"?(t=n,n=i(n)):(a==="call"||a==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}class T8{constructor(){this.crossOriginIframeMirror=new nx(yb),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class E8{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new nx(yb),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new nx(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Mk([this,"access",r=>r.loadListener,"optionalCall",r=>r(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const a=this.crossOriginIframeMap.get(t.source);if(!a)return;const i=this.transformCrossOriginEvent(a,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case Rt.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:Rt.IncrementalSnapshot,data:{source:Lt.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Rt.Meta:case Rt.Load:case Rt.DomContentLoaded:return!1;case Rt.Plugin:return n;case Rt.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case Rt.IncrementalSnapshot:switch(n.data.source){case Lt.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const a=this.crossOriginIframeRootIdMap.get(t);a&&this.patchRootIdOnNode(r.node,a)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case Lt.Drag:case Lt.TouchMove:case Lt.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case Lt.ViewportResize:return!1;case Lt.MediaInteraction:case Lt.MouseInteraction:case Lt.Scroll:case Lt.CanvasMutation:case Lt.Input:return this.replaceIds(n.data,t,["id"]),n;case Lt.StyleSheetRule:case Lt.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case Lt.Font:return n;case Lt.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case Lt.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),Mk([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(a=>{this.replaceStyleIds(a,t,["styleId"])})]),n}}return!1}replace(t,n,r,a){for(const i of a)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==nr.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class _8{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class R8{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!dd(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const r=FT({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(BT({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Om(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(OT({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(vb(t.prototype,"attachShadow",function(a){return function(i){const o=a.call(this,i);return this.shadowRoot&&MT(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Ak{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class L8{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new a8,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},a=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),a.push({styleId:o,rules:Array.from(i.rules||CSSRule,(l,c)=>({rule:wT(l),index:c}))})),r.styleIds.push(o)}a.length>0&&(r.styles=a),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class I8{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){l8(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(a=>a!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Dn,Ah;const _s=PF();function Ni(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:a="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:l="rr-ignore",ignoreSelector:c=null,maskAllText:d=!1,maskTextClass:u="rr-mask",unmaskTextClass:f=null,maskTextSelector:h=null,unmaskTextSelector:g=null,inlineStylesheet:y=!0,maskAllInputs:p,maskInputOptions:S,slimDOMOptions:x,maskAttributeFn:v,maskInputFn:b,maskTextFn:w,maxCanvasSize:N=null,packFn:R,sampling:C={},dataURLOptions:_={},mousemoveWait:W,recordCanvas:T=!1,recordCrossOriginIframes:E=!1,recordAfter:B=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:H=!1,collectFonts:q=!1,inlineImages:ie=!1,plugins:X,keepIframeSrcFn:V=()=>!1,ignoreCSSAttributes:z=new Set([]),errorHandler:J,onMutation:U,getCanvasManager:ue}=e;h8(J);const fe=E?window.parent===window:!0;let Ae=!1;if(!fe)try{window.parent.document&&(Ae=!1)}catch{Ae=!0}if(fe&&!t)throw new Error("emit function is required");W!==void 0&&C.mousemove===void 0&&(C.mousemove=W),_s.reset();const _e=p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:S!==void 0?S:{},Re=x===!0||x==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:x==="all",headMetaDescKeywords:x==="all"}:x||{};s8();let Se,de=0;const F=O=>{for(const se of X||[])se.eventProcessor&&(O=se.eventProcessor(O));return R&&!Ae&&(O=R(O)),O};Dn=(O,se)=>{const K=O;if(K.timestamp=Ph(),Qp([ul,"access",me=>me[0],"optionalAccess",me=>me.isFrozen,"call",me=>me()])&&K.type!==Rt.FullSnapshot&&!(K.type===Rt.IncrementalSnapshot&&K.data.source===Lt.Mutation)&&ul.forEach(me=>me.unfreeze()),fe)Qp([t,"optionalCall",me=>me(F(K),se)]);else if(Ae){const me={type:"rrweb",event:F(K),origin:window.location.origin,isCheckout:se};window.parent.postMessage(me,"*")}if(K.type===Rt.FullSnapshot)Se=K,de=0;else if(K.type===Rt.IncrementalSnapshot){if(K.data.source===Lt.Mutation&&K.data.isAttachIframe)return;de++;const me=r&&de>=r,pe=n&&Se&&K.timestamp-Se.timestamp>n;(me||pe)&&j(!0)}};const $=O=>{Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.Mutation,...O}})},Z=O=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.Scroll,...O}}),Pe=O=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.CanvasMutation,...O}}),ve=O=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.AdoptedStyleSheet,...O}}),re=new L8({mutationCb:$,adoptedStyleSheetCb:ve}),M=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new T8:new E8({mirror:_s,mutationCb:$,stylesheetManager:re,recordCrossOriginIframes:E,wrappedEmit:Dn});for(const O of X||[])O.getMirror&&O.getMirror({nodeMirror:_s,crossOriginIframeMirror:M.crossOriginIframeMirror,crossOriginIframeStyleMirror:M.crossOriginIframeStyleMirror});const G=new I8,P=M8(ue,{mirror:_s,win:window,mutationCb:O=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.CanvasMutation,...O}}),recordCanvas:T,blockClass:a,blockSelector:i,unblockSelector:o,maxCanvasSize:N,sampling:C.canvas,dataURLOptions:_,errorHandler:J}),Y=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new _8:new R8({mutationCb:$,scrollCb:Z,bypassOptions:{onMutation:U,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskTextClass:u,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:g,inlineStylesheet:y,maskInputOptions:_e,dataURLOptions:_,maskAttributeFn:v,maskTextFn:w,maskInputFn:b,recordCanvas:T,inlineImages:ie,sampling:C,slimDOMOptions:Re,iframeManager:M,stylesheetManager:re,canvasManager:P,keepIframeSrcFn:V,processedNodeManager:G},mirror:_s}),j=(O=!1)=>{Dn({type:Rt.Meta,data:{href:window.location.href,width:ET(),height:TT()}},O),re.reset(),Y.init(),ul.forEach(K=>K.lock());const se=n8(document,{mirror:_s,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskTextClass:u,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:g,inlineStylesheet:y,maskAllInputs:_e,maskAttributeFn:v,maskInputFn:b,maskTextFn:w,slimDOM:Re,dataURLOptions:_,recordCanvas:T,inlineImages:ie,onSerialize:K=>{LT(K,_s)&&M.addIframe(K),IT(K,_s)&&re.trackLinkElement(K),ex(K)&&Y.addShadowRoot(K.shadowRoot,document)},onIframeLoad:(K,me)=>{M.attachIframe(K,me),Y.observeAttachShadow(K)},onStylesheetLoad:(K,me)=>{re.attachLinkElement(K,me)},keepIframeSrcFn:V});if(!se)return console.warn("Failed to snapshot the document");Dn({type:Rt.FullSnapshot,data:{node:se,initialOffset:CT(window)}}),ul.forEach(K=>K.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&re.adoptStyleSheets(document.adoptedStyleSheets,_s.getId(document))};Ah=j;try{const O=[],se=me=>$t(C8)({onMutation:U,mutationCb:$,mousemoveCb:(pe,Ve)=>Dn({type:Rt.IncrementalSnapshot,data:{source:Ve,positions:pe}}),mouseInteractionCb:pe=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.MouseInteraction,...pe}}),scrollCb:Z,viewportResizeCb:pe=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.ViewportResize,...pe}}),inputCb:pe=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.Input,...pe}}),mediaInteractionCb:pe=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.MediaInteraction,...pe}}),styleSheetRuleCb:pe=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.StyleSheetRule,...pe}}),styleDeclarationCb:pe=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.StyleDeclaration,...pe}}),canvasMutationCb:Pe,fontCb:pe=>Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.Font,...pe}}),selectionCb:pe=>{Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.Selection,...pe}})},customElementCb:pe=>{Dn({type:Rt.IncrementalSnapshot,data:{source:Lt.CustomElement,...pe}})},blockClass:a,ignoreClass:l,ignoreSelector:c,maskAllText:d,maskTextClass:u,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:g,maskInputOptions:_e,inlineStylesheet:y,sampling:C,recordCanvas:T,inlineImages:ie,userTriggeredOnInput:H,collectFonts:q,doc:me,maskAttributeFn:v,maskInputFn:b,maskTextFn:w,keepIframeSrcFn:V,blockSelector:i,unblockSelector:o,slimDOMOptions:Re,dataURLOptions:_,mirror:_s,iframeManager:M,stylesheetManager:re,shadowDomManager:Y,processedNodeManager:G,canvasManager:P,ignoreCSSAttributes:z,plugins:Qp([X,"optionalAccess",pe=>pe.filter,"call",pe=>pe(Ve=>Ve.observer),"optionalAccess",pe=>pe.map,"call",pe=>pe(Ve=>({observer:Ve.observer,options:Ve.options,callback:De=>Dn({type:Rt.Plugin,data:{plugin:Ve.name,payload:De}})}))])||[]},{});M.addLoadListener(me=>{try{O.push(se(me.contentDocument))}catch(pe){console.warn(pe)}});const K=()=>{j(),O.push(se(document))};return document.readyState==="interactive"||document.readyState==="complete"?K():(O.push(Rr("DOMContentLoaded",()=>{Dn({type:Rt.DomContentLoaded,data:{}}),B==="DOMContentLoaded"&&K()})),O.push(Rr("load",()=>{Dn({type:Rt.Load,data:{}}),B==="load"&&K()},window))),()=>{O.forEach(me=>me()),G.destroy(),Ah=void 0,m8()}}catch(O){console.warn(O)}}function P8(e){if(!Ah)throw new Error("please take full snapshot after start recording");Ah(e)}Ni.mirror=_s;Ni.takeFullSnapshot=P8;function M8(e,t){try{return e?e(t):new Ak}catch{return console.warn("Unable to initialize CanvasManager"),new Ak}}const A8=3,D8=5;function kb(e){return e>9999999999?e:e*1e3}function og(e){return e>9999999999?e/1e3:e}function ju(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:Rt.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Zs(t,10,1e3)}}),t.category==="console")))}const F8="button,a";function UT(e){return e.closest(F8)||e}function zT(e){const t=$T(e);return!t||!(t instanceof Element)?t:UT(t)}function $T(e){return B8(e)?e.target:e}function B8(e){return typeof e=="object"&&!!e&&"target"in e}let ei;function O8(e){return ei||(ei=[],U8()),ei.push(e),()=>{const t=ei?ei.indexOf(e):-1;t>-1&&ei.splice(t,1)}}function U8(){ir(yn,"open",function(e){return function(...t){if(ei)try{ei.forEach(n=>n())}catch{}return e.apply(yn,t)}})}function z8(e,t,n){e.handleClick(t,n)}class $8{constructor(t,n,r=ju){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=O8(()=>{this._lastMutation=Dk()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(W8(n,this._ignoreSelector)||!V8(t))return;const r={timestamp:og(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(a=>a.node===r.node&&Math.abs(a.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=og(t)}registerScroll(t=Date.now()){this._lastScroll=og(t)}registerClick(t){const n=UT(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=Dk();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const a=this._clicks.indexOf(r);a>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(a,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,a=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!a,{clickCount:o,clickBreadcrumb:l}=t;if(i){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,d=c<this._timeout*1e3?"mutation":"timeout",u={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.slowClickDetected",data:{...l.data,url:yn.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:d,clickCount:o||1}};this._addBreadcrumbEvent(n,u);return}if(o>1){const c={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.multiClick",data:{...l.data,url:yn.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const H8=["A","BUTTON","INPUT"];function W8(e,t){return!!(!H8.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function V8(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Dk(){return Date.now()/1e3}function G8(e,t){try{if(!K8(t))return;const{source:n}=t.data;if(n===Lt.Mutation&&e.registerMutation(t.timestamp),n===Lt.Scroll&&e.registerScroll(t.timestamp),Y8(t)){const{type:r,id:a}=t.data,i=Ni.mirror.getNode(a);i instanceof HTMLElement&&r===Cr.Click&&e.registerClick(i)}}catch{}}function K8(e){return e.type===A8}function Y8(e){return e.data.source===Lt.MouseInteraction}function sa(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Dh;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(Dh||(Dh={}));const q8=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function X8(e){const t={};for(const n in e)if(q8.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const J8=e=>t=>{if(!e.isEnabled())return;const n=Z8(t);if(!n)return;const r=t.name==="click",a=r?t.event:void 0;r&&e.clickDetector&&a&&a.target&&!a.altKey&&!a.metaKey&&!a.ctrlKey&&!a.shiftKey&&z8(e.clickDetector,n,zT(t.event)),ju(e,n)};function HT(e,t){const n=Ni.mirror.getId(e),r=n&&Ni.mirror.getNode(n),a=r&&Ni.mirror.getMeta(r),i=a&&eB(a)?a:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===Dh.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:X8(i.attributes)}}:{}}}function Z8(e){const{target:t,message:n}=Q8(e);return sa({category:`ui.${e.name}`,...HT(t,n)})}function Q8(e){const t=e.name==="click";let n,r=null;try{r=t?zT(e.event):$T(e.event),n=Pi(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function eB(e){return e.type===Dh.Element}function tB(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=nB(t);n&&ju(e,n)}function nB(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:a,key:i,target:o}=e;if(!o||rB(o)||!i)return null;const l=t||r||a,c=i.length===1;if(!l&&c)return null;const d=Pi(o,{maxStringLength:200})||"<unknown>",u=HT(o,d);return sa({category:"ui.keyDown",message:d,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:a,key:i}})}function rB(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const Fk={resource:lB,paint:iB,navigation:oB};function sB(e){return e.map(aB).filter(Boolean)}function aB(e){return Fk[e.entryType]?Fk[e.entryType](e):null}function ql(e){return((rs||yn.performance.timeOrigin)+e)/1e3}function iB(e){const{duration:t,entryType:n,name:r,startTime:a}=e,i=ql(a);return{type:n,name:r,start:i,end:i+t,data:void 0}}function oB(e){const{entryType:t,name:n,decodedBodySize:r,duration:a,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,domInteractive:d,loadEventStart:u,loadEventEnd:f,redirectCount:h,startTime:g,transferSize:y,type:p}=e;return a===0?null:{type:`${t}.${p}`,start:ql(g),end:ql(i),name:n,data:{size:y,decodedBodySize:r,encodedBodySize:o,duration:a,domInteractive:d,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:f,domComplete:i,redirectCount:h}}}function lB(e){const{entryType:t,initiatorType:n,name:r,responseEnd:a,startTime:i,decodedBodySize:o,encodedBodySize:l,responseStatus:c,transferSize:d}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:ql(i),end:ql(a),name:r,data:{size:d,statusCode:c,decodedBodySize:o,encodedBodySize:l}}}function cB(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,a=e.value,i=ql(a);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:a,size:a,nodeId:r?Ni.mirror.getId(r):void 0}}}function dB(e){function t(a){e.performanceEntries.includes(a)||e.performanceEntries.push(a)}function n({entries:a}){a.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(a=>{r.push(Wl(a,n))}),r.push(dT(({metric:a})=>{e.replayPerformanceEntries.push(cB(a))})),()=>{r.forEach(a=>a())}}const un=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,uB='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function fB(){const e=new Blob([uB]);return URL.createObjectURL(e)}function _r(e,t){un&&(be.info(e),t&&WT(e))}function El(e,t){un&&(be.info(e),t&&setTimeout(()=>{WT(e)},0))}function WT(e){Mi({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Sb extends Error{constructor(){super(`Event buffer exceeded maximum size of ${gb}.`)}}class VT{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>gb)throw new Sb;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?kb(t):null}}class hB{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){_r("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((a,i)=>{const o=({data:l})=>{const c=l;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){un&&be.error("[Replay]",c.response),i(new Error("Error in compression worker"));return}a(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class mB{constructor(t){this._worker=new hB(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=kb(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>gb?Promise.reject(new Sb):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{un&&be.warn('[Replay] Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class pB{constructor(t){this._fallback=new VT,this._compression=new mB(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{_r("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n}=this._fallback,r=[];for(const a of t)r.push(this._compression.addEvent(a));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(a){un&&be.warn("[Replay] Failed to add events when switching buffers.",a)}}}function gB({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=xB(t);if(n)return n}return _r("[Replay] Using simple buffer"),new VT}function xB(e){try{const t=e||yB();if(!t)return;_r(`[Replay] Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new pB(n)}catch{_r("[Replay] Failed to create compression worker")}}function yB(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?fB():""}function jb(){try{return"sessionStorage"in yn&&!!yn.sessionStorage}catch{return!1}}function bB(e){vB(),e.session=void 0}function vB(){if(jb())try{yn.sessionStorage.removeItem(mb)}catch{}}function GT(e){return e===void 0?!1:Math.random()<e}function KT(e){const t=Date.now(),n=e.id||$n(),r=e.started||t,a=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,l=e.previousSessionId;return{id:n,started:r,lastActivity:a,segmentId:i,sampled:o,previousSessionId:l}}function Nb(e){if(jb())try{yn.sessionStorage.setItem(mb,JSON.stringify(e))}catch{}}function wB(e,t){return GT(e)?"session":t?"buffer":!1}function Bk({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const a=wB(e,t),i=KT({sampled:a,previousSessionId:r});return n&&Nb(i),i}function kB(e){if(!jb())return null;try{const t=yn.sessionStorage.getItem(mb);if(!t)return null;const n=JSON.parse(t);return El("[Replay] Loading existing session",e),KT(n)}catch{return null}}function rx(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function YT(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return rx(e.started,t,r)||rx(e.lastActivity,n,r)}function qT(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!YT(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function lg({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},a){const i=a.stickySession&&kB(e);return i?qT(i,{sessionIdleExpire:t,maxReplayDuration:n})?(El("[Replay] Session in sessionStorage is expired, creating new one..."),Bk(a,{previousSessionId:i.id})):i:(El("[Replay] Creating new session",e),Bk(a,{previousSessionId:r}))}function SB(e){return e.type===Rt.Custom}function Cb(e,t,n){return JT(e,t)?(XT(e,t,n),!0):!1}function jB(e,t,n){return JT(e,t)?XT(e,t,n):Promise.resolve(null)}async function XT(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=e.getOptions(),a=NB(t,r.beforeAddRecordingEvent);return a?await e.eventBuffer.addEvent(a):void 0}catch(r){const a=r&&r instanceof Sb?"addEventSizeExceeded":"addEvent";un&&be.error(r),await e.stop({reason:a});const i=en();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function JT(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=kb(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(_r(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1):!0}function NB(e,t){try{if(typeof t=="function"&&SB(e))return t(e)}catch(n){return un&&be.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return e}function Tb(e){return!e.type}function sx(e){return e.type==="transaction"}function CB(e){return e.type==="replay_event"}function Ok(e){return e.type==="feedback"}function ZT(e){const t=_B();return(n,r)=>{if(!e.isEnabled()||!Tb(n)&&!sx(n))return;const a=r&&r.statusCode;if(!(t&&(!a||a<200||a>=300))){if(sx(n)){TB(e,n);return}EB(e,n)}}}function TB(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function EB(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||setTimeout(()=>{e.sendBufferedReplayOrFlush()})}function _B(){const e=en();if(!e)return!1;const t=e.getTransport();return t&&t.send.__sentry__baseTransport__||!1}function RB(e){return t=>{!e.isEnabled()||!Tb(t)||LB(e,t)}}function LB(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=sa({category:"replay.hydrate-error"});ju(e,r)}}function IB(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function PB(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:Rt.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function MB(e,t){return e.recordingMode!=="buffer"||t.message===pb||!t.exception||t.type?!1:GT(e.getOptions().errorSampleRate)}function AB(e,t=!1){const n=t?ZT(e):void 0;return Object.assign((r,a)=>e.isEnabled()?CB(r)?(delete r.breadcrumbs,r):!Tb(r)&&!sx(r)&&!Ok(r)||!e.checkAndHandleExpiredSession()?r:Ok(r)?(e.flush(),r.contexts.feedback.replay_id=e.getSessionId(),PB(e,r),r):IB(r,a)&&!e.getOptions()._experiments.captureExceptions?(un&&be.log("[Replay] Ignoring error from rrweb internals",r),null):((MB(e,r)||e.recordingMode==="session")&&(r.tags={...r.tags,replayId:e.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function Um(e,t){return t.map(({type:n,start:r,end:a,name:i,data:o})=>{const l=e.throttledAddEvent({type:Rt.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:a,data:o}}});return typeof l=="string"?Promise.resolve(null):l})}function DB(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function FB(e){return t=>{if(!e.isEnabled())return;const n=DB(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Um(e,[n]),!1)))}}function BB(e,t){return un&&e.getOptions()._experiments.traceInternals?!1:gA(t,en())}function zm(e,t){e.isEnabled()&&t!==null&&(BB(e,t.name)||e.addUpdate(()=>(Um(e,[t]),!0)))}function OB(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:a}=e;if(!n)return null;const{method:i,url:o}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:o,data:{method:i,statusCode:a?a.status:void 0}}}function UB(e){return t=>{if(!e.isEnabled())return;const n=OB(t);zm(e,n)}}function zB(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,a=r[di];if(!t||!n||!a)return null;const{method:i,url:o,status_code:l}=a;return o===void 0?null:{type:"resource.xhr",name:o,start:t/1e3,end:n/1e3,data:{method:i,statusCode:l}}}function $B(e){return t=>{if(!e.isEnabled())return;const n=zB(t);zm(e,n)}}function $m(e,t){if(e)try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=nE(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function QT(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function eE(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[nE(e)];if(!e)return[void 0]}catch{return un&&be.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return un&&be.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Fh(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function tE(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:a,method:i,statusCode:o,request:l,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:a,data:Lr({method:i,statusCode:o,request:l,response:c})}}function Hd(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Ci(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:a,warnings:i}=HB(n);return r.body=a,i&&i.length>0&&(r._meta={warnings:i}),r}function ax(e,t){return Object.keys(e).reduce((n,r)=>{const a=r.toLowerCase();return t.includes(a)&&e[r]&&(n[a]=e[r]),n},{})}function nE(e){return new URLSearchParams(e).toString()}function HB(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Sk,n=WB(e);if(t){const r=e.slice(0,Sk);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function WB(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Bh(e,t){const n=VB(e);return uc(n,t)}function VB(e,t=yn.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(yn.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function GB(e,t,n){try{const r=await YB(e,t,n),a=tE("resource.fetch",r);zm(n.replay,a)}catch(r){un&&be.error("[Replay] Failed to capture fetch breadcrumb",r)}}function KB(e,t,n){const{input:r,response:a}=t,i=r?rE(r):void 0,o=$m(i,n.textEncoder),l=a?QT(a.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),l!==void 0&&(e.data.response_body_size=l)}async function YB(e,t,n){const r=Date.now(),{startTimestamp:a=r,endTimestamp:i=r}=t,{url:o,method:l,status_code:c=0,request_body_size:d,response_body_size:u}=e.data,f=Bh(o,n.networkDetailAllowUrls)&&!Bh(o,n.networkDetailDenyUrls),h=f?qB(n,t.input,d):Hd(d),g=await XB(f,n,t.response,u);return{startTimestamp:a,endTimestamp:i,url:o,method:l,statusCode:c,request:h,response:g}}function qB({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const a=n?QB(n,t):{};if(!e)return Ci(a,r,void 0);const i=rE(n),[o,l]=eE(i),c=Ci(a,r,o);return l?Fh(c,l):c}async function XB(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},a,i){if(!e&&i!==void 0)return Hd(i);const o=a?sE(a.headers,r):{};if(!a||!t&&i!==void 0)return Ci(o,i,void 0);const[l,c]=await ZB(a),d=JB(l,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:o});return c?Fh(d,c):d}function JB(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:a,headers:i}){try{const o=e&&e.length&&r===void 0?$m(e,n):r;return a?t?Ci(i,o,e):Ci(i,o,void 0):Hd(o)}catch(o){return un&&be.warn("[Replay] Failed to serialize response body",o),Ci(i,r,void 0)}}async function ZB(e){const t=eO(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await tO(t)]}catch(n){return un&&be.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}function rE(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function sE(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function QB(e,t){return e.length===1&&typeof e[0]!="string"?Uk(e[0],t):e.length===2?Uk(e[1],t):{}}function Uk(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?sE(n,t):Array.isArray(n)?{}:ax(n,t):{}}function eO(e){try{return e.clone()}catch(t){un&&be.warn("[Replay] Failed to clone response body",t)}}function tO(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error("Timeout while trying to read response body")),500);nO(e).then(a=>t(a),a=>n(a)).finally(()=>clearTimeout(r))})}async function nO(e){return await e.text()}async function rO(e,t,n){try{const r=aO(e,t,n),a=tE("resource.xhr",r);zm(n.replay,a)}catch(r){un&&be.error("[Replay] Failed to capture xhr breadcrumb",r)}}function sO(e,t,n){const{xhr:r,input:a}=t;if(!r)return;const i=$m(a,n.textEncoder),o=r.getResponseHeader("content-length")?QT(r.getResponseHeader("content-length")):cO(r.response,r.responseType,n.textEncoder);i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}function aO(e,t,n){const r=Date.now(),{startTimestamp:a=r,endTimestamp:i=r,input:o,xhr:l}=t,{url:c,method:d,status_code:u=0,request_body_size:f,response_body_size:h}=e.data;if(!c)return null;if(!l||!Bh(c,n.networkDetailAllowUrls)||Bh(c,n.networkDetailDenyUrls)){const R=Hd(f),C=Hd(h);return{startTimestamp:a,endTimestamp:i,url:c,method:d,statusCode:u,request:R,response:C}}const g=l[di],y=g?ax(g.request_headers,n.networkRequestHeaders):{},p=ax(iO(l),n.networkResponseHeaders),[S,x]=n.networkCaptureBodies?eE(o):[void 0],[v,b]=n.networkCaptureBodies?oO(l):[void 0],w=Ci(y,f,S),N=Ci(p,h,v);return{startTimestamp:a,endTimestamp:i,url:c,method:d,statusCode:u,request:x?Fh(w,x):w,response:b?Fh(N,b):N}}function iO(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[a,i]=r.split(": ");return n[a.toLowerCase()]=i,n},{}):{}}function oO(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return lO(e.response,e.responseType)}catch(n){t.push(n)}return un&&be.warn("[Replay] Failed to get xhr response body",...t),[void 0]}function lO(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch{return un&&be.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return un&&be.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function cO(e,t,n){try{const r=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return $m(r,n)}catch{return}}function dO(e){const t=en();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:a,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:l}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:a,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:l};t&&t.on?t.on("beforeAddBreadcrumb",(d,u)=>uO(c,d,u)):(Zy(UB(e)),Qy($B(e)))}catch{}}function uO(e,t,n){if(t.data)try{fO(t)&&mO(n)&&(sO(t,n,e),rO(t,n,e)),hO(t)&&pO(n)&&(KB(t,n,e),GB(t,n,e))}catch{un&&be.warn("Error when enriching network breadcrumb")}}function fO(e){return e.category==="xhr"}function hO(e){return e.category==="fetch"}function mO(e){return e&&e.xhr}function pO(e){return e&&e.response}let zk=null;function gO(e){return!!e.category}const xO=e=>t=>{if(!e.isEnabled())return;const n=yO(t);n&&ju(e,n)};function yO(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();return zk===t||!t||(zk=t,!gO(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))?null:t.category==="console"?bO(t):sa(t)}function bO(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return sa(e);let n=!1;const r=t.map(a=>{if(!a)return a;if(typeof a=="string")return a.length>vf?(n=!0,`${a.slice(0,vf)}`):a;if(typeof a=="object")try{const i=Zs(a,7);return JSON.stringify(i).length>vf?(n=!0,`${JSON.stringify(i,null,2).slice(0,vf)}`):i}catch{}return a});return sa({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function vO(e){const t=os(),n=en();t.addScopeListener(xO(e)),vC(J8(e)),_m(FB(e)),dO(e);const r=AB(e,!$k(n));n&&n.addEventProcessor?n.addEventProcessor(r):cA(r),$k(n)&&(n.on("beforeSendEvent",RB(e)),n.on("afterSendEvent",ZT(e)),n.on("createDsc",a=>{const i=e.getSessionId();i&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(a.replay_id=i)}),n.on("startTransaction",a=>{e.lastTransaction=a}),n.on("finishTransaction",a=>{e.lastTransaction=a}),n.on("beforeSendFeedback",(a,i)=>{const o=e.getSessionId();i&&i.includeReplay&&e.isEnabled()&&o&&a.contexts&&a.contexts.feedback&&(a.contexts.feedback.replay_id=o)}))}function $k(e){return!!(e&&e.on)}async function wO(e){try{return Promise.all(Um(e,[kO(yn.performance.memory)]))}catch{return[]}}function kO(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,a=Date.now()/1e3;return{type:"memory",name:"memory",start:a,end:a,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function SO(e,t,n){let r,a,i;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function l(){return c(),r=e(),r}function c(){a!==void 0&&clearTimeout(a),i!==void 0&&clearTimeout(i),a=i=void 0}function d(){return a!==void 0||i!==void 0?l():r}function u(){return a&&clearTimeout(a),a=setTimeout(l,t),o&&i===void 0&&(i=setTimeout(l,o)),r}return u.cancel=c,u.flush=d,u}function jO(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){un&&be.warn("[Replay] Received replay event after session expired.");return}const a=r||!t;t=!0,e.clickDetector&&G8(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&a&&e.setInitialState(),!Cb(e,n,a))return!0;if(!a)return!1;if(CO(e,a),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){const i=e.eventBuffer.getEarliestTimestamp();i&&(_r(`[Replay] Updating session start time to earliest event in buffer to ${new Date(i)}`,e.getOptions()._experiments.traceInternals),e.session.started=i,e.getOptions().stickySession&&Nb(e.session))}return e.recordingMode==="session"&&e.flush(),!0})}}function NO(e){const t=e.getOptions();return{type:Rt.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function CO(e,t){!t||!e.session||e.session.segmentId!==0||Cb(e,NO(e),!1)}function TO(e,t,n,r){return zi(EC(e,nb(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function EO({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function _O({client:e,scope:t,replayId:n,event:r}){const a=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:a};e.emit&&e.emit("preprocessEvent",r,i);const o=await MC(e.getOptions(),r,i,t,e,$i());if(!o)return null;o.platform=o.platform||"javascript";const l=e.getSdkMetadata&&e.getSdkMetadata(),{name:c,version:d}=l&&l.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:d||"0.0.0"},o}async function RO({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:a,session:i}){const o=EO({recordingData:e,headers:{segment_id:n}}),{urls:l,errorIds:c,traceIds:d,initialTimestamp:u}=r,f=en(),h=os(),g=f&&f.getTransport(),y=f&&f.getDsn();if(!f||!g||!y||!i.sampled)return;const p={type:mF,replay_start_timestamp:u/1e3,timestamp:a/1e3,error_ids:c,trace_ids:d,urls:l,replay_id:t,segment_id:n,replay_type:i.sampled},S=await _O({scope:h,client:f,replayId:t,event:p});if(!S){f.recordDroppedEvent("event_processor","replay",p),_r("An event processor returned `null`, will not send event.");return}delete S.sdkProcessingMetadata;const x=TO(S,o,y,f.getOptions().tunnel);let v;try{v=await g.send(x)}catch(w){const N=new Error(pb);try{N.cause=w}catch{}throw N}if(!v)return v;if(typeof v.statusCode=="number"&&(v.statusCode<200||v.statusCode>=300))throw new aE(v.statusCode);const b=RC({},v);if(_C(b,"replay"))throw new iE(b);return v}class aE extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class iE extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function oE(e,t={count:0,interval:vF}){const{recordingData:n,options:r}=e;if(n.length)try{return await RO(e),!0}catch(a){if(a instanceof aE||a instanceof iE)throw a;if(vM("Replays",{_retryCount:t.count}),un&&r._experiments&&r._experiments.captureExceptions&&Pm(a),t.count>=wF){const i=new Error(`${pb} - max retries exceeded`);try{i.cause=a}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{setTimeout(async()=>{try{await oE(e,t),i(!0)}catch(l){o(l)}},t.interval)})}}const lE="__THROTTLED",LO="__SKIPPED";function IO(e,t,n){const r=new Map,a=l=>{const c=l-n;r.forEach((d,u)=>{u<c&&r.delete(u)})},i=()=>[...r.values()].reduce((l,c)=>l+c,0);let o=!1;return(...l)=>{const c=Math.floor(Date.now()/1e3);if(a(c),i()>=t){const u=o;return o=!0,u?LO:lE}o=!1;const d=r.get(c)||0;return r.set(c,d+1),e(...l)}}class ti{constructor({options:t,recordingOptions:n}){ti.prototype.__init.call(this),ti.prototype.__init2.call(this),ti.prototype.__init3.call(this),ti.prototype.__init4.call(this),ti.prototype.__init5.call(this),ti.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:pF,sessionIdleExpire:gF},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=SO(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=IO((o,l)=>jB(this,o,l),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:a}=this.getOptions(),i=r?{threshold:Math.min(kF,r),timeout:r,scrollTimeout:SF,ignoreSelector:a?a.join(","):""}:void 0;i&&(this.clickDetector=new $8(this,i))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(t),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",El(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");El("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const t=lg({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");El("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=lg({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Ni({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:bF},emit:jO(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{_r(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,bB(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),_r("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),_r("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();_r("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&rx(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${yn.location.pathname}${yn.location.hash}${yn.location.search}`,n=`${yn.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===lE){const a=sa({category:"replay.throttled"});this.addUpdate(()=>!Cb(this,{type:D8,timestamp:a.timestamp||0,data:{tag:"breadcrumb",payload:a,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastTransaction||os().getTransaction(),r=(t&&Yn(t).data||{})[Ra];if(!(!t||!r||!["route","custom"].includes(r)))return Yn(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=gB({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){un&&be.error("[Replay]",t),un&&this._options._experiments&&this._options._experiments.captureExceptions&&Pm(t)}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=lg({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return qT(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{yn.document.addEventListener("visibilitychange",this._handleVisibilityChange),yn.addEventListener("blur",this._handleWindowBlur),yn.addEventListener("focus",this._handleWindowFocus),yn.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(vO(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=dB(this)}_removeListeners(){try{yn.document.removeEventListener("visibilitychange",this._handleVisibilityChange),yn.removeEventListener("blur",this._handleWindowBlur),yn.removeEventListener("focus",this._handleWindowFocus),yn.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{yn.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=sa({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=sa({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{tB(this,t)}}_doChangeToBackgroundTasks(t){!this.session||YT(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){_r("[Replay] Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:Rt.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){const t=sB(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Um(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){un&&be.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await wO(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),a=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await oE({replayId:t,recordingData:i,segmentId:a,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=en();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){un&&be.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,a=Date.now()-n;this._debouncedFlush.cancel();const i=a<this._options.minReplayDuration,o=a>this._options.maxReplayDuration+5e3;if(i||o){_r(`[Replay] Session duration (${Math.floor(a/1e3)}s) is too ${i?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),i&&this._debouncedFlush();return}const l=this.eventBuffer;if(l&&this.session.segmentId===0&&!l.hasCheckout&&_r("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){un&&be.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Nb(this.session)}__init6(){this._onMutationHandler=t=>{const n=t.length,r=this._options.mutationLimit,a=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>a||i){const o=sa({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(o)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function Uc(e,t,n,r){const a=typeof r=="string"?r.split(","):[],i=[...e,...a,...t];return typeof n<"u"&&(typeof n=="string"&&i.push(`.${n}`),Eo(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),i.join(",")}function PO({mask:e,unmask:t,block:n,unblock:r,ignore:a,blockClass:i,blockSelector:o,maskTextClass:l,maskTextSelector:c,ignoreClass:d}){const u=['base[href="/"]'],f=Uc(e,[".sentry-mask","[data-sentry-mask]"],l,c),h=Uc(t,[".sentry-unmask","[data-sentry-unmask]"]),g={maskTextSelector:f,unmaskTextSelector:h,blockSelector:Uc(n,[".sentry-block","[data-sentry-block]",...u],i,o),unblockSelector:Uc(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Uc(a,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],d)};return i instanceof RegExp&&(g.blockClass=i),l instanceof RegExp&&(g.maskTextClass=l),g}function MO({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:a,value:i}){return!r||a.unmaskTextSelector&&e.matches(a.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const Hk='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',AO=["content-length","content-type","accept"];let Wk=!1;const DO=e=>new Hm(e);class Hm{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=xF,flushMaxDelay:n=yF,minReplayDuration:r=jF,maxReplayDuration:a=jk,stickySession:i=!0,useCompression:o=!0,workerUrl:l,_experiments:c={},sessionSampleRate:d,errorSampleRate:u,maskAllText:f=!0,maskAllInputs:h=!0,blockAllMedia:g=!0,mutationBreadcrumbLimit:y=750,mutationLimit:p=1e4,slowClickTimeout:S=7e3,slowClickIgnoreSelectors:x=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:b=[],networkCaptureBodies:w=!0,networkRequestHeaders:N=[],networkResponseHeaders:R=[],mask:C=[],maskAttributes:_=["title","placeholder"],unmask:W=[],block:T=[],unblock:E=[],ignore:B=[],maskFn:H,beforeAddRecordingEvent:q,beforeErrorSampling:ie,blockClass:X,blockSelector:V,maskInputOptions:z,maskTextClass:J,maskTextSelector:U,ignoreClass:ue}={}){this.name=Hm.id;const fe=PO({mask:C,unmask:W,block:T,unblock:E,ignore:B,blockClass:X,blockSelector:V,maskTextClass:J,maskTextSelector:U,ignoreClass:ue});if(this._recordingOptions={maskAllInputs:h,maskAllText:f,maskInputOptions:{...z||{},password:!0},maskTextFn:H,maskInputFn:H,maskAttributeFn:(Ae,_e,Re)=>MO({maskAttributes:_,maskAllText:f,privacyOptions:fe,key:Ae,value:_e,el:Re}),...fe,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:Ae=>{try{Ae.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,NF),maxReplayDuration:Math.min(a,jk),stickySession:i,sessionSampleRate:d,errorSampleRate:u,useCompression:o,workerUrl:l,blockAllMedia:g,maskAllInputs:h,maskAllText:f,mutationBreadcrumbLimit:y,mutationLimit:p,slowClickTimeout:S,slowClickIgnoreSelectors:x,networkDetailAllowUrls:v,networkDetailDenyUrls:b,networkCaptureBodies:w,networkRequestHeaders:Vk(N),networkResponseHeaders:Vk(R),beforeAddRecordingEvent:q,beforeErrorSampling:ie,_experiments:c},typeof d=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${d} })`),this._initialOptions.sessionSampleRate=d),typeof u=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${u} })`),this._initialOptions.errorSampleRate=u),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Hk}`:Hk),this._isInitialized&&H1())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Wk}set _isInitialized(t){Wk=t}setupOnce(){H1()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(t)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const t=FO(this._initialOptions);this._replay=new ti({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const n=en().getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}Hm.__initStatic();function FO(e){const t=en(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Lr(e)};return n?(e.sessionSampleRate==null&&e.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&Eo(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(Eo(()=>{console.warn("SDK client is not available.")}),r)}function Vk(e){return[...AO,...e.map(t=>t.toLowerCase())]}function BO(e){const t={...e};nT(t,"react"),fF(t)}var cE={exports:{}},an={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cr=typeof Symbol=="function"&&Symbol.for,Eb=cr?Symbol.for("react.element"):60103,_b=cr?Symbol.for("react.portal"):60106,Wm=cr?Symbol.for("react.fragment"):60107,Vm=cr?Symbol.for("react.strict_mode"):60108,Gm=cr?Symbol.for("react.profiler"):60114,Km=cr?Symbol.for("react.provider"):60109,Ym=cr?Symbol.for("react.context"):60110,Rb=cr?Symbol.for("react.async_mode"):60111,qm=cr?Symbol.for("react.concurrent_mode"):60111,Xm=cr?Symbol.for("react.forward_ref"):60112,Jm=cr?Symbol.for("react.suspense"):60113,OO=cr?Symbol.for("react.suspense_list"):60120,Zm=cr?Symbol.for("react.memo"):60115,Qm=cr?Symbol.for("react.lazy"):60116,UO=cr?Symbol.for("react.block"):60121,zO=cr?Symbol.for("react.fundamental"):60117,$O=cr?Symbol.for("react.responder"):60118,HO=cr?Symbol.for("react.scope"):60119;function ls(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Eb:switch(e=e.type,e){case Rb:case qm:case Wm:case Gm:case Vm:case Jm:return e;default:switch(e=e&&e.$$typeof,e){case Ym:case Xm:case Qm:case Zm:case Km:return e;default:return t}}case _b:return t}}}function dE(e){return ls(e)===qm}an.AsyncMode=Rb;an.ConcurrentMode=qm;an.ContextConsumer=Ym;an.ContextProvider=Km;an.Element=Eb;an.ForwardRef=Xm;an.Fragment=Wm;an.Lazy=Qm;an.Memo=Zm;an.Portal=_b;an.Profiler=Gm;an.StrictMode=Vm;an.Suspense=Jm;an.isAsyncMode=function(e){return dE(e)||ls(e)===Rb};an.isConcurrentMode=dE;an.isContextConsumer=function(e){return ls(e)===Ym};an.isContextProvider=function(e){return ls(e)===Km};an.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Eb};an.isForwardRef=function(e){return ls(e)===Xm};an.isFragment=function(e){return ls(e)===Wm};an.isLazy=function(e){return ls(e)===Qm};an.isMemo=function(e){return ls(e)===Zm};an.isPortal=function(e){return ls(e)===_b};an.isProfiler=function(e){return ls(e)===Gm};an.isStrictMode=function(e){return ls(e)===Vm};an.isSuspense=function(e){return ls(e)===Jm};an.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Wm||e===qm||e===Gm||e===Vm||e===Jm||e===OO||typeof e=="object"&&e!==null&&(e.$$typeof===Qm||e.$$typeof===Zm||e.$$typeof===Km||e.$$typeof===Ym||e.$$typeof===Xm||e.$$typeof===zO||e.$$typeof===$O||e.$$typeof===HO||e.$$typeof===UO)};an.typeOf=ls;cE.exports=an;var WO=cE.exports,uE=WO,VO={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},GO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fE={};fE[uE.ForwardRef]=VO;fE[uE.Memo]=GO;const KO=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function YO(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}const Gk={componentStack:null,error:null,eventId:null};function qO(e,t){const n=new WeakMap;function r(a,i){if(!n.has(a)){if(a.cause)return n.set(a,!0),r(a.cause,i);a.cause=i}}r(e,t)}class Lb extends D.Component{constructor(t){super(t),Lb.prototype.__init.call(this),this.state=Gk,this._openFallbackReportDialog=!0;const n=en();n&&n.on&&t.showDialog&&(this._openFallbackReportDialog=!1,n.on("afterSendEvent",r=>{!r.type&&r.event_id===this._lastEventId&&kk({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,{componentStack:n}){const{beforeCapture:r,onError:a,showDialog:i,dialogOptions:o}=this.props;DC(l=>{if(YO(D.version)&&Gy(t)){const d=new Error(t.message);d.name=`React ErrorBoundary ${t.name}`,d.stack=n,qO(t,d)}r&&r(l,t,n);const c=Pm(t,{captureContext:{contexts:{react:{componentStack:n}}},mechanism:{handled:!!this.props.fallback}});a&&a(t,n,c),i&&(this._lastEventId=c,this._openFallbackReportDialog&&kk({...o,eventId:c})),this.setState({error:t,componentStack:n,eventId:c})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:n,eventId:r}=this.state,{onUnmount:a}=this.props;a&&a(t,n,r)}__init(){this.resetErrorBoundary=()=>{const{onReset:t}=this.props,{error:n,componentStack:r,eventId:a}=this.state;t&&t(n,r,a),this.setState(Gk)}}render(){const{fallback:t,children:n}=this.props,r=this.state;if(r.error){let a;return typeof t=="function"?a=t({error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):a=t,D.isValidElement(a)?a:(t&&KO&&be.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}var hE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Kk=m.createContext&&m.createContext(hE),Ti=globalThis&&globalThis.__assign||function(){return Ti=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ti.apply(this,arguments)},XO=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function mE(e){return e&&e.map(function(t,n){return m.createElement(t.tag,Ti({key:n},t.attr),mE(t.child))})}function Be(e){return function(t){return m.createElement(JO,Ti({attr:Ti({},e.attr)},t),mE(e.child))}}function JO(e){var t=function(n){var r=e.attr,a=e.size,i=e.title,o=XO(e,["attr","size","title"]),l=a||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),m.createElement("svg",Ti({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:Ti(Ti({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&m.createElement("title",null,i),e.children)};return Kk!==void 0?m.createElement(Kk.Consumer,null,function(n){return t(n)}):t(hE)}function ZO(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"}},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"}},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"}}]})(e)}function ui(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function Yk(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}},{tag:"polyline",attr:{points:"12 5 19 12 12 19"}}]})(e)}function QO(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"}}]})(e)}function eU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"}},{tag:"path",attr:{d:"M18.63 13A17.89 17.89 0 0 1 18 8"}},{tag:"path",attr:{d:"M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"}},{tag:"path",attr:{d:"M18 8a6 6 0 0 0-9.33-5"}},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}}]})(e)}function pE(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"}}]})(e)}function qc(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"}}]})(e)}function Wd(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"}}]})(e)}function Ib(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(e)}function tU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(e)}function ua(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"}}]})(e)}function ix(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"}}]})(e)}function nU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"}}]})(e)}function gE(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}}]})(e)}function Vd(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}}]})(e)}function xE(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 14 4 9 9 4"}},{tag:"path",attr:{d:"M20 20v-7a4 4 0 0 0-4-4H4"}}]})(e)}function rU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"}}]})(e)}function sU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}function Sf(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}}]})(e)}function Pb(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"}},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}}]})(e)}function aU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}}]})(e)}function ep(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function ox(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(e)}function iU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}},{tag:"line",attr:{x1:"4",y1:"22",x2:"4",y2:"15"}}]})(e)}function yE(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(e)}function lx(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(e)}function Ba(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}}]})(e)}function Gd(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(e)}function Os(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"}},{tag:"polyline",attr:{points:"21 15 16 10 5 21"}}]})(e)}function oU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(e)}function Kd(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"}},{tag:"polyline",attr:{points:"2 17 12 22 22 17"}},{tag:"polyline",attr:{points:"2 12 12 17 22 12"}}]})(e)}function lU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"16",y2:"12"}}]})(e)}function cU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}}]})(e)}function qk(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(e)}function Oh(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(e)}function ln(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(e)}function Mb(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"polyline",attr:{points:"9 21 3 21 3 15"}},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"}},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"}}]})(e)}function dU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}}]})(e)}function uU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(e)}function Uh(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(e)}function tp(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}}]})(e)}function fU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}},{tag:"path",attr:{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function hU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function mU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 14 10 14 10 20"}},{tag:"polyline",attr:{points:"20 10 14 10 14 4"}},{tag:"line",attr:{x1:"14",y1:"10",x2:"21",y2:"3"}},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"}}]})(e)}function bE(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"}}]})(e)}function As(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"}},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"}}]})(e)}function zh(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"}},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"}}]})(e)}function pU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polygon",attr:{points:"10 8 16 12 10 16 10 8"}}]})(e)}function Yd(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(e)}function gU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"16"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"16",y2:"12"}}]})(e)}function na(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function Xk(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(e)}function Ei(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"17 1 21 5 17 9"}},{tag:"path",attr:{d:"M3 11V9a4 4 0 0 1 4-4h14"}},{tag:"polyline",attr:{points:"7 23 3 19 7 15"}},{tag:"path",attr:{d:"M21 13v2a4 4 0 0 1-4 4H3"}}]})(e)}function Ab(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"path",attr:{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"}}]})(e)}function xU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(e)}function Db(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"6",cy:"6",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"}},{tag:"line",attr:{x1:"20",y1:"4",x2:"8.12",y2:"15.88"}},{tag:"line",attr:{x1:"14.47",y1:"14.48",x2:"20",y2:"20"}},{tag:"line",attr:{x1:"8.12",y1:"8.12",x2:"12",y2:"12"}}]})(e)}function Hi(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function np(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(e)}function Nu(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(e)}function _l(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",y1:"21",x2:"4",y2:"14"}},{tag:"line",attr:{x1:"4",y1:"10",x2:"4",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"20",y1:"21",x2:"20",y2:"16"}},{tag:"line",attr:{x1:"20",y1:"12",x2:"20",y2:"3"}},{tag:"line",attr:{x1:"1",y1:"14",x2:"7",y2:"14"}},{tag:"line",attr:{x1:"9",y1:"8",x2:"15",y2:"8"}},{tag:"line",attr:{x1:"17",y1:"16",x2:"23",y2:"16"}}]})(e)}function Xl(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"path",attr:{d:"M8 14s1.5 2 4 2 4-2 4-2"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"9.01",y2:"9"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"15.01",y2:"9"}}]})(e)}function yU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function vE(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"}},{tag:"polyline",attr:{points:"17 6 23 6 23 12"}}]})(e)}function gc(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 7 4 4 20 4 20 7"}},{tag:"line",attr:{x1:"9",y1:"20",x2:"15",y2:"20"}},{tag:"line",attr:{x1:"12",y1:"4",x2:"12",y2:"20"}}]})(e)}function bU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"}}]})(e)}function vU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"17 8 12 3 7 8"}},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"}}]})(e)}function wU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"}},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"}}]})(e)}function kU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"}},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"}},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"}}]})(e)}function SU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"}},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"}},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"}}]})(e)}function xc(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function jU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(e)}function NU(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"}},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}}]})(e)}function Fb(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"}},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}}]})(e)}function qd(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(e)}function rp(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"line",attr:{x1:"23",y1:"9",x2:"17",y2:"15"}},{tag:"line",attr:{x1:"17",y1:"9",x2:"23",y2:"15"}}]})(e)}function pt(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}function Ca(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}}]})(e)}function $h(e){return Be({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]})(e)}const cx=350,fi={HEART_BURST:400,HEART_POPUP:800,SHIMMER:6e3},Qt={INSTAGRAM:"template-7",TIKTOK:"template-8",GAZETTEER:"template-9",YOUTUBE_SHORTS:"template-10"},CU=1,TU=10,EU=1,Jk=15e3,fl={INSTAGRAM:"linear-gradient(90deg, #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5, #feda75)",TIKTOK:"linear-gradient(90deg, #69c9d0, #ee1d52, #000000, #69c9d0)",GAZETTEER:"linear-gradient(90deg, #22c55e, #ffffff, #22c55e)",YOUTUBE_SHORTS:"linear-gradient(180deg, #FF0000, #CC0000, #000000)",SILVER_WHITE:"linear-gradient(90deg, #C0C0C0, #FFFFFF, #D3D3D3, #FFFFFF, #A8A8A8, #FFFFFF, #C0C0C0, #FFFFFF, #D3D3D3, #FFFFFF, #A8A8A8, #C0C0C0)",MARKETING:"linear-gradient(90deg, #87ceeb, #ffb6c1, #87cefa, #c084fc, #34d399, #f59e0b, #ef4444, #dc2626, #fca5a5, #60a5fa, #fb7185, #87ceeb)"};function It({src:e,name:t,size:n="md",className:r="",hasStory:a=!1,onClick:i}){const l=(f=>{const h=f.trim().split(" ");return h.length===1?h[0].charAt(0).toUpperCase():(h[0].charAt(0)+h[h.length-1].charAt(0)).toUpperCase()})(t),d={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg"}[n],u=i?"button":"div";return a?s.jsxs(u,{onClick:i,className:`${d} ${r} relative rounded-full overflow-visible ${i?"cursor-pointer hover:scale-105 transition-transform":""}`,children:[s.jsx("div",{className:"absolute -inset-0.5 rounded-full p-[2px]",style:{background:"linear-gradient(135deg, #a78bfa 0%, #7c3aed 100%)"},children:s.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-gray-950"})}),s.jsxs("div",{className:"absolute inset-[2px] rounded-full overflow-hidden flex items-center justify-center bg-white dark:bg-gray-950",children:[e?s.jsx("img",{src:e,alt:`${t}'s profile picture`,className:"w-full h-full object-cover rounded-full",onError:f=>{f.target.style.display="none"}}):null,s.jsx("div",{className:`absolute inset-0 rounded-full flex items-center justify-center font-bold text-white ${e?"opacity-0":"opacity-100"} transition-opacity duration-200`,style:{background:"#000000"},children:l})]})]}):s.jsxs(u,{onClick:i,className:`${d} ${r} rounded-full overflow-hidden flex items-center justify-center relative ${i?"cursor-pointer hover:scale-105 transition-transform":""}`,children:[e?s.jsx("img",{src:e,alt:`${t}'s profile picture`,className:"w-full h-full object-cover",onError:f=>{f.target.style.display="none"}}):null,s.jsx("div",{className:`absolute inset-0 rounded-full flex items-center justify-center font-bold text-white ${e?"opacity-0":"opacity-100"} transition-opacity duration-200`,style:{background:"#000000"},children:l})]})}const Xd=new Map,Jd=new Map,Bb=new Map;function wE(e,t){return[e,t].sort((n,r)=>n.localeCompare(r)).join("|")}async function dx(e,t){var r;const n=wE(e,t);return((r=Xd.get(n))==null?void 0:r.slice().sort((a,i)=>i.timestamp-a.timestamp))||[]}async function _i(e,t,n){const r=wE(e,t),a=Xd.get(r)||[],i={id:`msg-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,senderHandle:e,text:n.text,imageUrl:n.imageUrl,isSystemMessage:n.isSystemMessage,timestamp:n.timestamp??Date.now(),postId:n.postId,commentId:n.commentId,commentText:n.commentText};if(a.push(i),Xd.set(r,a),Jd.set(t,await SE(t)),!n.isSystemMessage&&n.text){const{createNotification:o,isStickerMessage:l,isReplyToPost:c}=await En(()=>Promise.resolve().then(()=>aq),void 0);l(n.text)?await o({type:"sticker",fromHandle:e,toHandle:t,message:n.text}):c(n.text)&&await o({type:"reply",fromHandle:e,toHandle:t,message:n.text})}return window.dispatchEvent(new CustomEvent("conversationUpdated",{detail:{participants:[e,t],message:i}})),window.dispatchEvent(new CustomEvent("inboxUnreadChanged",{detail:{handle:t,unread:Jd.get(t)||0}})),i}async function _U(e,t,n){await _i(t,e,{text:n,isSystemMessage:!0})}async function sp(e){return Jd.get(e)||0}async function kE(e,t){const n=`${e}::${t}`;Bb.set(n,Date.now()),Jd.set(e,await SE(e)),window.dispatchEvent(new CustomEvent("inboxUnreadChanged",{detail:{handle:e,unread:Jd.get(e)||0}}))}async function ux(e){const t=new Map;return Xd.forEach((n,r)=>{const[a,i]=r.split("|");if(a!==e&&i!==e)return;const o=a===e?i:a,l=n.slice().sort((g,y)=>y.timestamp-g.timestamp),c=l[0],d=Bb.get(`${e}::${o}`)||0,u=l.filter(g=>g.senderHandle!==e&&g.timestamp>d&&!g.isSystemMessage).length,f=t.get(o)||{last:void 0,unread:0},h=!f.last||c&&c.timestamp>f.last.timestamp?c:f.last;t.set(o,{last:h,unread:u})}),Array.from(t.entries()).map(([n,r])=>({otherHandle:n,lastMessage:r.last,unread:r.unread})).sort((n,r)=>{var a,i;return(((a=r.lastMessage)==null?void 0:a.timestamp)||0)-(((i=n.lastMessage)==null?void 0:i.timestamp)||0)})}async function SE(e){let t=0;return Xd.forEach((n,r)=>{const[a,i]=r.split("|");if(a!==e&&i!==e)return;const o=a===e?i:a,l=Bb.get(`${e}::${o}`)||0;t+=n.filter(c=>c.senderHandle!==e&&c.timestamp>l&&!c.isSystemMessage).length}),t}const Zk=new Set;async function jE(e){if(!e||Zk.has(e))return;const t=[{from:"Sarah@artane",text:"Hey Barry! Loved your last clip "},{from:"Liam@cork",text:"Up for a collab this week?"},{from:"Ava@galway",text:"That sunset shot was unreal "},{from:"Noah@london",text:"DM me when youre free "}];for(const n of t)await _i(n.from,e,{text:n.text});Zk.add(e)}const RU=Object.freeze(Object.defineProperty({__proto__:null,appendMessage:_i,appendSystemNotice:_U,fetchConversation:dx,getUnreadTotal:sp,listConversations:ux,markConversationRead:kE,seedMockDMs:jE},Symbol.toStringTag,{value:"Module"})),NE="user_privacy_settings",CE="follow_requests";function TE(){try{const e=localStorage.getItem(NE);return e?JSON.parse(e):{}}catch{return{}}}function LU(e){localStorage.setItem(NE,JSON.stringify(e))}function Cu(){try{const e=localStorage.getItem(CE);return e?JSON.parse(e):[]}catch{return[]}}function ap(e){localStorage.setItem(CE,JSON.stringify(e))}function Hh(e){return TE()[e]===!0}function Xc(e,t){const n=TE();n[e]=t,LU(n)}function IU(e,t,n){return e===t||!Hh(t)?!0:n.includes(t)}function EE(e,t,n){return e===t?!1:Hh(t)?n.includes(t):!0}function PU(e,t){return Cu().some(r=>r.fromHandle===e&&r.toHandle===t&&r.status==="pending")}function MU(e,t){const r=Cu().filter(a=>!(a.fromHandle===e&&a.toHandle===t));r.push({fromHandle:e,toHandle:t,timestamp:Date.now(),status:"pending"}),ap(r)}function AU(e,t){const r=Cu().map(a=>a.fromHandle===e&&a.toHandle===t&&a.status==="pending"?{...a,status:"accepted"}:a);ap(r)}function DU(e,t){const r=Cu().filter(a=>!(a.fromHandle===e&&a.toHandle===t&&a.status==="pending"));ap(r)}function FU(e,t){const r=Cu().filter(a=>!(a.fromHandle===e&&a.toHandle===t));ap(r)}const _E=m.createContext(null);function BU({children:e}){const[t,n]=m.useState(null);m.useEffect(()=>{var i;try{const o=localStorage.getItem("user");if(!o){const c={id:"test-user",name:"Test User",email:"test@example.com",password:"",age:25,interests:["Technology","Travel","Food"],local:"Finglas",regional:"Dublin",national:"Ireland",handle:"TestUser@Dublin",countryFlag:"",avatarUrl:void 0,is_private:!1};n(c),localStorage.setItem("user",JSON.stringify(c)),Xc(c.handle,!1);return}const l=JSON.parse(o);if(l&&!l.local){const c={id:l.id||((i=l.name)==null?void 0:i.toLowerCase())||"me",name:l.name||"Me",email:l.email||"",password:"",age:l.age||18,interests:l.interests||[],local:"",regional:"",national:"",handle:`${l.name||"User"}@Unknown`,countryFlag:l.countryFlag||void 0,avatarUrl:l.avatarUrl||void 0,placesTraveled:l.placesTraveled||void 0,is_private:l.is_private||!1};n(c),c.handle&&Xc(c.handle,c.is_private||!1)}else n(l),l.handle&&Xc(l.handle,l.is_private||!1)}catch(o){console.error("Error loading user from localStorage:",o)}},[]);const r=i=>{const o={id:i.name.trim().toLowerCase()||"me",name:i.name.trim()||"Me",email:i.email||"",password:i.password||"",age:i.age||18,interests:i.interests||[],local:i.local||"",regional:i.regional||"",national:i.national||"",handle:i.handle||`${i.name.trim()}@Unknown`,countryFlag:i.countryFlag||void 0,avatarUrl:i.avatarUrl||void 0,bio:i.bio||void 0,socialLinks:i.socialLinks||void 0,placesTraveled:i.placesTraveled||void 0,is_private:i.is_private||!1};n(o),localStorage.setItem("user",JSON.stringify(o)),o.handle&&Xc(o.handle,o.is_private||!1),q1({id:o.id,username:o.name})},a=()=>{n(null),localStorage.removeItem("user"),q1(null)};return s.jsx(_E.Provider,{value:{user:t,login:r,logout:a},children:e})}function tn(){const e=m.useContext(_E);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}let cs=[{id:"story-1",userId:"user-1",userHandle:"John@Dublin",mediaUrl:"https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=800",mediaType:"image",text:"Amazing sunset in Dublin! ",createdAt:Date.now()-5e3,expiresAt:Date.now()+24*60*60*1e3-5e3,location:"Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-2",userId:"user-1",userHandle:"John@Dublin",mediaUrl:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800",mediaType:"image",text:"Beautiful day for a walk! ",createdAt:Date.now()-3e3,expiresAt:Date.now()+24*60*60*1e3-3e3,location:"Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-3",userId:"user-2",userHandle:"Sarah@London",mediaUrl:"https://images.unsplash.com/photo-1517474307977-7c27ca92444a?w=800",mediaType:"image",text:"Love the architecture here! ",createdAt:Date.now()-1e4,expiresAt:Date.now()+24*60*60*1e3-1e4,location:"London",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-4",userId:"user-3",userHandle:"Mike@Paris",mediaUrl:"https://images.unsplash.com/photo-1502602898536-47ad22581b52?w=800",mediaType:"image",text:"Beautiful morning in Paris! ",createdAt:Date.now()-8e3,expiresAt:Date.now()+24*60*60*1e3-8e3,location:"Paris",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-5",userId:"user-4",userHandle:"Emma@NewYork",mediaUrl:"https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=800",mediaType:"image",text:"City never sleeps! ",createdAt:Date.now()-6e3,expiresAt:Date.now()+24*60*60*1e3-6e3,location:"New York",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-6",userId:"user-5",userHandle:"Username@Dublin",mediaUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=800",mediaType:"image",text:"Beautiful day in Dublin! ",createdAt:Date.now()-4e3,expiresAt:Date.now()+24*60*60*1e3-4e3,location:"Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-7",userId:"user-6",userHandle:"Alice@Finglas",mediaUrl:"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=800",mediaType:"image",text:"Great spot for coffee! ",createdAt:Date.now()-2e3,expiresAt:Date.now()+24*60*60*1e3-2e3,location:"Finglas",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-8",userId:"user-7",userHandle:"Sarah@NewYork",mediaUrl:"https://images.unsplash.com/photo-1494522358652-f30e61a0b1b0?w=800",mediaType:"image",text:"Park life! ",createdAt:Date.now()-1e3,expiresAt:Date.now()+24*60*60*1e3-1e3,location:"New York",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-9",userId:"user-8",userHandle:"Mike@London",mediaUrl:"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=800",mediaType:"image",text:"Thames vibes! ",createdAt:Date.now()-3e3,expiresAt:Date.now()+24*60*60*1e3-3e3,location:"London",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-sarah-1",userId:"sarah-artane-1",userHandle:"Sarah@Artane",mediaUrl:"https://images.unsplash.com/photo-1543007631-283050bb3e8c?w=800",mediaType:"image",text:"Beautiful morning in Artane! ",createdAt:Date.now()-5e3,expiresAt:Date.now()+24*60*60*1e3-5e3,location:"Artane, Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0},{id:"story-sarah-2",userId:"sarah-artane-1",userHandle:"Sarah@Artane",mediaUrl:"https://videos.pexels.com/video-files/5439112/5439112-uhd_3840_2160_30fps.mp4",mediaType:"video",text:"Exploring the beautiful coast! ",createdAt:Date.now()-7e3,expiresAt:Date.now()+24*60*60*1e3-7e3,location:"Howth, Dublin",views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0}];function Hs(e=300){return new Promise(t=>setTimeout(t,e))}async function OU(e){await Hs();const t=Date.now();return cs.filter(a=>a.expiresAt>t).reduce((a,i)=>{const o=a.find(l=>l.userId===i.userId);return o?o.stories.push(i):a.push({userId:i.userId,userHandle:i.userHandle,name:i.userHandle.split("@")[0],avatarUrl:(i.userId===e,void 0),stories:[i]}),a},[])}async function UU(e,t){await Hs();const n=Date.now();return cs.filter(r=>r.userId===t&&r.expiresAt>n).sort((r,a)=>r.createdAt-a.createdAt)}async function zU(e){await Hs();const t=Date.now(),n=cs.filter(r=>r.userHandle===e&&r.expiresAt>t);return n.length===0?null:{userId:n[0].userId,userHandle:n[0].userHandle,name:n[0].userHandle.split("@")[0],avatarUrl:void 0,stories:n.sort((r,a)=>r.createdAt-a.createdAt)}}async function fx(e,t,n,r,a,i,o,l,c,d,u,f,h){await Hs();const g=Date.now(),y=g+24*60*60*1e3,p={id:`story-${Date.now()}`,userId:e,userHandle:t,mediaUrl:n||void 0,mediaType:r||void 0,text:a,textColor:o,textSize:l,textStyle:u||void 0,stickers:f||void 0,taggedUsers:h||void 0,createdAt:g,expiresAt:y,location:i,views:0,hasViewed:!1,reactions:[],replies:[],userReaction:void 0,sharedFromPost:c,sharedFromUser:d};return cs.push(p),p}async function $U(e,t){await Hs();const n=cs.find(r=>r.id===e);n&&!n.hasViewed&&(n.hasViewed=!0,n.views+=1)}async function HU(e){await Hs();const t=cs.find(n=>n.id===e);t&&(t.views+=1)}async function WU(e,t,n,r){await Hs();const a=cs.find(i=>i.id===e);a&&(a.reactions=a.reactions.filter(i=>i.userId!==t),a.reactions.push({id:`reaction-${Date.now()}`,userId:t,userHandle:n,emoji:r,createdAt:Date.now()}),a.userReaction=r)}async function VU(e,t,n,r){await Hs();const a=cs.find(i=>i.id===e);a&&a.replies.push({id:`reply-${Date.now()}`,userId:t,userHandle:n,text:r,createdAt:Date.now()})}async function hx(e){await Hs();const t=Date.now();return cs.filter(r=>r.userHandle===e&&r.expiresAt>t).length>0}async function Kf(e){await Hs();const t=Date.now();return cs.filter(r=>r.userHandle===e&&r.expiresAt>t&&!r.hasViewed).length>0}async function RE(e,t){await Hs();const n=Date.now();return cs.filter(i=>i.expiresAt>n).reduce((i,o)=>{if(o.userId===e||t.includes(o.userHandle)){const l=i.find(c=>c.userId===o.userId);l?l.stories.push(o):i.push({userId:o.userId,userHandle:o.userHandle,name:o.userHandle.split("@")[0],avatarUrl:void 0,stories:[o]})}return i},[])}async function Qk(e){const t=Date.now();return cs.some(n=>n.mediaUrl===e&&n.expiresAt>t)}function Wh(e){return cs.some(t=>t.mediaUrl===e)}const GU=[{id:"1",userHandle:"Username@Dublin",locationLabel:"Story location",tags:[],mediaUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?q=80&w=800",stats:{likes:14,views:42,comments:3,shares:2,reclips:1},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"2",userHandle:"Alice@Finglas",locationLabel:"Near Phoenix Park",tags:[],mediaUrl:"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=800",stats:{likes:87,views:534,comments:12,shares:8,reclips:5},isBookmarked:!0,isFollowing:!1,userLiked:!0},{id:"3",userHandle:"Bob@Ireland",locationLabel:"Seaside",tags:[],mediaUrl:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=800",stats:{likes:12,views:150,comments:1,shares:0,reclips:0},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"4",userHandle:"Sarah@NewYork",locationLabel:"Central Park",tags:[],mediaUrl:"https://images.unsplash.com/photo-1494522358652-f30e61a0b1b0?q=80&w=800",stats:{likes:45,views:234,comments:8,shares:3,reclips:2},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"5",userHandle:"Mike@London",locationLabel:"Thames River",tags:[],mediaUrl:"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?q=80&w=800",stats:{likes:67,views:345,comments:15,shares:4,reclips:3},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"6",userHandle:"Emma@Paris",locationLabel:"Eiffel Tower",tags:[],mediaUrl:"https://images.unsplash.com/photo-1511739001486-6bfe10ce785f?q=80&w=800",stats:{likes:89,views:456,comments:22,shares:6,reclips:4},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"7",userHandle:"John@Tokyo",locationLabel:"Shibuya Crossing",tags:[],mediaUrl:"https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?q=80&w=800",stats:{likes:34,views:178,comments:6,shares:1,reclips:0},isBookmarked:!1,isFollowing:!1,userLiked:!1},{id:"8",userHandle:"Lisa@Sydney",locationLabel:"Opera House",tags:[],mediaUrl:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=800",stats:{likes:56,views:289,comments:11,shares:2,reclips:1},isBookmarked:!1,isFollowing:!1,userLiked:!1}],KU=()=>"http://localhost:8000/api",LE=KU();async function Pn(e,t={}){var a,i,o,l;const n=localStorage.getItem("authToken"),r={headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`},...t.headers},...t};try{const c=await fetch(`${LE}${e}`,r);if(!c.ok){const d=await c.json().catch(()=>({error:"Network error"}));throw new Error(d.error||`HTTP ${c.status}`)}return c.json()}catch(c){if(((a=c==null?void 0:c.message)==null?void 0:a.includes("Failed to fetch"))||((i=c==null?void 0:c.message)==null?void 0:i.includes("ERR_CONNECTION_REFUSED"))||((o=c==null?void 0:c.message)==null?void 0:o.includes("NetworkError"))||(c==null?void 0:c.name)==="TypeError"&&((l=c==null?void 0:c.message)==null?void 0:l.includes("fetch"))){const u=new Error("CONNECTION_REFUSED");throw u.name="ConnectionRefused",u}throw c}}async function YU(e){return Pn("/auth/register",{method:"POST",body:JSON.stringify(e)})}async function qU(e,t){return Pn("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async function XU(){return Pn("/auth/me")}async function IE(e=0,t=10,n="Dublin",r){const a=new URLSearchParams({cursor:e.toString(),limit:t.toString(),filter:n,...r&&{userId:r}});return Pn(`/posts?${a}`)}async function JU(e,t){const n=new URLSearchParams;return t&&n.append("userId",t),Pn(`/posts/${e}?${n}`)}async function ZU(e){return Pn("/posts",{method:"POST",body:JSON.stringify(e)})}async function Ob(e){return Pn(`/posts/${e}/like`,{method:"POST"})}async function PE(e,t){return Pn(`/posts/${e}`,{method:"PUT",body:JSON.stringify(t)})}async function Ub(e){return Pn(`/posts/${e}/view`,{method:"POST"})}async function zb(e){return Pn(`/posts/${e}/share`,{method:"POST"})}async function $b(e){return Pn(`/posts/${e}/reclip`,{method:"POST"})}async function QU(e){return Pn(`/render-jobs/${e}`)}async function e9(e,t){const n=new URLSearchParams;return t&&n.append("userId",t),Pn(`/comments/post/${e}?${n}`)}async function Hb(e,t){return Pn(`/comments/post/${e}`,{method:"POST",body:JSON.stringify({text:t})})}async function ME(e,t){return Pn(`/comments/reply/${e}`,{method:"POST",body:JSON.stringify({text:t})})}async function AE(e){return Pn(`/comments/${e}/like`,{method:"POST"})}async function mx(e,t){const n=new URLSearchParams;return t&&n.append("userId",t),Pn(`/users/${e}?${n}`)}async function Wb(e){return Pn(`/users/${e}/follow`,{method:"POST"})}async function t9(e,t=0,n=20){const r=new URLSearchParams({cursor:t.toString(),limit:n.toString()});return Pn(`/users/${e}/followers?${r}`)}async function n9(e,t=0,n=20){const r=new URLSearchParams({cursor:t.toString(),limit:n.toString()});return Pn(`/users/${e}/following?${r}`)}async function r9(){return Pn("/users/privacy/toggle",{method:"POST"})}async function s9(e){return Pn(`/users/${e}/follow/accept`,{method:"POST"})}async function a9(e){return Pn(`/users/${e}/follow/deny`,{method:"POST"})}async function DE(e){const t=new FormData;t.append("file",e);const n=localStorage.getItem("authToken"),r=await fetch(`${LE}/upload/single`,{method:"POST",headers:{...n&&{Authorization:`Bearer ${n}`}},body:t});if(!r.ok){let a="Upload failed";try{const i=await r.json();a=i.error||i.message||JSON.stringify(i)}catch{a=`Upload failed: HTTP ${r.status} ${r.statusText}`}throw new Error(a)}return r.json()}async function i9(e){const{get:t,set:n}=await En(()=>Promise.resolve().then(()=>GE),void 0),r=await t("mutationQueue")||[];r.push({...e,id:crypto.randomUUID(),timestamp:Date.now()}),await n("mutationQueue",r)}async function o9(){const{get:e,set:t}=await En(()=>Promise.resolve().then(()=>GE),void 0),n=await e("mutationQueue")||[];if(n.length===0)return;const r=[],a=[];for(const o of n)try{switch(o.type){case"like":await Ob(o.postId),r.push(o.id);break;case"follow":await Wb(o.userHandle),r.push(o.id);break;case"comment":await Hb(o.postId,o.text),r.push(o.id);break;case"view":await Ub(o.postId),r.push(o.id);break;case"share":await zb(o.postId),r.push(o.id);break;case"reclip":await $b(o.postId),r.push(o.id);break;case"commentLike":await AE(o.commentId),r.push(o.id);break;case"reply":await ME(o.parentId,o.text),r.push(o.id);break;default:a.push(o.id)}}catch(l){console.error("Failed to process action:",o,l),a.push(o.id)}const i=n.filter(o=>!r.includes(o.id));return await t("mutationQueue",i),{processed:r.length,failed:a.length}}const ao=Object.freeze(Object.defineProperty({__proto__:null,acceptFollowRequest:s9,addComment:Hb,addReply:ME,createPost:ZU,denyFollowRequest:a9,enqueue:i9,fetchComments:e9,fetchFollowers:t9,fetchFollowing:n9,fetchPost:JU,fetchPostsPage:IE,fetchUserProfile:mx,getCurrentUser:XU,getRenderJobStatus:QU,incrementView:Ub,loginUser:qU,processQueue:o9,reclipPost:$b,registerUser:YU,sharePost:zb,toggleCommentLike:AE,toggleFollow:Wb,toggleLike:Ob,togglePrivacy:r9,updatePost:PE,uploadFile:DE},Symbol.toStringTag,{value:"Module"}));function FE(e){const t=e.toLowerCase();return t.includes("finglas")?{local:"Finglas",regional:"Dublin",national:"Ireland"}:t.includes("artane")?{local:"Artane",regional:"Dublin",national:"Ireland"}:t.includes("dublin")?{local:"Dublin",regional:"Dublin",national:"Ireland"}:t.includes("ireland")?{local:"Various",regional:"Various",national:"Ireland"}:t.includes("ballymun")?{local:"Ballymun",regional:"Dublin",national:"Ireland"}:t.includes("newyork")||t.includes("new york")?{local:"New York",regional:"New York",national:"USA"}:t.includes("london")?{local:"London",regional:"London",national:"UK"}:t.includes("paris")?{local:"Paris",regional:"Paris",national:"France"}:t.includes("tokyo")?{local:"Tokyo",regional:"Tokyo",national:"Japan"}:t.includes("sydney")?{local:"Sydney",regional:"NSW",national:"Australia"}:{local:"",regional:"",national:""}}let bt=[],e2=!1;if(e2)console.log("Posts array already initialized, length:",bt.length);else{console.log("Initializing posts array...");const e=Date.now();bt=GU.map((a,i)=>{var d;const o=FE(a.userHandle),l=(d=a.id)==null?void 0:d.match(/\d{13}/),c=l?parseInt(l[0],10):e-i*36e5;return{...a,id:`post-${a.id}-${i}-${c}-${Math.random().toString(36).substr(2,9)}`,createdAt:c,...o}}),e2=!0,console.log("Initial posts loaded:",bt.length),console.log("Initial post IDs:",bt.map(a=>a.id)),console.log("Posts array created at:",new Date().toISOString()),console.log("Posts array reference ID:",Math.random().toString(36).substr(2,9));const t=bt.filter((a,i)=>bt.findIndex(o=>o.id===a.id)!==i);t.length>0?console.error("DUPLICATE IDs FOUND:",t.map(a=>a.id)):console.log("No duplicate IDs found in initial posts");const n=Date.now(),r=[{id:`artane-post-1-${n}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Artane, Dublin",tags:[],text:"Beautiful sunny day in Artane! The community here is amazing. Love living in this part of Dublin. The parks, the people, everything about this area makes it special. ",createdAt:n-18e5,stats:{likes:23,views:156,comments:5,shares:2,reclips:1},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-2-${n-36e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Artane, Dublin",tags:[],text:"Just had the most amazing brunch at the local cafe! The Irish breakfast is unbeatable. Highly recommend this spot if you ever find yourself in the area. Full of flavour and the service is top-notch! ",createdAt:n-36e5,stats:{likes:45,views:312,comments:12,shares:8,reclips:3},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-3-${n-72e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Artane, Dublin",tags:[],mediaUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",mediaType:"video",caption:"Stunning views from Howth Hill looking back towards Dublin",createdAt:n-72e5,stats:{likes:67,views:445,comments:8,shares:4,reclips:2},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-4-${n-864e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Dublin City Centre",tags:[],mediaUrl:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",mediaType:"video",caption:"Walking through the vibrant streets of Dublin",createdAt:n-864e5,stats:{likes:89,views:678,comments:15,shares:7,reclips:5},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-5-${n-1728e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Artane, Dublin",tags:[],text:"Life in Dublin is never boring. There's always something happening, someone to meet, a new place to discover. Grateful to call this city home. The energy here is infectious! ",createdAt:n-1728e5,stats:{likes:34,views:189,comments:6,shares:3,reclips:1},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"},{id:`artane-post-6-${n-2592e5}-${Math.random().toString(36).substr(2,9)}`,userHandle:"Sarah@Artane",locationLabel:"Phoenix Park, Dublin",tags:[],mediaUrl:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800",mediaType:"image",caption:"Perfect morning walk in Phoenix Park! The deer are out and about ",createdAt:n-2592e5,stats:{likes:42,views:287,comments:7,shares:4,reclips:2},isBookmarked:!1,isFollowing:!1,userLiked:!1,userLocal:"Artane",userRegional:"Dublin",userNational:"Ireland"}];bt=[...bt,...r]}let Tu=[{id:"comment-1",postId:"1",userHandle:"Alice@Dublin",text:"This looks amazing! Where is this taken?",createdAt:Date.now()-36e5,likes:3,userLiked:!1,replies:[{id:"reply-1",postId:"1",userHandle:"Bob@Finglas",text:"It's at Phoenix Park! Great spot for photos.",createdAt:Date.now()-3e6,likes:1,userLiked:!1,parentId:"comment-1"},{id:"reply-2",postId:"1",userHandle:"Charlie@Ireland",text:"I was there last week, beautiful place!",createdAt:Date.now()-24e5,likes:0,userLiked:!1,parentId:"comment-1"}],replyCount:2},{id:"comment-2",postId:"1",userHandle:"Bob@Finglas",text:"Great shot! ",createdAt:Date.now()-18e5,likes:1,userLiked:!1,replies:[],replyCount:0},{id:"comment-3",postId:"2",userHandle:"Charlie@Ireland",text:"That brunch looks delicious! What cafe is this?",createdAt:Date.now()-72e5,likes:0,userLiked:!1,replies:[{id:"reply-3",postId:"2",userHandle:"Alice@Dublin",text:"It's The Fumbally! Best brunch in Dublin.",createdAt:Date.now()-6e6,likes:2,userLiked:!1,parentId:"comment-3"}],replyCount:1}];const cg={};function js(e){return cg[e]||(cg[e]={likes:{},bookmarks:{},follows:{},reclips:{},lastViewed:{}}),cg[e]}const dr=(e=250)=>new Promise(t=>setTimeout(t,e));async function bo(e){await dr();const t=js(e);return Object.keys(t.follows).filter(n=>t.follows[n]===!0)}function Mr(e,t){const n=js(e),r={...t,userLiked:!!n.likes[t.id],isBookmarked:!!n.bookmarks[t.id],isFollowing:!!n.follows[t.userHandle],userReclipped:!!n.reclips[t.id],taggedUsers:t.taggedUsers||void 0,textStyle:t.textStyle,stickers:t.stickers,mediaItems:t.mediaItems,templateId:t.templateId};return t.taggedUsers&&t.taggedUsers.length>0?console.log("decorateForUser - preserving taggedUsers:",t.taggedUsers,"for post:",t.id.substring(0,30),"templateId:",t.templateId):t.templateId&&!t.taggedUsers&&console.log("decorateForUser - template post but NO taggedUsers:",{postId:t.id.substring(0,30),templateId:t.templateId,originalTaggedUsers:t.taggedUsers}),r}function Eu(e){var r,a,i,o,l,c,d,u;const t=e.final_video_url||e.finalVideoUrl,n=e.media_url||e.mediaUrl||"";return{id:e.id,userHandle:e.user_handle||e.userHandle,locationLabel:e.location_label||e.locationLabel||"Unknown Location",tags:e.tags||[],mediaUrl:t||n,finalVideoUrl:t||void 0,mediaType:e.media_type||e.mediaType,mediaItems:e.media_items||e.mediaItems,text:e.text_content||e.text,imageText:e.image_text||e.imageText,caption:e.caption,createdAt:new Date(e.created_at||e.createdAt).getTime(),stats:{likes:e.likes_count||((r=e.stats)==null?void 0:r.likes)||0,views:e.views_count||((a=e.stats)==null?void 0:a.views)||0,comments:e.comments_count||((i=e.stats)==null?void 0:i.comments)||0,shares:e.shares_count||((o=e.stats)==null?void 0:o.shares)||0,reclips:e.reclips_count||((l=e.stats)==null?void 0:l.reclips)||0},isBookmarked:e.is_bookmarked||!1,isFollowing:e.is_following||!1,userLiked:e.user_liked||!1,userReclipped:e.user_reclipped||!1,stickers:e.stickers,templateId:e.template_id||e.templateId,bannerText:e.banner_text||e.bannerText,textStyle:e.text_style||e.textStyle,taggedUsers:e.taggedUsers||e.tagged_users,videoCaptionsEnabled:e.video_captions_enabled||e.videoCaptionsEnabled,videoCaptionText:e.video_caption_text||e.videoCaptionText,subtitlesEnabled:e.subtitles_enabled||e.subtitlesEnabled,subtitleText:e.subtitle_text||e.subtitleText,userLocal:((c=e.user)==null?void 0:c.local)||e.userLocal||"",userRegional:((d=e.user)==null?void 0:d.regional)||e.userRegional||"",userNational:((u=e.user)==null?void 0:u.national)||e.userNational||"",renderJobId:e.render_job_id||e.renderJobId}}async function fd(e,t,n=5,r="me",a="",i="",o=""){var c;if({}.VITE_USE_LARAVEL_API!=="false")try{const d=e.toLowerCase();let u;d==="discover"?u="Following":d==="finglas"?u="Finglas":d==="dublin"?u="Dublin":d==="ireland"?u="Ireland":u=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();const h=await IE(t??0,n,u,r!=="me"?r:void 0);return{items:h.items.map(y=>Eu(y)),nextCursor:h.nextCursor}}catch(d){(d==null?void 0:d.name)!=="ConnectionRefused"&&!((c=d==null?void 0:d.message)!=null&&c.includes("CONNECTION_REFUSED"))&&console.warn("Laravel API call failed, falling back to mock data:",d)}try{await dr();const d=e.toLowerCase();console.log("fetchPostsPage called with posts array length:",bt.length),console.log("Current posts IDs:",bt.map(p=>p.id)),console.log("Fetching posts for tab:",d,"with user data:",{userId:r,userLocal:a,userRegional:i,userNational:o,totalPosts:bt.length});const u=bt.filter(p=>{if(d==="discover"){const N=js(r),R=N.follows[p.userHandle]===!0;return(p.userHandle.includes("Sarah")||p.userHandle.includes("sarah"))&&console.log("CHECKING SARAH POST:",{userId:r,userHandle:p.userHandle,isFollowing:R,allFollows:Object.keys(N.follows).filter(C=>N.follows[C]===!0),fullState:N.follows}),R}if(d.toLowerCase()==="clips")return js(r).follows[p.userHandle]===!0?!!(p.mediaUrl&&Wh(p.mediaUrl)):!1;if(!["finglas","dublin","ireland","discover"].includes(d)){const N=d.trim().toLowerCase();console.log("=== CUSTOM LOCATION FILTER FOR:",N,"===");const R=new Set(["ireland","uk","united kingdom","england","scotland","wales","france","spain","portugal","germany","netherlands","belgium","australia","usa","united states","canada"]),C=new Set(["dublin","london","paris","madrid","rome","berlin","amsterdam","lisbon","vienna","prague","budapest","copenhagen","stockholm","oslo","helsinki","zurich","new york","toronto","vancouver","mexico city","tokyo","seoul","beijing","shanghai","hong kong","singapore","sydney","melbourne","auckland"]),_=H=>(H||"").trim().toLowerCase(),W=_(p.userLocal),T=_(p.userRegional),E=_(p.userNational);let B=!1;return R.has(N)?B=E===N||N==="uk"&&(E==="united kingdom"||E==="uk")||N==="usa"&&(E==="usa"||E==="united states"):C.has(N)?B=T===N:B=W===N,B&&console.log("Post MATCHING for custom filter",N,":",{userHandle:p.userHandle,userLocal:p.userLocal,userRegional:p.userRegional,userNational:p.userNational}),B}const x=d.toLowerCase(),v=(p.userLocal||"").toLowerCase(),b=(p.userRegional||"").toLowerCase(),w=(p.userNational||"").toLowerCase();return x===v||x===b||x===w||d==="finglas"&&p.userLocal==="Finglas"||d==="dublin"&&p.userRegional==="Dublin"||d==="ireland"&&p.userNational==="Ireland"});console.log("Filtered posts for",d,":",u.length,"posts"),console.log("All posts with locations:",bt.map(p=>({userHandle:p.userHandle,userLocal:p.userLocal,userRegional:p.userRegional,userNational:p.userNational}))),console.log("Filtered posts:",u.map(p=>({userHandle:p.userHandle,userLocal:p.userLocal,userRegional:p.userRegional,userNational:p.userNational})));const f=u.slice().sort((p,S)=>{const x=p.createdAt||0;return(S.createdAt||0)-x});console.log("Sorted posts (first 3):",f.slice(0,3).map((p,S)=>({index:S,id:p.id.substring(0,60),createdAt:p.createdAt,timeAgo:new Date(p.createdAt).toISOString(),userHandle:p.userHandle})));const h=t??0,g=f.slice(h,h+n).map(p=>{var x;p.templateId&&console.log("fetchPostsPage - template post BEFORE decorateForUser:",{postId:p.id.substring(0,30),templateId:p.templateId,taggedUsers:p.taggedUsers,hasTaggedUsers:!!p.taggedUsers,taggedUsersType:typeof p.taggedUsers,taggedUsersIsArray:Array.isArray(p.taggedUsers),taggedUsersLength:(x=p.taggedUsers)==null?void 0:x.length,allPostKeys:Object.keys(p)});const S=Mr(r,p);return S.taggedUsers&&S.taggedUsers.length>0?console.log("fetchPostsPage - post has taggedUsers AFTER decorateForUser:",{postId:S.id.substring(0,30),taggedUsers:S.taggedUsers,templateId:S.templateId}):p.taggedUsers&&p.taggedUsers.length>0&&!S.taggedUsers&&console.warn("fetchPostsPage - taggedUsers LOST during decoration:",{postId:p.id.substring(0,30),templateId:p.templateId,originalTaggedUsers:p.taggedUsers,decoratedTaggedUsers:S.taggedUsers,originalHasTaggedUsers:!!p.taggedUsers,decoratedHasTaggedUsers:!!S.taggedUsers}),S}),y=h+g.length<f.length?h+g.length:null;return console.log("Returning page with:",{itemsCount:g.length,nextCursor:y}),{items:g,nextCursor:y}}catch(d){throw console.error("Error in fetchPostsPage:",d),d}}async function Ri(e,t){var o;if({}.VITE_USE_LARAVEL_API!=="false")try{const l=await Ob(t);return Eu(l)}catch(l){(l==null?void 0:l.name)!=="ConnectionRefused"&&!((o=l==null?void 0:l.message)!=null&&o.includes("CONNECTION_REFUSED"))&&console.warn("Laravel API call failed, falling back to mock data:",l)}await dr(150);const r=js(e),a=bt.find(l=>l.id===t),i=!!r.likes[t];return r.likes[t]=!i,a.stats.likes+=i?-1:1,Mr(e,a)}async function l9(e,t){await dr(150);const n=js(e);n.bookmarks[t]=!n.bookmarks[t];const r=bt.find(a=>a.id===t);return Mr(e,r)}async function aa(e,t){await dr(150);const n=bt.find(i=>i.id===t);if(!n)throw new Error("Post not found");const r=js(e),a=r.follows[n.userHandle]===!0;return r.follows[n.userHandle]=!a,console.log("FOLLOW STATE UPDATED:",{userId:e,userHandle:n.userHandle,nowFollowing:r.follows[n.userHandle],allFollows:Object.keys(r.follows).filter(i=>r.follows[i]===!0)}),Mr(e,n)}async function Zd(e,t){var c;if({}.VITE_USE_LARAVEL_API!=="false")try{const d=await Ub(t);return Eu(d)}catch(d){(d==null?void 0:d.name)!=="ConnectionRefused"&&!((c=d==null?void 0:d.message)!=null&&c.includes("CONNECTION_REFUSED"))&&console.warn("Laravel API call failed, falling back to mock data:",d)}await dr(100);const r=bt.find(d=>d.id===t);if(!r)return console.error("Post not found for incrementViews:",t),console.log("Available post IDs:",bt.map(d=>d.id)),{id:t,userHandle:"Unknown",locationLabel:"Unknown Location",tags:[],mediaUrl:"",createdAt:Date.now(),stats:{likes:0,views:0,comments:0,shares:0,reclips:0},isBookmarked:!1,isFollowing:!1,userLiked:!1};const a=js(e),i=Date.now(),o=a.lastViewed[t]||0,l=i-5*60*1e3;return(o<l||!o)&&(r.stats.views+=1),a.lastViewed[t]=i,Mr(e,r)}function BE(e,t){return js(e).lastViewed[t]||null}function c9(e,t,n=5*60*1e3){const r=BE(e,t);return r?Date.now()-r<n:!1}async function OE(e,t){var a;if({}.VITE_USE_LARAVEL_API!=="false")try{const i=await zb(t);return Eu(i)}catch(i){(i==null?void 0:i.name)!=="ConnectionRefused"&&!((a=i==null?void 0:i.message)!=null&&a.includes("CONNECTION_REFUSED"))&&console.warn("Laravel API call failed, falling back to mock data:",i)}await dr(100);const r=bt.find(i=>i.id===t);if(!r)throw console.error("Post not found for incrementShares:",t),new Error(`Post with id ${t} not found`);return r.stats.shares+=1,Mr(e,r)}async function d9(e,t){var a;if({}.VITE_USE_LARAVEL_API!=="false")try{const i=await $b(t);return Eu(i)}catch(i){(i==null?void 0:i.name)!=="ConnectionRefused"&&!((a=i==null?void 0:i.message)!=null&&a.includes("CONNECTION_REFUSED"))&&console.warn("Laravel API call failed, falling back to mock data:",i)}await dr(100);const r=bt.find(i=>i.id===t);if(!r)throw console.error("Post not found for incrementReclips:",t),new Error(`Post with id ${t} not found`);return r.stats.reclips+=1,Mr(e,r)}async function Rl(e,t,n){await dr(200);const r=bt.find(o=>o.id===t);if(!r)throw console.error("Original post not found for reclipPost:",t),new Error(`Original post with id ${t} not found`);if(r.userHandle===n)throw console.log("Cannot reclip your own post:",t),new Error("Cannot reclip your own post");const a=js(e);if(a.reclips[t])return console.log("User has already reclipped this post:",t),{originalPost:Mr(e,r),reclippedPost:null};a.reclips[t]=!0,r.stats.reclips+=1;const i={...r,id:`reclip-${e}-${t}-${Date.now()}`,userHandle:n,originalUserHandle:r.userHandle,isReclipped:!0,originalPostId:t,reclippedBy:e,isBookmarked:!1,isFollowing:!1,userLiked:!1,userReclipped:!1,stats:{...r.stats}};return bt.push(i),{originalPost:Mr(e,r),reclippedPost:Mr(e,i)}}async function ra(e){return await dr(100),bt.find(n=>n.id===e)||null}async function hd(e){return await dr(200),Tu.filter(t=>t.postId===e)}async function Vh(e,t=30){await dr(150);const n=e.trim().toLowerCase();return bt.filter(i=>i.userHandle.toLowerCase()===n).slice().reverse().slice(0,t)}async function ip(e,t,n){var o;if({}.VITE_USE_LARAVEL_API!=="false")try{const l=await Hb(e,n);return{id:l.id,postId:l.post_id||l.postId||e,userHandle:l.user_handle||l.userHandle||t,text:l.text||l.text_content,createdAt:new Date(l.created_at||l.createdAt).getTime(),likes:l.likes_count||l.likes||0}}catch(l){(l==null?void 0:l.name)!=="ConnectionRefused"&&!((o=l==null?void 0:l.message)!=null&&o.includes("CONNECTION_REFUSED"))&&console.warn("Laravel API call failed, falling back to mock data:",l)}await dr(300),console.log("addComment called:",{postId:e,userHandle:t,text:n,postsCount:bt.length});const a={id:crypto.randomUUID(),postId:e,userHandle:t,text:n,createdAt:Date.now(),likes:0,userLiked:!1};Tu.push(a);const i=bt.find(l=>l.id===e);if(console.log("Post lookup result:",{postId:e,found:!!i,postUserHandle:i==null?void 0:i.userHandle,commenterHandle:t,isOwnPost:(i==null?void 0:i.userHandle)===t}),i)if(i.stats.comments+=1,i.userHandle!==t){const{appendMessage:l}=await En(()=>Promise.resolve().then(()=>RU),void 0);console.log("Sending comment notification DM:",{from:t,to:i.userHandle,postId:e,commentText:n});try{await l(t,i.userHandle,{postId:e,commentId:a.id,commentText:n,isSystemMessage:!1}),console.log("Comment notification DM sent successfully")}catch(c){console.error("Failed to send comment notification DM:",c)}}else console.log("Skipping DM - user is commenting on their own post");else console.warn("Post not found for comment:",e,"Available post IDs:",bt.map(l=>l.id).slice(0,5));return a}async function UE(e){await dr(100);const t=Tu.find(n=>n.id===e);if(!t)throw new Error("Comment not found");return t.userLiked=!t.userLiked,t.likes+=t.userLiked?1:-1,t}async function zE(e,t){await dr(100);const n=Tu.find(a=>a.id===e);if(!n||!n.replies)throw new Error("Parent comment or replies not found");const r=n.replies.find(a=>a.id===t);if(!r)throw new Error("Reply not found");return r.userLiked=!r.userLiked,r.likes+=r.userLiked?1:-1,n}async function $E(e,t,n,r){await dr(300);const a={id:crypto.randomUUID(),postId:e,userHandle:n,text:r,createdAt:Date.now(),likes:0,userLiked:!1,parentId:t},i=Tu.find(o=>o.id===t);return i&&(i.replies||(i.replies=[]),i.replies.push(a),i.replyCount=(i.replyCount||0)+1),a}async function yc(e,t,n,r,a,i,o,l,c,d,u,f,h,g,y,p,S,x,v,b,w,N,R){var _,W,T,E,B,H,q,ie,X;const{createPost:C}=await En(()=>Promise.resolve().then(()=>ao),void 0);try{const V=await C({text:n||void 0,location:r||void 0,mediaUrl:a||void 0,mediaType:i||void 0,caption:l||void 0,imageText:o||void 0,bannerText:y||void 0,stickers:f||void 0,templateId:h||void 0,mediaItems:g||void 0,textStyle:p||void 0,taggedUsers:S||void 0,videoCaptionsEnabled:x||void 0,videoCaptionText:v||void 0,subtitlesEnabled:b||void 0,subtitleText:w||void 0,editTimeline:N||void 0,musicTrackId:R||void 0}),z=V.final_video_url||V.finalVideoUrl,J=V.media_url||V.mediaUrl||a||"";return{id:V.id,userHandle:V.user_handle||V.userHandle,locationLabel:V.location_label||V.locationLabel||r||"Unknown Location",tags:V.tags||[],mediaUrl:z||J,finalVideoUrl:z||void 0,mediaType:V.media_type||V.mediaType||i,mediaItems:V.media_items||V.mediaItems||(a?[{url:a,type:i||"image"}]:void 0),text:V.text_content||V.text||n||void 0,imageText:V.image_text||V.imageText||o||void 0,caption:V.caption||l||void 0,createdAt:new Date(V.created_at||V.createdAt).getTime(),stats:{likes:V.likes_count||((_=V.stats)==null?void 0:_.likes)||0,views:V.views_count||((W=V.stats)==null?void 0:W.views)||0,comments:V.comments_count||((T=V.stats)==null?void 0:T.comments)||0,shares:V.shares_count||((E=V.stats)==null?void 0:E.shares)||0,reclips:V.reclips_count||((B=V.stats)==null?void 0:B.reclips)||0},isBookmarked:V.is_bookmarked||!1,isFollowing:V.is_following||!1,userLiked:V.user_liked||!1,stickers:V.stickers||f||void 0,templateId:V.template_id||V.templateId||h||void 0,bannerText:V.banner_text||V.bannerText||y||void 0,textStyle:V.text_style||V.textStyle||p||void 0,taggedUsers:V.taggedUsers||S||void 0,videoCaptionsEnabled:V.video_captions_enabled||V.videoCaptionsEnabled||void 0,videoCaptionText:V.video_caption_text||V.videoCaptionText||void 0,subtitlesEnabled:V.subtitles_enabled||V.subtitlesEnabled||void 0,subtitleText:V.subtitle_text||V.subtitleText||void 0,userLocal:c,userRegional:d,userNational:u,renderJobId:V.render_job_id||V.renderJobId}}catch(V){console.error("Error creating post via API:",V),await dr(500);async function z(Se){if(!Se.startsWith("blob:"))return Se;try{console.log("Converting blob URL to data URL for persistence:",Se.substring(0,50));const F=await(await fetch(Se)).blob(),$=new FileReader,Z=await new Promise((Pe,ve)=>{$.onloadend=()=>Pe($.result),$.onerror=ve,$.readAsDataURL(F)});return console.log("Converted blob URL to data URL",{originalSize:F.size,dataUrlSize:Z.length,isDataUrl:Z.startsWith("data:")}),Z}catch(de){return console.error("Failed to convert blob URL to data URL:",de),Se}}console.log("createPost function - received taggedUsers parameter:",S,"type:",typeof S,"isArray:",Array.isArray(S),"length:",S==null?void 0:S.length),console.log("Creating post with:",{userId:e,userHandle:t,text:n,location:r,imageUrl:a,mediaType:i,imageText:o,caption:l,userLocal:c,userRegional:d,userNational:u});const J=c&&d&&u?{userLocal:c,userRegional:d,userNational:u}:FE(t),U=Date.now();let ue=a;if(a&&a.trim()!==""&&a.startsWith("blob:"))try{ue=await z(a)}catch(Se){console.error("Failed to convert blob URL, using original:",Se),ue=a}let fe=g;g&&g.length>0&&(fe=await Promise.all(g.map(async Se=>{if(Se.url&&Se.url.trim()!==""&&Se.url.startsWith("blob:"))try{const de=await z(Se.url);return{...Se,url:de}}catch(de){return console.error("Failed to convert blob URL in mediaItems, using original:",de),Se}return Se})));const Ae=fe&&fe.length>0?fe:ue&&ue.trim()!==""?[{url:ue,type:i||"image"}]:void 0,_e={id:`${crypto.randomUUID()}-${U}`,userHandle:t,locationLabel:r||"Unknown Location",tags:[],mediaUrl:ue&&ue.trim()!==""?ue:void 0,finalVideoUrl:void 0,mediaType:i||void 0,mediaItems:Ae,text:n||void 0,imageText:o||void 0,caption:l||void 0,createdAt:U,stats:{likes:0,views:0,comments:0,shares:0,reclips:0},isBookmarked:!1,isFollowing:!1,userLiked:!1,stickers:f||void 0,templateId:h||void 0,bannerText:y||void 0,textStyle:p||void 0,taggedUsers:S||void 0,videoCaptionsEnabled:x||void 0,videoCaptionText:v||void 0,subtitlesEnabled:b||void 0,subtitleText:w||void 0,...J};bt.unshift(_e),console.log(" Post created and added to posts array. Total posts:",bt.length),console.log(" New post mediaUrl:",((H=_e.mediaUrl)==null?void 0:H.substring(0,50))||"undefined","isBlob:",(q=_e.mediaUrl)==null?void 0:q.startsWith("blob:"),"isData:",(ie=_e.mediaUrl)==null?void 0:ie.startsWith("data:")),console.log(" New post mediaItems:",(X=_e.mediaItems)==null?void 0:X.map(Se=>{var de,F,$;return{type:Se.type,urlType:(de=Se.url)!=null&&de.startsWith("blob:")?"blob":(F=Se.url)!=null&&F.startsWith("data:")?"data":"http",urlPreview:($=Se.url)==null?void 0:$.substring(0,50)}})),console.log(" New post:",{id:_e.id.substring(0,30),mediaType:_e.mediaType,hasMediaUrl:!!_e.mediaUrl,hasMediaItems:!!_e.mediaItems&&_e.mediaItems.length>0,taggedUsers:_e.taggedUsers,templateId:_e.templateId});const Re=bt[0];return console.log("Post in array [0] taggedUsers:",Re==null?void 0:Re.taggedUsers),console.log("Post in array [0] templateId:",Re==null?void 0:Re.templateId),Mr(e,_e)}}async function u9(e){await dr(150);const t=e.trim().toLowerCase();if(!t)return{locations:[],users:[]};const n=new Set,r=new Set;bt.forEach(l=>{l.locationLabel&&l.locationLabel.toLowerCase().includes(t)&&n.add(l.locationLabel),l.userHandle.toLowerCase().includes(t)&&r.add(l.userHandle)});const a=(l,c)=>{const d=l.toLowerCase().startsWith(t)?0:1,u=c.toLowerCase().startsWith(t)?0:1;return d!==u?d-u:l.localeCompare(c)},i=Array.from(n).sort(a).slice(0,10),o=Array.from(r).sort(a).slice(0,10);return{locations:i,users:o}}const t2=Object.freeze(Object.defineProperty({__proto__:null,addComment:ip,addReply:$E,createPost:yc,decorateForUser:Mr,fetchComments:hd,fetchPostsByUser:Vh,fetchPostsPage:fd,getFollowedUsers:bo,getLastViewedTime:BE,getPostById:ra,getState:js,incrementReclips:d9,incrementShares:OE,incrementViews:Zd,get posts(){return bt},reclipPost:Rl,searchPostsAndUsers:u9,toggleBookmark:l9,toggleCommentLike:UE,toggleFollowForPost:aa,toggleLike:Ri,toggleReplyLike:zE,wasViewedRecently:c9},Symbol.toStringTag,{value:"Module"}));function f9({activeTab:e,onLocationChange:t}){const n=Xt(),r=qn(),{user:a}=tn();m.useState(!1),m.useState("");const[i,o]=m.useState(!1),[l,c]=m.useState(0),[d,u]=m.useState(null),[f,h]=m.useState(!1),g=m.useCallback(async()=>{if(a!=null&&a.id)try{const y=await bo(a.id),S=(await RE(a.id,y)).some(x=>x.stories.some(v=>!v.hasViewed&&v.expiresAt>Date.now()));h(S)}catch(y){console.error("Error checking new stories:",y)}},[a==null?void 0:a.id]);return m.useEffect(()=>{g();const y=setInterval(g,3e4),p=()=>{g()},S=()=>{g()};return window.addEventListener("storyCreated",p),window.addEventListener("storiesViewed",S),()=>{clearInterval(y),window.removeEventListener("storyCreated",p),window.removeEventListener("storiesViewed",S)}},[g]),m.useEffect(()=>{a!=null&&a.handle&&sp(a.handle).then(S=>{c(S),o(S>0)}).catch(()=>{});function y(S){var b,w;const x=(b=S.detail)==null?void 0:b.message,v=((w=S.detail)==null?void 0:w.participants)||[];a!=null&&a.handle&&v.includes(a.handle)&&x!=null&&x.senderHandle&&x.senderHandle!==a.handle&&(o(!0),u(x.senderHandle))}function p(S){var b,w;const x=(b=S.detail)==null?void 0:b.handle,v=((w=S.detail)==null?void 0:w.unread)??0;x===(a==null?void 0:a.handle)&&(o(v>0),c(v))}return window.addEventListener("conversationUpdated",y),window.addEventListener("inboxUnreadChanged",p),()=>{window.removeEventListener("conversationUpdated",y),window.removeEventListener("inboxUnreadChanged",p)}},[a==null?void 0:a.handle]),s.jsx(s.Fragment,{children:s.jsx("div",{className:"sticky top-0 z-40 bg-white/80 dark:bg-gray-950/80 backdrop-blur border-b border-gray-200 dark:border-gray-800",children:r.pathname.startsWith("/discover")?s.jsxs("div",{className:"mx-auto max-w-md px-4 h-11 flex items-center justify-between",children:[s.jsx("button",{onClick:()=>n("/feed"),className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"Back to Feed",title:"Back to Feed",children:s.jsx(Gd,{className:"w-5 h-5 text-gray-700 dark:text-gray-200"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{const y=(a==null?void 0:a.local)||"Finglas";try{sessionStorage.setItem("pendingLocation",y),window.dispatchEvent(new CustomEvent("locationChange",{detail:{location:y}}))}catch{}n(`/feed?location=${encodeURIComponent(y)}`)},className:"px-3 py-1.5 rounded-xl text-xs font-medium transition-all active:scale-[.98] border-2 border-dashed border-blue-400 dark:border-blue-500 bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",title:`View ${(a==null?void 0:a.local)||"Local"} feed`,children:(a==null?void 0:a.local)||"Local"}),s.jsx(It,{src:a==null?void 0:a.avatarUrl,name:((a==null?void 0:a.handle)||"User").split("@")[0],size:"sm"})]})]}):s.jsx("div",{className:"mx-auto max-w-md px-4 h-11 flex items-center justify-between",children:s.jsx("div",{className:"flex items-center gap-2"})})})})}function _u(){const[e,t]=D.useState(navigator.onLine);return D.useEffect(()=>{const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n),window.addEventListener("offline",r),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}},[]),e}function Ar(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function HE(e,t){let n;const r=()=>{if(n)return n;const a=indexedDB.open(e);return a.onupgradeneeded=()=>a.result.createObjectStore(t),n=Ar(a),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(a,i)=>r().then(o=>i(o.transaction(t,a).objectStore(t)))}let dg;function Ws(){return dg||(dg=HE("keyval-store","keyval")),dg}function Vb(e,t=Ws()){return t("readonly",n=>Ar(n.get(e)))}function Gb(e,t,n=Ws()){return n("readwrite",r=>(r.put(t,e),Ar(r.transaction)))}function h9(e,t=Ws()){return t("readwrite",n=>(e.forEach(r=>n.put(r[1],r[0])),Ar(n.transaction)))}function m9(e,t=Ws()){return t("readonly",n=>Promise.all(e.map(r=>Ar(n.get(r)))))}function WE(e,t,n=Ws()){return n("readwrite",r=>new Promise((a,i)=>{r.get(e).onsuccess=function(){try{r.put(t(this.result),e),a(Ar(r.transaction))}catch(o){i(o)}}}))}function VE(e,t=Ws()){return t("readwrite",n=>(n.delete(e),Ar(n.transaction)))}function p9(e,t=Ws()){return t("readwrite",n=>(e.forEach(r=>n.delete(r)),Ar(n.transaction)))}function g9(e=Ws()){return e("readwrite",t=>(t.clear(),Ar(t.transaction)))}function Kb(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Ar(e.transaction)}function x9(e=Ws()){return e("readonly",t=>{if(t.getAllKeys)return Ar(t.getAllKeys());const n=[];return Kb(t,r=>n.push(r.key)).then(()=>n)})}function y9(e=Ws()){return e("readonly",t=>{if(t.getAll)return Ar(t.getAll());const n=[];return Kb(t,r=>n.push(r.value)).then(()=>n)})}function b9(e=Ws()){return e("readonly",t=>{if(t.getAll&&t.getAllKeys)return Promise.all([Ar(t.getAllKeys()),Ar(t.getAll())]).then(([r,a])=>r.map((i,o)=>[i,a[o]]));const n=[];return e("readonly",r=>Kb(r,a=>n.push([a.key,a.value])).then(()=>n))})}const GE=Object.freeze(Object.defineProperty({__proto__:null,clear:g9,createStore:HE,del:VE,delMany:p9,entries:b9,get:Vb,getMany:m9,keys:x9,promisifyRequest:Ar,set:Gb,setMany:h9,update:WE,values:y9},Symbol.toStringTag,{value:"Module"})),px={get:Vb,set:Gb,del:VE,update:WE},gx="mutations";async function Un(e){const t={...e,id:crypto.randomUUID(),at:Date.now()};await px.update(gx,(n=[])=>[...n,t])}async function v9(e){let t=await px.get(gx)??[];for(const n of t)try{await e(n),t=t.filter(r=>r.id!==n.id),await px.set(gx,t)}catch{break}}function n2(e){const n=Date.now()-e,r=Math.floor(n/6e4),a=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<1?"now":r<60?`${r}m`:a<24?`${a}h`:`${i}d`}function w9({comment:e,onLikeComment:t,onLikeReply:n,onReply:r,userId:a,postId:i}){var _;const{user:o}=tn(),[l,c]=m.useState(e.userLiked),[d,u]=m.useState(e.likes),[f,h]=m.useState(!1),[g,y]=m.useState(!1),[p,S]=m.useState(!1),[x,v]=m.useState(""),[b,w]=m.useState(!1);m.useEffect(()=>{c(e.userLiked),u(e.likes)},[e.userLiked,e.likes]);const N=async()=>{if(!(!x.trim()||b)){w(!0);try{await r(e.id,x.trim()),v(""),S(!1)}catch(W){console.error("Failed to add reply:",W)}finally{w(!1)}}},R=e.replyCount||0,C=R>0;return s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 mb-4",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(It,{src:(o==null?void 0:o.handle)===e.userHandle?o==null?void 0:o.avatarUrl:void 0,name:((_=e.userHandle)==null?void 0:_.split("@")[0])||"User",size:"sm"}),s.jsx("span",{className:"font-medium text-sm",children:e.userHandle}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:n2(e.createdAt)})]}),s.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-3",children:e.text}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>t(e.id),disabled:f,className:"flex items-center gap-1 px-2 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50","aria-pressed":l,"aria-label":l?"Unlike comment":"Like comment",children:[l?s.jsx($h,{className:"text-red-500",size:16}):s.jsx(Ba,{size:16}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:d})]}),s.jsx("button",{onClick:()=>S(!p),className:"text-xs text-gray-600 dark:text-gray-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors",children:"Reply"})]}),p&&s.jsx("div",{className:"mt-3 ml-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:x,onChange:W=>v(W.target.value),placeholder:"Write a reply...",className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent text-sm",disabled:b}),s.jsx("button",{onClick:N,disabled:!x.trim()||b,className:"p-2 rounded-lg bg-brand-600 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-brand-700 transition-colors",children:s.jsx(np,{size:14})})]})}),C&&s.jsxs("div",{className:"mt-3 ml-4",children:[s.jsxs("button",{onClick:()=>y(!g),className:"flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 hover:text-brand-600 dark:hover:text-brand-400 transition-colors",children:[g?s.jsx(nU,{size:14}):s.jsx(tU,{size:14}),"View ",R," ",R===1?"reply":"replies"]}),g&&e.replies&&s.jsx("div",{className:"mt-2 space-y-3",children:e.replies.map(W=>{var T;return s.jsxs("div",{className:"border-l-2 border-gray-200 dark:border-gray-700 pl-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(It,{src:(o==null?void 0:o.handle)===W.userHandle?o==null?void 0:o.avatarUrl:void 0,name:((T=W.userHandle)==null?void 0:T.split("@")[0])||"User",size:"sm"}),s.jsx("span",{className:"font-medium text-xs",children:W.userHandle}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:n2(W.createdAt)})]}),s.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-200 mb-2",children:W.text}),s.jsxs("button",{onClick:()=>n(e.id,W.id),className:"flex items-center gap-1 px-1 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[W.userLiked?s.jsx($h,{className:"text-red-500",size:12}):s.jsx(Ba,{size:12}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:W.likes})]})]},W.id)})})]})]})})})}function k9({placeholder:e,onSubmit:t,isLoading:n}){const{user:r}=tn(),[a,i]=m.useState(""),o=l=>{l.preventDefault(),a.trim()&&!n&&(t(a.trim()),i(""))};return s.jsxs("form",{onSubmit:o,className:"flex items-center gap-2 p-3 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(It,{src:r==null?void 0:r.avatarUrl,name:(r==null?void 0:r.name)||"User",size:"sm"}),s.jsx("input",{type:"text",value:a,onChange:l=>i(l.target.value),placeholder:e,className:"flex-1 px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent",disabled:n}),s.jsx("button",{type:"submit",disabled:!a.trim()||n,className:"p-2 rounded-lg bg-brand-600 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-brand-700 transition-colors",children:s.jsx(np,{size:16})})]})}function Yb({postId:e,isOpen:t,onClose:n}){const{user:r}=tn(),a=_u(),[i,o]=m.useState([]),[l,c]=m.useState(!1),[d,u]=m.useState(!1);m.useEffect(()=>{t&&f()},[t,e]);const f=async()=>{c(!0);try{const S=await hd(e);o(S)}catch(S){console.error("Failed to load comments:",S)}finally{c(!1)}},h=async S=>{if(!r)return;const x={id:`temp-${Date.now()}`,postId:e,userHandle:r.handle||"Anonymous",text:S,createdAt:Date.now(),likes:0,userLiked:!1};o(v=>[...v,x]),u(!0);try{if(!a){await Un({type:"comment",postId:e,userId:r.id,text:S});return}const v=await ip(e,r.handle||"darraghdublin",S);o(b=>b.map(w=>w.id===x.id?v:w)),window.dispatchEvent(new CustomEvent(`commentAdded-${e}`))}catch(v){console.error("Failed to add comment:",v)}finally{u(!1)}},g=async S=>{if(r){o(x=>x.map(v=>{if(v.id!==S)return v;const w=!v.userLiked,N=(v.likes||0)+(w?1:-1);return{...v,userLiked:w,likes:N}}));try{if(!a){await Un({type:"commentLike",commentId:S,userId:r.id});return}const x=await UE(S);o(v=>v.map(b=>b.id===S?x:b))}catch(x){console.error("Failed to like comment:",x)}}},y=async(S,x)=>{if(r)try{if(!a){await Un({type:"replyLike",parentCommentId:S,replyId:x,userId:r.id});return}const v=await zE(S,x);o(b=>b.map(w=>w.id===S?v:w))}catch(v){console.error("Failed to like reply:",v)}},p=async(S,x)=>{if(!r)return;const v={id:`temp-reply-${Date.now()}`,postId:e,userHandle:r.handle||"Anonymous",text:x,createdAt:Date.now(),likes:0,userLiked:!1,parentId:S};o(b=>b.map(w=>w.id===S?{...w,replies:[...w.replies||[],v],replyCount:(w.replyCount||0)+1}:w));try{if(!a){await Un({type:"reply",postId:e,parentId:S,userId:r.id,text:x});return}const b=await $E(e,S,r.handle||"darraghdublin",x);o(w=>w.map(N=>N.id===S?{...N,replies:(N.replies||[]).map(R=>R.id===v.id?b:R),replyCount:(N.replyCount||0)+0}:N)),window.dispatchEvent(new CustomEvent(`commentAdded-${e}`))}catch(b){console.error("Failed to add reply:",b)}};return t?s.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end md:items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:n}),s.jsxs("div",{className:"relative bg-white dark:bg-gray-950 w-full max-w-md h-[80vh] md:h-[70vh] rounded-t-2xl md:rounded-2xl shadow-xl flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Comments"}),s.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close comments",children:s.jsx(pt,{size:20})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600"})}):i.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(tp,{size:48,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No comments yet"}),s.jsx("p",{className:"text-sm",children:"Be the first to comment!"})]}):s.jsx("div",{className:"space-y-4",children:i.map(S=>s.jsx(w9,{comment:S,onLikeComment:g,onLikeReply:y,onReply:p,userId:(r==null?void 0:r.id)||"",postId:e},S.id))})}),s.jsx(k9,{placeholder:"Write a comment...",onSubmit:h,isLoading:d}),!a&&s.jsx("div",{className:"px-4 py-2 bg-amber-50 dark:bg-amber-950 text-amber-900 dark:text-amber-200 text-xs border-t border-amber-200 dark:border-amber-800",children:"You're offline. Comments will sync when back online."})]})]}):null}function zt(e,t=2e3){try{const n="app-toast-container";let r=document.getElementById(n);r||(r=document.createElement("div"),r.id=n,r.style.position="fixed",r.style.left="50%",r.style.bottom="24px",r.style.transform="translateX(-50%)",r.style.zIndex="9999",r.style.pointerEvents="none",document.body.appendChild(r));const a=document.createElement("div");a.textContent=e,a.style.pointerEvents="auto",a.style.background="rgba(17,24,39,0.92)",a.style.color="#fff",a.style.padding="10px 14px",a.style.marginTop="8px",a.style.borderRadius="10px",a.style.boxShadow="0 8px 24px rgba(0,0,0,0.25)",a.style.fontSize="14px",a.style.fontWeight="600",a.style.opacity="0",a.style.transition="opacity 200ms ease, transform 200ms ease",a.style.transform="translateY(8px)",r.appendChild(a),requestAnimationFrame(()=>{a.style.opacity="1",a.style.transform="translateY(0)"}),setTimeout(()=>{a.style.opacity="0",a.style.transform="translateY(8px)",setTimeout(()=>a.remove(),220)},t)}catch{alert(e)}}function KE({title:e,description:t,image:n,url:r,type:a="website"}){const i=(o,l,c=!0)=>{const d=c?"property":"name";let u=document.querySelector(`meta[${d}="${o}"]`);u||(u=document.createElement("meta"),u.setAttribute(d,o),document.head.appendChild(u)),u.setAttribute("content",l)};e&&(document.title=e,i("og:title",e),i("twitter:title",e,!1)),t&&(i("og:description",t),i("twitter:description",t,!1),i("description",t,!1)),n&&(i("og:image",n),i("twitter:image",n,!1),i("twitter:card","summary_large_image",!1)),r&&i("og:url",r),i("og:type",a)}function S9(){KE({title:"Newsfeed",description:"Share your moments on Newsfeed",image:void 0,url:window.location.origin,type:"website"})}const YE={"Sarah@Artane":"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop","Liam@cork":"https://images.unsplash.com/photo-1607746882042-944635dfe10e?w=400&h=400&fit=crop","Ava@galway":"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400&h=400&fit=crop","Noah@london":"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=400&h=400&fit=crop"};function zn(e){if(e)return YE[e]||void 0}function j9(e,t){e&&(YE[e]=t)}const qE={"Sarah@Artane":""};function zs(e){if(e)return qE[e]||void 0}function N9(e,t){e&&(qE[e]=t)}const C9=Object.freeze(Object.defineProperty({__proto__:null,getAvatarForHandle:zn,getFlagForHandle:zs,setAvatarForHandle:j9,setFlagForHandle:N9},Symbol.toStringTag,{value:"Module"})),op=({isOpen:e,onClose:t,post:n})=>{const[r,a]=D.useState(!1),i=Xt(),{user:o}=tn(),l=`${window.location.origin}/post/${n.id}`,c=n.text?n.text.substring(0,100)+(n.text.length>100?"...":""):"Check out this post",d=`${c} by ${n.userHandle}`;if(D.useEffect(()=>{if(e){const x=zn(n.userHandle),v=n.mediaUrl||x||void 0;return KE({title:`${c} by ${n.userHandle}`,description:n.text?n.text.substring(0,200):`Check out this post by ${n.userHandle}`,image:v,url:l,type:"article"}),()=>{S9()}}},[e,n.id,c,n.text,n.userHandle,n.mediaUrl,l]),!e)return null;console.log("ShareModal rendered with post:",n);const u=async()=>{try{await navigator.clipboard.writeText(l),a(!0),setTimeout(()=>a(!1),2e3)}catch(x){console.error("Failed to copy link:",x)}};async function f(x){const w=document.createElement("canvas");w.width=1080,w.height=1920;const N=w.getContext("2d"),R=N.createLinearGradient(0,0,1080,1920);R.addColorStop(0,"#0ea5e9"),R.addColorStop(.5,"#8b5cf6"),R.addColorStop(1,"#f43f5e"),N.fillStyle=R,N.fillRect(0,0,1080,1920),N.fillStyle="#ffffff",N.textAlign="center",N.textBaseline="middle";const _=1080-96*2;let W=64;N.font=`${W}px Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial`;function T(X){const V=X.split(/\s+/),z=[];let J="";for(const U of V){const ue=J?J+" "+U:U;N.measureText(ue).width>_?(J&&z.push(J),J=U):J=ue}return J&&z.push(J),z}const E=(x||"Shared from the feed").slice(0,240);let B=T(E);for(;B.length>10&&W>36;)W-=6,N.font=`${W}px Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial`,B=T(E);const H=W*1.35,q=B.length*H;let ie=1920/2-q/2;for(const X of B)N.fillText(X,1080/2,ie),ie+=H;return w.toDataURL("image/png")}const h=async()=>{if(console.log("Share to story clicked",n),!o){alert("Please sign in to share clips.");return}const x=200,v=n.text&&n.text.length>x?n.text.substring(0,x)+"...":n.text;try{let b=n.mediaUrl,w=n.mediaType||"image";b||(b=await f(v||""),w="image"),await fx(o.id,o.handle||"",b,w,v,n.locationLabel,void 0,void 0,n.id,n.userHandle),t(),zt==null||zt("You shared this to Clips 24!"),i("/stories",{state:{openUserHandle:o.handle}})}catch(b){console.error("Failed to share to clips:",b),alert("Failed to share to Clips 24. Please try again.")}},g=x=>{const v=encodeURIComponent(l),b=encodeURIComponent(d);let w="";switch(x){case"whatsapp":w=`https://wa.me/?text=${b}%20${v}`;break;case"facebook":w=`https://www.facebook.com/sharer/sharer.php?u=${v}`;break;case"twitter":w=`https://twitter.com/intent/tweet?text=${b}&url=${v}`;break;case"gmail":w=`mailto:?subject=${b}&body=${b}%0A%0A${v}`;break;case"linkedin":w=`https://www.linkedin.com/sharing/share-offsite/?url=${v}`;break;default:return}window.open(w,"_blank","width=600,height=400")},y=[{id:"copy",name:"Copy Link",icon:s.jsx(Vd,{className:"w-6 h-6"}),color:"bg-gray-100 hover:bg-gray-200 text-gray-800",action:u},{id:"whatsapp",name:"WhatsApp",icon:s.jsx("div",{className:"w-6 h-6 bg-green-500 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:"W"})}),color:"bg-green-50 hover:bg-green-100 text-green-800",action:()=>g("whatsapp")},{id:"facebook",name:"Facebook",icon:s.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:"f"})}),color:"bg-blue-50 hover:bg-blue-100 text-blue-800",action:()=>g("facebook")},{id:"twitter",name:"X (Twitter)",icon:s.jsx("div",{className:"w-6 h-6 bg-black rounded flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:"X"})}),color:"bg-gray-50 hover:bg-gray-100 text-gray-800",action:()=>g("twitter")},{id:"gmail",name:"Gmail",icon:s.jsx("div",{className:"w-6 h-6 bg-red-500 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:"G"})}),color:"bg-red-50 hover:bg-red-100 text-red-800",action:()=>g("gmail")},{id:"linkedin",name:"LinkedIn",icon:s.jsx("div",{className:"w-6 h-6 bg-blue-700 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold",children:"in"})}),color:"bg-blue-50 hover:bg-blue-100 text-blue-800",action:()=>g("linkedin")}],p=async()=>{if(!(o!=null&&o.handle)){alert("Please sign in to share to DMs.");return}t(),i("/inbox",{state:{sharePostUrl:l,sharePostId:n.id}});try{await navigator.clipboard.writeText(l),zt==null||zt("Post link ready! Select a conversation to share.")}catch(x){console.error("Failed to copy link:",x)}},S=[{id:"story",name:"Share to Clip",icon:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"bg-gradient-to-br from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",action:h},{id:"dm",name:"Share to DM",icon:s.jsx(Uh,{className:"w-6 h-6"}),color:"bg-gradient-to-br from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white",action:p},...y];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-[200]",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-md rounded-t-3xl shadow-2xl transform transition-transform duration-300 ease-out",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx(Nu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Share Post"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Share this post with others"})]})]}),s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:s.jsx(pt,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"grid grid-cols-2 gap-4 auto-rows-fr",children:S.map(x=>s.jsxs("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),x.action()},className:`flex items-center gap-3 p-4 rounded-xl transition-all duration-200 hover:scale-105 ${x.color}`,children:[x.icon,s.jsx("span",{className:"font-medium",children:x.name}),x.id==="copy"&&r&&s.jsx("span",{className:"text-xs text-green-600 ml-auto",children:"Copied!"})]},x.id))}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:n.userHandle.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:n.userHandle}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:n.locationLabel})]}),n.text&&s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:n.text}),s.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsx(cU,{className:"w-3 h-3 inline mr-1"}),l]})]})]})})]})]})})};function Oa({overlay:e,onUpdate:t,onRemove:n,isSelected:r,onSelect:a,containerWidth:i,containerHeight:o}){const[l,c]=m.useState(!1),[d,u]=m.useState(!1),[f,h]=m.useState(!1),[g,y]=m.useState({x:0,y:0}),[p,S]=m.useState(null),x=m.useRef(null),v=e.x/100*i,b=e.y/100*o,w=t.toString().includes("() => {}")||n.toString().includes("() => {}");function N(H){if(H.stopPropagation(),w)return;const q=H.target;q.closest("button")||q.closest(".cursor-nwse-resize")||q.closest(".cursor-w-resize")||q.closest(".cursor-e-resize")||(a(),c(!0),y({x:H.clientX-v,y:H.clientY-b}),S({...e}))}function R(H){var q,ie;if(l&&p){const X=(H.clientX-g.x)/i*100,V=(H.clientY-g.y)/o*100;t({...e,x:Math.max(0,Math.min(100,X)),y:Math.max(0,Math.min(100,V))})}else if(d&&p){const X=(q=x.current)==null?void 0:q.getBoundingClientRect();if(X){const V=X.left+X.width/2,z=X.top+X.height/2,J=Math.sqrt(Math.pow(H.clientX-V,2)+Math.pow(H.clientY-z,2)),U=e.sticker.category==="GIF"?80:50,ue=Math.max(.5,Math.min(2,J/U));t({...e,scale:ue})}}else if(f&&p){const X=(ie=x.current)==null?void 0:ie.getBoundingClientRect();if(X){const V=X.left+X.width/2,z=X.top+X.height/2,J=Math.atan2(H.clientY-z,H.clientX-V)*(180/Math.PI);t({...e,rotation:J})}}}function C(){c(!1),u(!1),h(!1),S(null)}m.useEffect(()=>{if(l||d||f){const H=q=>{if(l&&p){const ie=(q.clientX-g.x)/i*100,X=(q.clientY-g.y)/o*100;t({...e,x:Math.max(0,Math.min(100,ie)),y:Math.max(0,Math.min(100,X))})}else if(d&&p&&x.current){const ie=x.current.getBoundingClientRect(),X=ie.left+ie.width/2,V=ie.top+ie.height/2,z=Math.sqrt(Math.pow(q.clientX-X,2)+Math.pow(q.clientY-V,2)),U=Math.max(.5,Math.min(2,z/50));t({...e,scale:U})}else if(f&&p&&x.current){const ie=x.current.getBoundingClientRect(),X=ie.left+ie.width/2,V=ie.top+ie.height/2,z=Math.atan2(q.clientY-V,q.clientX-X)*(180/Math.PI);t({...e,rotation:z})}};return document.addEventListener("mousemove",H),document.addEventListener("mouseup",C),()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",C)}}},[l,d,f,p,g,e,t,i,o]);function _(){t({...e,scale:Math.min(2,e.scale+.1)})}function W(){t({...e,scale:Math.max(.5,e.scale-.1)})}function T(){t({...e,rotation:(e.rotation+15)%360})}const B=(e.sticker.category==="GIF"?80:50)*e.scale;return s.jsxs("div",{ref:x,className:`absolute ${w?"cursor-default":"cursor-move"} ${r&&!w?"ring-2 ring-purple-500":""}`,style:{left:`${e.x}%`,top:`${e.y}%`,transform:`translate(-50%, -50%) rotate(${e.rotation}deg)`,opacity:e.opacity,width:`${B}px`,height:`${B}px`,zIndex:r?10:1,pointerEvents:w?"none":"auto",userSelect:"none"},onMouseDown:N,onMouseMove:R,onMouseUp:C,children:[s.jsx("div",{className:"sticker-content w-full h-full flex items-center justify-center",style:{pointerEvents:"none"},children:e.sticker.emoji?s.jsx("span",{className:"text-4xl",style:{fontSize:`${B*.8}px`,pointerEvents:"none"},children:e.sticker.emoji}):e.sticker.url?s.jsx("img",{src:e.sticker.url,alt:"",className:"w-full h-full object-contain",onError:H=>{H.target.style.display="none"},loading:"lazy",style:{pointerEvents:"none"}}):e.sticker.category==="Text"&&e.sticker.name?s.jsx("span",{className:"font-bold drop-shadow-lg whitespace-nowrap",style:{fontSize:`${B*.6}px`,color:e.textColor||"#FFFFFF",textShadow:"2px 2px 4px rgba(0,0,0,0.8), -1px -1px 2px rgba(0,0,0,0.8)",pointerEvents:"none"},children:e.textContent||e.sticker.name}):e.sticker.category==="GIF"?null:s.jsx("span",{className:"text-white text-xs",style:{pointerEvents:"none"},children:e.sticker.name})}),r&&!w&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:H=>{H.stopPropagation(),n()},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors z-20",children:s.jsx(pt,{className:"w-3 h-3"})}),s.jsxs("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 flex gap-1 bg-black/60 rounded-lg p-1 z-20",children:[s.jsx("button",{onClick:H=>{H.stopPropagation(),W()},className:"p-1 text-white hover:bg-white/20 rounded transition-colors",children:s.jsx(mU,{className:"w-3 h-3"})}),s.jsx("button",{onClick:H=>{H.stopPropagation(),_()},className:"p-1 text-white hover:bg-white/20 rounded transition-colors",children:s.jsx(Mb,{className:"w-3 h-3"})}),s.jsx("button",{onClick:H=>{H.stopPropagation(),T()},className:"p-1 text-white hover:bg-white/20 rounded transition-colors",children:s.jsx(Ab,{className:"w-3 h-3"})})]}),s.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 bg-purple-500 rounded-full cursor-nwse-resize transform translate-x-1/2 translate-y-1/2 z-20 shadow-lg border-2 border-white hover:bg-purple-600 transition-colors",onMouseDown:H=>{H.stopPropagation(),u(!0),S({...e})}})]})]})}const XE=D.createContext({});function T9(e){const t=D.useRef(null);return t.current===null&&(t.current=e()),t.current}const qb=typeof window<"u",E9=qb?D.useLayoutEffect:D.useEffect,Xb=D.createContext(null);function Jb(e,t){e.indexOf(t)===-1&&e.push(t)}function Zb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ua=(e,t,n)=>n>t?t:n<e?e:n;let Qb=()=>{};const za={},JE=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function ZE(e){return typeof e=="object"&&e!==null}const QE=e=>/^0[^.\s]+$/u.test(e);function ev(e){let t;return()=>(t===void 0&&(t=e()),t)}const ws=e=>e,_9=(e,t)=>n=>t(e(n)),Ru=(...e)=>e.reduce(_9),Qd=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class tv{constructor(){this.subscriptions=[]}add(t){return Jb(this.subscriptions,t),()=>Zb(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ca=e=>e*1e3,bs=e=>e/1e3;function e5(e,t){return t?e*(1e3/t):0}const t5=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,R9=1e-7,L9=12;function I9(e,t,n,r,a){let i,o,l=0;do o=t+(n-t)/2,i=t5(o,r,a)-e,i>0?n=o:t=o;while(Math.abs(i)>R9&&++l<L9);return o}function Lu(e,t,n,r){if(e===t&&n===r)return ws;const a=i=>I9(i,0,1,e,n);return i=>i===0||i===1?i:t5(a(i),t,r)}const n5=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,r5=e=>t=>1-e(1-t),s5=Lu(.33,1.53,.69,.99),nv=r5(s5),a5=n5(nv),i5=e=>(e*=2)<1?.5*nv(e):.5*(2-Math.pow(2,-10*(e-1))),rv=e=>1-Math.sin(Math.acos(e)),o5=r5(rv),l5=n5(rv),P9=Lu(.42,0,1,1),M9=Lu(0,0,.58,1),c5=Lu(.42,0,.58,1),A9=e=>Array.isArray(e)&&typeof e[0]!="number",d5=e=>Array.isArray(e)&&typeof e[0]=="number",D9={linear:ws,easeIn:P9,easeInOut:c5,easeOut:M9,circIn:rv,circInOut:l5,circOut:o5,backIn:nv,backInOut:a5,backOut:s5,anticipate:i5},F9=e=>typeof e=="string",r2=e=>{if(d5(e)){Qb(e.length===4);const[t,n,r,a]=e;return Lu(t,n,r,a)}else if(F9(e))return D9[e];return e},jf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],s2={value:null,addProjectionMetrics:null};function B9(e,t){let n=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function d(f){o.has(f)&&(u.schedule(f),e()),c++,f(l)}const u={schedule:(f,h=!1,g=!1)=>{const p=g&&a?n:r;return h&&o.add(f),p.has(f)||p.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(l=f,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(d),t&&s2.value&&s2.value.frameloop[t].push(c),c=0,n.clear(),a=!1,i&&(i=!1,u.process(f))}};return u}const O9=40;function u5(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=jf.reduce((b,w)=>(b[w]=B9(i,t?w:void 0),b),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:f,preRender:h,render:g,postRender:y}=o,p=()=>{const b=za.useManualTiming?a.timestamp:performance.now();n=!1,za.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(b-a.timestamp,O9),1)),a.timestamp=b,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),f.process(a),h.process(a),g.process(a),y.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(p))},S=()=>{n=!0,r=!0,a.isProcessing||e(p)};return{schedule:jf.reduce((b,w)=>{const N=o[w];return b[w]=(R,C=!1,_=!1)=>(n||S(),N.schedule(R,C,_)),b},{}),cancel:b=>{for(let w=0;w<jf.length;w++)o[jf[w]].cancel(b)},state:a,steps:o}}const{schedule:Tn,cancel:Ai,state:hr,steps:ug}=u5(typeof requestAnimationFrame<"u"?requestAnimationFrame:ws,!0);let Yf;function U9(){Yf=void 0}const Vr={now:()=>(Yf===void 0&&Vr.set(hr.isProcessing||za.useManualTiming?hr.timestamp:performance.now()),Yf),set:e=>{Yf=e,queueMicrotask(U9)}},f5=e=>t=>typeof t=="string"&&t.startsWith(e),sv=f5("--"),z9=f5("var(--"),av=e=>z9(e)?$9.test(e.split("/*")[0].trim()):!1,$9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},eu={...bc,transform:e=>Ua(0,1,e)},Nf={...bc,default:1},md=e=>Math.round(e*1e5)/1e5,iv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function H9(e){return e==null}const W9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ov=(e,t)=>n=>!!(typeof n=="string"&&W9.test(n)&&n.startsWith(e)||t&&!H9(n)&&Object.prototype.hasOwnProperty.call(n,t)),h5=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,i,o,l]=r.match(iv);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},V9=e=>Ua(0,255,e),fg={...bc,transform:e=>Math.round(V9(e))},uo={test:ov("rgb","red"),parse:h5("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+fg.transform(e)+", "+fg.transform(t)+", "+fg.transform(n)+", "+md(eu.transform(r))+")"};function G9(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const xx={test:ov("#"),parse:G9,transform:uo.transform},Iu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),qa=Iu("deg"),da=Iu("%"),dt=Iu("px"),K9=Iu("vh"),Y9=Iu("vw"),a2=(()=>({...da,parse:e=>da.parse(e)/100,transform:e=>da.transform(e*100)}))(),hl={test:ov("hsl","hue"),parse:h5("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+da.transform(md(t))+", "+da.transform(md(n))+", "+md(eu.transform(r))+")"},Zn={test:e=>uo.test(e)||xx.test(e)||hl.test(e),parse:e=>uo.test(e)?uo.parse(e):hl.test(e)?hl.parse(e):xx.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?uo.transform(e):hl.transform(e),getAnimatableNone:e=>{const t=Zn.parse(e);return t.alpha=0,Zn.transform(t)}},q9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function X9(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(iv))==null?void 0:t.length)||0)+(((n=e.match(q9))==null?void 0:n.length)||0)>0}const m5="number",p5="color",J9="var",Z9="var(",i2="${}",Q9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(Q9,c=>(Zn.test(c)?(r.color.push(i),a.push(p5),n.push(Zn.parse(c))):c.startsWith(Z9)?(r.var.push(i),a.push(J9),n.push(c)):(r.number.push(i),a.push(m5),n.push(parseFloat(c))),++i,i2)).split(i2);return{values:n,split:l,indexes:r,types:a}}function g5(e){return tu(e).values}function x5(e){const{split:t,types:n}=tu(e),r=t.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],a[o]!==void 0){const l=n[o];l===m5?i+=md(a[o]):l===p5?i+=Zn.transform(a[o]):i+=a[o]}return i}}const e7=e=>typeof e=="number"?0:Zn.test(e)?Zn.getAnimatableNone(e):e;function t7(e){const t=g5(e);return x5(e)(t.map(e7))}const Di={test:X9,parse:g5,createTransformer:x5,getAnimatableNone:t7};function hg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function n7({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,o=0;if(!t)a=i=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;a=hg(c,l,e+1/3),i=hg(c,l,e),o=hg(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Gh(e,t){return n=>n>0?t:e}const Rn=(e,t,n)=>e+(t-e)*n,mg=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},r7=[xx,uo,hl],s7=e=>r7.find(t=>t.test(e));function o2(e){const t=s7(e);if(!t)return!1;let n=t.parse(e);return t===hl&&(n=n7(n)),n}const l2=(e,t)=>{const n=o2(e),r=o2(t);if(!n||!r)return Gh(e,t);const a={...n};return i=>(a.red=mg(n.red,r.red,i),a.green=mg(n.green,r.green,i),a.blue=mg(n.blue,r.blue,i),a.alpha=Rn(n.alpha,r.alpha,i),uo.transform(a))},yx=new Set(["none","hidden"]);function a7(e,t){return yx.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function i7(e,t){return n=>Rn(e,t,n)}function lv(e){return typeof e=="number"?i7:typeof e=="string"?av(e)?Gh:Zn.test(e)?l2:c7:Array.isArray(e)?y5:typeof e=="object"?Zn.test(e)?l2:o7:Gh}function y5(e,t){const n=[...e],r=n.length,a=e.map((i,o)=>lv(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=a[o](i);return n}}function o7(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=lv(e[a])(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function l7(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][r[i]],l=e.values[o]??0;n[a]=l,r[i]++}return n}const c7=(e,t)=>{const n=Di.createTransformer(t),r=tu(e),a=tu(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?yx.has(e)&&!a.values.length||yx.has(t)&&!r.values.length?a7(e,t):Ru(y5(l7(r,a),a.values),n):Gh(e,t)};function b5(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Rn(e,t,n):lv(e)(e,t)}const d7=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Tn.update(t,n),stop:()=>Ai(t),now:()=>hr.isProcessing?hr.timestamp:Vr.now()}},v5=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Kh=2e4;function cv(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Kh;)t+=n,r=e.next(t);return t>=Kh?1/0:t}function u7(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(cv(r),Kh);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:bs(a)}}const f7=5;function w5(e,t,n){const r=Math.max(t-f7,0);return e5(n-e(r),t-r)}const Bn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pg=.001;function h7({duration:e=Bn.duration,bounce:t=Bn.bounce,velocity:n=Bn.velocity,mass:r=Bn.mass}){let a,i,o=1-t;o=Ua(Bn.minDamping,Bn.maxDamping,o),e=Ua(Bn.minDuration,Bn.maxDuration,bs(e)),o<1?(a=d=>{const u=d*o,f=u*e,h=u-n,g=bx(d,o),y=Math.exp(-f);return pg-h/g*y},i=d=>{const f=d*o*e,h=f*n+n,g=Math.pow(o,2)*Math.pow(d,2)*e,y=Math.exp(-f),p=bx(Math.pow(d,2),o);return(-a(d)+pg>0?-1:1)*((h-g)*y)/p}):(a=d=>{const u=Math.exp(-d*e),f=(d-n)*e+1;return-pg+u*f},i=d=>{const u=Math.exp(-d*e),f=(n-d)*(e*e);return u*f});const l=5/e,c=p7(a,i,l);if(e=ca(e),isNaN(c))return{stiffness:Bn.stiffness,damping:Bn.damping,duration:e};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const m7=12;function p7(e,t,n){let r=n;for(let a=1;a<m7;a++)r=r-e(r)/t(r);return r}function bx(e,t){return e*Math.sqrt(1-t*t)}const g7=["duration","bounce"],x7=["stiffness","damping","mass"];function c2(e,t){return t.some(n=>e[n]!==void 0)}function y7(e){let t={velocity:Bn.velocity,stiffness:Bn.stiffness,damping:Bn.damping,mass:Bn.mass,isResolvedFromDuration:!1,...e};if(!c2(e,x7)&&c2(e,g7))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*Ua(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Bn.mass,stiffness:a,damping:i}}else{const n=h7(e);t={...t,...n,mass:Bn.mass},t.isResolvedFromDuration=!0}return t}function Yh(e=Bn.visualDuration,t=Bn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:f,velocity:h,isResolvedFromDuration:g}=y7({...n,velocity:-bs(n.velocity||0)}),y=h||0,p=d/(2*Math.sqrt(c*u)),S=o-i,x=bs(Math.sqrt(c/u)),v=Math.abs(S)<5;r||(r=v?Bn.restSpeed.granular:Bn.restSpeed.default),a||(a=v?Bn.restDelta.granular:Bn.restDelta.default);let b;if(p<1){const N=bx(x,p);b=R=>{const C=Math.exp(-p*x*R);return o-C*((y+p*x*S)/N*Math.sin(N*R)+S*Math.cos(N*R))}}else if(p===1)b=N=>o-Math.exp(-x*N)*(S+(y+x*S)*N);else{const N=x*Math.sqrt(p*p-1);b=R=>{const C=Math.exp(-p*x*R),_=Math.min(N*R,300);return o-C*((y+p*x*S)*Math.sinh(_)+N*S*Math.cosh(_))/N}}const w={calculatedDuration:g&&f||null,next:N=>{const R=b(N);if(g)l.done=N>=f;else{let C=N===0?y:0;p<1&&(C=N===0?ca(y):w5(b,N,R));const _=Math.abs(C)<=r,W=Math.abs(o-R)<=a;l.done=_&&W}return l.value=l.done?o:R,l},toString:()=>{const N=Math.min(cv(w),Kh),R=v5(C=>w.next(N*C).value,N,30);return N+"ms "+R},toTransition:()=>{}};return w}Yh.applyToOptions=e=>{const t=u7(e,100,Yh);return e.ease=t.ease,e.duration=ca(t.duration),e.type="keyframes",e};function vx({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const f=e[0],h={done:!1,value:f},g=_=>l!==void 0&&_<l||c!==void 0&&_>c,y=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let p=n*t;const S=f+p,x=o===void 0?S:o(S);x!==S&&(p=x-f);const v=_=>-p*Math.exp(-_/r),b=_=>x+v(_),w=_=>{const W=v(_),T=b(_);h.done=Math.abs(W)<=d,h.value=h.done?x:T};let N,R;const C=_=>{g(h.value)&&(N=_,R=Yh({keyframes:[h.value,y(h.value)],velocity:w5(b,_,h.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return C(0),{calculatedDuration:null,next:_=>{let W=!1;return!R&&N===void 0&&(W=!0,w(_),C(_)),N!==void 0&&_>=N?R.next(_-N):(!W&&w(_),h)}}}function b7(e,t,n){const r=[],a=n||za.mix||b5,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ws:t;l=Ru(c,l)}r.push(l)}return r}function v7(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(Qb(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=b7(t,r,a),c=l.length,d=u=>{if(o&&u<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(u<e[f+1]);f++);const h=Qd(e[f],e[f+1],u);return l[f](h)};return n?u=>d(Ua(e[0],e[i-1],u)):d}function w7(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=Qd(0,t,r);e.push(Rn(n,1,a))}}function k7(e){const t=[0];return w7(t,e.length-1),t}function S7(e,t){return e.map(n=>n*t)}function j7(e,t){return e.map(()=>t||c5).splice(0,e.length-1)}function pd({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=A9(r)?r.map(r2):r2(r),i={done:!1,value:t[0]},o=S7(n&&n.length===t.length?n:k7(t),e),l=v7(o,t,{ease:Array.isArray(a)?a:j7(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const N7=e=>e!==null;function dv(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(N7),l=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const C7={decay:vx,inertia:vx,tween:pd,keyframes:pd,spring:Yh};function k5(e){typeof e.type=="string"&&(e.type=C7[e.type])}class uv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const T7=e=>e/100;class fv extends uv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:n}=this.options;n&&n.updatedAt!==Vr.now()&&this.tick(Vr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;k5(t);const{type:n=pd,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=n||pd;c!==pd&&typeof l[0]!="number"&&(this.mixKeyframes=Ru(T7,b5(l[0],l[1])),l=[0,100]);const d=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=cv(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:u,repeat:f,repeatType:h,repeatDelay:g,type:y,onUpdate:p,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?x<0:x>a;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let b=this.currentTime,w=r;if(f){const _=Math.min(this.currentTime,a)/l;let W=Math.floor(_),T=_%1;!T&&_>=1&&(T=1),T===1&&W--,W=Math.min(W,f+1),!!(W%2)&&(h==="reverse"?(T=1-T,g&&(T-=g/l)):h==="mirror"&&(w=o)),b=Ua(0,1,T)*l}const N=v?{done:!1,value:u[0]}:w.next(b);i&&(N.value=i(N.value));let{done:R}=N;!v&&c!==null&&(R=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return C&&y!==vx&&(N.value=dv(u,this.options,S,this.speed)),p&&p(N.value),C&&this.finish(),N}then(t,n){return this.finished.then(t,n)}get duration(){return bs(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+bs(t)}get time(){return bs(this.currentTime)}set time(t){var n;t=ca(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Vr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=bs(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:t=d7,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function E7(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const fo=e=>e*180/Math.PI,wx=e=>{const t=fo(Math.atan2(e[1],e[0]));return kx(t)},_7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:wx,rotateZ:wx,skewX:e=>fo(Math.atan(e[1])),skewY:e=>fo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},kx=e=>(e=e%360,e<0&&(e+=360),e),d2=wx,u2=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),f2=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),R7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:u2,scaleY:f2,scale:e=>(u2(e)+f2(e))/2,rotateX:e=>kx(fo(Math.atan2(e[6],e[5]))),rotateY:e=>kx(fo(Math.atan2(-e[2],e[0]))),rotateZ:d2,rotate:d2,skewX:e=>fo(Math.atan(e[4])),skewY:e=>fo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Sx(e){return e.includes("scale")?1:0}function jx(e,t){if(!e||e==="none")return Sx(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=R7,a=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=_7,a=l}if(!a)return Sx(t);const i=r[t],o=a[1].split(",").map(I7);return typeof i=="function"?i(o):o[i]}const L7=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return jx(n,t)};function I7(e){return parseFloat(e.trim())}const vc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wc=(()=>new Set(vc))(),h2=e=>e===bc||e===dt,P7=new Set(["x","y","z"]),M7=vc.filter(e=>!P7.has(e));function A7(e){const t=[];return M7.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const vo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>jx(t,"x"),y:(e,{transform:t})=>jx(t,"y")};vo.translateX=vo.x;vo.translateY=vo.y;const wo=new Set;let Nx=!1,Cx=!1,Tx=!1;function S5(){if(Cx){const e=Array.from(wo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=A7(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Cx=!1,Nx=!1,wo.forEach(e=>e.complete(Tx)),wo.clear()}function j5(){wo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Cx=!0)})}function D7(){Tx=!0,j5(),S5(),Tx=!1}class hv{constructor(t,n,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(wo.add(this),Nx||(Nx=!0,Tn.read(j5),Tn.resolveKeyframes(S5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),a&&i===void 0&&a.set(t[0])}E7(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),wo.delete(this)}cancel(){this.state==="scheduled"&&(wo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const F7=e=>e.startsWith("--");function B7(e,t,n){F7(t)?e.style.setProperty(t,n):e.style[t]=n}const O7=ev(()=>window.ScrollTimeline!==void 0),U7={};function z7(e,t){const n=ev(e);return()=>U7[t]??n()}const N5=z7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Jc=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,m2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jc([0,.65,.55,1]),circOut:Jc([.55,0,1,.45]),backIn:Jc([.31,.01,.66,-.59]),backOut:Jc([.33,1.53,.69,.99])};function C5(e,t){if(e)return typeof e=="function"?N5()?v5(e,t):"ease-out":d5(e)?Jc(e):Array.isArray(e)?e.map(n=>C5(n,t)||m2.easeOut):m2[e]}function $7(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[t]:n};c&&(u.offset=c);const f=C5(l,a);Array.isArray(f)&&(u.easing=f);const h={delay:r,duration:a,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(h.pseudoElement=d),e.animate(u,h)}function T5(e){return typeof e=="function"&&"applyToOptions"in e}function H7({type:e,...t}){return T5(e)&&N5()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class W7 extends uv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Qb(typeof t.type!="string");const d=H7(t);this.animation=$7(n,r,a,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=dv(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):B7(n,r,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return bs(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+bs(t)}get time(){return bs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ca(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&O7()?(this.animation.timeline=t,ws):n(this)}}const E5={anticipate:i5,backInOut:a5,circInOut:l5};function V7(e){return e in E5}function G7(e){typeof e.ease=="string"&&V7(e.ease)&&(e.ease=E5[e.ease])}const p2=10;class K7 extends W7{constructor(t){G7(t),k5(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new fv({...o,autoplay:!1}),c=ca(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-p2).value,l.sample(c).value,p2),l.stop()}}const g2=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Di.test(e)||e==="0")&&!e.startsWith("url("));function Y7(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function q7(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=g2(a,t),l=g2(i,t);return!o||!l?!1:Y7(e)||(n==="spring"||T5(n))&&r}function Ex(e){e.duration=0,e.type="keyframes"}const X7=new Set(["opacity","clipPath","filter","transform"]),J7=ev(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Z7(e){var u;const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!(((u=t==null?void 0:t.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return J7()&&n&&X7.has(n)&&(n!=="transform"||!d)&&!c&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const Q7=40;class ez extends uv{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u,...f}){var y;super(),this.stop=()=>{var p,S;this._animation&&(this._animation.stop(),(p=this.stopTimeline)==null||p.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=Vr.now();const h={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u,...f},g=(u==null?void 0:u.KeyframeResolver)||hv;this.keyframeResolver=new g(l,(p,S,x)=>this.onKeyframesResolved(p,S,h,!x),c,d,u),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:u}=r;this.resolvedAt=Vr.now(),q7(t,i,o,l)||((za.instantAnimations||!c)&&(u==null||u(dv(t,r,n))),t[0]=t[t.length-1],Ex(r),r.repeat=0);const h={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>Q7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},g=!d&&Z7(h)?new K7({...h,element:h.motionValue.owner.current}):new fv(h);g.finished.then(()=>this.notifyFinished()).catch(ws),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),D7()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const tz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function nz(e){const t=tz.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function _5(e,t,n=1){const[r,a]=nz(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return JE(o)?parseFloat(o):o}return av(a)?_5(a,t,n+1):a}function mv(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const R5=new Set(["width","height","top","left","right","bottom",...vc]),rz={test:e=>e==="auto",parse:e=>e},L5=e=>t=>t.test(e),I5=[bc,dt,da,qa,Y9,K9,rz],x2=e=>I5.find(L5(e));function sz(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||QE(e):!0}const az=new Set(["brightness","contrast","saturate","opacity"]);function iz(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(iv)||[];if(!r)return e;const a=n.replace(r,"");let i=az.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const oz=/\b([a-z-]*)\(.*?\)/gu,_x={...Di,getAnimatableNone:e=>{const t=e.match(oz);return t?t.map(iz).join(" "):e}},y2={...bc,transform:Math.round},lz={rotate:qa,rotateX:qa,rotateY:qa,rotateZ:qa,scale:Nf,scaleX:Nf,scaleY:Nf,scaleZ:Nf,skew:qa,skewX:qa,skewY:qa,distance:dt,translateX:dt,translateY:dt,translateZ:dt,x:dt,y:dt,z:dt,perspective:dt,transformPerspective:dt,opacity:eu,originX:a2,originY:a2,originZ:dt},pv={borderWidth:dt,borderTopWidth:dt,borderRightWidth:dt,borderBottomWidth:dt,borderLeftWidth:dt,borderRadius:dt,radius:dt,borderTopLeftRadius:dt,borderTopRightRadius:dt,borderBottomRightRadius:dt,borderBottomLeftRadius:dt,width:dt,maxWidth:dt,height:dt,maxHeight:dt,top:dt,right:dt,bottom:dt,left:dt,padding:dt,paddingTop:dt,paddingRight:dt,paddingBottom:dt,paddingLeft:dt,margin:dt,marginTop:dt,marginRight:dt,marginBottom:dt,marginLeft:dt,backgroundPositionX:dt,backgroundPositionY:dt,...lz,zIndex:y2,fillOpacity:eu,strokeOpacity:eu,numOctaves:y2},cz={...pv,color:Zn,backgroundColor:Zn,outlineColor:Zn,fill:Zn,stroke:Zn,borderColor:Zn,borderTopColor:Zn,borderRightColor:Zn,borderBottomColor:Zn,borderLeftColor:Zn,filter:_x,WebkitFilter:_x},P5=e=>cz[e];function M5(e,t){let n=P5(e);return n!==_x&&(n=Di),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const dz=new Set(["auto","none","0"]);function uz(e,t,n){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!dz.has(i)&&tu(i).values.length&&(a=e[r]),r++}if(a&&n)for(const i of t)e[i]=M5(n,a)}class fz extends hv{constructor(t,n,r,a,i){super(t,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),av(d))){const u=_5(d,n.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!R5.has(r)||t.length!==2)return;const[a,i]=t,o=x2(a),l=x2(i);if(o!==l)if(h2(o)&&h2(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else vo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||sz(t[a]))&&r.push(a);r.length&&uz(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=vo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function hz(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;t&&(r=t.current);const a=(n==null?void 0:n[e])??r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const A5=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function mz(e){return ZE(e)&&"offsetHeight"in e}const b2=30,pz=e=>!isNaN(parseFloat(e));class gz{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const a=Vr.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Vr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=pz(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new tv);const r=this.events[t].add(n);return t==="change"?()=>{r(),Tn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Vr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>b2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,b2);return e5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jl(e,t){return new gz(e,t)}const{schedule:gv,cancel:Uq}=u5(queueMicrotask,!1),Rs={x:!1,y:!1};function D5(){return Rs.x||Rs.y}function xz(e){return e==="x"||e==="y"?Rs[e]?null:(Rs[e]=!0,()=>{Rs[e]=!1}):Rs.x||Rs.y?null:(Rs.x=Rs.y=!0,()=>{Rs.x=Rs.y=!1})}function F5(e,t){const n=hz(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function v2(e){return!(e.pointerType==="touch"||D5())}function yz(e,t,n={}){const[r,a,i]=F5(e,n),o=l=>{if(!v2(l))return;const{target:c}=l,d=t(c,l);if(typeof d!="function"||!c)return;const u=f=>{v2(f)&&(d(f),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,a)};return r.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const B5=(e,t)=>t?e===t?!0:B5(e,t.parentElement):!1,xv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,bz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vz(e){return bz.has(e.tagName)||e.tabIndex!==-1}const qf=new WeakSet;function w2(e){return t=>{t.key==="Enter"&&e(t)}}function gg(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const wz=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=w2(()=>{if(qf.has(n))return;gg(n,"down");const a=w2(()=>{gg(n,"up")}),i=()=>gg(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function k2(e){return xv(e)&&!D5()}function kz(e,t,n={}){const[r,a,i]=F5(e,n),o=l=>{const c=l.currentTarget;if(!k2(l))return;qf.add(c);const d=t(c,l),u=(g,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),qf.has(c)&&qf.delete(c),k2(g)&&typeof d=="function"&&d(g,{success:y})},f=g=>{u(g,c===window||c===document||n.useGlobalTarget||B5(c,g.target))},h=g=>{u(g,!1)};window.addEventListener("pointerup",f,a),window.addEventListener("pointercancel",h,a)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),mz(l)&&(l.addEventListener("focus",d=>wz(d,a)),!vz(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function O5(e){return ZE(e)&&"ownerSVGElement"in e}function Sz(e){return O5(e)&&e.tagName==="svg"}const vr=e=>!!(e&&e.getVelocity),jz=[...I5,Zn,Di],Nz=e=>jz.find(L5(e)),U5=D.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Cz(e=!0){const t=D.useContext(Xb);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=D.useId();D.useEffect(()=>{if(e)return a(i)},[e]);const o=D.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const z5=D.createContext({strict:!1}),S2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zl={};for(const e in S2)Zl[e]={isEnabled:t=>S2[e].some(n=>!!t[n])};function Tz(e){for(const t in e)Zl[t]={...Zl[t],...e[t]}}const Ez=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ez.has(e)}let $5=e=>!qh(e);function _z(e){typeof e=="function"&&($5=t=>t.startsWith("on")?!qh(t):e(t))}try{_z(require("@emotion/is-prop-valid").default)}catch{}function Rz(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||($5(a)||n===!0&&qh(a)||!t&&!qh(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}const lp=D.createContext({});function cp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function nu(e){return typeof e=="string"||Array.isArray(e)}const yv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bv=["initial",...yv];function dp(e){return cp(e.animate)||bv.some(t=>nu(e[t]))}function H5(e){return!!(dp(e)||e.variants)}function Lz(e,t){if(dp(e)){const{initial:n,animate:r}=e;return{initial:n===!1||nu(n)?n:void 0,animate:nu(r)?r:void 0}}return e.inherit!==!1?t:{}}function Iz(e){const{initial:t,animate:n}=Lz(e,D.useContext(lp));return D.useMemo(()=>({initial:t,animate:n}),[j2(t),j2(n)])}function j2(e){return Array.isArray(e)?e.join(" "):e}const ru={};function Pz(e){for(const t in e)ru[t]=e[t],sv(t)&&(ru[t].isCSSVariable=!0)}function W5(e,{layout:t,layoutId:n}){return wc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!ru[e]||e==="opacity")}const Mz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Az=vc.length;function Dz(e,t,n){let r="",a=!0;for(let i=0;i<Az;i++){const o=vc[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=A5(l,pv[o]);if(!c){a=!1;const u=Mz[o]||o;r+=`${u}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function vv(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(wc.has(c)){o=!0;continue}else if(sv(c)){a[c]=d;continue}else{const u=A5(d,pv[c]);c.startsWith("origin")?(l=!0,i[c]=u):r[c]=u}}if(t.transform||(o||n?r.transform=Dz(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;r.transformOrigin=`${c} ${d} ${u}`}}const wv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function V5(e,t,n){for(const r in t)!vr(t[r])&&!W5(r,n)&&(e[r]=t[r])}function Fz({transformTemplate:e},t){return D.useMemo(()=>{const n=wv();return vv(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Bz(e,t){const n=e.style||{},r={};return V5(r,n,e),Object.assign(r,Fz(e,t)),r}function Oz(e,t){const n={},r=Bz(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Uz={offset:"stroke-dashoffset",array:"stroke-dasharray"},zz={offset:"strokeDashoffset",array:"strokeDasharray"};function $z(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?Uz:zz;e[i.offset]=dt.transform(-r);const o=dt.transform(t),l=dt.transform(n);e[i.array]=`${o} ${l}`}function G5(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},c,d,u){if(vv(e,l,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),a!==void 0&&$z(f,a,i,o,!1)}const K5=()=>({...wv(),attrs:{}}),Y5=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Hz(e,t,n,r){const a=D.useMemo(()=>{const i=K5();return G5(i,t,Y5(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};V5(i,e.style,e),a.style={...i,...a.style}}return a}const Wz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kv(e){return typeof e!="string"||e.includes("-")?!1:!!(Wz.indexOf(e)>-1||/[A-Z]/u.test(e))}function Vz(e,t,n,{latestValues:r},a,i=!1){const l=(kv(e)?Hz:Oz)(t,r,a,e),c=Rz(t,typeof e=="string",i),d=e!==D.Fragment?{...c,...l,ref:n}:{},{children:u}=t,f=D.useMemo(()=>vr(u)?u.get():u,[u]);return D.createElement(e,{...d,children:f})}function N2(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Sv(e,t,n,r){if(typeof t=="function"){const[a,i]=N2(r);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=N2(r);t=t(n!==void 0?n:e.custom,a,i)}return t}function Xf(e){return vr(e)?e.get():e}function Gz({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:Kz(n,r,a,e),renderState:t()}}function Kz(e,t,n,r){const a={},i=r(e,{});for(const h in i)a[h]=Xf(i[h]);let{initial:o,animate:l}=e;const c=dp(e),d=H5(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?l:o;if(f&&typeof f!="boolean"&&!cp(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const y=Sv(e,h[g]);if(y){const{transitionEnd:p,transition:S,...x}=y;for(const v in x){let b=x[v];if(Array.isArray(b)){const w=u?b.length-1:0;b=b[w]}b!==null&&(a[v]=b)}for(const v in p)a[v]=p[v]}}}return a}const q5=e=>(t,n)=>{const r=D.useContext(lp),a=D.useContext(Xb),i=()=>Gz(e,t,r,a);return n?i():T9(i)};function jv(e,t,n){var i;const{style:r}=e,a={};for(const o in r)(vr(r[o])||t.style&&vr(t.style[o])||W5(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(a[o]=r[o]);return a}const Yz=q5({scrapeMotionValuesFromProps:jv,createRenderState:wv});function X5(e,t,n){const r=jv(e,t,n);for(const a in e)if(vr(e[a])||vr(t[a])){const i=vc.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const qz=q5({scrapeMotionValuesFromProps:X5,createRenderState:K5}),Xz=Symbol.for("motionComponentSymbol");function ml(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Jz(e,t,n){return D.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ml(n)&&(n.current=r))},[t])}const Nv=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Zz="framerAppearId",J5="data-"+Nv(Zz),Z5=D.createContext({});function Qz(e,t,n,r,a){var p,S;const{visualElement:i}=D.useContext(lp),o=D.useContext(z5),l=D.useContext(Xb),c=D.useContext(U5).reducedMotion,d=D.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const u=d.current,f=D.useContext(Z5);u&&!u.projection&&a&&(u.type==="html"||u.type==="svg")&&e$(d.current,n,a,f);const h=D.useRef(!1);D.useInsertionEffect(()=>{u&&h.current&&u.update(n,l)});const g=n[J5],y=D.useRef(!!g&&!((p=window.MotionHandoffIsComplete)!=null&&p.call(window,g))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,g)));return E9(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),y.current&&u.animationState&&u.animationState.animateChanges())}),D.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,g)}),y.current=!1),u.enteringChildren=void 0)}),u}function e$(e,t,n,r){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Q5(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&ml(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:d})}function Q5(e){if(e)return e.options.allowProjection!==!1?e.projection:Q5(e.parent)}function xg(e,{forwardMotionProps:t=!1}={},n,r){n&&Tz(n);const a=kv(e)?qz:Yz;function i(l,c){let d;const u={...D.useContext(U5),...l,layoutId:t$(l)},{isStatic:f}=u,h=Iz(l),g=a(l,f);if(!f&&qb){n$();const y=r$(u);d=y.MeasureLayout,h.visualElement=Qz(e,g,u,r,y.ProjectionNode)}return s.jsxs(lp.Provider,{value:h,children:[d&&h.visualElement?s.jsx(d,{visualElement:h.visualElement,...u}):null,Vz(e,l,Jz(g,h.visualElement,c),g,f,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=D.forwardRef(i);return o[Xz]=e,o}function t$({layoutId:e}){const t=D.useContext(XE).id;return t&&e!==void 0?t+"-"+e:e}function n$(e,t){D.useContext(z5).strict}function r$(e){const{drag:t,layout:n}=Zl;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function s$(e,t){if(typeof Proxy>"u")return xg;const n=new Map,r=(i,o)=>xg(i,o,e,t),a=(i,o)=>r(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,xg(o,void 0,e,t)),n.get(o))})}function e4({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function a$({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function i$(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function yg(e){return e===void 0||e===1}function Rx({scale:e,scaleX:t,scaleY:n}){return!yg(e)||!yg(t)||!yg(n)}function so(e){return Rx(e)||t4(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function t4(e){return C2(e.x)||C2(e.y)}function C2(e){return e&&e!=="0%"}function Xh(e,t,n){const r=e-n,a=t*r;return n+a}function T2(e,t,n,r,a){return a!==void 0&&(e=Xh(e,a,r)),Xh(e,n,r)+t}function Lx(e,t=0,n=1,r,a){e.min=T2(e.min,t,n,r,a),e.max=T2(e.max,t,n,r,a)}function n4(e,{x:t,y:n}){Lx(e.x,t.translate,t.scale,t.originPoint),Lx(e.y,n.translate,n.scale,n.originPoint)}const E2=.999999999999,_2=1.0000000000001;function o$(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=n[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&gl(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,n4(e,o)),r&&so(i.latestValues)&&gl(e,i.latestValues))}t.x<_2&&t.x>E2&&(t.x=1),t.y<_2&&t.y>E2&&(t.y=1)}function pl(e,t){e.min=e.min+t,e.max=e.max+t}function R2(e,t,n,r,a=.5){const i=Rn(e.min,e.max,a);Lx(e,t,n,i,r)}function gl(e,t){R2(e.x,t.x,t.scaleX,t.scale,t.originX),R2(e.y,t.y,t.scaleY,t.scale,t.originY)}function r4(e,t){return e4(i$(e.getBoundingClientRect(),t))}function l$(e,t,n){const r=r4(e,n),{scroll:a}=t;return a&&(pl(r.x,a.offset.x),pl(r.y,a.offset.y)),r}const L2=()=>({translate:0,scale:1,origin:0,originPoint:0}),xl=()=>({x:L2(),y:L2()}),I2=()=>({min:0,max:0}),Vn=()=>({x:I2(),y:I2()}),Ix={current:null},s4={current:!1};function c$(){if(s4.current=!0,!!qb)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ix.current=e.matches;e.addEventListener("change",t),t()}else Ix.current=!1}const d$=new WeakMap;function u$(e,t,n){for(const r in t){const a=t[r],i=n[r];if(vr(a))e.addValue(r,a);else if(vr(i))e.addValue(r,Jl(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(r);e.addValue(r,Jl(o!==void 0?o:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const P2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class f${scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Vr.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Tn.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=dp(n),this.isVariantNode=H5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const g=f[h];c[h]!==void 0&&vr(g)&&g.set(c[h])}}mount(t){var n;this.current=t,d$.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),s4.current||c$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ix.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Ai(this.notifyUpdate),Ai(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=wc.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Tn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zl){const n=Zl[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<P2.length;r++){const a=P2[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=u$(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Jl(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(JE(r)||QE(r))?r=parseFloat(r):!Nz(r)&&Di.test(n)&&(r=M5(t,n)),this.setBaseTarget(t,vr(r)?r.get():r)),vr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Sv(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!vr(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new tv),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){gv.render(this.render)}}class a4 extends f${constructor(){super(...arguments),this.KeyframeResolver=fz}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;vr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function i4(e,{style:t,vars:n},r,a){const i=e.style;let o;for(o in t)i[o]=t[o];a==null||a.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function h$(e){return window.getComputedStyle(e)}class m$ extends a4{constructor(){super(...arguments),this.type="html",this.renderInstance=i4}readValueFromInstance(t,n){var r;if(wc.has(n))return(r=this.projection)!=null&&r.isProjecting?Sx(n):L7(t,n);{const a=h$(t),i=(sv(n)?a.getPropertyValue(n):a[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return r4(t,n)}build(t,n,r){vv(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return jv(t,n,r)}}const o4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function p$(e,t,n,r){i4(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(o4.has(a)?a:Nv(a),t.attrs[a])}class g$ extends a4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(wc.has(n)){const r=P5(n);return r&&r.default||0}return n=o4.has(n)?n:Nv(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return X5(t,n,r)}build(t,n,r){G5(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){p$(t,n,r,a)}mount(t){this.isSVGTag=Y5(t.tagName),super.mount(t)}}const x$=(e,t)=>kv(e)?new g$(t):new m$(t,{allowProjection:e!==D.Fragment});function Ll(e,t,n){const r=e.getProps();return Sv(r,t,n!==void 0?n:r.custom,e)}const Px=e=>Array.isArray(e);function y$(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Jl(n))}function b$(e){return Px(e)?e[e.length-1]||0:e}function v$(e,t){const n=Ll(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const o in i){const l=b$(i[o]);y$(e,o,l)}}function w$(e){return!!(vr(e)&&e.add)}function Mx(e,t){const n=e.getValue("willChange");if(w$(n))return n.add(t);if(!n&&za.WillChange){const r=new za.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function l4(e){return e.props[J5]}const k$=e=>e!==null;function S$(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(k$),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return!i||r===void 0?a[i]:r}const j$={type:"spring",stiffness:500,damping:25,restSpeed:10},N$=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),C$={type:"keyframes",duration:.8},T$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},E$=(e,{keyframes:t})=>t.length>2?C$:wc.has(e)?e.startsWith("scale")?N$(t[1]):j$:T$;function _$({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const Cv=(e,t,n,r={},a,i)=>o=>{const l=mv(r,e)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ca(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:h=>{t.set(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};_$(l)||Object.assign(u,E$(e,u)),u.duration&&(u.duration=ca(u.duration)),u.repeatDelay&&(u.repeatDelay=ca(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Ex(u),u.delay===0&&(f=!0)),(za.instantAnimations||za.skipAnimations)&&(f=!0,Ex(u),u.delay=0),u.allowFlatten=!l.type&&!l.ease,f&&!i&&t.get()!==void 0){const h=S$(u.keyframes,l);if(h!==void 0){Tn.update(()=>{u.onUpdate(h),u.onComplete()});return}}return l.isSync?new fv(u):new ez(u)};function R$({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function c4(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(i=r);const c=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const f=e.getValue(u,e.latestValues[u]??null),h=l[u];if(h===void 0||d&&R$(d,u))continue;const g={delay:n,...mv(i||{},u)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===y&&!g.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const x=l4(e);if(x){const v=window.MotionHandoffAnimation(x,u,Tn);v!==null&&(g.startTime=v,p=!0)}}Mx(e,u),f.start(Cv(u,f,h,e.shouldReduceMotion&&R5.has(u)?{type:!1}:g,e,p));const S=f.animation;S&&c.push(S)}return o&&Promise.all(c).then(()=>{Tn.update(()=>{o&&v$(e,o)})}),c}function d4(e,t,n,r=0,a=1){const i=Array.from(e).sort((d,u)=>d.sortNodePosition(u)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(i,o):a===1?i*r:l-i*r}function Ax(e,t,n={}){var c;const r=Ll(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(c4(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=a;return L$(e,t,d,u,f,h,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,u]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function L$(e,t,n=0,r=0,a=0,i=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(Ax(c,t,{...o,delay:n+(typeof r=="function"?0:r)+d4(e.variantChildren,c,r,a,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function I$(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>Ax(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=Ax(e,t,n);else{const a=typeof t=="function"?Ll(e,t,n.custom):t;r=Promise.all(c4(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function u4(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const P$=bv.length;function f4(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?f4(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<P$;n++){const r=bv[n],a=e.props[r];(nu(a)||a===!1)&&(t[r]=a)}return t}const M$=[...yv].reverse(),A$=yv.length;function D$(e){return t=>Promise.all(t.map(({animation:n,options:r})=>I$(e,n,r)))}function F$(e){let t=D$(e),n=M2(),r=!0;const a=c=>(d,u)=>{var h;const f=Ll(e,u,c==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:g,transitionEnd:y,...p}=f;d={...d,...p,...y}}return d};function i(c){t=c(e)}function o(c){const{props:d}=e,u=f4(e.parent)||{},f=[],h=new Set;let g={},y=1/0;for(let S=0;S<A$;S++){const x=M$[S],v=n[x],b=d[x]!==void 0?d[x]:u[x],w=nu(b),N=x===c?v.isActive:null;N===!1&&(y=S);let R=b===u[x]&&b!==d[x]&&w;if(R&&r&&e.manuallyAnimateOnMount&&(R=!1),v.protectedKeys={...g},!v.isActive&&N===null||!b&&!v.prevProp||cp(b)||typeof b=="boolean")continue;const C=B$(v.prevProp,b);let _=C||x===c&&v.isActive&&!R&&w||S>y&&w,W=!1;const T=Array.isArray(b)?b:[b];let E=T.reduce(a(x),{});N===!1&&(E={});const{prevResolvedValues:B={}}=v,H={...B,...E},q=V=>{_=!0,h.has(V)&&(W=!0,h.delete(V)),v.needsAnimating[V]=!0;const z=e.getValue(V);z&&(z.liveStyle=!1)};for(const V in H){const z=E[V],J=B[V];if(g.hasOwnProperty(V))continue;let U=!1;Px(z)&&Px(J)?U=!u4(z,J):U=z!==J,U?z!=null?q(V):h.add(V):z!==void 0&&h.has(V)?q(V):v.protectedKeys[V]=!0}v.prevProp=b,v.prevResolvedValues=E,v.isActive&&(g={...g,...E}),r&&e.blockInitialAnimation&&(_=!1);const ie=R&&C;_&&(!ie||W)&&f.push(...T.map(V=>{const z={type:x};if(typeof V=="string"&&r&&!ie&&e.manuallyAnimateOnMount&&e.parent){const{parent:J}=e,U=Ll(J,V);if(J.enteringChildren&&U){const{delayChildren:ue}=U.transition||{};z.delay=d4(J.enteringChildren,e,ue)}}return{animation:V,options:z}}))}if(h.size){const S={};if(typeof d.initial!="boolean"){const x=Ll(e,Array.isArray(d.initial)?d.initial[0]:d.initial);x&&x.transition&&(S.transition=x.transition)}h.forEach(x=>{const v=e.getBaseTarget(x),b=e.getValue(x);b&&(b.liveStyle=!0),S[x]=v??null}),f.push({animation:S})}let p=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(f):Promise.resolve()}function l(c,d){var f;if(n[c].isActive===d)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(h=>{var g;return(g=h.animationState)==null?void 0:g.setActive(c,d)}),n[c].isActive=d;const u=o(c);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=M2()}}}function B$(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!u4(t,e):!1}function Qi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function M2(){return{animate:Qi(!0),whileInView:Qi(),whileHover:Qi(),whileTap:Qi(),whileDrag:Qi(),whileFocus:Qi(),exit:Qi()}}class Wi{constructor(t){this.isMounted=!1,this.node=t}update(){}}class O$ extends Wi{constructor(t){super(t),t.animationState||(t.animationState=F$(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();cp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let U$=0;class z$ extends Wi{constructor(){super(...arguments),this.id=U$++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const $$={animation:{Feature:O$},exit:{Feature:z$}};function su(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Pu(e){return{point:{x:e.pageX,y:e.pageY}}}const H$=e=>t=>xv(t)&&e(t,Pu(t));function gd(e,t,n,r){return su(e,t,H$(n),r)}const h4=1e-4,W$=1-h4,V$=1+h4,m4=.01,G$=0-m4,K$=0+m4;function Ir(e){return e.max-e.min}function Y$(e,t,n){return Math.abs(e-t)<=n}function A2(e,t,n,r=.5){e.origin=r,e.originPoint=Rn(t.min,t.max,e.origin),e.scale=Ir(n)/Ir(t),e.translate=Rn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=W$&&e.scale<=V$||isNaN(e.scale))&&(e.scale=1),(e.translate>=G$&&e.translate<=K$||isNaN(e.translate))&&(e.translate=0)}function xd(e,t,n,r){A2(e.x,t.x,n.x,r?r.originX:void 0),A2(e.y,t.y,n.y,r?r.originY:void 0)}function D2(e,t,n){e.min=n.min+t.min,e.max=e.min+Ir(t)}function q$(e,t,n){D2(e.x,t.x,n.x),D2(e.y,t.y,n.y)}function F2(e,t,n){e.min=t.min-n.min,e.max=e.min+Ir(t)}function yd(e,t,n){F2(e.x,t.x,n.x),F2(e.y,t.y,n.y)}function ms(e){return[e("x"),e("y")]}const p4=({current:e})=>e?e.ownerDocument.defaultView:null,B2=(e,t)=>Math.abs(e-t);function X$(e,t){const n=B2(e.x,t.x),r=B2(e.y,t.y);return Math.sqrt(n**2+r**2)}class g4{constructor(t,n,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=vg(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=X$(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!y)return;const{point:p}=h,{timestamp:S}=hr;this.history.push({...p,timestamp:S});const{onStart:x,onMove:v}=this.handlers;g||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,g)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=bg(g,this.transformPagePoint),Tn.update(this.updatePoint,!0)},this.handlePointerUp=(h,g)=>{this.end();const{onEnd:y,onSessionEnd:p,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=vg(h.type==="pointercancel"?this.lastMoveEventInfo:bg(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,x),p&&p(h,x)},!xv(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=a||window;const l=Pu(t),c=bg(l,this.transformPagePoint),{point:d}=c,{timestamp:u}=hr;this.history=[{...d,timestamp:u}];const{onSessionStart:f}=n;f&&f(t,vg(c,this.history)),this.removeListeners=Ru(gd(this.contextWindow,"pointermove",this.handlePointerMove),gd(this.contextWindow,"pointerup",this.handlePointerUp),gd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ai(this.updatePoint)}}function bg(e,t){return t?{point:t(e.point)}:e}function O2(e,t){return{x:e.x-t.x,y:e.y-t.y}}function vg({point:e},t){return{point:e,delta:O2(e,x4(t)),offset:O2(e,J$(t)),velocity:Z$(t,.1)}}function J$(e){return e[0]}function x4(e){return e[e.length-1]}function Z$(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=x4(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>ca(t)));)n--;if(!r)return{x:0,y:0};const i=bs(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Q$(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Rn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Rn(n,e,r.max):Math.min(e,n)),e}function U2(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function eH(e,{top:t,left:n,bottom:r,right:a}){return{x:U2(e.x,n,a),y:U2(e.y,t,r)}}function z2(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function tH(e,t){return{x:z2(e.x,t.x),y:z2(e.y,t.y)}}function nH(e,t){let n=.5;const r=Ir(e),a=Ir(t);return a>r?n=Qd(t.min,t.max-r,e.min):r>a&&(n=Qd(e.min,e.max-a,t.min)),Ua(0,1,n)}function rH(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Dx=.35;function sH(e=Dx){return e===!1?e=0:e===!0&&(e=Dx),{x:$2(e,"left","right"),y:$2(e,"top","bottom")}}function $2(e,t,n){return{min:H2(e,t),max:H2(e,n)}}function H2(e,t){return typeof e=="number"?e:e[t]||0}const aH=new WeakMap;class iH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Pu(f).point)},o=(f,h)=>{const{drag:g,dragPropagation:y,onDragStart:p}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xz(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ms(x=>{let v=this.getAxisMotionValue(x).get()||0;if(da.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[x];w&&(v=Ir(w)*(parseFloat(v)/100))}}this.originPoint[x]=v}),p&&Tn.postRender(()=>p(f,h)),Mx(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:p,onDrag:S}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:x}=h;if(y&&this.currentDirection===null){this.currentDirection=oH(x),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),S&&S(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ms(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new g4(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:p4(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,a=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!r)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Tn.postRender(()=>l(r,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!Cf(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=Q$(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&ml(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=eH(r.layoutBox,t):this.constraints=!1,this.elastic=sH(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ms(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rH(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ml(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=l$(r,a.root,this.visualElement.getTransformPagePoint());let o=tH(a.layout.layoutBox,i);if(n){const l=n(a$(o));this.hasMutatedConstraints=!!l,l&&(o=e4(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ms(u=>{if(!Cf(u,n,this.currentDirection))return;let f=c&&c[u]||{};o&&(f={min:0,max:0});const h=a?200:1e6,g=a?40:1e7,y={type:"inertia",velocity:r?t[u]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Mx(this.visualElement,t),r.start(Cv(t,r,0,n,this.visualElement,!1))}stopAnimation(){ms(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ms(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ms(n=>{const{drag:r}=this.getProps();if(!Cf(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[n];i.set(t[n]-Rn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ml(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ms(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=nH({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ms(o=>{if(!Cf(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Rn(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;aH.set(this.visualElement,this);const t=this.visualElement.current,n=gd(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ml(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Tn.read(r);const o=su(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ms(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=c[u].translate,f.set(f.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Dx,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Cf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function oH(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class lH extends Wi{constructor(t){super(t),this.removeGroupControls=ws,this.removeListeners=ws,this.controls=new iH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ws}unmount(){this.removeGroupControls(),this.removeListeners()}}const W2=e=>(t,n)=>{e&&Tn.postRender(()=>e(t,n))};class cH extends Wi{constructor(){super(...arguments),this.removePointerDownListener=ws}onPointerDown(t){this.session=new g4(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:p4(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:W2(t),onStart:W2(n),onMove:r,onEnd:(i,o)=>{delete this.session,a&&Tn.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=gd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function V2(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zc={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(dt.test(e))e=parseFloat(e);else return e;const n=V2(e,t.target.x),r=V2(e,t.target.y);return`${n}% ${r}%`}},dH={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=Di.parse(e);if(a.length>5)return r;const i=Di.createTransformer(e),o=typeof a[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=Rn(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};let wg=!1;class uH extends D.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;Pz(fH),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),wg&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Jf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,wg=!0,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Tn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),gv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;wg=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function y4(e){const[t,n]=Cz(),r=D.useContext(XE);return s.jsx(uH,{...e,layoutGroup:r,switchLayoutGroup:D.useContext(Z5),isPresent:t,safeToRemove:n})}const fH={borderRadius:{...zc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zc,borderTopRightRadius:zc,borderBottomLeftRadius:zc,borderBottomRightRadius:zc,boxShadow:dH};function hH(e,t,n){const r=vr(e)?e:Jl(e);return r.start(Cv("",r,t,n)),r.animation}const mH=(e,t)=>e.depth-t.depth;class pH{constructor(){this.children=[],this.isDirty=!1}add(t){Jb(this.children,t),this.isDirty=!0}remove(t){Zb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(mH),this.isDirty=!1,this.children.forEach(t)}}function gH(e,t){const n=Vr.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(Ai(r),e(i-t))};return Tn.setup(r,!0),()=>Ai(r)}const b4=["TopLeft","TopRight","BottomLeft","BottomRight"],xH=b4.length,G2=e=>typeof e=="string"?parseFloat(e):e,K2=e=>typeof e=="number"||dt.test(e);function yH(e,t,n,r,a,i){a?(e.opacity=Rn(0,n.opacity??1,bH(r)),e.opacityExit=Rn(t.opacity??1,0,vH(r))):i&&(e.opacity=Rn(t.opacity??1,n.opacity??1,r));for(let o=0;o<xH;o++){const l=`border${b4[o]}Radius`;let c=Y2(t,l),d=Y2(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||K2(c)===K2(d)?(e[l]=Math.max(Rn(G2(c),G2(d),r),0),(da.test(d)||da.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Rn(t.rotate||0,n.rotate||0,r))}function Y2(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const bH=v4(0,.5,o5),vH=v4(.5,.95,ws);function v4(e,t,n){return r=>r<e?0:r>t?1:n(Qd(e,t,r))}function q2(e,t){e.min=t.min,e.max=t.max}function hs(e,t){q2(e.x,t.x),q2(e.y,t.y)}function X2(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function J2(e,t,n,r,a){return e-=t,e=Xh(e,1/n,r),a!==void 0&&(e=Xh(e,1/a,r)),e}function wH(e,t=0,n=1,r=.5,a,i=e,o=e){if(da.test(t)&&(t=parseFloat(t),t=Rn(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Rn(i.min,i.max,r);e===i&&(l-=t),e.min=J2(e.min,t,n,l,a),e.max=J2(e.max,t,n,l,a)}function Z2(e,t,[n,r,a],i,o){wH(e,t[n],t[r],t[a],t.scale,i,o)}const kH=["x","scaleX","originX"],SH=["y","scaleY","originY"];function Q2(e,t,n,r){Z2(e.x,t,kH,n?n.x:void 0,r?r.x:void 0),Z2(e.y,t,SH,n?n.y:void 0,r?r.y:void 0)}function eS(e){return e.translate===0&&e.scale===1}function w4(e){return eS(e.x)&&eS(e.y)}function tS(e,t){return e.min===t.min&&e.max===t.max}function jH(e,t){return tS(e.x,t.x)&&tS(e.y,t.y)}function nS(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function k4(e,t){return nS(e.x,t.x)&&nS(e.y,t.y)}function rS(e){return Ir(e.x)/Ir(e.y)}function sS(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class NH{constructor(){this.members=[]}add(t){Jb(this.members,t),t.scheduleRender()}remove(t){if(Zb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CH(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:u,rotateX:f,rotateY:h,skewX:g,skewY:y}=n;d&&(r=`perspective(${d}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const kg=["","X","Y","Z"],TH=1e3;let EH=0;function Sg(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function S4(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=l4(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Tn,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&S4(r)}function j4({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=EH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(LH),this.nodes.forEach(AH),this.nodes.forEach(DH),this.nodes.forEach(IH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new pH)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new tv),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=O5(o)&&!Sz(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let u,f=0;const h=()=>this.root.updateBlockedByResize=!1;Tn.read(()=>{f=window.innerWidth}),e(o,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,u&&u(),u=gH(h,250),Jf.hasAnimatedSinceResize&&(Jf.hasAnimatedSinceResize=!1,this.nodes.forEach(oS)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||zH,{onLayoutAnimationStart:p,onLayoutAnimationComplete:S}=d.getProps(),x=!this.targetLayout||!k4(this.targetLayout,g),v=!f&&h;if(this.options.layoutRoot||this.resumeFrom||v||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...mv(y,"layout"),onPlay:p,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(u,v)}else f||oS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ai(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&S4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(iS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(MH),this.nodes.forEach(_H),this.nodes.forEach(RH)):this.nodes.forEach(iS),this.clearAllSnapshots();const l=Vr.now();hr.delta=Ua(0,1e3/60,l-hr.timestamp),hr.timestamp=l,hr.isProcessing=!0,ug.update.process(hr),ug.preRender.process(hr),ug.render.process(hr),hr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(PH),this.sharedNodes.forEach(BH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ir(this.snapshot.measuredBox.x)&&!Ir(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!w4(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||so(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),$H(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return Vn();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(HH))){const{scroll:u}=this.root;u&&(pl(l.x,u.offset.x),pl(l.y,u.offset.y))}return l}removeElementScroll(o){var c;const l=Vn();if(hs(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&hs(l,o),pl(l.x,f.offset.x),pl(l.y,f.offset.y))}return l}applyTransform(o,l=!1){const c=Vn();hs(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&gl(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),so(u.latestValues)&&gl(c,u.latestValues)}return so(this.latestValues)&&gl(c,this.latestValues),c}removeTransform(o){const l=Vn();hs(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!so(d.latestValues))continue;Rx(d.latestValues)&&d.updateSnapshot();const u=Vn(),f=d.measurePageBox();hs(u,f),Q2(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return so(this.latestValues)&&Q2(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var h;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=hr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vn(),this.relativeTargetOrigin=Vn(),yd(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Vn(),this.targetWithTransforms=Vn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),q$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hs(this.target,this.layout.layoutBox),n4(this.target,this.targetDelta)):hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vn(),this.relativeTargetOrigin=Vn(),yd(this.relativeTargetOrigin,this.target,g.target),hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Rx(this.parent.latestValues)||t4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===hr.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;hs(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;o$(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Vn());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(X2(this.prevProjectionDelta.x,this.projectionDelta.x),X2(this.prevProjectionDelta.y,this.projectionDelta.y)),xd(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!sS(this.projectionDelta.x,this.prevProjectionDelta.x)||!sS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xl(),this.projectionDelta=xl(),this.projectionDeltaWithTransform=xl()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},f=xl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=Vn(),g=c?c.source:void 0,y=this.layout?this.layout.source:void 0,p=g!==y,S=this.getStack(),x=!S||S.members.length<=1,v=!!(p&&!x&&this.options.crossfade===!0&&!this.path.some(UH));this.animationProgress=0;let b;this.mixTargetDelta=w=>{const N=w/1e3;lS(f.x,o.x,N),lS(f.y,o.y,N),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yd(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OH(this.relativeTarget,this.relativeTargetOrigin,h,N),b&&jH(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Vn()),hs(b,this.relativeTarget)),p&&(this.animationValues=u,yH(u,d,this.latestValues,N,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Ai(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tn.update(()=>{Jf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Jl(0)),this.currentAnimation=hH(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&N4(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Vn();const f=Ir(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const h=Ir(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}hs(l,c),gl(l,u),xd(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new NH),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Sg("z",o,d,this.animationValues);for(let u=0;u<kg.length;u++)Sg(`rotate${kg[u]}`,o,d,this.animationValues),Sg(`skew${kg[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Xf(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Xf(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!so(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=CH(this.projectionDeltaWithTransform,this.treeScale,u);c&&(f=c(u,f)),o.transform=f;const{x:h,y:g}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,d.animationValues?o.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const y in ru){if(u[y]===void 0)continue;const{correct:p,applyTo:S,isCSSVariable:x}=ru[y],v=f==="none"?u[y]:p(u[y],d);if(S){const b=S.length;for(let w=0;w<b;w++)o[S[w]]=v}else x?this.options.visualElement.renderState.vars[y]=v:o[y]=v}this.options.layoutId&&(o.pointerEvents=d===this?Xf(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(aS),this.root.sharedNodes.clear()}}}function _H(e){e.updateLayout()}function RH(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?ms(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],g=Ir(h);h.min=r[f].min,h.max=h.min+g}):N4(i,t.layoutBox,r)&&ms(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],g=Ir(r[f]);h.max=h.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+g)});const l=xl();xd(l,r,t.layoutBox);const c=xl();o?xd(c,e.applyTransform(a,!0),t.measuredBox):xd(c,r,t.layoutBox);const d=!w4(l);let u=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const y=Vn();yd(y,t.layoutBox,h.layoutBox);const p=Vn();yd(p,r,g.layoutBox),k4(y,p)||(u=!0),f.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=y,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function LH(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function IH(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function PH(e){e.clearSnapshot()}function aS(e){e.clearMeasurements()}function iS(e){e.isLayoutDirty=!1}function MH(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function oS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function AH(e){e.resolveTargetDelta()}function DH(e){e.calcProjection()}function FH(e){e.resetSkewAndRotation()}function BH(e){e.removeLeadSnapshot()}function lS(e,t,n){e.translate=Rn(t.translate,0,n),e.scale=Rn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function cS(e,t,n,r){e.min=Rn(t.min,n.min,r),e.max=Rn(t.max,n.max,r)}function OH(e,t,n,r){cS(e.x,t.x,n.x,r),cS(e.y,t.y,n.y,r)}function UH(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const zH={duration:.45,ease:[.4,0,.1,1]},dS=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),uS=dS("applewebkit/")&&!dS("chrome/")?Math.round:ws;function fS(e){e.min=uS(e.min),e.max=uS(e.max)}function $H(e){fS(e.x),fS(e.y)}function N4(e,t,n){return e==="position"||e==="preserve-aspect"&&!Y$(rS(t),rS(n),.2)}function HH(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const WH=j4({attachResizeListener:(e,t)=>su(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jg={current:void 0},C4=j4({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!jg.current){const e=new WH({});e.mount(window),e.setOptions({layoutScroll:!0}),jg.current=e}return jg.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),VH={pan:{Feature:cH},drag:{Feature:lH,ProjectionNode:C4,MeasureLayout:y4}};function hS(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&Tn.postRender(()=>i(t,Pu(t)))}class GH extends Wi{mount(){const{current:t}=this.node;t&&(this.unmount=yz(t,(n,r)=>(hS(this.node,r,"Start"),a=>hS(this.node,a,"End"))))}unmount(){}}class KH extends Wi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ru(su(this.node.current,"focus",()=>this.onFocus()),su(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mS(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&Tn.postRender(()=>i(t,Pu(t)))}class YH extends Wi{mount(){const{current:t}=this.node;t&&(this.unmount=kz(t,(n,r)=>(mS(this.node,r,"Start"),(a,{success:i})=>mS(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fx=new WeakMap,Ng=new WeakMap,qH=e=>{const t=Fx.get(e.target);t&&t(e)},XH=e=>{e.forEach(qH)};function JH({root:e,...t}){const n=e||document;Ng.has(n)||Ng.set(n,{});const r=Ng.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(XH,{root:e,...t})),r[a]}function ZH(e,t,n){const r=JH(t);return Fx.set(e,n),r.observe(e),()=>{Fx.delete(e),r.unobserve(e)}}const QH={some:0,all:1};class eW extends Wi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:QH[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=d?u:f;h&&h(c)};return ZH(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(tW(t,n))&&this.startObserver()}unmount(){}}function tW({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const nW={inView:{Feature:eW},tap:{Feature:YH},focus:{Feature:KH},hover:{Feature:GH}},rW={layout:{ProjectionNode:C4,MeasureLayout:y4}},sW={...$$,...nW,...VH,...rW},aW=s$(sW,x$);function iW(e,t){return""}function oW(e){return{}}const lW={},Cg={},cW={},dW={};function Tv({children:e,effect:t,isActive:n}){if(!n)return s.jsx(s.Fragment,{children:e});const{type:r,intensity:a=1,colorGrading:i}=t;if(r==="color-grading"&&i){const l=iW();return console.log(`Applying color grading: ${i} with filter: ${l}`),s.jsx("div",{style:{filter:l,width:"100%",height:"100%",position:"relative"},children:e})}if(r==="glitch-vhs"){const l=oW();return s.jsx("div",{style:{...l,width:"100%",height:"100%",position:"relative"},children:e})}let o={};return r==="camera-shake"?o={animate:a>.5?"intense":"shake",variants:lW}:r==="zoom-in"?o={animate:"zoomIn",variants:Cg,transition:{duration:.5,ease:"easeOut",repeat:1/0,repeatType:"reverse"}}:r==="zoom-out"?o={animate:"zoomOut",variants:Cg,transition:{duration:.5,ease:"easeIn",repeat:1/0,repeatType:"reverse"}}:r==="3d-zoom"?o={animate:"3d-zoom",variants:Cg,transition:{duration:1,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}}:r==="flash"?o={animate:"flash",variants:dW}:r==="slide"&&(o={animate:"slideLeft",variants:cW}),Object.keys(o).length>0?s.jsx(aW.div,{...o,style:{width:"100%",height:"100%",position:"relative"},children:e}):s.jsx(s.Fragment,{children:e})}function uW(e){const t=e.trim().toUpperCase();if(!/^[A-Z]{2}$/.test(t))return null;const n=127462,r=t.charCodeAt(0)-65,a=t.charCodeAt(1)-65;if(r<0||r>25||a<0||a>25)return null;const i=n+r,o=n+a;return`${i.toString(16)}-${o.toString(16)}`}function fW(e){if(!e)return null;const t=[];for(const n of Array.from(e)){const r=n.codePointAt(0);typeof r=="number"&&t.push(r)}return t.length<2?null:t.map(n=>n.toString(16)).join("-")}function hW(e){if(!e)return null;const t=e.trim();let n=null;return/^[A-Za-z]{2}$/.test(t)?n=uW(t):n=fW(t),n?`https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/${n}.svg`:null}function $s({value:e,size:t=18,className:n="",title:r}){if(!e)return null;const a=hW(e);return a?s.jsx("img",{src:a,width:t,height:t,className:n,alt:e,title:r||e,loading:"lazy",decoding:"async",style:{display:"inline-block"}}):s.jsx("span",{className:n,style:{fontSize:t},children:e})}function Ta(e){const n=Date.now()-e,r=Math.floor(n/1e3);if(r<60)return"Just now";const a=Math.floor(r/60);if(a<60)return a===1?"1 minute ago":`${a} minutes ago`;const i=Math.floor(a/60);if(i<24)return i===1?"1 hour ago":`${i} hours ago`;const o=Math.floor(i/24);if(o<7)return o===1?"1 day ago":`${o} days ago`;const l=Math.floor(o/7);if(l<4)return l===1?"1 week ago":`${l} weeks ago`;const c=Math.floor(o/30);if(c<12)return c===1?"1 month ago":`${c} months ago`;const d=Math.floor(o/365);return d===1?"1 year ago":`${d} years ago`}function mW({startX:e,startY:t,targetElement:n,onComplete:r}){const[a,i]=m.useState(0),[o,l]=m.useState(null),c=m.useRef(null),d=m.useRef(null),u=m.useRef(null);if(m.useEffect(()=>{if(n)try{const x=n.getBoundingClientRect(),v=x.left+x.width/2,b=x.top+x.height/2;l({x:v,y:b}),u.current=Date.now();const w=()=>{if(!u.current)return;const N=Date.now()-u.current,C=Math.min(N/800,1),_=C*C;i(_),C<1?d.current=requestAnimationFrame(w):r()};return d.current=requestAnimationFrame(w),()=>{d.current&&cancelAnimationFrame(d.current)}}catch(x){console.error("Error calculating heart animation target:",x),r()}},[n,r]),!o)return null;const f=o.x-e,h=o.y-t,g=e+f*a,y=t+h*a,p=1-a*.7,S=1-a;return s.jsx("div",{ref:c,className:"fixed pointer-events-none z-[9999]",style:{left:`${g}px`,top:`${y}px`,transform:`translate(-50%, -50%) scale(${p})`,opacity:S,transition:"none"},children:s.jsx("svg",{className:"w-20 h-20 text-red-500 drop-shadow-lg",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})})}function Mu({post:e,isOpen:t,onClose:n,onLike:r,onFollow:a,onShare:i,onOpenComments:o,onReclip:l}){var Ne,Oe,Le,Me,ke,Ue,He,Mt,Pt,fn;const[c,d]=m.useState(e.userLiked),[u,f]=m.useState(e.stats.likes),[h,g]=m.useState(e.stats.comments),[y,p]=m.useState(e.stats.shares),[S,x]=m.useState(e.stats.reclips),[v,b]=m.useState(e.isFollowing),[w,N]=m.useState(e.userReclipped||!1),[R,C]=m.useState(!1),[_,W]=m.useState(""),[T,E]=m.useState(!1),[B,H]=m.useState(!1),[q,ie]=m.useState(!1),[X,V]=m.useState(0),[z,J]=m.useState(!0),[U,ue]=m.useState(!1),[fe,Ae]=m.useState(!1),[_e,Re]=m.useState([]),[Se,de]=m.useState(!1),[F,$]=m.useState(0),[Z,Pe]=m.useState(!1),ve=m.useRef(null),re=m.useRef(0),[M,G]=m.useState(null),[P,Y]=m.useState(null),j=m.useRef(null),O=m.useRef(0),se=m.useRef(!1),K=m.useRef(null),me=m.useRef(null),pe=m.useRef(!1),[Ve,De]=m.useState({width:0,height:0}),{user:Ce}=tn(),Ft=_u(),Tt=e.mediaItems&&e.mediaItems.length>0?e.mediaItems:e.mediaUrl?[{url:e.mediaUrl,type:e.mediaType||"image"}]:[],[Jt,Nt]=m.useState(0),st=Tt.length>1,Ye=Tt[Jt];m.useEffect(()=>{if(K.current&&e.stickers&&e.stickers.length>0){const ye=()=>{var nn;const nt=(nn=K.current)==null?void 0:nn.getBoundingClientRect();nt&&De({width:nt.width,height:nt.height})};ye(),window.addEventListener("resize",ye);const Ge=new ResizeObserver(ye);return K.current&&Ge.observe(K.current),()=>{window.removeEventListener("resize",ye),Ge.disconnect()}}},[e.stickers,Jt]),m.useEffect(()=>{(Ye==null?void 0:Ye.type)==="video"&&j.current&&(j.current.paused||j.current.pause(),j.current.load(),V(0),J(!0),ue(!1)),G(null),Y(null),H(!1),pe.current=!1},[Jt,Ye==null?void 0:Ye.type]),m.useEffect(()=>{j.current&&(Ye==null?void 0:Ye.type)==="video"&&(j.current.muted=z)},[z,Ye==null?void 0:Ye.type]),m.useEffect(()=>{j.current&&(Ye==null?void 0:Ye.type)==="video"&&(U&&!j.current.paused?(j.current.pause(),j.current.currentTime=j.current.currentTime,document.querySelectorAll("video").forEach(Ge=>{Ge!==j.current&&!Ge.paused&&Ge.pause()})):!U&&j.current.paused&&j.current.play().catch(console.error))},[U,Ye==null?void 0:Ye.type]),m.useEffect(()=>{t&&document.querySelectorAll("video").forEach(Ge=>{Ge.paused||Ge.pause()})},[t]),m.useEffect(()=>{t||(j.current&&!j.current.paused&&j.current.pause(),G(null),Y(null),H(!1),pe.current=!1)},[t]);function Bt(){st&&Nt(ye=>(ye+1)%Tt.length)}function we(){st&&Nt(ye=>(ye-1+Tt.length)%Tt.length)}function tt(ye){Nt(ye)}m.useEffect(()=>{d(e.userLiked),f(e.stats.likes),g(e.stats.comments),p(e.stats.shares),x(e.stats.reclips),b(e.isFollowing),N(e.userReclipped||!1)},[e.userLiked,e.stats.likes,e.stats.comments,e.stats.shares,e.stats.reclips,e.isFollowing,e.userReclipped]),m.useEffect(()=>{const ye=async()=>{if(g(Ot=>Ot+1),fe)try{const Ot=await hd(e.id);Re(Ot)}catch(Ot){console.error("Failed to refresh comments:",Ot)}},Ge=Ot=>{console.log("ScenesModal: likeToggled event received",Ot.detail),Ot.detail&&Ot.detail.liked!==void 0&&d(Ot.detail.liked),Ot.detail&&Ot.detail.likes!==void 0&&f(Ot.detail.likes)},nt=()=>{p(Ot=>Ot+1)},nn=Ot=>{Ot.detail&&Ot.detail.reclips!==void 0?x(Ot.detail.reclips):x(Hn=>Hn+1),N(!0)};return window.addEventListener(`commentAdded-${e.id}`,ye),window.addEventListener(`likeToggled-${e.id}`,Ge),window.addEventListener(`shareAdded-${e.id}`,nt),window.addEventListener(`reclipAdded-${e.id}`,nn),()=>{window.removeEventListener(`commentAdded-${e.id}`,ye),window.removeEventListener(`likeToggled-${e.id}`,Ge),window.removeEventListener(`shareAdded-${e.id}`,nt),window.removeEventListener(`reclipAdded-${e.id}`,nn)}},[e.id,fe]),m.useEffect(()=>{function ye(Ge){Ge.key==="Escape"&&n()}return t&&(document.addEventListener("keydown",ye),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",ye),document.body.style.overflow=""}},[t,n]);async function Je(){if(R)return;C(!0);let ye=c;try{d(Ge=>(ye=Ge,!Ge)),f(Ge=>ye?Math.max(0,Ge-1):Ge+1),await r()}catch(Ge){d(ye),f(nt=>ye?nt+1:Math.max(0,nt-1)),console.error("Error toggling like:",Ge)}finally{C(!1)}}const Ze=m.useCallback(async ye=>{if(pe.current)return;const Ge=Date.now();if(Ge-O.current<cx){pe.current=!0;let nn=0,Ot=0,Hn=0,Cs=0;if(K.current&&ye){const Wt=K.current.getBoundingClientRect();"touches"in ye&&ye.touches.length>0?(Hn=ye.touches[0].clientX,Cs=ye.touches[0].clientY):"changedTouches"in ye&&ye.changedTouches.length>0?(Hn=ye.changedTouches[0].clientX,Cs=ye.changedTouches[0].clientY):"clientX"in ye?(Hn=ye.clientX,Cs=ye.clientY):(Hn=Wt.left+Wt.width/2,Cs=Wt.top+Wt.height/2),nn=Hn-Wt.left,Ot=Cs-Wt.top}else if(K.current){const Wt=K.current.getBoundingClientRect();nn=Wt.width/2,Ot=Wt.height/2,Hn=Wt.left+nn,Cs=Wt.top+Ot}if(G({x:nn,y:Ot}),H(!0),setTimeout(()=>{me.current&&Y({startX:Hn,startY:Cs})},200),setTimeout(()=>{G(null),H(!1)},400),setTimeout(()=>{pe.current=!1},1200),!R&&!c){C(!0);try{d(!0),f(Wt=>Wt+1),await r()}catch(Wt){d(!1),f(ma=>Math.max(0,ma-1)),console.error("Error toggling like:",Wt)}finally{C(!1)}}}else if((Ye==null?void 0:Ye.type)==="video"&&j.current)if(j.current.paused)j.current.play().catch(console.error),ue(!1);else{j.current.pause();const nn=j.current.currentTime;j.current.currentTime=nn,ue(!0),document.querySelectorAll("video").forEach(Hn=>{Hn!==j.current&&!Hn.paused&&Hn.pause()})}O.current=Ge},[Ye==null?void 0:Ye.type,r,R,c]),ot=m.useCallback(ye=>{if(se.current){ye.preventDefault();return}Ze(ye)},[Ze]),L=m.useCallback(ye=>{se.current=!0,Ze(ye),setTimeout(()=>{se.current=!1},300)},[Ze]);async function he(){if(!R){C(!0);try{b(ye=>!ye),await a()}catch(ye){b(e.isFollowing),console.error("Error toggling follow:",ye)}finally{C(!1)}}}function je(){console.log("Share clicked in ScenesModal, opening ShareModal, current state:",q),ie(!0),i().catch(console.error)}async function at(ye){if(ye&&(ye.stopPropagation(),ye.preventDefault()),!R&&e.userHandle!==(Ce==null?void 0:Ce.handle)&&!w){C(!0);try{await l()}catch(Ge){console.error("Error reclipping post:",Ge)}finally{C(!1)}}}const ut=async()=>{if(fe)Ae(!1),$(0);else if(Ae(!0),_e.length===0&&!Se){de(!0);try{const ye=await hd(e.id);Re(ye)}catch(ye){console.error("Failed to load comments:",ye)}finally{de(!1)}}},gt=ye=>{Pe(!0),re.current=ye.touches[0].clientY},Ct=ye=>{if(!Z)return;const nt=ye.touches[0].clientY-re.current;nt>0&&$(nt)},ne=()=>{F>100&&Ae(!1),$(0),Pe(!1)};async function ge(ye){if(ye.preventDefault(),!_.trim()||T||!Ce)return;const Ge=_.trim();W(""),E(!0);try{if(g(nt=>nt+1),!Ft)await Un({type:"comment",postId:e.id,userId:Ce.id,text:Ge});else{await ip(e.id,(Ce==null?void 0:Ce.handle)||"darraghdublin",Ge);const nt=await hd(e.id);Re(nt)}window.dispatchEvent(new CustomEvent(`commentAdded-${e.id}`,{detail:{text:Ge}}))}catch(nt){console.error("Error adding comment:",nt),W(Ge),g(nn=>Math.max(0,nn-1))}finally{E(!1)}}return t?(m.useEffect(()=>{console.log("ScenesModal - shareModalOpen changed:",q)},[q]),s.jsxs(s.Fragment,{children:[t&&s.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":"Scenes fullscreen viewer",className:"fixed inset-0 z-[100] bg-black flex items-center justify-center",children:[s.jsxs("div",{className:"absolute top-6 left-4 z-10 flex flex-col gap-1",children:[e.locationLabel&&s.jsxs("div",{className:"bg-red-500 text-white text-sm font-medium flex items-center gap-1.5 px-2 py-1 rounded",children:[s.jsx(ln,{className:"w-4 h-4"}),s.jsx("span",{children:e.locationLabel})]}),e.createdAt&&s.jsx("div",{className:"bg-black text-white text-xs px-2 py-1 rounded",children:Ta(e.createdAt)})]}),s.jsxs("div",{className:"absolute top-4 left-0 right-0 z-30 flex items-center justify-between px-4",children:[s.jsx("div",{className:"flex-1 flex justify-start"}),s.jsx("div",{className:"flex-1 flex justify-center",children:st&&s.jsxs("div",{className:"px-2 py-1 bg-black/50 text-white text-xs rounded-full",children:[Jt+1," / ",Tt.length]})}),s.jsx("div",{className:"flex-1 flex justify-end",children:s.jsx("button",{onClick:n,"aria-label":"Close scenes",className:"p-1.5 rounded-full bg-black/30 hover:bg-black/50 text-white transition-colors",children:s.jsx(pt,{size:18})})})]}),s.jsxs("div",{ref:K,className:`w-full h-full flex items-center justify-center relative select-none cursor-pointer transition-all duration-300 ease-out ${fe?"scale-[0.45] -translate-y-[25%] origin-top":"scale-100 translate-y-0"}`,onClick:ye=>{(ye.target===ye.currentTarget||ye.target instanceof HTMLElement&&!ye.target.closest("button"))&&ot(ye)},onTouchEnd:L,children:[Ye?(()=>{const ye=Ye.effects||[];if(Ye.type==="text"){let nt="",nn;if(Ye.text)nt=Ye.text,nn=Ye.textStyle;else if(Ye.url&&Ye.url.startsWith("data:text/plain;base64,"))try{const Ot=Ye.url.split(",")[1];nt=atob(Ot),nn=Ye.textStyle||{color:"#ffffff",size:"medium",background:"#000000"}}catch(Ot){console.error("Error decoding text from data URL:",Ot),nt="Text content"}return s.jsx("div",{className:"w-full h-full flex items-center justify-center p-4 bg-black",children:s.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-white border border-gray-200 shadow-2xl",style:{maxWidth:"100%",boxSizing:"border-box"},children:[s.jsx("div",{className:"flex items-start justify-between px-4 pt-4 pb-3 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx(It,{src:zn(e.userHandle),name:e.userHandle.split("@")[0],size:"sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-1.5 text-gray-900 text-sm",children:[s.jsx("span",{children:e.userHandle}),s.jsx($s,{value:zs(e.userHandle)||"",size:14})]}),s.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-2 mt-0.5",children:[e.locationLabel&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),e.locationLabel]}),e.createdAt&&s.jsx("span",{className:"text-gray-400",children:""})]}),e.createdAt&&s.jsx("span",{children:Ta(e.createdAt)})]})]})]})}),s.jsx("div",{className:"p-4 w-full overflow-hidden",style:{maxWidth:"100%",boxSizing:"border-box"},children:s.jsx("div",{className:"p-4 rounded-lg bg-black overflow-hidden w-full",style:{maxWidth:"100%",boxSizing:"border-box"},children:s.jsx("div",{className:"text-base leading-relaxed whitespace-pre-wrap font-normal text-white break-words w-full",style:{wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"100%",boxSizing:"border-box"},children:nt})})})]})})}let Ge=Ye.type==="video"?s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("video",{ref:j,className:"w-full h-full object-contain pointer-events-none",src:Ye.url,controls:!1,autoPlay:!0,loop:!0,playsInline:!0,muted:z,onPlay:()=>ue(!1),onPause:()=>ue(!0),onTimeUpdate:nt=>{const nn=nt.currentTarget;nn.duration&&V(nn.currentTime/nn.duration)}}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-black/50 z-20",children:s.jsx("div",{className:"h-full transition-all duration-100",style:{width:`${Math.max(0,Math.min(100,X*100))}%`,background:"linear-gradient(to right, rgb(255, 140, 0) 5%, rgb(248, 0, 50) 25%, rgb(255, 0, 160) 45%, rgb(140, 40, 255) 65%, rgb(0, 35, 255) 82%, rgb(25, 160, 255) 96%)",boxShadow:"0 0 12px rgba(139,92,246,0.45)"}})})]}):s.jsx("img",{className:"w-full h-full object-contain",src:Ye.url,alt:e.caption||e.text||"Post media"});return ye.forEach(nt=>{Ge=s.jsx(Tv,{effect:nt,isActive:!0,children:Ge},nt.type)}),Ge})():!e.mediaUrl&&!((Ne=e.mediaItems)!=null&&Ne.length)&&e.text?s.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",style:{background:"#000000"},children:s.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 shadow-2xl",style:{maxWidth:"100%",boxSizing:"border-box"},children:[s.jsx("div",{className:"flex items-start justify-between px-4 pt-4 pb-3 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx(It,{src:zn(e.userHandle),name:e.userHandle.split("@")[0],size:"sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-1.5 text-gray-900 dark:text-gray-100 text-sm",children:[s.jsx("span",{children:e.userHandle}),s.jsx($s,{value:zs(e.userHandle)||"",size:14})]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center gap-2 mt-0.5",children:[e.locationLabel&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),e.locationLabel]}),e.createdAt&&s.jsx("span",{className:"text-gray-400",children:""})]}),e.createdAt&&s.jsx("span",{children:Ta(e.createdAt)})]})]})]})}),s.jsx("div",{className:"p-4 w-full overflow-hidden",style:{maxWidth:"100%",boxSizing:"border-box"},children:s.jsx("div",{className:"p-4 rounded-lg bg-black overflow-hidden w-full",style:{maxWidth:"100%",boxSizing:"border-box"},children:s.jsx("div",{className:"text-base leading-relaxed whitespace-pre-wrap font-normal text-white break-words w-full",style:{wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"100%",boxSizing:"border-box"},children:e.text})})})]})}):s.jsx("div",{className:"w-full h-full flex items-center justify-center px-6",style:{background:(Le=(Oe=e.textStyle)==null?void 0:Oe.background)!=null&&Le.includes("gradient")||(Me=e.textStyle)==null?void 0:Me.background,backgroundImage:(Ue=(ke=e.textStyle)==null?void 0:ke.background)!=null&&Ue.includes("gradient")?e.textStyle.background:void 0},children:s.jsx("div",{className:"text-center w-full max-w-full overflow-hidden px-4",children:e.text&&s.jsx("div",{className:`leading-relaxed whitespace-pre-wrap font-bold drop-shadow-lg break-words ${((He=e.textStyle)==null?void 0:He.size)==="small"?"text-4xl":((Mt=e.textStyle)==null?void 0:Mt.size)==="large"?"text-8xl":"text-6xl"}`,style:{color:((Pt=e.textStyle)==null?void 0:Pt.color)||"white",wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"100%"},children:e.text})})}),e.stickers&&e.stickers.length>0&&Ve.width>0&&s.jsx(s.Fragment,{children:e.stickers.map(ye=>s.jsx(Oa,{overlay:ye,onUpdate:()=>{},onRemove:()=>{},isSelected:!1,onSelect:()=>{},containerWidth:Ve.width,containerHeight:Ve.height},ye.id))}),st&&s.jsxs(s.Fragment,{children:[Jt>0&&s.jsx("button",{onClick:ye=>{ye.stopPropagation(),we()},className:"absolute left-4 top-1/4 transform -translate-y-1/2 w-9 h-9 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-colors z-30","aria-label":"Previous image",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Jt<Tt.length-1&&s.jsx("button",{onClick:ye=>{ye.stopPropagation(),Bt()},className:"absolute right-4 top-1/4 transform -translate-y-1/2 w-9 h-9 bg-black/50 hover:bg-black/70 rounded-full flex items-center justify-center transition-colors z-30","aria-label":"Next image",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),s.jsx("div",{className:"absolute bottom-24 left-1/2 transform -translate-x-1/2 flex gap-2 z-30",children:Tt.map((ye,Ge)=>s.jsx("button",{onClick:nt=>{nt.stopPropagation(),tt(Ge)},className:`h-2 rounded-full transition-all ${Ge===Jt?"bg-white w-8":"bg-white/50 hover:bg-white/75 w-2"}`,"aria-label":`Go to image ${Ge+1}`},Ge))})]}),c&&s.jsxs("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 flex flex-col gap-3 pointer-events-none",children:[s.jsx("div",{className:"w-4 h-4",children:s.jsx("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{fill:"#ef4444",d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),s.jsx("div",{className:"w-3 h-3",children:s.jsx("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{fill:"#ef4444",d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})}),s.jsx("div",{className:"w-2.5 h-2.5",children:s.jsx("svg",{className:"w-full h-full",viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{fill:"#ef4444",d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z"})})})]}),M&&s.jsx("div",{className:"absolute pointer-events-none z-50 transition-opacity duration-300",style:{left:`${M.x}px`,top:`${M.y}px`,transform:"translate(-50%, -50%)",animation:"heartPopUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:s.jsxs("div",{className:`relative transition-all duration-300 ${B?"opacity-100 scale-100":"opacity-0 scale-50"}`,children:[s.jsxs("svg",{className:"w-20 h-20 drop-shadow-lg animate-pulse",viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"scenesHeartGradientMain",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb"}),s.jsx("stop",{offset:"50%",stopColor:"#8f5bff"}),s.jsx("stop",{offset:"100%",stopColor:"#ff4ecb"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#scenesHeartGradientMain)"})]}),s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:`absolute top-2 left-2 w-4 h-4 transition-all duration-500 ${B?"opacity-100 translate-y-[-20px]":"opacity-0 translate-y-0"}`,children:s.jsxs("svg",{viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"scenesHeartGradientSmall1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb",stopOpacity:"0.9"}),s.jsx("stop",{offset:"100%",stopColor:"#8f5bff",stopOpacity:"0.9"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#scenesHeartGradientSmall1)"})]})}),s.jsx("div",{className:`absolute top-4 right-2 w-3 h-3 transition-all duration-700 delay-100 ${B?"opacity-100 translate-y-[-25px] translate-x-[10px]":"opacity-0 translate-y-0 translate-x-0"}`,children:s.jsxs("svg",{viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"scenesHeartGradientSmall2",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb",stopOpacity:"0.8"}),s.jsx("stop",{offset:"100%",stopColor:"#8f5bff",stopOpacity:"0.8"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#scenesHeartGradientSmall2)"})]})}),s.jsx("div",{className:`absolute bottom-2 left-4 w-2 h-2 transition-all duration-600 delay-200 ${B?"opacity-100 translate-y-[-15px] translate-x-[-8px]":"opacity-0 translate-y-0 translate-x-0"}`,children:s.jsxs("svg",{viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"scenesHeartGradientSmall3",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb",stopOpacity:"0.7"}),s.jsx("stop",{offset:"100%",stopColor:"#8f5bff",stopOpacity:"0.7"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#scenesHeartGradientSmall3)"})]})}),s.jsx("div",{className:`absolute bottom-4 right-4 w-3 h-3 transition-all duration-500 delay-150 ${B?"opacity-100 translate-y-[-20px] translate-x-[5px]":"opacity-0 translate-y-0 translate-x-0"}`,children:s.jsxs("svg",{viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"scenesHeartGradientSmall4",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb",stopOpacity:"0.85"}),s.jsx("stop",{offset:"100%",stopColor:"#8f5bff",stopOpacity:"0.85"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#scenesHeartGradientSmall4)"})]})})]}),s.jsx("div",{className:`absolute inset-0 rounded-full transition-all duration-1000 border-2 ${B?"opacity-100 scale-150 border-pink-400/80":"opacity-0 scale-100 border-pink-400/40"}`}),s.jsx("div",{className:`absolute inset-0 rounded-full transition-all duration-1200 delay-100 border ${B?"opacity-100 scale-200 border-purple-300/80":"opacity-0 scale-100 border-purple-300/40"}`})]})}),U&&(Ye==null?void 0:Ye.type)==="video"&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-40 pointer-events-none",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-lg border-2 border-white/80 bg-black/50 backdrop-blur-sm",children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",className:"text-white",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),s.jsx("path",{d:"M9 7 L9 17 L17 12 Z",fill:"currentColor"})]})}),s.jsx("button",{onClick:ye=>{ye.stopPropagation(),ye.preventDefault(),J(Ge=>!Ge)},onTouchEnd:ye=>{ye.stopPropagation(),ye.preventDefault(),J(Ge=>!Ge)},className:"p-1.5 rounded-full bg-black/50 hover:bg-black/70 active:bg-black/80 text-white transition-colors pointer-events-auto z-50","aria-label":z?"Unmute video":"Mute video",title:z?"Unmute video":"Mute video",children:z?s.jsx(rp,{size:16}):s.jsx(qd,{size:16})})]})})]}),s.jsxs("div",{className:"absolute right-0 bottom-32 z-20 flex flex-col items-center gap-6 px-4 py-3 pointer-events-none",onClick:ye=>ye.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-l from-black/70 via-black/50 to-transparent pointer-events-none z-0 rounded-l-2xl"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6 pointer-events-auto",children:[s.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[s.jsx("button",{ref:me,onClick:Je,className:`w-8 h-8 flex items-center justify-center rounded transition-all duration-200 ${c?"bg-white/20":"bg-black/30 hover:bg-black/50"}`,"aria-label":c?"Unlike":"Like",children:c?s.jsx($h,{className:"text-red-500 w-4 h-4"}):s.jsx(Ba,{className:"text-white w-4 h-4"})}),s.jsx("span",{className:"text-white text-[10px] font-semibold drop-shadow-md",children:u})]}),s.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[s.jsx("button",{onClick:je,className:"w-8 h-8 flex items-center justify-center rounded bg-black/30 hover:bg-black/50 transition-colors","aria-label":"Share",children:s.jsx(Nu,{className:"text-white w-4 h-4"})}),s.jsx("span",{className:"text-white text-[10px] font-semibold drop-shadow-md",children:y})]}),s.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[s.jsx("button",{onClick:ye=>at(ye),disabled:e.userHandle===(Ce==null?void 0:Ce.handle)||w||R,className:`w-8 h-8 flex items-center justify-center rounded transition-colors relative z-10 ${e.userHandle===(Ce==null?void 0:Ce.handle)||R?"opacity-30 cursor-not-allowed":w?"bg-green-500/20 hover:bg-green-500/30":"bg-black/30 hover:bg-black/50"}`,"aria-label":e.userHandle===(Ce==null?void 0:Ce.handle)?"Cannot reclip your own post":w?"Post already reclipped":"Reclip",title:e.userHandle===(Ce==null?void 0:Ce.handle)?"Cannot reclip your own post":w?"Post already reclipped":"Reclip",children:s.jsx(Ei,{className:`w-4 h-4 ${w?"text-green-500":"text-white"}`})}),s.jsx("span",{className:"text-white text-[10px] font-semibold drop-shadow-md",children:S})]})]})]}),!fe&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-10 bg-gradient-to-t from-black/90 via-black/70 to-transparent",children:s.jsxs("div",{className:"max-w-md mx-auto px-4 pr-16 pb-safe",children:[s.jsxs("div",{className:"pt-12 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(It,{src:(Ce==null?void 0:Ce.handle)===e.userHandle?Ce==null?void 0:Ce.avatarUrl:zn(e.userHandle),name:e.userHandle.split("@")[0],size:"sm",className:"border-2 border-white"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("button",{className:"text-white font-semibold text-sm hover:opacity-80",children:e.userHandle}),e.locationLabel&&s.jsxs("div",{className:"text-white/70 text-xs flex items-center gap-1 mt-0.5",children:[s.jsx(ln,{className:"w-3 h-3"}),e.locationLabel]})]}),!v&&s.jsx("button",{onClick:he,disabled:R,className:"px-4 py-1.5 bg-white text-black text-sm font-semibold rounded-md hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Following...":"Follow"}),v&&s.jsx("button",{onClick:he,disabled:R,className:"px-4 py-1.5 bg-white/10 text-white text-sm font-semibold rounded-md hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Unfollowing...":"Following"})]}),e.caption&&e.mediaUrl&&!e.mediaUrl.startsWith("data:image")&&s.jsxs("div",{className:"text-white text-sm mb-2 text-left w-full",children:[s.jsx("span",{className:"line-clamp-1",children:e.caption}),e.caption.length>50&&s.jsx("button",{onClick:ut,className:"text-white/80 hover:text-white font-medium ml-1",children:"more"})]}),!e.mediaUrl&&!((fn=e.mediaItems)!=null&&fn.length)&&e.text?null:!e.mediaUrl&&e.text?s.jsxs("div",{className:"text-white text-sm opacity-90 mb-2 text-left w-full",children:[s.jsx("span",{className:"line-clamp-1",children:e.text}),e.text.length>50&&s.jsx("button",{onClick:ut,className:"text-white/80 hover:text-white font-medium ml-1",children:"more"})]}):null,h>0&&s.jsxs("button",{onClick:o,className:"text-white text-xs opacity-80 hover:opacity-100 mb-3",children:["View all ",h," ",h===1?"comment":"comments"]})]}),s.jsx("div",{className:"pb-4",children:s.jsxs("form",{onSubmit:ge,className:"flex items-center gap-2",children:[s.jsx(It,{src:Ce==null?void 0:Ce.avatarUrl,name:(Ce==null?void 0:Ce.name)||(Ce==null?void 0:Ce.handle)||"User",size:"sm",className:"border border-white/50"}),s.jsxs("div",{className:"relative flex-1 rounded",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded bg-black/30 backdrop-blur-sm"}),s.jsx("input",{type:"text",value:_,onChange:ye=>W(ye.target.value),placeholder:"Add Comment...",className:"relative w-full px-3 py-1.5 rounded bg-white/10 backdrop-blur-sm border border-white/20 text-white text-sm placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50 focus:bg-white/15",disabled:T||!Ce})]}),s.jsx("button",{type:"submit",disabled:!_.trim()||T||!Ce,className:"w-12 h-8 flex items-center justify-center text-white font-semibold text-xs disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-80 transition-opacity border-2 border-white rounded",children:T?"...":"Post"})]})})]})}),fe&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:ut}),s.jsxs("div",{ref:ve,className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 rounded-t-3xl shadow-2xl transition-transform duration-300 ease-out flex flex-col",style:{transform:`translateY(${Math.max(0,F)}px)`,maxHeight:"80vh",height:F>0?`calc(80vh - ${F}px)`:"80vh",paddingBottom:"env(safe-area-inset-bottom, 0px)"},onTouchStart:gt,onTouchMove:Ct,onTouchEnd:ne,children:[s.jsx("div",{className:"flex justify-center pt-3 pb-2 flex-shrink-0",children:s.jsx("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"})}),s.jsxs("div",{className:"flex flex-col flex-1 min-h-0 overflow-hidden",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 min-h-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 pt-2",children:[s.jsx(It,{src:zn(e.userHandle),name:e.userHandle.split("@")[0],size:"sm",className:"border-2 border-gray-200 dark:border-gray-700"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("button",{className:"text-gray-900 dark:text-white font-semibold text-sm hover:opacity-80",children:e.userHandle}),e.locationLabel&&s.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-xs flex items-center gap-1 mt-0.5",children:[s.jsx(ln,{className:"w-3 h-3"}),e.locationLabel]})]}),!v&&s.jsx("button",{onClick:he,disabled:R,className:"px-4 py-1.5 bg-black dark:bg-white text-white dark:text-black text-sm font-semibold rounded-md hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Following...":"Follow"}),v&&s.jsx("button",{onClick:he,disabled:R,className:"px-4 py-1.5 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white text-sm font-semibold rounded-md hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Unfollowing...":"Following"})]}),(e.caption||e.text)&&s.jsx("div",{className:"mb-6",children:s.jsx("p",{className:"text-gray-900 dark:text-white text-sm whitespace-pre-line break-words",children:e.caption||e.text})}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-gray-900 dark:text-white font-semibold text-base mb-4",children:["Comments (",h,")"]}),Se?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-600 border-t-black dark:border-t-white rounded-full animate-spin"})}):_e.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 text-sm",children:"No comments yet. Be the first to comment!"}):s.jsx("div",{className:"space-y-4",children:_e.map(ye=>{var Ge;return s.jsxs("div",{className:"flex gap-3",children:[s.jsx(It,{name:((Ge=ye.userHandle)==null?void 0:Ge.split("@")[0])||"User",size:"sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:ye.userHandle}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Ta(ye.createdAt)})]}),s.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 mb-2",children:ye.text}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[s.jsx(Ba,{className:"w-3.5 h-3.5"}),ye.likes||0]}),s.jsx("button",{className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:"Reply"})]})]})]},ye.id)})})]})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 pt-4 pb-6 bg-white dark:bg-gray-900 flex-shrink-0 safe-area-inset-bottom",children:s.jsxs("form",{onSubmit:ge,className:"flex items-center gap-2",children:[s.jsx(It,{src:Ce==null?void 0:Ce.avatarUrl,name:(Ce==null?void 0:Ce.name)||(Ce==null?void 0:Ce.handle)||"User",size:"sm",className:"border border-gray-200 dark:border-gray-700"}),s.jsxs("div",{className:"relative flex-1 rounded",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded bg-gray-100 dark:bg-gray-800"}),s.jsx("input",{type:"text",value:_,onChange:ye=>W(ye.target.value),placeholder:"Add a comment...",className:"relative w-full px-3 py-1.5 rounded bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white text-sm placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-black dark:focus:ring-white focus:bg-white dark:focus:bg-gray-700",disabled:T||!Ce})]}),s.jsx("button",{type:"submit",disabled:!_.trim()||T||!Ce,className:"w-12 h-8 flex items-center justify-center text-black dark:text-white font-semibold text-xs disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-80 transition-opacity border-2 border-black dark:border-white rounded",children:T?"...":"Post"})]})})]})]})]})]}),q&&YN.createPortal(s.jsx(op,{post:e,isOpen:q,onClose:()=>{console.log("Closing ShareModal from Scenes"),ie(!1)}}),document.body),P&&me.current&&s.jsx(mW,{startX:P.startX,startY:P.startY,targetElement:me.current,onComplete:()=>Y(null)},`heart-${e.id}-${P.startX}-${P.startY}`)]})):null}function pW({isOpen:e,onClose:t,onNavigate:n}){const{user:r}=tn();if(!e)return null;const a=i=>{n(i),t()};return s.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-end animate-in fade-in duration-200",onClick:t,children:s.jsxs("div",{className:"w-full bg-white dark:bg-gray-950 rounded-t-3xl animate-in slide-in-from-bottom duration-300",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"px-4 pt-4 pb-2",children:[s.jsx("div",{className:"h-1 w-12 bg-gray-300 dark:bg-gray-700 rounded-full mx-auto mb-4"}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Create"}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsx(pt,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]})]}),s.jsxs("div",{className:"px-4 pb-6 space-y-3",children:[s.jsxs("button",{onClick:()=>a("/create/instant"),className:"w-full flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-tr from-red-500 via-pink-500 to-purple-600 p-0.5",children:s.jsx("div",{className:"w-full h-full rounded-full bg-gray-950 flex items-center justify-center",children:s.jsx(Wd,{className:"w-6 h-6 text-white"})})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Instant Create"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Open camera immediately and record a clip, then add filters"})]})]}),s.jsxs("button",{onClick:()=>a("/clip"),className:"w-full flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 p-0.5",children:s.jsx("div",{className:"w-full h-full rounded-full bg-gray-950 flex items-center justify-center",children:s.jsx(Wd,{className:"w-6 h-6 text-white"})})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Create Clip"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Share a photo or video that disappears after 24 hours"})]})]}),s.jsxs("button",{onClick:()=>a("/templates"),className:"w-full flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center",children:s.jsx(Os,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Create Post"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Share to your newsfeed with text, photos, or videos"})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-800",children:s.jsxs("div",{className:"flex items-center gap-3 px-2 py-2",children:[s.jsx(It,{src:r==null?void 0:r.avatarUrl,name:(r==null?void 0:r.name)||"User",size:"sm"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(r==null?void 0:r.name)||"User"}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["@",(r==null?void 0:r.handle)||"user"]})]})]})})]})]})})}const pS=[{id:"sarah-artane-1",username:"sarah",display_name:"Sarah",handle:"Sarah@Artane",avatar_url:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop"}];async function yl(e){var n,r;const t=new URLSearchParams;t.set("q",e.q),e.types&&t.set("types",e.types),e.usersCursor!=null&&t.set("usersCursor",String(e.usersCursor)),e.locationsCursor!=null&&t.set("locationsCursor",String(e.locationsCursor)),e.postsCursor!=null&&t.set("postsCursor",String(e.postsCursor)),e.usersLimit!=null&&t.set("usersLimit",String(e.usersLimit)),e.locationsLimit!=null&&t.set("locationsLimit",String(e.locationsLimit)),e.postsLimit!=null&&t.set("postsLimit",String(e.postsLimit));try{const a=await fetch(`/api/search?${t.toString()}`),i=a.headers.get("content-type");if(!i||!i.includes("application/json"))throw new Error("API returned non-JSON response");if(!a.ok)throw new Error(`Search failed with status ${a.status}`);const o=await a.json(),l=e.q.toLowerCase();return(n=o.sections)!=null&&n.users&&(l.includes("sarah")||l.includes("artane")||l.includes("sarah@artane"))&&(new Set(o.sections.users.items.map(d=>{var u;return(u=d.handle)==null?void 0:u.toLowerCase()})).has("sarah@artane")||(o.sections.users.items=[pS[0],...o.sections.users.items])),o}catch{const i=e.q.toLowerCase();return(r=e.types)!=null&&r.includes("users")&&(i.includes("sarah")||i.includes("artane")||i.includes("sarah@artane"))?{q:e.q,sections:{users:{items:pS,nextCursor:null}}}:{q:e.q,sections:{users:{items:[],nextCursor:null}}}}}function gW({isOpen:e,onClose:t,taggedUserHandles:n}){const[r,a]=D.useState([]),[i,o]=D.useState(!1);D.useEffect(()=>{e&&n.length>0?l():a([])},[e,n]);const l=async()=>{o(!0);try{const c=n.map(async u=>{var f,h,g;try{const p=(g=(h=(f=(await yl({q:u,types:"users",usersLimit:1})).sections)==null?void 0:f.users)==null?void 0:h.items)==null?void 0:g.find(S=>S.handle.toLowerCase()===u.toLowerCase());return p?{handle:p.handle,display_name:p.display_name,avatar_url:p.avatar_url}:{handle:u,display_name:void 0,avatar_url:void 0}}catch(y){return console.error(`Error fetching user ${u}:`,y),{handle:u,display_name:void 0,avatar_url:void 0}}}),d=await Promise.all(c);a(d)}catch(c){console.error("Error fetching tagged users:",c),a(n.map(d=>({handle:d})))}finally{o(!1)}};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:t}),s.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 rounded-t-3xl shadow-2xl transition-transform duration-300 ease-out ${e?"translate-y-0":"translate-y-full"}`,style:{maxHeight:"80vh"},children:[s.jsx("div",{className:"flex items-center justify-center pt-3 pb-2",children:s.jsx("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-full bg-gray-100 dark:bg-gray-800",children:s.jsx(xc,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Tagged People"}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n.length," ",n.length===1?"person":"people"]})]})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"overflow-y-auto px-6 py-4",style:{maxHeight:"calc(80vh - 120px)"},children:i?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"})}):r.length===0?s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:s.jsx("p",{children:"No tagged users found"})}):s.jsx("div",{className:"space-y-2",children:r.map(c=>s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsx(It,{src:c.avatar_url,name:c.display_name||c.handle,size:"md"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-semibold truncate",children:c.display_name||c.handle}),s.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm truncate",children:["@",c.handle]})]})]},c.handle))})})]})]}):null}let Ev=[{id:"ad-account-1",name:"Dublin Local Business",timezone:"Europe/Dublin",dailyBudget:100,currency:"EUR",lastBudgetReset:au("Europe/Dublin"),createdAt:Date.now()-864e5*30},{id:"ad-account-2",name:"Global Brand",timezone:"America/New_York",dailyBudget:500,currency:"USD",lastBudgetReset:au("America/New_York"),createdAt:Date.now()-864e5*60}],up=[{id:"ad-1",adAccountId:"ad-account-1",advertiserHandle:"LocalCafe@Dublin",title:"Best Coffee in Dublin",description:"Visit us for the finest coffee experience",mediaUrl:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=800",mediaType:"image",callToAction:"Visit Website",linkUrl:"https://example.com",scheduledStart:Date.now()-36e5,scheduledEnd:Date.now()+864e5*7,createdAt:Date.now()-864e5,dailyBudget:50,spentToday:12.5,lastBudgetReset:au("Europe/Dublin"),stats:{impressions:1250,clicks:45,conversions:8,spend:12.5},events:{impressions:[],clicks:[],conversions:[]},targetLocations:["Dublin","Ireland"],targetTags:["food","coffee"],isActive:!0}];function au(e){const t=Date.now(),r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(new Date(t)),a=parseInt(r.find(y=>y.type==="year").value),i=parseInt(r.find(y=>y.type==="month").value)-1,o=parseInt(r.find(y=>y.type==="day").value),l=`${a}-${String(i+1).padStart(2,"0")}-${String(o).padStart(2,"0")}T00:00:00`,c=new Date(`${l}Z`),d=c.toLocaleString("en-US",{timeZone:e,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),[u,f,h]=d.split(":").map(Number),g=u*60*60*1e3+f*60*1e3+h*1e3;return c.getTime()-g}function T4(e){const t=e.timezone,n=au(t);return e.lastBudgetReset<n}function E4(e){const t=Ev.find(r=>r.id===e);if(!t)throw new Error(`Ad account not found: ${e}`);const n=au(t.timezone);return up.forEach(r=>{r.adAccountId===e&&(r.spentToday=0,r.lastBudgetReset=n)}),t.lastBudgetReset=n,t}function xW(e){const t=Date.now();if(!e.isActive||e.scheduledStart&&t<e.scheduledStart||e.scheduledEnd&&t>e.scheduledEnd)return!1;const n=Ev.find(r=>r.id===e.adAccountId);return!(!n||(T4(n)&&E4(e.adAccountId),e.spentToday>=e.dailyBudget))}async function yW(e,t){const n=up.find(i=>i.id===e);if(!n)throw new Error(`Ad not found: ${e}`);const r=Date.now();n.events.impressions.push(r),n.stats.impressions+=1;const a=.01;return n.spentToday+=a,n.stats.spend+=a,n}async function bW(e,t){const n=up.find(i=>i.id===e);if(!n)throw new Error(`Ad not found: ${e}`);const r=Date.now();n.events.clicks.push(r),n.stats.clicks+=1;const a=.5;return n.spentToday+=a,n.stats.spend+=a,n}async function vW(e,t){return Ev.forEach(r=>{T4(r)&&E4(r.id)}),up.filter(r=>!(!xW(r)||r.targetLocations&&r.targetLocations.length>0&&(!e||!r.targetLocations.some(a=>e.toLowerCase().includes(a.toLowerCase())))||r.targetTags&&r.targetTags.length>0&&(!t||!r.targetTags.some(a=>t.includes(a.toLowerCase()))))).sort((r,a)=>a.createdAt-r.createdAt)}let Bx=[];const wW=6*60*60*1e3;async function kW(e,t,n,r){const a=Date.now(),i=a+wW,o=Bx.find(c=>c.postId===e&&c.isActive);if(o)return o.feedType=n,o.price=r,o.activatedAt=a,o.expiresAt=i,o.isActive=!0,o;const l={postId:e,userId:t,feedType:n,price:r,activatedAt:a,expiresAt:i,isActive:!0};return Bx.push(l),l}async function _v(e){const t=Date.now(),n=Bx.find(r=>r.postId===e&&r.isActive&&r.expiresAt>t);return n&&n.expiresAt<=t?(n.isActive=!1,null):n||null}async function SW(e){const t=await _v(e);if(!t)return 0;const n=Date.now(),r=t.expiresAt-n;return Math.max(0,r)}const gS=[{type:"local",label:"Local Newsfeed",description:"Reach users in your local area",price:4.99,currency:"EUR",icon:s.jsx(ln,{className:"w-6 h-6"}),audience:"Local audience"},{type:"regional",label:"Regional Newsfeed",description:"Reach a larger regional audience",price:6.99,currency:"EUR",icon:s.jsx(vE,{className:"w-6 h-6"}),audience:"Regional audience"},{type:"national",label:"National Newsfeed",description:"Maximum reach across the country",price:9.99,currency:"EUR",icon:s.jsx(yE,{className:"w-6 h-6"}),audience:"National audience"}];function _4({isOpen:e,post:t,onClose:n,onSelect:r}){const[a,i]=m.useState(null);if(!e||!t)return null;const o=c=>{i(c.type)},l=()=>{if(a){const c=gS.find(d=>d.type===a);c&&r(a,c.price)}};return s.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:n,children:s.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-950 rounded-2xl shadow-2xl animate-in slide-in-from-bottom duration-300 max-h-[90vh] overflow-y-auto",onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-950 border-b border-gray-200 dark:border-gray-800 px-6 pt-6 pb-4 rounded-t-2xl z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-100 dark:bg-brand-900 flex items-center justify-center",children:s.jsx(Ca,{className:"w-5 h-5 text-brand-600 dark:text-brand-400"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Boost Post"})]}),s.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select a feed to boost your post. Your post will be promoted for ",s.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"6 hours"}),"."]})]}),s.jsx("div",{className:"px-6 py-4 space-y-3",children:gS.map(c=>{const d=a===c.type;return s.jsx("button",{onClick:()=>o(c),className:`w-full p-4 rounded-xl border-2 transition-all duration-200 text-left ${d?"border-brand-500 bg-brand-50 dark:bg-brand-900/20 shadow-lg scale-[1.02]":"border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 hover:border-brand-300 dark:hover:border-brand-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 transition-colors ${d?"bg-brand-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"}`,children:c.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:c.label}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsxs("span",{className:"text-2xl font-bold text-brand-600 dark:text-brand-400",children:["",c.price.toFixed(2)]})})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:c.description}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:c.audience}),s.jsx("span",{className:"text-xs text-gray-400",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"6 hours boost"})]})]}),d&&s.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-500 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},c.type)})}),s.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-gray-950 border-t border-gray-200 dark:border-gray-800 px-6 py-4 rounded-b-2xl",children:[s.jsx("button",{onClick:l,disabled:!a,className:`w-full py-3 px-6 rounded-xl font-semibold text-white transition-all duration-200 ${a?"bg-brand-600 hover:bg-brand-700 dark:bg-brand-500 dark:hover:bg-brand-600 shadow-lg hover:shadow-xl active:scale-[0.98]":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed"}`,children:"Continue to Payment"}),s.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Your payment is secure and encrypted"})]})]})})}const kc=[];function Sc(e){return new Promise(t=>setTimeout(t,e))}async function jW(e,t,n=!0,r){await Sc(200);let a;if(r){const o=bt.find(l=>l.id===r);o!=null&&o.mediaUrl&&(a=o.mediaUrl)}const i={id:`collection-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,userId:e,name:t,isPrivate:n,postIds:r?[r]:[],thumbnailUrl:a,createdAt:Date.now(),updatedAt:Date.now()};return kc.push(i),i}async function R4(e){return await Sc(100),kc.filter(n=>n.userId===e).map(n=>{if(n.postIds.length>0){const r=bt.find(a=>a.id===n.postIds[0]);r!=null&&r.mediaUrl?n.thumbnailUrl=r.mediaUrl:n.thumbnailUrl=void 0}else n.thumbnailUrl=void 0;return n}).sort((n,r)=>r.updatedAt-n.updatedAt)}async function NW(e,t){await Sc(150);const n=kc.find(r=>r.id===e);if(!n)throw new Error("Collection not found");if(!n.postIds.includes(t)){const r=n.postIds.length===0;if(n.postIds.push(t),n.updatedAt=Date.now(),r||!n.thumbnailUrl){const a=bt.find(i=>i.id===t);a!=null&&a.mediaUrl&&(n.thumbnailUrl=a.mediaUrl)}}return n}async function CW(e,t){await Sc(150);const n=kc.find(r=>r.id===e);if(!n)throw new Error("Collection not found");if(n.postIds=n.postIds.filter(r=>r!==t),n.updatedAt=Date.now(),n.postIds.length===0)n.thumbnailUrl=void 0;else if(n.thumbnailUrl){const r=bt.find(a=>a.id===n.postIds[0]);r!=null&&r.mediaUrl&&(n.thumbnailUrl=r.mediaUrl)}return n}async function TW(e){await Sc(100);const t=kc.find(r=>r.id===e);if(!t)throw new Error("Collection not found");return t.postIds.map(r=>bt.find(a=>a.id===r)).filter(r=>r!==void 0).sort((r,a)=>a.createdAt-r.createdAt)}async function iu(e,t){return await Sc(100),kc.filter(n=>n.userId===e&&n.postIds.includes(t)).sort((n,r)=>r.updatedAt-n.updatedAt)}function L4({post:e,userId:t,isOpen:n,onClose:r,onSaved:a}){const[i,o]=m.useState([]),[l,c]=m.useState([]),[d,u]=m.useState(!1),[f,h]=m.useState(""),[g,y]=m.useState(!1),[p,S]=m.useState(null);m.useEffect(()=>{n&&t&&x()},[n,t,e.id]);async function x(){y(!0);try{const w=await R4(t);o(w);const N=await iu(t,e.id);c(N.map(R=>R.id))}catch(w){console.error("Error loading collections:",w)}finally{y(!1)}}async function v(){if(f.trim()){y(!0);try{const w=await jW(t,f.trim(),!0,e.id);await x(),window.dispatchEvent(new CustomEvent(`postSaved-${e.id}`)),h(""),u(!1),a&&a()}catch(w){console.error("Error creating collection:",w)}finally{y(!1)}}}async function b(w){const N=l.includes(w);S(w);try{N?await CW(w,e.id):await NW(w,e.id),await x(),window.dispatchEvent(new CustomEvent(`postSaved-${e.id}`)),a&&a()}catch(R){console.error("Error toggling collection:",R)}finally{S(null)}}return n?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),s.jsxs("div",{className:"relative w-full bg-gray-800 dark:bg-gray-900 rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden flex flex-col animate-in slide-in-from-bottom duration-300",children:[s.jsx("div",{className:"flex justify-center pt-3 pb-2",children:s.jsx("div",{className:"w-12 h-1 bg-gray-600 dark:bg-gray-700 rounded-full"})}),s.jsxs("div",{className:"px-6 py-4 border-b border-gray-700 dark:border-gray-600 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Save Post"}),s.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-700 dark:hover:bg-gray-600 transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-5 h-5 text-gray-300"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl hover:bg-gray-700/50 dark:hover:bg-gray-600/50 transition-colors cursor-pointer",onClick:()=>{const w=i.find(N=>N.name==="Saved");w&&b(w.id)},children:[s.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-700 dark:bg-gray-600 flex items-center justify-center overflow-hidden flex-shrink-0",children:e.mediaUrl&&e.mediaUrl.trim()!==""?e.mediaType==="video"?s.jsx("video",{src:e.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}):s.jsx("img",{src:e.mediaUrl,alt:"Post thumbnail",className:"w-full h-full object-cover"}):e.text?s.jsx("div",{className:"w-full h-full p-2 flex items-center justify-center",children:s.jsx("p",{className:"text-xs text-gray-300 text-center line-clamp-3 leading-tight",children:e.text.length>50?e.text.substring(0,50)+"...":e.text})}):s.jsx(qc,{className:"w-8 h-8 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-white",children:"Saved"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Private"})]}),l.length>0&&s.jsx(qc,{className:"w-5 h-5 text-yellow-400 fill-yellow-400 flex-shrink-0"})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Collections"}),s.jsx("button",{onClick:()=>u(!0),className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"New collection"})]}),d&&s.jsxs("div",{className:"mb-4 p-4 bg-gray-700/50 dark:bg-gray-600/50 rounded-xl",children:[s.jsx("input",{type:"text",value:f,onChange:w=>h(w.target.value),placeholder:"Collection name",className:"w-full px-4 py-2 bg-gray-600 dark:bg-gray-700 text-white placeholder-gray-400 rounded-lg border border-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-3",autoFocus:!0,onKeyDown:w=>{w.key==="Enter"?v():w.key==="Escape"&&(u(!1),h(""))}}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:v,disabled:!f.trim()||g,className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Create"}),s.jsx("button",{onClick:()=>{u(!1),h("")},className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg font-medium transition-colors",children:"Cancel"})]})]}),g&&i.length===0?s.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading collections..."}):i.length===0?s.jsx("div",{className:"text-center py-8 text-gray-400",children:"No collections yet. Create one to get started!"}):s.jsx("div",{className:"space-y-2",children:i.map(w=>{const N=l.includes(w.id),R=p===w.id;return s.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl hover:bg-gray-700/50 dark:hover:bg-gray-600/50 transition-colors",children:[s.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-700 dark:bg-gray-600 flex items-center justify-center overflow-hidden flex-shrink-0",children:w.thumbnailUrl?(()=>{const C=w.postIds.length>0?bt.find(W=>W.id===w.postIds[0]):null;return(C==null?void 0:C.mediaType)==="video"||w.thumbnailUrl.toLowerCase().endsWith(".mp4")||w.thumbnailUrl.toLowerCase().endsWith(".webm")||w.thumbnailUrl.toLowerCase().endsWith(".mov")?s.jsx("video",{src:w.thumbnailUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata",onLoadedMetadata:W=>{const T=W.currentTarget;T.currentTime=0}}):s.jsx("img",{src:w.thumbnailUrl,alt:w.name,className:"w-full h-full object-cover"})})():w.postIds.length>0?(()=>{const C=bt.find(_=>_.id===w.postIds[0]);return C!=null&&C.text?s.jsx("div",{className:"w-full h-full p-2 flex items-center justify-center",children:s.jsx("p",{className:"text-xs text-gray-300 text-center line-clamp-3 leading-tight",children:C.text.length>50?C.text.substring(0,50)+"...":C.text})}):s.jsx(qc,{className:"w-8 h-8 text-gray-400"})})():s.jsx(qc,{className:"w-8 h-8 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-white",children:w.name}),s.jsx("div",{className:"text-sm text-gray-400",children:w.isPrivate?"Private":"Public"})]}),s.jsx("button",{onClick:()=>b(w.id),disabled:R,className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors flex-shrink-0 ${N?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 hover:bg-gray-500"} disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":N?"Remove from collection":"Add to collection",children:R?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):N?s.jsx(pt,{className:"w-5 h-5 text-white"}):s.jsx(na,{className:"w-5 h-5 text-white"})})]},w.id)})})]}),s.jsxs("button",{onClick:()=>u(!0),className:"w-full py-4 rounded-full bg-gray-700 dark:bg-gray-600 hover:bg-gray-600 dark:hover:bg-gray-500 transition-colors flex items-center justify-center gap-2",children:[s.jsx(na,{className:"w-6 h-6 text-white"}),s.jsx("span",{className:"text-white font-medium",children:"Add New Collection"})]})]})]})]}):null}var Ql={},EW=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},I4={},ds={};let Rv;const _W=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ds.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};ds.getSymbolTotalCodewords=function(t){return _W[t]};ds.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};ds.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Rv=t};ds.isKanjiModeEnabled=function(){return typeof Rv<"u"};ds.toSJIS=function(t){return Rv(t)};var fp={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,a){if(e.isValid(r))return r;try{return t(r)}catch{return a}}})(fp);function P4(){this.buffer=[],this.length=0}P4.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var RW=P4;function Au(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Au.prototype.set=function(e,t,n,r){const a=e*this.size+t;this.data[a]=n,r&&(this.reservedBit[a]=!0)};Au.prototype.get=function(e,t){return this.data[e*this.size+t]};Au.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Au.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var LW=Au,M4={};(function(e){const t=ds.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const a=Math.floor(r/7)+2,i=t(r),o=i===145?26:Math.ceil((i-13)/(2*a-2))*2,l=[i-7];for(let c=1;c<a-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},e.getPositions=function(r){const a=[],i=e.getRowColCoords(r),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||a.push([i[l],i[c]]);return a}})(M4);var A4={};const IW=ds.getSymbolSize,xS=7;A4.getPositions=function(t){const n=IW(t);return[[0,0],[n-xS,0],[0,n-xS]]};var D4={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const i=a.size;let o=0,l=0,c=0,d=null,u=null;for(let f=0;f<i;f++){l=c=0,d=u=null;for(let h=0;h<i;h++){let g=a.get(f,h);g===d?l++:(l>=5&&(o+=t.N1+(l-5)),d=g,l=1),g=a.get(h,f),g===u?c++:(c>=5&&(o+=t.N1+(c-5)),u=g,c=1)}l>=5&&(o+=t.N1+(l-5)),c>=5&&(o+=t.N1+(c-5))}return o},e.getPenaltyN2=function(a){const i=a.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=a.get(l,c)+a.get(l,c+1)+a.get(l+1,c)+a.get(l+1,c+1);(d===4||d===0)&&o++}return o*t.N2},e.getPenaltyN3=function(a){const i=a.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let u=0;u<i;u++)l=l<<1&2047|a.get(d,u),u>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|a.get(u,d),u>=10&&(c===1488||c===93)&&o++}return o*t.N3},e.getPenaltyN4=function(a){let i=0;const o=a.data.length;for(let c=0;c<o;c++)i+=a.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function n(r,a,i){switch(r){case e.Patterns.PATTERN000:return(a+i)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(a+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return a*i%2+a*i%3===0;case e.Patterns.PATTERN110:return(a*i%2+a*i%3)%2===0;case e.Patterns.PATTERN111:return(a*i%3+(a+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(a,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,n(a,c,l))},e.getBestMask=function(a,i){const o=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),e.applyMask(d,a);const u=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(d,a),u<c&&(c=u,l=d)}return l}})(D4);var hp={};const hi=fp,Tf=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ef=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];hp.getBlocksCount=function(t,n){switch(n){case hi.L:return Tf[(t-1)*4+0];case hi.M:return Tf[(t-1)*4+1];case hi.Q:return Tf[(t-1)*4+2];case hi.H:return Tf[(t-1)*4+3];default:return}};hp.getTotalCodewordsCount=function(t,n){switch(n){case hi.L:return Ef[(t-1)*4+0];case hi.M:return Ef[(t-1)*4+1];case hi.Q:return Ef[(t-1)*4+2];case hi.H:return Ef[(t-1)*4+3];default:return}};var F4={},mp={};const bd=new Uint8Array(512),Jh=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)bd[n]=t,Jh[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)bd[n]=bd[n-255]})();mp.log=function(t){if(t<1)throw new Error("log("+t+")");return Jh[t]};mp.exp=function(t){return bd[t]};mp.mul=function(t,n){return t===0||n===0?0:bd[Jh[t]+Jh[n]]};(function(e){const t=mp;e.mul=function(r,a){const i=new Uint8Array(r.length+a.length-1);for(let o=0;o<r.length;o++)for(let l=0;l<a.length;l++)i[o+l]^=t.mul(r[o],a[l]);return i},e.mod=function(r,a){let i=new Uint8Array(r);for(;i.length-a.length>=0;){const o=i[0];for(let c=0;c<a.length;c++)i[c]^=t.mul(a[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},e.generateECPolynomial=function(r){let a=new Uint8Array([1]);for(let i=0;i<r;i++)a=e.mul(a,new Uint8Array([1,t.exp(i)]));return a}})(F4);const B4=F4;function Lv(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Lv.prototype.initialize=function(t){this.degree=t,this.genPoly=B4.generateECPolynomial(this.degree)};Lv.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=B4.mod(n,this.genPoly),a=this.degree-r.length;if(a>0){const i=new Uint8Array(this.degree);return i.set(r,a),i}return r};var PW=Lv,O4={},Vi={},Iv={};Iv.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var ha={};const U4="[0-9]+",MW="[A-Z $%*+\\-./:]+";let ou="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ou=ou.replace(/u/g,"\\u");const AW="(?:(?![A-Z0-9 $%*+\\-./:]|"+ou+`)(?:.|[\r
]))+`;ha.KANJI=new RegExp(ou,"g");ha.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ha.BYTE=new RegExp(AW,"g");ha.NUMERIC=new RegExp(U4,"g");ha.ALPHANUMERIC=new RegExp(MW,"g");const DW=new RegExp("^"+ou+"$"),FW=new RegExp("^"+U4+"$"),BW=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ha.testKanji=function(t){return DW.test(t)};ha.testNumeric=function(t){return FW.test(t)};ha.testAlphanumeric=function(t){return BW.test(t)};(function(e){const t=Iv,n=ha;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return n.testNumeric(i)?e.NUMERIC:n.testAlphanumeric(i)?e.ALPHANUMERIC:n.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function r(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(i,o){if(e.isValid(i))return i;try{return r(i)}catch{return o}}})(Vi);(function(e){const t=ds,n=hp,r=fp,a=Vi,i=Iv,o=7973,l=t.getBCHDigit(o);function c(h,g,y){for(let p=1;p<=40;p++)if(g<=e.getCapacity(p,y,h))return p}function d(h,g){return a.getCharCountIndicator(h,g)+4}function u(h,g){let y=0;return h.forEach(function(p){const S=d(p.mode,g);y+=S+p.getBitsLength()}),y}function f(h,g){for(let y=1;y<=40;y++)if(u(h,y)<=e.getCapacity(y,g,a.MIXED))return y}e.from=function(g,y){return i.isValid(g)?parseInt(g,10):y},e.getCapacity=function(g,y,p){if(!i.isValid(g))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=a.BYTE);const S=t.getSymbolTotalCodewords(g),x=n.getTotalCodewordsCount(g,y),v=(S-x)*8;if(p===a.MIXED)return v;const b=v-d(p,g);switch(p){case a.NUMERIC:return Math.floor(b/10*3);case a.ALPHANUMERIC:return Math.floor(b/11*2);case a.KANJI:return Math.floor(b/13);case a.BYTE:default:return Math.floor(b/8)}},e.getBestVersionForData=function(g,y){let p;const S=r.from(y,r.M);if(Array.isArray(g)){if(g.length>1)return f(g,S);if(g.length===0)return 1;p=g[0]}else p=g;return c(p.mode,p.getLength(),S)},e.getEncodedBits=function(g){if(!i.isValid(g)||g<7)throw new Error("Invalid QR Code version");let y=g<<12;for(;t.getBCHDigit(y)-l>=0;)y^=o<<t.getBCHDigit(y)-l;return g<<12|y}})(O4);var z4={};const Ox=ds,$4=1335,OW=21522,yS=Ox.getBCHDigit($4);z4.getEncodedBits=function(t,n){const r=t.bit<<3|n;let a=r<<10;for(;Ox.getBCHDigit(a)-yS>=0;)a^=$4<<Ox.getBCHDigit(a)-yS;return(r<<10|a)^OW};var H4={};const UW=Vi;function ec(e){this.mode=UW.NUMERIC,this.data=e.toString()}ec.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};ec.prototype.getLength=function(){return this.data.length};ec.prototype.getBitsLength=function(){return ec.getBitsLength(this.data.length)};ec.prototype.write=function(t){let n,r,a;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),a=parseInt(r,10),t.put(a,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),a=parseInt(r,10),t.put(a,i*3+1))};var zW=ec;const $W=Vi,Tg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function tc(e){this.mode=$W.ALPHANUMERIC,this.data=e}tc.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};tc.prototype.getLength=function(){return this.data.length};tc.prototype.getBitsLength=function(){return tc.getBitsLength(this.data.length)};tc.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Tg.indexOf(this.data[n])*45;r+=Tg.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(Tg.indexOf(this.data[n]),6)};var HW=tc;const WW=Vi;function nc(e){this.mode=WW.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}nc.getBitsLength=function(t){return t*8};nc.prototype.getLength=function(){return this.data.length};nc.prototype.getBitsLength=function(){return nc.getBitsLength(this.data.length)};nc.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var VW=nc;const GW=Vi,KW=ds;function rc(e){this.mode=GW.KANJI,this.data=e}rc.getBitsLength=function(t){return t*13};rc.prototype.getLength=function(){return this.data.length};rc.prototype.getBitsLength=function(){return rc.getBitsLength(this.data.length)};rc.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=KW.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var YW=rc,W4={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,a){var i={},o={};o[r]=0;var l=t.PriorityQueue.make();l.push(r,0);for(var c,d,u,f,h,g,y,p,S;!l.empty();){c=l.pop(),d=c.value,f=c.cost,h=n[d]||{};for(u in h)h.hasOwnProperty(u)&&(g=h[u],y=f+g,p=o[u],S=typeof o[u]>"u",(S||p>y)&&(o[u]=y,l.push(u,y),i[u]=d))}if(typeof a<"u"&&typeof o[a]>"u"){var x=["Could not find a path from ",r," to ",a,"."].join("");throw new Error(x)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var a=[],i=r;i;)a.push(i),n[i],i=n[i];return a.reverse(),a},find_path:function(n,r,a){var i=t.single_source_shortest_paths(n,r,a);return t.extract_shortest_path_from_predecessor_list(i,a)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,a={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(a[i]=r[i]);return a.queue=[],a.sorter=n.sorter||r.default_sorter,a},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var a={value:n,cost:r};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(W4);var qW=W4.exports;(function(e){const t=Vi,n=zW,r=HW,a=VW,i=YW,o=ha,l=ds,c=qW;function d(x){return unescape(encodeURIComponent(x)).length}function u(x,v,b){const w=[];let N;for(;(N=x.exec(b))!==null;)w.push({data:N[0],index:N.index,mode:v,length:N[0].length});return w}function f(x){const v=u(o.NUMERIC,t.NUMERIC,x),b=u(o.ALPHANUMERIC,t.ALPHANUMERIC,x);let w,N;return l.isKanjiModeEnabled()?(w=u(o.BYTE,t.BYTE,x),N=u(o.KANJI,t.KANJI,x)):(w=u(o.BYTE_KANJI,t.BYTE,x),N=[]),v.concat(b,w,N).sort(function(C,_){return C.index-_.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function h(x,v){switch(v){case t.NUMERIC:return n.getBitsLength(x);case t.ALPHANUMERIC:return r.getBitsLength(x);case t.KANJI:return i.getBitsLength(x);case t.BYTE:return a.getBitsLength(x)}}function g(x){return x.reduce(function(v,b){const w=v.length-1>=0?v[v.length-1]:null;return w&&w.mode===b.mode?(v[v.length-1].data+=b.data,v):(v.push(b),v)},[])}function y(x){const v=[];for(let b=0;b<x.length;b++){const w=x[b];switch(w.mode){case t.NUMERIC:v.push([w,{data:w.data,mode:t.ALPHANUMERIC,length:w.length},{data:w.data,mode:t.BYTE,length:w.length}]);break;case t.ALPHANUMERIC:v.push([w,{data:w.data,mode:t.BYTE,length:w.length}]);break;case t.KANJI:v.push([w,{data:w.data,mode:t.BYTE,length:d(w.data)}]);break;case t.BYTE:v.push([{data:w.data,mode:t.BYTE,length:d(w.data)}])}}return v}function p(x,v){const b={},w={start:{}};let N=["start"];for(let R=0;R<x.length;R++){const C=x[R],_=[];for(let W=0;W<C.length;W++){const T=C[W],E=""+R+W;_.push(E),b[E]={node:T,lastCount:0},w[E]={};for(let B=0;B<N.length;B++){const H=N[B];b[H]&&b[H].node.mode===T.mode?(w[H][E]=h(b[H].lastCount+T.length,T.mode)-h(b[H].lastCount,T.mode),b[H].lastCount+=T.length):(b[H]&&(b[H].lastCount=T.length),w[H][E]=h(T.length,T.mode)+4+t.getCharCountIndicator(T.mode,v))}}N=_}for(let R=0;R<N.length;R++)w[N[R]].end=0;return{map:w,table:b}}function S(x,v){let b;const w=t.getBestModeForData(x);if(b=t.from(v,w),b!==t.BYTE&&b.bit<w.bit)throw new Error('"'+x+'" cannot be encoded with mode '+t.toString(b)+`.
 Suggested mode is: `+t.toString(w));switch(b===t.KANJI&&!l.isKanjiModeEnabled()&&(b=t.BYTE),b){case t.NUMERIC:return new n(x);case t.ALPHANUMERIC:return new r(x);case t.KANJI:return new i(x);case t.BYTE:return new a(x)}}e.fromArray=function(v){return v.reduce(function(b,w){return typeof w=="string"?b.push(S(w,null)):w.data&&b.push(S(w.data,w.mode)),b},[])},e.fromString=function(v,b){const w=f(v,l.isKanjiModeEnabled()),N=y(w),R=p(N,b),C=c.find_path(R.map,"start","end"),_=[];for(let W=1;W<C.length-1;W++)_.push(R.table[C[W]].node);return e.fromArray(g(_))},e.rawSplit=function(v){return e.fromArray(f(v,l.isKanjiModeEnabled()))}})(H4);const pp=ds,Eg=fp,XW=RW,JW=LW,ZW=M4,QW=A4,Ux=D4,zx=hp,eV=PW,Zh=O4,tV=z4,nV=Vi,_g=H4;function rV(e,t){const n=e.size,r=QW.getPositions(t);for(let a=0;a<r.length;a++){const i=r[a][0],o=r[a][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||n<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||n<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(i+l,o+c,!0,!0):e.set(i+l,o+c,!1,!0))}}function sV(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function aV(e,t){const n=ZW.getPositions(t);for(let r=0;r<n.length;r++){const a=n[r][0],i=n[r][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?e.set(a+o,i+l,!0,!0):e.set(a+o,i+l,!1,!0)}}function iV(e,t){const n=e.size,r=Zh.getEncodedBits(t);let a,i,o;for(let l=0;l<18;l++)a=Math.floor(l/3),i=l%3+n-8-3,o=(r>>l&1)===1,e.set(a,i,o,!0),e.set(i,a,o,!0)}function Rg(e,t,n){const r=e.size,a=tV.getEncodedBits(t,n);let i,o;for(i=0;i<15;i++)o=(a>>i&1)===1,i<6?e.set(i,8,o,!0):i<8?e.set(i+1,8,o,!0):e.set(r-15+i,8,o,!0),i<8?e.set(8,r-i-1,o,!0):i<9?e.set(8,15-i-1+1,o,!0):e.set(8,15-i-1,o,!0);e.set(r-8,8,1,!0)}function oV(e,t){const n=e.size;let r=-1,a=n-1,i=7,o=0;for(let l=n-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(a,l-c)){let d=!1;o<t.length&&(d=(t[o]>>>i&1)===1),e.set(a,l-c,d),i--,i===-1&&(o++,i=7)}if(a+=r,a<0||n<=a){a-=r,r=-r;break}}}function lV(e,t,n){const r=new XW;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),nV.getCharCountIndicator(c.mode,e)),c.write(r)});const a=pp.getSymbolTotalCodewords(e),i=zx.getTotalCodewordsCount(e,t),o=(a-i)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(o-r.getLengthInBits())/8;for(let c=0;c<l;c++)r.put(c%2?17:236,8);return cV(r,e,t)}function cV(e,t,n){const r=pp.getSymbolTotalCodewords(t),a=zx.getTotalCodewordsCount(t,n),i=r-a,o=zx.getBlocksCount(t,n),l=r%o,c=o-l,d=Math.floor(r/o),u=Math.floor(i/o),f=u+1,h=d-u,g=new eV(h);let y=0;const p=new Array(o),S=new Array(o);let x=0;const v=new Uint8Array(e.buffer);for(let C=0;C<o;C++){const _=C<c?u:f;p[C]=v.slice(y,y+_),S[C]=g.encode(p[C]),y+=_,x=Math.max(x,_)}const b=new Uint8Array(r);let w=0,N,R;for(N=0;N<x;N++)for(R=0;R<o;R++)N<p[R].length&&(b[w++]=p[R][N]);for(N=0;N<h;N++)for(R=0;R<o;R++)b[w++]=S[R][N];return b}function dV(e,t,n,r){let a;if(Array.isArray(e))a=_g.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const u=_g.rawSplit(e);d=Zh.getBestVersionForData(u,n)}a=_g.fromString(e,d||40)}else throw new Error("Invalid data");const i=Zh.getBestVersionForData(a,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=lV(t,n,a),l=pp.getSymbolSize(t),c=new JW(l);return rV(c,t),sV(c),aV(c,t),Rg(c,n,0),t>=7&&iV(c,t),oV(c,o),isNaN(r)&&(r=Ux.getBestMask(c,Rg.bind(null,c,n))),Ux.applyMask(r,c),Rg(c,n,r),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:a}}I4.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=Eg.M,a,i;return typeof n<"u"&&(r=Eg.from(n.errorCorrectionLevel,Eg.M),a=Zh.from(n.version),i=Ux.from(n.maskPattern),n.toSJISFunc&&pp.setToSJISFunction(n.toSJISFunc)),dV(t,a,r,i)};var V4={},Pv={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const a=parseInt(r.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const a=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:a,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,a){return a.width&&a.width>=r+a.margin*2?a.width/(r+a.margin*2):a.scale},e.getImageWidth=function(r,a){const i=e.getScale(r,a);return Math.floor((r+a.margin*2)*i)},e.qrToImageData=function(r,a,i){const o=a.modules.size,l=a.modules.data,c=e.getScale(o,i),d=Math.floor((o+i.margin*2)*c),u=i.margin*c,f=[i.color.light,i.color.dark];for(let h=0;h<d;h++)for(let g=0;g<d;g++){let y=(h*d+g)*4,p=i.color.light;if(h>=u&&g>=u&&h<d-u&&g<d-u){const S=Math.floor((h-u)/c),x=Math.floor((g-u)/c);p=f[l[S*o+x]?1:0]}r[y++]=p.r,r[y++]=p.g,r[y++]=p.b,r[y]=p.a}}})(Pv);(function(e){const t=Pv;function n(a,i,o){a.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=r()),c=t.getOptions(c);const u=t.getImageWidth(i.modules.size,c),f=d.getContext("2d"),h=f.createImageData(u,u);return t.qrToImageData(h.data,i,c),n(f,d,u),f.putImageData(h,0,0),d},e.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=e.render(i,o,c),u=c.type||"image/png",f=c.rendererOpts||{};return d.toDataURL(u,f.quality)}})(V4);var G4={};const uV=Pv;function bS(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Lg(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function fV(e,t,n){let r="",a=0,i=!1,o=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),d=Math.floor(l/t);!c&&!i&&(i=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(r+=i?Lg("M",c+n,.5+d+n):Lg("m",a,0),a=0,i=!1),c+1<t&&e[l+1]||(r+=Lg("h",o),o=0)):a++}return r}G4.render=function(t,n,r){const a=uV.getOptions(n),i=t.modules.size,o=t.modules.data,l=i+a.margin*2,c=a.color.light.a?"<path "+bS(a.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+bS(a.color.dark,"stroke")+' d="'+fV(o,i,a.margin)+'"/>',u='viewBox="0 0 '+l+" "+l+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof r=="function"&&r(null,h),h};const hV=EW,$x=I4,K4=V4,mV=G4;function Mv(e,t,n,r,a){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!hV())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(a=n,n=t,t=r=void 0):o===3&&(t.getContext&&typeof a>"u"?(a=r,r=void 0):(a=r,r=n,n=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=t,t=r=void 0):o===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(c,d){try{const u=$x.create(n,r);c(e(u,t,r))}catch(u){d(u)}})}try{const c=$x.create(n,r);a(null,e(c,t,r))}catch(c){a(c)}}Ql.create=$x.create;Ql.toCanvas=Mv.bind(null,K4.render);Ql.toDataURL=Mv.bind(null,K4.renderToDataURL);Ql.toString=Mv.bind(null,function(e,t,n){return mV.render(e,n)});function pV(e){const t=typeof e=="string"?new Date(parseInt(e)):new Date(e),r=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][t.getMonth()],a=t.getDate(),i=t.getFullYear();return`${r} ${a}, ${i}`}function gV({post:e,isOpen:t,onClose:n}){var g;const[r,a]=D.useState(""),[i,o]=D.useState(!1),l=D.useRef(null);D.useEffect(()=>{t&&e&&e.id?(a(""),o(!0),c()):t||(a(""),o(!1))},[t,e==null?void 0:e.id]);async function c(){if(!e||!e.id){console.error("QRCodeModal: Post or post.id is missing",e),o(!1);return}o(!0);try{const y=`${window.location.origin}/post/${e.id}`;console.log("QRCodeModal: Generating QR code for URL:",y);const p=await Ql.toDataURL(y,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});console.log("QRCodeModal: QR code generated, length:",p.length);const S=document.createElement("canvas");S.width=300,S.height=300;const x=S.getContext("2d");if(!x){console.warn("QRCodeModal: Canvas context not available, using basic QR code"),a(p),o(!1);return}x.fillStyle="#FFFFFF",x.fillRect(0,0,300,300);const v=new Image;v.src=p,await new Promise((b,w)=>{v.onload=()=>{try{x.drawImage(v,0,0,300,300);const N=x.getImageData(0,0,300,300),R=N.data;for(let E=0;E<R.length;E+=4){const B=R[E],H=R[E+1],q=R[E+2];if(B<128&&H<128&&q<128){const ie=E/4%300,X=Math.floor(E/4/300),V=(ie+X)/600;let z,J,U;if(V<.5){const ue=V*2;z=Math.round(236+(168-236)*ue),J=Math.round(72+(85-72)*ue),U=Math.round(153+(247-153)*ue)}else{const ue=(V-.5)*2;z=Math.round(168+(124-168)*ue),J=Math.round(85+(58-85)*ue),U=Math.round(247+(237-247)*ue)}R[E]=z,R[E+1]=J,R[E+2]=U}}x.putImageData(N,0,0);const C=x.createLinearGradient(0,0,300,300);C.addColorStop(0,"#ec4899"),C.addColorStop(.5,"#a855f7"),C.addColorStop(1,"#7c3aed");const _=40;[{x:20,y:20},{x:300-20-_,y:20},{x:20,y:300-20-_}].forEach(E=>{x.beginPath(),x.arc(E.x+_/2,E.y+_/2,_/2,0,Math.PI*2),x.fillStyle=C,x.fill(),x.beginPath(),x.arc(E.x+_/2,E.y+_/2,_/2-3,0,Math.PI*2),x.fillStyle="#FFFFFF",x.fill(),x.fillStyle=C,x.fillRect(E.x+_/4,E.y+_/4,_/2,_/2)});const T=S.toDataURL("image/png");console.log("QRCodeModal: Final QR code generated, length:",T.length),a(T),o(!1),b()}catch(N){console.error("QRCodeModal: Error processing QR code:",N),o(!1),w(N)}},v.onerror=N=>{console.error("QRCodeModal: Error loading QR code image:",N),o(!1),w(new Error("Failed to load QR code image"))}})}catch(y){console.error("QRCodeModal: Error generating QR code:",y);try{if(e&&e.id){const p=`${window.location.origin}/post/${e.id}`,S=await Ql.toDataURL(p,{width:300,margin:2});a(S),console.log("QRCodeModal: Fallback QR code generated")}}catch(p){console.error("QRCodeModal: Fallback QR code generation also failed:",p)}o(!1)}}function d(){if(!r)return;const y=document.createElement("a");y.download=`post-${e.id}-qr-code.png`,y.href=r,y.click()}if(!t)return null;const u=e.createdAt?pV(e.createdAt):"Unknown date",h=((g=(e.userHandle||"Unknown user").split("@")[0])==null?void 0:g.toUpperCase())||"UNKNOWN";return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:n}),s.jsxs("div",{className:"relative w-full max-w-sm mx-4 bg-[#262626] dark:bg-[#1a1a1a] rounded-3xl shadow-2xl overflow-hidden",children:[s.jsx("button",{onClick:n,className:"absolute top-4 right-4 z-10 p-2 rounded-full hover:bg-gray-700/50 transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"relative",children:[r?s.jsx("img",{src:r,alt:"QR Code",className:"w-64 h-64 rounded-2xl",onError:y=>{console.error("QRCodeModal: Error displaying QR code image"),y.currentTarget.style.display="none"}}):s.jsx("div",{className:"w-64 h-64 rounded-2xl bg-white flex flex-col items-center justify-center gap-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-8 h-8 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Generating QR code..."})]}):s.jsx("p",{className:"text-xs text-gray-500",children:"Failed to generate QR code"})}),s.jsx("canvas",{ref:l,className:"hidden"})]})}),s.jsxs("div",{className:"text-center mb-4",children:[s.jsxs("div",{className:"text-sm font-medium mb-1",style:{background:"linear-gradient(90deg, #ec4899 0%, #a855f7 50%, #7c3aed 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent"},children:["POST SHARED ON ",u.toUpperCase()]}),s.jsxs("div",{className:"text-sm font-medium mb-4",style:{background:"linear-gradient(90deg, #ec4899 0%, #a855f7 50%, #7c3aed 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent"},children:["BY @",h]}),s.jsx("p",{className:"text-white text-sm text-gray-300 px-4",children:"People can scan this QR code with their smartphone's camera to see this post."})]}),s.jsxs("div",{className:"space-y-3 mt-6",children:[s.jsxs("button",{onClick:d,disabled:!r||i,className:"w-full py-3 rounded-lg bg-blue-500 hover:bg-blue-600 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsx(sU,{className:"w-5 h-5"}),"Save QR code"]}),s.jsx("button",{onClick:n,className:"w-full py-3 rounded-lg bg-gray-700 hover:bg-gray-600 text-white font-medium transition-colors",children:"Done"})]})]})]})]})}function xV({post:e,userId:t,isOpen:n,onClose:r,onCopyLink:a,onShare:i,onReport:o,onUnfollow:l,onMute:c,onBlock:d,onHide:u,onNotInterested:f,onDelete:h,onEdit:g,onArchive:y,onBoost:p,onReclip:S,onTurnOnNotifications:x,onTurnOffNotifications:v,isCurrentUser:b=!1,isFollowing:w=!1,isSaved:N=!1,isMuted:R=!1,isBlocked:C=!1,hasNotifications:_=!1}){const[W,T]=m.useState(!1),[E,B]=m.useState(!1),[H,q]=m.useState(!1);if(!n)return null;const ie=()=>{T(!0)},X=async()=>{try{const J=`${window.location.origin}/post/${e.id}`;await navigator.clipboard.writeText(J),r(),a==null||a()}catch(J){console.error("Failed to copy link:",J)}},V=async J=>{if(!H){q(!0);try{await J(),r()}catch(U){console.error("Error performing action:",U)}finally{q(!1)}}},z=b?[{icon:yU,label:"Delete",action:h,danger:!0},{icon:Pb,label:"Edit",action:g},{icon:Vd,label:"Copy Link",action:X},{icon:ZO,label:"Archive",action:y},{icon:_?eU:pE,label:_?"Turn off post notifications":"Turn on post notifications",action:_?v:x}]:[{icon:Ei,label:"Reclip",action:S},{icon:Vd,label:"Copy Link",action:X},{icon:iU,label:"Report post",action:o,danger:!0},...w?[{icon:wU,label:`Unfollow ${e.userHandle.split("@")[0]}`,action:l}]:[],{icon:rp,label:R?`Unmute ${e.userHandle.split("@")[0]}`:`Mute ${e.userHandle.split("@")[0]}`,action:c},{icon:SU,label:`Block ${e.userHandle.split("@")[0]}`,action:d,danger:!0},{icon:aU,label:"Hide",action:u},{icon:oU,label:"Not interested",action:f}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),s.jsxs("div",{className:"relative w-full bg-[#262626] dark:bg-[#1a1a1a] rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden flex flex-col animate-in slide-in-from-bottom duration-300",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-10 p-2 rounded-full hover:bg-gray-700/50 transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-5 h-5 text-white"})}),s.jsx("div",{className:"flex justify-center pt-3 pb-2",children:s.jsx("div",{className:"w-12 h-1 bg-gray-500 dark:bg-gray-600 rounded-full"})}),s.jsxs("div",{className:"px-4 py-3 border-b border-gray-700 dark:border-gray-800 flex items-center justify-around",children:[s.jsxs("button",{onClick:ie,disabled:H,className:"flex flex-col items-center gap-2 py-2 px-4 rounded-lg hover:bg-gray-700/50 dark:hover:bg-gray-600/50 transition-colors disabled:opacity-50",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${N?"bg-yellow-500/20":"bg-gray-700 dark:bg-gray-600"}`,children:s.jsx(qc,{className:`w-6 h-6 ${N?"text-yellow-400 fill-yellow-400":"text-white"}`})}),s.jsx("span",{className:"text-xs text-white font-medium",children:N?"Saved":"Save"})]}),s.jsxs("button",{onClick:()=>i&&V(i),disabled:H,className:"flex flex-col items-center gap-2 py-2 px-4 rounded-lg hover:bg-gray-700/50 dark:hover:bg-gray-600/50 transition-colors disabled:opacity-50",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 dark:bg-gray-600 flex items-center justify-center",children:s.jsx(Nu,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-white font-medium",children:"Share"})]}),b&&p&&s.jsxs("button",{onClick:()=>p&&V(p),disabled:H,className:"flex flex-col items-center gap-2 py-2 px-4 rounded-lg hover:bg-gray-700/50 dark:hover:bg-gray-600/50 transition-colors disabled:opacity-50",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 dark:bg-gray-600 flex items-center justify-center",children:s.jsx(Ca,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-white font-medium",children:"Boost"})]}),!b&&s.jsxs("button",{onClick:()=>{B(!0)},disabled:H,className:"flex flex-col items-center gap-2 py-2 px-4 rounded-lg hover:bg-gray-700/50 dark:hover:bg-gray-600/50 transition-colors disabled:opacity-50",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 dark:bg-gray-600 flex items-center justify-center",children:s.jsx(dU,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-white font-medium",children:"QR code"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto py-4 px-4",children:s.jsx("div",{className:"grid grid-cols-3 gap-4",children:z.map((J,U)=>{const ue=J.icon,fe=J.danger,Ae=J.highlight;return s.jsxs("button",{onClick:()=>J.action&&V(J.action),disabled:H,className:"flex flex-col items-center gap-2 py-2 px-2 rounded-lg hover:bg-gray-700/50 dark:hover:bg-gray-600/50 transition-colors disabled:opacity-50",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${fe?"bg-red-500/20":Ae?"bg-yellow-500/20":"bg-gray-700 dark:bg-gray-600"}`,children:s.jsx(ue,{className:`w-6 h-6 ${fe?"text-red-400":Ae?"text-yellow-400":"text-white"}`})}),s.jsx("span",{className:`text-xs font-medium text-center leading-tight ${fe?"text-red-400":Ae?"text-yellow-400":"text-white"}`,children:J.label})]},U)})})})]})]}),W&&s.jsx(L4,{post:e,userId:t,isOpen:W,onClose:()=>{T(!1),r()},onSaved:()=>{T(!1),r()}}),E&&s.jsx(gV,{post:e,isOpen:E,onClose:()=>{B(!1),r()}})]})}function yV({post:e,isOpen:t,onClose:n,onSave:r}){const[a,i]=D.useState(""),[o,l]=D.useState(""),[c,d]=D.useState(!1),[u,f]=D.useState(null);if(D.useEffect(()=>{t&&(i(e.text||e.text_content||""),l(e.locationLabel||""),f(null))},[t,e]),!t)return null;const h=async()=>{var y,p,S;if(!c){f(null),d(!0);try{await r(a.trim(),o.trim()),n()}catch(x){const v=(x==null?void 0:x.message)==="CONNECTION_REFUSED"||(x==null?void 0:x.name)==="ConnectionRefused"||((y=x==null?void 0:x.message)==null?void 0:y.includes("Failed to fetch"))||((p=x==null?void 0:x.message)==null?void 0:p.includes("ERR_CONNECTION_REFUSED"))||((S=x==null?void 0:x.message)==null?void 0:S.includes("NetworkError"));f(v?"Backend server is not running. Please start the Laravel backend server (php artisan serve) and try again.":x.message||"Failed to update post")}finally{d(!1)}}},g=()=>{c||n()};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl w-full max-w-md mx-4 shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Post"}),s.jsx("button",{onClick:g,disabled:c,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400 transition-colors disabled:opacity-50",children:s.jsx(pt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[u&&s.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-950 text-red-800 dark:text-red-200 text-sm",children:u}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Text"}),s.jsx("textarea",{value:a,onChange:y=>i(y.target.value),placeholder:"What's on your mind?",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500 dark:focus:ring-pink-400 resize-none",rows:4,maxLength:500,disabled:c}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-right",children:[a.length,"/500"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),s.jsxs("div",{className:"relative",children:[s.jsx(ln,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),s.jsx("input",{type:"text",value:o,onChange:y=>l(y.target.value),placeholder:"Add location",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500 dark:focus:ring-pink-400",maxLength:200,disabled:c})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:g,disabled:c,className:"px-4 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:h,disabled:c,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-pink-500 to-purple-600 text-white font-medium hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save"})]})]})})}function bV({src:e,alt:t="",className:n="",style:r,onLoad:a,onError:i,priority:o=!1,blurDataURL:l}){const[c,d]=D.useState(null),[u,f]=D.useState(null),[h,g]=D.useState(!1),[y,p]=D.useState(!1),S=D.useRef(null),x=D.useRef(null),v=D.useRef(null),b=()=>{if(l)return l;const T=document.createElement("canvas");T.width=20,T.height=20;const E=T.getContext("2d");if(E){const H=e.split("").reduce((ie,X)=>ie+X.charCodeAt(0),0)%360,q=E.createLinearGradient(0,0,20,20);q.addColorStop(0,`hsl(${H}, 30%, 20%)`),q.addColorStop(1,`hsl(${H}, 30%, 15%)`),E.fillStyle=q,E.fillRect(0,0,20,20)}return T.toDataURL("image/jpeg",.1)},[w]=D.useState(()=>b()),N=T=>{if(T.startsWith("data:")||T.startsWith("blob:"))return T;const B=document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0?"webp":"jpg",H=T.includes("?")?"&":"?";return`${T}${H}w=400&q=30&format=${B}`},R=T=>{if(T.startsWith("data:")||T.startsWith("blob:"))return T;if(document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0&&!T.includes("format=")){const B=T.includes("?")?"&":"?";return`${T}${B}format=webp`}return T};D.useEffect(()=>{if(o)f(N(e)),d(R(e));else{if(!v.current)return;x.current=new IntersectionObserver(T=>{T.forEach(E=>{E.isIntersecting&&(f(N(e)),setTimeout(()=>{d(R(e))},100),x.current&&x.current.disconnect())})},{rootMargin:"200px",threshold:.01}),x.current.observe(v.current)}return()=>{x.current&&x.current.disconnect()}},[e,o]);const C=()=>{c||d(R(e))},_=T=>{g(!0),a==null||a(T)},W=()=>{p(!0),i==null||i()};return s.jsxs("div",{ref:v,className:`relative w-full h-full overflow-hidden ${n}`,style:r,children:[s.jsx("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:`url(${w})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(20px)",transform:"scale(1.1)",opacity:h?0:1,transition:"opacity 0.3s ease-out"}}),u&&s.jsx("img",{src:u,alt:"",className:"absolute inset-0 w-full h-full object-cover",style:{opacity:h?0:1,transition:"opacity 0.3s ease-out"},onLoad:C,loading:"lazy",decoding:"async"}),c&&s.jsx("img",{ref:S,src:c,alt:t,className:"absolute inset-0 w-full h-full object-cover",style:{opacity:h?1:0,transition:"opacity 0.3s ease-out"},onLoad:_,onError:W,loading:o?"eager":"lazy",decoding:"async"}),y&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75",children:s.jsxs("div",{className:"text-center text-white",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"text-sm",children:"Failed to load image"})]})})]})}function vV({children:e,minZoom:t=1,maxZoom:n=4,doubleTapZoom:r=2,className:a=""}){const i=D.useRef(null),[o,l]=D.useState(1),[c,d]=D.useState(0),[u,f]=D.useState(0),[h,g]=D.useState(!1),y=D.useRef(null),p=D.useCallback((C,_,W)=>{g(!0),l(C),d(_),f(W),setTimeout(()=>g(!1),300)},[]),S=D.useCallback(()=>{p(1,0,0)},[p]),x=(C,_)=>{const W=_.clientX-C.clientX,T=_.clientY-C.clientY;return Math.sqrt(W*W+T*T)},v=(C,_)=>({x:(C.clientX+_.clientX)/2,y:(C.clientY+_.clientY)/2}),b=D.useCallback(C=>{var W,T;if(!C.target.closest('button, a, [role="button"]')){if(C.touches.length===2){C.stopPropagation();const E=C.touches[0],B=C.touches[1],H=x(E,B),q=v(E,B);if(!i.current)return;const ie=i.current.getBoundingClientRect();y.current={initialDistance:H,initialScale:o,initialTranslateX:c,initialTranslateY:u,lastTouchX:q.x-ie.left,lastTouchY:q.y-ie.top,lastTapTime:0,lastTapX:0}}else if(C.touches.length===1&&o>1){C.stopPropagation();const E=C.touches[0];y.current={initialDistance:0,initialScale:o,initialTranslateX:c,initialTranslateY:u,lastTouchX:E.clientX,lastTouchY:E.clientY,lastTapTime:((W=y.current)==null?void 0:W.lastTapTime)||0,lastTapX:((T=y.current)==null?void 0:T.lastTapX)||0}}else if(C.touches.length===1&&o===1){const E=C.touches[0],B=Date.now(),H=y.current;if(H&&B-H.lastTapTime<300&&Math.abs(E.clientX-H.lastTapX)<50){if(C.stopPropagation(),!i.current)return;const q=i.current.getBoundingClientRect(),ie=q.width/2,X=q.height/2,V=(E.clientX-q.left-ie)*(r-1),z=(E.clientY-q.top-X)*(r-1);p(r,-V,-z),y.current=null}else y.current={initialDistance:0,initialScale:o,initialTranslateX:c,initialTranslateY:u,lastTouchX:E.clientX,lastTouchY:E.clientY,lastTapTime:B,lastTapX:E.clientX}}}},[o,c,u,r,p]),w=D.useCallback(C=>{if(!C.target.closest('button, a, [role="button"]')&&y.current){if(C.touches.length===2){C.preventDefault(),C.stopPropagation();const W=C.touches[0],T=C.touches[1],E=x(W,T),B=v(W,T);if(!i.current)return;const H=i.current.getBoundingClientRect(),q=B.x-H.left,ie=B.y-H.top,X=E/y.current.initialDistance,V=Math.max(t,Math.min(n,y.current.initialScale*X)),z=(q-H.width/2)*(V-y.current.initialScale),J=(ie-H.height/2)*(V-y.current.initialScale);l(V),d(y.current.initialTranslateX-z),f(y.current.initialTranslateY-J)}else if(C.touches.length===1&&o>1){C.preventDefault(),C.stopPropagation();const W=C.touches[0],T=W.clientX-y.current.lastTouchX,E=W.clientY-y.current.lastTouchY;if(!i.current)return;const B=i.current.getBoundingClientRect(),H=B.width*o,q=B.height*o,ie=(H-B.width)/2,X=(q-B.height)/2,V=Math.max(-ie,Math.min(ie,y.current.initialTranslateX+T)),z=Math.max(-X,Math.min(X,y.current.initialTranslateY+E));d(V),f(z)}}},[o,t,n]),N=D.useCallback(C=>{y.current&&(o<1.1&&o>1&&S(),C.touches.length===0&&(y.current=null))},[o,S]),R=D.useCallback(C=>{if(!C.target.closest('button, a, [role="button"]'))if(o>1)C.stopPropagation(),S();else{if(!i.current)return;const W=i.current.getBoundingClientRect(),T=W.width/2,E=W.height/2,B=(C.clientX-W.left-T)*(r-1),H=(C.clientY-W.top-E)*(r-1);p(r,-B,-H)}},[o,r,S,p]);return D.useEffect(()=>{o===1&&(d(0),f(0))},[o]),s.jsx("div",{ref:i,className:`relative w-full h-full overflow-hidden ${a}`,onTouchStart:b,onTouchMove:w,onTouchEnd:N,onTouchCancel:N,onDoubleClick:R,style:{touchAction:"pan-x pan-y pinch-zoom",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",cursor:o>1?"grab":"zoom-in"},children:s.jsx("div",{style:{transform:`translate(${c}px, ${u}px) scale(${o})`,transition:h?"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)":"none",transformOrigin:"center center",width:"100%",height:"100%"},children:e})})}const wV=1/1.91,kV=4/5,SV=()=>{if(typeof window<"u")return window.innerWidth;throw new Error("Screen width must be provided for React Native")},vS=(e,t,n)=>{const r=n??SV(),a=t/e,i=Math.min(Math.max(a,wV),kV);return{width:r,height:r*i,aspectRatio:i}};function jV({onCreateClick:e}){const t=Xt(),n=qn(),{user:r}=tn(),a=(d,u,f,h)=>{const g=n.pathname===d;return s.jsxs("button",{onClick:h||(()=>t(d)),className:`flex flex-col items-center justify-center flex-1 py-2 ${g?"text-white font-semibold":"text-gray-500"} transition-colors`,"aria-current":g?"page":void 0,title:u,children:[f,s.jsx("span",{className:"text-xs mt-1",children:u})]})},i=()=>{t("/feed"),window.dispatchEvent(new CustomEvent("resetFeed"))},o=d=>{const u=d.trim().split(" ");return u.length===1?u[0].charAt(0).toUpperCase():(u[0].charAt(0)+u[u.length-1].charAt(0)).toUpperCase()},l=r!=null&&r.name?o(r.name):"U",c=s.jsxs("div",{className:"w-[22px] h-[22px] rounded-md overflow-hidden bg-gray-700 dark:bg-gray-600 flex items-center justify-center relative",children:[r!=null&&r.avatarUrl?s.jsx("img",{src:r.avatarUrl,alt:"Profile",className:"w-full h-full object-cover",onError:d=>{var h;const u=d.target;u.style.display="none";const f=(h=u.parentElement)==null?void 0:h.querySelector(".profile-fallback");f&&(f.style.display="flex")}}):null,s.jsx("span",{className:"profile-fallback text-white text-xs font-semibold absolute inset-0 flex items-center justify-center",style:{display:r!=null&&r.avatarUrl?"none":"flex"},children:l})]});return s.jsx("nav",{"aria-label":"Primary navigation",className:"fixed bottom-0 inset-x-0 bg-white dark:bg-gray-950 border-t border-gray-200 dark:border-gray-800 z-40 pb-safe",children:s.jsxs("div",{className:"mx-auto max-w-md flex",children:[a("/feed","Home",s.jsx(Gd,{size:22}),i),a("/boost","Boost",s.jsx(Ca,{size:22})),a("/create","Create",s.jsx(gU,{size:22}),e),a("/search","Search",s.jsx(Hi,{size:22})),a("/profile","Passport",c)]})})}function Av(){const e=Xt(),t=qn(),[n,r]=m.useState("Ireland"),[a,i]=m.useState(null),[o,l]=m.useState(!1),c=a||n;return s.jsxs(s.Fragment,{children:[s.jsxs("main",{id:"main",className:"mx-auto max-w-md min-h-screen pb-[calc(64px+theme(spacing.safe))] md:shadow-card md:rounded-2xl md:border md:border-gray-200 md:dark:border-gray-800",style:{backgroundColor:"#030712"},children:[t.pathname!=="/login"&&t.pathname!=="/feed"&&t.pathname!=="/profile"&&!t.pathname.startsWith("/user/")&&s.jsx(f9,{activeTab:c,onLocationChange:i}),s.jsx(FI,{context:{activeTab:n,setActiveTab:r,customLocation:a,setCustomLocation:i}}),t.pathname!=="/discover"&&t.pathname!=="/create/filters"&&t.pathname!=="/create/instant"&&t.pathname!=="/payment"&&t.pathname!=="/clip"&&t.pathname!=="/create"&&t.pathname!=="/template-editor"&&t.pathname!=="/login"&&s.jsx(jV,{onCreateClick:()=>e("/create/instant")})]}),s.jsx(pW,{isOpen:o,onClose:()=>l(!1),onNavigate:d=>e(d)})]})}function NV(e){const t=Xt(),{user:n}=tn(),[r,a]=m.useState(!0),[i,o]=m.useState(!1),l=m.useRef(!1);e.userLocal||n!=null&&n.local;const c=e.userRegional||(n==null?void 0:n.regional)||"Dublin",d=e.userNational||(n==null?void 0:n.national)||"Ireland",u=e.clipsCount||0,f=[c,d,"Following"];return m.useEffect(()=>{if(l.current){a(!0),o(!1);const h=setTimeout(()=>{a(!1),o(!0),setTimeout(()=>{o(!1)},1500)},1500);return()=>clearTimeout(h)}else{l.current=!0,a(!0),o(!1);const h=setTimeout(()=>{a(!1),o(!0),setTimeout(()=>{o(!1)},1500)},1500);return()=>clearTimeout(h)}},[e.active]),s.jsxs("div",{role:"tablist","aria-label":"Locations",className:"sticky top-0 z-30 bg-[#030712] py-2 relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-transparent pointer-events-none z-0"}),r&&s.jsx("div",{className:"absolute top-0 left-0 h-0.5 z-20",style:{width:"100%",background:"linear-gradient(90deg, #ec4899 0%, #a855f7 50%, #7c3aed 100%)",animation:"progressBar 1.5s ease-out forwards"}}),s.jsxs("div",{className:"relative z-10 mb-2 flex items-center px-3",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs("button",{type:"button",onClick:h=>{h.stopPropagation(),t("/stories")},className:"px-5 py-3 text-lg font-bold text-gray-300 hover:text-white transition-colors",children:[s.jsx("span",{children:"Shorts"}),u>0&&s.jsx("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full bg-purple-600 text-white",children:u})]})}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"relative px-4 py-1",children:[s.jsx("span",{className:"relative z-10 text-sm font-semibold tracking-[0.2em] uppercase text-white",children:"GAZETTEER"}),s.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none gazetteer-wave-svg",viewBox:"0 0 200 40","aria-hidden":"true",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"gazetteerWaveGradient",x1:"0%",y1:"50%",x2:"100%",y2:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:"transparent",stopOpacity:"0"}),s.jsx("stop",{offset:"30%",stopColor:"#ff4ecb",stopOpacity:"0.4"}),s.jsx("stop",{offset:"70%",stopColor:"#8f5bff",stopOpacity:"0.4"}),s.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]})}),s.jsx("path",{d:"M-20 26 C 20 4, 80 48, 140 8 S 240 42, 280 16",fill:"none",stroke:"url(#gazetteerWaveGradient)",strokeWidth:"24",strokeLinecap:"round",className:"gazetteer-wave-path"})]})]})}),s.jsx("div",{className:"flex items-center",children:s.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),t("/discover")},className:"px-5 py-3 text-lg font-bold text-gray-300 hover:text-white transition-colors",children:"Discover"})})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2 px-3 relative z-10",children:f.map(h=>{const g=e.active===h,y=`tab-${h}`,p=`panel-${h}`,S=v=>{var b,w;v.stopPropagation(),h==="Discover"?t("/discover"):h==="Clips"?t("/stories"):h==="Following"?(e.onChange("Following"),window.dispatchEvent(new CustomEvent("setFollowingTab")),(b=e.onClearCustom)==null||b.call(e)):(e.onChange(h),(w=e.onClearCustom)==null||w.call(e))},x=h;if(g){const v=h===c||h===d||h==="Following";return s.jsx("button",{id:y,role:"tab","aria-selected":g,"aria-controls":p,tabIndex:g?0:-1,onClick:S,className:"rounded-full px-3 py-1.5 bg-black text-white text-sm font-medium transition-transform active:scale-[.98] focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0 flex items-center justify-center gap-1",style:{outline:"none",boxShadow:"none"},onFocus:b=>{b.currentTarget.style.outline="none",b.currentTarget.style.boxShadow="none"},children:v?s.jsx("span",{style:{background:"linear-gradient(90deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 1) 50%, rgba(255, 255, 255, 0.3) 100%)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:"shimmer 3s linear infinite",display:"inline-block"},children:x}):x},h)}return s.jsx("button",{id:y,role:"tab","aria-selected":g,"aria-controls":p,tabIndex:g?0:-1,onClick:S,className:"rounded-full px-3 py-1.5 bg-black text-gray-500 dark:text-gray-400 text-sm font-medium transition-transform active:scale-[.98] hover:text-gray-300 focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0",style:{outline:"none",boxShadow:"none",border:"none"},onFocus:v=>{v.currentTarget.style.outline="none",v.currentTarget.style.boxShadow="none"},children:x},h)})}),i&&s.jsx("div",{className:"absolute bottom-0 right-0 h-0.5 z-20",style:{background:"linear-gradient(90deg, #ec4899 0%, #a855f7 50%, #7c3aed 100%)",animation:"progressBarReverse 1.5s ease-out forwards",transformOrigin:"right"}})]})}function wS({post:e,onFollow:t,isOverlaid:n=!1,onMenuClick:r}){const{user:a}=tn(),i=Xt(),[o,l]=m.useState(!1),c=`post-title-${e.id}`,d=(a==null?void 0:a.handle)===e.userHandle,u=d?a==null?void 0:a.avatarUrl:void 0;m.useEffect(()=>{async function x(){try{let v;d?v=await hx(e.userHandle):v=await Kf(e.userHandle),l(v)}catch(v){console.error("Error checking story:",v)}}x()},[e.userHandle,d]),m.useEffect(()=>{function x(b){var w;((w=b.detail)==null?void 0:w.userHandle)===e.userHandle&&Kf(e.userHandle).then(l).catch(console.error)}function v(b){var w;((w=b.detail)==null?void 0:w.userHandle)===e.userHandle&&(d?hx(e.userHandle).then(l).catch(console.error):Kf(e.userHandle).then(l).catch(console.error))}return window.addEventListener("storiesViewed",x),window.addEventListener("storyCreated",v),()=>{window.removeEventListener("storiesViewed",x),window.removeEventListener("storyCreated",v)}},[e.userHandle,d]);const f=()=>{o&&i("/stories",{state:{openUserHandle:e.userHandle}})},h=e.isReclipped&&e.originalUserHandle,[g,y]=m.useState(e.isFollowing===!0);m.useEffect(()=>{let x;return!d&&t&&e.isFollowing?(y(!0),x=window.setTimeout(()=>{y(!1)},2500)):y(!1),()=>{x&&window.clearTimeout(x)}},[e.isFollowing,d,t]);const p=n?"text-white drop-shadow-md":"text-gray-900 dark:text-gray-100",S=n?"text-white/90 drop-shadow-md":"text-gray-500 dark:text-gray-400";return s.jsxs("div",{className:"relative flex items-start justify-between px-4 pt-4 pb-3",children:[n&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-transparent pointer-events-none z-0"}),s.jsxs("div",{className:"relative z-10 flex items-start justify-between w-full",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx(It,{src:u,name:e.userHandle.split("@")[0],size:"sm",hasStory:o,onClick:o?f:void 0}),!d&&t&&(e.isFollowing===!1||e.isFollowing===void 0)&&s.jsx("button",{onClick:async x=>{x.stopPropagation(),t&&await t()},className:"absolute -bottom-0.5 -right-0.5 w-5 h-5 rounded-full bg-blue-500 hover:bg-blue-600 border-2 border-white dark:border-gray-900 flex items-center justify-center transition-all duration-200 active:scale-90 shadow-lg z-30","aria-label":"Follow user",children:s.jsx(na,{className:"w-3 h-3 text-white",strokeWidth:2.5})}),!d&&t&&e.isFollowing===!0&&g&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-5 h-5 rounded-full bg-green-500 border-2 border-white dark:border-gray-900 flex items-center justify-center shadow-lg z-30",children:s.jsx(Ib,{className:"w-3 h-3 text-white",strokeWidth:3})})]}),s.jsxs("div",{className:"flex-1",onClick:x=>x.stopPropagation(),children:[h&&s.jsxs("div",{className:`text-xs mb-1 flex items-center gap-1 ${S}`,children:[s.jsx(Ei,{className:"w-3 h-3"}),s.jsxs("span",{children:[e.userHandle," reclipped"]})]}),s.jsx("button",{onClick:x=>{x.stopPropagation(),i(`/user/${h?e.originalUserHandle:e.userHandle}`)},className:`text-left transition-opacity w-full ${n?"hover:opacity-80":"hover:opacity-70"}`,children:s.jsxs("h3",{id:c,className:`font-semibold flex items-center gap-1.5 ${p}`,children:[s.jsx("span",{children:h?e.originalUserHandle:e.userHandle}),s.jsx($s,{value:d?(a==null?void 0:a.countryFlag)||"":zs(h?e.originalUserHandle:e.userHandle)||"",size:16})]})})]})]}),s.jsx("div",{className:"relative z-10 flex flex-col items-end gap-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[e.locationLabel&&s.jsxs("button",{onClick:x=>{x.stopPropagation(),window.dispatchEvent(new CustomEvent("locationChange",{detail:{location:e.locationLabel}})),i(`/feed?location=${encodeURIComponent(e.locationLabel)}`)},className:`px-2 py-1 rounded-full text-[10px] font-medium transition-all active:scale-[.98] flex items-center gap-1 ${n?"bg-white/20 backdrop-blur-sm text-white border border-white/30 hover:bg-white/30":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx(ln,{className:"w-2.5 h-2.5"}),s.jsx("span",{children:e.locationLabel})]}),r&&s.jsx("button",{onClick:x=>{x.stopPropagation(),x.preventDefault(),r()},onMouseDown:x=>{x.stopPropagation()},onTouchStart:x=>{x.stopPropagation()},className:`p-1 transition-all active:scale-[.98] z-50 relative ${n?"text-white hover:opacity-70":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,"aria-label":"More options",title:"More options",children:s.jsx(bE,{className:"w-4 h-4"})})]})})]})]})}function CV({tags:e}){return e.length===0?null:s.jsx("div",{className:"flex flex-wrap gap-2 px-4 pb-3",children:e.slice(0,5).map((t,n)=>s.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 text-purple-700 dark:text-purple-300 border border-purple-200/50 dark:border-purple-700/50",children:["#",t]},n))})}function TV({text:e,onDoubleLike:t,textStyle:n,stickers:r}){const[a,i]=m.useState(!1),[o,l]=m.useState(!1),c=m.useRef(0),d=m.useRef(!1),u=m.useRef(null),[f,h]=m.useState({width:0,height:0});m.useEffect(()=>{if(u.current){const w=()=>{var C;const R=(C=u.current)==null?void 0:C.getBoundingClientRect();R&&h({width:R.width,height:R.height})};w();const N=new ResizeObserver(w);return N.observe(u.current),()=>N.disconnect()}},[]);const g=e.length>100,y=g&&!o?e.substring(0,100)+"...":e,p=["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#1e293b","#0f172a","#1a202c"];n!=null&&n.background||(()=>{const w=e.length%p.length;return p[w]})(),n!=null&&n.color;async function S(){const w=Date.now();if(w-c.current<300){i(!0);try{await t()}finally{setTimeout(()=>i(!1),600)}}c.current=w}function x(w){d.current=!0,S(),setTimeout(()=>{d.current=!1},300)}function v(w){if(d.current){w.preventDefault();return}S()}function b(w){w.stopPropagation(),l(!o)}return s.jsxs("div",{className:"mx-4 mt-4 select-none max-w-full relative",children:[s.jsxs("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-8 flex flex-col gap-2 pointer-events-none z-0",children:[s.jsx("div",{className:"w-12 h-0.5 bg-white/30"}),s.jsx("div",{className:"w-12 h-0.5 bg-white/30"}),s.jsx("div",{className:"w-12 h-0.5 bg-white/30"})]}),s.jsxs("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-8 flex flex-col gap-2 pointer-events-none z-0",children:[s.jsx("div",{className:"w-12 h-0.5 bg-white/30"}),s.jsx("div",{className:"w-12 h-0.5 bg-white/30"}),s.jsx("div",{className:"w-12 h-0.5 bg-white/30"})]}),s.jsxs("div",{ref:u,role:"button",tabIndex:0,"aria-label":"Double tap or press to like",onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),t())},onClick:v,onTouchEnd:x,className:"relative w-full rounded-lg bg-white shadow-lg z-10",style:{maxWidth:"100%",boxSizing:"border-box",padding:"16px",marginBottom:"12px"},children:[s.jsx("div",{className:"text-base leading-relaxed whitespace-pre-wrap font-normal text-gray-800 break-words w-full",style:{wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"100%",boxSizing:"border-box"},children:y}),g&&s.jsx("div",{className:"mt-3 flex justify-start",children:s.jsx("button",{onClick:b,className:"text-blue-500 hover:text-blue-600 text-sm font-medium transition-colors focus:outline-none focus:ring-0",style:{outline:"none",border:"none",background:"none"},"aria-label":o?"Show less":"Show more",children:o?"Show less":"Show more"})}),s.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",style:{width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"12px solid white"}}),r&&r.length>0&&f.width>0&&s.jsx(s.Fragment,{children:r.map((w,N)=>{let C=w.x,_=w.y;if(w.x>=45&&w.x<=55&&w.y>=45&&w.y<=55){const T=r.length,E=N/T*Math.PI*2;C=50+Math.cos(E)*30,_=50+Math.sin(E)*30,C=Math.max(15,Math.min(85,C)),_=Math.max(15,Math.min(85,_))}const W={...w,scale:w.scale*.6,x:C,y:_};return s.jsx(Oa,{overlay:W,onUpdate:()=>{},onRemove:()=>{},isSelected:!1,onSelect:()=>{},containerWidth:f.width,containerHeight:f.height},w.id)})}),s.jsx("div",{className:`absolute inset-0 flex items-center justify-center pointer-events-none transition-all duration-300 ${a?"opacity-100 scale-100":"opacity-0 scale-50"}`,children:s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{className:"w-20 h-20 drop-shadow-lg animate-pulse",viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"heartGradientMain",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb"}),s.jsx("stop",{offset:"50%",stopColor:"#8f5bff"}),s.jsx("stop",{offset:"100%",stopColor:"#ff4ecb"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#heartGradientMain)"})]}),s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:`absolute top-2 left-2 w-4 h-4 transition-all duration-500 ${a?"opacity-100 translate-y-[-20px]":"opacity-0 translate-y-0"}`,children:s.jsxs("svg",{viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"heartGradientSmall1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb",stopOpacity:"0.9"}),s.jsx("stop",{offset:"100%",stopColor:"#8f5bff",stopOpacity:"0.9"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#heartGradientSmall1)"})]})}),s.jsx("div",{className:`absolute top-4 right-2 w-3 h-3 transition-all duration-700 delay-100 ${a?"opacity-100 translate-y-[-25px] translate-x-[10px]":"opacity-0 translate-y-0 translate-x-0"}`,children:s.jsxs("svg",{viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"heartGradientSmall2",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb",stopOpacity:"0.8"}),s.jsx("stop",{offset:"100%",stopColor:"#8f5bff",stopOpacity:"0.8"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#heartGradientSmall2)"})]})}),s.jsx("div",{className:`absolute bottom-2 left-4 w-2 h-2 transition-all duration-600 delay-200 ${a?"opacity-100 translate-y-[-15px] translate-x-[-8px]":"opacity-0 translate-y-0 translate-x-0"}`,children:s.jsxs("svg",{viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"heartGradientSmall3",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb",stopOpacity:"0.7"}),s.jsx("stop",{offset:"100%",stopColor:"#8f5bff",stopOpacity:"0.7"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#heartGradientSmall3)"})]})}),s.jsx("div",{className:`absolute bottom-4 right-4 w-3 h-3 transition-all duration-500 delay-150 ${a?"opacity-100 translate-y-[-20px] translate-x-[5px]":"opacity-0 translate-y-0 translate-x-0"}`,children:s.jsxs("svg",{viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"heartGradientSmall4",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb",stopOpacity:"0.85"}),s.jsx("stop",{offset:"100%",stopColor:"#8f5bff",stopOpacity:"0.85"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#heartGradientSmall4)"})]})})]}),s.jsx("div",{className:`absolute inset-0 border-2 border-red-400 rounded-full transition-all duration-1000 ${a?"opacity-0 scale-150":"opacity-100 scale-100"}`}),s.jsx("div",{className:`absolute inset-0 border border-red-300 rounded-full transition-all duration-1200 delay-100 ${a?"opacity-0 scale-200":"opacity-100 scale-100"}`})]})}),s.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",style:{width:0,height:0,borderLeft:"12px solid transparent",borderRight:"12px solid transparent",borderTop:"12px solid white"}})]})]})}function EV({caption:e}){const[t,n]=m.useState(!1),r=100;if(e.length<=r)return s.jsx("div",{className:"text-gray-900 dark:text-gray-100 text-sm leading-relaxed",children:e});const a=t?e:e.substring(0,r)+"...";return s.jsxs("div",{className:"text-gray-900 dark:text-gray-100 text-sm leading-relaxed",children:[a,s.jsx("button",{onClick:()=>n(!t),className:"mt-2 text-white text-xs font-medium hover:underline focus:outline-none focus:ring-0 focus:border-0 ml-2",children:t?"Show less":"Show more"})]})}function Y4({url:e,mediaType:t,text:n,imageText:r,stickers:a,mediaItems:i,onDoubleLike:o,onOpenScenes:l,onCarouselIndexChange:c,onHeartAnimation:d,taggedUsers:u,onShowTaggedUsers:f,templateId:h,videoCaptionsEnabled:g,videoCaptionText:y,subtitlesEnabled:p,subtitleText:S,postUserHandle:x,postLocationLabel:v,postCreatedAt:b,priority:w=!1}){const[N,R]=m.useState(!1),[C,_]=m.useState(!1),[W,T]=m.useState(!0),[E,B]=m.useState(!1),[H,q]=m.useState(!1),[ie,X]=m.useState(!0),[V,z]=m.useState(!1),[J,U]=m.useState(!0),[ue,fe]=m.useState(0),[Ae,_e]=m.useState(null),[Re,Se]=m.useState(null),de=m.useRef(0),F=m.useRef(!1),$=m.useRef(null),Z=m.useRef(!1),Pe=m.useRef(null),ve=m.useRef(null),re=m.useRef(null),M=m.useRef(null),[G,P]=m.useState({width:0,height:0});m.useEffect(()=>{console.log("Media component - taggedUsers:",u,"onShowTaggedUsers:",!!f,"should show icon:",!!(u&&Array.isArray(u)&&u.length>0&&f))},[u,f]);const Y=i&&i.length>0?i:e?[{url:e,type:t||"image"}]:[],[j,O]=m.useState(0),se=Y.length>1,K=Y[j];m.useEffect(()=>{c&&se&&c(j)},[j,se,c]),m.useEffect(()=>{if(M.current&&a&&a.length>0){const we=()=>{var Ze;const Je=(Ze=M.current)==null?void 0:Ze.getBoundingClientRect();Je&&P({width:Je.width,height:Je.height})};we(),window.addEventListener("resize",we);const tt=new ResizeObserver(we);return M.current&&tt.observe(M.current),()=>{window.removeEventListener("resize",we),tt.disconnect()}}},[a,e,j]),m.useEffect(()=>((K==null?void 0:K.type)==="video"&&Pe.current&&(re.current=new IntersectionObserver(we=>{we.forEach(tt=>{tt.isIntersecting?Pe.current&&(Pe.current.play().catch(Je=>{console.error("Error playing video:",Je)}),_(!0)):Pe.current&&(Pe.current.pause(),_(!1),q(!1))})},{threshold:.5}),re.current.observe(Pe.current)),()=>{re.current&&re.current.disconnect()}),[K==null?void 0:K.type]),m.useEffect(()=>{Pe.current&&(K==null?void 0:K.type)==="video"&&(Pe.current.muted=ie)},[ie,K==null?void 0:K.type]);const me=()=>{if(T(!1),B(!1),Pe.current){const we=Pe.current;we.videoWidth>0&&we.videoHeight>0&&_e(we.videoWidth/we.videoHeight)}},pe=we=>{console.error("Media: Video load error",we),T(!1),B(!0)},Ve=we=>{T(!1),B(!1);const tt=we.currentTarget;if(tt.naturalWidth>0&&tt.naturalHeight>0){const Je=vS(tt.naturalWidth,tt.naturalHeight);_e(Je.aspectRatio)}},De=()=>{T(!1),B(!0)},Ce=()=>{_(!0),z(!1),q(!1)},Ft=()=>{_(!1),z(!0),q(!0)};async function Tt(we){if(Z.current)return;const tt=Date.now(),Je=tt-de.current;if($.current&&(clearTimeout($.current),$.current=null),Je<cx){Z.current=!0;let Ze=0,ot=0,L=0,he=0;if(M.current&&we){const je=M.current.getBoundingClientRect();"touches"in we&&we.touches.length>0?(L=we.touches[0].clientX,he=we.touches[0].clientY):"changedTouches"in we&&we.changedTouches.length>0?(L=we.changedTouches[0].clientX,he=we.changedTouches[0].clientY):"clientX"in we?(L=we.clientX,he=we.clientY):(L=je.left+je.width/2,he=je.top+je.height/2),Ze=L-je.left,ot=he-je.top}else if(M.current){const je=M.current.getBoundingClientRect();Ze=je.width/2,ot=je.height/2,L=je.left+Ze,he=je.top+ot}Se({x:Ze,y:ot}),d&&d(L,he),R(!0);try{await o()}catch(je){console.error("Error in double tap like:",je)}finally{setTimeout(()=>{R(!1)},fi.HEART_BURST),setTimeout(()=>{Se(null),Z.current=!1},fi.HEART_POPUP)}}else $.current=setTimeout(()=>{if(!Z.current&&(K==null?void 0:K.type)!=="video"&&l){const Ze=we==null?void 0:we.target,ot=M.current;if(ot&&(Ze===ot||ot.contains(Ze))){const L=Ze.closest("button"),he=Ze.closest("a"),je=L&&L!==ot,at=he&&he!==ot,gt=Ze.closest('[class*="PostHeader"], [class*="postHeader"], [class*="relative flex items-start justify-between"]')!==null;!je&&!at&&!gt&&l()}}$.current=null},cx);de.current=tt}function Jt(we){we.preventDefault(),F.current=!0,Tt(we),setTimeout(()=>{F.current=!1},400)}function Nt(we){if(F.current){we.preventDefault(),we.stopPropagation();return}Tt(we)}if(m.useEffect(()=>{if((K==null?void 0:K.type)==="image"&&W){const we=setTimeout(()=>{console.warn("Image load timeout, setting loading to false"),T(!1)},1e4);return()=>clearTimeout(we)}},[K==null?void 0:K.type,W]),m.useEffect(()=>()=>{$.current&&(clearTimeout($.current),$.current=null),Z.current=!1,Se(null),R(!1)},[j]),m.useEffect(()=>{if((K==null?void 0:K.type)==="video"&&l&&!W){U(!0);const we=setTimeout(()=>{U(!1)},2e3);return()=>clearTimeout(we)}},[K==null?void 0:K.type,j,W,l]),m.useEffect(()=>{_e(null),(K==null?void 0:K.type)==="video"&&Pe.current?(T(!0),_(!1),z(!1),q(!1),fe(0),Pe.current.load()):(K==null?void 0:K.type)==="image"&&(setTimeout(()=>{ve.current&&ve.current.complete&&ve.current.naturalWidth>0?(T(!1),_e(ve.current.naturalWidth/ve.current.naturalHeight)):T(!0)},0),_(!1),q(!1),fe(0))},[j,K==null?void 0:K.type]),m.useEffect(()=>{(K==null?void 0:K.type)==="image"&&ve.current&&ve.current.complete&&ve.current.naturalWidth>0&&(T(!1),Ae||_e(ve.current.naturalWidth/ve.current.naturalHeight))},[K==null?void 0:K.url,K==null?void 0:K.type,Ae]),n&&!e&&(!i||i.length===0)||!K)return null;function st(){se&&j<Y.length-1&&O(we=>{const tt=we+1;return tt<Y.length?tt:we})}function Ye(){se&&O(we=>(we-1+Y.length)%Y.length)}const Bt=m.useMemo(()=>Ae?{width:"100%",height:vS(window.innerWidth,window.innerWidth/Ae).height,maxHeight:"90vh",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box"}:{aspectRatio:"9/16",maxHeight:"55vh",width:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box"},[Ae]);return s.jsx("div",{className:"mx-0 my-0 select-none",children:s.jsxs("div",{ref:M,role:"button",tabIndex:0,"aria-label":"Open media. Double tap or press to like",onKeyDown:we=>{we.key==="Enter"||we.key===" "?(we.preventDefault(),o()):se&&(we.key==="ArrowLeft"||we.key==="ArrowRight")&&(we.preventDefault(),we.key==="ArrowLeft"?Ye():st())},onClick:Nt,onTouchEnd:we=>{(we.touches.length===0||we.changedTouches.length===1)&&Jt(we)},className:"relative aspect-[9/16] max-h-[55vh] rounded-2xl overflow-hidden bg-gray-900 mx-auto shadow-lg",style:Bt,children:[(()=>{const we=K.effects||[];if(K.type==="text"){let Je="",Ze;if(K.text)Je=K.text,Ze=K.textStyle;else if(K.url&&K.url.startsWith("data:text/plain;base64,"))try{const ot=K.url.split(",")[1];Je=atob(ot),Ze=K.textStyle||{color:"#ffffff",size:"medium",background:"#000000"}}catch(ot){console.error("Error decoding text from data URL:",ot),Je="Text content"}return s.jsx("div",{className:"w-full h-full flex items-center justify-center p-4 bg-black",children:s.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-white border border-gray-200 shadow-2xl",style:{maxWidth:"100%",boxSizing:"border-box"},children:[s.jsx("div",{className:"flex items-start justify-between px-4 pt-4 pb-3 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx(It,{src:x?zn(x):void 0,name:x?x.split("@")[0]:"User",size:"sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-1.5 text-gray-900 text-sm",children:[s.jsx("span",{children:x||"User"}),x&&s.jsx($s,{value:zs(x)||"",size:14})]}),s.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-2 mt-0.5",children:[v&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),v]}),b&&s.jsx("span",{className:"text-gray-400",children:""})]}),b&&s.jsx("span",{children:Ta(typeof b=="string"?parseInt(b):b)})]})]})]})}),s.jsx("div",{className:"p-4 w-full overflow-hidden",style:{maxWidth:"100%",boxSizing:"border-box"},children:s.jsx("div",{className:"p-4 rounded-lg bg-black overflow-hidden w-full",style:{maxWidth:"100%",boxSizing:"border-box"},children:s.jsx("div",{className:"text-base leading-relaxed whitespace-pre-wrap font-normal text-white break-words w-full",style:{wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"100%",boxSizing:"border-box"},children:Je})})})]})})}let tt=K.type==="video"?s.jsx("video",{ref:Pe,src:K.url,className:"w-full h-full object-cover pointer-events-none",preload:"metadata",playsInline:!0,muted:ie,loop:!0,onLoadedData:me,onError:pe,onLoadStart:()=>console.log("Media: Video load started"),onPlay:Ce,onPause:Ft,onTimeUpdate:()=>{const Je=Pe.current;Je&&Je.duration>0&&fe(Je.currentTime/Je.duration)},children:p&&s.jsx("track",{kind:"captions",srcLang:"en",label:"English",default:!0})}):s.jsx(bV,{src:K.url,alt:"",priority:w,className:"w-full h-full",onLoad:Je=>{Je&&Ve(Je)},onError:De});return we.forEach(Je=>{tt=s.jsx(Tv,{effect:Je,isActive:!0,children:tt},Je.type)}),s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx(vV,{children:tt}),W&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50",children:s.jsx("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"})}),E&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-50",children:s.jsxs("div",{className:"text-center text-white",children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsxs("div",{className:"text-sm",children:["Failed to load ",K.type]})]})}),!W&&!E&&K.type==="video"&&l&&s.jsx("div",{className:"absolute bottom-4 right-4 z-50 pointer-events-auto",style:{touchAction:"auto"},children:s.jsxs("button",{onClick:Je=>{Je.stopPropagation(),Pe.current&&!Pe.current.paused&&Pe.current.pause(),document.querySelectorAll("video").forEach(ot=>{ot.paused||ot.pause()}),l()},onTouchEnd:Je=>{Je.stopPropagation(),Je.preventDefault(),Pe.current&&!Pe.current.paused&&Pe.current.pause(),document.querySelectorAll("video").forEach(ot=>{ot.paused||ot.pause()}),l()},onMouseEnter:()=>U(!0),onMouseLeave:()=>{setTimeout(()=>{U(!1)},2e3)},className:`${J?"px-2":"px-1.5"} py-1 bg-black/70 rounded text-white text-[10px] font-semibold hover:bg-black/90 active:bg-black transition-all duration-300 shadow-lg pointer-events-auto flex items-center gap-1`,"aria-label":"View in Scenes",title:"View in Scenes",children:[s.jsx(ep,{className:"w-3 h-3 flex-shrink-0"}),J?s.jsx("span",{className:"whitespace-nowrap",children:"View in Scenes"}):s.jsx("span",{className:"whitespace-nowrap",children:"Scenes"})]})}),V&&K.type==="video"&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-40 pointer-events-none",children:s.jsx("div",{className:"flex flex-col items-center gap-3",children:s.jsx("button",{onClick:Je=>{Je.stopPropagation(),Je.preventDefault(),X(Ze=>!Ze)},onTouchEnd:Je=>{Je.stopPropagation(),Je.preventDefault(),X(Ze=>!Ze)},className:"p-1.5 rounded-full bg-black/50 hover:bg-black/70 active:bg-black/80 text-white transition-colors pointer-events-auto z-50","aria-label":ie?"Unmute video":"Mute video",title:ie?"Unmute video":"Mute video",children:ie?s.jsx(rp,{size:16}):s.jsx(qd,{size:16})})})}),!W&&!E&&K.type==="video"&&g&&y&&s.jsx("div",{className:"absolute bottom-16 left-0 right-0 px-4 z-30 pointer-events-none",children:s.jsx("div",{className:"bg-black/80 backdrop-blur-sm rounded-lg px-4 py-3 max-w-[90%] mx-auto",children:s.jsx("p",{className:"text-white text-base font-medium text-center break-words leading-relaxed",children:y})})}),!W&&!E&&K.type==="video"&&p&&S&&s.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4 z-30 pointer-events-none",children:s.jsx("div",{className:"bg-black/80 backdrop-blur-sm rounded-lg px-4 py-3 max-w-[90%] mx-auto",children:s.jsx("p",{className:"text-white text-base font-medium text-center break-words leading-relaxed",children:S})})})]})})(),se&&s.jsxs(s.Fragment,{children:[j>0&&s.jsx("button",{type:"button",onClick:we=>{we.preventDefault(),we.stopPropagation(),Ye()},onMouseDown:we=>{we.preventDefault(),we.stopPropagation()},onTouchStart:we=>{we.stopPropagation()},onTouchEnd:we=>{we.preventDefault(),we.stopPropagation(),Ye()},className:"absolute top-1/2 left-4 w-10 h-10 rounded-full flex items-center justify-center transition-all z-50 pointer-events-auto bg-black/50 hover:bg-black/70 backdrop-blur-sm cursor-pointer","aria-label":"Previous image",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5))",transform:"translateY(-50%)",pointerEvents:"auto",touchAction:"manipulation"},children:s.jsx("svg",{className:"w-5 h-5 text-white pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),j<Y.length-1&&s.jsx("button",{type:"button",onClick:we=>{we.preventDefault(),we.stopPropagation(),st()},onMouseDown:we=>{we.preventDefault(),we.stopPropagation()},onTouchStart:we=>{we.stopPropagation()},onTouchEnd:we=>{we.preventDefault(),we.stopPropagation(),st()},className:"absolute top-1/2 right-4 w-10 h-10 rounded-full flex items-center justify-center transition-all z-50 pointer-events-auto bg-black/50 hover:bg-black/70 backdrop-blur-sm cursor-pointer","aria-label":"Next image",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5))",transform:"translateY(-50%)",pointerEvents:"auto",touchAction:"manipulation"},children:s.jsx("svg",{className:"w-5 h-5 text-white pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]}),a&&a.length>0&&G.width>0&&s.jsx(s.Fragment,{children:a.map(we=>s.jsx(Oa,{overlay:we,onUpdate:()=>{},onRemove:()=>{},isSelected:!1,onSelect:()=>{},containerWidth:G.width,containerHeight:G.height},we.id))}),(()=>{const we=u&&Array.isArray(u)&&u.length>0,tt=!!f,Je=we&&tt;return we&&!tt&&console.warn("Media: taggedUsers exists but onShowTaggedUsers is missing",{taggedUsers:u,onShowTaggedUsers:f}),Je&&console.log("Media: Showing tag icon",{taggedUsers:u,count:u.length}),Je})()?s.jsx("div",{className:"absolute bottom-4 left-4 z-40",children:s.jsx("button",{onClick:we=>{we.stopPropagation(),we.preventDefault(),$.current&&(clearTimeout($.current),$.current=null),f==null||f()},onTouchEnd:we=>{we.stopPropagation(),we.preventDefault(),$.current&&(clearTimeout($.current),$.current=null),f==null||f()},className:"w-8 h-8 rounded-full bg-black bg-opacity-70 flex items-center justify-center hover:bg-opacity-90 transition-all shadow-lg","aria-label":"View tagged users",title:`View ${(u==null?void 0:u.length)||0} tagged ${((u==null?void 0:u.length)||0)===1?"person":"people"}`,children:s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",className:"text-white",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z",fill:"currentColor"})})})}):null,r&&(K==null?void 0:K.type)==="image"&&s.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-10",children:s.jsx("div",{className:"px-3 py-2 text-lg font-bold drop-shadow-lg",style:{background:"linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3)",backgroundSize:"300% 300%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"gradientShift 3s ease-in-out infinite"},children:r})}),Re&&s.jsx("div",{className:"absolute pointer-events-none z-50 transition-opacity duration-300",style:{left:`${Re.x}px`,top:`${Re.y}px`,transform:"translate(-50%, -50%)",animation:"heartPopUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:s.jsxs("svg",{className:"w-20 h-20 drop-shadow-2xl",viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"heartGradientTap",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb"}),s.jsx("stop",{offset:"50%",stopColor:"#8f5bff"}),s.jsx("stop",{offset:"100%",stopColor:"#ff4ecb"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#heartGradientTap)"})]})})]})})}function _V({startX:e,startY:t,targetElement:n,onComplete:r}){const[a,i]=m.useState(0),[o,l]=m.useState(null),c=m.useRef(null),d=m.useRef(null),u=m.useRef(null);if(m.useEffect(()=>{if(n)try{const x=n.getBoundingClientRect(),v=x.left+x.width/2,b=x.top+x.height/2;l({x:v,y:b}),u.current=Date.now();const w=()=>{if(!u.current)return;const N=Date.now()-u.current,C=Math.min(N/800,1),_=C*C;i(_),C<1?d.current=requestAnimationFrame(w):r()};return d.current=requestAnimationFrame(w),()=>{d.current&&cancelAnimationFrame(d.current)}}catch(x){console.error("Error calculating heart animation target:",x),r()}},[n,r]),!o)return null;const f=o.x-e,h=o.y-t,g=e+f*a,y=t+h*a,p=1-a*.7,S=1-a;return s.jsx("div",{ref:c,className:"fixed pointer-events-none z-[9999]",style:{left:`${g}px`,top:`${y}px`,transform:`translate(-50%, -50%) scale(${p})`,opacity:S,transition:"none"},children:s.jsxs("svg",{className:"w-20 h-20 drop-shadow-lg",viewBox:"0 0 24 24",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"heartGradientDrop",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ff4ecb"}),s.jsx("stop",{offset:"50%",stopColor:"#8f5bff"}),s.jsx("stop",{offset:"100%",stopColor:"#ff4ecb"})]})}),s.jsx("path",{d:"M12 21s-7.5-4.35-9.4-8.86C1.4 8.92 3.49 6 6.6 6c1.72 0 3.23.93 4.08 2.33C11.17 6.93 12.68 6 14.4 6c3.11 0 5.2 2.92 4.99 6.14C19.5 16.65 12 21 12 21z",fill:"url(#heartGradientDrop)"})]})})}function RV({post:e,onLike:t,onShare:n,onOpenComments:r,onReclip:a,onSave:i,currentUserHandle:o,currentUserId:l,showMetricsIcon:c,onToggleMetrics:d,isMetricsOpen:u,likeButtonRef:f,onNotificationsPress:h,unreadCount:g,hasInbox:y}){const[p,S]=m.useState(!1);m.useEffect(()=>{async function U(){if(l&&i)try{const ue=await iu(l,e.id);S(ue.length>0)}catch(ue){console.error("Error checking if post is saved:",ue)}}U()},[l,e.id,i]),m.useEffect(()=>{if(!i)return;const U=()=>{l&&iu(l,e.id).then(ue=>S(ue.length>0)).catch(console.error)};return window.addEventListener(`postSaved-${e.id}`,U),()=>{window.removeEventListener(`postSaved-${e.id}`,U)}},[e.id,l,i]);const[x,v]=m.useState(e.userLiked),[b,w]=m.useState(e.stats.likes),[N,R]=m.useState(e.stats.views),[C,_]=m.useState(e.stats.comments),[W,T]=m.useState(e.stats.shares),[E,B]=m.useState(e.stats.reclips),[H,q]=m.useState(e.userReclipped||!1),[ie,X]=m.useState(!1);m.useEffect(()=>{v(e.userLiked),w(e.stats.likes),R(e.stats.views),_(e.stats.comments),T(e.stats.shares),B(e.stats.reclips),q(e.userReclipped||!1)},[e.userLiked,e.stats.likes,e.stats.views,e.stats.comments,e.stats.shares,e.stats.reclips,e.userReclipped]),m.useEffect(()=>{const U=()=>{_(Se=>Se+1)},ue=()=>{T(Se=>Se+1)},fe=()=>{B(Se=>Se+1)},Ae=()=>{R(Se=>Se+1)},_e=Se=>{v(Se.detail.liked),w(Se.detail.likes)};window.addEventListener(`commentAdded-${e.id}`,U),window.addEventListener(`shareAdded-${e.id}`,ue),window.addEventListener(`reclipAdded-${e.id}`,fe),window.addEventListener(`viewAdded-${e.id}`,Ae),window.addEventListener(`likeToggled-${e.id}`,_e);const Re=Se=>{const{text:de,location:F}=Se.detail;window.dispatchEvent(new CustomEvent(`updatePostInFeed-${e.id}`,{detail:{text:de,location:F}}))};return window.addEventListener(`postUpdated-${e.id}`,Re),()=>{window.removeEventListener(`commentAdded-${e.id}`,U),window.removeEventListener(`shareAdded-${e.id}`,ue),window.removeEventListener(`reclipAdded-${e.id}`,fe),window.removeEventListener(`viewAdded-${e.id}`,Ae),window.removeEventListener(`likeToggled-${e.id}`,_e),window.removeEventListener(`postUpdated-${e.id}`,Re)}},[e.id]);async function V(){if(!ie){X(!0);try{await t()}finally{X(!1)}}}async function z(){if(!ie){X(!0);try{await a()}finally{X(!1)}}}async function J(){if(!ie){X(!0);try{await n()}finally{X(!1)}}}return s.jsx("div",{className:"px-4 pb-4 pt-3 border-t",style:{borderColor:"#030712"},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("button",{ref:f,className:"flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50",onClick:V,"aria-pressed":x,"aria-label":x?"Unlike":"Like",title:x?"Unlike":"Like",children:[x?s.jsx($h,{className:"w-5 h-5 text-purple-500"}):s.jsx(Ba,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:b})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ep,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:N})]}),s.jsxs("button",{className:"flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50",onClick:r,"aria-label":"Comments",title:"Comments",children:[s.jsx(tp,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:C})]}),s.jsxs("button",{className:"flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50",onClick:J,"aria-label":"Share post",title:"Share post",children:[s.jsx(Nu,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:W})]}),s.jsxs("button",{className:`flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50 ${e.userHandle===o?"opacity-30 cursor-not-allowed":""}`,onClick:z,disabled:e.userHandle===o,"aria-label":e.userHandle===o?"Cannot reclip your own post":"Reclip post",title:e.userHandle===o?"Cannot reclip your own post":"Reclip post",children:[s.jsx(Ei,{className:`w-5 h-5 ${H?"text-green-500":"text-gray-600 dark:text-gray-400"}`}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:E})]}),c&&d&&s.jsx("button",{className:"flex items-center gap-2 transition-opacity hover:opacity-70 active:opacity-50",onClick:d,"aria-label":"Toggle metrics",title:"View metrics",children:s.jsx(QO,{className:`w-5 h-5 transition-colors ${u?"text-brand-600 dark:text-brand-400":"text-gray-600 dark:text-gray-400"}`})})]}),s.jsx("div",{className:"flex items-center gap-3",children:h&&s.jsxs("button",{className:"relative transition-opacity hover:opacity-70 active:opacity-50",onClick:h,"aria-label":"Notifications",title:y?"New notifications":"Notifications",children:[s.jsx(pE,{className:`w-5 h-5 ${y?"text-blue-500":"text-gray-600 dark:text-gray-400"}`}),y&&g&&g>0&&s.jsx("span",{className:"absolute -top-1 -right-1 min-w-[16px] h-4 px-1 bg-blue-500 text-white text-[10px] leading-4 rounded-full text-center",children:g>9?"9+":g})]})})]})})}function LV({post:e,isOpen:t}){const[n,r]=m.useState(!1),[a,i]=m.useState(0),[o,l]=m.useState("");m.useEffect(()=>{async function d(){const f=await _v(e.id);if(f&&f.isActive){r(!0);const h=await SW(e.id);switch(i(h),f.feedType){case"local":l("Local Newsfeed");break;case"regional":l("Regional Newsfeed");break;case"national":l("National Newsfeed");break}}else r(!1)}d();const u=setInterval(d,6e4);return()=>clearInterval(u)},[e.id]);const c=d=>{if(d<=0)return"";const u=Math.floor(d/(1e3*60*60)),f=Math.floor(d%(1e3*60*60)/(1e3*60));return u>0?`${u}h ${f}m`:`${f}m`};return n?s.jsxs("div",{className:`mx-4 mb-4 p-4 bg-white dark:bg-gray-900 rounded-xl border-2 border-brand-200 dark:border-brand-800 transition-all duration-300 overflow-hidden shadow-sm ${t?"max-h-[500px] opacity-100":"max-h-0 opacity-0 p-0 mb-0"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vE,{className:"w-5 h-5 text-brand-600 dark:text-brand-400"}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Boost Metrics"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"px-2 py-1 bg-brand-100 dark:bg-brand-900 rounded-full text-brand-700 dark:text-brand-300 font-medium",children:o}),s.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:[c(a)," left"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[s.jsx(ep,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Views"})]}),s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.views.toLocaleString()})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[s.jsx(Ba,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Likes"})]}),s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.likes.toLocaleString()})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[s.jsx(tp,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Comments"})]}),s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.comments.toLocaleString()})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[s.jsx(Nu,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Shares"})]}),s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.shares.toLocaleString()})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-1",children:[s.jsx(Ei,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Reclips"})]}),s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.stats.reclips.toLocaleString()})]})]})]}):null}const Dv=m.memo(function({post:t,onLike:n,onFollow:r,onShare:a,onOpenComments:i,onView:o,onReclip:l,onOpenScenes:c,showBoostIcon:d,onBoost:u,onNotificationsPress:f,unreadCount:h,hasInbox:g,priority:y=!1}){var Re,Se;const{user:p}=tn();Xt();const S=`post-title-${t.id}`,[x,v]=m.useState(!1),[b,w]=m.useState(!1),[N,R]=m.useState(!1),[C,_]=m.useState(!1),[W,T]=m.useState(!1),[E,B]=m.useState(!1),[H,q]=m.useState(!1),[ie,X]=m.useState(0),[V,z]=m.useState(!1),[J,U]=m.useState(null),ue=m.useRef(null),fe=m.useRef(null);m.useEffect(()=>{t.taggedUsers&&t.taggedUsers.length>0?console.log("FeedCard - post has taggedUsers:",t.taggedUsers,"post.id:",t.id.substring(0,30),"templateId:",t.templateId):t.templateId&&console.log("FeedCard - template post but NO taggedUsers:",{postId:t.id.substring(0,30),templateId:t.templateId,taggedUsers:t.taggedUsers})},[t.taggedUsers,t.id,t.templateId]),m.useEffect(()=>{async function de(){const F=await _v(t.id);R(F!==null&&F.isActive)}if(d){de();const F=setInterval(de,6e4);return()=>clearInterval(F)}},[t.id,d]),m.useEffect(()=>{async function de(){if(p!=null&&p.id)try{const F=await iu(p.id,t.id);q(F.length>0)}catch(F){console.error("Error checking if post is saved:",F)}}de()},[p==null?void 0:p.id,t.id]),m.useEffect(()=>{if(!(p!=null&&p.id))return;const de=()=>{iu(p.id,t.id).then(F=>q(F.length>0)).catch(console.error)};return window.addEventListener(`postSaved-${t.id}`,de),()=>{window.removeEventListener(`postSaved-${t.id}`,de)}},[t.id,p==null?void 0:p.id]),m.useEffect(()=>{if(x)return;const de=new IntersectionObserver(F=>{F.forEach($=>{$.isIntersecting&&!x&&(v(!0),de.disconnect(),o())})},{threshold:.5});return fe.current&&de.observe(fe.current),()=>de.disconnect()},[x]);const Ae=!!(t.mediaUrl||t.mediaItems&&t.mediaItems.length>0),_e=t.text&&!t.mediaUrl&&(!t.mediaItems||t.mediaItems.length===0);return s.jsxs("article",{ref:fe,"aria-labelledby":S,className:"mx-0 mb-6 overflow-hidden border-0 border-b border-gray-200 dark:border-gray-700 animate-[cardBounce_0.6s_ease-out]",style:{backgroundColor:"#030712"},children:[_e&&s.jsx(wS,{post:t,onFollow:r,isOverlaid:!1,onMenuClick:()=>T(!0)}),s.jsx(CV,{tags:t.tags}),s.jsxs("div",{className:"relative w-full overflow-hidden",style:{maxWidth:"100%",boxSizing:"border-box"},children:[Ae&&s.jsx("div",{className:"absolute top-0 left-0 right-0 z-20 pointer-events-none",children:s.jsx("div",{className:"pointer-events-auto",onClick:de=>de.stopPropagation(),onMouseDown:de=>de.stopPropagation(),children:s.jsx(wS,{post:t,onFollow:r,isOverlaid:!0,onMenuClick:()=>T(!0)})})}),_e?s.jsx(TV,{text:t.text||"",onDoubleLike:n,textStyle:t.textStyle,stickers:t.stickers,userHandle:t.userHandle,locationLabel:t.locationLabel,createdAt:(Re=t.createdAt)==null?void 0:Re.toString()}):s.jsx(Y4,{url:t.mediaUrl,mediaType:t.mediaType,text:t.text,imageText:t.imageText,stickers:t.stickers,mediaItems:t.mediaItems,onDoubleLike:n,onOpenScenes:c,onCarouselIndexChange:X,onHeartAnimation:(de,F)=>{setTimeout(()=>{U({startX:de,startY:F})},50)},taggedUsers:t.taggedUsers,onShowTaggedUsers:()=>z(!0),templateId:t.templateId,videoCaptionsEnabled:t.videoCaptionsEnabled,videoCaptionText:t.videoCaptionText,subtitlesEnabled:t.subtitlesEnabled,subtitleText:t.subtitleText,postUserHandle:t.userHandle,postLocationLabel:t.locationLabel,postCreatedAt:(Se=t.createdAt)==null?void 0:Se.toString(),priority:y}),t.mediaItems&&t.mediaItems.length>1?s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 pointer-events-none",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/60 to-transparent pointer-events-none z-0"}),s.jsx("div",{className:"relative z-10 px-4 py-3 pointer-events-auto",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex gap-1.5",children:t.mediaItems.map((de,F)=>s.jsx("div",{className:`h-2 rounded-full transition-all ${F===ie?"w-6 bg-white":"w-2 bg-white/50"}`},F))}),s.jsxs("span",{className:"text-sm font-medium text-white drop-shadow-md",children:[ie+1," / ",t.mediaItems.length]})]})})})]}):null]}),(t.mediaUrl||t.mediaItems&&t.mediaItems.length>0)&&s.jsxs("div",{className:"px-4 py-3",children:[(t.caption||t.text)&&s.jsx(EV,{caption:t.caption||t.text||""}),t.createdAt&&s.jsx("div",{className:"mt-1 text-[10px] text-gray-500",children:Ta(t.createdAt)})]}),s.jsx(RV,{post:t,onLike:n,onShare:a,onOpenComments:i,onReclip:l,currentUserHandle:p==null?void 0:p.handle,currentUserId:p==null?void 0:p.id,showMetricsIcon:d&&N,onToggleMetrics:()=>w(!b),isMetricsOpen:b,likeButtonRef:ue,onNotificationsPress:f,unreadCount:h,hasInbox:g}),J&&ue.current&&s.jsx(_V,{startX:J.startX,startY:J.startY,targetElement:ue.current,onComplete:()=>U(null)},`heart-${t.id}-${J.startX}-${J.startY}`),t.bannerText&&s.jsx("div",{className:"h-7 bg-black dark:bg-black overflow-hidden border-t border-gray-700 dark:border-gray-700",children:s.jsx("div",{className:"news-ticker-container h-full flex items-center",children:s.jsxs("div",{className:"news-ticker-text text-white dark:text-white font-semibold text-xs whitespace-nowrap",children:[t.bannerText,"  ",t.bannerText,"  ",t.bannerText,"  ",t.bannerText]})})}),d&&s.jsx(LV,{post:t,isOpen:b}),p&&s.jsxs(s.Fragment,{children:[s.jsx(xV,{post:t,userId:p.id,isOpen:W,onClose:()=>T(!1),onCopyLink:()=>{},onShare:a,onReport:()=>{console.log("Report post:",t.id)},onUnfollow:r?async()=>{await r()}:void 0,onMute:async()=>{console.log("Mute user:",t.userHandle)},onBlock:async()=>{console.log("Block user:",t.userHandle)},onHide:()=>{console.log("Hide post:",t.id)},onNotInterested:()=>{console.log("Not interested in post:",t.id)},onDelete:async()=>{console.log("Delete post:",t.id)},onEdit:()=>{T(!1),B(!0)},onArchive:async()=>{console.log("Archive post:",t.id)},onBoost:u,onReclip:l,onTurnOnNotifications:()=>{console.log("Turn on notifications for post:",t.id)},onTurnOffNotifications:()=>{console.log("Turn off notifications for post:",t.id)},isCurrentUser:p.handle===t.userHandle,isFollowing:t.isFollowing===!0,isSaved:H,isMuted:!1,isBlocked:!1,hasNotifications:!1}),s.jsx(L4,{post:t,userId:p.id,isOpen:C,onClose:()=>_(!1)}),s.jsx(yV,{post:t,isOpen:E,onClose:()=>B(!1),onSave:async(de,F)=>{var $,Z,Pe;try{await PE(t.id,{text:de,location:F})}catch(ve){if((ve==null?void 0:ve.message)==="CONNECTION_REFUSED"||(ve==null?void 0:ve.name)==="ConnectionRefused"||(($=ve==null?void 0:ve.message)==null?void 0:$.includes("Failed to fetch"))||((Z=ve==null?void 0:ve.message)==null?void 0:Z.includes("ERR_CONNECTION_REFUSED"))||((Pe=ve==null?void 0:ve.message)==null?void 0:Pe.includes("NetworkError"))){console.warn("Backend not available, updating post locally"),window.dispatchEvent(new CustomEvent(`updatePostInFeed-${t.id}`,{detail:{text:de,location:F}}));return}throw ve}window.dispatchEvent(new CustomEvent(`postUpdated-${t.id}`,{detail:{text:de,location:F}}))}})]}),t.taggedUsers&&t.taggedUsers.length>0&&s.jsx(gW,{isOpen:V,onClose:()=>z(!1),taggedUserHandles:t.taggedUsers})]})}),IV=m.memo(function({ad:t,onImpression:n,onClick:r}){const a=`ad-title-${t.id}`,[i,o]=m.useState(!1),l=m.useRef(null);m.useEffect(()=>{if(i)return;const d=new IntersectionObserver(u=>{u.forEach(f=>{f.isIntersecting&&!i&&(o(!0),d.disconnect(),n())})},{threshold:.5});return l.current&&d.observe(l.current),()=>d.disconnect()},[i,n]);const c=async()=>{await r(),t.linkUrl&&window.open(t.linkUrl,"_blank","noopener,noreferrer")};return s.jsxs("article",{ref:l,"aria-labelledby":a,className:"mx-4 mb-6 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 animate-[cardBounce_0.6s_ease-out]",style:{backgroundColor:"#030712"},children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Sponsored"}),s.jsx("span",{className:"text-xs text-gray-400",children:""}),s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:t.advertiserHandle})]}),t.createdAt&&s.jsx("span",{className:"text-xs text-gray-400",children:Ta(t.createdAt)})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Y4,{url:t.mediaUrl,mediaType:t.mediaType,onDoubleLike:async()=>{},onOpenScenes:()=>{}}),s.jsx("button",{onClick:c,className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-brand-600 hover:bg-brand-700 text-white px-6 py-2 rounded-full font-semibold shadow-lg transition-colors",children:t.callToAction||"Learn More"})]}),t.description&&s.jsxs("div",{className:"px-4 py-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:t.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:t.description})]})]})});function q4(){const{user:e}=tn(),t=(e==null?void 0:e.id)??"anon",n=_u(),r=qn(),a=Xt(),i=m.useRef(0),o=(e==null?void 0:e.national)||"Ireland",[l,c]=m.useState(o);m.useEffect(()=>{e!=null&&e.national&&["Finglas","Dublin","Ireland"].includes(l)&&c(e.national)},[e==null?void 0:e.national,e==null?void 0:e.regional,e==null?void 0:e.local]),m.useEffect(()=>{const P=Y=>{const{national:j,regional:O,local:se}=Y.detail;["Finglas","Dublin","Ireland"].includes(l)&&c(j||"Ireland")};return window.addEventListener("locationUpdated",P),()=>window.removeEventListener("locationUpdated",P)},[l]);const[d,u]=m.useState(null),[f,h]=m.useState([]),[g,y]=m.useState([]),[p,S]=m.useState(0),[x,v]=m.useState(!1),[b,w]=m.useState(!1),[N,R]=m.useState(null),[C,_]=m.useState(!1),[W,T]=m.useState(null),[E,B]=m.useState(!1),[H,q]=m.useState(null),[ie,X]=m.useState(!1),[V,z]=m.useState(null),[J,U]=m.useState(!1),[ue,fe]=m.useState(null),[Ae,_e]=m.useState(0),[Re,Se]=m.useState(!1),[de,F]=m.useState(!1);m.useEffect(()=>{const P=()=>{F(!0),u(null)};return window.addEventListener("setFollowingTab",P),()=>window.removeEventListener("setFollowingTab",P)},[]),m.useEffect(()=>{F(l==="Following")},[l]),m.useEffect(()=>{const P=()=>{F(!1),c((e==null?void 0:e.national)||"Ireland"),u(null)};return window.addEventListener("resetFeed",P),()=>window.removeEventListener("resetFeed",P)},[e==null?void 0:e.national]),m.useEffect(()=>{if(!(e!=null&&e.handle))return;const P=async()=>{try{const O=await sp(e.handle);_e(O),Se(O>0)}catch(O){console.error("Error fetching unread count:",O)}};P();const Y=setInterval(P,1e4),j=O=>{var me,pe;const se=(me=O.detail)==null?void 0:me.handle,K=((pe=O.detail)==null?void 0:pe.unread)??0;se===e.handle&&(Se(K>0),_e(K))};return window.addEventListener("inboxUnreadChanged",j),()=>{clearInterval(Y),window.removeEventListener("inboxUnreadChanged",j)}},[e==null?void 0:e.handle]);const $=de?"discover":d||l;m.useEffect(()=>{const Y=new URLSearchParams(r.search).get("location");console.log("URL params changed, location param:",Y,"current customLocation:",d),Y?(console.log("URL provided location:",Y,"setting customLocation..."),console.log("About to call setCustomLocation, will update from:",d,"to:",Y),u(Y),console.log("setCustomLocation called, customLocation should now be:",Y),h([]),S(0),w(!1),R(null)):d&&(console.log("URL param cleared, clearing customLocation..."),u(null),h([]),S(0),w(!1),R(null))},[r.search,d]),m.useEffect(()=>{h([]),S(0),w(!1),console.log("Location changed to:",$,"customLocation:",d,"active:",l,"computed currentFilter:",$),i.current++,$.toLowerCase()},[t,$]),m.useEffect(()=>{const P=j=>{const O=j.detail.location;console.log("Feed received location change:",O),u(O),h([]),S(0),w(!1),R(null),window.location.pathname!=="/feed"&&(console.log("Navigating to feed page..."),window.dispatchEvent(new PopStateEvent("popstate")))};window.addEventListener("locationChange",P);const Y=sessionStorage.getItem("pendingLocation");return console.log("Checking for pending location, found:",Y),Y&&(console.log("Feed found pending location:",Y,"setting customLocation..."),sessionStorage.removeItem("pendingLocation"),setTimeout(()=>{console.log("Actually setting customLocation to:",Y),u(Y),h([]),S(0),w(!1),R(null)},100)),()=>window.removeEventListener("locationChange",P)},[]),m.useEffect(()=>{n&&v9(async P=>{P.type==="like"&&await Ri(P.userId,P.postId),P.type==="follow"&&await aa(P.userId,P.postId),P.type==="comment"&&await ip(P.postId,P.userId,P.text),P.type==="view"&&await Zd(P.userId,P.postId),P.type==="share"&&await OE(P.userId,P.postId),P.type==="reclip"&&await Rl(P.userId,P.postId,P.userHandle)})},[n]);const Z=P=>{T(P),_(!0)},Pe=()=>{_(!1),T(null)};async function ve(){if(!(x||b||p===null)){v(!0),R(null);try{i.current++;const P=$,Y=await fd(P,p,5,t,(e==null?void 0:e.local)||"",(e==null?void 0:e.regional)||"",(e==null?void 0:e.national)||"");if(P!==$){console.warn("Dropping stale page for filter",P,"current filter is now:",$);return}h(j=>{const O=p===0?[Y.items]:[...j,Y.items];return console.log("Setting pages:",{prevLength:j.length,newLength:O.length,cursor:p,isFirstPage:p===0,filterForRequest:P,currentFilter:$,pageItemsCount:Y.items.length}),O}),S(Y.nextCursor),w(Y.nextCursor===null)}catch(P){console.error("loadMore error:",P),R((P==null?void 0:P.message)??"Failed to load posts.")}finally{v(!1)}}}const re=m.useRef(null);m.useEffect(()=>{console.log("Setting up postCreated event listener");const P=()=>{console.log("PostCreated event received - refreshing feed"),console.log("Current filter:",$),console.log("User data:",{userId:t,userLocal:e==null?void 0:e.local,userRegional:e==null?void 0:e.regional,userNational:e==null?void 0:e.national}),h([]),S(0),w(!1),v(!1),R(null),re.current=null,console.log("About to call loadMore from handlePostCreated"),ve()};return window.addEventListener("postCreated",P),console.log("postCreated event listener added"),()=>{console.log("Removing postCreated event listener"),window.removeEventListener("postCreated",P)}},[$,t,e]),m.useEffect(()=>{if(f.length===0||x||window.location.pathname!=="/feed")return;const P=f.flat();if(P.length>0){const j=P[0].id;(re.current===null||j!==re.current)&&(re.current=j)}const Y=setInterval(async()=>{if(!(x||b||window.location.pathname!=="/feed"))try{const j=await fd($,0,5,t,(e==null?void 0:e.local)||"",(e==null?void 0:e.regional)||"",(e==null?void 0:e.national)||"");if(j.items.length>0){const O=j.items[0].id;if(re.current===null||O!==re.current){console.log("New posts detected! Refreshing feed...",{newestPostId:O,currentLatest:re.current}),re.current=O,h([]),S(0),w(!1),v(!1),R(null);const K=await fd($,0,5,t,(e==null?void 0:e.local)||"",(e==null?void 0:e.regional)||"",(e==null?void 0:e.national)||"");h([K.items]),S(K.nextCursor),w(K.nextCursor===null),window.scrollTo({top:0,behavior:"smooth"})}}}catch(j){console.error("Error polling for new posts:",j)}},1e4);return()=>clearInterval(Y)},[f.length,x,b,$,t,e==null?void 0:e.local,e==null?void 0:e.regional,e==null?void 0:e.national]),m.useEffect(()=>{console.log("Initial load effect triggered:",{cursor:p,pagesLength:f.length,currentFilter:$});const Y=new URLSearchParams(r.search).get("location");if(Y&&!d){console.log("Deferring initial load until customLocation is applied for URL location:",Y);return}p!==null&&f.length===0&&(console.log("Calling loadMore from initial load effect"),ve())},[p,$,r.search,d]),m.useEffect(()=>{const P=[];return(()=>{P.forEach(({postId:j,handler:O})=>{window.removeEventListener(`updatePostInFeed-${j}`,O)}),P.length=0,f.flat().forEach(j=>{const O=se=>{const{text:K,location:me}=se.detail;M(j.id,pe=>({...pe,text:K||pe.text,text_content:K||pe.text_content,locationLabel:me||pe.locationLabel}))};window.addEventListener(`updatePostInFeed-${j.id}`,O),P.push({postId:j.id,handler:O})})})(),()=>{P.forEach(({postId:j,handler:O})=>{window.removeEventListener(`updatePostInFeed-${j}`,O)})}},[f]);function M(P,Y){console.log("updateOne called for post:",P),h(j=>{const O=j.map(me=>me.map(pe=>pe.id===P?(console.log("Updating post:",P,"from likes:",pe.stats.likes,"to:",Y({...pe}).stats.likes),Y({...pe})):pe)),se=O.flat(),K=se.filter((me,pe)=>se.findIndex(Ve=>Ve.id===me.id)!==pe);return K.length>0&&console.error("DUPLICATES AFTER UPDATE:",K.map(me=>me.id)),O})}m.useEffect(()=>{async function P(){try{const Y=(e==null?void 0:e.local)||(e==null?void 0:e.regional)||(e==null?void 0:e.national)||"",O=await vW(Y,[]);y(O)}catch(Y){console.error("Error loading ads:",Y)}}e&&P()},[$,e]);const G=m.useMemo(()=>{const P=f.flat(),Y=P.filter((se,K)=>P.findIndex(me=>me.id===se.id)===K),j=P.filter((se,K)=>P.findIndex(me=>me.id===se.id)!==K).map(se=>se.id);console.log("Flattening pages:",{pagesCount:f.length,totalPosts:P.length,uniquePosts:Y.length,postIDs:Y.map(se=>se.id),duplicateIDs:j,textPosts:Y.filter(se=>se.text&&!se.mediaUrl).length}),j.length>0&&(console.error("DUPLICATE POSTS DETECTED AND REMOVED:",j),console.log("Text posts after deduplication:",Y.filter(se=>se.text&&!se.mediaUrl).map(se=>{var K;return{id:se.id,text:((K=se.text)==null?void 0:K.substring(0,50))+"..."}})));const O=[...Y.map(se=>({type:"post",item:se,createdAt:se.createdAt||0})),...g.map(se=>({type:"ad",item:se,createdAt:se.createdAt||0}))];return O.sort((se,K)=>K.createdAt-se.createdAt),O},[f,g]);return e?s.jsxs("div",{id:`panel-${l}`,role:"tabpanel","aria-labelledby":`tab-${l}`,className:"pb-2",children:[s.jsx("div",{className:"h-4"}),!n&&s.jsx("div",{className:"mx-3 mt-2 rounded-md bg-amber-50 text-amber-900 dark:bg-amber-950 dark:text-amber-200 border border-amber-200 dark:border-amber-800 px-3 py-2 text-xs",children:"You're offline. Actions will sync when back online."}),d?s.jsx("div",{className:"px-3 py-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ln,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[d," Feed"]})]})}):s.jsx(NV,{active:l,onChange:c,onClearCustom:()=>u(null),userLocal:e==null?void 0:e.local,userRegional:e==null?void 0:e.regional,userNational:e==null?void 0:e.national,clipsCount:(()=>{const P=(e==null?void 0:e.id)??"anon",Y=js(P);return f.flat().filter(j=>Y.follows[j.userHandle]===!0?j.mediaUrl&&Wh(j.mediaUrl):!1).length})()}),s.jsx("div",{className:"h-4"}),N&&s.jsx("div",{className:"mx-4 my-3 p-3 rounded-md border border-red-300 bg-red-50 text-red-800 dark:border-red-800 dark:bg-red-950 dark:text-red-200",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("span",{className:"text-sm",children:N}),s.jsx("button",{onClick:()=>{R(null),ve()},className:"px-3 py-1.5 rounded bg-red-600 text-white text-sm hover:bg-red-500",children:"Retry"})]})}),G.map((P,Y)=>{if(P.type==="ad"){const me=P.item;return s.jsx(IV,{ad:me,onImpression:async()=>{try{await yW(me.id,t)}catch(pe){console.error("Error tracking ad impression:",pe)}},onClick:async()=>{try{await bW(me.id,t)}catch(pe){console.error("Error tracking ad click:",pe)}}},me.id)}const j=P.item,O=!!(j.mediaUrl||j.mediaItems&&j.mediaItems.length>0),se=G.slice(0,Y+1).filter(me=>{if(me.type==="ad")return!1;const pe=me.item;return!!(pe.mediaUrl||pe.mediaItems&&pe.mediaItems.length>0)}).length,K=O&&se<=3;return s.jsx(Dv,{post:j,priority:K,onLike:async()=>{if(console.log("Like button clicked for post:",j.id,"userLiked:",j.userLiked),!n){M(j.id,pe=>({...pe,userLiked:!pe.userLiked})),await Un({type:"like",postId:j.id,userId:t});return}const me=await Ri(t,j.id);M(j.id,pe=>({...me})),window.dispatchEvent(new CustomEvent(`likeToggled-${j.id}`,{detail:{liked:me.userLiked,likes:me.stats.likes}})),console.log("Like event dispatched for post:",j.id,"with",{liked:me.userLiked,likes:me.stats.likes})},onFollow:async()=>{if(!n){M(j.id,pe=>({...pe,isFollowing:!pe.isFollowing})),await Un({type:"follow",postId:j.id,userId:t}),(de||$.toLowerCase()==="discover")&&(h([]),S(0),w(!1),R(null),i.current++);return}const me=await aa(t,j.id);M(j.id,pe=>({...me})),(de||$.toLowerCase()==="discover")&&(h([]),S(0),w(!1),R(null),v(!1),i.current++,setTimeout(()=>{ve()},50))},onShare:async()=>{q(j),B(!0)},onOpenComments:()=>Z(j.id),onView:async()=>{if(!n){await Un({type:"view",postId:j.id,userId:t});return}const me=await Zd(t,j.id);M(j.id,pe=>({...me})),window.dispatchEvent(new CustomEvent(`viewAdded-${j.id}`))},onReclip:async()=>{if(j.userHandle===(e==null?void 0:e.handle)){console.log("Cannot reclip your own post");return}if(j.userReclipped){console.log("Post already reclipped by user, ignoring reclip request");return}if(!n){M(j.id,Ve=>({...Ve,userReclipped:!0,stats:{...Ve.stats,reclips:Ve.stats.reclips+1}})),await Un({type:"reclip",postId:j.id,userId:t,userHandle:(e==null?void 0:e.handle)||"Unknown@Unknown"}),window.dispatchEvent(new CustomEvent(`reclipAdded-${j.id}`));return}const{originalPost:me,reclippedPost:pe}=await Rl(t,j.id,(e==null?void 0:e.handle)||"Unknown@Unknown");if(!pe){console.log("Post already reclipped by user, ignoring reclip request"),M(j.id,Ve=>({...Ve,userReclipped:me.userReclipped,stats:me.stats}));return}M(j.id,Ve=>({...Ve,userReclipped:me.userReclipped,stats:me.stats})),h(Ve=>[[pe],...Ve]),window.dispatchEvent(new CustomEvent(`reclipAdded-${j.id}`))},onOpenScenes:()=>{z(j),X(!0)},showBoostIcon:(e==null?void 0:e.handle)===j.userHandle,onBoost:async()=>{fe(j),U(!0)},onNotificationsPress:()=>a("/inbox"),unreadCount:Ae,hasInbox:Re},j.id)}),x&&s.jsxs("div",{className:"px-4 py-6 animate-pulse",children:[s.jsx("div",{className:"h-4 w-40 bg-gray-200 dark:bg-gray-800 rounded mb-2"}),s.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded mb-4"}),s.jsx("div",{className:"w-full aspect-square bg-gray-200 dark:bg-gray-800 rounded-xl"})]}),b&&G.length===0&&s.jsx("div",{className:"p-8 text-center text-gray-600 dark:text-gray-300",children:de||$.toLowerCase()==="discover"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-lg font-semibold mb-1",children:"Unlock Your Following News Feed"}),s.jsx("div",{className:"text-gray-600 text-sm",children:"This feed only populates with the accounts you follow. Start tapping Follow to personalize your stream"})]}):d?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-lg font-semibold mb-1",children:["No posts from ",d," yet"]}),s.jsxs("div",{className:"text-gray-600 text-sm",children:["Be the first to share something from ",d,"!"]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-lg font-semibold mb-1",children:"No posts yet"}),s.jsx("div",{className:"text-gray-600 text-sm",children:"No posts available for this location"})]})}),b&&G.length>0&&s.jsx("div",{className:"p-4 text-center text-xs text-gray-500 dark:text-gray-400",children:"You're all caught up."}),W&&s.jsx(Yb,{postId:W,isOpen:C,onClose:Pe}),H&&s.jsx(op,{post:H,isOpen:E,onClose:()=>{B(!1),q(null)}}),J&&ue&&s.jsx(_4,{post:ue,isOpen:J,onClose:()=>{U(!1),fe(null)},onSelect:(P,Y)=>{a("/boost-payment",{state:{postId:ue.id,feedType:P,price:Y}}),U(!1),fe(null)}}),V&&(()=>{const P=V;return s.jsx(Mu,{post:P,isOpen:ie,onClose:()=>{X(!1),z(null)},onLike:async()=>{if(console.log("Like button clicked for post:",P.id,"userLiked:",P.userLiked),!n){const j={...P,userLiked:!P.userLiked};M(P.id,O=>({...O,userLiked:!O.userLiked})),(V==null?void 0:V.id)===P.id&&z(j),window.dispatchEvent(new CustomEvent(`likeToggled-${P.id}`,{detail:{liked:j.userLiked,likes:P.stats.likes}})),await Un({type:"like",postId:P.id,userId:t});return}const Y=await Ri(t,P.id);M(P.id,j=>({...Y})),(V==null?void 0:V.id)===P.id&&z(Y),window.dispatchEvent(new CustomEvent(`likeToggled-${P.id}`,{detail:{liked:Y.userLiked,likes:Y.stats.likes}}))},onFollow:async()=>{if(!n){M(P.id,j=>({...j,isFollowing:!j.isFollowing})),await Un({type:"follow",postId:P.id,userId:t});return}const Y=await aa(t,P.id);M(P.id,j=>({...Y})),(de||$.toLowerCase()==="discover")&&(h([]),S(0),w(!1),R(null),i.current++)},onShare:async()=>{q(P),B(!0)},onOpenComments:()=>Z(P.id),onReclip:async()=>{if(P.userHandle===(e==null?void 0:e.handle)){console.log("Cannot reclip your own post");return}if(P.userReclipped){console.log("Post already reclipped by user, ignoring reclip request");return}const Y=P.stats.reclips+1;if(!n){const se={...P,userReclipped:!0,stats:{...P.stats,reclips:Y}};M(P.id,K=>({...K,userReclipped:!0,stats:{...K.stats,reclips:Y}})),(V==null?void 0:V.id)===P.id&&z(se),await Un({type:"reclip",postId:P.id,userId:t,userHandle:(e==null?void 0:e.handle)||"Unknown@Unknown"}),window.dispatchEvent(new CustomEvent(`reclipAdded-${P.id}`,{detail:{reclips:Y}}));return}const{originalPost:j,reclippedPost:O}=await Rl(t,P.id,(e==null?void 0:e.handle)||"Unknown@Unknown");if(!O){console.log("Post already reclipped by user, ignoring reclip request"),M(P.id,se=>({...se,userReclipped:j.userReclipped,stats:j.stats})),(V==null?void 0:V.id)===P.id&&z(j);return}M(P.id,se=>({...se,userReclipped:j.userReclipped,stats:j.stats})),(V==null?void 0:V.id)===P.id&&z(j),h(se=>[[O],...se]),window.dispatchEvent(new CustomEvent(`reclipAdded-${P.id}`,{detail:{reclips:j.stats.reclips}}))}})})()]},`${$}-${d||"default"}`):s.jsxs("div",{className:"p-6",children:[s.jsx("a",{href:"/login",className:"text-brand-600 underline",children:"Sign in"})," to view your feed."]})}function X4(){const{user:e}=tn(),t=(e==null?void 0:e.id)??"anon",n=_u(),r=Xt(),[a,i]=m.useState([]),[o,l]=m.useState(!0),[c,d]=m.useState(null),[u,f]=m.useState(!1),[h,g]=m.useState(null),[y,p]=m.useState(!1),[S,x]=m.useState(null),[v,b]=m.useState(!1),[w,N]=m.useState(null),[R,C]=m.useState(!1),[_,W]=m.useState(null),[T,E]=m.useState(0),[B,H]=m.useState(!1);m.useEffect(()=>{async function z(){if(e!=null&&e.handle){l(!0),d(null);try{const U=(await Vh(e.handle,50)).map(ue=>Mr(t,ue));i(U)}catch(J){console.error("Error loading user posts:",J),d("Failed to load your posts")}finally{l(!1)}}}z()},[e==null?void 0:e.handle,t]);const q=qn();m.useEffect(()=>{const z=()=>{e!=null&&e.handle&&Vh(e.handle,50).then(U=>{const ue=U.map(fe=>Mr(t,fe));i(ue)}).catch(console.error)},J=q.state;J!=null&&J.boostSuccess&&(z(),window.history.replaceState({...J,boostSuccess:!1},"")),J!=null&&J.newPost&&(J!=null&&J.showBoostModal)&&(W(J.newPost),C(!0),window.history.replaceState({...J,showBoostModal:!1},""))},[q.state,e==null?void 0:e.handle,t]);const ie=z=>{g(z),f(!0)},X=()=>{f(!1),g(null)};function V(z,J){i(U=>U.map(ue=>ue.id===z?J({...ue}):ue))}return e?o?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-4 w-40 bg-gray-200 dark:bg-gray-800 rounded"}),s.jsx("div",{className:"h-4 w-24 bg-gray-200 dark:bg-gray-800 rounded"})]})}):c?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"text-red-600 dark:text-red-400",children:c})}):s.jsxs("div",{className:"pb-2",children:[s.jsx("div",{className:"h-4"}),s.jsxs("div",{className:"px-3 py-2",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Your Posts"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Boost your posts to reach more people"})]}),s.jsx("div",{className:"h-4"}),a.length===0?s.jsx("div",{className:"p-6 text-center",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You haven't created any posts yet."})}):a.map(z=>s.jsx(Dv,{post:z,showBoostIcon:!0,onBoost:async()=>{W(z),C(!0)},onLike:async()=>{if(!n){V(z.id,U=>({...U,userLiked:!U.userLiked})),await Un({type:"like",postId:z.id,userId:t});return}const J=await Ri(t,z.id);V(z.id,U=>({...J})),window.dispatchEvent(new CustomEvent(`likeToggled-${z.id}`,{detail:{liked:J.userLiked,likes:J.stats.likes}}))},onShare:async()=>{x(z),p(!0)},onOpenComments:()=>ie(z.id),onView:async()=>{if(!n){await Un({type:"view",postId:z.id,userId:t});return}const J=await Zd(t,z.id);V(z.id,U=>({...J})),window.dispatchEvent(new CustomEvent(`viewAdded-${z.id}`))},onReclip:async()=>{console.log("Cannot reclip your own post")},onOpenScenes:()=>{N(z),b(!0)},onNotificationsPress:()=>r("/inbox"),unreadCount:T,hasInbox:B},z.id)),u&&h&&s.jsx(Yb,{postId:h,isOpen:u,onClose:X}),y&&S&&s.jsx(op,{post:S,isOpen:y,onClose:()=>{p(!1),x(null)}}),v&&w&&s.jsx(Mu,{post:w,isOpen:v,onClose:()=>{b(!1),N(null)},onLike:async()=>{if(!n){V(w.id,J=>({...J,userLiked:!J.userLiked})),await Un({type:"like",postId:w.id,userId:t});return}const z=await Ri(t,w.id);V(w.id,J=>({...z})),window.dispatchEvent(new CustomEvent(`likeToggled-${w.id}`,{detail:{liked:z.userLiked,likes:z.stats.likes}}))},onFollow:async()=>{},onShare:async()=>{x(w),p(!0)},onOpenComments:()=>ie(w.id),onReclip:async()=>{console.log("Cannot reclip your own post")}}),R&&_&&s.jsx(_4,{isOpen:R,post:_,onClose:()=>{C(!1),W(null)},onSelect:(z,J)=>{C(!1),r("/payment",{state:{post:_,feedType:z,price:J}})}})]}):s.jsxs("div",{className:"p-6",children:[s.jsx("a",{href:"/login",className:"text-brand-600 underline",children:"Sign in"})," to view your posts."]})}Av.FeedPage=q4;Av.BoostPage=X4;const PV=m.createContext(null);function MV({children:e}){return m.useEffect(()=>{document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")},[]),s.jsx(PV.Provider,{value:{theme:"dark"},children:e})}const $c=[{id:"1",url:"https://media.giphy.com/media/3o7aCTPPm4OHfRLSH6/giphy.gif",title:"Happy"},{id:"2",url:"https://media.giphy.com/media/l0MYC0LajbaPoEADu/giphy.gif",title:"Excited"},{id:"3",url:"https://media.giphy.com/media/26u4cqiYI30juCOGY/giphy.gif",title:"Laughing"},{id:"4",url:"https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif",title:"Dancing"},{id:"5",url:"https://media.giphy.com/media/l0MYt5jPR6QX5pnby/giphy.gif",title:"Celebrating"},{id:"6",url:"https://media.giphy.com/media/3o7aD2saQ5D3zVLWfu/giphy.gif",title:"Thumbs Up"},{id:"7",url:"https://media.giphy.com/media/l0HlBO7eyXzSZkJri/giphy.gif",title:"Love"},{id:"8",url:"https://media.giphy.com/media/3o7abldj0b3rxrZUxW/giphy.gif",title:"Applause"}];function AV({isOpen:e,onClose:t,onSelectGif:n}){const[r,a]=D.useState(""),[i,o]=D.useState($c),[l,c]=D.useState(!1);D.useEffect(()=>{e&&(o($c),a(""))},[e]);const d=async f=>{if(!f.trim()){o($c);return}c(!0);try{const h=$c.filter(g=>g.title.toLowerCase().includes(f.toLowerCase()));o(h.length>0?h:$c)}catch(h){console.error("Error searching GIFs:",h)}finally{c(!1)}},u=f=>{n(f),t()};return e?s.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center animate-in fade-in duration-200",children:s.jsxs("div",{className:"w-full max-w-md max-h-[80vh] bg-gray-900 rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-800",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Choose a GIF"}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-full transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"px-4 py-3 border-b border-gray-800",children:s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:r,onChange:f=>{a(f.target.value),d(f.target.value)},placeholder:"Search GIFs...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-800 text-white rounded-xl border border-gray-700 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:l?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})}):i.length===0?s.jsx("div",{className:"text-center py-12 text-gray-400",children:s.jsx("p",{children:"No GIFs found"})}):s.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.map(f=>s.jsxs("button",{onClick:()=>u(f.url),className:"aspect-square rounded-xl bg-gray-800 hover:bg-gray-700 transition-colors overflow-hidden relative group cursor-pointer",children:[s.jsx("img",{src:f.url,alt:f.title,className:"w-full h-full object-cover",loading:"lazy"}),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"})]},f.id))})})]})}):null}const Hx=[{id:"emoji-1",name:"Fire",category:"Emoji",emoji:"",isTrending:!0},{id:"emoji-2",name:"Heart Eyes",category:"Emoji",emoji:"",isTrending:!0},{id:"emoji-3",name:"Party",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-4",name:"Star",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-5",name:"Thumbs Up",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-6",name:"Clap",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-7",name:"100",category:"Emoji",emoji:"",isTrending:!0},{id:"emoji-8",name:"Crown",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-9",name:"Rocket",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-10",name:"Diamond",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-11",name:"Sparkles",category:"Emoji",emoji:"",isTrending:!0},{id:"emoji-12",name:"Muscle",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-13",name:"OK Hand",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-14",name:"Pray",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-15",name:"Heart",category:"Emoji",emoji:"",isTrending:!0},{id:"emoji-16",name:"Laughing",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-17",name:"Cool",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-18",name:"Wink",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-19",name:"Kiss",category:"Emoji",emoji:"",isTrending:!1},{id:"emoji-20",name:"Love",category:"Emoji",emoji:"",isTrending:!0},{id:"trend-1",name:"POV",category:"Trending",emoji:"",isTrending:!0,usageCount:15e4},{id:"trend-2",name:"Cap",category:"Trending",emoji:"",isTrending:!0,usageCount:12e4},{id:"trend-3",name:"No Cap",category:"Trending",emoji:"",isTrending:!0,usageCount:98e3},{id:"trend-4",name:"Facts",category:"Trending",emoji:"",isTrending:!0,usageCount:87e3},{id:"trend-5",name:"Period",category:"Trending",emoji:"",isTrending:!0,usageCount:75e3},{id:"react-1",name:"Shocked",category:"Reactions",emoji:"",isTrending:!1},{id:"react-2",name:"Crying",category:"Reactions",emoji:"",isTrending:!1},{id:"react-3",name:"Angry",category:"Reactions",emoji:"",isTrending:!1},{id:"react-4",name:"Surprised",category:"Reactions",emoji:"",isTrending:!1},{id:"react-5",name:"Sleepy",category:"Reactions",emoji:"",isTrending:!1},{id:"react-6",name:"Sick",category:"Reactions",emoji:"",isTrending:!1},{id:"react-7",name:"Dizzy",category:"Reactions",emoji:"",isTrending:!1},{id:"react-8",name:"Sweat",category:"Reactions",emoji:"",isTrending:!1},{id:"deco-1",name:"Arrow Up",category:"Decorative",emoji:"",isTrending:!1},{id:"deco-2",name:"Arrow Down",category:"Decorative",emoji:"",isTrending:!1},{id:"deco-3",name:"Arrow Left",category:"Decorative",emoji:"",isTrending:!1},{id:"deco-4",name:"Arrow Right",category:"Decorative",emoji:"",isTrending:!1},{id:"deco-5",name:"Check Mark",category:"Decorative",emoji:"",isTrending:!1},{id:"deco-6",name:"Cross Mark",category:"Decorative",emoji:"",isTrending:!1},{id:"deco-7",name:"Question",category:"Decorative",emoji:"",isTrending:!1},{id:"deco-8",name:"Exclamation",category:"Decorative",emoji:"",isTrending:!1},{id:"deco-9",name:"Light Bulb",category:"Decorative",emoji:"",isTrending:!1},{id:"deco-10",name:"Key",category:"Decorative",emoji:"",isTrending:!1},{id:"text-1",name:"POV",category:"Text",emoji:"",isTrending:!0},{id:"text-2",name:"SLAY",category:"Text",emoji:"",isTrending:!0},{id:"text-3",name:"PERIODT",category:"Text",emoji:"",isTrending:!0},{id:"text-4",name:"GOALS",category:"Text",emoji:"",isTrending:!1},{id:"text-5",name:"VIBES",category:"Text",emoji:"",isTrending:!1}],DV=["Emoji","Trending","Reactions","Decorative","Text"];function J4(e){return new Promise(t=>setTimeout(t,e))}async function FV(e){await J4(150);let t=[...Hx];return e&&e!=="All"&&(t=Hx.filter(n=>n.category===e)),t.sort((n,r)=>n.isTrending&&!r.isTrending?-1:!n.isTrending&&r.isTrending?1:n.usageCount&&r.usageCount?r.usageCount-n.usageCount:0)}async function BV(e){await J4(100);const t=e.toLowerCase();return Hx.filter(n=>n.name.toLowerCase().includes(t)).sort((n,r)=>n.isTrending&&!r.isTrending?-1:!n.isTrending&&r.isTrending?1:(r.usageCount||0)-(n.usageCount||0))}function gp({isOpen:e,onClose:t,onSelectSticker:n,onAddText:r}){const[a,i]=m.useState([]),[o,l]=m.useState("Emoji"),[c,d]=m.useState(""),[u,f]=m.useState(!1);m.useEffect(()=>{e&&h()},[e,o]),m.useEffect(()=>{c.trim()?g(c):h()},[c]);async function h(){f(!0);try{const p=await FV(o);i(p)}catch(p){console.error("Error loading stickers:",p)}finally{f(!1)}}async function g(p){if(!p.trim()){h();return}f(!0);try{const S=await BV(p);i(S)}catch(S){console.error("Error searching stickers:",S)}finally{f(!1)}}function y(p){n(p),t()}return e?s.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-end animate-in fade-in duration-200",children:s.jsxs("div",{className:"w-full bg-gray-900 rounded-t-3xl animate-in slide-in-from-bottom duration-300 max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"px-4 pt-4 pb-2 border-b border-gray-800",children:[s.jsx("div",{className:"h-1 w-12 bg-gray-700 rounded-full mx-auto mb-4"}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Stickers"}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6 text-gray-400"})})]}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:c,onChange:p=>d(p.target.value),placeholder:"Search stickers...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-800 text-white rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent placeholder-gray-500"})]}),!c&&s.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-2",children:DV.map(p=>s.jsx("button",{onClick:()=>l(p),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${o===p?"bg-purple-500 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:p},p))}),r&&s.jsxs("button",{onClick:()=>{r(),t()},className:"w-full mt-2 mb-2 px-4 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-colors flex items-center justify-center gap-2",children:[s.jsx(gc,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Text"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:u?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})}):a.length===0?s.jsx("div",{className:"text-center py-12 text-gray-400",children:s.jsx("p",{children:"No stickers found"})}):s.jsx("div",{className:"grid grid-cols-6 gap-3",children:a.map(p=>s.jsxs("button",{onClick:()=>y(p),className:"aspect-square rounded-xl bg-gray-800 hover:bg-gray-700 transition-colors flex items-center justify-center text-3xl relative group cursor-pointer",children:[p.emoji?s.jsx("span",{className:"text-4xl",children:p.emoji}):p.url?s.jsx("img",{src:p.url,alt:p.name,className:"w-full h-full object-contain rounded-xl"}):s.jsx("span",{className:"text-gray-500 text-sm",children:p.name}),p.isTrending&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"}),s.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black/80 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:p.name})]},p.id))})})]})}):null}function xp({isOpen:e,onClose:t,onSelectUser:n,taggedUsers:r}){const[a,i]=D.useState(""),[o,l]=D.useState([]),[c,d]=D.useState(!1);return D.useEffect(()=>{e&&(i(""),l([]))},[e]),D.useEffect(()=>{const f=setTimeout(async()=>{var h,g;if(!a.trim()){l([]);return}d(!0);try{const y=await yl({q:a,types:"users",usersLimit:20});(g=(h=y.sections)==null?void 0:h.users)!=null&&g.items?l(y.sections.users.items):l([])}catch(y){console.error("Error searching users:",y),l([])}finally{d(!1)}},300);return()=>clearTimeout(f)},[a]),e?s.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center animate-in fade-in duration-200",children:s.jsxs("div",{className:"w-full max-w-md max-h-[80vh] bg-gray-900 rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-800",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Tag People"}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-full transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"px-4 py-3 border-b border-gray-800",children:s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:a,onChange:u=>i(u.target.value),placeholder:"Search by handle (e.g., Sarah@Artane)...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-800 text-white rounded-xl border border-gray-700 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent",autoFocus:!0})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:c?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})}):o.length===0?s.jsx("div",{className:"text-center py-12 text-gray-400",children:a.trim()?s.jsx("p",{children:"No users found"}):s.jsx("p",{children:"Search for users to tag"})}):s.jsx("div",{className:"space-y-2",children:o.map(u=>{const f=r.includes(u.handle);return s.jsxs("button",{onClick:()=>{f||(n(u.handle,u.display_name||u.handle),t())},disabled:f,className:`w-full flex items-center gap-3 p-3 rounded-xl transition-colors ${f?"bg-gray-800/50 cursor-not-allowed opacity-50":"bg-gray-800 hover:bg-gray-700 cursor-pointer"}`,children:[s.jsx(It,{src:u.avatar_url,name:u.display_name||u.handle,size:"sm"}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:"text-white font-medium",children:u.display_name||u.handle}),s.jsx("div",{className:"text-gray-400 text-sm",children:u.handle})]}),f&&s.jsx("div",{className:"text-xs text-brand-400 font-medium",children:"Tagged"})]},u.handle)})})})]})}):null}function OV(){const{user:e}=tn(),t=Xt(),n=qn(),r=m.useRef(null),[a,i]=m.useState(null),[o,l]=m.useState(null),[c,d]=m.useState(""),[u,f]=m.useState("#FFFFFF"),[h,g]=m.useState("medium"),[y,p]=m.useState("linear-gradient(to bottom right, #ef4444, #f97316, #fbbf24)"),[S,x]=m.useState(!1),[v,b]=m.useState(!1),[w,N]=m.useState(!1),[R,C]=m.useState(!1),[_,W]=m.useState(!1),[T,E]=m.useState([]),[B,H]=m.useState(null),[q,ie]=m.useState([]),[X,V]=m.useState(""),[z,J]=m.useState(!1),[U,ue]=m.useState(!1),[fe,Ae]=m.useState(!1),_e=m.useRef(null),[Re,Se]=m.useState({width:0,height:0}),[de,F]=m.useState(null),[$,Z]=m.useState(!1),[Pe,ve]=m.useState([]),[re,M]=m.useState(0),[G,P]=m.useState(!1),[Y,j]=m.useState(null),[O,se]=m.useState(!1),[K,me]=m.useState(null),pe=m.useRef(null),Ve=m.useRef(null),[De,Ce]=m.useState(null);m.useEffect(()=>{var je,at,ut,gt,Ct;console.log("ClipPage mounted, checking location state...");const L=(je=n.state)==null?void 0:je.sharedStory,he=(at=n.state)==null?void 0:at.videoUrl;if(console.log("Shared story from location state:",L),L)try{console.log("Processing shared story data:",L),L.mediaUrl&&(console.log("Setting media from shared story:",L.mediaUrl),i(L.mediaUrl),l(L.mediaType||"image"),L.text&&d(L.text),L.sharedFromPost&&F({postId:L.sharedFromPost,userId:L.sharedFromUser}),(L.templateId||L.mediaItems&&L.mediaItems.length>1)&&j({templateId:L.templateId,mediaItems:L.mediaItems,stickers:L.stickers}),console.log("Media set successfully"))}catch(ne){console.error("Error processing shared story data:",ne)}if(he){i(he),l("video"),(ut=n.state)!=null&&ut.filtered&&Z(!0);const ne=(gt=n.state)==null?void 0:gt.videoSegments,ge=(Ct=n.state)==null?void 0:Ct.segmentIndex;ne&&ne.length>1&&(ve(ne),M(ge||0)),Ae(!0),ue(!1),setTimeout(()=>{var Ne;return(Ne=pe.current)==null?void 0:Ne.focus()},0)}},[n.state]);const Ft=()=>{var L;(L=r.current)==null||L.click()},Tt={white:"#FFFFFF",yellow:"#FFD700",red:"#FF0000",blue:"#0080FF",green:"#00FF00",purple:"#8000FF",pink:"#FF00FF",orange:"#FF8000",cyan:"#00FFFF",black:"#000000"},Jt=L=>{var je;const he=(je=L.target.files)==null?void 0:je[0];if(he){const at=new FileReader;at.onload=ut=>{var gt;i((gt=ut.target)==null?void 0:gt.result),he.type.startsWith("image/")?l("image"):he.type.startsWith("video/")&&l("video")},at.readAsDataURL(he)}},Nt=async()=>{if(!a&&!c.trim()&&T.length===0){alert("Please add text, media, or a GIF to your story.");return}if(e){if(Pe.length>1){await st();return}J(!0);try{await fx(e.id,e.handle,a||void 0,o||void 0,c.trim()||void 0,X.trim()||void 0,u,h,de==null?void 0:de.postId,de==null?void 0:de.userId,c.trim()?{color:u,size:h,background:y}:void 0,T.length>0?T:void 0,q.length>0?q:void 0),window.dispatchEvent(new CustomEvent("storyCreated",{detail:{userHandle:e.handle}})),t("/feed")}catch(L){console.error("Error creating story:",L),alert("Failed to create story. Please try again.")}finally{J(!1)}}},st=async()=>{if(!(!e||Pe.length===0)){P(!0);try{for(let L=0;L<Pe.length;L++){M(L);const he=Pe[L];await fx(e.id,e.handle,he,"video",L===0&&c.trim()||void 0,L===0&&X.trim()||void 0,u,h,L===0?de==null?void 0:de.postId:void 0,L===0?de==null?void 0:de.userId:void 0),window.dispatchEvent(new CustomEvent("storyCreated",{detail:{userHandle:e.handle}})),L<Pe.length-1&&await new Promise(je=>setTimeout(je,500))}t("/feed")}catch(L){console.error("Error creating story segments:",L),alert(`Failed to create story segment ${re+1}. Please try again.`)}finally{P(!1),M(0)}}},[Ye,Bt]=m.useState(!1);m.useEffect(()=>{if(_e.current){const L=()=>{var at;const je=(at=_e.current)==null?void 0:at.getBoundingClientRect();je&&Se({width:je.width,height:je.height})};L();const he=new ResizeObserver(L);return he.observe(_e.current),()=>he.disconnect()}},[Ye]);const we=L=>{const he={id:`gif-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,stickerId:`gif-${L}`,sticker:{id:`gif-${L}`,name:"GIF",category:"GIF",url:L,isAnimated:!0},x:50,y:50,scale:1.5,rotation:0,opacity:1};E([...T,he]),H(he.id)},tt=(L,he)=>{E(T.map(je=>je.id===L?he:je))},Je=L=>{E(T.filter(he=>he.id!==L)),B===L&&H(null)},Ze=L=>{const he={id:`sticker-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,stickerId:L.id,sticker:L,x:50,y:50,scale:1,rotation:0,opacity:1};E([...T,he]),H(he.id)},ot=()=>{switch(h){case"small":return"text-2xl";case"medium":return"text-4xl";case"large":return"text-6xl";default:return"text-4xl"}};return a?s.jsxs("div",{className:"fixed inset-0 bg-black z-50 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/80 to-transparent p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>t("/feed"),className:"p-2 bg-black/50 backdrop-blur-sm text-white rounded-full hover:bg-black/70 transition-colors","aria-label":"Go to Home Feed",title:"Home",children:s.jsx(Gd,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>t("/feed"),className:"font-light text-base tracking-tight","aria-label":"Go to Home Feed",title:"Gazetteer",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:s.jsx("span",{style:{background:"linear-gradient(90deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 1) 50%, rgba(255, 255, 255, 0.3) 100%)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:"shimmer 3s linear infinite",display:"inline-block"},children:"Gazetteer"})})]}),s.jsx("h1",{className:"text-white font-semibold text-base",children:"Your Story"}),s.jsxs("div",{className:"flex items-center gap-2",children:[(de==null?void 0:de.postId)&&s.jsxs("button",{onClick:async()=>{if(de!=null&&de.postId)try{const L=await ra(de.postId);L&&(me(L),se(!0))}catch(L){console.error("Error fetching post:",L)}},className:"px-3 py-1.5 bg-purple-600/80 backdrop-blur-sm text-white rounded-full hover:bg-purple-600 transition-colors text-xs font-semibold flex items-center gap-1.5",title:"Show Full Scenes",children:[s.jsx(Mb,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Full Scenes"})]}),s.jsx("button",{onClick:()=>Ae(!fe),className:"p-2 bg-black/50 backdrop-blur-sm text-white rounded-full hover:bg-black/70 transition-colors",children:s.jsx(Os,{className:"w-6 h-6"})})]})]})}),s.jsx("div",{className:`w-full h-full flex items-center justify-center bg-black ${fe?"pb-[40vh]":""}`,children:o==="image"?s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[s.jsx("img",{src:a,alt:"Story preview",className:"max-w-full max-h-full w-auto h-auto"}),$&&s.jsx("span",{className:"absolute top-4 left-4 z-10 px-2 py-1 rounded-full text-[11px] font-semibold bg-purple-600 text-white shadow",children:"Filtered"}),c&&s.jsx("div",{className:"absolute bottom-20 left-0 right-0 px-6 pointer-events-none",children:s.jsx("div",{className:`font-bold text-center ${h==="small"?"text-sm":h==="large"?"text-3xl":"text-xl"}`,style:{color:Tt[u]||u,textShadow:"2px 2px 8px rgba(0,0,0,0.9), -1px -1px 0 rgba(0,0,0,0.9), 1px -1px 0 rgba(0,0,0,0.9), -1px 1px 0 rgba(0,0,0,0.9), 1px 1px 0 rgba(0,0,0,0.9)"},children:c})})]}):s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[s.jsx("div",{className:"flex items-center justify-center",style:{maxWidth:"100%",maxHeight:"100%",aspectRatio:De?`${De.w} / ${De.h}`:void 0},children:s.jsx("video",{ref:Ve,src:a,controls:!0,className:"w-full h-full",style:{objectFit:"contain",display:"block"},onLoadedMetadata:()=>{const L=Ve.current;L&&L.videoWidth&&L.videoHeight&&Ce({w:L.videoWidth,h:L.videoHeight})}})}),$&&s.jsx("span",{className:"absolute top-4 left-4 z-10 px-2 py-1 rounded-full text-[11px] font-semibold bg-purple-600 text-white shadow",children:"Filtered"})]})}),fe&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/95 backdrop-blur-md rounded-t-3xl p-6 animate-in slide-in-from-bottom duration-300 max-h-[70vh] overflow-y-auto",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("button",{onClick:()=>ue(!U),className:"w-full py-4 rounded-2xl bg-gray-900 text-white font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center gap-3",children:[s.jsx(gc,{className:"w-5 h-5"}),U?"Hide Text Editor":"Add Text"]}),U&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("textarea",{ref:pe,value:c,onChange:L=>d(L.target.value),placeholder:"Type your story text...",maxLength:200,className:"w-full h-32 p-4 rounded-2xl bg-gray-900 text-white placeholder-gray-500 resize-none focus:ring-2 focus:ring-green-500 focus:border-transparent"}),s.jsxs("div",{className:"text-right text-sm text-gray-500",children:[c.length,"/200"]}),c&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-3",children:"Text Color"}),s.jsx("div",{className:"flex gap-3 flex-wrap justify-center",children:Object.entries(Tt).map(([L,he])=>s.jsx("button",{onClick:()=>f(L),className:`w-12 h-12 rounded-full border-3 transition-all ${u===L?"border-white scale-110":"border-gray-600"}`,style:{backgroundColor:he},title:L.charAt(0).toUpperCase()+L.slice(1)},L))})]}),c&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-3",children:"Text Size"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["small","medium","large"].map(L=>s.jsx("button",{onClick:()=>g(L),className:`py-3 rounded-xl border-2 font-medium transition-all ${h===L?"border-white bg-white text-black":"border-gray-600 text-gray-400 hover:border-gray-500"}`,children:L.charAt(0).toUpperCase()+L.slice(1)},L))})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-3 flex items-center gap-2",children:[s.jsx(ln,{className:"w-4 h-4"}),"Add Location"]}),s.jsx("input",{type:"text",value:X,onChange:L=>V(L.target.value),placeholder:"Where are you?",className:"w-full px-4 py-3 rounded-xl bg-gray-900 text-white placeholder-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),s.jsx("div",{className:"rounded-2xl bg-gray-900/50 p-4 text-center",children:s.jsx("div",{className:"text-sm text-gray-400",children:" Your story will be visible for 24 hours"})}),Pe.length>1&&s.jsxs("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 font-medium",children:[" Your video will be split into ",Pe.length," clips (15 seconds each)"]}),G&&s.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-500 mt-1",children:["Posting clips... (",re+1," of ",Pe.length,")"]})]}),s.jsx("button",{onClick:Nt,disabled:z||G,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 via-blue-500 to-blue-600 text-white font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-all shadow-lg hover:scale-[1.02] active:scale-[0.98]",children:G?`Posting ${Pe.length} Clips... (${re+1}/${Pe.length})`:z?"Sharing Your Story...":Pe.length>1?`Share ${Pe.length} Clips to Story`:"Share to Story"})]})}),O&&K&&s.jsx(Mu,{post:K,isOpen:O,onClose:()=>{se(!1),me(null)},onLike:async()=>{},onFollow:async()=>{},onShare:async()=>{},onOpenComments:()=>{},onReclip:async()=>{}})]}):Ye?s.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-gradient-to-br from-red-500 via-orange-500 to-yellow-400",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/20 backdrop-blur-sm",children:[s.jsx("button",{onClick:()=>{Bt(!1),d(""),E([]),ie([])},className:"p-2 -ml-2 text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Back",children:s.jsx(pt,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>C(!0),className:"p-2 text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Stickers",children:s.jsx(Xl,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>x(!S),className:"px-3 py-1.5 text-white hover:bg-white/10 rounded-full transition-colors text-sm font-medium","aria-label":"Background Settings",children:"Background"})]}),s.jsxs("div",{ref:_e,className:"flex-1 flex items-center justify-center relative overflow-hidden",style:{background:y.includes("gradient")?void 0:y,backgroundImage:y.includes("gradient")?y:void 0},onClick:L=>{(L.target===L.currentTarget||L.target.tagName==="DIV")&&H(null)},children:[s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center px-4 pointer-events-none max-w-full overflow-hidden",children:[c.trim()?s.jsx("div",{className:`text-center w-full max-w-full overflow-hidden ${ot()}`,style:{color:u},children:s.jsx("div",{className:"leading-relaxed whitespace-pre-wrap font-bold drop-shadow-lg break-words",style:{wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"100%"},children:c})}):s.jsx("div",{className:"text-white/60 text-lg font-medium",children:"Tap to type"}),q.length>0&&s.jsx("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-2",children:q.map(L=>s.jsxs("div",{className:"px-3 py-1.5 bg-white/20 backdrop-blur-sm rounded-full text-white text-sm font-medium",children:["@",L]},L))})]}),T.length>0&&Re.width>0&&s.jsx(s.Fragment,{children:T.map(L=>s.jsx(Oa,{overlay:L,onUpdate:he=>tt(L.id,he),onRemove:()=>Je(L.id),isSelected:B===L.id,onSelect:()=>H(L.id),containerWidth:Re.width||400,containerHeight:Re.height||400},L.id))}),s.jsx("textarea",{ref:pe,value:c,onChange:L=>d(L.target.value),onClick:L=>L.stopPropagation(),className:"absolute inset-0 w-full h-full bg-transparent border-none outline-none text-transparent caret-white resize-none cursor-text",placeholder:"",style:{fontSize:"16px"}}),s.jsxs("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 flex flex-col gap-3 z-10",children:[v&&s.jsxs("div",{className:"flex flex-col gap-2 bg-white/90 backdrop-blur-sm rounded-2xl p-2 shadow-lg",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Text Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-1",children:Object.entries(Tt).map(([L,he])=>s.jsx("button",{onClick:()=>f(he),className:`w-8 h-8 rounded-full ${u===he?"ring-2 ring-black":""}`,style:{backgroundColor:he}},L))})]}),S&&s.jsxs("div",{className:"flex flex-col gap-2 bg-white/90 backdrop-blur-sm rounded-2xl p-2 shadow-lg max-h-[400px] overflow-y-auto",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Background"}),s.jsx("div",{className:"grid grid-cols-2 gap-1 mb-2",children:["linear-gradient(to bottom right, #ef4444, #f97316, #fbbf24)","linear-gradient(to bottom right, #3b82f6, #8b5cf6, #ec4899)","linear-gradient(to bottom right, rgb(255, 140, 0), rgb(255, 0, 160), rgb(140, 40, 255))","linear-gradient(to bottom right, #f59e0b, #ef4444, #ec4899)"].map(L=>s.jsx("button",{onClick:()=>p(L),className:`h-12 rounded-lg ${y===L?"ring-2 ring-black":""}`,style:{background:L}},L))}),s.jsx("div",{className:"grid grid-cols-4 gap-1",children:["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF"].map(L=>s.jsx("button",{onClick:()=>p(L),className:`w-8 h-8 rounded-full ${y===L?"ring-2 ring-black":""}`,style:{backgroundColor:L}},L))})]})]}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex items-center justify-center gap-6 p-4 bg-black/20 backdrop-blur-sm z-10",children:[s.jsx("button",{onClick:()=>{b(!v),x(!1)},className:"p-3 bg-white/20 hover:bg-white/30 rounded-full text-white transition-colors","aria-label":"Text Color",children:s.jsx("span",{className:"text-xl font-bold",children:"Aa"})}),s.jsxs("button",{onClick:()=>W(!0),className:"p-3 bg-white/20 hover:bg-white/30 rounded-full text-white transition-colors relative","aria-label":"Tag Users",children:[s.jsx(xc,{className:"w-5 h-5"}),q.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center text-white",children:q.length})]}),s.jsx("button",{onClick:()=>N(!0),className:"p-3 bg-white/20 hover:bg-white/30 rounded-full text-white transition-colors","aria-label":"Add GIF",children:s.jsx("span",{className:"text-xl font-bold",children:"GIF"})}),s.jsx("button",{onClick:Nt,disabled:z||!c.trim()&&T.length===0,className:"px-6 py-3 bg-white text-black rounded-full font-semibold hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:z?"Posting...":"Post"})]})]}),w&&s.jsx(AV,{isOpen:w,onClose:()=>N(!1),onSelectGif:L=>{we(L),N(!1)}}),R&&s.jsx(gp,{isOpen:R,onClose:()=>C(!1),onSelectSticker:Ze}),_&&s.jsx(xp,{isOpen:_,onClose:()=>W(!1),onSelectUser:(L,he)=>{q.includes(L)||ie([...q,L])},taggedUsers:q})]}):s.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/80 to-transparent p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>t("/feed"),className:"p-2 bg-black/50 backdrop-blur-sm text-white rounded-full hover:bg-black/70 transition-colors","aria-label":"Go to Home Feed",title:"Home",children:s.jsx(Gd,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>t("/feed"),className:"font-light text-lg tracking-tight","aria-label":"Go to Home Feed",title:"Gazetteer",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:s.jsx("span",{style:{background:"linear-gradient(90deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 1) 50%, rgba(255, 255, 255, 0.3) 100%)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:"shimmer 3s linear infinite",display:"inline-block"},children:"Gazetteer"})})]}),s.jsx("h1",{className:"text-white font-bold text-lg",children:"Create Story"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex items-center justify-center h-screen px-6",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsxs("button",{onClick:Ft,className:"relative mx-auto mb-6 w-32 h-32 cursor-pointer hover:scale-105 transition-transform",children:[s.jsx("div",{className:"w-32 h-32 rounded-full p-0.5 absolute top-0 left-0",style:{background:"conic-gradient(from 0deg, rgb(255, 140, 0), rgb(248, 0, 50), rgb(255, 0, 160), rgb(140, 40, 255), rgb(0, 35, 255), rgb(25, 160, 255), rgb(255, 140, 0))"},children:s.jsx("div",{className:"w-full h-full rounded-full bg-black flex items-center justify-center relative overflow-hidden",children:s.jsx(Wd,{className:"w-16 h-16 text-white relative z-10"})})}),s.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 rounded-full opacity-30 pointer-events-none",style:{background:"radial-gradient(circle, rgba(59,130,246,0.5) 0%, rgba(16,185,129,0.5) 50%, transparent 70%)",animation:"pulse 2s ease-in-out infinite"}})]}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Add to your Clips page"}),s.jsx("p",{className:"text-gray-400 mb-8",children:"Share moments that disappear in 24 hours"}),s.jsxs("label",{className:"block mb-4",children:[s.jsxs("div",{className:"relative inline-block overflow-visible",children:[s.jsx("div",{className:"absolute -inset-[2px] rounded-full bg-gradient-to-r from-emerald-500 via-blue-500 via-purple-500 to-pink-500 blur-sm opacity-75"}),s.jsx("div",{className:"absolute -inset-[1px] rounded-full bg-gradient-to-r from-emerald-500 via-blue-500 via-purple-500 to-pink-500"}),s.jsx("div",{className:"relative px-8 py-4 rounded-full bg-white text-black font-semibold hover:scale-105 transition-transform cursor-pointer",children:s.jsx("span",{children:"Select Photo or Video"})})]}),s.jsx("input",{ref:r,type:"file",accept:"image/*,video/*",onChange:Jt,className:"hidden"})]}),s.jsx("button",{onClick:()=>Bt(!0),className:"px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-full font-semibold transition-colors border border-white/20",children:"Create Text Story"})]})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 via-blue-500/10 to-blue-600/10 pointer-events-none"})]})}function Z4({isOpen:e,onClose:t,onConfirm:n}){const[r,a]=m.useState(""),[i,o]=m.useState("medium"),[l,c]=m.useState("#FFFFFF"),d=m.useRef(null);m.useEffect(()=>{e&&(a(""),o("medium"),c("#FFFFFF"),setTimeout(()=>{var g;return(g=d.current)==null?void 0:g.focus()},100))},[e]);const u=[{name:"White",value:"#FFFFFF"},{name:"Black",value:"#000000"},{name:"Red",value:"#FF0000"},{name:"Blue",value:"#0080FF"},{name:"Green",value:"#00FF00"},{name:"Yellow",value:"#FFFF00"},{name:"Pink",value:"#FF00FF"},{name:"Purple",value:"#8000FF"},{name:"Orange",value:"#FF8000"},{name:"Cyan",value:"#00FFFF"}];function f(){r.trim()&&(n(r.trim(),i,l),a(""))}function h(g){g.key==="Enter"&&!g.shiftKey?(g.preventDefault(),f()):g.key==="Escape"&&t()}return e?s.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center animate-in fade-in duration-200",children:s.jsxs("div",{className:"w-full max-w-md mx-4 bg-gray-900 rounded-2xl animate-in zoom-in-95 duration-300",children:[s.jsx("div",{className:"px-6 pt-6 pb-4 border-b border-gray-800",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Add Text"}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6 text-gray-400"})})]})}),s.jsxs("div",{className:"px-6 py-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Text"}),s.jsx("input",{ref:d,type:"text",value:r,onChange:g=>a(g.target.value),onKeyDown:h,placeholder:"Enter your text...",maxLength:50,className:"w-full px-4 py-3 bg-gray-800 text-white rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent placeholder-gray-500 text-lg"}),s.jsxs("div",{className:"text-right text-xs text-gray-500 mt-1",children:[r.length,"/50"]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Size"}),s.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(g=>s.jsx("button",{onClick:()=>o(g),className:`flex-1 py-2 rounded-lg font-medium transition-colors ${i===g?"bg-purple-500 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:g.charAt(0).toUpperCase()+g.slice(1)},g))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Color"}),s.jsx("div",{className:"grid grid-cols-5 gap-2",children:u.map(g=>s.jsx("button",{onClick:()=>c(g.value),className:`aspect-square rounded-lg border-2 transition-all ${l===g.value?"border-white scale-110":"border-gray-700 hover:border-gray-600"}`,style:{backgroundColor:g.value},title:g.name},g.value))})]}),r&&s.jsx("div",{className:"mb-6 p-4 bg-gray-800 rounded-lg",children:s.jsx("div",{className:"text-center",children:s.jsx("span",{className:"font-bold drop-shadow-lg",style:{color:l,fontSize:i==="small"?"24px":i==="medium"?"32px":"40px",textShadow:"2px 2px 4px rgba(0,0,0,0.8), -1px -1px 2px rgba(0,0,0,0.8)"},children:r})})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 bg-gray-800 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:f,disabled:!r.trim(),className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsx(Ib,{className:"w-4 h-4"}),s.jsx("span",{children:"Add"})]})]})]})]})}):null}const mi="http://localhost:8000/api";async function UV(e){const t=localStorage.getItem("authToken");console.log(" generateAiMusic called with params:",e),console.log(" API URL:",`${mi}/music/generate`),console.log(" Request body (stringified):",JSON.stringify(e)),console.log(" Params type check:",{mood:{value:e.mood,type:typeof e.mood},genre:{value:e.genre,type:typeof e.genre},duration:{value:e.duration,type:typeof e.duration}});try{const n=await fetch(`${mi}/music/generate`,{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify(e)}).catch(a=>{throw console.error("Fetch error:",a),new Error(`Failed to connect to backend server at ${mi}. Please ensure the Laravel backend is running (php artisan serve).`)});if(!n.ok){const a=await n.json().catch(()=>({message:`HTTP ${n.status}: ${n.statusText}`}));if(n.status===401)throw new Error("Authentication required. Please log in to generate music.");if(n.status===400){const i=await n.json().catch(()=>({}));console.error(" Validation error response:",i);let o=i.message||"Validation failed";if(i.errors){const l=Object.entries(i.errors).map(([c,d])=>{const u=Array.isArray(d)?d.join(", "):d;return`${c}: ${u}`}).join("; ");o=`${o}

Details: ${l}`}throw i.received_data&&(console.error(" Received data:",i.received_data),o=`${o}

Received: ${JSON.stringify(i.received_data)}`),i.debug&&(console.error(" Debug info:",i.debug),o=`${o}

Debug: ${JSON.stringify(i.debug)}`),new Error(`Validation error: ${o}`)}if(n.status===501)return{success:!1,message:(await n.json().catch(()=>({}))).message||"AI music generation is not yet integrated.",status:"not_implemented"};throw new Error(a.message||a.error||`HTTP ${n.status}`)}return await n.json()}catch(n){throw n.message&&(n.message.includes("Failed to connect")||n.message.includes("Authentication required"))?n:n instanceof TypeError||n.name==="TypeError"?new Error(`Failed to connect to backend server at ${mi}. Please ensure the Laravel backend is running (cd laravel-backend && php artisan serve).`):n}}async function Q4(e){const t=localStorage.getItem("authToken"),n=new URLSearchParams;e!=null&&e.genre&&n.append("genre",e.genre),e!=null&&e.mood&&n.append("mood",e.mood),e!=null&&e.search&&n.append("search",e.search);try{const r=await fetch(`${mi}/music/library?${n.toString()}`,{method:"GET",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}});if(!r.ok){const i=await r.json().catch(()=>({message:`HTTP ${r.status}`}));throw new Error(i.message||`HTTP ${r.status}: ${r.statusText}`)}return await r.json()}catch(r){throw console.error("getMusicLibrary error:",r),r.message.includes("Failed to fetch")||r.message.includes("NetworkError")?new Error("Cannot connect to server. Make sure the backend is running at http://localhost:8000"):r}}async function zV(e){const t=localStorage.getItem("authToken"),n=await fetch(`${mi}/music/${e}`,{method:"GET",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}),r=await n.json();if(!n.ok)throw new Error(r.message||`HTTP ${n.status}`);return r}async function $V(e){const t=localStorage.getItem("authToken"),n=new FormData;n.append("file",e.file),e.title&&n.append("title",e.title),e.artist&&n.append("artist",e.artist),e.genre&&n.append("genre",e.genre),e.mood&&n.append("mood",e.mood);const r=await fetch(`${mi}/music/upload`,{method:"POST",headers:{...t&&{Authorization:`Bearer ${t}`}},body:n}),a=await r.json();if(!r.ok)throw new Error(a.message||a.errors||`HTTP ${r.status}`);return a}async function HV(e){const t=localStorage.getItem("authToken"),n=await fetch(`${mi}/music/${e}/use`,{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}),r=await n.json();if(!n.ok)throw new Error(r.message||`HTTP ${n.status}`);return r}const ai=Object.freeze(Object.defineProperty({__proto__:null,generateAiMusic:UV,getMusicLibrary:Q4,getMusicTrack:zV,incrementMusicUsage:HV,uploadMusic:$V},Symbol.toStringTag,{value:"Module"}));function WV({isOpen:e,onClose:t,onSelectTrack:n,selectedTrackId:r}){const[a,i]=D.useState([]),[o,l]=D.useState(!1),[c,d]=D.useState(""),[u,f]=D.useState(""),[h,g]=D.useState(""),[y,p]=D.useState(null),S=D.useRef(null),x=["pop","rock","electronic","hip-hop","jazz","classical","ambient"],v=["happy","energetic","calm","dramatic","romantic","upbeat"];D.useEffect(()=>{e?b():(S.current&&(S.current.pause(),S.current=null),p(null))},[e]),D.useEffect(()=>{const C=setTimeout(()=>{e&&b()},300);return()=>clearTimeout(C)},[c,u,h,e]);const b=async()=>{l(!0);try{const C=await Q4({genre:u||void 0,mood:h||void 0,search:c||void 0});i(C.data||[])}catch(C){console.error("Failed to load music library:",C),i([])}finally{l(!1)}},w=C=>{if(S.current&&(S.current.pause(),S.current=null),y===C.id){p(null);return}const _=C.preview_url||C.url;if(_){const W=new Audio(_);W.volume=.5,W.play().catch(T=>{console.error("Failed to play preview:",T)}),S.current=W,p(C.id),W.onended=()=>{p(null),S.current=null}}},N=C=>{S.current&&(S.current.pause(),S.current=null),p(null),n(C)},R=()=>{n(null)};return e?s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(As,{className:"w-6 h-6 text-brand-500"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Select Music"})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:s.jsx(pt,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search tracks...",value:c,onChange:C=>d(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-brand-500"})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsxs("select",{value:u,onChange:C=>f(C.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-brand-500",children:[s.jsx("option",{value:"",children:"All Genres"}),x.map(C=>s.jsx("option",{value:C,children:C.charAt(0).toUpperCase()+C.slice(1)},C))]}),s.jsxs("select",{value:h,onChange:C=>g(C.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-brand-500",children:[s.jsx("option",{value:"",children:"All Moods"}),v.map(C=>s.jsx("option",{value:C,children:C.charAt(0).toUpperCase()+C.slice(1)},C))]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500"})}):a.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx(As,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No tracks found"}),s.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your filters"})]}):s.jsx("div",{className:"space-y-2",children:a.map(C=>{const _=r===C.id,W=y===C.id;return s.jsx("div",{className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${_?"border-brand-500 bg-brand-50 dark:bg-brand-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>N(C),children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:T=>{T.stopPropagation(),w(C)},className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:W?s.jsx(zh,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}):s.jsx(Yd,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:C.title}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:C.artist||"Unknown Artist"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[C.genre&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400",children:C.genre}),C.mood&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400",children:C.mood}),C.duration&&s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Math.floor(C.duration/60),":",(C.duration%60).toString().padStart(2,"0")]})]}),C.license_type&&s.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["License: ",C.license_type]})]}),_&&s.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-brand-500 flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},C.id)})})}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Track selected"}),s.jsx("button",{onClick:R,className:"px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Remove"})]}):s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select a track or close to continue without music"}),s.jsx("button",{onClick:t,className:"px-6 py-2 bg-brand-500 text-white rounded-lg hover:bg-brand-600 transition-colors font-medium",children:"Done"})]})]})}):null}function VV(e,t){const[n,r]=D.useState(e);return D.useEffect(()=>{const a=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(a)}},[e,t]),n}function GV(){const{user:e}=tn(),t=Xt(),n=qn().state,r=90,[a,i]=D.useState(""),[o,l]=D.useState(""),[c,d]=D.useState(null),[u,f]=D.useState(null),[h,g]=D.useState(""),[y,p]=D.useState(""),[S,x]=D.useState(!1),[v,b]=D.useState(!1),[w,N]=D.useState(!1),[R,C]=D.useState(null),[_,W]=D.useState([]),[T,E]=D.useState(!1),[B,H]=D.useState(!1),[q,ie]=D.useState(null),[X,V]=D.useState(!1),[z,J]=D.useState(!1),[U,ue]=D.useState(!1),[fe,Ae]=D.useState("none"),[_e,Re]=D.useState(1),[Se,de]=D.useState(1),[F,$]=D.useState(1),[Z,Pe]=D.useState(0),[ve,re]=D.useState(!1),[M,G]=D.useState([]),[P,Y]=D.useState(!1),[j,O]=D.useState(null),se=D.useRef(null),[K,me]=D.useState({width:0,height:0}),pe=D.useRef(null),Ve=D.useRef(null),De=D.useRef(null);VV(a,300),D.useEffect(()=>()=>{c&&c.startsWith("blob:")&&URL.revokeObjectURL(c)},[c]),D.useEffect(()=>{if(u==="video"&&Ve.current&&c){const L=Ve.current;L.readyState===0&&L.load(),L.style.display="block",L.style.visibility="visible",L.style.opacity="1"}},[c,u]),D.useEffect(()=>{if(se.current&&c){const L=()=>{var at;const je=(at=se.current)==null?void 0:at.getBoundingClientRect();je&&me({width:je.width,height:je.height})};L();const he=new ResizeObserver(L);return he.observe(se.current),()=>he.disconnect()}},[c]);const Ce=D.useMemo(()=>{const L=n==null?void 0:n.filterInfo;if(!L)return"";const he=[];return L.active==="bw"?he.push("grayscale(1)"):L.active==="sepia"?he.push("sepia(0.8)"):L.active==="vivid"?he.push(`saturate(${1.6*(L.saturation||1)}) contrast(${1.1*(L.contrast||1)})`):L.active==="cool"&&he.push(`hue-rotate(200deg) saturate(${1.2*(L.saturation||1)})`),L.brightness&&L.brightness!==1&&he.push(`brightness(${L.brightness})`),L.contrast&&L.contrast!==1&&he.push(`contrast(${L.contrast})`),L.saturation&&L.saturation!==1&&he.push(`saturate(${L.saturation})`),L.hue&&L.hue!==0&&he.push(`hue-rotate(${L.hue*360}deg)`),he.join(" ")},[n==null?void 0:n.filterInfo]),Ft=D.useCallback(async L=>{const he=n==null?void 0:n.filterInfo;if(!he||!he.exportFailed)return L;try{const je=document.createElement("video");je.src=L,je.crossOrigin="anonymous",je.muted=!0,je.playsInline=!0,await new Promise(ye=>{if(je.readyState>=1)return ye();const Ge=()=>{je.removeEventListener("loadedmetadata",Ge),ye()};je.addEventListener("loadedmetadata",Ge),setTimeout(()=>{je.removeEventListener("loadedmetadata",Ge),ye()},1500)});const at=je.videoWidth||720,ut=je.videoHeight||1280,gt=Math.max(at,ut),Ct=gt>720?720/gt:1,ne=document.createElement("canvas");ne.width=Math.round(at*Ct),ne.height=Math.round(ut*Ct);const ge=ne.getContext("2d");if(!ge)return L;const Ne=Ce,Oe=ne.captureStream(24);let Le="video/webm;codecs=vp9";MediaRecorder.isTypeSupported(Le)||(Le="video/webm;codecs=vp8"),MediaRecorder.isTypeSupported(Le)||(Le="video/webm");const Me=new MediaRecorder(Oe,{mimeType:Le,videoBitsPerSecond:12e5}),ke=[];Me.ondataavailable=ye=>{ye.data&&ye.data.size>0&&ke.push(ye.data)};const Ue=new Promise(ye=>{Me.onstop=()=>ye()});let He=-1;const Mt=()=>{if(je.ended){Me.state!=="inactive"&&Me.stop();return}je.currentTime!==He&&(ge.filter=Ne||"none",ge.drawImage(je,0,0,ne.width,ne.height),He=je.currentTime),requestAnimationFrame(Mt)};je.currentTime=0,je.loop=!1,Me.start(500),await je.play(),requestAnimationFrame(Mt);const Pt=setTimeout(()=>{Me.state==="recording"&&Me.stop()},8e3);if(await Ue,clearTimeout(Pt),ke.length===0)return L;const fn=new Blob(ke,{type:Le});return fn.size<1e3?L:URL.createObjectURL(fn)}catch{return L}},[Ce]);D.useEffect(()=>{(async()=>{if(n!=null&&n.templateMediaItems&&n.templateMediaItems.length>0){V(!0);try{const L=n.templateMediaItems[0];d(L.url),f(L.type),b(!1),n.templateText&&i(n.templateText),n.templateLocation&&l(n.templateLocation),n.templateStickers&&n.templateStickers.length>0&&W(n.templateStickers),n.templateTaggedUsers&&n.templateTaggedUsers.length>0&&G(n.templateTaggedUsers),n.templateBannerText&&p(n.templateBannerText),setTimeout(()=>{var he;return(he=pe.current)==null?void 0:he.focus()},0)}catch(L){console.error("Error processing template media:",L),zt("Failed to load template media. Please try again.")}finally{V(!1)}}else if(n!=null&&n.editedMedia&&(n!=null&&n.mediaItems)&&n.mediaItems.length>0){V(!0);try{const L=n.mediaItems[0];d(L.url),f(L.type),b(!1),setTimeout(()=>{var he;return(he=pe.current)==null?void 0:he.focus()},0)}catch(L){console.error("Error processing edited media:",L),zt("Failed to load edited media. Please try again.")}finally{V(!1)}}else if(n!=null&&n.videoUrl){V(!0);try{let L=n.videoUrl;L=await Ft(L),d(L),f("video"),b(!!n.filtered||!!n.filterInfo),setTimeout(()=>{var he;return(he=pe.current)==null?void 0:he.focus()},0)}catch(L){console.error("Error processing video:",L),zt("Failed to load video. Please try again.")}finally{V(!1)}}})()},[n==null?void 0:n.videoUrl,n==null?void 0:n.editedMedia,n==null?void 0:n.mediaItems]);const Tt=D.useCallback(async L=>new Promise((he,je)=>{const at=document.createElement("video"),ut=URL.createObjectURL(L);at.src=ut,at.muted=!0,at.playsInline=!0,at.onloadedmetadata=async()=>{try{const gt=at.videoWidth||720,Ct=at.videoHeight||1280,ne=Math.max(gt,Ct)>1080?1080/Math.max(gt,Ct):1,ge=document.createElement("canvas");ge.width=Math.round(gt*ne),ge.height=Math.round(Ct*ne);const Ne=ge.getContext("2d");if(!Ne){URL.revokeObjectURL(ut),je(new Error("Could not get canvas context"));return}const Oe=ge.captureStream(30);let Le="video/webm;codecs=vp8";MediaRecorder.isTypeSupported("video/webm;codecs=vp9")&&(Le="video/webm;codecs=vp9");const Me=new MediaRecorder(Oe,{mimeType:Le,videoBitsPerSecond:25e5}),ke=[];Me.ondataavailable=nt=>{nt.data&&nt.data.size>0&&ke.push(nt.data)};const Ue=new Promise(nt=>{Me.onstop=()=>nt()});let He=-1;const Mt=()=>{if(at.ended){Me.state!=="inactive"&&Me.stop();return}at.currentTime!==He&&(Ne.drawImage(at,0,0,ge.width,ge.height),He=at.currentTime),requestAnimationFrame(Mt)};at.currentTime=0,Me.start(100),await at.play(),requestAnimationFrame(Mt);const Pt=at.duration||10,fn=setTimeout(()=>{Me.state==="recording"&&Me.stop()},Math.min(3e4,Pt*2e3));if(await Ue,clearTimeout(fn),URL.revokeObjectURL(ut),ke.length===0){je(new Error("No video data recorded"));return}const ye=new Blob(ke,{type:Le}),Ge=URL.createObjectURL(ye);he(Ge)}catch(gt){URL.revokeObjectURL(ut),je(gt)}},at.onerror=()=>{URL.revokeObjectURL(ut),je(new Error("Failed to load video"))},setTimeout(()=>{at.readyState===0&&(URL.revokeObjectURL(ut),je(new Error("Video loading timeout")))},5e3)}),[]),Jt=D.useCallback(async L=>{var je;const he=(je=L.target.files)==null?void 0:je[0];if(he){if(he.size>52428800){zt("File size too large. Please select a file under 50MB."),De.current&&(De.current.value="");return}V(!0);const ut=he.type.startsWith("video/"),gt=he.type.startsWith("image/");if(ut)try{const Ct=URL.createObjectURL(he);if(/Edg/.test(navigator.userAgent)){const ge=document.createElement("video");if(ge.src=Ct,ge.muted=!0,ge.playsInline=!0,!await new Promise(Oe=>{const Le=setTimeout(()=>{ge.removeEventListener("loadeddata",Me),ge.removeEventListener("error",ke),URL.revokeObjectURL(Ct),Oe(!1)},4e3),Me=()=>{const Ue=ge.videoWidth>0&&ge.videoHeight>0;clearTimeout(Le),ge.removeEventListener("error",ke),URL.revokeObjectURL(Ct),Oe(Ue)},ke=()=>{clearTimeout(Le),ge.removeEventListener("loadeddata",Me),URL.revokeObjectURL(Ct),Oe(!1)};ge.addEventListener("loadeddata",Me),ge.addEventListener("error",ke)})){console.log("Edge cannot render video, transcoding for compatibility..."),zt("Converting video for Edge compatibility..."),URL.revokeObjectURL(Ct);const Oe=await Tt(he);d(Oe),f("video"),V(!1),zt("Video converted successfully");return}}d(Ct),f("video"),V(!1)}catch(Ct){console.error("Error processing video:",Ct),zt("Failed to process video. Please try a different format."),V(!1)}else if(gt){const Ct=new FileReader;Ct.onload=ne=>{var ge;d((ge=ne.target)==null?void 0:ge.result),f("image"),V(!1)},Ct.onerror=()=>{zt("Failed to load file. Please try again."),V(!1)},Ct.readAsDataURL(he)}else zt("Unsupported file type. Please select an image or video."),V(!1)}},[Tt]),Nt=D.useCallback(async L=>{var he;if(L==null||L.preventDefault(),!a.trim()&&!c){zt("Please add text or media to your post.");return}if(!e){zt("Please log in to create a post.");return}x(!0);try{let je;if(u==="video"&&c){const ne=n==null?void 0:n.clips;if(ne&&ne.length>0){const ge=[];let Ne=0,Oe=0;for(const ke of ne){const Ue=Math.min((ke.trimEnd-ke.trimStart)/ke.speed,90-Oe);if(Ue<=0||(ge.push({id:ke.id,mediaUrl:ke.url,type:"video",startTime:Ne,duration:Ue,trimStart:ke.trimStart,trimEnd:ke.trimEnd,speed:ke.speed,reverse:ke.reverse,originalDuration:ke.duration}),Ne+=Ue,Oe+=Ue,Oe>=90))break}const Le=(n==null?void 0:n.transitions)||[],Me=(_||[]).map(ke=>({id:ke.id,type:"sticker",stickerId:ke.stickerId,sticker:ke.sticker,x:ke.x,y:ke.y,scale:ke.scale,rotation:ke.rotation,opacity:ke.opacity,startTime:ke.startTime??0,endTime:ke.endTime??Oe,textContent:ke.textContent,textColor:ke.textColor,fontSize:ke.fontSize}));je={clips:ge,transitions:Le.map((ke,Ue)=>({id:`transition-${Ue}`,type:ke.type,duration:ke.duration,fromClipIndex:Ue,toClipIndex:Ue+1})),overlays:Me,totalDuration:Oe}}else if((n==null?void 0:n.trimStart)!==void 0||(n==null?void 0:n.trimEnd)!==void 0){const ge=(n==null?void 0:n.trimStart)??0,Ne=(n==null?void 0:n.trimEnd)??(n==null?void 0:n.videoDuration)??0,Oe=(n==null?void 0:n.videoDuration)??0,Le=Math.min(Ne-ge,90),Me=(n==null?void 0:n.speed)??1,ke=(n==null?void 0:n.reverse)??!1,Ue=(_||[]).map(He=>({id:He.id,type:"sticker",stickerId:He.stickerId,sticker:He.sticker,x:He.x,y:He.y,scale:He.scale,rotation:He.rotation,opacity:He.opacity,startTime:He.startTime?He.startTime/1e3:0,endTime:He.endTime?He.endTime/1e3:Le,textContent:He.textContent,textColor:He.textColor,fontSize:He.fontSize}));je={clips:[{id:`clip-${Date.now()}`,mediaUrl:c,type:"video",startTime:0,duration:Le,trimStart:ge,trimEnd:Ne,speed:Me,reverse:ke,originalDuration:Oe}],transitions:[],overlays:Ue,voiceoverUrl:n==null?void 0:n.voiceoverUrl,greenScreen:n!=null&&n.greenScreenEnabled?{enabled:!0,backgroundUrl:n==null?void 0:n.greenScreenBackgroundUrl}:void 0,totalDuration:Le}}}let at=c;if(c&&c.startsWith("blob:")){console.log("Converting blob URL to data URL before upload...");try{const ge=await(await fetch(c)).blob(),Ne=new FileReader,Oe=await new Promise((Le,Me)=>{Ne.onloadend=()=>Le(Ne.result),Ne.onerror=Me,Ne.readAsDataURL(ge)});at=Oe,console.log(" Converted blob URL to data URL",{originalSize:ge.size,dataUrlSize:Oe.length,isDataUrl:Oe.startsWith("data:")})}catch(ne){console.error(" Failed to convert blob URL to data URL:",ne)}}const ut=await yc(e.id,e.handle,a.trim(),o.trim(),at||void 0,u||void 0,h.trim()||void 0,at?a.trim():void 0,e.local,e.regional,e.national,_.length>0?_:void 0,(n==null?void 0:n.templateId)||void 0,(n==null?void 0:n.templateMediaItems)||(n==null?void 0:n.mediaItems)||void 0,y.trim()||void 0,void 0,M.length>0?M:void 0,void 0,void 0,void 0,void 0,je,(n==null?void 0:n.musicTrackId)||(j==null?void 0:j.id)),gt=ut.renderJobId||ut.render_job_id;let Ct=c;if(!Ct&&(je!=null&&je.clips)&&je.clips.length>0&&(Ct=je.clips[0].mediaUrl||je.clips[0].url),console.log("=== POST CREATED EVENT DEBUG ==="),console.log("renderJobId:",gt),console.log("postId:",ut.id),console.log("videoUrl:",Ct),console.log("selectedMedia:",c),console.log("hasEditTimeline:",!!je),console.log("clipsCount:",((he=je==null?void 0:je.clips)==null?void 0:he.length)||0),console.log("newPost object:",ut),gt){const ne={postId:ut.id,renderJobId:gt,videoUrl:Ct||c||""};console.log("Dispatching postCreated event with detail:",ne),window.dispatchEvent(new CustomEvent("postCreated",{detail:ne})),console.log(" postCreated event dispatched successfully")}else console.warn(" No renderJobId found, PiP will not show"),console.warn("newPost keys:",Object.keys(ut)),console.warn("newPost renderJobId:",ut.renderJobId),console.warn("newPost render_job_id:",ut.render_job_id);zt("Post created successfully!"),w?(C(ut),t("/boost",{state:{newPost:ut,showBoostModal:!0}})):(i(""),l(""),d(null),f(null),g(""),p(""),W([]),G([]),O(null),t("/feed"))}catch(je){console.error("Error creating post:",je),zt("Failed to create post. Please try again.")}finally{x(!1)}},[a,c,e,o,u,h,_,y,w,t]),st=D.useCallback(()=>{c&&c.startsWith("blob:")&&URL.revokeObjectURL(c),d(null),f(null),g(""),W([]),ie(null),De.current&&(De.current.value="")},[c]),Ye=D.useCallback(L=>{const he={id:`sticker-${Date.now()}-${Math.random()}`,stickerId:L.id,sticker:L,x:50,y:50,scale:1,rotation:0,opacity:1};W(je=>[...je,he]),ie(he.id)},[]),Bt=D.useCallback((L,he,je)=>{const at={id:`text-sticker-${Date.now()}`,name:L,category:"Text",emoji:void 0,url:void 0,isTrending:!1},ut={id:`sticker-${Date.now()}-${Math.random()}`,stickerId:at.id,sticker:at,x:50,y:50,scale:he==="small"?.8:he==="medium"?1:1.2,rotation:0,opacity:1};ut.textContent=L,ut.textColor=je,ut.fontSize=he,W(gt=>[...gt,ut]),ie(ut.id)},[]),we=D.useCallback((L,he)=>{W(je=>je.map(at=>at.id===L?he:at))},[]),tt=D.useCallback(L=>{W(he=>he.filter(je=>je.id!==L)),q===L&&ie(null)},[q]),Je=D.useMemo(()=>(a.trim().length>0||c!==null)&&!S&&!X,[a,c,S,X]),Ze=D.useMemo(()=>{let L="";return fe==="bw"?L="grayscale(1)":fe==="sepia"?L="sepia(0.8)":fe==="vivid"?L=`saturate(${1.6*F}) contrast(${1.1*Se})`:fe==="cool"?L=`hue-rotate(200deg) saturate(${1.2*F})`:fe==="warm"&&(L=`hue-rotate(-20deg) saturate(${1.1*F})`),_e!==1&&(L+=` brightness(${_e})`),Se!==1&&(L+=` contrast(${Se})`),F!==1&&fe!=="vivid"&&fe!=="cool"&&fe!=="warm"&&(L+=` saturate(${F})`),Z!==0&&(L+=` hue-rotate(${Z}deg)`),L?{filter:L}:{}},[fe,_e,Se,F,Z]),ot=D.useMemo(()=>{var je;if(!((je=n==null?void 0:n.filterInfo)!=null&&je.exportFailed))return Ze;const L=n.filterInfo;if(!L)return Ze;let he="";return L.active==="bw"?he="grayscale(1)":L.active==="sepia"?he="sepia(0.8)":L.active==="vivid"?he=`saturate(${1.6*L.saturation}) contrast(${1.1*L.contrast})`:L.active==="cool"&&(he=`hue-rotate(200deg) saturate(${1.2*L.saturation})`),L.brightness!==1&&(he+=` brightness(${L.brightness})`),L.contrast!==1&&(he+=` contrast(${L.contrast})`),L.saturation!==1&&(he+=` saturate(${L.saturation})`),he?{filter:he}:Ze},[n==null?void 0:n.filterInfo,Ze]);return s.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-950 transition-colors duration-200",children:[s.jsx("div",{className:"sticky top-0 z-40 bg-white/95 dark:bg-gray-950/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 shadow-sm",children:s.jsxs("div",{className:"mx-auto max-w-md px-3 h-14 flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("button",{onClick:()=>t("/feed"),className:"p-2 -ml-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-all duration-200 active:scale-95","aria-label":"Go to Home Feed",title:"Home",children:s.jsx(Gd,{className:"w-5 h-5"})})}),s.jsx("h1",{className:"font-semibold text-base text-gray-900 dark:text-gray-100",children:"New Post"}),s.jsx("button",{onClick:Nt,disabled:!Je,className:`px-4 py-2 text-sm font-semibold rounded-full transition-all duration-200 ${Je?"bg-brand-500 text-white hover:bg-brand-600 active:scale-95 shadow-md hover:shadow-lg":"bg-gray-200 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed"}`,children:S?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(qk,{className:"w-4 h-4 animate-spin"}),"Posting..."]}):"Share"})]})}),s.jsxs("div",{className:"mx-auto max-w-md pb-24",children:[s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3.5 border-b border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50",children:[s.jsx(It,{src:e==null?void 0:e.avatarUrl,name:(e==null?void 0:e.name)||"User",size:"sm"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 truncate",children:(e==null?void 0:e.name)||"User"}),(e==null?void 0:e.handle)&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:["@",e.handle]})]})]}),s.jsxs("div",{className:"px-4 py-4 border-b border-gray-100 dark:border-gray-800",children:[s.jsx("textarea",{ref:pe,value:a,onChange:L=>i(L.target.value),placeholder:c?"Write a caption...":"What's on your mind?",className:"w-1/2 min-h-[60px] text-gray-900 dark:text-gray-100 bg-transparent border-none resize-none placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none text-[15px] leading-relaxed transition-all duration-200",maxLength:500,rows:2}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsxs("span",{className:`text-xs transition-colors duration-200 ${a.length>450?"text-red-500 dark:text-red-400":"text-gray-400 dark:text-gray-500"}`,children:[a.length,"/500"]})})]}),!c&&!X&&s.jsx("div",{className:"px-4 py-4 border-t border-gray-100 dark:border-gray-800 animate-in fade-in duration-300",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("label",{className:"flex flex-col items-center gap-2 p-4 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200 group border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-brand-400 dark:hover:border-brand-500",children:[s.jsx("input",{ref:De,type:"file",accept:"image/*,video/*",onChange:Jt,className:"hidden"}),s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 group-hover:from-brand-100 group-hover:to-brand-200 dark:group-hover:from-brand-900 dark:group-hover:to-brand-800 transition-all duration-200",children:s.jsx(Os,{className:"w-6 h-6 text-gray-600 dark:text-gray-400 group-hover:text-brand-600 dark:group-hover:text-brand-400 transition-colors"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Add Photo or Video"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Tap to select"})]})]}),s.jsxs("button",{onClick:()=>t("/templates"),className:"flex flex-col items-center gap-2 p-4 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200 group border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-brand-400 dark:hover:border-brand-500","aria-label":"Templates",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 group-hover:from-brand-100 group-hover:to-brand-200 dark:group-hover:from-brand-900 dark:group-hover:to-brand-800 transition-all duration-200",children:s.jsx(Kd,{className:"w-6 h-6 text-gray-600 dark:text-gray-400 group-hover:text-brand-600 dark:group-hover:text-brand-400 transition-colors"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Templates"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Use a template"})]})]})]})}),s.jsx("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-gray-100 mb-1.5",children:"Add Banner"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Add a scrolling news ticker banner to your post"}),s.jsx("input",{type:"text",value:y,onChange:L=>p(L.target.value),placeholder:"Enter banner text (e.g., Breaking news headline...)",maxLength:200,className:"w-full px-4 py-2.5 text-sm border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all duration-200 shadow-sm"}),s.jsxs("div",{className:"flex items-center justify-between mt-2.5",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"News ticker banner"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:`text-xs transition-colors duration-200 ${y.length>180?"text-red-500 dark:text-red-400":"text-gray-400 dark:text-gray-500"}`,children:[y.length,"/200"]}),y&&s.jsx("button",{type:"button",onClick:()=>p(""),className:"text-xs font-medium text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 transition-colors duration-200 px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20",children:"Clear"})]})]})]})}),X&&s.jsxs("div",{className:"px-4 py-8 flex flex-col items-center justify-center border-t border-gray-100 dark:border-gray-800",children:[s.jsx(qk,{className:"w-8 h-8 text-brand-500 animate-spin mb-3"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Processing media..."})]}),c&&!X&&s.jsx("div",{className:"border-t border-gray-100 dark:border-gray-800 animate-in fade-in slide-in-from-bottom-4 duration-300",children:s.jsxs("div",{ref:se,className:"relative bg-black overflow-hidden",onClick:L=>{(L.target===L.currentTarget||L.target.tagName==="VIDEO"||L.target.tagName==="IMG")&&ie(null)},children:[v&&s.jsx("span",{className:"absolute top-3 left-3 z-10 px-2.5 py-1 rounded-full text-[10px] font-semibold bg-purple-600 text-white shadow-lg backdrop-blur-sm",children:"Filtered"}),u==="image"?s.jsxs("div",{className:"relative w-full aspect-square overflow-hidden bg-black",children:[s.jsx("img",{src:c,alt:"Selected",className:"w-full h-full object-contain transition-opacity duration-300",loading:"eager",style:Ze}),_.map(L=>s.jsx(Oa,{overlay:L,onUpdate:he=>we(L.id,he),onRemove:()=>tt(L.id),isSelected:q===L.id,onSelect:()=>ie(L.id),containerWidth:K.width||400,containerHeight:K.height||256},L.id)),h&&s.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-10",children:s.jsx("div",{className:"bg-black/70 text-white px-3 py-2 rounded-lg text-sm font-medium backdrop-blur-sm",children:h})})]}):u==="video"?s.jsxs("div",{className:"relative w-full aspect-square overflow-hidden bg-black",style:{position:"relative",minHeight:"400px"},children:[s.jsx("video",{ref:Ve,src:c,controls:!0,playsInline:!0,className:"w-full h-full transition-opacity duration-300",preload:"auto",onLoadedMetadata:L=>{const he=L.currentTarget.duration||0;if(console.log("Video metadata loaded",{videoWidth:L.currentTarget.videoWidth,videoHeight:L.currentTarget.videoHeight,duration:he,readyState:L.currentTarget.readyState,clientWidth:L.currentTarget.clientWidth,clientHeight:L.currentTarget.clientHeight}),he>r){zt(`Videos must be ${r} seconds or less. Please trim your video before uploading.`),st();return}const je=L.currentTarget;je.style.display="block",je.style.visibility="visible",je.style.opacity="1",je.offsetHeight,je.style.transform="translateZ(0)"},onLoadedData:L=>{console.log("Video data loaded",L.currentTarget.readyState);const he=L.currentTarget;he.style.display="block",he.style.visibility="visible"},onCanPlay:L=>{console.log("Video can play",L.currentTarget.readyState);const he=L.currentTarget;he.style.display="block",he.style.visibility="visible"},onError:L=>{console.error("Video error:",L.currentTarget.error)},onLoadStart:()=>{console.log("Video load started")},style:{...ot.filter?ot:Ze,objectFit:"contain",width:"100%",height:"100%",minWidth:"100%",minHeight:"100%",display:"block",visibility:"visible",opacity:"1",backgroundColor:"transparent",position:"relative",zIndex:1}}),_.map(L=>s.jsx(Oa,{overlay:L,onUpdate:he=>we(L.id,he),onRemove:()=>tt(L.id),isSelected:q===L.id,onSelect:()=>ie(L.id),containerWidth:K.width||400,containerHeight:K.height||256},L.id))]}):null,s.jsx("button",{onClick:st,className:"absolute top-4 right-4 p-2.5 bg-black/70 backdrop-blur-md text-white rounded-full hover:bg-black/90 transition-all duration-200 shadow-xl hover:shadow-2xl hover:scale-110 active:scale-95 z-10 border border-white/20","aria-label":"Remove media",children:s.jsx(pt,{className:"w-4 h-4"})})]})}),c&&u==="image"&&s.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50",children:[s.jsx("input",{type:"text",value:h,onChange:L=>g(L.target.value),placeholder:"Add text to image...",className:"w-full px-4 py-2.5 text-sm text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-transparent placeholder-gray-400 dark:placeholder-gray-500 transition-all duration-200 shadow-sm",maxLength:100}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Text overlay"}),s.jsxs("span",{className:`text-xs transition-colors duration-200 ${h.length>90?"text-red-500 dark:text-red-400":"text-gray-400 dark:text-gray-500"}`,children:[h.length,"/100"]})]})]}),j&&s.jsx("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-brand-100 dark:bg-brand-900/30",children:s.jsx(As,{className:"w-4 h-4 text-brand-600 dark:text-brand-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:j.title}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[j.artist||"Unknown Artist",j.license_requires_attribution&&s.jsxs("span",{className:"ml-2 text-gray-400",children:["(",j.license_type,")"]})]})]})]}),s.jsx("button",{onClick:()=>O(null),className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors",children:s.jsx(pt,{className:"w-4 h-4 text-gray-500"})})]})}),s.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-800",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ln,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),s.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Location"})]}),s.jsx("input",{type:"text",value:o,onChange:L=>l(L.target.value),placeholder:"Add location",className:"w-full px-0 py-1.5 text-[15px] text-gray-900 dark:text-gray-100 bg-transparent border-none focus:outline-none placeholder-gray-400 dark:placeholder-gray-500 transition-colors duration-200"})]}),s.jsx("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-800",children:s.jsxs("button",{type:"button",onClick:()=>re(!0),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-200",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800",children:s.jsx(xc,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Tag People"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.length>0?`${M.length} ${M.length===1?"person":"people"} tagged`:"Tag someone in your post"})]}),M.length>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[M.slice(0,2).map(L=>s.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-500 text-white text-xs flex items-center justify-center font-semibold",children:L.charAt(0).toUpperCase()},L)),M.length>2&&s.jsxs("div",{className:"w-6 h-6 rounded-full bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs flex items-center justify-center font-semibold",children:["+",M.length-2]})]})]})}),s.jsx("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-800",children:s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-200",children:[s.jsx("input",{type:"checkbox",checked:w,onChange:L=>N(L.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-brand-600 focus:ring-brand-500 focus:ring-2 transition-all duration-200 cursor-pointer"}),s.jsxs("div",{className:"flex items-center gap-2.5 flex-1",children:[s.jsx("div",{className:`p-2 rounded-lg transition-all duration-200 ${w?"bg-brand-100 dark:bg-brand-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:s.jsx(Ca,{className:`w-4 h-4 transition-colors duration-200 ${w?"text-brand-600 dark:text-brand-400":"text-gray-400 dark:text-gray-500"}`})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Boost this post"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Reach more people"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Starting at 4.99"})]})]})]})})]}),c&&s.jsxs("div",{children:[s.jsx(gp,{isOpen:T,onClose:()=>E(!1),onSelectSticker:Ye,onAddText:()=>H(!0)}),s.jsx(Z4,{isOpen:B,onClose:()=>H(!1),onConfirm:(L,he,je)=>{Bt(L,he,je),H(!1)}})]}),s.jsx(xp,{isOpen:ve,onClose:()=>re(!1),onSelectUser:(L,he)=>{M.includes(L)||G([...M,L])},taggedUsers:M}),s.jsx(WV,{isOpen:P,onClose:()=>Y(!1),onSelectTrack:L=>{O(L),L&&zt(`Selected: ${L.title} by ${L.artist||"Unknown"}`)},selectedTrackId:j==null?void 0:j.id}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-gray-900 dark:bg-gray-950 border-t border-gray-800 dark:border-gray-700 shadow-lg",children:s.jsxs("div",{className:"mx-auto max-w-md h-16 flex items-center justify-around px-4",children:[s.jsxs("button",{onClick:()=>{c?J(!0):zt("Please select media first to apply filters")},className:"flex items-center gap-1.5 px-4 py-2 rounded-full bg-gray-800 dark:bg-gray-800 text-white border border-gray-700 dark:border-gray-700 hover:bg-gray-700 dark:hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm font-medium shadow-sm","aria-label":"Filters",children:[s.jsx(_l,{className:"w-4 h-4"}),s.jsx("span",{children:"Filters"})]}),s.jsxs("button",{onClick:()=>{c?E(!0):zt("Please select media first to add stickers")},className:"flex items-center gap-1.5 px-4 py-2 rounded-full bg-gray-800 dark:bg-gray-800 text-white border border-gray-700 dark:border-gray-700 hover:bg-gray-700 dark:hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm font-medium shadow-sm","aria-label":"Stickers",children:[s.jsx(Xl,{className:"w-4 h-4"}),s.jsx("span",{children:"Stickers"})]}),s.jsxs("button",{onClick:()=>{c&&u==="video"?Y(!0):zt("Please select a video first to add music")},className:`flex items-center gap-1.5 px-4 py-2 rounded-full border transition-all duration-200 active:scale-95 text-sm font-medium shadow-sm ${j?"bg-brand-500 border-brand-500 text-white hover:bg-brand-600":"bg-gray-800 dark:bg-gray-800 text-white border-gray-700 dark:border-gray-700 hover:bg-gray-700 dark:hover:bg-gray-700"}`,"aria-label":"Add Music",children:[s.jsx(As,{className:"w-4 h-4"}),s.jsx("span",{children:"Music"})]}),s.jsxs("button",{onClick:()=>{t("/create/text-only")},className:"flex items-center gap-1.5 px-4 py-2 rounded-full bg-gray-800 dark:bg-gray-800 text-white border border-gray-700 dark:border-gray-700 hover:bg-gray-700 dark:hover:bg-gray-700 transition-all duration-200 active:scale-95 text-sm font-medium shadow-sm","aria-label":"Text Post",children:[s.jsx(gc,{className:"w-4 h-4"}),s.jsx("span",{children:"Text"})]})]})}),z&&c&&s.jsxs("div",{className:"fixed inset-0 z-50 bg-black/20 backdrop-blur-sm flex flex-col animate-in fade-in duration-200",children:[s.jsx("div",{className:"flex-shrink-0 px-4 pt-4 pb-3 border-b border-white/10 bg-black/30 backdrop-blur-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Filters"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>ue(!U),className:"p-2 rounded-full hover:bg-gray-800 transition-colors","aria-label":"Toggle Adjustments",title:"Adjustments",children:s.jsx(_l,{className:`w-5 h-5 text-gray-400 transition-transform ${U?"text-brand-400 rotate-90":""}`})}),s.jsx("button",{onClick:()=>J(!1),className:"p-2 rounded-full hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6 text-gray-400"})})]})]})}),s.jsxs("div",{className:"flex-1 relative overflow-hidden min-h-0",children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black",children:s.jsx("div",{className:"relative w-full h-full max-w-full max-h-full",children:u==="image"?s.jsx("img",{src:c,alt:"Filter preview",className:"w-full h-full object-contain",style:Ze}):s.jsx("video",{src:c,className:"w-full h-full",style:{...Ze,objectFit:"contain",width:"100%",height:"100%",display:"block"},playsInline:!0,muted:!0,loop:!0,autoPlay:!0})})}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 z-10 px-4",children:s.jsx("div",{className:"p-2",children:s.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1",children:[{id:"none",name:"None"},{id:"bw",name:"B&W"},{id:"sepia",name:"Sepia"},{id:"vivid",name:"Vivid"},{id:"cool",name:"Cool"},{id:"warm",name:"Warm"}].map(L=>s.jsxs("button",{onClick:()=>Ae(L.id),className:`flex flex-col items-center justify-center gap-1 px-2 py-1.5 transition-all flex-shrink-0 ${fe===L.id?"scale-110":""}`,children:[s.jsxs("div",{className:`w-12 h-12 rounded-full flex items-center justify-center transition-all ${fe===L.id?"bg-brand-500 border-2 border-white/50 shadow-lg":"bg-white/10 border border-white/20 hover:bg-white/20"}`,children:[L.id==="none"&&s.jsx(gE,{className:"w-4 h-4 text-white"}),L.id==="bw"&&s.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-br from-white to-gray-400"}),L.id==="sepia"&&s.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-br from-amber-200 to-amber-800"}),L.id==="vivid"&&s.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-br from-pink-400 via-purple-500 to-blue-500"}),L.id==="cool"&&s.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-br from-cyan-300 to-blue-600"}),L.id==="warm"&&s.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-br from-orange-300 to-red-500"})]}),s.jsx("span",{className:"text-[10px] font-medium whitespace-nowrap text-white/80",children:L.name})]},L.id))})})}),U&&s.jsx("div",{className:"absolute bottom-20 left-0 right-0 z-10 px-4",children:s.jsx("div",{className:"bg-black/70 backdrop-blur-lg rounded-2xl p-4 border border-white/20 max-h-[200px] overflow-y-auto",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("label",{className:"text-xs text-white font-medium",children:"Brightness"}),s.jsxs("span",{className:"text-xs text-white/80 bg-black/50 px-2 py-0.5 rounded",children:[Math.round(_e*100),"%"]})]}),s.jsx("input",{type:"range",min:"0.5",max:"1.5",step:"0.01",value:_e,onChange:L=>Re(parseFloat(L.target.value)),className:"w-full h-1.5 bg-white/20 rounded-lg appearance-none cursor-pointer accent-brand-500"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("label",{className:"text-xs text-white font-medium",children:"Contrast"}),s.jsxs("span",{className:"text-xs text-white/80 bg-black/50 px-2 py-0.5 rounded",children:[Math.round(Se*100),"%"]})]}),s.jsx("input",{type:"range",min:"0.5",max:"1.5",step:"0.01",value:Se,onChange:L=>de(parseFloat(L.target.value)),className:"w-full h-1.5 bg-white/20 rounded-lg appearance-none cursor-pointer accent-brand-500"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("label",{className:"text-xs text-white font-medium",children:"Saturation"}),s.jsxs("span",{className:"text-xs text-white/80 bg-black/50 px-2 py-0.5 rounded",children:[Math.round(F*100),"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"2",step:"0.01",value:F,onChange:L=>$(parseFloat(L.target.value)),className:"w-full h-1.5 bg-white/20 rounded-lg appearance-none cursor-pointer accent-brand-500"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("label",{className:"text-xs text-white font-medium",children:"Hue"}),s.jsxs("span",{className:"text-xs text-white/80 bg-black/50 px-2 py-0.5 rounded",children:[Math.round(Z),""]})]}),s.jsx("input",{type:"range",min:"-180",max:"180",step:"1",value:Z,onChange:L=>Pe(parseInt(L.target.value)),className:"w-full h-1.5 bg-white/20 rounded-lg appearance-none cursor-pointer accent-brand-500"})]})]})})})]}),s.jsxs("div",{className:"flex-shrink-0 px-4 py-4 border-t border-white/10 bg-black/30 backdrop-blur-md flex gap-3",children:[s.jsx("button",{onClick:()=>{Ae("none"),Re(1),de(1),$(1),Pe(0)},className:"flex-1 px-4 py-3 rounded-xl bg-white/10 font-semibold hover:bg-white/20 transition-colors backdrop-blur-sm border border-white/20",style:{backgroundImage:"linear-gradient(90deg, #87ceeb, #ffb6c1, #87cefa, #c084fc, #34d399, #f59e0b, #ef4444, #dc2626, #fca5a5, #60a5fa, #fb7185, #87ceeb)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:"shimmer 6s linear infinite"},children:"Reset"}),s.jsx("button",{onClick:()=>J(!1),className:"flex-1 px-4 py-3 rounded-xl bg-brand-500/80 font-semibold hover:bg-brand-500 transition-colors backdrop-blur-sm border border-white/20",style:{backgroundImage:"linear-gradient(90deg, #87ceeb, #ffb6c1, #87cefa, #c084fc, #34d399, #f59e0b, #ef4444, #dc2626, #fca5a5, #60a5fa, #fb7185, #87ceeb)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:"shimmer 6s linear infinite"},children:"Done"})]})]})]})}const lu="your_google_maps_api_key_here";async function e_(e){const t=KV(e);if(t.length>0)return t;try{const n=await fetch("https://places.googleapis.com/v1/places:searchText",{method:"POST",headers:{"Content-Type":"application/json","X-Goog-Api-Key":lu,"X-Goog-FieldMask":"places.displayName,places.id,places.types,places.formattedAddress"},body:JSON.stringify({textQuery:`administrative areas in ${e}`,maxResultCount:50,includedType:"administrative_area_level_1",languageCode:"en"})});if(!n.ok)return console.warn(`Google Maps API error for ${e}: ${n.status}`),[];const r=await n.json();if(r.places&&Array.isArray(r.places)){const a=r.places.map(i=>{var o;return{name:((o=i.displayName)==null?void 0:o.text)||i.formattedAddress||"",placeId:i.id,types:i.types}}).filter(i=>i.name);return a.length>0?a:[]}return[]}catch(n){console.error(`Error fetching regions from Google Maps API for ${e}:`,n);try{const r=n_(e);if(!r)return[];const a=await fetch(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(e)}&types=(regions)&components=country:${r}&key=${lu}`);if(a.ok){const i=await a.json();if(i.predictions&&Array.isArray(i.predictions))return i.predictions.map(o=>({name:o.description.split(",")[0],placeId:o.place_id})).filter(o=>o.name)}}catch(r){console.error("Fallback API also failed:",r)}return[]}}async function t_(e,t){console.log(`[fetchCitiesForRegion] Called with region: "${e}", country: "${t}"`),console.log(`[fetchCitiesForRegion] Region name type: ${typeof e}, length: ${e==null?void 0:e.length}, trimmed: "${e==null?void 0:e.trim()}"`);const n=YV(e);if(console.log(`[fetchCitiesForRegion] Fallback local areas found: ${n.length} for region: "${e}"`),n.length>0)return console.log(`[fetchCitiesForRegion]  SUCCESS: Using ${n.length} fallback local areas:`,n.slice(0,5).map(r=>r.name)),n;console.warn(`[fetchCitiesForRegion]  WARNING: No fallback data found for region: "${e}"`);try{const r=await fetch("https://places.googleapis.com/v1/places:searchText",{method:"POST",headers:{"Content-Type":"application/json","X-Goog-Api-Key":lu,"X-Goog-FieldMask":"places.displayName,places.id,places.types,places.formattedAddress"},body:JSON.stringify({textQuery:`local areas neighborhoods districts in ${e}, ${t}`,maxResultCount:50,includedType:"sublocality",languageCode:"en"})});if(!r.ok)return console.warn(`Google Maps API error for ${e}, ${t}: ${r.status}`),await _f(e,t);const a=await r.json();if(a.places&&Array.isArray(a.places)){const i=a.places.map(o=>{var l;return{name:((l=o.displayName)==null?void 0:l.text)||o.formattedAddress||"",placeId:o.id,types:o.types}}).filter(o=>o.name);return i.length>0?i:await _f(e,t)}return await _f(e,t)}catch(r){return console.error(`Error fetching local areas from Google Maps API for ${e}, ${t}:`,r),await _f(e,t)}}async function _f(e,t){try{const n=n_(t);if(!n)return[];const r=await fetch(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(e)}&types=(sublocality)&components=country:${n}&key=${lu}`);if(!r.ok){const i=await fetch(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${encodeURIComponent(e)}&types=(cities)&components=country:${n}&key=${lu}`);if(!i.ok)return[];const o=await i.json();return o.predictions&&Array.isArray(o.predictions)?o.predictions.map(l=>({name:l.description.split(",")[0],placeId:l.place_id})).filter(l=>l.name):[]}const a=await r.json();return a.predictions&&Array.isArray(a.predictions)?a.predictions.map(o=>({name:o.description.split(",")[0],placeId:o.place_id})).filter(o=>o.name):[]}catch(n){return console.error("Fallback API also failed:",n),[]}}function n_(e){return{Ireland:"ie","Northern Ireland":"gb",UK:"gb",Germany:"de",France:"fr",Spain:"es",Italy:"it",Netherlands:"nl",Belgium:"be",Switzerland:"ch",Austria:"at",Poland:"pl",Portugal:"pt",Greece:"gr",Sweden:"se",Norway:"no",Denmark:"dk",Finland:"fi","Czech Republic":"cz",Romania:"ro",Hungary:"hu",Bulgaria:"bg",Croatia:"hr",Serbia:"rs",Slovakia:"sk",Slovenia:"si",Lithuania:"lt",Latvia:"lv",Estonia:"ee",Luxembourg:"lu",Malta:"mt",Cyprus:"cy",Iceland:"is",Ukraine:"ua",Belarus:"by",Moldova:"md",Albania:"al","North Macedonia":"mk","Bosnia and Herzegovina":"ba",Montenegro:"me",Kosovo:"xk",Monaco:"mc",Liechtenstein:"li",Andorra:"ad","San Marino":"sm","Vatican City":"va",Turkey:"tr",USA:"us",Canada:"ca",Mexico:"mx",Brazil:"br",Argentina:"ar",Chile:"cl",Colombia:"co",Peru:"pe",Venezuela:"ve",Ecuador:"ec",Guatemala:"gt",Cuba:"cu",Haiti:"ht","Dominican Republic":"do",Honduras:"hn","El Salvador":"sv",Nicaragua:"ni","Costa Rica":"cr",Panama:"pa",Uruguay:"uy",Paraguay:"py",Bolivia:"bo",Jamaica:"jm","Trinidad and Tobago":"tt",Bahamas:"bs",Barbados:"bb",Belize:"bz",Guyana:"gy",Suriname:"sr","French Guiana":"gf","Saint Lucia":"lc","Antigua and Barbuda":"ag","Saint Vincent and the Grenadines":"vc",Grenada:"gd","Saint Kitts and Nevis":"kn",Dominica:"dm",Aruba:"aw",Curaao:"cw",Bonaire:"bq","Sint Maarten":"sx","Sint Eustatius":"bq",Saba:"bq",Bermuda:"bm","Cayman Islands":"ky","British Virgin Islands":"vg","US Virgin Islands":"vi",Anguilla:"ai",Montserrat:"ms","Turks and Caicos Islands":"tc",Greenland:"gl","Saint Pierre and Miquelon":"pm",China:"cn",India:"in",Japan:"jp",Russia:"ru",Indonesia:"id",Pakistan:"pk",Bangladesh:"bd",Philippines:"ph",Vietnam:"vn",Thailand:"th",Myanmar:"mm","South Korea":"kr","North Korea":"kp",Malaysia:"my",Afghanistan:"af",Iraq:"iq","Saudi Arabia":"sa",Uzbekistan:"uz",Yemen:"ye",Nepal:"np","Sri Lanka":"lk",Kazakhstan:"kz",Cambodia:"kh",Jordan:"jo",Azerbaijan:"az","United Arab Emirates":"ae",Tajikistan:"tj",Israel:"il",Laos:"la",Lebanon:"lb",Kyrgyzstan:"kg",Turkmenistan:"tm",Singapore:"sg",Oman:"om",Palestine:"ps",Kuwait:"kw",Georgia:"ge",Mongolia:"mn",Armenia:"am",Qatar:"qa",Bahrain:"bh","Timor-Leste":"tl",Bhutan:"bt",Maldives:"mv",Brunei:"bn",Iran:"ir",Syria:"sy",Turkey:"tr",Nigeria:"ng",Ethiopia:"et",Egypt:"eg","South Africa":"za",Kenya:"ke",Uganda:"ug",Tanzania:"tz",Algeria:"dz",Sudan:"sd",Morocco:"ma",Angola:"ao",Mozambique:"mz",Ghana:"gh",Madagascar:"mg",Cameroon:"cm","Ivory Coast":"ci",Niger:"ne","Burkina Faso":"bf",Mali:"ml",Malawi:"mw",Zambia:"zm",Senegal:"sn",Chad:"td",Somalia:"so",Zimbabwe:"zw",Guinea:"gn",Rwanda:"rw",Benin:"bj",Tunisia:"tn",Burundi:"bi","South Sudan":"ss",Togo:"tg","Sierra Leone":"sl",Libya:"ly",Eritrea:"er","Central African Republic":"cf",Liberia:"lr",Mauritania:"mr",Namibia:"na",Botswana:"bw",Gambia:"gm",Gabon:"ga",Lesotho:"ls","Guinea-Bissau":"gw","Equatorial Guinea":"gq",Mauritius:"mu",Eswatini:"sz",Djibouti:"dj",Comoros:"km","Cape Verde":"cv","So Tom and Prncipe":"st",Seychelles:"sc",Australia:"au","New Zealand":"nz","Papua New Guinea":"pg",Fiji:"fj","Solomon Islands":"sb",Vanuatu:"vu","New Caledonia":"nc","French Polynesia":"pf",Samoa:"ws",Guam:"gu",Kiribati:"ki",Micronesia:"fm",Tonga:"to","Marshall Islands":"mh",Palau:"pw","American Samoa":"as","Northern Mariana Islands":"mp","Cook Islands":"ck",Tuvalu:"tv","Wallis and Futuna":"wf",Nauru:"nr",Niue:"nu",Tokelau:"tk","Pitcairn Islands":"pn"}[e]||""}function KV(e){return({USA:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],Ireland:["Dublin","Cork","Galway","Limerick","Waterford","Kilkenny","Sligo","Donegal","Kerry","Mayo","Clare","Tipperary","Wexford","Wicklow","Meath","Louth","Kildare","Carlow","Laois","Offaly","Westmeath","Longford","Roscommon","Leitrim","Cavan","Monaghan"],"Northern Ireland":["Antrim","Armagh","Down","Fermanagh","Londonderry","Tyrone"],UK:["England","Scotland","Wales","Northern Ireland"],Canada:["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon"],Australia:["New South Wales","Victoria","Queensland","Western Australia","South Australia","Tasmania","Northern Territory","Australian Capital Territory"],"New Zealand":["Auckland","Bay of Plenty","Canterbury","Gisborne","Hawke's Bay","Manawatu-Wanganui","Marlborough","Nelson","Northland","Otago","Southland","Taranaki","Tasman","Waikato","Wellington","West Coast"],Germany:["Baden-Wrttemberg","Bavaria","Berlin","Brandenburg","Bremen","Hamburg","Hesse","Lower Saxony","Mecklenburg-Vorpommern","North Rhine-Westphalia","Rhineland-Palatinate","Saarland","Saxony","Saxony-Anhalt","Schleswig-Holstein","Thuringia"],France:["le-de-France","Auvergne-Rhne-Alpes","Provence-Alpes-Cte d'Azur","Nouvelle-Aquitaine","Occitanie","Hauts-de-France","Grand Est","Pays de la Loire","Normandy","Brittany","Bourgogne-Franche-Comt","Centre-Val de Loire","Corsica"],Spain:["Andalusia","Aragon","Asturias","Balearic Islands","Basque Country","Canary Islands","Cantabria","Castile and Len","Castile-La Mancha","Catalonia","Extremadura","Galicia","La Rioja","Madrid","Murcia","Navarre","Valencia"],Italy:["Lombardy","Lazio","Campania","Sicily","Veneto","Emilia-Romagna","Piedmont","Puglia","Tuscany","Calabria","Sardinia","Liguria","Marche","Abruzzo","Umbria","Friuli-Venezia Giulia","Trentino-Alto Adige","Basilicata","Molise","Aosta Valley"],Russia:["Moscow","Saint Petersburg","Novosibirsk","Yekaterinburg","Kazan","Nizhny Novgorod","Chelyabinsk","Samara","Omsk","Rostov-on-Don","Ufa","Krasnoyarsk","Voronezh","Perm","Volgograd","Krasnodar","Saratov","Tyumen","Tolyatti","Izhevsk","Barnaul","Ulyanovsk","Irkutsk","Khabarovsk","Yaroslavl","Vladivostok","Makhachkala","Tomsk","Orenburg","Kemerovo","Novokuznetsk","Ryazan","Naberezhnye Chelny","Astrakhan","Penza","Lipetsk","Kirov","Cheboksary","Kaliningrad","Tula","Kursk","Sochi","Stavropol","Ulan-Ude","Tver","Magnitogorsk","Ivanovo","Bryansk","Surgut","Belgorod","Vladimir","Arkhangelsk","Kaluga","Chita","Smolensk","Volzhsky","Kurgan","Cherepovets","Vologda","Saransk","Tambov","Yoshkar-Ola","Oryol","Kostroma","Petrozavodsk","Nizhnevartovsk","Novorossiysk","Nizhnekamsk","Dzerzhinsk","Shakhty","Bratsk","Nalchik","Orsk","Syktyvkar","Nizhny Tagil","Sterlitamak","Angarsk","Novocherkassk","Blagoveshchensk","Stary Oskol","Veliky Novgorod","Korolyov","Pskov","Biysk","Prokopyevsk","Yuzhno-Sakhalinsk","Balakovo","Armavir","Rybinsk","Severodvinsk","Abakan","Norilsk","Rubtsovsk","Petropavlovsk-Kamchatsky","Syzran","Novomoskovsk","Kamensk-Uralsky","Zlatoust","Essentuki","Volgodonsk","Ussuriysk","Salavat","Miass","Obninsk","Nakhodka","Khasavyurt","Kislovodsk","Dimitrovgrad","Neftekamsk","Nefteyugansk","Kaspiysk","Novotroitsk","Cherkessk","Derbent","Kyzyl","Elista","Magas","Grozny","Nazran","Maykop","Cherkessk","Yakutsk","Vladikavkaz","Makhachkala","Nalchik","Elista","Gorno-Altaysk","Abakan","Kyzyl","Ulan-Ude","Chita","Blagoveshchensk","Yakutsk","Magadan","Petropavlovsk-Kamchatsky","Anadyr","Murmansk","Arkhangelsk","Syktyvkar","Naryan-Mar","Salekhard","Khanty-Mansiysk","Tyumen","Omsk","Novosibirsk","Krasnoyarsk","Irkutsk","Yakutsk","Vladivostok","Khabarovsk","Blagoveshchensk","Chita","Ulan-Ude","Kyzyl","Abakan","Gorno-Altaysk","Barnaul","Kemerovo","Novokuznetsk","Tomsk","Omsk","Novosibirsk","Krasnoyarsk","Achinsk","Kansk","Zelenogorsk","Zheleznogorsk","Lesosibirsk","Minusinsk","Norilsk","Sayansk","Sosnovoborsk","Uzhur","Sharypovo","Divnogorsk","Borodino","Kodinsk","Bogotol","Uyar","Nazarovo","Shushenskoye","Krasnoturansk","Kuragino","Partizansk","Artem","Ussuriysk","Nakhodka","Spassk-Dalny","Lesozavodsk","Dalnerechensk","Dalnegorsk","Kavalerovo","Luchegorsk","Pozharsky","Terney","Krasnoarmeysk","Anuchino","Yakovlevka","Chernigovka","Spassk","Mikhailovka","Kirovsky","Chuguyevka","Kirovskoye","Novokachalinsk","Slavyanka","Zarubino","Kraskino","Khasan","Barabash","Bezverkhovo","Vladimiro-Aleksandrovskoye","Preobrazheniye","Rudnaya Pristan","Terney","Plastun","Dalnegorsk","Kavalerovo","Luchegorsk","Pozharsky","Terney","Krasnoarmeysk","Anuchino","Yakovlevka","Chernigovka","Spassk","Mikhailovka","Kirovsky","Chuguyevka","Kirovskoye","Novokachalinsk","Slavyanka","Zarubino","Kraskino","Khasan","Barabash","Bezverkhovo","Vladimiro-Aleksandrovskoye","Preobrazheniye","Rudnaya Pristan"],Japan:["Tokyo","Osaka","Yokohama","Nagoya","Sapporo","Fukuoka","Kobe","Kawasaki","Kyoto","Saitama","Hiroshima","Sendai","Chiba","Kitakyushu","Setagaya","Sakai","Niigata","Hamamatsu","Shizuoka","Sagamihara","Okayama","Kumamoto","Kagoshima","Hachioji","Funabashi","Matsuyama","Higashiosaka","Kawaguchi","Himeji","Utsunomiya","Matsudo","Nishinomiya","Kurashiki","Ichikawa","Oita","Fukuyama","Amagasaki","Kanazawa","Nagano","Toyama","Gifu","Mito","Fukushima","Aomori","Akita","Morioka","Yamagata","Fukui","Tottori","Matsue","Kochi","Takamatsu","Tokushima","Nara","Wakayama","Tsu","Otsu","Maebashi","Urawa","Chiba","Yokosuka","Fujisawa","Asahikawa","Iwaki","Koriyama","Aizuwakamatsu","Koriyama","Fukushima","Sendai","Ishinomaki","Kesennuma","Ofunato","Rikuzentakata","Kamaishi","Miyako","Yamada","Otsuchi","Kamaishi","Ofunato","Rikuzentakata","Kesennuma","Ishinomaki","Sendai","Natori","Iwanuma","Watari","Yamamoto","Higashimatsushima","Onagawa","Minamisanriku","Shichigahama","Tagajo","Rifu","Shiogama","Matsushima","Za","Shiroishi","Kakuda","Marumori","Yamamoto","Watari","Iwanuma","Natori","Sendai","Ishinomaki","Kesennuma","Ofunato","Rikuzentakata","Kamaishi","Miyako","Yamada","Otsuchi","Kamaishi","Ofunato","Rikuzentakata","Kesennuma","Ishinomaki","Sendai","Natori","Iwanuma","Watari","Yamamoto","Higashimatsushima","Onagawa","Minamisanriku","Shichigahama","Tagajo","Rifu","Shiogama","Matsushima","Za","Shiroishi","Kakuda","Marumori","Yamamoto","Watari","Iwanuma","Natori","Sendai"],China:["Beijing","Shanghai","Guangzhou","Shenzhen","Chengdu","Hangzhou","Wuhan","Xi'an","Nanjing","Tianjin","Chongqing","Shenyang","Qingdao","Dalian","Dongguan","Foshan","Jinan","Zhengzhou","Changsha","Kunming","Harbin","Changchun","Shijiazhuang","Taiyuan","Nanchang","Hefei","Fuzhou","Xiamen","Haikou","Nanning","Guiyang","Lanzhou","Yinchuan","Xining","Urumqi","Lhasa","Hohhot","Shantou","Zhuhai","Zhongshan","Jiangmen","Huizhou","Zhaoqing","Qingyuan","Shaoguan","Meizhou","Heyuan","Yangjiang","Maoming","Zhanjiang","Chaozhou","Jieyang","Shanwei","Yunfu","Chaoyang","Jieyang","Meizhou","Heyuan","Yangjiang","Maoming","Zhanjiang","Chaozhou","Jieyang","Shanwei","Yunfu","Chaoyang"],India:["Mumbai","Delhi","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal","Visakhapatnam","Pimpri-Chinchwad","Patna","Vadodara","Ghaziabad","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Varanasi","Srinagar","Amritsar","Ranchi","Chandigarh","Jodhpur","Raipur","Gwalior","Jamshedpur","Bhubaneswar","Coimbatore","Madurai","Vijayawada","Jabalpur","Allahabad","Aurangabad","Solapur","Tiruchirappalli","Bareilly","Moradabad","Mysore","Tiruppur","Gurgaon","Aligarh","Jalandhar","Bhubaneswar","Salem","Warangal","Guntur","Bhiwandi","Saharanpur","Gorakhpur","Bikaner","Amravati","Noida","Jamshedpur","Bhilai","Cuttack","Firozabad","Kochi","Nellore","Bhavnagar","Dehradun","Durgapur","Asansol","Rourkela","Nanded","Kolhapur","Ajmer","Gulbarga","Jamnagar","Ujjain","Loni","Siliguri","Jhansi","Ulhasnagar","Jammu","Sangli-Miraj","Mangalore","Erode","Belgaum","Ambattur","Tirunelveli","Malegaon","Gaya","Jalgaon","Udaipur","Maheshtala","Tirupati","Davanagere","Kozhikode","Akola","Kurnool","Bokaro Steel City","Rajahmundry","Ballari","Agartala","Bhagalpur","Latur","Dhule","Korba","Bhilwara","Brahmapur","Muzaffarpur","Ahmednagar","Mathura","Kollam","Avadi","Kadapa","Anantapur","Tumkur","Khammam","Ozhukarai","Bihar Sharif","Panipat","Darbhanga","Bally","Aizawl","Dewas","Ichalkaranji","Tirupur","Karnal","Bathinda","Jalna","Eluru","Barasat","Kirari Suleman Nagar","Purnia","Satna","Mau","Sonipat","Farrukhabad","Sagar","Rourkela","Durg","Imphal","Ratlam","Hapur","Arrah","Karimnagar","Anantapur","Etawah","Bharatpur","Begusarai","New Delhi","Chhapra","Kadapa","Ramagundam","Pali","Satna","Vizianagaram","Katihar","Hardwar","Sonipat","Nagercoil","Thanjavur","Murwara","Naihati","Sambhal","Nadiad","Yamunanagar","Eluru","Kurnool","Panipat","Raebareli","Mathura","Pudukkottai","Shahjahanpur","Bhimavaram","Robertsganj","Haldia","Suryapet","Kaithal","Raj Nandgaon","Bhadravati","Chandrapur","Chittoor","Bhusawal","Panvel","Budaun","Jagdalpur","Motihari","Rampur","Deoghar","Phusro","Ongole","Nabadwip","Sasaram","Hazaribagh","Palayankottai","Banda","Godhra","Hospet","Ashok Nagar","Sardarshahar","Mahuva","Bongaigaon","Dehri","Madanapalle","Malerkotla","Lalitpur","Bettiah","Pollachi","Khanna","Neemuch","Palwal","Palanpur","Guntakal","Nabadwip","Udupi","Jagdalpur","Motihari","Pilibhit","Shamsabad","Berhampore","Katni","Buxar","Kasganj","Sasaram","Sohna","Sirsa","Tanda","Mirzapur","Chhindwara","Jharsuguda","Baripada","Phagwara","Barmer","Bijnor","Bhadrak","Purulia","Bankura","Raniganj","Suri","Rampurhat","Nalhati","Bolpur","Santiniketan","Krishnanagar","Berhampore","Baharampur","Murshidabad","Jangipur","Dhulian","Farakka","Suti","Samserganj","Sagardighi","Lalgola","Nabagram","Kandi","Beldanga","Rejinagar","Domkal","Jalangi","Raghunathganj","Suti","Samserganj","Sagardighi","Lalgola","Nabagram","Kandi","Beldanga","Rejinagar","Domkal","Jalangi","Raghunathganj"],Brazil:["So Paulo","Rio de Janeiro","Braslia","Salvador","Fortaleza","Belo Horizonte","Manaus","Curitiba","Recife","Porto Alegre","Belm","Goinia","Guarulhos","Campinas","So Lus","So Gonalo","Macei","Duque de Caxias","Natal","Teresina","Campo Grande","Nova Iguau","So Bernardo do Campo","Joo Pessoa","Santo Andr","Osasco","Jaboato dos Guararapes","So Jos dos Campos","Ribeiro Preto","Uberlndia","Contagem","Aracaju","Feira de Santana","Cuiab","Joinville","Aparecida de Goinia","Londrina","Juiz de Fora","Ananindeua","Porto Velho","Serra","Niteri","Caxias do Sul","Campos dos Goytacazes","Macap","Vila Velha","Florianpolis","Mau","So Joo de Meriti","Diadema","Carapicuba","Olinda","Campina Grande","Maring","Montes Claros","Betim","Cariacica","Caruaru","Vitria","Blumenau","Caucaia","Petrolina","Franca","Ponta Grossa","Vitria da Conquista","Paulista","Canoas","Pelotas","Bauru","Anpolis","Ribeiro das Neves","Uberaba","Foz do Iguau","Volta Redonda","Petrpolis","Praia Grande","Suzano","Guaruj","Taubat","Barueri","Cascavel","Vrzea Grande","Juazeiro do Norte","Piracicaba","Camaari","Jundia","Sorocaba","Limeira","Americana","Araraquara","Itaquaquecetuba","So Jos de Ribamar","Rio Branco","Arapiraca","Colombo","Palmas","Santarm","Mossor","Mag","Sete Lagoas","Sobral","Rio Claro","Araguana","Cabo Frio","Itabuna","Marlia","Divinpolis","So Vicente","Santa Maria","Novo Hamburgo","Caxias","Barra Mansa","Viamo","So Caetano do Sul","Sumar","Governador Valadares","Rio Verde","Chapec","Imperatriz","Gravata","Embu das Artes","Vrzea Paulista","Taboo da Serra","Vrzea Grande","Santa Luzia","Maracana","Cabo de Santo Agostinho","Dourados","Juazeiro","Rio Grande","Apucarana","Itapevi","Cotia","Barretos","Araras","Pindamonhangaba","Jacare","Bragana Paulista","Itu","Salto","Indaiatuba","Hortolndia","Valinhos","Vinhedo","Louveira","Jaguarina","Pedreira","Amparo","Monte Mor","Engenheiro Coelho","Artur Nogueira","Cosmpolis","Holambra","Santo Antnio de Posse","Mogi Guau","Mogi Mirim","Conchal","Estiva Gerbi","Esprito Santo do Pinhal","guas de Lindia","Lindia","Serra Negra","Monte Alegre do Sul","Pedra Bela","Pinhalzinho","Socorro","Tuiuti","Vargem","Amparo","Monte Alegre do Sul","Pedra Bela","Pinhalzinho","Socorro","Tuiuti","Vargem"],Mexico:["Mexico City","Guadalajara","Monterrey","Puebla","Tijuana","Len","Jurez","Torren","Quertaro","San Luis Potos","Mrida","Mexicali","Aguascalientes","Tampico","Culiacn","Cuernavaca","Acapulco","Tlalnepantla","Chihuahua","Morelia","Saltillo","Xalapa","Villahermosa","Hermosillo","Reynosa","Cancn","Tepic","Oaxaca","Tuxtla Gutirrez","Durango","Veracruz","Mazatln","Irapuato","Ensenada","Celaya","Toluca","Chimalhuacn","Nezahualcyotl","Naucalpan","Ecatepec","Tlalpan","Gustavo A. Madero","lvaro Obregn","Benito Jurez","Cuauhtmoc","Miguel Hidalgo","Venustiano Carranza","Iztacalco","Iztapalapa","Magdalena Contreras","Milpa Alta","Tlhuac","Xochimilco","Coyoacn","Azcapotzalco","Cuajimalpa","La Magdalena Contreras","Milpa Alta","Tlhuac","Xochimilco","Coyoacn","Azcapotzalco","Cuajimalpa"],Netherlands:["Amsterdam","Rotterdam","The Hague","Utrecht","Eindhoven","Groningen","Tilburg","Almere","Breda","Nijmegen","Enschede","Haarlem","Arnhem","Zaanstad","Amersfoort","Apeldoorn","'s-Hertogenbosch","Hoofddorp","Maastricht","Leiden","Dordrecht","Zoetermeer","Zwolle","Deventer","Delft","Heerlen","Alkmaar","Venlo","Leeuwarden","Hilversum","Amstelveen","Roosendaal","Purmerend","Schiedam","Vlaardingen","Alphen aan den Rijn","Spijkenisse","Helmond","Veenendaal","Gouda","Zaandam","Hengelo","Katwijk","Barneveld","De Bilt","Capelle aan den IJssel","Den Helder","Venray","Velsen","Westland","Emmen","Diemen","Kerkrade","Heemskerk","Rijswijk","Middelburg","Ede","Doetinchem","Harderwijk","Zwijndrecht","Dronten","Oss","Roermond","Sittard-Geleen","Tiel","Veldhoven","Weert","Winterswijk","Zutphen","Almelo","Beverwijk","Culemborg","Delfzijl","Goes","Gorinchem","Heerhugowaard","Hoogeveen","Kampen","Lelystad","Meppel","Nieuwegein","Papendrecht","Ridderkerk","Sneek","Steenbergen","Terneuzen","Vlissingen","Waalwijk","Woerden","Zaltbommel","Zeist","Zevenaar","Zierikzee"],Belgium:["Brussels","Antwerp","Ghent","Charleroi","Lige","Bruges","Namur","Leuven","Mons","Aalst","Mechelen","La Louvire","Kortrijk","Hasselt","Ostend","Sint-Niklaas","Tournai","Genk","Seraing","Roeselare","Verviers","Mouscron","Beveren","Dendermonde","Beringen","Turnhout","Dilbeek","Heist-op-den-Berg","Sint-Truiden","Lokeren","Geel","Brasschaat","Vilvoorde","Herstal","Maasmechelen","Waregem","Chtelet","Ieper","Ninove","Aarschot","Halle","Tienen","Lier","Schoten","Evergem","Grimbergen","Houthalen-Helchteren","Knokke-Heist","Mol","Ronse","Tongeren","Willebroek","Zaventem","Zottegem","Aartselaar","Asse","Beersel","Berchem","Berlaar","Berlare","Bertem","Bever","Bierbeek","Boechout","Bonheiden","Boom","Boortmeerbeek","Borgloon","Bornem","Borsbeek","Boutersem","Brasschaat","Brecht","Bredene","Bree","Brugge","Buggenhout","Damme","De Haan","De Panne","De Pinte","Deerlijk","Deinze","Denderleeuw","Dentergem","Dessel","Destelbergen","Deurne","Diegem","Diest","Diksmuide","Dilbeek","Dilsen-Stokkem","Drogenbos","Duffel","Edegem","Eeklo","Erpe-Mere","Evergem","Galmaarden","Gavere","Geel","Geetbets","Genk","Geraardsbergen","Gingelom","Gistel","Glabbeek","Gooik","Grimbergen","Grobbendonk","Haacht","Haaltert","Halen","Halle","Ham","Hamme","Hamont-Achel","Harelbeke","Hasselt","Hechtel-Eksel","Heers","Heist-op-den-Berg","Hemiksem","Herent","Herentals","Herenthout","Herk-de-Stad","Herne","Herselt","Herzele","Heusden-Zolder","Heuvelland","Hoegaarden","Hoeilaart","Hoeselt","Holsbeek","Hooglede","Hoogstraten","Horebeke","Houthalen-Helchteren","Houthulst","Hove","Huldenberg","Hulshout","Ichtegem","Ieper","Ingelmunster","Ittre","Izegem","Jabbeke","Jette","Jodoigne","Juprelle","Kalmthout","Kampenhout","Kapellen","Kapelle-op-den-Bos","Kaprijke","Kasterlee","Keerbergen","Kinrooi","Kluisbergen","Knesselare","Knokke-Heist","Koekelare","Koksijde","Kontich","Kortemark","Kortenaken","Kortenberg","Kortessem","Kortrijk","Kraainem","Kruibeke","Kruishoutem","Kuurne","Laakdal","Laarne","Lanaken","Landen","Langemark-Poelkapelle","Lebbeke","Lede","Lededegem","Lendelede","Lennik","Leopoldsburg","Lessines","Leuven","Lichtervelde","Liedekerke","Lier","Lierde","Lille","Linkebeek","Lint","Linter","Lo-Reninge","Lochristi","Lokeren","Lommel","Londerzeel","Lontzen","Lovendegem","Lubbeek","Lummen","Maarkedal","Maaseik","Maasmechelen","Machelen","Maldegem","Malle","Malmedy","Manage","Manhay","Marche-en-Famenne","Marcinelle","Mariakerke","Marneffe","Martelange","Mechelen","Meerhout","Meise","Meix-devant-Virton","Melle","Menen","Merchtem","Merkem","Merksplas","Mesen","Messancy","Mettet","Meulebeke","Middelkerke","Moerbeke","Mol","Momignies","Monceau-sur-Sambre","Monstreux","Mont-de-l'Enclus","Mont-Saint-Guibert","Montignies-sur-Sambre","Montigny-le-Tilleul","Moorslede","Morlanwelz","Mortsel","Mouscron","Musson","Namur","Nandrin","Nassogne","Nazareth","Neerpelt","Neufchteau","Nevele","Niel","Nieuwpoort","Nijlen","Ninove","Nivelles","Olen","Oostduinkerke","Oostende","Oosterzele","Oostkamp","Oostrozebeke","Opglabbeek","Opwijk","Oreye","Orp-Jauche","Ostend","Oud-Heverlee","Oud-Turnhout","Oudenaarde","Oudenburg","Oudergem","Overijse","Overpelt","Paal","Pepingen","Pruwelz","Pittem","Plombires","Poelkapelle","Poperinge","Profondeville","Putte","Puurs","Quaregnon","Quivrain","Raeren","Ramillies","Ranst","Ravels","Rebecq","Rekem","Remicourt","Rendeux","Retie","Riemst","Rijkevorsel","Roeselare","Ronse","Roosdaal","Rotselaar","Rouvroy","Ruiselede","Rumst","Runkel","Rupelmonde","Saint-Ghislain","Saint-Hubert","Saint-Josse-ten-Noode","Saint-Nicolas","Sainte-Ode","Sambreville","Schaerbeek","Schelle","Scherpenheuvel-Zichem","Schilde","Schoten","Seneffe","Seraing","Sint-Amands","Sint-Genesius-Rode","Sint-Gillis-Waas","Sint-Jans-Molenbeek","Sint-Joost-ten-Node","Sint-Katelijne-Waver","Sint-Lambrechts-Woluwe","Sint-Laureins","Sint-Lievens-Houtem","Sint-Martens-Latem","Sint-Martens-Lierde","Sint-Niklaas","Sint-Pieters-Leeuw","Sint-Pieters-Woluwe","Sint-Truiden","Sivry-Rance","Soignies","Sombreffe","Somme-Leuze","Soumagne","Spa","Spiere-Helkijn","Stabroek","Staden","Steenokkerzeel","Stekene","Stoumont","Temse","Ternat","Tervuren","Tessenderlo","Theux","Thimister-Clermont","Thuin","Tielt","Tielt-Winge","Tienen","Tintigny","Tongeren","Torhout","Tournai","Tremelo","Trois-Ponts","Trooz","Tubize","Turnhout","Uccle","Uikhoven","Uitbergen","Ukkel","Ursel","Vaux-sur-Sre","Verviers","Veurne","Vielsalm","Vilvoorde","Viroinval","Virton","Vise","Vleteren","Voeren","Vorselaar","Vosselaar","Vresse-sur-Semois","Waarschoot","Waasmunster","Wachtebeke","Wadrilmont","Waha","Walcourt","Walhain","Wanze","Waremme","Warneton","Warquignies","Wasseiges","Waterloo","Wavre","Welkenraedt","Wemmel","Wervik","Westerlo","Westmalle","Westmeerbeek","Wetteren","Wevelgem","Wezembeek-Oppem","Wichelen","Wielsbeke","Wijnegem","Willebroek","Wingene","Wommelgem","Wortegem-Petegem","Wuustwezel","Yvoir","Zandhoven","Zaventem","Zedelgem","Zeebrugge","Zele","Zelzate","Zemst","Zingem","Zoersel","Zomergem","Zonhoven","Zonnebeke","Zottegem","Zoutleeuw","Zuienkerke","Zulte","Zutendaal","Zwalm","Zwevegem","Zwijndrecht"],Switzerland:["Zurich","Geneva","Basel","Bern","Lausanne","Winterthur","St. Gallen","Lucerne","Lugano","Biel","Thun","Kniz","La Chaux-de-Fonds","Schaffhausen","Fribourg","Chur","Neuchtel","Vernier","Uster","Sion","Lancy","Yverdon-les-Bains","Zug","Rapperswil-Jona","Dbendorf","Dietikon","Montreux","Frauenfeld","Wil","Kreuzlingen","Wetzikon","Carouge","Riehen","Allschwil","Baden","Meyrin","Onex","Vevey","Renens","Nyon","Aarau","Solothurn","Herisau","Appenzell","Glarus","Schwyz","Altdorf","Zug","Liestal","Sarnen","Stans","Frauenfeld","Aarau","Herisau","Appenzell","Glarus","Schwyz","Altdorf","Zug","Liestal","Sarnen","Stans","Frauenfeld"],Austria:["Vienna","Graz","Linz","Salzburg","Innsbruck","Klagenfurt","Villach","Wels","Sankt Plten","Dornbirn","Steyr","Wiener Neustadt","Feldkirch","Bregenz","Leonding","Klosterneuburg","Baden","Wolfsberg","Leoben","Krems","Traun","Amstetten","Kapfenberg","Hallein","Kufstein","Traiskirchen","Schwechat","Braunau am Inn","Stockerau","Saalfelden","Ansfelden","Tulln","Hohenems","Spittal an der Drau","Ternitz","Telfs","Ternitz","Eisenstadt","Gmunden","Bludenz","Bad Ischl","Knittelfeld","Vcklabruck","Waidhofen an der Ybbs","Schwaz","Lienz","Zell am See","Sankt Veit an der Glan","Gmnd","Oberwart","Judenburg","Bischofshofen","Neunkirchen","Gnserndorf","Mistelbach","Korneuburg","Bruck an der Mur","Freistadt","Kirchdorf an der Krems","Scheibbs","Zwettl","Horn","Melk","Perg","Rohrbach","Urfahr-Umgebung","Freistadt","Perg","Rohrbach","Urfahr-Umgebung","Freistadt","Perg","Rohrbach","Urfahr-Umgebung"],Poland:["Warsaw","Krakw","d","Wrocaw","Pozna","Gdask","Szczecin","Bydgoszcz","Lublin","Katowice","Biaystok","Gdynia","Czstochowa","Radom","Sosnowiec","Toru","Kielce","Gliwice","Zabrze","Bytom","Olsztyn","Bielsko-Biaa","Rzeszw","Ruda lska","Rybnik","Tychy","Dbrowa Grnicza","Pock","Elblg","Opole","Gorzw Wielkopolski","Wabrzych","Zielona Gra","Wocawek","Tarnw","Chorzw","Kalisz","Koszalin","Legnica","Grudzidz","Supsk","Jaworzno","Jastrzbie-Zdrj","Jelenia Gra","Nowy Scz","Jdrzejw","Konin","Piotrkw Trybunalski","Lubin","Ostroka","Stargard","Mysowice","Piekary lskie","Gogw","Chem","Zamo","Tomaszw Mazowiecki","Przemyl","Stalowa Wola","Mielec","oma","ory","Tarnowskie Gry","Bechatw","Kdzierzyn-Kole","Racibrz","witochowice","Zawiercie","ywiec","Oawa","Brzeg","Nysa","Kodzko","widnica","Jawor","Bolesawiec","Lubin","Gogw","Legnica","Zotoryja","Chojnw","Lwwek lski","Bolesawiec","Zgorzelec","Luba","Kamienna Gra","Jelenia Gra","Karpacz","Szklarska Porba","wieradw-Zdrj","Kowary","Piechowice","Podgrzyn","Sobieszw","Cieplice lskie-Zdrj","Szczawno-Zdrj","Jedlina-Zdrj","Duszniki-Zdrj","Kudowa-Zdrj","Polanica-Zdrj","Ldek-Zdrj","Dugopole-Zdrj","Midzygrze","Bystrzyca Kodzka","Midzylesie","Stronie lskie","Ldek-Zdrj","Dugopole-Zdrj","Midzygrze","Bystrzyca Kodzka","Midzylesie","Stronie lskie"],Portugal:["Lisbon","Porto","Vila Nova de Gaia","Amadora","Braga","Funchal","Coimbra","Setbal","Almada","Agualva-Cacm","Queluz","Rio de Mouro","Barreiro","Montijo","Amora","Corroios","Seixal","Odivelas","Leiria","Faro","vora","Aveiro","Viseu","Guimares","Matosinhos","Gondomar","Valongo","Vila do Conde","Pvoa de Varzim","Maia","Vila Nova de Famalico","Felgueiras","Lousada","Paos de Ferreira","Santo Tirso","Trofa","Arouca","Espinho","Ovar","Oliveira de Azemis","So Joo da Madeira","Vale de Cambra","gueda","Mealhada","Anadia","Murtosa","Estarreja","lhavo","Vagos","Sever do Vouga","Albergaria-a-Velha","Oliveira do Bairro","Vagos","Sever do Vouga","Albergaria-a-Velha","Oliveira do Bairro"],Greece:["Athens","Thessaloniki","Patras","Piraeus","Larissa","Heraklion","Peristeri","Kallithea","Acharnes","Kalamaria","Nikaia","Glyfada","Volos","Ilio","Ilioupoli","Keratsini","Evosmos","Chalandri","Nea Smyrni","Marousi","Agios Dimitrios","Zografou","Egaleo","Nea Ionia","Ioannina","Palaio Faliro","Korydallos","Trikala","Chania","Chalcis","Petroupoli","Serres","Alexandroupoli","Xanthi","Katerini","Kalamata","Kavala","Lamia","Komotini","Rhodes","Drama","Veria","Kozani","Agrinio","Karditsa","Rethymno","Polygyros","Tripoli","Sparta","Livadeia","Amfissa","Lamia","Karpenisi","Agrinio","Mesolongi","Nafpaktos","Aigio","Patras","Pyrgos","Amaliada","Zakynthos","Argostoli","Lixouri","Sami","Poros","Ithaki","Fiskardo","Assos","Agia Efthymia","Lixouri","Sami","Poros","Ithaki","Fiskardo","Assos","Agia Efthymia"],Sweden:["Stockholm","Gothenburg","Malm","Uppsala","Vsters","rebro","Linkping","Helsingborg","Jnkping","Norrkping","Lund","Ume","Gvle","Bors","Sdertlje","Eskilstuna","Halmstad","Vxj","Karlstad","Sundsvall","stersund","Trollhttan","Lule","Liding","Borlnge","Tumba","Kristianstad","Kalmar","Falun","Skvde","Uddevalla","Varberg","Hrnsand","rnskldsvik","Motala","Nykping","Karlskrona","Landskrona","Mlndal","Pite","Kungsbacka","Ljungby","Hudiksvall","Vstervik","Trelleborg","Ystad","Hssleholm","Eslv","Trelleborg","Ystad","Hssleholm","Eslv"],Norway:["Oslo","Bergen","Trondheim","Stavanger","Brum","Kristiansand","Fredrikstad","Troms","Sandnes","Asker","Skien","lesund","Sandefjord","Haugesund","Tnsberg","Moss","Porsgrunn","Bod","Arendal","Hamar","Ytrebygda","Larvik","Halden","Lillehammer","Horten","Harstad","Molde","Kongsberg","Gjvik","Hnefoss","Steinkjer","Narvik","Elverum","Kongsvinger","Notodden","Volda","Frde","Mo i Rana","Alta","Kirkenes","Honningsvg","Vard","Vads","Hammerfest","Troms","Harstad","Narvik","Bod","Mo i Rana","Brnnysund","Sandnessjen","Mosjen","Mo i Rana","Fauske","Narvik","Harstad","Troms","Alta","Hammerfest","Vard","Vads","Kirkenes","Honningsvg"],Denmark:["Copenhagen","Aarhus","Odense","Aalborg","Esbjerg","Randers","Kolding","Horsens","Vejle","Roskilde","Herning","Helsingr","Hrsholm","Silkeborg","Nstved","Fredericia","Viborg","Kge","Holstebro","Taastrup","Slagelse","Hillerd","Snderborg","Svendborg","Holbk","Hjrring","Frederikshavn","Nrresundby","Ringsted","Haderslev","Skive","Nyborg","Nykbing Falster","Lgstr","Middelfart","Skanderborg","Nakskov","Rnne","Maribo","Nykbing Mors","Thisted","Varde","Frederikssund","Kalundborg","Korsr","Nykbing Sjlland","Prst","Store Heddinge","Stege","Vordingborg","Nstved","Ringsted","Sor","Slagelse","Korsr","Kalundborg","Holbk","Roskilde","Hillerd","Frederikssund","Helsingr","Hrsholm","Lyngby-Taarbk","Gentofte","Gladsaxe","Rdovre","Brndby","Hvidovre","Ishj","Vallensbk","Trnby","Dragr","Kastrup","Amager","Christianshavn","Nyhavn","Strget","Tivoli","Rosenborg","Amalienborg","Kongens Nytorv","Nyhavn","Strget","Tivoli","Rosenborg","Amalienborg","Kongens Nytorv"],Finland:["Helsinki","Espoo","Tampere","Vantaa","Oulu","Turku","Jyvskyl","Lahti","Kuopio","Pori","Kouvola","Joensuu","Lappeenranta","Hmeenlinna","Vaasa","Seinjoki","Rovaniemi","Mikkeli","Kotka","Salo","Porvoo","Lohja","Hyvink","Jrvenp","Nurmijrvi","Rauma","Kokkola","Kajaani","Raahe","Ylivieska","Kemi","Tornio","Kemijrvi","Sodankyl","Inari","Utsjoki","Nuorgam","Kevo","Kilpisjrvi","Enonteki","Muonio","Kittil","Levi","Ylls","Ruka","Kuusamo","Suomussalmi","Kuhmo","Lieksa","Nurmes","Juuka","Kitee","Tohmajrvi","Ilomantsi","Joensuu","Kontiolahti","Outokumpu","Polvijrvi","Liperi","Rkkyl","Kitee","Tohmajrvi","Ilomantsi","Joensuu","Kontiolahti","Outokumpu","Polvijrvi","Liperi","Rkkyl"]}[e]||[]).map(r=>({name:r}))}function YV(e){const t={Dublin:["Dublin City","Finglas","Ballymun","Cabra","Phibsborough","Drumcondra","Glasnevin","Coolock","Raheny","Clontarf","Howth"],Cork:["Cork City","Cobh","Midleton","Youghal","Kinsale","Blarney","Fermoy","Mallow","Bandon","Skibbereen"],Galway:["Galway City","Tuam","Ballinasloe","Loughrea","Athenry","Gort","Clifden","Oughterard","Portumna","Headford"],Limerick:["Limerick City","Newcastle West","Kilmallock","Rathkeale","Abbeyfeale","Askeaton","Foynes","Adare","Patrickswell","Castletroy"],Waterford:["Waterford City","Dungarvan","Tramore","Lismore","Portlaw","Kilmacthomas","Dunmore East","Ardmore","Cappoquin","Tallow"],Kilkenny:["Kilkenny City","Callan","Thomastown","Castlecomer","Graiguenamanagh","Ballyragget","Freshford","Inistioge","Mullinavat","Urlingford"],Sligo:["Sligo Town","Ballymote","Tubbercurry","Strandhill","Enniscrone","Collooney","Ballysadare","Grange","Rosses Point","Dromore West"],Donegal:["Letterkenny","Ballybofey","Buncrana","Bundoran","Donegal Town","Dungloe","Carndonagh","Moville","Killybegs","Ballyshannon"],Kerry:["Tralee","Killarney","Listowel","Dingle","Kenmare","Cahersiveen","Castleisland","Killorglin","Millstreet","Ballybunion"],Mayo:["Castlebar","Ballina","Westport","Claremorris","Ballinrobe","Swinford","Kiltimagh","Ballyhaunis","Foxford","Belmullet"],Clare:["Ennis","Kilrush","Shannon","Kilkee","Lahinch","Newmarket-on-Fergus","Ennistymon","Scariff","Tulla","Sixmilebridge"],Tipperary:["Clonmel","Nenagh","Thurles","Carrick-on-Suir","Roscrea","Cahir","Cashel","Templemore","Tipperary Town","Fethard"],Wexford:["Wexford Town","Enniscorthy","New Ross","Gorey","Bunclody","Courtown","Rosslare","Kilmore Quay","Fethard-on-Sea","Taghmon"],Wicklow:["Wicklow Town","Bray","Greystones","Arklow","Blessington","Rathnew","Newtownmountkennedy","Baltinglass","Aughrim","Rathdrum"],Meath:["Navan","Trim","Kells","Drogheda","Ashbourne","Dunboyne","Ratoath","Slane","Oldcastle","Laytown"],Louth:["Dundalk","Drogheda","Ardee","Dunleer","Carlingford","Termonfeckin","Blackrock","Omeath","Castlebellingham","Clogherhead"],Kildare:["Naas","Newbridge","Athy","Leixlip","Celbridge","Maynooth","Kildare Town","Monasterevin","Kilcock","Clane"],Carlow:["Carlow Town","Tullow","Muine Bheag","Bagenalstown","Rathvilly","Borris","Leighlinbridge","Hacketstown","Ballon","Clonegal"],Laois:["Portlaoise","Mountmellick","Portarlington","Abbeyleix","Mountrath","Stradbally","Durrow","Rathdowney","Ballylinan","Ballinakill"],Offaly:["Tullamore","Birr","Edenderry","Banagher","Clara","Ferbane","Kilcormac","Daingean","Shinrone","Kinnitty"],Westmeath:["Mullingar","Athlone","Moate","Kilbeggan","Castlepollard","Delvin","Rochfortbridge","Ballymahon","Ballinahown","Ballymore"],Longford:["Longford Town","Ballymahon","Edgeworthstown","Granard","Newtownforbes","Lanesborough","Ballynacargy","Drumlish","Killashee","Ardagh"],Roscommon:["Roscommon Town","Boyle","Castlerea","Ballaghaderreen","Strokestown","Elphin","Monksland","Athlone","Tulsk","Frenchpark"],Leitrim:["Carrick-on-Shannon","Manorhamilton","Ballinamore","Mohill","Drumshanbo","Kinlough","Dromahair","Carrigallen","Rossinver","Tullaghan"],Cavan:["Cavan Town","Belturbet","Cootehill","Ballyjamesduff","Virginia","Kingscourt","Bailieborough","Mullagh","Shercock","Arvagh"],Monaghan:["Monaghan Town","Carrickmacross","Castleblayney","Clones","Ballybay","Emyvale","Scotstown","Newbliss","Rockcorry","Smithborough"],Alabama:["Birmingham","Montgomery","Mobile","Huntsville","Tuscaloosa","Hoover","Dothan","Auburn","Decatur","Madison"],Alaska:["Anchorage","Fairbanks","Juneau","Sitka","Ketchikan","Wasilla","Kenai","Kodiak","Bethel","Palmer"],Arizona:["Phoenix","Tucson","Mesa","Chandler","Scottsdale","Glendale","Gilbert","Tempe","Peoria","Surprise"],Arkansas:["Little Rock","Fort Smith","Fayetteville","Springdale","Jonesboro","North Little Rock","Conway","Rogers","Pine Bluff","Bentonville"],California:["Los Angeles","San Francisco","San Diego","San Jose","Sacramento","Oakland","Fresno","Long Beach","Anaheim","Santa Ana","Riverside","Stockton","Irvine","Chula Vista","Fremont"],Colorado:["Denver","Colorado Springs","Aurora","Fort Collins","Lakewood","Thornton","Arvada","Westminster","Pueblo","Centennial"],Connecticut:["Bridgeport","New Haven","Hartford","Stamford","Waterbury","Norwalk","Danbury","New Britain","West Hartford","Greenwich"],Delaware:["Wilmington","Dover","Newark","Middletown","Smyrna","Milford","Seaford","Georgetown","Elsmere","New Castle"],Florida:["Miami","Tampa","Orlando","Jacksonville","Fort Lauderdale","Tallahassee","St. Petersburg","Hialeah","Port St. Lucie","Cape Coral"],Georgia:["Atlanta","Augusta","Columbus","Savannah","Athens","Sandy Springs","Roswell","Macon","Johns Creek","Albany"],Hawaii:["Honolulu","Hilo","Kailua","Kaneohe","Pearl City","Waipahu","Kahului","Ewa Beach","Mililani","Kihei"],Idaho:["Boise","Nampa","Meridian","Idaho Falls","Pocatello","Caldwell","Coeur d'Alene","Twin Falls","Lewiston","Post Falls"],Illinois:["Chicago","Aurora","Naperville","Joliet","Rockford","Elgin","Peoria","Champaign","Waukegan","Cicero"],Indiana:["Indianapolis","Fort Wayne","Evansville","South Bend","Carmel","Fishers","Bloomington","Hammond","Gary","Muncie"],Iowa:["Des Moines","Cedar Rapids","Davenport","Sioux City","Iowa City","Waterloo","Council Bluffs","Ames","West Des Moines","Dubuque"],Kansas:["Wichita","Overland Park","Kansas City","Olathe","Topeka","Lawrence","Shawnee","Manhattan","Lenexa","Salina"],Kentucky:["Louisville","Lexington","Bowling Green","Owensboro","Covington","Hopkinsville","Richmond","Florence","Georgetown","Henderson"],Louisiana:["New Orleans","Baton Rouge","Shreveport","Lafayette","Lake Charles","Kenner","Bossier City","Monroe","Alexandria","Houma"],Maine:["Portland","Lewiston","Bangor","South Portland","Auburn","Biddeford","Sanford","Saco","Augusta","Westbrook"],Maryland:["Baltimore","Frederick","Rockville","Gaithersburg","Bowie","Annapolis","College Park","Salisbury","Laurel","Greenbelt"],Massachusetts:["Boston","Worcester","Springfield","Lowell","Cambridge","New Bedford","Brockton","Quincy","Lynn","Fall River"],Michigan:["Detroit","Grand Rapids","Warren","Sterling Heights","Lansing","Ann Arbor","Flint","Dearborn","Livonia","Troy"],Minnesota:["Minneapolis","St. Paul","Rochester","Duluth","Bloomington","Brooklyn Park","Plymouth","St. Cloud","Eagan","Woodbury"],Mississippi:["Jackson","Gulfport","Southaven","Hattiesburg","Biloxi","Meridian","Tupelo","Greenville","Olive Branch","Horn Lake"],Missouri:["Kansas City","St. Louis","Springfield","Columbia","Independence","Lee's Summit","O'Fallon","St. Joseph","St. Charles","St. Peters"],Montana:["Billings","Missoula","Great Falls","Bozeman","Butte","Helena","Kalispell","Havre","Anaconda","Miles City"],Nebraska:["Omaha","Lincoln","Bellevue","Grand Island","Kearney","Fremont","Hastings","North Platte","Norfolk","Columbus"],Nevada:["Las Vegas","Henderson","Reno","North Las Vegas","Sparks","Carson City","Fernley","Elko","Mesquite","Boulder City"],"New Hampshire":["Manchester","Nashua","Concord","Derry","Rochester","Dover","Salem","Merrimack","Londonderry","Hudson"],"New Jersey":["Newark","Jersey City","Paterson","Elizabeth","Edison","Woodbridge","Lakewood","Toms River","Hamilton","Trenton"],"New Mexico":["Albuquerque","Las Cruces","Rio Rancho","Santa Fe","Roswell","Farmington","Clovis","Hobbs","Alamogordo","Carlsbad"],"New York":["New York City","Buffalo","Rochester","Albany","Syracuse","Yonkers","Utica","White Plains","Troy","Binghamton"],"North Carolina":["Charlotte","Raleigh","Greensboro","Durham","Winston-Salem","Fayetteville","Cary","Wilmington","High Point","Concord"],"North Dakota":["Fargo","Bismarck","Grand Forks","Minot","West Fargo","Williston","Dickinson","Mandan","Jamestown","Wahpeton"],Ohio:["Columbus","Cleveland","Cincinnati","Toledo","Akron","Dayton","Parma","Canton","Youngstown","Lorain"],Oklahoma:["Oklahoma City","Tulsa","Norman","Broken Arrow","Lawton","Edmond","Moore","Midwest City","Enid","Stillwater"],Oregon:["Portland","Eugene","Salem","Gresham","Hillsboro","Bend","Beaverton","Medford","Springfield","Corvallis"],Pennsylvania:["Philadelphia","Pittsburgh","Allentown","Erie","Reading","Scranton","Bethlehem","Lancaster","Harrisburg","Altoona"],"Rhode Island":["Providence","Warwick","Cranston","Pawtucket","East Providence","Woonsocket","Newport","Central Falls","Westerly","Cumberland"],"South Carolina":["Charleston","Columbia","North Charleston","Mount Pleasant","Rock Hill","Greenville","Summerville","Sumter","Hilton Head Island","Spartanburg"],"South Dakota":["Sioux Falls","Rapid City","Aberdeen","Brookings","Watertown","Mitchell","Yankton","Pierre","Huron","Vermillion"],Tennessee:["Nashville","Memphis","Knoxville","Chattanooga","Clarksville","Murfreesboro","Franklin","Jackson","Johnson City","Bartlett"],Texas:["Houston","Dallas","Austin","San Antonio","Fort Worth","El Paso","Arlington","Corpus Christi","Plano","Laredo","Lubbock","Garland","Irving","Amarillo","Grand Prairie"],Utah:["Salt Lake City","West Valley City","Provo","West Jordan","Orem","Sandy","Ogden","St. George","Layton","Taylorsville"],Vermont:["Burlington","Essex","South Burlington","Colchester","Montpelier","Rutland","Barre","St. Albans","Brattleboro","Milton"],Virginia:["Virginia Beach","Norfolk","Chesapeake","Richmond","Newport News","Alexandria","Hampton","Portsmouth","Suffolk","Roanoke"],Washington:["Seattle","Spokane","Tacoma","Vancouver","Bellevue","Kent","Everett","Renton","Yakima","Federal Way"],"West Virginia":["Charleston","Huntington","Parkersburg","Morgantown","Wheeling","Martinsburg","Fairmont","Beckley","Clarksburg","South Charleston"],Wisconsin:["Milwaukee","Madison","Green Bay","Kenosha","Racine","Appleton","Waukesha","Oshkosh","Eau Claire","Janesville"],Wyoming:["Cheyenne","Casper","Laramie","Gillette","Rock Springs","Sheridan","Green River","Evanston","Riverton","Jackson"],England:["London","Manchester","Birmingham","Liverpool","Leeds","Sheffield","Bristol","Leicester","Coventry","Nottingham"],Scotland:["Edinburgh","Glasgow","Aberdeen","Dundee","Inverness","Perth","Stirling","Ayr","Dumfries","Falkirk"],Wales:["Cardiff","Swansea","Newport","Wrexham","Barry","Caerphilly","Rhondda","Merthyr Tydfil","Bridgend","Aberystwyth"],"Northern Ireland":["Belfast","Derry","Lisburn","Newry","Bangor","Craigavon","Castlereagh","Carrickfergus","Newtownabbey","Coleraine"],Alberta:["Calgary","Edmonton","Red Deer","Lethbridge","St. Albert","Medicine Hat","Grande Prairie","Airdrie","Spruce Grove","Fort McMurray"],"British Columbia":["Vancouver","Victoria","Surrey","Burnaby","Richmond","Abbotsford","Coquitlam","Kelowna","Langley","Nanaimo"],Manitoba:["Winnipeg","Brandon","Steinbach","Thompson","Portage la Prairie","Winkler","Selkirk","Dauphin","Morden","Flin Flon"],"New Brunswick":["Saint John","Moncton","Fredericton","Dieppe","Miramichi","Edmundston","Riverview","Quispamsis","Bathurst","Campbellton"],"Newfoundland and Labrador":["St. John's","Mount Pearl","Corner Brook","Conception Bay South","Grand Falls-Windsor","Gander","Happy Valley-Goose Bay","Labrador City","Stephenville","Marystown"],"Northwest Territories":["Yellowknife","Hay River","Inuvik","Fort Smith","Behchok","Fort Simpson","Tuktoyaktuk","Norman Wells","Fort McPherson","Aklavik"],"Nova Scotia":["Halifax","Dartmouth","Sydney","Truro","New Glasgow","Glace Bay","Kentville","Amherst","Bridgewater","Yarmouth"],Nunavut:["Iqaluit","Rankin Inlet","Arviat","Baker Lake","Cambridge Bay","Igloolik","Pangnirtung","Pond Inlet","Cape Dorset","Kugluktuk"],Ontario:["Toronto","Ottawa","Mississauga","Brampton","Hamilton","London","Markham","Vaughan","Kitchener","Windsor"],"Prince Edward Island":["Charlottetown","Summerside","Stratford","Cornwall","Montague","Kensington","Souris","Alberton","Tignish","Georgetown"],Quebec:["Montreal","Quebec City","Laval","Gatineau","Longueuil","Sherbrooke","Saguenay","Lvis","Trois-Rivires","Terrebonne"],Saskatchewan:["Saskatoon","Regina","Prince Albert","Moose Jaw","Swift Current","Yorkton","North Battleford","Estevan","Weyburn","Lloydminster"],Yukon:["Whitehorse","Dawson City","Watson Lake","Haines Junction","Carmacks","Mayo","Faro","Teslin","Ross River","Old Crow"],"New South Wales":["Sydney","Newcastle","Wollongong","Albury","Wagga Wagga","Tamworth","Orange","Dubbo","Nowra","Broken Hill","Bathurst","Lismore","Coffs Harbour","Port Macquarie","Tweed Heads"],Victoria:["Melbourne","Geelong","Ballarat","Bendigo","Shepparton","Warrnambool","Latrobe","Mildura","Horsham","Wodonga","Traralgon","Frankston","Dandenong","Ringwood","Pakenham"],Queensland:["Brisbane","Gold Coast","Cairns","Townsville","Toowoomba","Rockhampton","Mackay","Bundaberg","Hervey Bay","Gladstone","Sunshine Coast","Ipswich","Logan","Redcliffe","Mount Isa"],"Western Australia":["Perth","Fremantle","Bunbury","Geraldton","Kalgoorlie","Albany","Broome","Mandurah","Rockingham","Joondalup","Busselton","Esperance","Port Hedland","Karratha","Exmouth"],"South Australia":["Adelaide","Mount Gambier","Whyalla","Murray Bridge","Port Augusta","Port Pirie","Port Lincoln","Victor Harbor","Gawler","Millicent","Naracoorte","Kadina","Berri","Roxby Downs","Ceduna"],Tasmania:["Hobart","Launceston","Devonport","Burnie","Ulverstone","George Town","Queenstown","Scottsdale","Smithton","Currie","Strahan","St Helens","Swansea","Bicheno","Port Arthur"],"Northern Territory":["Darwin","Alice Springs","Palmerston","Katherine","Nhulunbuy","Tennant Creek","Yulara","Casuarina","Humpty Doo","Batchelor"],"Australian Capital Territory":["Canberra","Gungahlin","Tuggeranong","Belconnen","Weston Creek","Woden Valley","Inner North","Inner South"],"Baden-Wrttemberg":["Stuttgart","Mannheim","Karlsruhe","Freiburg","Heidelberg","Heilbronn","Ulm","Pforzheim","Reutlingen","Tbingen"],Bavaria:["Munich","Nuremberg","Augsburg","Regensburg","Wrzburg","Ingolstadt","Frth","Erlangen","Bayreuth","Bamberg"],Berlin:["Berlin","Charlottenburg","Kreuzberg","Prenzlauer Berg","Friedrichshain","Mitte","Neuklln","Wedding","Schneberg","Tempelhof"],Brandenburg:["Potsdam","Cottbus","Brandenburg","Frankfurt","Oranienburg","Falkensee","Eberswalde","Schwedt","Frstenwalde","Knigs Wusterhausen"],Bremen:["Bremen","Bremerhaven"],Hamburg:["Hamburg","Altona","Harburg","Eimsbttel","Wandsbek","Bergedorf","Billstedt","Barmbek","Winterhude","Ottensen"],Hesse:["Frankfurt","Wiesbaden","Kassel","Darmstadt","Offenbach","Hanau","Gieen","Marburg","Fulda","Rsselsheim"],"Lower Saxony":["Hanover","Braunschweig","Oldenburg","Osnabrck","Wolfsburg","Gttingen","Salzgitter","Hildesheim","Delmenhorst","Wilhelmshaven"],"Mecklenburg-Vorpommern":["Rostock","Schwerin","Neubrandenburg","Stralsund","Greifswald","Wismar","Gstrow","Waren","Neustrelitz","Parchim"],"North Rhine-Westphalia":["Cologne","Dsseldorf","Dortmund","Essen","Duisburg","Bochum","Wuppertal","Bielefeld","Bonn","Mnster"],"Rhineland-Palatinate":["Mainz","Ludwigshafen","Koblenz","Trier","Kaiserslautern","Worms","Neuwied","Neustadt","Speyer","Frankenthal"],Saarland:["Saarbrcken","Neunkirchen","Homburg","Vlklingen","Sankt Ingbert","Saarlouis","Merzig","St. Wendel","Blieskastel","Dillingen"],Saxony:["Dresden","Leipzig","Chemnitz","Zwickau","Plauen","Grlitz","Freiberg","Bautzen","Hoyerswerda","Pirna"],"Saxony-Anhalt":["Magdeburg","Halle","Dessau","Wittenberg","Halberstadt","Stendal","Bitterfeld","Merseburg","Bernburg","Naumburg"],"Schleswig-Holstein":["Kiel","Lbeck","Flensburg","Neumnster","Norderstedt","Elmshorn","Pinneberg","Itzehoe","Wedel","Ahrensburg"],Thuringia:["Erfurt","Jena","Gera","Weimar","Gotha","Eisenach","Nordhausen","Suhl","Altenburg","Mhlhausen"],"le-de-France":["Paris","Boulogne-Billancourt","Saint-Denis","Argenteuil","Montreuil","Nanterre","Crteil","Versailles","Courbevoie","Vitry-sur-Seine"],"Auvergne-Rhne-Alpes":["Lyon","Grenoble","Saint-tienne","Clermont-Ferrand","Villeurbanne","Annecy","Valence","Chambry","Roanne","Bourg-en-Bresse"],"Provence-Alpes-Cte d'Azur":["Marseille","Nice","Toulon","Aix-en-Provence","Avignon","Cannes","Antibes","La Seyne-sur-Mer","Hyres","Frjus"],"Nouvelle-Aquitaine":["Bordeaux","Limoges","Poitiers","La Rochelle","Angoulme","Bayonne","Pau","Biarritz","Niort","Agen"],Occitanie:["Toulouse","Montpellier","Nmes","Perpignan","Bziers","Montauban","Albi","Carcassonne","Narbonne","Ste"],"Hauts-de-France":["Lille","Amiens","Roubaix","Tourcoing","Dunkirk","Calais","Boulogne-sur-Mer","Valenciennes","Lens","Arras"],"Grand Est":["Strasbourg","Reims","Metz","Nancy","Mulhouse","Colmar","Troyes","Charleville-Mzires","Chlons-en-Champagne","pinal"],"Pays de la Loire":["Nantes","Le Mans","Angers","Saint-Nazaire","La Roche-sur-Yon","Laval","Cholet","Saint-Herblain","Rez","Saumur"],Normandy:["Rouen","Caen","Le Havre","Cherbourg","vreux","Dieppe","Alenon","Saint-L","Lisieux","Vernon"],Brittany:["Rennes","Brest","Quimper","Lorient","Vannes","Saint-Malo","Saint-Brieuc","Lannion","Fouesnant","Concarneau"],"Bourgogne-Franche-Comt":["Dijon","Besanon","Belfort","Chalon-sur-Sane","Auxerre","Mcon","Nevers","Montbliard","Vesoul","Sens"],"Centre-Val de Loire":["Tours","Orlans","Bourges","Blois","Chartres","Chteauroux","Jou-ls-Tours","Vierzon","Dreux","Romorantin-Lanthenay"],Corsica:["Ajaccio","Bastia","Porto-Vecchio","Calvi","Bonifacio","Corte","Propriano","L'le-Rousse","Porto","Sartne"],Andalusia:["Seville","Mlaga","Crdoba","Granada","Jerez de la Frontera","Almera","Marbella","Cdiz","Huelva","Jan"],Aragon:["Zaragoza","Huesca","Teruel","Calatayud","Jaca","Barbastro","Alcaiz","Monzn","Ejea de los Caballeros","Fraga"],Asturias:["Oviedo","Gijn","Avils","Siero","Langreo","Mieres","Castrilln","San Martn del Rey Aurelio","Corvera de Asturias","Llanera"],"Balearic Islands":["Palma","Calvi","Ibiza","Manacor","Llucmajor","Marratx","Ciutadella","Mahn","Inca","Felanitx"],"Basque Country":["Bilbao","Vitoria-Gasteiz","San Sebastin","Barakaldo","Getxo","Irun","Portugalete","Santurtzi","Basauri","Errenteria"],"Canary Islands":["Las Palmas","Santa Cruz de Tenerife","San Cristbal de La Laguna","Telde","Arona","Santa Luca de Tirajana","Arrecife","San Bartolom de Tirajana","La Orotava","Puerto del Rosario"],Cantabria:["Santander","Torrelavega","Castro-Urdiales","Camargo","Pilagos","El Astillero","Laredo","Santoa","Los Corrales de Buelna","Reinosa"],"Castile and Len":["Valladolid","Burgos","Len","Salamanca","Zamora","Palencia","vila","Segovia","Soria","Ponferrada"],"Castile-La Mancha":["Toledo","Albacete","Guadalajara","Ciudad Real","Cuenca","Talavera de la Reina","Puertollano","Tomelloso","Alczar de San Juan","Valdepeas"],Catalonia:["Barcelona","Badalona","Sabadell","Terrassa","Lleida","Tarragona","Matar","Santa Coloma de Gramenet","Reus","Girona"],Extremadura:["Badajoz","Cceres","Mrida","Plasencia","Don Benito","Almendralejo","Villanueva de la Serena","Navalmoral de la Mata","Zafra","Montijo"],Galicia:["Vigo","A Corua","Ourense","Lugo","Santiago de Compostela","Pontevedra","Ferrol","Narn","Vilagarca de Arousa","Monforte de Lemos"],"La Rioja":["Logroo","Calahorra","Arnedo","Haro","Alfaro","Njera","Santo Domingo de la Calzada","Lardero","Villamediana de Iregua","Fuenmayor"],Madrid:["Madrid","Mstoles","Alcal de Henares","Fuenlabrada","Legans","Getafe","Alcorcn","Torrejn de Ardoz","Parla","Alcobendas"],Murcia:["Murcia","Cartagena","Lorca","Molina de Segura","Alcantarilla","Cieza","Yecla","Caravaca de la Cruz","Totana","Mazarrn"],Navarre:["Pamplona","Tudela","Barain","Burlada","Estella-Lizarra","Tafalla","Villava","Ansoin","Zizur Mayor","Alsasua"],Valencia:["Valencia","Alicante","Elche","Castelln de la Plana","Torrevieja","Orihuela","Gandia","Benidorm","Sagunto","Alcoy"],Auckland:["Auckland","Manukau","North Shore","Waitakere","Papakura","Howick","Takapuna","Henderson","Glenfield","Albany"],"Bay of Plenty":["Tauranga","Rotorua","Whakatane","Taupo","Opotiki","Kawerau","Te Puke","Mount Maunganui","Papamoa","Ohope"],Canterbury:["Christchurch","Timaru","Ashburton","Rangiora","Kaiapoi","Rolleston","Lincoln","Leeston","Darfield","Geraldine"],Gisborne:["Gisborne","Tolaga Bay","Te Karaka","Ruatoria","Manutuke","Matawai","Tokomaru Bay","Hicks Bay","Tiniroto","Whatatutu"],"Hawke's Bay":["Napier","Hastings","Havelock North","Taradale","Flaxmere","Waipawa","Waipukurau","Wairoa","Dannevirke","Porangahau"],"Manawatu-Wanganui":["Palmerston North","Whanganui","Levin","Feilding","Marton","Taihape","Foxton","Pahiatua","Ohakune","Raetihi"],Marlborough:["Blenheim","Picton","Kaikoura","Renwick","Seddon","Havelock","Ward","Spring Creek","Rai Valley","Kekerengu"],Nelson:["Nelson","Richmond","Motueka","Stoke","Tahunanui","Mapua","Wakefield","Brightwater","Murchison","Takaka"],Northland:["Whangarei","Dargaville","Kaitaia","Kerikeri","Kaikohe","Paihia","Ruakaka","Mangawhai","Warkworth","Wellsford"],Otago:["Dunedin","Queenstown","Wanaka","Oamaru","Alexandra","Cromwell","Balclutha","Milton","Arrowtown","Lawrence"],Southland:["Invercargill","Gore","Te Anau","Bluff","Winton","Riverton","Mataura","Edendale","Wyndham","Lumsden"],Taranaki:["New Plymouth","Hawera","Stratford","Waitara","Inglewood","Eltham","Opunake","Patea","Mokau","Urenui"],Tasman:["Richmond","Motueka","Takaka","Mapua","Wakefield","Brightwater","Murchison","Collingwood","Kaiteriteri","Riwaka"],Waikato:["Hamilton","Cambridge","Taupo","Tokoroa","Te Awamutu","Huntly","Matamata","Morrinsville","Thames","Paeroa"],Wellington:["Wellington","Lower Hutt","Upper Hutt","Porirua","Kapiti","Masterton","Carterton","Featherston","Greytown","Martinborough"],"West Coast":["Greymouth","Westport","Hokitika","Reefton","Runanga","Brunner","Kumara","Franz Josef","Fox Glacier","Haast"],Antrim:["Belfast","Lisburn","Carrickfergus","Larne","Ballymena","Antrim","Newtownabbey","Carrickfergus","Ballyclare","Crumlin"],Armagh:["Armagh","Craigavon","Lurgan","Portadown","Banbridge","Newry","Tandragee","Markethill","Keady","Crossmaglen"],Down:["Newry","Downpatrick","Banbridge","Newcastle","Warrenpoint","Kilkeel","Saintfield","Comber","Dundonald","Holywood"],Fermanagh:["Enniskillen","Lisnaskea","Irvinestown","Ballinamallard","Kesh","Belleek","Derrygonnelly","Tempo","Garrison","Florencecourt"],Londonderry:["Derry","Coleraine","Limavady","Magherafelt","Portstewart","Portrush","Dungiven","Castlerock","Kilrea","Bellaghy"],Tyrone:["Omagh","Strabane","Dungannon","Cookstown","Coalisland","Dromore","Fintona","Fivemiletown","Ballygawley","Clogher"],Amsterdam:["Centrum","Noord","Oost","Zuid","West","Nieuw-West","Zuidoost","Westpoort","Jordaan","De Pijp","Oud-Zuid","Oud-West"],Rotterdam:["Centrum","Charlois","Delfshaven","Feijenoord","Hillegersberg-Schiebroek","Hoek van Holland","Hoogvliet","IJsselmonde","Kralingen-Crooswijk","Noord","Overschie","Pernis","Prins Alexander","Rozenburg"],"The Hague":["Centrum","Escamp","Haagse Hout","Laak","Leidschenveen-Ypenburg","Loosduinen","Scheveningen","Segbroek"],Utrecht:["Centrum","Binnenstad","Noordwest","Oost","Overvecht","Zuid","Zuidwest","Vleuten-De Meern","Leidsche Rijn","Lombok","Oog in Al","Wittevrouwen","Tuinwijk","Zuilen","Ondiep","Pijlsweerd","Wittevrouwensingel","Biltsche Grift","Rivierenwijk","Transwijk","Hoograven","Tolsteeg","Rotsoord","Lunetten","Kanaleneiland","Nieuwegein-Noord","Nieuwegein-Zuid","Vreeswijk","Jutphaas","Galecop","Hekendorp","Oudewater","Haastrecht","Gouda-Zuid","Gouda-Noord","Gouda-Centrum"],Eindhoven:["Centrum","Woensel-Noord","Woensel-Zuid","Stratum","Gestel","Strijp"],Groningen:["Centrum","Oost","West","Noord","Zuid","Helpman","Paddepoel"],Tilburg:["Centrum","Noord","Oost","Zuid","West","Reeshof"],Almere:["Centrum","Noord","Oost","Zuid","West","Haven","Buiten"],Breda:["Centrum","Ginneken","Prinsenbeek","Teteringen","Ulvenhout"],Nijmegen:["Centrum","Nijmegen-Oost","Nijmegen-Zuid","Nijmegen-Noord","Dukenburg","Lindenholt"],Enschede:["Centrum","Noord","Oost","Zuid","West"],Haarlem:["Centrum","Oost","Schalkwijk","Zuidwest","Zuid"],Arnhem:["Centrum","Noord","Oost","Zuid","West"],Zaanstad:["Zaandam","Koog aan de Zaan","Zaandijk","Wormerveer","Krommenie","Assendelft","Westzaan"],Amersfoort:["Centrum","Noord","Oost","Zuid","West"],Apeldoorn:["Centrum","Noord","Oost","Zuid","West"],"'s-Hertogenbosch":["Centrum","Noord","Oost","Zuid","West"],Hoofddorp:["Centrum","Floriande","Toolenburg","Overbos"],Maastricht:["Centrum","Noord","Oost","Zuid","West"],Leiden:["Centrum","Noord","Oost","Zuid","West"],Dordrecht:["Centrum","Noord","Oost","Zuid","West"],Zoetermeer:["Centrum","Driemanspolder","Buytenwegh","Seghwaert","Rokkeveen","Palenstein","Stadshart"],Zwolle:["Centrum","Noord","Oost","Zuid","West"],Deventer:["Centrum","Noord","Oost","Zuid","West"],Delft:["Centrum","Noord","Oost","Zuid","West"],Heerlen:["Centrum","Noord","Oost","Zuid","West"],Alkmaar:["Centrum","Noord","Oost","Zuid","West"],Venlo:["Centrum","Noord","Oost","Zuid","West"],Leeuwarden:["Centrum","Noord","Oost","Zuid","West"],Hilversum:["Centrum","Noord","Oost","Zuid","West"],Amstelveen:["Centrum","Bovenkerk","Westwijk","Nesserbos"],Roosendaal:["Centrum","Noord","Oost","Zuid","West"],Purmerend:["Centrum","Overwhere","Wheermolen","Weidevenne"],Schiedam:["Centrum","Noord","Oost","Zuid","West"],Vlaardingen:["Centrum","Noord","Oost","Zuid","West"],"Alphen aan den Rijn":["Centrum","Noord","Oost","Zuid","West"],Spijkenisse:["Centrum","Bernisse","Heenvliet","Zuidland"],Helmond:["Centrum","Noord","Oost","Zuid","West"],Veenendaal:["Centrum","Noord","Oost","Zuid","West"],Gouda:["Centrum","Noord","Oost","Zuid","West"],Zaandam:["Centrum","Noord","Oost","Zuid","West"],Hengelo:["Centrum","Noord","Oost","Zuid","West"],Katwijk:["Centrum","Noord","Oost","Zuid","West"],Barneveld:["Centrum","Noord","Oost","Zuid","West"],"De Bilt":["Bilthoven","De Bilt","Groenekan","Maartensdijk"],"Capelle aan den IJssel":["Centrum","Noord","Oost","Zuid","West"],"Den Helder":["Centrum","Noord","Oost","Zuid","West"],Venray:["Centrum","Noord","Oost","Zuid","West"],Velsen:["IJmuiden","Driehuis","Santpoort-Noord","Santpoort-Zuid","Velsen-Noord","Velsen-Zuid"],Westland:["Naaldwijk","Monster","De Lier","Honselersdijk","Maasdijk","'s-Gravenzande","Wateringen"],Emmen:["Centrum","Noord","Oost","Zuid","West"],Diemen:["Centrum","Noord","Oost","Zuid","West"],Kerkrade:["Centrum","Noord","Oost","Zuid","West"],Heemskerk:["Centrum","Noord","Oost","Zuid","West"],Rijswijk:["Centrum","Noord","Oost","Zuid","West"],Middelburg:["Centrum","Noord","Oost","Zuid","West"],Ede:["Centrum","Noord","Oost","Zuid","West"],Doetinchem:["Centrum","Noord","Oost","Zuid","West"],Harderwijk:["Centrum","Noord","Oost","Zuid","West"],Zwijndrecht:["Centrum","Noord","Oost","Zuid","West"],Dronten:["Centrum","Noord","Oost","Zuid","West"],Oss:["Centrum","Noord","Oost","Zuid","West"],Roermond:["Centrum","Noord","Oost","Zuid","West"],"Sittard-Geleen":["Sittard","Geleen","Born","Munstergeleen"],Tiel:["Centrum","Noord","Oost","Zuid","West"],Veldhoven:["Centrum","Noord","Oost","Zuid","West"],Weert:["Centrum","Noord","Oost","Zuid","West"],Winterswijk:["Centrum","Noord","Oost","Zuid","West"],Zutphen:["Centrum","Noord","Oost","Zuid","West"],Almelo:["Centrum","Noord","Oost","Zuid","West"],Beverwijk:["Centrum","Noord","Oost","Zuid","West"],Culemborg:["Centrum","Noord","Oost","Zuid","West"],Delfzijl:["Centrum","Noord","Oost","Zuid","West"],Goes:["Centrum","Noord","Oost","Zuid","West"],Gorinchem:["Centrum","Noord","Oost","Zuid","West"],Heerhugowaard:["Centrum","Noord","Oost","Zuid","West"],Hoogeveen:["Centrum","Noord","Oost","Zuid","West"],Kampen:["Centrum","Noord","Oost","Zuid","West"],Lelystad:["Centrum","Noord","Oost","Zuid","West"],Meppel:["Centrum","Noord","Oost","Zuid","West"],Nieuwegein:["Centrum","Noord","Oost","Zuid","West"],Papendrecht:["Centrum","Noord","Oost","Zuid","West"],Ridderkerk:["Centrum","Noord","Oost","Zuid","West"],Sneek:["Centrum","Noord","Oost","Zuid","West"],Steenbergen:["Centrum","Noord","Oost","Zuid","West"],Terneuzen:["Centrum","Noord","Oost","Zuid","West"],Vlissingen:["Centrum","Noord","Oost","Zuid","West"],Waalwijk:["Centrum","Noord","Oost","Zuid","West"],Woerden:["Centrum","Noord","Oost","Zuid","West"],Zaltbommel:["Centrum","Noord","Oost","Zuid","West"],Zeist:["Centrum","Noord","Oost","Zuid","West"],Zevenaar:["Centrum","Noord","Oost","Zuid","West"],Zierikzee:["Centrum","Noord","Oost","Zuid","West"]};if(!e||typeof e!="string")return console.error("[getFallbackCities] Invalid regionName:",e),[];const n=e.trim();console.log(`[getFallbackCities] Looking up region: "${e}" (normalized: "${n}")`);let r=t[n]||[];if(console.log(`[getFallbackCities] Exact match result: ${r.length} cities`),r.length===0){const a=Object.keys(t).find(i=>i.toLowerCase()===n.toLowerCase());if(a)console.log(`[getFallbackCities] Found case-insensitive match: "${a}" (was looking for "${n}")`),r=t[a];else{console.warn(`[getFallbackCities]  No match found for "${n}"`);const i=Object.keys(t).filter(o=>o.toLowerCase().includes(n.toLowerCase().substring(0,3))||n.toLowerCase().includes(o.toLowerCase().substring(0,3))).slice(0,5);i.length>0&&console.log("[getFallbackCities] Similar keys found:",i)}}return console.log(`[getFallbackCities] Final result: ${r.length} local areas for "${n}"`),r.map(a=>({name:a}))}function qV(){const{login:e}=tn(),t=Xt(),[n,r]=WI(),a=parseInt(n.get("step")||"1",10),i=a>=1&&a<=3?a:1,o=m.useCallback($=>{$>=1&&$<=3&&r({step:$.toString()})},[r]),[l,c]=m.useState(""),[d,u]=m.useState(""),[f,h]=m.useState(""),[g,y]=m.useState(""),[p,S]=m.useState(""),[x,v]=m.useState([]),[b,w]=m.useState([]),[N,R]=m.useState(!1),[C,_]=m.useState(!1),[W,T]=m.useState(""),[E,B]=m.useState(""),[H,q]=m.useState(""),[ie,X]=m.useState(""),[V,z]=m.useState([]),[J,U]=m.useState(null),ue=["Ireland","Northern Ireland","UK","Germany","France","Spain","Italy","Netherlands","Belgium","Switzerland","Austria","Poland","Portugal","Greece","Sweden","Norway","Denmark","Finland","Czech Republic","Romania","Hungary","Bulgaria","Croatia","Serbia","Slovakia","Slovenia","Lithuania","Latvia","Estonia","Luxembourg","Malta","Cyprus","Iceland","Ukraine","Belarus","Moldova","Albania","North Macedonia","Bosnia and Herzegovina","Montenegro","Kosovo","Monaco","Liechtenstein","Andorra","San Marino","Vatican City","Turkey","USA","Canada","Mexico","Brazil","Argentina","Chile","Colombia","Peru","Venezuela","Ecuador","Guatemala","Cuba","Haiti","Dominican Republic","Honduras","El Salvador","Nicaragua","Costa Rica","Panama","Uruguay","Paraguay","Bolivia","Jamaica","Trinidad and Tobago","Bahamas","Barbados","Belize","Guyana","Suriname","French Guiana","Saint Lucia","Antigua and Barbuda","Saint Vincent and the Grenadines","Grenada","Saint Kitts and Nevis","Dominica","Aruba","Curaao","Bonaire","Sint Maarten","Sint Eustatius","Saba","Bermuda","Cayman Islands","British Virgin Islands","US Virgin Islands","Anguilla","Montserrat","Turks and Caicos Islands","Greenland","Saint Pierre and Miquelon","China","India","Japan","Russia","Indonesia","Pakistan","Bangladesh","Philippines","Vietnam","Thailand","Myanmar","South Korea","North Korea","Malaysia","Afghanistan","Iraq","Saudi Arabia","Uzbekistan","Yemen","Nepal","Sri Lanka","Kazakhstan","Cambodia","Jordan","Azerbaijan","United Arab Emirates","Tajikistan","Israel","Laos","Lebanon","Kyrgyzstan","Turkmenistan","Singapore","Oman","Palestine","Kuwait","Georgia","Mongolia","Armenia","Qatar","Bahrain","Timor-Leste","Bhutan","Maldives","Brunei","Iran","Syria","Nigeria","Ethiopia","Egypt","South Africa","Kenya","Uganda","Tanzania","Algeria","Sudan","Morocco","Angola","Mozambique","Ghana","Madagascar","Cameroon","Ivory Coast","Niger","Burkina Faso","Mali","Malawi","Zambia","Senegal","Chad","Somalia","Zimbabwe","Guinea","Rwanda","Benin","Tunisia","Burundi","South Sudan","Togo","Sierra Leone","Libya","Eritrea","Central African Republic","Liberia","Mauritania","Namibia","Botswana","Gambia","Gabon","Lesotho","Guinea-Bissau","Equatorial Guinea","Mauritius","Eswatini","Djibouti","Comoros","Cape Verde","So Tom and Prncipe","Seychelles","Australia","New Zealand","Papua New Guinea","Fiji","Solomon Islands","Vanuatu","New Caledonia","French Polynesia","Samoa","Guam","Kiribati","Micronesia","Tonga","Marshall Islands","Palau","American Samoa","Northern Mariana Islands","Cook Islands","Tuvalu","Wallis and Futuna","Nauru","Niue","Tokelau","Pitcairn Islands"];m.useEffect(()=>{g?(R(!0),v([]),h(""),u(""),w([]),e_(g).then($=>{v($.map(Z=>Z.name)),R(!1)}).catch($=>{console.error("Error loading regions:",$),R(!1)})):(v([]),w([]))},[g]),m.useEffect(()=>{f&&g?(_(!0),w([]),u(""),console.log(`Fetching local areas for region: ${f}, country: ${g}`),t_(f,g).then($=>{console.log(`Received ${$.length} local areas for ${f}, ${g}:`,$),w($.map(Z=>Z.name)),_(!1)}).catch($=>{console.error("Error loading local areas:",$),_(!1)})):w([])},[f,g]);const fe=["Food & Dining","Sports","Music","Art & Culture","Technology","Travel","Fashion","Photography","Fitness","Gaming","Books","Movies","Nature","Cooking","Dancing"];function Ae($){if($.preventDefault(),!l||!d||!f||!g){alert("Please fill in all location fields");return}o(2)}function _e($){if($.preventDefault(),!W||!E||!H){alert("Please fill in all required account fields");return}if(E!==H){alert("Passwords do not match");return}if(ie&&parseInt(ie)<13){alert("You must be at least 13 years old");return}o(3)}function Re($){$.preventDefault();const Z={name:l.trim(),email:W.trim(),password:E,age:ie?parseInt(ie):void 0,interests:V,local:d,regional:f,national:g,handle:`${l.trim()}@${f}`,countryFlag:p.trim(),avatarUrl:J};e(Z),t("/profile",{replace:!0})}function Se($){var Pe;const Z=(Pe=$.target.files)==null?void 0:Pe[0];if(Z){const ve=new FileReader;ve.onload=re=>{var M;U((M=re.target)==null?void 0:M.result)},ve.readAsDataURL(Z)}}function de(){U(null)}function F($){z(Z=>Z.includes($)?Z.filter(Pe=>Pe!==$):[...Z,$])}return s.jsx("div",{className:"min-h-screen flex items-center justify-center py-8 px-4 sm:px-6 lg:px-8",style:{backgroundColor:"#000000"},children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("form",{onSubmit:i===1?Ae:i===2?_e:Re,className:"border border-gray-700 rounded-lg shadow-sm flex flex-col",style:{minHeight:"600px",backgroundColor:"#000000"},children:[s.jsx("div",{className:"flex-shrink-0 px-10 pt-10 pb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-light mb-2 tracking-tight relative",style:{fontFamily:"system-ui, -apple-system, sans-serif",color:"#ffffff"},children:s.jsx("span",{style:{background:"linear-gradient(90deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 1) 50%, rgba(255, 255, 255, 0.3) 100%)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:"shimmer 3s linear infinite",display:"inline-block"},children:"Gazetteer"})}),s.jsx("p",{className:"text-sm text-gray-400 mb-6 font-normal",children:i===1?"GPS-focused news feeds powered by location":i===2?"Complete your profile":"Add a profile picture"}),s.jsxs("div",{className:"flex justify-center items-center space-x-2 mb-6",children:[s.jsx("div",{className:`h-1 rounded-full transition-all ${i>=1?"bg-blue-500":"bg-gray-300"}`,style:{width:i>=1?"80px":"40px"}}),s.jsx("div",{className:`h-1 rounded-full transition-all ${i>=2?"bg-blue-500":"bg-gray-300"}`,style:{width:i>=2?"80px":"40px"}}),s.jsx("div",{className:`h-1 rounded-full transition-all ${i>=3?"bg-blue-500":"bg-gray-300"}`,style:{width:i>=3?"80px":"40px"}})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-10 pb-4 space-y-3",children:[i===1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("input",{value:l,onChange:$=>c($.target.value),className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500",placeholder:"Full Name",required:!0})}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:g,onChange:$=>y($.target.value),className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 pr-10 text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500 appearance-none",required:!0,children:[s.jsx("option",{value:"",children:"National Area"}),ue.map($=>s.jsx("option",{value:$,children:$},$))]}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:f,onChange:$=>h($.target.value),disabled:!g||N,className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 pr-10 text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500 disabled:opacity-50 disabled:cursor-not-allowed appearance-none",required:!0,children:[s.jsx("option",{value:"",children:N?"Loading regions...":g?"Regional Area":"Select national area first"}),x.map($=>s.jsx("option",{value:$,children:$},$))]}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:d,onChange:$=>u($.target.value),disabled:!f||C,className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 pr-10 text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500 disabled:opacity-50 disabled:cursor-not-allowed appearance-none",required:!0,children:[s.jsx("option",{value:"",children:C?"Loading local areas...":f?b.length===0?"No local areas found":"Local Area":"Select regional area first"}),b.map($=>s.jsx("option",{value:$,children:$},$))]}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),!C&&f&&b.length===0&&s.jsxs("p",{className:"text-xs text-red-500 mt-1.5 px-1",children:["No local areas found for ",f,". Check browser console for details or add Google Maps API key."]})]}),s.jsx("div",{children:s.jsx("input",{value:p,onChange:$=>S($.target.value),maxLength:8,placeholder:"Country Flag (emoji)",className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500"})})]}),i===2&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("input",{type:"email",value:W,onChange:$=>T($.target.value),className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500",placeholder:"Email",required:!0})}),s.jsx("div",{children:s.jsx("input",{type:"password",value:E,onChange:$=>B($.target.value),className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500",placeholder:"Password",required:!0})}),s.jsx("div",{children:s.jsx("input",{type:"password",value:H,onChange:$=>q($.target.value),className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500",placeholder:"Confirm Password",required:!0})}),s.jsx("div",{children:s.jsx("input",{type:"number",min:"13",max:"120",value:ie,onChange:$=>X($.target.value),className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500",placeholder:"Age (optional)"})}),s.jsxs("div",{className:"pt-2",children:[s.jsx("p",{className:"text-xs text-gray-400 mb-3 px-1",children:"Select up to 5 interests"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:"",onChange:$=>{const Z=$.target.value;Z&&!V.includes(Z)&&V.length<5&&F(Z),$.target.value=""},className:"w-full rounded-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 px-3 py-2.5 pr-10 text-sm text-gray-900 dark:text-gray-100 focus:outline-none focus:border-gray-400 dark:focus:border-gray-500 appearance-none",disabled:V.length>=5,children:[s.jsx("option",{value:"",children:"Select an interest"}),fe.filter($=>!V.includes($)).map($=>s.jsx("option",{value:$,children:$},$))]}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:s.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),V.length>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:V.map($=>s.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 text-white rounded-sm text-xs",children:[s.jsx("span",{children:$}),s.jsx("button",{type:"button",onClick:()=>F($),className:"hover:bg-blue-600 rounded-full p-0.5 transition-colors","aria-label":`Remove ${$}`,children:s.jsx(pt,{className:"w-3 h-3"})})]},$))}),V.length>=5&&s.jsx("p",{className:"text-xs text-gray-400 mt-2 px-1",children:"Maximum 5 interests selected"})]})]}),i===3&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx(It,{src:J||void 0,name:l||"User",size:"xl",className:"border-2 border-gray-300 dark:border-gray-600"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"block",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:Se,className:"hidden"}),s.jsxs("div",{className:"w-full px-4 py-2.5 bg-blue-500 text-white rounded-sm hover:bg-blue-600 transition-colors cursor-pointer text-center text-sm font-semibold",children:[s.jsx(Wd,{className:"inline w-4 h-4 mr-2"}),"Choose Photo"]})]}),J&&s.jsxs("button",{type:"button",onClick:de,className:"w-full px-4 py-2.5 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors text-center text-sm font-semibold",children:[s.jsx(pt,{className:"inline w-4 h-4 mr-2"}),"Remove Photo"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Your initials will be used if no photo is selected"})]})]})})]}),s.jsx("div",{className:"flex-shrink-0 px-10 pb-10 pt-6 border-t border-gray-700",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-blue-500 text-white rounded-sm hover:bg-blue-600 transition-colors text-sm font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:i===1||i===2?"Next":"Sign Up"}),(i===2||i===3)&&s.jsx("button",{type:"button",onClick:()=>o(i-1),className:"w-full px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm font-semibold",children:"Back"}),s.jsx("p",{className:"text-xs text-center text-gray-400 mt-4",children:i===1?"By signing up, you agree to the terms and conditions and community guidelines":"By signing up, you agree to connect with your local community"})]})})]})})})}/*!
* sweetalert2 v11.26.3
* Released under the MIT License.
*/function r_(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function XV(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kS(e,t){return e.get(r_(e,t))}function JV(e,t,n){XV(e,t),t.set(e,n)}function ZV(e,t,n){return e.set(r_(e,t),n),n}const QV=100,it={},eG=()=>{it.previousActiveElement instanceof HTMLElement?(it.previousActiveElement.focus(),it.previousActiveElement=null):document.body&&document.body.focus()},tG=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,r=window.scrollY;it.restoreFocusTimeout=setTimeout(()=>{eG(),t()},QV),window.scrollTo(n,r)}),s_="swal2-",nG=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],xe=nG.reduce((e,t)=>(e[t]=s_+t,e),{}),rG=["success","warning","info","question","error"],Qh=rG.reduce((e,t)=>(e[t]=s_+t,e),{}),a_="SweetAlert2:",Fv=e=>e.charAt(0).toUpperCase()+e.slice(1),Dr=e=>{console.warn(`${a_} ${typeof e=="object"?e.join(" "):e}`)},Bo=e=>{console.error(`${a_} ${e}`)},SS=[],sG=e=>{SS.includes(e)||(SS.push(e),Dr(e))},i_=(e,t=null)=>{sG(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},yp=e=>typeof e=="function"?e():e,Bv=e=>e&&typeof e.toPromise=="function",Du=e=>Bv(e)?e.toPromise():Promise.resolve(e),Ov=e=>e&&Promise.resolve(e)===e,Or=()=>document.body.querySelector(`.${xe.container}`),Fu=e=>{const t=Or();return t?t.querySelector(e):null},us=e=>Fu(`.${e}`),qt=()=>us(xe.popup),jc=()=>us(xe.icon),aG=()=>us(xe["icon-content"]),o_=()=>us(xe.title),Uv=()=>us(xe["html-container"]),l_=()=>us(xe.image),zv=()=>us(xe["progress-steps"]),bp=()=>us(xe["validation-message"]),fa=()=>Fu(`.${xe.actions} .${xe.confirm}`),Nc=()=>Fu(`.${xe.actions} .${xe.cancel}`),Oo=()=>Fu(`.${xe.actions} .${xe.deny}`),iG=()=>us(xe["input-label"]),Cc=()=>Fu(`.${xe.loader}`),Bu=()=>us(xe.actions),c_=()=>us(xe.footer),vp=()=>us(xe["timer-progress-bar"]),$v=()=>us(xe.close),oG=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Hv=()=>{const e=qt();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((i,o)=>{const l=parseInt(i.getAttribute("tabindex")||"0"),c=parseInt(o.getAttribute("tabindex")||"0");return l>c?1:l<c?-1:0}),r=e.querySelectorAll(oG),a=Array.from(r).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(i=>qr(i))},Wv=()=>La(document.body,xe.shown)&&!La(document.body,xe["toast-shown"])&&!La(document.body,xe["no-backdrop"]),wp=()=>{const e=qt();return e?La(e,xe.toast):!1},lG=()=>{const e=qt();return e?e.hasAttribute("data-loading"):!1},fs=(e,t)=>{if(e.textContent="",t){const r=new DOMParser().parseFromString(t,"text/html"),a=r.querySelector("head");a&&Array.from(a.childNodes).forEach(o=>{e.appendChild(o)});const i=r.querySelector("body");i&&Array.from(i.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?e.appendChild(o.cloneNode(!0)):e.appendChild(o)})}},La=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let r=0;r<n.length;r++)if(!e.classList.contains(n[r]))return!1;return!0},cG=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(xe).includes(n)&&!Object.values(Qh).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},ss=(e,t,n)=>{if(cG(e,t),!t.customClass)return;const r=t.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Dr(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Zt(e,r)}},kp=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${xe.popup} > .${xe[t]}`);case"checkbox":return e.querySelector(`.${xe.popup} > .${xe.checkbox} input`);case"radio":return e.querySelector(`.${xe.popup} > .${xe.radio} input:checked`)||e.querySelector(`.${xe.popup} > .${xe.radio} input:first-child`);case"range":return e.querySelector(`.${xe.popup} > .${xe.range} input`);default:return e.querySelector(`.${xe.popup} > .${xe.input}`)}},d_=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},u_=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(r=>{Array.isArray(e)?e.forEach(a=>{n?a.classList.add(r):a.classList.remove(r)}):n?e.classList.add(r):e.classList.remove(r)}))},Zt=(e,t)=>{u_(e,t,!0)},Ns=(e,t)=>{u_(e,t,!1)},pi=(e,t)=>{const n=Array.from(e.children);for(let r=0;r<n.length;r++){const a=n[r];if(a instanceof HTMLElement&&La(a,t))return a}},ko=(e,t,n)=>{n===`${parseInt(`${n}`)}`&&(n=parseInt(n)),n||parseInt(`${n}`)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},lr=(e,t="flex")=>{e&&(e.style.display=t)},kr=e=>{e&&(e.style.display="none")},Vv=(e,t="block")=>{e&&new MutationObserver(()=>{Ou(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},jS=(e,t,n,r)=>{const a=e.querySelector(t);a&&a.style.setProperty(n,r)},Ou=(e,t,n="flex")=>{t?lr(e,n):kr(e)},qr=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),dG=()=>!qr(fa())&&!qr(Oo())&&!qr(Nc()),Wx=e=>e.scrollHeight>e.clientHeight,uG=(e,t)=>{let n=e;for(;n&&n!==t;){if(Wx(n))return!0;n=n.parentElement}return!1},f_=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},Gv=(e,t=!1)=>{const n=vp();n&&qr(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},fG=()=>{const e=vp();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),r=t/n*100;e.style.width=`${r}%`},hG=()=>typeof window>"u"||typeof document>"u",mG=`
 <div aria-labelledby="${xe.title}" aria-describedby="${xe["html-container"]}" class="${xe.popup}" tabindex="-1">
   <button type="button" class="${xe.close}"></button>
   <ul class="${xe["progress-steps"]}"></ul>
   <div class="${xe.icon}"></div>
   <img class="${xe.image}" />
   <h2 class="${xe.title}" id="${xe.title}"></h2>
   <div class="${xe["html-container"]}" id="${xe["html-container"]}"></div>
   <input class="${xe.input}" id="${xe.input}" />
   <input type="file" class="${xe.file}" />
   <div class="${xe.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${xe.select}" id="${xe.select}"></select>
   <div class="${xe.radio}"></div>
   <label class="${xe.checkbox}">
     <input type="checkbox" id="${xe.checkbox}" />
     <span class="${xe.label}"></span>
   </label>
   <textarea class="${xe.textarea}" id="${xe.textarea}"></textarea>
   <div class="${xe["validation-message"]}" id="${xe["validation-message"]}"></div>
   <div class="${xe.actions}">
     <div class="${xe.loader}"></div>
     <button type="button" class="${xe.confirm}"></button>
     <button type="button" class="${xe.deny}"></button>
     <button type="button" class="${xe.cancel}"></button>
   </div>
   <div class="${xe.footer}"></div>
   <div class="${xe["timer-progress-bar-container"]}">
     <div class="${xe["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),pG=()=>{const e=Or();return e?(e.remove(),Ns([document.documentElement,document.body],[xe["no-backdrop"],xe["toast-shown"],xe["has-column"]]),!0):!1},eo=()=>{it.currentInstance.resetValidationMessage()},gG=()=>{const e=qt(),t=pi(e,xe.input),n=pi(e,xe.file),r=e.querySelector(`.${xe.range} input`),a=e.querySelector(`.${xe.range} output`),i=pi(e,xe.select),o=e.querySelector(`.${xe.checkbox} input`),l=pi(e,xe.textarea);t.oninput=eo,n.onchange=eo,i.onchange=eo,o.onchange=eo,l.oninput=eo,r.oninput=()=>{eo(),a.value=r.value},r.onchange=()=>{eo(),a.value=r.value}},xG=e=>typeof e=="string"?document.querySelector(e):e,yG=e=>{const t=qt();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},bG=e=>{window.getComputedStyle(e).direction==="rtl"&&Zt(Or(),xe.rtl)},vG=e=>{const t=pG();if(hG()){Bo("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=xe.container,t&&Zt(n,xe["no-transition"]),fs(n,mG),n.dataset.swal2Theme=e.theme;const r=xG(e.target);r.appendChild(n),e.topLayer&&(n.setAttribute("popover",""),n.showPopover()),yG(e),bG(r),gG()},Kv=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?wG(e,t):e&&fs(t,e)},wG=(e,t)=>{e.jquery?kG(t,e):fs(t,e.toString())},kG=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},SG=(e,t)=>{const n=Bu(),r=Cc();!n||!r||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?kr(n):lr(n),ss(n,t,"actions"),jG(n,r,t),fs(r,t.loaderHtml||""),ss(r,t,"loader"))};function jG(e,t,n){const r=fa(),a=Oo(),i=Nc();!r||!a||!i||(Pg(r,"confirm",n),Pg(a,"deny",n),Pg(i,"cancel",n),NG(r,a,i,n),n.reverseButtons&&(n.toast?(e.insertBefore(i,r),e.insertBefore(a,r)):(e.insertBefore(i,t),e.insertBefore(a,t),e.insertBefore(r,t))))}function NG(e,t,n,r){if(!r.buttonsStyling){Ns([e,t,n],xe.styled);return}Zt([e,t,n],xe.styled),r.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),Ig(e),Ig(t),Ig(n)}function Ig(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function Pg(e,t,n){const r=Fv(t);Ou(e,n[`show${r}Button`],"inline-block"),fs(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=xe[t],ss(e,n,`${t}Button`)}const CG=(e,t)=>{const n=$v();n&&(fs(n,t.closeButtonHtml||""),ss(n,t,"closeButton"),Ou(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},TG=(e,t)=>{const n=Or();n&&(EG(n,t.backdrop),_G(n,t.position),RG(n,t.grow),ss(n,t,"container"))};function EG(e,t){typeof t=="string"?e.style.background=t:t||Zt([document.documentElement,document.body],xe["no-backdrop"])}function _G(e,t){t&&(t in xe?Zt(e,xe[t]):(Dr('The "position" parameter is not valid, defaulting to "center"'),Zt(e,xe.center)))}function RG(e,t){t&&Zt(e,xe[`grow-${t}`])}var vn={innerParams:new WeakMap,domCache:new WeakMap};const LG=["input","file","range","select","radio","checkbox","textarea"],IG=(e,t)=>{const n=qt();if(!n)return;const r=vn.innerParams.get(e),a=!r||t.input!==r.input;LG.forEach(i=>{const o=pi(n,xe[i]);o&&(AG(i,t.inputAttributes),o.className=xe[i],a&&kr(o))}),t.input&&(a&&PG(t),DG(t))},PG=e=>{if(!e.input)return;if(!Gn[e.input]){Bo(`Unexpected type of input! Expected ${Object.keys(Gn).join(" | ")}, got "${e.input}"`);return}const t=h_(e.input);if(!t)return;const n=Gn[e.input](t,e);lr(t),e.inputAutoFocus&&setTimeout(()=>{d_(n)})},MG=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},AG=(e,t)=>{const n=qt();if(!n)return;const r=kp(n,e);if(r){MG(r);for(const a in t)r.setAttribute(a,t[a])}},DG=e=>{if(!e.input)return;const t=h_(e.input);t&&ss(t,e,"input")},Yv=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Uu=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),a=xe["input-label"];r.setAttribute("for",e.id),r.className=a,typeof n.customClass=="object"&&Zt(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},h_=e=>{const t=qt();if(t)return pi(t,xe[e]||xe.input)},em=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:Ov(t)||Dr(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Gn={};Gn.text=Gn.email=Gn.password=Gn.number=Gn.tel=Gn.url=Gn.search=Gn.date=Gn["datetime-local"]=Gn.time=Gn.week=Gn.month=(e,t)=>(em(e,t.inputValue),Uu(e,e,t),Yv(e,t),e.type=t.input,e);Gn.file=(e,t)=>(Uu(e,e,t),Yv(e,t),e);Gn.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return em(n,t.inputValue),n.type=t.input,em(r,t.inputValue),Uu(n,e,t),e};Gn.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");fs(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Uu(e,e,t),e};Gn.radio=e=>(e.textContent="",e);Gn.checkbox=(e,t)=>{const n=kp(qt(),"checkbox");n.value="1",n.checked=!!t.inputValue;const r=e.querySelector("span");return fs(r,t.inputPlaceholder||t.inputLabel),n};Gn.textarea=(e,t)=>{em(e,t.inputValue),Yv(e,t),Uu(e,e,t);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(qt()).width),a=()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+n(e);i>r?qt().style.width=`${i}px`:ko(qt(),"width",t.width)};new MutationObserver(a).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const FG=(e,t)=>{const n=Uv();n&&(Vv(n),ss(n,t,"htmlContainer"),t.html?(Kv(t.html,n),lr(n,"block")):t.text?(n.textContent=t.text,lr(n,"block")):kr(n),IG(e,t))},BG=(e,t)=>{const n=c_();n&&(Vv(n),Ou(n,!!t.footer,"block"),t.footer&&Kv(t.footer,n),ss(n,t,"footer"))},OG=(e,t)=>{const n=vn.innerParams.get(e),r=jc();if(!r)return;if(n&&t.icon===n.icon){CS(r,t),NS(r,t);return}if(!t.icon&&!t.iconHtml){kr(r);return}if(t.icon&&Object.keys(Qh).indexOf(t.icon)===-1){Bo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),kr(r);return}lr(r),CS(r,t),NS(r,t),Zt(r,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",m_)},NS=(e,t)=>{for(const[n,r]of Object.entries(Qh))t.icon!==n&&Ns(e,r);Zt(e,t.icon&&Qh[t.icon]),$G(e,t),m_(),ss(e,t,"icon")},m_=()=>{const e=qt();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=t},UG=e=>`
  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${e.animation?'<div class="swal2-success-fix"></div>':""}
  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,zG=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,CS=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=TS(t.iconHtml):t.icon==="success"?(r=UG(t),n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?r=zG:t.icon&&(r=TS({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&fs(e,r)},$G=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])jS(e,n,"background-color",t.iconColor);jS(e,".swal2-success-ring","border-color",t.iconColor)}},TS=e=>`<div class="${xe["icon-content"]}">${e}</div>`,HG=(e,t)=>{const n=l_();if(n){if(!t.imageUrl){kr(n);return}lr(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),ko(n,"width",t.imageWidth),ko(n,"height",t.imageHeight),n.className=xe.image,ss(n,t,"image")}};let qv=!1,p_=0,g_=0,x_=0,y_=0;const WG=e=>{e.addEventListener("mousedown",tm),document.body.addEventListener("mousemove",nm),e.addEventListener("mouseup",rm),e.addEventListener("touchstart",tm),document.body.addEventListener("touchmove",nm),e.addEventListener("touchend",rm)},VG=e=>{e.removeEventListener("mousedown",tm),document.body.removeEventListener("mousemove",nm),e.removeEventListener("mouseup",rm),e.removeEventListener("touchstart",tm),document.body.removeEventListener("touchmove",nm),e.removeEventListener("touchend",rm)},tm=e=>{const t=qt();if(e.target===t||jc().contains(e.target)){qv=!0;const n=b_(e);p_=n.clientX,g_=n.clientY,x_=parseInt(t.style.insetInlineStart)||0,y_=parseInt(t.style.insetBlockStart)||0,Zt(t,"swal2-dragging")}},nm=e=>{const t=qt();if(qv){let{clientX:n,clientY:r}=b_(e);t.style.insetInlineStart=`${x_+(n-p_)}px`,t.style.insetBlockStart=`${y_+(r-g_)}px`}},rm=()=>{const e=qt();qv=!1,Ns(e,"swal2-dragging")},b_=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},GG=(e,t)=>{const n=Or(),r=qt();if(!(!n||!r)){if(t.toast){ko(n,"width",t.width),r.style.width="100%";const a=Cc();a&&r.insertBefore(a,jc())}else ko(r,"width",t.width);ko(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),kr(bp()),KG(r,t),t.draggable&&!t.toast?(Zt(r,xe.draggable),WG(r)):(Ns(r,xe.draggable),VG(r))}},KG=(e,t)=>{const n=t.showClass||{};e.className=`${xe.popup} ${qr(e)?n.popup:""}`,t.toast?(Zt([document.documentElement,document.body],xe["toast-shown"]),Zt(e,xe.toast)):Zt(e,xe.modal),ss(e,t,"popup"),typeof t.customClass=="string"&&Zt(e,t.customClass),t.icon&&Zt(e,xe[`icon-${t.icon}`])},YG=(e,t)=>{const n=zv();if(!n)return;const{progressSteps:r,currentProgressStep:a}=t;if(!r||r.length===0||a===void 0){kr(n);return}lr(n),n.textContent="",a>=r.length&&Dr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((i,o)=>{const l=qG(i);if(n.appendChild(l),o===a&&Zt(l,xe["active-progress-step"]),o!==r.length-1){const c=XG(t);n.appendChild(c)}})},qG=e=>{const t=document.createElement("li");return Zt(t,xe["progress-step"]),fs(t,e),t},XG=e=>{const t=document.createElement("li");return Zt(t,xe["progress-step-line"]),e.progressStepsDistance&&ko(t,"width",e.progressStepsDistance),t},JG=(e,t)=>{const n=o_();n&&(Vv(n),Ou(n,!!(t.title||t.titleText),"block"),t.title&&Kv(t.title,n),t.titleText&&(n.innerText=t.titleText),ss(n,t,"title"))},v_=(e,t)=>{GG(e,t),TG(e,t),YG(e,t),OG(e,t),HG(e,t),JG(e,t),CG(e,t),FG(e,t),SG(e,t),BG(e,t);const n=qt();typeof t.didRender=="function"&&n&&t.didRender(n),it.eventEmitter.emit("didRender",n)},ZG=()=>qr(qt()),w_=()=>{var e;return(e=fa())===null||e===void 0?void 0:e.click()},QG=()=>{var e;return(e=Oo())===null||e===void 0?void 0:e.click()},eK=()=>{var e;return(e=Nc())===null||e===void 0?void 0:e.click()},Tc=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),k_=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},tK=(e,t,n)=>{k_(e),t.toast||(e.keydownHandler=r=>rK(t,r,n),e.keydownTarget=t.keydownListenerCapture?window:qt(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Vx=(e,t)=>{var n;const r=Hv();if(r.length){e=e+t,e===-2&&(e=r.length-1),e===r.length?e=0:e===-1&&(e=r.length-1),r[e].focus();return}(n=qt())===null||n===void 0||n.focus()},S_=["ArrowRight","ArrowDown"],nK=["ArrowLeft","ArrowUp"],rK=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?sK(t,e):t.key==="Tab"?aK(t):[...S_,...nK].includes(t.key)?iK(t.key):t.key==="Escape"&&oK(t,e,n)))},sK=(e,t)=>{if(!yp(t.allowEnterKey))return;const n=kp(qt(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;w_(),e.preventDefault()}},aK=e=>{const t=e.target,n=Hv();let r=-1;for(let a=0;a<n.length;a++)if(t===n[a]){r=a;break}e.shiftKey?Vx(r,-1):Vx(r,1),e.stopPropagation(),e.preventDefault()},iK=e=>{const t=Bu(),n=fa(),r=Oo(),a=Nc();if(!t||!n||!r||!a)return;const i=[n,r,a];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const o=S_.includes(e)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let c=0;c<t.children.length;c++){if(l=l[o],!l)return;if(l instanceof HTMLButtonElement&&qr(l))break}l instanceof HTMLButtonElement&&l.focus()}},oK=(e,t,n)=>{e.preventDefault(),yp(t.allowEscapeKey)&&n(Tc.esc)};var sc={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const lK=()=>{const e=Or();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},j_=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},N_=typeof window<"u"&&!!window.GestureEvent,cK=()=>{if(N_&&!La(document.body,xe.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,Zt(document.body,xe.iosfix),dK()}},dK=()=>{const e=Or();if(!e)return;let t;e.ontouchstart=n=>{t=uK(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},uK=e=>{const t=e.target,n=Or(),r=Uv();return!n||!r||fK(e)||hK(e)?!1:t===n||!Wx(n)&&t instanceof HTMLElement&&!uG(t,r)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Wx(r)&&r.contains(t))},fK=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",hK=e=>e.touches&&e.touches.length>1,mK=()=>{if(La(document.body,xe.iosfix)){const e=parseInt(document.body.style.top,10);Ns(document.body,xe.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},pK=()=>{const e=document.createElement("div");e.className=xe["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Il=null;const gK=e=>{Il===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(Il=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Il+pK()}px`)},xK=()=>{Il!==null&&(document.body.style.paddingRight=`${Il}px`,Il=null)};function C_(e,t,n,r){wp()?ES(e,r):(tG(n).then(()=>ES(e,r)),k_(it)),N_?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),Wv()&&(xK(),mK(),j_()),yK()}function yK(){Ns([document.documentElement,document.body],[xe.shown,xe["height-auto"],xe["no-backdrop"],xe["toast-shown"]])}function gi(e){e=vK(e);const t=sc.swalPromiseResolve.get(this),n=bK(this);this.isAwaitingPromise?e.isDismissed||(zu(this),t(e)):n&&t(e)}const bK=e=>{const t=qt();if(!t)return!1;const n=vn.innerParams.get(e);if(!n||La(t,n.hideClass.popup))return!1;Ns(t,n.showClass.popup),Zt(t,n.hideClass.popup);const r=Or();return Ns(r,n.showClass.backdrop),Zt(r,n.hideClass.backdrop),wK(e,t,n),!0};function T_(e){const t=sc.swalPromiseReject.get(this);zu(this),t&&t(e)}const zu=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,vn.innerParams.get(e)||e._destroy())},vK=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),wK=(e,t,n)=>{var r;const a=Or(),i=f_(t);typeof n.willClose=="function"&&n.willClose(t),(r=it.eventEmitter)===null||r===void 0||r.emit("willClose",t),i?kK(e,t,a,n.returnFocus,n.didClose):C_(e,a,n.returnFocus,n.didClose)},kK=(e,t,n,r,a)=>{it.swalCloseEventFinishedCallback=C_.bind(null,e,n,r,a);const i=function(o){if(o.target===t){var l;(l=it.swalCloseEventFinishedCallback)===null||l===void 0||l.call(it),delete it.swalCloseEventFinishedCallback,t.removeEventListener("animationend",i),t.removeEventListener("transitionend",i)}};t.addEventListener("animationend",i),t.addEventListener("transitionend",i)},ES=(e,t)=>{setTimeout(()=>{var n;typeof t=="function"&&t.bind(e.params)(),(n=it.eventEmitter)===null||n===void 0||n.emit("didClose"),e._destroy&&e._destroy()})},ac=e=>{let t=qt();if(t||new $e,t=qt(),!t)return;const n=Cc();wp()?kr(jc()):SK(t,e),lr(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},SK=(e,t)=>{const n=Bu(),r=Cc();!n||!r||(!t&&qr(fa())&&(t=fa()),lr(n),t&&(kr(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),Zt([e,n],xe.loading))},jK=(e,t)=>{t.input==="select"||t.input==="radio"?_K(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(Bv(t.inputValue)||Ov(t.inputValue))&&(ac(fa()),RK(e,t))},NK=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return CK(n);case"radio":return TK(n);case"file":return EK(n);default:return t.inputAutoTrim?n.value.trim():n.value}},CK=e=>e.checked?1:0,TK=e=>e.checked?e.value:null,EK=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,_K=(e,t)=>{const n=qt();if(!n)return;const r=a=>{t.input==="select"?LK(n,sm(a),t):t.input==="radio"&&IK(n,sm(a),t)};Bv(t.inputOptions)||Ov(t.inputOptions)?(ac(fa()),Du(t.inputOptions).then(a=>{e.hideLoading(),r(a)})):typeof t.inputOptions=="object"?r(t.inputOptions):Bo(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},RK=(e,t)=>{const n=e.getInput();n&&(kr(n),Du(t.inputValue).then(r=>{n.value=t.input==="number"?`${parseFloat(r)||0}`:`${r}`,lr(n),n.focus(),e.hideLoading()}).catch(r=>{Bo(`Error in inputValue promise: ${r}`),n.value="",lr(n),n.focus(),e.hideLoading()}))};function LK(e,t,n){const r=pi(e,xe.select);if(!r)return;const a=(i,o,l)=>{const c=document.createElement("option");c.value=l,fs(c,o),c.selected=E_(l,n.inputValue),i.appendChild(c)};t.forEach(i=>{const o=i[0],l=i[1];if(Array.isArray(l)){const c=document.createElement("optgroup");c.label=o,c.disabled=!1,r.appendChild(c),l.forEach(d=>a(c,d[1],d[0]))}else a(r,l,o)}),r.focus()}function IK(e,t,n){const r=pi(e,xe.radio);if(!r)return;t.forEach(i=>{const o=i[0],l=i[1],c=document.createElement("input"),d=document.createElement("label");c.type="radio",c.name=xe.radio,c.value=o,E_(o,n.inputValue)&&(c.checked=!0);const u=document.createElement("span");fs(u,l),u.className=xe.label,d.appendChild(c),d.appendChild(u),r.appendChild(d)});const a=r.querySelectorAll("input");a.length&&a[0].focus()}const sm=e=>{const t=[];return e instanceof Map?e.forEach((n,r)=>{let a=n;typeof a=="object"&&(a=sm(a)),t.push([r,a])}):Object.keys(e).forEach(n=>{let r=e[n];typeof r=="object"&&(r=sm(r)),t.push([n,r])}),t},E_=(e,t)=>!!t&&t.toString()===e.toString(),PK=e=>{const t=vn.innerParams.get(e);e.disableButtons(),t.input?__(e,"confirm"):Jv(e,!0)},MK=e=>{const t=vn.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?__(e,"deny"):Xv(e,!1)},AK=(e,t)=>{e.disableButtons(),t(Tc.cancel)},__=(e,t)=>{const n=vn.innerParams.get(e);if(!n.input){Bo(`The "input" parameter is needed to be set when using returnInputValueOn${Fv(t)}`);return}const r=e.getInput(),a=NK(e,n);n.inputValidator?DK(e,a,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):t==="deny"?Xv(e,a):Jv(e,a)},DK=(e,t,n)=>{const r=vn.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>Du(r.inputValidator(t,r.validationMessage))).then(i=>{e.enableButtons(),e.enableInput(),i?e.showValidationMessage(i):n==="deny"?Xv(e,t):Jv(e,t)})},Xv=(e,t)=>{const n=vn.innerParams.get(e||void 0);n.showLoaderOnDeny&&ac(Oo()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>Du(n.preDeny(t,n.validationMessage))).then(a=>{a===!1?(e.hideLoading(),zu(e)):e.close({isDenied:!0,value:typeof a>"u"?t:a})}).catch(a=>R_(e||void 0,a))):e.close({isDenied:!0,value:t})},_S=(e,t)=>{e.close({isConfirmed:!0,value:t})},R_=(e,t)=>{e.rejectPromise(t)},Jv=(e,t)=>{const n=vn.innerParams.get(e||void 0);n.showLoaderOnConfirm&&ac(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>Du(n.preConfirm(t,n.validationMessage))).then(a=>{qr(bp())||a===!1?(e.hideLoading(),zu(e)):_S(e,typeof a>"u"?t:a)}).catch(a=>R_(e||void 0,a))):_S(e,t)};function am(){const e=vn.innerParams.get(this);if(!e)return;const t=vn.domCache.get(this);kr(t.loader),wp()?e.icon&&lr(jc()):FK(t),Ns([t.popup,t.actions],xe.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const FK=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?lr(t[0],"inline-block"):dG()&&kr(e.actions)};function L_(){const e=vn.innerParams.get(this),t=vn.domCache.get(this);return t?kp(t.popup,e.input):null}function I_(e,t,n){const r=vn.domCache.get(e);t.forEach(a=>{r[a].disabled=n})}function P_(e,t){const n=qt();if(!(!n||!e))if(e.type==="radio"){const r=n.querySelectorAll(`[name="${xe.radio}"]`);for(let a=0;a<r.length;a++)r[a].disabled=t}else e.disabled=t}function M_(){I_(this,["confirmButton","denyButton","cancelButton"],!1)}function A_(){I_(this,["confirmButton","denyButton","cancelButton"],!0)}function D_(){P_(this.getInput(),!1)}function F_(){P_(this.getInput(),!0)}function B_(e){const t=vn.domCache.get(this),n=vn.innerParams.get(this);fs(t.validationMessage,e),t.validationMessage.className=xe["validation-message"],n.customClass&&n.customClass.validationMessage&&Zt(t.validationMessage,n.customClass.validationMessage),lr(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",xe["validation-message"]),d_(r),Zt(r,xe.inputerror))}function O_(){const e=vn.domCache.get(this);e.validationMessage&&kr(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ns(t,xe.inputerror))}const Pl={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},BK=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],OK={allowEnterKey:void 0},UK=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],U_=e=>Object.prototype.hasOwnProperty.call(Pl,e),z_=e=>BK.indexOf(e)!==-1,$_=e=>OK[e],zK=e=>{U_(e)||Dr(`Unknown parameter "${e}"`)},$K=e=>{UK.includes(e)&&Dr(`The parameter "${e}" is incompatible with toasts`)},HK=e=>{const t=$_(e);t&&i_(e,t)},H_=e=>{e.backdrop===!1&&e.allowOutsideClick&&Dr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&Dr(`Invalid theme "${e.theme}"`);for(const t in e)zK(t),e.toast&&$K(t),HK(t)};function W_(e){const t=Or(),n=qt(),r=vn.innerParams.get(this);if(!n||La(n,r.hideClass.popup)){Dr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=WK(e),i=Object.assign({},r,a);H_(i),t.dataset.swal2Theme=i.theme,v_(this,i),vn.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const WK=e=>{const t={};return Object.keys(e).forEach(n=>{z_(n)?t[n]=e[n]:Dr(`Invalid parameter to update: ${n}`)}),t};function V_(){const e=vn.domCache.get(this),t=vn.innerParams.get(this);if(!t){G_(this);return}e.popup&&it.swalCloseEventFinishedCallback&&(it.swalCloseEventFinishedCallback(),delete it.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),it.eventEmitter.emit("didDestroy"),VK(this)}const VK=e=>{G_(e),delete e.params,delete it.keydownHandler,delete it.keydownTarget,delete it.currentInstance},G_=e=>{e.isAwaitingPromise?(Mg(vn,e),e.isAwaitingPromise=!0):(Mg(sc,e),Mg(vn,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Mg=(e,t)=>{for(const n in e)e[n].delete(t)};var GK=Object.freeze({__proto__:null,_destroy:V_,close:gi,closeModal:gi,closePopup:gi,closeToast:gi,disableButtons:A_,disableInput:F_,disableLoading:am,enableButtons:M_,enableInput:D_,getInput:L_,handleAwaitingPromise:zu,hideLoading:am,rejectPromise:T_,resetValidationMessage:O_,showValidationMessage:B_,update:W_});const KK=(e,t,n)=>{e.toast?YK(e,t,n):(XK(t),JK(t),ZK(e,t,n))},YK=(e,t,n)=>{t.popup.onclick=()=>{e&&(qK(e)||e.timer||e.input)||n(Tc.close)}},qK=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let im=!1;const XK=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(im=!0)}}},JK=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(im=!0)}}},ZK=(e,t,n)=>{t.container.onclick=r=>{if(im){im=!1;return}r.target===t.container&&yp(e.allowOutsideClick)&&n(Tc.backdrop)}},QK=e=>typeof e=="object"&&e.jquery,RS=e=>e instanceof Element||QK(e),eY=e=>{const t={};return typeof e[0]=="object"&&!RS(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,r)=>{const a=e[r];typeof a=="string"||RS(a)?t[n]=a:a!==void 0&&Bo(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),t};function tY(...e){return new this(...e)}function nY(e){class t extends this{_main(r,a){return super._main(r,Object.assign({},e,a))}}return t}const rY=()=>it.timeout&&it.timeout.getTimerLeft(),K_=()=>{if(it.timeout)return fG(),it.timeout.stop()},Y_=()=>{if(it.timeout){const e=it.timeout.start();return Gv(e),e}},sY=()=>{const e=it.timeout;return e&&(e.running?K_():Y_())},aY=e=>{if(it.timeout){const t=it.timeout.increase(e);return Gv(t,!0),t}},iY=()=>!!(it.timeout&&it.timeout.isRunning());let LS=!1;const Gx={};function oY(e="data-swal-template"){Gx[e]=this,LS||(document.body.addEventListener("click",lY),LS=!0)}const lY=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in Gx){const r=t.getAttribute(n);if(r){Gx[n].fire({template:r});return}}};class cY{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const r=this._getHandlersByEventName(t);r.includes(n)||r.push(n)}once(t,n){const r=(...a)=>{this.removeListener(t,r),n.apply(this,a)};this.on(t,r)}emit(t,...n){this._getHandlersByEventName(t).forEach(r=>{try{r.apply(this,n)}catch(a){console.error(a)}})}removeListener(t,n){const r=this._getHandlersByEventName(t),a=r.indexOf(n);a>-1&&r.splice(a,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}it.eventEmitter=new cY;const dY=(e,t)=>{it.eventEmitter.on(e,t)},uY=(e,t)=>{it.eventEmitter.once(e,t)},fY=(e,t)=>{if(!e){it.eventEmitter.reset();return}t?it.eventEmitter.removeListener(e,t):it.eventEmitter.removeAllListeners(e)};var hY=Object.freeze({__proto__:null,argsToParams:eY,bindClickHandler:oY,clickCancel:eK,clickConfirm:w_,clickDeny:QG,enableLoading:ac,fire:tY,getActions:Bu,getCancelButton:Nc,getCloseButton:$v,getConfirmButton:fa,getContainer:Or,getDenyButton:Oo,getFocusableElements:Hv,getFooter:c_,getHtmlContainer:Uv,getIcon:jc,getIconContent:aG,getImage:l_,getInputLabel:iG,getLoader:Cc,getPopup:qt,getProgressSteps:zv,getTimerLeft:rY,getTimerProgressBar:vp,getTitle:o_,getValidationMessage:bp,increaseTimer:aY,isDeprecatedParameter:$_,isLoading:lG,isTimerRunning:iY,isUpdatableParameter:z_,isValidParameter:U_,isVisible:ZG,mixin:nY,off:fY,on:dY,once:uY,resumeTimer:Y_,showLoading:ac,stopTimer:K_,toggleTimer:sY});class mY{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const q_=["swal-title","swal-html","swal-footer"],pY=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return SY(n),Object.assign(gY(n),xY(n),yY(n),bY(n),vY(n),wY(n),kY(n,q_))},gY=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(r=>{Lo(r,["name","value"]);const a=r.getAttribute("name"),i=r.getAttribute("value");!a||!i||(typeof Pl[a]=="boolean"?t[a]=i!=="false":typeof Pl[a]=="object"?t[a]=JSON.parse(i):t[a]=i)}),t},xY=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(r=>{const a=r.getAttribute("name"),i=r.getAttribute("value");!a||!i||(t[a]=new Function(`return ${i}`)())}),t},yY=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(r=>{Lo(r,["type","color","aria-label"]);const a=r.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(t[`${a}ButtonText`]=r.innerHTML,t[`show${Fv(a)}Button`]=!0,r.hasAttribute("color")&&(t[`${a}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(t[`${a}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),t},bY=e=>{const t={},n=e.querySelector("swal-image");return n&&(Lo(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},vY=e=>{const t={},n=e.querySelector("swal-icon");return n&&(Lo(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},wY=e=>{const t={},n=e.querySelector("swal-input");n&&(Lo(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach(a=>{Lo(a,["value"]);const i=a.getAttribute("value");if(!i)return;const o=a.innerHTML;t.inputOptions[i]=o})),t},kY=(e,t)=>{const n={};for(const r in t){const a=t[r],i=e.querySelector(a);i&&(Lo(i,[]),n[a.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},SY=e=>{const t=q_.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const r=n.tagName.toLowerCase();t.includes(r)||Dr(`Unrecognized element <${r}>`)})},Lo=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&Dr([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},X_=10,jY=e=>{const t=Or(),n=qt();typeof e.willOpen=="function"&&e.willOpen(n),it.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;TY(t,n,e),setTimeout(()=>{NY(t,n)},X_),Wv()&&(CY(t,e.scrollbarPadding,a),lK()),!wp()&&!it.previousActiveElement&&(it.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),it.eventEmitter.emit("didOpen",n)},om=e=>{const t=qt();if(e.target!==t)return;const n=Or();t.removeEventListener("animationend",om),t.removeEventListener("transitionend",om),n.style.overflowY="auto",Ns(n,xe["no-transition"])},NY=(e,t)=>{f_(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",om),t.addEventListener("transitionend",om)):e.style.overflowY="auto"},CY=(e,t,n)=>{cK(),t&&n!=="hidden"&&gK(n),setTimeout(()=>{e.scrollTop=0})},TY=(e,t,n)=>{Zt(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),lr(t,"grid"),setTimeout(()=>{Zt(t,n.showClass.popup),t.style.removeProperty("opacity")},X_)):lr(t,"grid"),Zt([document.documentElement,document.body],xe.shown),n.heightAuto&&n.backdrop&&!n.toast&&Zt([document.documentElement,document.body],xe["height-auto"])};var IS={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function EY(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=IS.email),e.input==="url"&&(e.inputValidator=IS.url))}function _Y(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Dr('Target parameter is not valid, defaulting to "body"'),e.target="body")}function RY(e){EY(e),e.showLoaderOnConfirm&&!e.preConfirm&&Dr(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),_Y(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),vG(e)}let Js;var Rf=new WeakMap;class Xn{constructor(...t){if(JV(this,Rf,void 0),typeof window>"u")return;Js=this;const n=Object.freeze(this.constructor.argsToParams(t));this.params=n,this.isAwaitingPromise=!1,ZV(Rf,this,this._main(Js.params))}_main(t,n={}){if(H_(Object.assign({},n,t)),it.currentInstance){const i=sc.swalPromiseResolve.get(it.currentInstance),{isAwaitingPromise:o}=it.currentInstance;it.currentInstance._destroy(),o||i({isDismissed:!0}),Wv()&&j_()}it.currentInstance=Js;const r=IY(t,n);RY(r),Object.freeze(r),it.timeout&&(it.timeout.stop(),delete it.timeout),clearTimeout(it.restoreFocusTimeout);const a=PY(Js);return v_(Js,r),vn.innerParams.set(Js,r),LY(Js,a,r)}then(t){return kS(Rf,this).then(t)}finally(t){return kS(Rf,this).finally(t)}}const LY=(e,t,n)=>new Promise((r,a)=>{const i=o=>{e.close({isDismissed:!0,dismiss:o,isConfirmed:!1,isDenied:!1})};sc.swalPromiseResolve.set(e,r),sc.swalPromiseReject.set(e,a),t.confirmButton.onclick=()=>{PK(e)},t.denyButton.onclick=()=>{MK(e)},t.cancelButton.onclick=()=>{AK(e,i)},t.closeButton.onclick=()=>{i(Tc.close)},KK(n,t,i),tK(it,n,i),jK(e,n),jY(n),MY(it,n,i),AY(t,n),setTimeout(()=>{t.container.scrollTop=0})}),IY=(e,t)=>{const n=pY(e),r=Object.assign({},Pl,t,n,e);return r.showClass=Object.assign({},Pl.showClass,r.showClass),r.hideClass=Object.assign({},Pl.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},PY=e=>{const t={popup:qt(),container:Or(),actions:Bu(),confirmButton:fa(),denyButton:Oo(),cancelButton:Nc(),loader:Cc(),closeButton:$v(),validationMessage:bp(),progressSteps:zv()};return vn.domCache.set(e,t),t},MY=(e,t,n)=>{const r=vp();kr(r),t.timer&&(e.timeout=new mY(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(lr(r),ss(r,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&Gv(t.timer)})))},AY=(e,t)=>{if(!t.toast){if(!yp(t.allowEnterKey)){i_("allowEnterKey"),BY();return}DY(e)||FY(e,t)||Vx(-1,1)}},DY=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&qr(n))return n.focus(),!0;return!1},FY=(e,t)=>t.focusDeny&&qr(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&qr(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&qr(e.confirmButton)?(e.confirmButton.focus(),!0):!1,BY=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Xn.prototype.disableButtons=A_;Xn.prototype.enableButtons=M_;Xn.prototype.getInput=L_;Xn.prototype.disableInput=F_;Xn.prototype.enableInput=D_;Xn.prototype.hideLoading=am;Xn.prototype.disableLoading=am;Xn.prototype.showValidationMessage=B_;Xn.prototype.resetValidationMessage=O_;Xn.prototype.close=gi;Xn.prototype.closePopup=gi;Xn.prototype.closeModal=gi;Xn.prototype.closeToast=gi;Xn.prototype.rejectPromise=T_;Xn.prototype.update=W_;Xn.prototype._destroy=V_;Object.assign(Xn,hY);Object.keys(GK).forEach(e=>{Xn[e]=function(...t){return Js&&Js[e]?Js[e](...t):null}});Xn.DismissReason=Tc;Xn.version="11.26.3";const $e=Xn;$e.default=$e;typeof document<"u"&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const J_="user_drafts";async function Z_(){try{return await Vb(J_)||[]}catch(e){return console.error("Error getting drafts:",e),[]}}async function OY(e){try{const t=await Z_(),n={...e,id:`draft_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:Date.now(),updatedAt:Date.now()};return t.push(n),await Gb(J_,t),n}catch(t){throw console.error("Error saving draft:",t),t}}function UY(){var Pe,ve,re,M,G,P,Y;const{user:e,logout:t,login:n}=tn(),r=Xt(),[a,i]=m.useState(!1),[o,l]=m.useState((e==null?void 0:e.bio)||""),[c,d]=m.useState({website:((Pe=e==null?void 0:e.socialLinks)==null?void 0:Pe.website)||"",x:((ve=e==null?void 0:e.socialLinks)==null?void 0:ve.x)||"",instagram:((re=e==null?void 0:e.socialLinks)==null?void 0:re.instagram)||"",tiktok:((M=e==null?void 0:e.socialLinks)==null?void 0:M.tiktok)||""}),[u,f]=m.useState((e==null?void 0:e.countryFlag)||""),[h,g]=m.useState([]);m.useState(!1),m.useState(!1),m.useState(!1);const[y,p]=m.useState([]),[S,x]=m.useState((e==null?void 0:e.is_private)||!1),[v,b]=m.useState(!1),[w,N]=m.useState(null),[R,C]=m.useState(0),[_,W]=m.useState(((G=e==null?void 0:e.placesTraveled)==null?void 0:G.join(", "))||""),[T,E]=m.useState(!1),[B,H]=m.useState((e==null?void 0:e.national)||""),[q,ie]=m.useState((e==null?void 0:e.regional)||""),[X,V]=m.useState((e==null?void 0:e.local)||""),[z,J]=m.useState([]),[U,ue]=m.useState([]),[fe,Ae]=m.useState(!1),[_e,Re]=m.useState(!1),Se=["Ireland","United Kingdom","France","Germany","Spain","Italy","Netherlands","Belgium","Portugal","Greece","Poland","Sweden","Austria","Switzerland","Denmark","Finland","Norway","Czech Republic","Romania","Hungary","Croatia","Slovakia","Bulgaria","Slovenia","Lithuania","Latvia","Estonia","Luxembourg","Malta","Cyprus","Iceland","Liechtenstein","Monaco","Andorra","San Marino","Vatican City","United States","Canada","Mexico","Brazil","Argentina","Chile","Colombia","Peru","Venezuela","Ecuador","Guatemala","Cuba","Haiti","Dominican Republic","Honduras","El Salvador","Nicaragua","Costa Rica","Panama","Uruguay","Paraguay","Bolivia","Jamaica","Trinidad and Tobago","Guyana","Suriname","Belize","Bahamas","Barbados","Saint Lucia","Grenada","Saint Vincent and the Grenadines","Antigua and Barbuda","Dominica","Saint Kitts and Nevis","China","India","Japan","South Korea","Indonesia","Thailand","Vietnam","Philippines","Malaysia","Singapore","Myanmar","Cambodia","Laos","Bangladesh","Pakistan","Afghanistan","Sri Lanka","Nepal","Kazakhstan","Uzbekistan","Iraq","Saudi Arabia","United Arab Emirates","Israel","Jordan","Lebanon","Yemen","Oman","Palestine","Kuwait","Georgia","Mongolia","Armenia","Qatar","Bahrain","Timor-Leste","Bhutan","Maldives","Brunei","Iran","Syria","Nigeria","Ethiopia","Egypt","South Africa","Kenya","Uganda","Tanzania","Algeria","Sudan","Morocco","Angola","Mozambique","Ghana","Madagascar","Cameroon","Ivory Coast","Niger","Burkina Faso","Mali","Malawi","Zambia","Senegal","Chad","Somalia","Zimbabwe","Guinea","Rwanda","Benin","Tunisia","Burundi","South Sudan","Togo","Sierra Leone","Libya","Eritrea","Central African Republic","Liberia","Mauritania","Namibia","Botswana","Gambia","Gabon","Lesotho","Guinea-Bissau","Equatorial Guinea","Mauritius","Eswatini","Djibouti","Comoros","Cape Verde","So Tom and Prncipe","Seychelles","Australia","New Zealand","Papua New Guinea","Fiji","Solomon Islands","Vanuatu","New Caledonia","French Polynesia","Samoa","Guam","Kiribati","Micronesia","Tonga","Marshall Islands","Palau","American Samoa","Northern Mariana Islands","Cook Islands","Tuvalu","Wallis and Futuna","Nauru","Niue","Tokelau","Pitcairn Islands"];m.useEffect(()=>{e!=null&&e.bio&&l(e.bio)},[e==null?void 0:e.bio]),m.useEffect(()=>{e!=null&&e.placesTraveled?W(e.placesTraveled.join(", ")):W("")},[e==null?void 0:e.placesTraveled]),m.useEffect(()=>{e!=null&&e.socialLinks&&d(e.socialLinks)},[e==null?void 0:e.socialLinks]),m.useEffect(()=>{(e==null?void 0:e.is_private)!==void 0&&x(e.is_private)},[e==null?void 0:e.is_private]),m.useEffect(()=>{e&&(H(e.national||""),ie(e.regional||""),V(e.local||""))},[e==null?void 0:e.national,e==null?void 0:e.regional,e==null?void 0:e.local]),m.useEffect(()=>{w==="location"&&(B?(Ae(!0),J([]),(e==null?void 0:e.national)!==B&&(ie(""),V(""),ue([])),e_(B).then(j=>{J(j.map(O=>O.name)),Ae(!1)}).catch(j=>{console.error("Error loading regions:",j),Ae(!1)})):(J([]),ue([])))},[B,w,e==null?void 0:e.national]),m.useEffect(()=>{w==="location"&&(q&&B?(Re(!0),ue([]),(e==null?void 0:e.regional)!==q&&V(""),t_(q,B).then(j=>{ue(j.map(O=>O.name)),Re(!1)}).catch(j=>{console.error("Error loading local areas:",j),Re(!1)})):q||ue([]))},[q,B,w,e==null?void 0:e.regional]),m.useEffect(()=>{e!=null&&e.id&&de()},[e==null?void 0:e.id]),m.useEffect(()=>{F()},[]),m.useEffect(()=>{if(!(e!=null&&e.handle))return;const j=async()=>{try{const K=await sp(e.handle);C(K)}catch(K){console.error("Error fetching unread count:",K)}};j();const O=setInterval(j,1e4),se=K=>{var Ve,De;const me=(Ve=K.detail)==null?void 0:Ve.handle,pe=((De=K.detail)==null?void 0:De.unread)??0;me===e.handle&&C(pe)};return window.addEventListener("inboxUnreadChanged",se),()=>{clearInterval(O),window.removeEventListener("inboxUnreadChanged",se)}},[e==null?void 0:e.handle]);async function de(){if(e!=null&&e.id)try{const j=await R4(e.id);g(j)}catch(j){console.error("Error loading collections:",j)}}async function F(){try{const j=await Z_();p(j)}catch(j){console.error("Error loading drafts:",j)}}const $=async()=>{if(!(v||!e)){b(!0);try{const j=!S;if(!j&&!(await $e.fire({title:"Set Profile to Public?",html:`
            <div style="text-align: center; padding: 20px 0;">
              <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                Your posts and stories will still be public on locations news feed.
              </p>
            </div>
          `,showCancelButton:!0,confirmButtonText:"Set to Public",cancelButtonText:"Cancel",confirmButtonColor:"#0095f6",cancelButtonColor:"#ffffff",background:"#262626",color:"#ffffff",customClass:{popup:"instagram-style-modal",title:"instagram-modal-title",htmlContainer:"instagram-modal-content",confirmButton:"instagram-confirm-btn",cancelButton:"instagram-cancel-btn",actions:"instagram-modal-actions"},buttonsStyling:!0,reverseButtons:!1,focusConfirm:!1,focusCancel:!1})).isConfirmed){b(!1);return}const O={...e,is_private:j};x(j),n(O),e.handle&&Xc(e.handle,j),$e.fire({title:j?"Profile Set to Private":"Profile Set to Public",html:`
          <div style="text-align: center; padding: 20px 0;">
            <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
              ${j?"Your profile is now private. Only approved followers can view your profile and send you messages.":"Your profile is now public. Anyone can view your profile and send you messages."}
            </p>
          </div>
        `,showConfirmButton:!0,confirmButtonText:"Done",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff",customClass:{popup:"instagram-style-modal",title:"instagram-modal-title",htmlContainer:"instagram-modal-content",confirmButton:"instagram-confirm-btn",actions:"instagram-modal-actions"},buttonsStyling:!0,timer:3e3,timerProgressBar:!1})}catch(j){console.error("Error toggling privacy:",j),$e.fire({title:"Error",text:"Failed to update privacy settings",icon:"error"})}finally{b(!1)}}},Z=async j=>{var se;const O=(se=j.target.files)==null?void 0:se[0];if(console.log("File selected:",O),O){i(!0);try{const K=new FileReader;K.onload=me=>{var De;const pe=(De=me.target)==null?void 0:De.result;console.log("New avatar URL:",pe);const Ve={...e,avatarUrl:pe};console.log("Updated user:",Ve),n(Ve),i(!1)},K.readAsDataURL(O)}catch(K){console.error("Error updating profile picture:",K),i(!1)}}};return e?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-brand-100 dark:from-gray-900 dark:to-gray-800",children:[s.jsx("div",{className:"sticky top-0 z-[100] bg-gradient-to-br from-brand-50/95 to-brand-100/95 dark:from-gray-900/95 dark:to-gray-800/95 backdrop-blur-md border-b border-gray-200/50 dark:border-gray-700/50 shadow-sm",children:s.jsx("div",{className:"max-w-2xl mx-auto px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(It,{src:e==null?void 0:e.avatarUrl,name:(e==null?void 0:e.name)||"User",size:"sm",className:"cursor-pointer",onClick:()=>E(!0)})}),s.jsx("div",{className:"flex-1 flex justify-center",children:s.jsx("h1",{className:"text-2xl font-bold passport-shimmer",children:"Passport"})}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx("button",{onClick:$,disabled:v,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:S?"Profile is private - Click to make public":"Profile is public - Click to make private","aria-label":S?"Make profile public":"Make profile private",children:S?s.jsx(Oh,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}):s.jsx(bU,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})})})]})})}),s.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4",children:[T&&s.jsx(s.Fragment,{children:s.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center",onClick:()=>E(!1),children:s.jsxs("div",{className:"relative flex flex-col items-center gap-6",onClick:j=>j.stopPropagation(),children:[s.jsx("div",{className:"relative",children:s.jsx("div",{className:"w-48 h-48 rounded-full overflow-hidden border-4 border-white dark:border-gray-800 shadow-2xl",children:e.avatarUrl?s.jsx("img",{src:e.avatarUrl,alt:`${e.name}'s profile picture`,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:s.jsx("span",{className:"text-6xl font-bold text-white",children:((P=e.name)==null?void 0:P.charAt(0).toUpperCase())||"U"})})})}),s.jsxs("label",{className:"cursor-pointer",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 px-6 py-3 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105",children:[s.jsx(Wd,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Change"})]}),s.jsx("input",{type:"file",accept:"image/*",onChange:j=>{Z(j),E(!1)},className:"hidden",disabled:a})]}),s.jsx("button",{onClick:()=>E(!1),className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6 text-white"})})]})})}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:e.name}),s.jsxs("p",{className:"text-brand-600 dark:text-brand-400 font-medium",children:["@",e.handle]}),S&&s.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2 flex items-center justify-center gap-1",children:[s.jsx(Oh,{className:"w-3 h-3"}),"Your profile is private"]})]}),s.jsx("div",{className:"px-4 py-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>N("bio"),className:"flex flex-col items-center gap-2 p-4 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200 group border-2 border-dashed border-pink-400 dark:border-pink-500 hover:border-pink-500 dark:hover:border-pink-400",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 group-hover:from-pink-100 group-hover:to-pink-200 dark:group-hover:from-pink-900 dark:group-hover:to-pink-800 transition-all duration-200",children:s.jsx(Pb,{className:"w-6 h-6 text-gray-600 dark:text-gray-400 group-hover:text-pink-600 dark:group-hover:text-pink-400 transition-colors"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Bio"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:o?"Edit bio":"Add bio"})]})]}),s.jsxs("button",{onClick:()=>N("social"),className:"flex flex-col items-center gap-2 p-4 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200 group border-2 border-dashed border-green-400 dark:border-green-500 hover:border-green-500 dark:hover:border-green-400",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 group-hover:from-green-100 group-hover:to-green-200 dark:group-hover:from-green-900 dark:group-hover:to-green-800 transition-all duration-200",children:s.jsx(lU,{className:"w-6 h-6 text-gray-600 dark:text-gray-400 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Social Links"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Add links"})]})]}),s.jsxs("button",{onClick:()=>N("personal"),className:"flex flex-col items-center gap-2 p-4 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200 group border-2 border-dashed border-orange-400 dark:border-orange-500 hover:border-orange-500 dark:hover:border-orange-400",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 group-hover:from-orange-100 group-hover:to-orange-200 dark:group-hover:from-orange-900 dark:group-hover:to-orange-800 transition-all duration-200",children:s.jsx(xc,{className:"w-6 h-6 text-gray-600 dark:text-gray-400 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Travel Info"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Edit details"})]})]}),s.jsxs("button",{onClick:()=>N("location"),className:"flex flex-col items-center gap-2 p-4 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200 group border-2 border-dashed border-blue-400 dark:border-blue-500 hover:border-blue-500 dark:hover:border-blue-400",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 group-hover:from-blue-100 group-hover:to-blue-200 dark:group-hover:from-blue-900 dark:group-hover:to-blue-800 transition-all duration-200",children:s.jsx(ln,{className:"w-6 h-6 text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Location"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Set location"})]})]}),s.jsxs("button",{onClick:()=>N("interests"),className:"flex flex-col items-center gap-2 p-4 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200 group border-2 border-dashed border-yellow-400 dark:border-yellow-500 hover:border-yellow-500 dark:hover:border-yellow-400",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 group-hover:from-yellow-100 group-hover:to-yellow-200 dark:group-hover:from-yellow-900 dark:group-hover:to-yellow-800 transition-all duration-200",children:s.jsx(Ba,{className:"w-6 h-6 text-gray-600 dark:text-gray-400 group-hover:text-yellow-600 dark:group-hover:text-yellow-400 transition-colors"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Interests"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Add interests"})]})]}),s.jsxs("button",{onClick:()=>N("flag"),className:"flex flex-col items-center gap-2 p-4 rounded-xl cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-all duration-200 group border-2 border-dashed border-red-400 dark:border-red-500 hover:border-red-500 dark:hover:border-red-400",children:[s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 group-hover:from-red-100 group-hover:to-red-200 dark:group-hover:from-red-900 dark:group-hover:to-red-800 transition-all duration-200",children:s.jsx(yE,{className:"w-6 h-6 text-gray-600 dark:text-gray-400 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:"Country Flag"}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Select flag"})]})]})]})})]}),w&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:()=>N(null)}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 rounded-t-3xl shadow-2xl transition-transform duration-300 ease-out translate-y-0",style:{maxHeight:"85vh"},children:[s.jsx("div",{className:"flex items-center justify-center pt-3 pb-2",children:s.jsx("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:[w==="bio"&&"Edit Bio",w==="social"&&"Social Links",w==="personal"&&"Travel Information",w==="location"&&"Location Settings",w==="interests"&&"Interests",w==="flag"&&"Country Flag"]}),s.jsx("button",{onClick:()=>N(null),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[w==="bio"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),s.jsx("textarea",{value:o,onChange:j=>l(j.target.value),placeholder:"Tell us about yourself...",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 resize-none focus:ring-2 focus:ring-brand-500 focus:border-transparent",rows:6}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This will be visible on your profile"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:e.email||"",disabled:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 cursor-not-allowed"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Email cannot be changed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Age"}),s.jsx("input",{type:"number",value:e.age||"",onChange:j=>{const O=parseInt(j.target.value)||void 0;n({...e,age:O})},placeholder:"Enter your age",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),s.jsx("div",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Active"})]}),s.jsx("button",{onClick:()=>{const j={...e,bio:o};n(j),N(null)},className:"w-full py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Save Bio"})]}),w==="social"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),s.jsx("input",{type:"text",value:c.website,onChange:j=>d({...c,website:j.target.value}),placeholder:"https://example.com",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"X (Twitter)"}),s.jsx("input",{type:"text",value:c.x,onChange:j=>d({...c,x:j.target.value}),placeholder:"@username",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Instagram"}),s.jsx("input",{type:"text",value:c.instagram,onChange:j=>d({...c,instagram:j.target.value}),placeholder:"@username",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"TikTok"}),s.jsx("input",{type:"text",value:c.tiktok,onChange:j=>d({...c,tiktok:j.target.value}),placeholder:"@username",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),s.jsx("button",{onClick:()=>{const j={...e,socialLinks:c};n(j),N(null)},className:"w-full py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Save Social Links"})]}),w==="personal"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Places You've Traveled To"}),s.jsx("input",{type:"text",value:_,onChange:j=>W(j.target.value),placeholder:"e.g., Paris, London, Tokyo, New York",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Separate multiple places with commas"})]}),e.placesTraveled&&e.placesTraveled.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Places"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.placesTraveled.map((j,O)=>s.jsx("span",{className:"px-3 py-1.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white text-sm font-medium rounded-full",children:j},O))})]}),s.jsx("button",{onClick:()=>{const j=_.split(",").map(se=>se.trim()).filter(se=>se),O={...e,placesTraveled:j};n(O),N(null)},className:"w-full py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Save Travel Info"})]}),w==="location"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["National (Country) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:B,onChange:j=>{H(j.target.value)},className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-brand-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a country"}),Se.map(j=>s.jsx("option",{value:j,children:j},j))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Regional (State/Province/City) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),fe?s.jsxs("div",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex items-center justify-center",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-brand-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"Loading regions..."})]}):z.length>0?s.jsxs("select",{value:q,onChange:j=>{ie(j.target.value)},disabled:!B,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-brand-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("option",{value:"",children:"Select a region"}),z.map(j=>s.jsx("option",{value:j,children:j},j))]}):B?s.jsx("input",{type:"text",value:q,onChange:j=>ie(j.target.value),placeholder:"e.g., Dublin, Paris, London",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"}):s.jsx("input",{type:"text",value:q,onChange:j=>ie(j.target.value),placeholder:"Select country first",disabled:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 placeholder-gray-400 dark:placeholder-gray-500 cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Local (Neighborhood/Town) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),_e?s.jsxs("div",{className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex items-center justify-center",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-brand-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"Loading local areas..."})]}):U.length>0?s.jsxs("select",{value:X,onChange:j=>{V(j.target.value)},disabled:!q,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-brand-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("option",{value:"",children:"Select a local area"}),U.map(j=>s.jsx("option",{value:j,children:j},j))]}):q?s.jsx("input",{type:"text",value:X,onChange:j=>V(j.target.value),placeholder:"e.g., Finglas, Montmartre, Camden",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"}):s.jsx("input",{type:"text",value:X,onChange:j=>V(j.target.value),placeholder:"Select region first",disabled:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-500 dark:text-gray-400 placeholder-gray-400 dark:placeholder-gray-500 cursor-not-allowed"})]}),s.jsx("button",{onClick:()=>{if(!B||!q||!X){$e.fire({title:"Missing Information",text:"Please fill in all location fields (National, Regional, and Local)",icon:"warning",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff",customClass:{popup:"instagram-style-modal",title:"instagram-modal-title",htmlContainer:"instagram-modal-content",confirmButton:"instagram-confirm-btn",actions:"instagram-modal-actions"}});return}const j={...e,national:B,regional:q,local:X};n(j),N(null),window.dispatchEvent(new CustomEvent("locationUpdated",{detail:{national:B,regional:q,local:X}}))},className:"w-full py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Save Location"})]}),w==="interests"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Interests (comma-separated)"}),s.jsx("input",{type:"text",value:((Y=e.interests)==null?void 0:Y.join(", "))||"",onChange:j=>{const O=j.target.value.split(",").map(se=>se.trim()).filter(se=>se);n({...e,interests:O})},placeholder:"e.g., Technology, Travel, Food",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Separate multiple interests with commas"})]}),e.interests&&e.interests.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Interests"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.interests.map((j,O)=>s.jsx("span",{className:"px-3 py-1.5 bg-gradient-to-r from-brand-500 to-brand-600 text-white text-sm font-medium rounded-full",children:j},O))})]}),s.jsx("button",{onClick:()=>N(null),className:"w-full py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Save Interests"})]}),w==="flag"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pick a flag"}),s.jsx("div",{className:"grid grid-cols-8 gap-2",children:["IE","GB","FR","ES","IT","DE","PT","NL","US","CA","BR","MX","AU","NZ","JP","CN","IN","PK","ZA","KE","EG","TR","RU","UA"].map(j=>s.jsx("button",{type:"button",onClick:()=>{f(j),n({...e,countryFlag:j})},className:`h-12 rounded-md flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${u===j?"ring-2 ring-brand-500 bg-brand-50 dark:bg-brand-900/20":""} px-1`,"aria-label":`Select flag ${j}`,children:s.jsx($s,{value:j,size:24})},j))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Or paste your flag emoji"}),s.jsx("input",{value:u,onChange:j=>f(j.target.value),maxLength:8,placeholder:"",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent text-2xl"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This flag shows beside your handle on feed and profile."})]}),s.jsx("button",{onClick:()=>{n({...e,countryFlag:u}),N(null)},className:"w-full py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Save Flag"})]})]})]})]})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-brand-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Not Signed In"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please sign in to view your profile"}),s.jsx("button",{onClick:()=>r("/login"),className:"px-6 py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Sign In"})]})})}function zY(){var v,b,w,N,R,C,_,W,T;const e=Xt(),[t,n]=m.useState(""),[r,a]=m.useState({}),[i,o]=m.useState(0),[l,c]=m.useState(null),[d,u]=m.useState(!1),[f,h]=m.useState("locations"),[g,y]=m.useState(!1);m.useEffect(()=>{const E=setInterval(()=>{o(B=>(B+1)%2)},2500);return()=>clearInterval(E)},[]);const p=["Search for stories by location","Search for people on Gazetteer"];m.useEffect(()=>{const E=t.trim(),B=setTimeout(()=>{if(!E){a({});return}yl({q:E,types:"users,locations,posts",usersLimit:10,locationsLimit:10,postsLimit:12}).then(H=>a(H.sections)).catch(()=>a({}))},250);return()=>clearTimeout(B)},[t]),m.useEffect(()=>{Vh("Sarah@Artane",30).then(c).catch(()=>c([]))},[]);const S=E=>{sessionStorage.setItem("pendingLocation",E),window.dispatchEvent(new CustomEvent("locationChange",{detail:{location:E}})),e("/feed?location="+encodeURIComponent(E))},x=E=>{e("/user/"+encodeURIComponent(E))};return s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",value:t,onChange:E=>n(E.target.value),onFocus:()=>{u(!0),y(!0)},onBlur:()=>y(!1),placeholder:"",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-brand-500 focus:border-transparent"}),!t&&s.jsx("div",{className:"pointer-events-none absolute left-10 right-4 top-1/2 -translate-y-1/2 select-none z-10",children:s.jsx("span",{style:{background:"linear-gradient(90deg, #87ceeb, #ffb6c1, #87cefa, #c084fc, #34d399, #f59e0b, #ef4444, #dc2626, #fca5a5, #60a5fa, #fb7185, #87ceeb)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",animation:"shimmer 6s linear infinite"},children:p[i]})})]}),!d&&!t.trim()&&l&&s.jsx("div",{className:"px-1",children:s.jsx("div",{className:"grid grid-cols-3 gap-1",children:l.map(E=>s.jsxs("div",{className:"aspect-square relative group bg-gray-900",children:[E.mediaUrl?E.mediaType==="video"?s.jsx("video",{src:E.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}):s.jsx("img",{src:E.mediaUrl,alt:"",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full relative flex items-center justify-center p-3",style:{background:"#0f172a"},children:s.jsx("p",{className:"text-white text-xs font-semibold text-center line-clamp-6",children:E.text||"No preview"})}),E.locationLabel&&s.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black/70 rounded flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3 text-white"}),s.jsx("span",{className:"text-[10px] text-white font-medium",children:E.locationLabel})]}),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-opacity"})]},E.id))})}),d&&t.trim()&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-2",children:["locations","users","posts"].map(E=>{var H,q,ie,X,V,z;const B=E==="locations"?((q=(H=r.locations)==null?void 0:H.items)==null?void 0:q.length)||0:E==="users"?((X=(ie=r.users)==null?void 0:ie.items)==null?void 0:X.length)||0:((z=(V=r.posts)==null?void 0:V.items)==null?void 0:z.length)||0;return s.jsxs("button",{onClick:()=>h(E),className:`px-3 py-1.5 rounded-full text-sm border ${f===E?"bg-blue-600 text-white border-blue-600":"bg-transparent text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-700"}`,children:[E.charAt(0).toUpperCase()+E.slice(1),B?` (${B})`:""]},E)})}),f==="locations"&&s.jsxs("div",{children:[(b=(v=r.locations)==null?void 0:v.items)!=null&&b.length?s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800 rounded-lg border border-gray-200 dark:border-gray-800 overflow-hidden",children:r.locations.items.map(E=>s.jsxs("button",{onClick:()=>S(E.name),className:"w-full text-left flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-brand-100 dark:bg-brand-900 flex items-center justify-center",children:s.jsx(ln,{className:"text-brand-600 dark:text-brand-400"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:E.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[E.type,E.country?`  ${E.country}`:""]})]})]},`${E.name}-${E.country||""}`))}):s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No matching locations"}),((w=r.locations)==null?void 0:w.nextCursor)!=null&&s.jsx("button",{onClick:async()=>{var B;const E=await yl({q:t.trim(),types:"locations",locationsCursor:((B=r.locations)==null?void 0:B.nextCursor)||0,locationsLimit:10});a(H=>{var q,ie,X;return{...H,locations:{items:[...((q=H.locations)==null?void 0:q.items)||[],...((ie=E.sections.locations)==null?void 0:ie.items)||[]],nextCursor:((X=E.sections.locations)==null?void 0:X.nextCursor)??null}}})},className:"mt-3 w-full py-2 rounded-lg border border-gray-300 dark:border-gray-700 text-sm",children:"Load more"})]}),f==="users"&&s.jsxs("div",{children:[(R=(N=r.users)==null?void 0:N.items)!=null&&R.length?s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-800 rounded-lg border border-gray-200 dark:border-gray-800 overflow-hidden",children:r.users.items.map(E=>s.jsxs("button",{onClick:()=>x(E.handle),className:"w-full text-left flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:s.jsx(jU,{className:"text-gray-700 dark:text-gray-200"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:E.handle}),E.display_name&&s.jsx("div",{className:"text-xs text-gray-500",children:E.display_name})]})]},E.handle))}):s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No users found"}),((C=r.users)==null?void 0:C.nextCursor)!=null&&s.jsx("button",{onClick:async()=>{var B;const E=await yl({q:t.trim(),types:"users",usersCursor:((B=r.users)==null?void 0:B.nextCursor)||0,usersLimit:10});a(H=>{var q,ie,X;return{...H,users:{items:[...((q=H.users)==null?void 0:q.items)||[],...((ie=E.sections.users)==null?void 0:ie.items)||[]],nextCursor:((X=E.sections.users)==null?void 0:X.nextCursor)??null}}})},className:"mt-3 w-full py-2 rounded-lg border border-gray-300 dark:border-gray-700 text-sm",children:"Load more"})]}),f==="posts"&&s.jsxs("div",{children:[(W=(_=r.posts)==null?void 0:_.items)!=null&&W.length?s.jsx("div",{className:"grid grid-cols-3 gap-1",children:r.posts.items.map(E=>s.jsxs("div",{className:"aspect-square relative bg-gray-900",children:[E.media_url?E.media_type==="video"?s.jsxs(s.Fragment,{children:[s.jsx("video",{src:E.media_url,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-10 h-10 bg-black/60 rounded-full flex items-center justify-center",children:s.jsx(pU,{className:"w-5 h-5 text-white"})})})]}):s.jsx("img",{src:E.media_url,alt:"",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full relative flex items-center justify-center p-3",style:{background:"#0f172a"},children:s.jsx("p",{className:"text-white text-xs font-semibold text-center line-clamp-6",children:E.text_content||"No preview"})}),E.location_label&&s.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black/70 rounded flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3 text-white"}),s.jsx("span",{className:"text-[10px] text-white font-medium",children:E.location_label})]})]},E.id))}):s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No posts found"}),((T=r.posts)==null?void 0:T.nextCursor)!=null&&s.jsx("button",{onClick:async()=>{var B;const E=await yl({q:t.trim(),types:"posts",postsCursor:((B=r.posts)==null?void 0:B.nextCursor)||0,postsLimit:12});a(H=>{var q,ie,X;return{...H,posts:{items:[...((q=H.posts)==null?void 0:q.items)||[],...((ie=E.sections.posts)==null?void 0:ie.items)||[]],nextCursor:((X=E.sections.posts)==null?void 0:X.nextCursor)??null}}})},className:"mt-3 w-full py-2 rounded-lg border border-gray-300 dark:border-gray-700 text-sm",children:"Load more"})]})]})]})}const $Y="http://localhost:8000/api";async function HY(e,t=20){const n=new URL(`${$Y}/locations/search`);n.searchParams.set("q",e),n.searchParams.set("limit",String(t));const r=await fetch(n.toString());if(!r.ok)throw new Error("Failed to fetch locations");return r.json()}function WY(){const e=Xt(),{user:t}=tn(),[n,r]=m.useState(""),[a,i]=m.useState([]),[o,l]=m.useState(!1),[c,d]=m.useState(-1),f=[{name:"Dublin"},{name:"Cork"},{name:"Galway"},{name:"Limerick"},{name:"Waterford"},{name:"Kilkenny"},{name:"Wexford"},{name:"Kildare"},{name:"Meath"},{name:"Wicklow"},{name:"London"},{name:"Manchester"},{name:"Birmingham"},{name:"Leeds"},{name:"Glasgow"},{name:"Edinburgh"},{name:"Cardiff"},{name:"Bristol"},{name:"Paris"},{name:"Rome"},{name:"Madrid"},{name:"Berlin"},{name:"Amsterdam"},{name:"Brussels"},{name:"Lisbon"},{name:"Vienna"},{name:"Prague"},{name:"Budapest"},{name:"Copenhagen"},{name:"Stockholm"},{name:"Oslo"},{name:"Helsinki"},{name:"Zurich"},{name:"New York"},{name:"Los Angeles"},{name:"Chicago"},{name:"Toronto"},{name:"Vancouver"},{name:"Mexico City"},{name:"Tokyo"},{name:"Seoul"},{name:"Beijing"},{name:"Shanghai"},{name:"Hong Kong"},{name:"Singapore"},{name:"Sydney"},{name:"Melbourne"},{name:"Auckland"}].filter(y=>y.name.toLowerCase().includes(n.toLowerCase()));m.useEffect(()=>{if(!n.trim()){i([]);return}const y=new AbortController,p=setTimeout(async()=>{try{l(!0);const S=await HY(n.trim(),20);y.signal.aborted||i(S)}catch{y.signal.aborted||i([])}finally{y.signal.aborted||l(!1)}},200);return()=>{clearTimeout(p),y.abort()}},[n]);function h(y){console.log("Discover: Selecting location:",y);try{sessionStorage.setItem("pendingLocation",y),window.dispatchEvent(new CustomEvent("locationChange",{detail:{location:y}}))}catch{}e(`/feed?location=${encodeURIComponent(y)}`)}const g=((t==null?void 0:t.name)||"Friend").split("@")[0];return s.jsxs("div",{className:"p-4 space-y-8 min-h-[70vh] flex flex-col items-center justify-center pb-32",children:[s.jsx("div",{className:"flex flex-col items-center gap-3",children:s.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:["Paris","London","Rome","Madrid","Berlin","Tokyo","Dublin","New York","Sydney","Toronto","Singapore","Amsterdam"].map((y,p)=>{const S=["text-pink-500","text-blue-500","text-purple-500","text-red-500","text-yellow-500","text-green-500","text-cyan-500","text-orange-500","text-indigo-500","text-emerald-500","text-violet-500","text-rose-500"];return s.jsxs("button",{onClick:()=>h(y),className:"px-5 py-2 rounded-full bg-gray-900 text-gray-100 hover:bg-gray-800 transition-colors text-sm flex items-center gap-2 shadow-sm",children:[s.jsx(ln,{className:`w-4 h-4 ${S[p%S.length]}`}),s.jsx("span",{children:y})]},y)})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight text-sky-400",style:{background:"linear-gradient(90deg, #87ceeb, #ffb6c1, #87cefa, #c084fc, #34d399, #f59e0b, #ef4444, #dc2626, #fca5a5, #60a5fa, #fb7185, #87ceeb)",backgroundSize:"200% 100%",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",animation:"shimmer 6s linear infinite"},children:`Hello, ${g}`}),s.jsx("p",{className:"text-sm md:text-base text-gray-400 dark:text-gray-500 mt-2",children:"WHERE TO"})]}),s.jsx("div",{className:"h-10"}),s.jsx("div",{className:"fixed bottom-20 left-4 right-4 max-w-md mx-auto z-50",children:s.jsxs("div",{className:"relative rounded-full",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-full bg-gradient-to-r from-emerald-500 via-blue-500 to-violet-500 opacity-60 blur-sm animate-pulse"}),s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-full overflow-hidden",children:s.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(90deg, transparent, rgba(59,130,246,0.35), transparent)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}})}),s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{value:n,onChange:y=>{r(y.target.value),d(-1)},onKeyDown:y=>{if(y.key==="ArrowDown"){y.preventDefault();const p=Math.min(8,a.length)||Math.min(6,f.length);p>0&&d(S=>(S+1)%p)}else if(y.key==="ArrowUp"){y.preventDefault();const p=Math.min(8,a.length)||Math.min(6,f.length);p>0&&d(S=>(S-1+p)%p)}else if(y.key==="Enter"){const p=a.length>0?a.slice(0,8):f.slice(0,6).map(x=>({name:x.name,type:"city"})),S=c>=0&&p[c]?p[c].name:n.trim();S&&h(S)}},placeholder:"Discover other locations...",className:"w-full pl-10 pr-4 py-3 rounded-full bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-md border border-transparent"}),n&&(a.length>0||f.length>0)&&s.jsx("div",{className:"absolute left-0 right-0 mt-2 rounded-2xl bg-white/95 dark:bg-gray-900/95 shadow-xl ring-1 ring-black/5 backdrop-blur-md overflow-hidden",children:s.jsxs("ul",{className:"divide-y divide-gray-100/60 dark:divide-gray-800/60",children:[a.slice(0,8).map((y,p)=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>h(y.name),className:`w-full flex items-center gap-3 px-4 py-3 text-left ${c===p?"bg-gray-100 dark:bg-gray-800/70":"hover:bg-gray-50 dark:hover:bg-gray-800/70"}`,children:[s.jsx(ln,{className:"w-4 h-4 text-sky-500"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:y.name}),s.jsxs("span",{className:"text-[11px] text-gray-500 capitalize",children:[y.type,y.country?`  ${y.country}`:""]})]})]})},`${y.type}-${y.name}`)),a.length===0&&f.slice(0,6).map((y,p)=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>h(y.name),className:`w-full flex items-center gap-3 px-4 py-3 text-left ${c===p?"bg-gray-100 dark:bg-gray-800/70":"hover:bg-gray-50 dark:hover:bg-gray-800/70"}`,children:[s.jsx(ln,{className:"w-4 h-4 text-sky-500"}),s.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:y.name})]})},y.name))]})})]})]})}),s.jsx("div",{className:"h-24"})]})}function VY(){var ve,re;const{user:e}=tn(),t=Xt(),r=(ve=qn().state)==null?void 0:ve.openUserHandle,[a,i]=m.useState([]),[o,l]=m.useState(0),[c,d]=m.useState(0),[u,f]=m.useState(!0),[h,g]=m.useState(!1),[y,p]=m.useState(0),[S,x]=m.useState(!1),[v,b]=m.useState(!0),[w,N]=m.useState(!1),[R,C]=m.useState(!1),[_,W]=m.useState(""),[T,E]=m.useState(!0),[B,H]=m.useState(!1),[q,ie]=m.useState(null),[X,V]=m.useState(null),z=m.useRef(null),J=m.useRef(0),U=m.useRef(!1);m.useEffect(()=>{U.current=S},[S]);const ue=m.useCallback(async()=>{if(!(e!=null&&e.id)){f(!1);return}try{const M=await bo(e.id);let G=await RE(e.id,M);if(r){const Y=await zU(r);Y&&G.findIndex(O=>O.userHandle===r)===-1&&G.push(Y)}const P=G.map(Y=>Y.userId===e.id&&e.avatarUrl?{...Y,avatarUrl:e.avatarUrl}:Y);i(P)}catch(M){console.error("Error loading stories:",M)}finally{f(!1)}},[e==null?void 0:e.id,e==null?void 0:e.avatarUrl,r]);m.useEffect(()=>{ue()},[ue]),m.useEffect(()=>{if(r&&a.length>0){const M=a.find(G=>G.userHandle===r);M&&fe(M)}},[r,a.length]);async function fe(M){if(!M||!(e!=null&&e.id)||!M.stories||M.stories.length===0)return;const G=await UU(e.id,M.userId);if(!G||G.length===0)return;const P=a.findIndex(Y=>Y.userId===M.userId);P!==-1&&(i(Y=>{const j=[...Y];return j[P]={...M,stories:G,avatarUrl:M.avatarUrl},j}),l(P),d(0),g(!0),p(0),x(!1),b(!0),J.current=0)}function Ae(){g(!1),p(0),x(!1),b(!0),J.current=0,r&&(window.dispatchEvent(new CustomEvent("storiesViewed",{detail:{userHandle:r}})),t(-1))}function _e(){const M=a[o];M&&(c<M.stories.length-1?(d(c+1),p(0),b(!0),J.current=0):o<a.length-1?(l(o+1),d(0),p(0),b(!0),J.current=0):Ae())}function Re(){if(c>0)d(c-1),p(0),b(!0),J.current=0;else if(o>0){l(o-1);const M=a[o-1];d((M==null?void 0:M.stories.length)-1||0),p(0),b(!0),J.current=0}}async function Se(M){if(!(!Z||!(e!=null&&e.id)||!(e!=null&&e.handle)))try{await WU(Z.id,e.id,e.handle,M),N(!1);const G=await OU(e.id);i(G)}catch(G){console.error("Error adding reaction:",G)}}async function de(){if(!(!Z||!(e!=null&&e.id)||!(e!=null&&e.handle)||!_.trim()))try{await VU(Z.id,e.id,e.handle,_);const M=$==null?void 0:$.userHandle;M&&(await _i(e.handle,M,{text:_,imageUrl:Z.mediaUrl}),await _i(M,e.handle,{text:"You replied to their story",isSystemMessage:!0}),zt==null||zt("Reply sent")),W(""),C(!1)}catch(M){console.error("Error adding reply:",M)}}m.useEffect(()=>{const M=a[o];if(!M||!M.stories)return;const G=M.stories[c];G!=null&&G.sharedFromPost?(console.log("Fetching original post for shared story:",G.sharedFromPost),ra(G.sharedFromPost).then(P=>{P?(console.log("Original post fetched:",{id:P.id,hasText:!!P.text,hasMediaUrl:!!P.mediaUrl,mediaUrl:P.mediaUrl,hasMediaItems:!!(P.mediaItems&&P.mediaItems.length>0)}),V(P)):(console.warn("Original post not found:",G.sharedFromPost),V(null))}).catch(P=>{console.error("Failed to fetch original post:",P),V(null)})):V(null)},[o,c,a]),m.useEffect(()=>{if(!h||!(e!=null&&e.id)||B)return;const M=a[o];if(!M||!M.stories)return;const G=M.stories[c];if(!G)return;J.current=0,p(0),$U(G.id,e.id).catch(console.error),HU(G.id).catch(console.error);const P=15e3,Y=50,j=setInterval(()=>{if(U.current||B)return;J.current+=Y;const O=Math.min(J.current/P*100,100);p(O),O>=100&&(clearInterval(j),J.current=0,setTimeout(()=>{_e()},300))},Y);return()=>clearInterval(j)},[h,o,c,a,e==null?void 0:e.id,B]),m.useEffect(()=>{if(!h)return;let M;const G=()=>{E(!0),M&&window.clearTimeout(M),M=window.setTimeout(()=>E(!1),2e3)};G();const P=()=>G();return window.addEventListener("mousemove",P),window.addEventListener("touchstart",P,{passive:!0}),window.addEventListener("keydown",P),()=>{M&&window.clearTimeout(M),window.removeEventListener("mousemove",P),window.removeEventListener("touchstart",P),window.removeEventListener("keydown",P)}},[h]),m.useEffect(()=>{if(!h)return;function M(G){var j;const P=G.target,Y=(j=P==null?void 0:P.tagName)==null?void 0:j.toLowerCase();Y==="input"||Y==="textarea"||P!=null&&P.isContentEditable||(G.key==="ArrowLeft"?(G.preventDefault(),Re()):G.key==="ArrowRight"?(G.preventDefault(),_e()):G.key==="Escape"?(G.preventDefault(),Ae()):G.key===" "&&(G.preventDefault(),x(O=>!O)))}return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[h,o,c,a]),m.useEffect(()=>{var M;if(!(!h||!z.current))try{const G=a[o],P=(M=G==null?void 0:G.stories)==null?void 0:M[c];(P==null?void 0:P.mediaType)==="video"&&(S?z.current.pause().catch(()=>{}):z.current.play().catch(()=>{}))}catch(G){console.error("Error controlling video:",G)}},[S,h,o,c,a]);const F=m.useMemo(()=>[...a].filter(M=>M.stories&&M.stories.length>0).sort((M,G)=>{const P=M.stories.length>0?Math.max(...M.stories.map(j=>j.createdAt)):0;return(G.stories.length>0?Math.max(...G.stories.map(j=>j.createdAt)):0)-P}),[a]);if(u)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading clips..."})]})});if(!e)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please sign in to view stories."}),s.jsx("button",{onClick:()=>t("/login"),className:"mt-4 px-4 py-2 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 text-white font-medium hover:opacity-90 transition-opacity",children:"Sign In"})]})});const $=a[o],Z=(re=$==null?void 0:$.stories)==null?void 0:re[c],Pe=a.length>0;return h&&Z&&$&&$.stories?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-gray-950 via-black to-gray-950 z-50",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 z-50 px-4 pt-3 pb-2",children:s.jsx("div",{className:"flex gap-1.5",children:$.stories.map((M,G)=>s.jsx("div",{className:"flex-1 h-1 bg-white/20 rounded-full overflow-hidden backdrop-blur-sm",children:s.jsx("div",{className:"h-full rounded-full transition-all ease-linear",style:G<c?{width:"100%",background:"linear-gradient(to right, rgb(255, 140, 0) 5%, rgb(248, 0, 50) 25%, rgb(255, 0, 160) 45%, rgb(140, 40, 255) 65%, rgb(0, 35, 255) 82%, rgb(25, 160, 255) 96%)",transitionDuration:"100ms"}:G===c&&!S&&y>0?{width:`${y}%`,background:"linear-gradient(to right, rgb(255, 140, 0) 5%, rgb(248, 0, 50) 25%, rgb(255, 0, 160) 45%, rgb(140, 40, 255) 65%, rgb(0, 35, 255) 82%, rgb(25, 160, 255) 96%)",transitionDuration:"50ms"}:{width:G===c?`${y}%`:"0%",background:G===c?"rgba(255,255,255,0.6)":"transparent",transitionDuration:"100ms"}})},M.id))})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"relative w-full h-full max-w-[420px] max-h-[90vh] aspect-[9/16] flex items-center justify-center",children:s.jsxs("div",{className:"relative w-full h-full rounded-2xl overflow-hidden shadow-2xl bg-black",children:[(()=>{var M,G,P,Y,j,O,se,K;return Z!=null&&Z.sharedFromPost&&console.log("Rendering shared post story:",{sharedFromPost:Z.sharedFromPost,hasOriginalPost:!!X,storyHasMediaUrl:!!Z.mediaUrl,storyHasText:!!Z.text,originalPostText:X==null?void 0:X.text,originalPostMediaUrl:X==null?void 0:X.mediaUrl,originalPostHasMediaItems:!!(X!=null&&X.mediaItems&&X.mediaItems.length>0)}),Z!=null&&Z.sharedFromPost&&!X?s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):Z!=null&&Z.sharedFromPost&&X?X.mediaUrl&&X.mediaUrl.trim()!==""&&!X.mediaUrl.startsWith("data:image")||X.mediaItems&&X.mediaItems.length>0?X.mediaType==="video"||((G=(M=X.mediaItems)==null?void 0:M[0])==null?void 0:G.type)==="video"?s.jsx("video",{ref:z,src:X.mediaUrl||((Y=(P=X.mediaItems)==null?void 0:P[0])==null?void 0:Y.url),className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:v,playsInline:!0}):s.jsx("img",{src:X.mediaUrl||((O=(j=X.mediaItems)==null?void 0:j[0])==null?void 0:O.url),alt:"Shared post",className:"w-full h-full object-cover"}):X.text?s.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",style:{background:"#000000"},children:s.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-white border border-gray-200 shadow-2xl",style:{maxWidth:"100%",boxSizing:"border-box",backgroundColor:"#ffffff"},children:[s.jsx("div",{className:"flex items-start justify-between px-4 pt-4 pb-3 border-b border-gray-200",style:{backgroundColor:"#ffffff"},children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx(It,{src:zn(X.userHandle),name:X.userHandle.split("@")[0],size:"sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-1.5 text-gray-900 text-sm",children:[s.jsx("span",{children:X.userHandle}),s.jsx($s,{value:zs(X.userHandle)||"",size:14})]}),s.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-2 mt-0.5",children:[X.locationLabel&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),X.locationLabel]}),X.createdAt&&s.jsx("span",{className:"text-gray-400",children:""})]}),X.createdAt&&s.jsx("span",{children:Ta(X.createdAt)})]})]})]})}),s.jsx("div",{className:"p-4 w-full overflow-hidden",style:{maxWidth:"100%",boxSizing:"border-box",backgroundColor:"#ffffff"},children:s.jsx("div",{className:"p-4 rounded-lg bg-black overflow-hidden w-full",style:{maxWidth:"100%",boxSizing:"border-box",backgroundColor:"#000000"},children:s.jsx("div",{className:"text-base leading-relaxed whitespace-pre-wrap font-normal text-white break-words w-full",style:{wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"100%",boxSizing:"border-box",color:"#ffffff"},children:X.text||"Shared post"})})})]})}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("p",{className:"text-white",children:"Shared post"})}):Z!=null&&Z.mediaUrl?Z.mediaType==="video"?s.jsx("video",{ref:z,src:Z.mediaUrl,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:v,playsInline:!0}):s.jsx("img",{src:Z.mediaUrl,alt:"",className:"w-full h-full object-cover select-none",draggable:!1}):s.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",style:{background:((se=Z==null?void 0:Z.textStyle)==null?void 0:se.background)||"#1a1a1a"},children:s.jsx("div",{className:"w-full max-w-md",children:s.jsx("div",{className:"text-base leading-relaxed whitespace-pre-wrap font-normal px-6 py-8",style:{color:((K=Z==null?void 0:Z.textStyle)==null?void 0:K.color)||"#ffffff"},children:Z==null?void 0:Z.text})})})})(),(Z==null?void 0:Z.stickers)&&Z.stickers.length>0&&s.jsx(s.Fragment,{children:Z.stickers.map(M=>s.jsx("div",{className:"absolute",style:{left:`${M.x}%`,top:`${M.y}%`,transform:`translate(-50%, -50%) scale(${M.scale}) rotate(${M.rotation}deg)`,opacity:M.opacity,zIndex:20},children:M.sticker.emoji?s.jsx("span",{className:"text-4xl",style:{fontSize:`${50*M.scale}px`},children:M.sticker.emoji}):M.sticker.url?s.jsx("img",{src:M.sticker.url,alt:"",className:"max-w-[100px] max-h-[100px]",style:{pointerEvents:"none"}}):null},M.id))})]})})}),(Z==null?void 0:Z.mediaUrl)&&s.jsx("div",{className:"absolute inset-0 pointer-events-none z-10",children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/50"})}),s.jsx("div",{className:"absolute top-12 left-0 right-0 px-4 z-50",children:s.jsxs("div",{className:"flex items-center justify-between backdrop-blur-md bg-black/30 rounded-2xl px-4 py-3 border border-white/10 shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(It,{src:$==null?void 0:$.avatarUrl,name:($==null?void 0:$.name)||"User",size:"sm"}),s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-black rounded-full"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-semibold text-sm",children:$==null?void 0:$.userHandle}),(Z==null?void 0:Z.sharedFromUser)&&s.jsxs("p",{className:"text-white/80 text-xs flex items-center gap-1",children:[s.jsx("span",{children:"shared from"}),s.jsx("span",{className:"font-semibold",children:Z.sharedFromUser})]}),!(Z!=null&&Z.sharedFromUser)&&(Z==null?void 0:Z.location)&&s.jsx("p",{className:"text-white/70 text-xs",children:Z.location})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[Z&&s.jsxs("button",{onClick:async M=>{if(M.stopPropagation(),Z.sharedFromPost)try{const P=await ra(Z.sharedFromPost);if(P){ie(P),H(!0);return}}catch(P){console.error("Error fetching post:",P)}const G={id:Z.id,userHandle:Z.userHandle,locationLabel:Z.location||"",tags:[],mediaUrl:Z.mediaUrl,mediaType:Z.mediaType,text:Z.text,caption:Z.text,textStyle:Z.textStyle,stickers:Z.stickers,taggedUsers:Z.taggedUsers,createdAt:Z.createdAt,stats:{likes:0,views:Z.views,comments:Z.replies.length,shares:0,reclips:0},isBookmarked:!1,isFollowing:!1,userLiked:!!Z.userReaction};ie(G),H(!0)},className:"pointer-events-auto px-3 py-1.5 rounded-full bg-gradient-to-r from-purple-600 via-purple-500 to-purple-600 text-white text-xs font-semibold flex items-center gap-1.5 hover:opacity-90 transition-opacity shadow-lg backdrop-blur-sm",title:"Show Full Scenes",children:[s.jsx(Mb,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Scenes"})]}),(Z==null?void 0:Z.mediaType)==="video"&&s.jsx("button",{onClick:()=>b(!v),className:"pointer-events-auto p-2 rounded-full bg-black/40 backdrop-blur-sm hover:bg-white/20 transition-colors border border-white/10",title:v?"Unmute":"Mute",children:v?s.jsx(rp,{className:"w-5 h-5 text-white"}):s.jsx(qd,{className:"w-5 h-5 text-white"})}),s.jsx("button",{onClick:Ae,className:"pointer-events-auto p-2 rounded-full bg-black/40 backdrop-blur-sm hover:bg-white/20 transition-colors border border-white/10",children:s.jsx(pt,{className:"w-5 h-5 text-white"})})]})]})}),(Z==null?void 0:Z.text)&&(Z==null?void 0:Z.mediaUrl)&&!Z.mediaUrl.startsWith("data:image")&&s.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4 z-50 pointer-events-none",children:s.jsx("div",{className:"backdrop-blur-md bg-black/30 rounded-2xl px-4 py-3 border border-white/10 shadow-lg max-w-md mx-auto",children:s.jsx("p",{className:`font-semibold text-center ${(Z==null?void 0:Z.textSize)==="small"?"text-sm":(Z==null?void 0:Z.textSize)==="large"?"text-2xl":"text-lg"}`,style:{color:(Z==null?void 0:Z.textColor)||"white",textShadow:"1px 1px 2px rgba(0,0,0,0.5)"},children:Z.text})})}),s.jsxs("div",{className:`absolute right-4 bottom-16 z-[70] flex flex-col items-center gap-3 transition-opacity duration-300 ${T?"opacity-100":"opacity-0 pointer-events-none"}`,children:[s.jsx("button",{onClick:M=>{M.stopPropagation(),Se("")},className:"pointer-events-auto w-14 h-14 rounded-full bg-black/50 backdrop-blur-md flex items-center justify-center hover:bg-black/70 transition-all active:scale-95 border border-white/20 shadow-xl",children:Z!=null&&Z.userReaction?s.jsx("span",{className:"text-2xl",children:Z.userReaction}):s.jsx(Ba,{className:"w-6 h-6 text-white"})}),s.jsx("button",{onClick:M=>{M.stopPropagation(),C(!0)},className:"pointer-events-auto w-14 h-14 rounded-full bg-black/50 backdrop-blur-md flex items-center justify-center hover:bg-black/70 transition-all active:scale-95 border border-white/20 shadow-xl",children:s.jsx(Uh,{className:"w-6 h-6 text-white"})})]}),s.jsxs("div",{className:"absolute inset-0 z-40",children:[s.jsx("div",{onClick:()=>x(!S),className:"absolute left-1/3 right-1/3 top-0 bottom-0"}),s.jsx("button",{onClick:M=>{M.stopPropagation(),Re()},className:"absolute left-0 top-0 bottom-0 w-1/4 pointer-events-auto"}),s.jsx("button",{onClick:M=>{M.stopPropagation(),_e()},className:"absolute right-0 top-0 bottom-0 w-1/4 pointer-events-auto"})]})]}),R&&Z&&s.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-end",onClick:()=>C(!1),children:s.jsxs("div",{className:"w-full bg-white dark:bg-gray-900 rounded-t-3xl p-6 animate-in slide-in-from-bottom duration-300",onClick:M=>M.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Reply to ",$==null?void 0:$.userHandle]}),s.jsx("button",{onClick:()=>C(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsx(pt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),s.jsx("textarea",{value:_,onChange:M=>W(M.target.value),placeholder:"Type a reply...",className:"w-full h-24 p-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 resize-none focus:ring-2 focus:ring-brand-500 focus:border-transparent",autoFocus:!0}),s.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[s.jsx("button",{onClick:de,disabled:!_.trim(),className:"flex-1 py-3 rounded-xl bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 text-white font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-opacity",children:"Send Reply"}),($==null?void 0:$.userHandle)&&s.jsx("button",{onClick:async()=>{var Y;if(C(!1),e!=null&&e.id&&(e!=null&&e.handle)&&$.userHandle){const j=await bo(e.id);if(!EE(e.handle,$.userHandle,j)){$e.fire({title:"Cannot Send Message",text:"You must follow this user to send them a message.",icon:"warning"});return}}g(!1);const M=a[o],G=(Y=M==null?void 0:M.stories)==null?void 0:Y[c];let P;G!=null&&G.sharedFromPost&&(P={sharePostUrl:`${window.location.origin}/post/${G.sharedFromPost}`,sharePostId:G.sharedFromPost}),t(`/messages/${encodeURIComponent($.userHandle)}`,{state:P})},className:"px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"View in chat"})]})]})}),B&&q&&s.jsx(Mu,{post:q,isOpen:B,onClose:()=>{H(!1),ie(null)},onLike:async()=>{},onFollow:async()=>{},onShare:async()=>{},onOpenComments:()=>{},onReclip:async()=>{}})]}):s.jsxs("div",{className:"min-h-screen bg-black text-white p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Clips 24"}),s.jsx("button",{onClick:()=>t("/feed"),className:"p-2 rounded-full hover:bg-gray-800 transition-colors",children:s.jsx(pt,{className:"w-6 h-6 text-gray-400"})})]}),Pe?s.jsx("div",{className:"grid grid-cols-3 gap-3",children:F.map((M,G)=>{if(!M.stories||M.stories.length===0)return null;const P=M.stories.some(De=>!De.hasViewed),Y=M.stories.reduce((De,Ce)=>Ce.createdAt>De.createdAt?Ce:De),j=M.userHandle.match(/@(.+)/),O=j?j[1]:"",se=M.userHandle.split("@")[0],K=O?`${se}@${O}`:M.userHandle,pe=(De=>{if(!De)return"rgb(140, 40, 255)";let Ce=0;for(let Nt=0;Nt<De.length;Nt++)Ce=De.charCodeAt(Nt)+((Ce<<5)-Ce);const Ft=Math.abs(Ce%360),Tt=65+Math.abs(Ce)%20,Jt=50+Math.abs(Ce)%15;return`hsl(${Ft}, ${Tt}%, ${Jt}%)`})(O||M.userHandle),Ve=m.memo(({story:De})=>{var st,Ye,Bt,we,tt,Je,Ze,ot;const[Ce,Ft]=m.useState(null),[Tt,Jt]=m.useState(!1);if(m.useEffect(()=>{De.sharedFromPost&&(Jt(!0),ra(De.sharedFromPost).then(L=>{L&&Ft(L),Jt(!1)}).catch(()=>{Jt(!1)}))},[De.sharedFromPost]),De.sharedFromPost&&Ce){if(Ce.mediaUrl&&Ce.mediaUrl.trim()!==""&&!Ce.mediaUrl.startsWith("data:image")||Ce.mediaItems&&Ce.mediaItems.length>0)return Ce.mediaType==="video"||((Ye=(st=Ce.mediaItems)==null?void 0:st[0])==null?void 0:Ye.type)==="video"?s.jsx("video",{src:Ce.mediaUrl||((we=(Bt=Ce.mediaItems)==null?void 0:Bt[0])==null?void 0:we.url),className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}):s.jsx("img",{src:Ce.mediaUrl||((Je=(tt=Ce.mediaItems)==null?void 0:tt[0])==null?void 0:Je.url),alt:"Shared post",className:"w-full h-full object-cover",loading:"lazy"});if(Ce.text)return s.jsx("div",{className:"w-full h-full flex items-center justify-center p-2 bg-black",children:s.jsxs("div",{className:"w-full max-w-full rounded-lg overflow-hidden bg-white border border-gray-200 shadow-lg",children:[s.jsx("div",{className:"px-2 pt-1.5 pb-1 border-b border-gray-200 bg-white",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(It,{src:zn(Ce.userHandle),name:Ce.userHandle.split("@")[0],size:"xs"}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-semibold text-[9px] text-gray-900 truncate",children:Ce.userHandle}),s.jsx($s,{value:zs(Ce.userHandle)||"",size:8})]})})]})}),s.jsx("div",{className:"p-1.5 bg-white",children:s.jsx("div",{className:"p-1.5 rounded bg-black",children:s.jsx("div",{className:"text-[8px] leading-tight text-white line-clamp-4 whitespace-pre-wrap break-words",children:Ce.text})})})]})})}if(De.sharedFromPost&&Tt)return s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-900",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"})});const Nt=De.mediaUrl;return Nt?De.mediaType==="video"?s.jsx("video",{src:Nt,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}):s.jsx("img",{src:Nt,alt:`${M.userHandle} clip`,className:"w-full h-full object-cover",loading:"lazy",onError:L=>{const he=L.target;he.src.includes("via.placeholder")||(he.src="https://via.placeholder.com/400x600/1a1a1a/ffffff?text="+encodeURIComponent(se))}}):De.text?s.jsx("div",{className:"w-full h-full flex items-center justify-center p-4 rounded-lg",style:{background:((Ze=De.textStyle)==null?void 0:Ze.background)||"#1a1a1a"},children:s.jsx("div",{className:"text-xs leading-relaxed whitespace-pre-wrap font-normal text-center line-clamp-4",style:{color:((ot=De.textStyle)==null?void 0:ot.color)||"#ffffff"},children:De.text})}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:s.jsx(It,{src:M.avatarUrl,name:M.name,size:"lg"})})});return Ve.displayName="StoryThumbnail",s.jsx("button",{onClick:()=>fe(M),className:`relative aspect-[9/16] rounded-lg overflow-hidden bg-gray-900 group cursor-pointer border focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-black ${P?"border-transparent":"border-white"}`,style:P?{background:"linear-gradient(to right, rgb(255, 140, 0) 5%, rgb(248, 0, 50) 25%, rgb(255, 0, 160) 45%, rgb(140, 40, 255) 65%, rgb(0, 35, 255) 82%, rgb(25, 160, 255) 96%)",padding:"2px"}:{},children:s.jsxs("div",{className:`relative w-full h-full rounded-lg overflow-hidden ${P?"bg-gray-900":""}`,children:[s.jsx("div",{className:"absolute inset-0",children:s.jsx(Ve,{story:Y})}),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors rounded-lg z-10"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:s.jsx("div",{className:"relative w-16 h-16 rounded-full overflow-hidden border-4 shadow-lg",style:{borderColor:pe,boxShadow:"0 0 0 2px rgba(0, 0, 0, 0.3), 0 4px 12px rgba(0, 0, 0, 0.4)"},children:M.avatarUrl?s.jsx("img",{src:M.avatarUrl,alt:M.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:pe+"40"},children:s.jsx("span",{className:"text-xl text-white font-bold",children:M.name.charAt(0).toUpperCase()})})})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/90 via-black/70 to-transparent rounded-b-lg z-20",children:s.jsx("p",{className:"text-white text-[10px] font-medium text-center truncate leading-tight",children:K})})]})},M.userId)})}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 flex items-center justify-center mx-auto mb-4",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-950 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-2 border-white/30 rounded-full flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})})}),s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No clips available"}),s.jsx("p",{className:"text-gray-400",children:"Share your first clip to get started!"}),s.jsx("button",{onClick:()=>t("/create"),className:"mt-4 px-6 py-3 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 text-white font-medium hover:opacity-90 transition-opacity",children:"Create Clip"})]})]})}function GY(){const e=Xt(),{handle:t}=Vy(),{user:n}=tn(),[r,a]=m.useState(null),[i,o]=m.useState([]),[l,c]=m.useState(!0),[d,u]=m.useState(!1),[f,h]=m.useState({following:0,followers:0,likes:0,views:0}),[g,y]=m.useState(null),[p,S]=m.useState(!1),[x,v]=m.useState(!0),[b,w]=m.useState(!1),[N,R]=m.useState(!1),[C,_]=m.useState(!1),W=async()=>{var E,B,H,q,ie,X,V,z,J;if(!(n!=null&&n.id)||!t||!(n!=null&&n.handle)){console.error("Missing required data for follow:",{userId:n==null?void 0:n.id,handle:t,userHandle:n==null?void 0:n.handle}),$e.fire({title:"Error",text:"Unable to follow user. Please try again.",icon:"error",timer:2e3,showConfirmButton:!1});return}const T=decodeURIComponent(t);console.log("Follow button clicked for:",T);try{const ue=(await bo(n.id)).includes(T),fe=Hh(T);console.log("Current follow state:",{isCurrentlyFollowing:ue,profilePrivate:fe});let Ae,_e=!1;try{const Re=encodeURIComponent(T);console.log("Calling toggleFollow with encoded handle:",Re),Ae=await Wb(Re),console.log("Toggle follow result:",Ae)}catch(Re){if((Re==null?void 0:Re.message)==="CONNECTION_REFUSED"||(Re==null?void 0:Re.name)==="ConnectionRefused"||((E=Re==null?void 0:Re.message)==null?void 0:E.includes("Failed to fetch"))||((B=Re==null?void 0:Re.message)==null?void 0:B.includes("ERR_CONNECTION_REFUSED"))||((H=Re==null?void 0:Re.message)==null?void 0:H.includes("NetworkError"))){if(console.log("Backend not available, using mock fallback"),_e=!0,(q=i[0])!=null&&q.id)await aa(n.id,i[0].id);else{const F=bt.find($=>$.userHandle===T);F&&await aa(n.id,F.id)}const de=!ue;u(de),w(!1),de?setCanViewProfile(!0):fe&&setCanViewProfile(!1),window.dispatchEvent(new CustomEvent("followToggled",{detail:{handle:T,isFollowing:de}}));return}else throw Re}Ae.status==="unfollowed"?((ie=i[0])!=null&&ie.id&&await aa(n.id,i[0].id),u(!1),w(!1),FU(n.handle,T),fe&&setCanViewProfile(!1)):Ae.status==="pending"?(MU(n.handle,T),w(!0),u(!1),$e.fire({title:"Follow Request Sent",text:"Your follow request has been sent. You will be notified when they accept.",icon:"success",timer:2e3,showConfirmButton:!1})):(Ae.status==="accepted"||Ae.following===!0)&&((X=i[0])!=null&&X.id&&await aa(n.id,i[0].id),u(!0),w(!1),setCanViewProfile(!0)),window.dispatchEvent(new CustomEvent("followToggled",{detail:{handle:T,isFollowing:!ue}}));try{const Re=await mx(T,n==null?void 0:n.id),Se=Re.following_count||0,de=Re.followers_count||0;h(F=>({...F,following:Se,followers:de})),r&&a(F=>({...F,stats:{...F.stats,following:Se,followers:de}}))}catch(Re){console.error("Error refreshing profile counts:",Re)}}catch(U){console.error("Error toggling follow:",U),(U==null?void 0:U.message)==="CONNECTION_REFUSED"||(U==null?void 0:U.name)==="ConnectionRefused"||((V=U==null?void 0:U.message)==null?void 0:V.includes("Failed to fetch"))||((z=U==null?void 0:U.message)==null?void 0:z.includes("ERR_CONNECTION_REFUSED"))||((J=U==null?void 0:U.message)==null?void 0:J.includes("NetworkError"))?$e.fire({title:"Backend Server Not Running",html:`
                        <p>The Laravel backend server is not running.</p>
                        <p style="margin-top: 10px; font-size: 14px;">To enable the follow feature:</p>
                        <ol style="text-align: left; margin-top: 10px; font-size: 14px;">
                            <li>Open a terminal</li>
                            <li>Navigate to: <code>laravel-backend</code></li>
                            <li>Run: <code>php artisan serve</code></li>
                        </ol>
                    `,icon:"warning",confirmButtonText:"OK",width:"500px"}):$e.fire({title:"Error",text:(U==null?void 0:U.message)||"Failed to follow user. Please try again.",icon:"error",timer:3e3,showConfirmButton:!1})}};return m.useEffect(()=>{(async()=>{var B,H,q;if(!t)return;const E=decodeURIComponent(t);c(!0);try{const ie=Hh(E);if(R(ie),n!=null&&n.id&&(n!=null&&n.handle)){const de=await bo(n.id),F=IU(n.handle,E,de),$=de.includes(E),Z=PU(n.handle,E);if(v(F),u($),w(Z),!F&&ie&&E!==n.handle){$e.fire({title:"Private Profile",text:"To view this user's profile you must be following them.",icon:"info",showCancelButton:!0,confirmButtonText:"Follow",cancelButtonText:"Cancel",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(async Pe=>{if(Pe.isConfirmed&&(n!=null&&n.id))try{await W()}catch(ve){console.error("Error following user:",ve)}}),c(!1);return}}let X=[];if(bt&&bt.length>0&&(X=bt.filter(de=>de.userHandle===E)),X.length===0){const F=["finglas","dublin","ireland"].map(async Z=>{try{return(await fd(Z,null,100,(n==null?void 0:n.id)||"me",(n==null?void 0:n.local)||"",(n==null?void 0:n.regional)||"",(n==null?void 0:n.national)||"")).items.filter(ve=>ve.userHandle===E)}catch{return[]}});X=(await Promise.all(F)).flat()}const V=X.filter((de,F,$)=>F===$.findIndex(Z=>Z.id===de.id));let z=E===(n==null?void 0:n.handle)?n==null?void 0:n.avatarUrl:void 0;if(!z){const{getAvatarForHandle:de}=await En(()=>Promise.resolve().then(()=>C9),void 0);z=de(E)}E==="Sarah@Artane"&&(z="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop");let J=E===(n==null?void 0:n.handle)?n==null?void 0:n.bio:void 0,U=E===(n==null?void 0:n.handle)?n==null?void 0:n.socialLinks:void 0,ue=E===(n==null?void 0:n.handle)?n==null?void 0:n.placesTraveled:void 0;E===(n==null?void 0:n.handle)&&(console.log("Viewing own profile - user handle:",n==null?void 0:n.handle,"decodedHandle:",E),console.log("Viewing own profile, placesTraveled from user:",n==null?void 0:n.placesTraveled),console.log("Is array?",Array.isArray(n==null?void 0:n.placesTraveled)),console.log("Length:",Array.isArray(n==null?void 0:n.placesTraveled)?n.placesTraveled.length:"N/A")),E==="Sarah@Artane"&&(J=" Living in Artane, Dublin! Love exploring Ireland, sharing local spots, and connecting with the community. Food enthusiast  Travel lover  Always up for an adventure!",U={website:"https://sarah-artane.com",x:"@sarah_artane",instagram:"@sarah.artane",tiktok:"@sarah_artane_dublin"},ue=["Dublin","Iceland","Japan","Egypt","Morocco","Spain","Italy","Greece","Thailand"]);const fe=V.reduce((de,F)=>{var $;return de+((($=F.stats)==null?void 0:$.likes)||0)},0),Ae=V.reduce((de,F)=>{var $;return de+((($=F.stats)==null?void 0:$.views)||0)},0);let _e=0,Re=0;try{const de=await mx(E,n==null?void 0:n.id);_e=de.following_count||0,Re=de.followers_count||0,de.avatar_url&&!z&&(z=de.avatar_url),de.bio&&!J&&(J=de.bio),de.social_links&&!U&&(U=de.social_links),de.places_traveled&&(ue=de.places_traveled)}catch(de){(de==null?void 0:de.message)==="CONNECTION_REFUSED"||(de==null?void 0:de.name)==="ConnectionRefused"||((B=de==null?void 0:de.message)==null?void 0:B.includes("Failed to fetch"))||((H=de==null?void 0:de.message)==null?void 0:H.includes("ERR_CONNECTION_REFUSED"))||((q=de==null?void 0:de.message)==null?void 0:q.includes("NetworkError"))||console.error("Error fetching user profile data:",de)}const Se={handle:E,name:E.split("@")[0],avatarUrl:z,bio:J||void 0,socialLinks:U||void 0,placesTraveled:ue||void 0,stats:{following:_e,followers:Re,likes:fe||0,views:Ae||0}};console.log("Setting profileData with placesTraveled:",Se.placesTraveled),console.log("Full profileData:",Se),a(Se),h({following:Se.stats.following,followers:Se.stats.followers,likes:Se.stats.likes,views:Se.stats.views}),o(V)}catch(ie){console.error("Error loading profile:",ie)}finally{c(!1)}})()},[t,n==null?void 0:n.id,n==null?void 0:n.placesTraveled]),m.useEffect(()=>{async function T(){if(t)try{const H=t===(n==null?void 0:n.handle);let q;H?q=await hx(t):q=await Kf(t),S(q)}catch(H){console.error("Error checking story:",H)}}T();const E=setInterval(()=>{T()},6e4),B=H=>{var ie;const q=(ie=H.detail)==null?void 0:ie.userHandle;t===q&&S(!1)};return window.addEventListener("storiesViewed",B),()=>{clearInterval(E),window.removeEventListener("storiesViewed",B)}},[t]),l?s.jsx("div",{className:"min-h-screen bg-gray-950 text-white flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):!r&&!l?s.jsx("div",{className:"min-h-screen bg-gray-950 text-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xl mb-4",children:"User not found"}),s.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700",children:"Go Back"})]})}):!x&&N&&!l?s.jsxs("div",{className:"min-h-screen bg-gray-950 text-white",children:[s.jsx("div",{className:"sticky top-0 bg-gray-950 z-10 border-b border-gray-800",children:s.jsx("div",{className:"flex items-center justify-between px-4 py-3",children:s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-900 rounded-full transition-colors",children:s.jsx(ua,{className:"w-6 h-6"})})})}),s.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:s.jsxs("div",{className:"text-center px-4",children:[s.jsx(Oh,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"This Account is Private"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"To view this user's profile you must be following them."}),!b&&s.jsx("button",{onClick:W,className:"px-6 py-3 bg-brand-600 hover:bg-brand-700 rounded-lg font-semibold transition-colors",children:"Follow"}),b&&s.jsx("p",{className:"text-gray-500",children:"Follow request sent"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gray-950 text-white",children:[s.jsx("div",{className:"w-full text-center pt-4 pb-6",children:s.jsx("h1",{className:"text-4xl font-normal tracking-tight",style:{fontFamily:'"Brush Script MT", "Lucida Handwriting", "Comic Sans MS", cursive',color:"#ffffff",fontWeight:400,letterSpacing:"0.5px"},children:"Passport"})}),s.jsx("div",{className:"relative w-full overflow-hidden",children:s.jsxs("div",{className:"relative w-full h-64 bg-gray-100 dark:bg-gray-800",children:[s.jsx("img",{src:"/placeholders/world-map.jpg",alt:"World Map",className:"w-full h-full object-cover opacity-30 dark:opacity-20",style:{filter:"grayscale(100%) brightness(1.2)"},onError:T=>{const E=T.target;E.src="https://upload.wikimedia.org/wikipedia/commons/8/83/Equirectangular_projection_SW.jpg"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-gray-950/50 dark:to-gray-950/70"}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10",children:[s.jsx("div",{className:`mb-4 ${p?"":"pointer-events-none"}`,children:s.jsx(It,{src:r.avatarUrl,name:r.name,size:"xl",className:"!w-32 !h-32 border-4 border-white dark:border-gray-800 shadow-2xl",hasStory:p,onClick:p?()=>e("/stories",{state:{openUserHandle:t}}):void 0})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold mb-1 text-gray-900 dark:text-white uppercase tracking-wide drop-shadow-lg",children:r.name}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-center justify-center gap-1",children:[s.jsx("span",{children:r.handle}),s.jsx($s,{value:r.handle===(n==null?void 0:n.handle)?(n==null?void 0:n.countryFlag)||"":zs(r.handle)||"",size:16})]})]})]})]})}),s.jsxs("div",{className:"px-4 py-6",children:[s.jsxs("div",{className:"flex justify-around mb-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold",children:f.following}),s.jsx("div",{className:"text-xs text-gray-400",children:"Following"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold",children:f.followers>1e3?`${(f.followers/1e3).toFixed(1)}K`:f.followers}),s.jsx("div",{className:"text-xs text-gray-400",children:"Followers"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold",children:f.views>1e3?`${(f.views/1e3).toFixed(1)}K`:f.views}),s.jsx("div",{className:"text-xs text-gray-400",children:"Views"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold",children:f.likes>1e3?`${(f.likes/1e3).toFixed(1)}K`:f.likes}),s.jsx("div",{className:"text-xs text-gray-400",children:"Likes"})]})]}),s.jsxs("div",{className:"flex gap-2 mb-4 relative z-10",children:[s.jsx("button",{onClick:T=>{T.preventDefault(),T.stopPropagation(),console.log("Follow button clicked"),W()},className:"flex-1 py-2 rounded-lg font-semibold transition-colors bg-brand-600 hover:bg-brand-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",disabled:!(n!=null&&n.id)||!t||!(n!=null&&n.handle),children:b?"Requested":d?"Following":"Follow"}),s.jsx("button",{onClick:async T=>{if(T.stopPropagation(),T.preventDefault(),t&&(n!=null&&n.handle)&&(n!=null&&n.id)){const E=decodeURIComponent(t),B=await bo(n.id);if(!EE(n.handle,E,B)){$e.fire({title:"Cannot Send Message",text:"You must follow this user to send them a message.",icon:"warning"});return}e(`/messages/${E}`)}},className:"flex-1 py-2 rounded-lg bg-gray-800 text-white font-semibold hover:bg-gray-700 transition-colors relative z-20",children:"Message"}),s.jsx("button",{onClick:T=>{T.stopPropagation(),T.preventDefault(),console.log("Traveled button clicked, placesTraveled:",r==null?void 0:r.placesTraveled),_(!0)},className:"px-4 py-2 rounded-lg bg-gray-800 text-white font-semibold hover:bg-gray-700 transition-colors relative z-20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!(r!=null&&r.placesTraveled)||!Array.isArray(r.placesTraveled)||r.placesTraveled.length===0,title:"Places Traveled",children:s.jsx(ln,{className:"w-5 h-5"})})]}),r.bio?s.jsx("div",{className:"mb-4 text-sm",children:s.jsx("p",{className:"text-gray-300",children:r.bio})}):s.jsx("div",{className:"mb-4 text-sm text-gray-500",children:s.jsx("p",{children:"No bio yet"})}),r.socialLinks&&(r.socialLinks.website||r.socialLinks.x||r.socialLinks.instagram||r.socialLinks.tiktok)&&s.jsxs("div",{className:"mb-6 flex flex-wrap gap-3",children:[r.socialLinks.website&&s.jsxs("a",{href:r.socialLinks.website.startsWith("http")?r.socialLinks.website:`https://${r.socialLinks.website}`,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2 text-sm",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Website"]}),r.socialLinks.x&&s.jsx("a",{href:`https://twitter.com/${r.socialLinks.x.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",title:r.socialLinks.x,children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),r.socialLinks.instagram&&s.jsx("a",{href:`https://instagram.com/${r.socialLinks.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",title:r.socialLinks.instagram,children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.897 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.897-.419-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.074-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"})})}),r.socialLinks.tiktok&&s.jsx("a",{href:`https://tiktok.com/@${r.socialLinks.tiktok.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",title:r.socialLinks.tiktok,children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-white",children:s.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.65 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})})})]})]}),s.jsx("div",{className:"px-2",children:s.jsx("div",{className:"grid grid-cols-3 gap-1",children:i.length>0?i.map(T=>s.jsxs("div",{className:"aspect-square relative group cursor-pointer bg-gray-900",onClick:()=>y(T),children:[T.mediaUrl?T.mediaType==="video"?s.jsxs("div",{className:"w-full h-full relative bg-gray-900",children:[s.jsx("video",{src:T.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-16 h-16 bg-black bg-opacity-60 rounded-full flex items-center justify-center hover:bg-opacity-80 transition-opacity",children:s.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})})})}),s.jsxs("div",{className:"absolute bottom-2 right-2 px-2 py-0.5 bg-black bg-opacity-70 rounded flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6.5 4.5a.5.5 0 01.09.09L11 7.5a.5.5 0 110 .92l-4.41 2.91a.5.5 0 11-.59-.81l4.41-2.91L6.91 4.5A.5.5 0 016.5 4.5zm3 0a.5.5 0 01.09.09l5 5a.5.5 0 110 .92l-5 5a.5.5 0 11-.59-.81L13.5 10l-4.41-2.91A.5.5 0 019.5 4.5zm-6 0a.5.5 0 01.09.09l5 5a.5.5 0 11-.59.81L3 5.5l4.41 2.91a.5.5 0 11-.59-.81l-5-5A.5.5 0 010 4.5z"})}),s.jsx("span",{className:"text-xs text-white font-medium",children:"Video"})]}),T.locationLabel&&s.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black bg-opacity-70 rounded flex items-center gap-1",children:[s.jsxs("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs text-white font-medium",children:T.locationLabel})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("img",{src:T.mediaUrl,alt:"",className:"w-full h-full object-cover"}),T.locationLabel&&s.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black bg-opacity-70 rounded flex items-center gap-1",children:[s.jsxs("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs text-white font-medium",children:T.locationLabel})]})]}):s.jsxs("div",{className:"w-full h-full relative flex items-center justify-center p-3",style:{background:(()=>{const E=["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#1e293b","#0f172a","#1a202c"];return E[T.text?T.text.length%E.length:0]})()},children:[s.jsx("p",{className:"text-white text-xs font-semibold text-center line-clamp-6",children:T.text||"No preview"}),T.locationLabel&&s.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black bg-opacity-70 rounded flex items-center gap-1",children:[s.jsxs("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-xs text-white font-medium",children:T.locationLabel})]})]}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity"})]},T.id)):s.jsxs("div",{className:"col-span-3 text-center py-12 text-gray-500",children:[s.jsx("p",{className:"text-lg mb-2",children:"No posts yet"}),s.jsx("p",{className:"text-sm",children:"When this user posts, you'll see them here."})]})})}),C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",onClick:()=>_(!1),children:s.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[80vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-800 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Places Traveled"}),s.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:s.jsx(pt,{className:"w-6 h-6 text-white"})})]}),s.jsx("div",{className:"p-6",children:r!=null&&r.placesTraveled&&Array.isArray(r.placesTraveled)&&r.placesTraveled.length>0?s.jsx("div",{className:"flex flex-col gap-3",children:r.placesTraveled.map((T,E)=>s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer",onClick:()=>{e(`/feed?location=${encodeURIComponent(T)}`),_(!1)},children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-white font-medium",children:T})}),s.jsx("button",{className:"p-2 hover:bg-gray-600 rounded-full transition-colors flex-shrink-0",title:"View",onClick:B=>{B.stopPropagation(),e(`/feed?location=${encodeURIComponent(T)}`),_(!1)},children:s.jsx(ep,{className:"w-5 h-5 text-gray-400 hover:text-white"})})]},E))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ln,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:"No places traveled yet"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Add places you've traveled to in your profile settings"})]})})]})}),g&&s.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",onClick:()=>y(null),children:[s.jsx("button",{onClick:T=>{T.stopPropagation(),y(null)},className:"absolute top-4 left-4 w-10 h-10 bg-black bg-opacity-60 hover:bg-opacity-80 rounded-full flex items-center justify-center transition-colors z-10",children:s.jsx(pt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"relative max-w-4xl w-full h-full flex items-center justify-center",onClick:T=>T.stopPropagation(),children:[g.mediaUrl?g.mediaType==="video"?s.jsx("video",{src:g.mediaUrl,className:"max-h-[90vh] w-auto",controls:!0,autoPlay:!0}):s.jsx("img",{src:g.mediaUrl,alt:"",className:"max-h-[90vh] w-auto object-contain"}):s.jsx("div",{className:"w-full max-w-2xl p-8",style:{background:(()=>{const T=["#1e3a8a","#1e40af","#1d4ed8","#2563eb","#3b82f6","#1e293b","#0f172a","#1a202c"];return T[g.text?g.text.length%T.length:0]})()},children:s.jsx("p",{className:"text-white text-xl font-bold leading-relaxed whitespace-pre-wrap",children:g.text})}),g.text&&g.mediaUrl&&s.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black bg-opacity-70 rounded-lg p-4",children:s.jsx("p",{className:"text-white text-sm",children:g.text})})]})]})]})}function KY(e){return Be({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M400 421.3V154.7c0-23.5-19.2-42.7-42.7-42.7H90.7C67.2 112 48 131.2 48 154.7v266.7c0 23.5 19.2 42.7 42.7 42.7h266.7c23.4-.1 42.6-19.3 42.6-42.8zM157.3 304l45.3 64 66.7-96 88 128H90.7l66.6-96z"}},{tag:"path",attr:{d:"M421.3 48H154.7C131.2 48 112 67.2 112 90.7V96h261.3c23.5 0 42.7 19.2 42.7 42.7V400h5.3c23.5 0 42.7-19.2 42.7-42.7V90.7c0-23.5-19.2-42.7-42.7-42.7z"}}]})(e)}function YY(e){return Be({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}},{tag:"path",attr:{d:"M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"}}]})(e)}function qY(e){return Be({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function XY(e){return Be({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}}]})(e)}function JY(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 3H4.99C3.89 3 3 3.9 3 5l.01 14c0 1.1.89 2 1.99 2h10l6-6V5c0-1.1-.9-2-2-2zM7 8h10v2H7V8zm5 6H7v-2h5v2zm2 5.5V14h5.5L14 19.5z"}}]})(e)}function ZY(e){return Be({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"}}]})(e)}function to(e){if(!e)return null;console.log("Extracting post ID from text:",e);const t=/https?:\/\/[^\s\/]+\/post\/([^\s\/\?&#]+?)(?:\/|\?|#|$)/i;let n=e.match(t);if(n&&n[1])return console.log(" Extracted post ID (full URL):",n[1]),n[1];const r=/\/?post\/([^\s\/\?&#]+?)(?:\/|\?|#|$|\s)/i;if(n=e.match(r),n&&n[1])return console.log(" Extracted post ID (path):",n[1]),n[1];const a=/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}-\d+)/i;if(n=e.match(a),n&&n[1])return console.log(" Extracted post ID (UUID-timestamp):",n[1]),n[1];const i=/(post-\d+-\d+-\d+-[a-z0-9]+)/i;if(n=e.match(i),n&&n[1])return console.log(" Extracted post ID (old format):",n[1]),n[1];const o=/(artane-post-\d+-\d+-[a-z0-9]+)/i;if(n=e.match(o),n&&n[1])return console.log(" Extracted post ID (artane format):",n[1]),n[1];const l=/(reclip-[^-]+-[^-]+-\d+)/i;if(n=e.match(l),n&&n[1])return console.log(" Extracted post ID (reclip format):",n[1]),n[1];const c=/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})(?![-\d])/i;return n=e.match(c),n&&n[1]?(console.log(" Extracted post ID (UUID only, fallback):",n[1]),n[1]):(console.log(" No post ID found in text. Full text:",e),console.log(" Tried patterns: full URL, path, UUID-timestamp, old format, artane format, reclip format, UUID only"),null)}function QY({post:e,commentText:t,commenterHandle:n}){const r=e.mediaUrl&&e.mediaUrl.trim()!=="",a=e.mediaItems&&e.mediaItems.length>0,i=r||a;return s.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden border shadow-xl",style:{backgroundColor:"#ffffff",borderColor:"#e5e7eb"},children:[s.jsxs("div",{className:"px-4 pt-4 pb-2",style:{backgroundColor:"#ffffff"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(It,{src:zn(n),name:n.split("@")[0],size:"sm"}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"font-semibold text-sm",style:{color:"#111827"},children:n}),s.jsx($s,{value:zs(n)||"",size:12}),s.jsx("span",{className:"text-xs",style:{color:"#6b7280"},children:"commented"})]})})]}),s.jsx("p",{className:"text-sm mb-3 pl-11",style:{color:"#111827"},children:t})]}),s.jsx("div",{className:"border-t px-4 py-3",style:{borderColor:"#e5e7eb",backgroundColor:"#f9fafb"},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(It,{src:zn(e.userHandle),name:e.userHandle.split("@")[0],size:"sm"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[s.jsx("span",{className:"font-semibold text-xs",style:{color:"#111827"},children:e.userHandle}),s.jsx($s,{value:zs(e.userHandle)||"",size:10})]}),e.text&&s.jsx("p",{className:"text-xs line-clamp-2 mb-2",style:{color:"#4b5563"},children:e.text}),i&&s.jsxs("div",{className:"rounded-lg overflow-hidden border",style:{borderColor:"#e5e7eb"},children:[r&&(e.mediaType==="video"?s.jsxs("div",{className:"relative",children:[s.jsx("video",{src:e.mediaUrl,className:"w-full h-32 object-cover",muted:!0,playsInline:!0}),s.jsx("div",{className:"absolute top-2 right-2 bg-black/50 rounded px-1.5 py-0.5",children:s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})]}):s.jsx("img",{src:e.mediaUrl,alt:"Post media",className:"w-full h-32 object-cover"})),a&&!r&&e.mediaItems&&e.mediaItems[0]&&(e.mediaItems[0].type==="video"?s.jsxs("div",{className:"relative",children:[s.jsx("video",{src:e.mediaItems[0].url,className:"w-full h-32 object-cover",muted:!0,playsInline:!0}),s.jsx("div",{className:"absolute top-2 right-2 bg-black/50 rounded px-1.5 py-0.5",children:s.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})]}):s.jsx("img",{src:e.mediaItems[0].url,alt:"Post media",className:"w-full h-32 object-cover"}))]})]})]})})]})}function Lf({post:e}){var a,i;const t=e.mediaUrl&&e.mediaUrl.trim()!==""&&!e.mediaUrl.startsWith("data:image"),n=e.mediaItems&&e.mediaItems.length>0,r=!!e.text&&!t&&!n;return console.log("SharedPostCard rendering:",{postId:e.id,isTextOnly:r,hasRealMediaUrl:t,mediaUrl:e.mediaUrl,hasMediaItems:n,mediaItemsCount:((a=e.mediaItems)==null?void 0:a.length)||0,hasText:!!e.text,text:(i=e.text)==null?void 0:i.substring(0,50)}),r||e.text&&!n?s.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden border shadow-2xl",style:{maxWidth:"100%",boxSizing:"border-box",backgroundColor:"#ffffff",borderColor:"#e5e7eb",display:"block",visibility:"visible",opacity:1,color:"#000000",background:"#ffffff"},children:[s.jsx("div",{className:"flex items-start justify-between px-4 pt-4 pb-3 border-b",style:{backgroundColor:"#ffffff",borderColor:"#e5e7eb"},children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx(It,{src:zn(e.userHandle),name:e.userHandle.split("@")[0],size:"sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-1.5 text-sm",style:{color:"#111827"},children:[s.jsx("span",{children:e.userHandle}),s.jsx($s,{value:zs(e.userHandle)||"",size:14})]}),s.jsxs("div",{className:"text-xs flex items-center gap-2 mt-0.5",style:{color:"#4b5563"},children:[e.locationLabel&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),e.locationLabel]}),e.createdAt&&s.jsx("span",{style:{color:"#9ca3af"},children:""})]}),e.createdAt&&s.jsx("span",{children:Ta(e.createdAt)})]})]})]})}),s.jsx("div",{className:"p-4 w-full overflow-hidden",style:{maxWidth:"100%",boxSizing:"border-box",backgroundColor:"#ffffff"},children:s.jsx("div",{className:"p-4 rounded-lg overflow-hidden w-full",style:{maxWidth:"100%",boxSizing:"border-box",backgroundColor:"#000000"},children:s.jsx("div",{className:"text-base leading-relaxed whitespace-pre-wrap font-normal break-words w-full",style:{wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"100%",boxSizing:"border-box",color:"#ffffff"},children:e.text})})})]}):s.jsx("div",{className:"w-full max-w-sm rounded-2xl overflow-hidden border shadow-lg mt-2",style:{backgroundColor:"#ffffff",borderColor:"#e5e7eb"},children:s.jsxs("div",{className:"p-4",style:{backgroundColor:"#ffffff"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(It,{src:zn(e.userHandle),name:e.userHandle.split("@")[0],size:"sm"}),s.jsx("span",{className:"font-semibold text-sm",style:{color:"#111827"},children:e.userHandle})]}),e.text&&s.jsx("p",{className:"text-sm line-clamp-2",style:{color:"#374151"},children:e.text}),e.mediaUrl&&s.jsx("div",{className:"mt-2 rounded-lg overflow-hidden",children:e.mediaType==="video"?s.jsx("video",{src:e.mediaUrl,className:"w-full h-auto max-h-48 object-cover",controls:!0}):s.jsx("img",{src:e.mediaUrl,alt:"Post media",className:"w-full h-auto max-h-48 object-cover"})})]})})}function eq(){const e=Xt(),t=qn(),{handle:n}=Vy(),{user:r}=tn(),[a,i]=D.useState([]),[o,l]=D.useState({}),[c,d]=D.useState(""),[u,f]=m.useState(null);m.useEffect(()=>{const F=t.state;F!=null&&F.sharePostUrl&&n&&(d(F.sharePostUrl),F.sharePostId&&f(F.sharePostId),window.history.replaceState({...F,sharePostUrl:null,sharePostId:null},""),zt==null||zt("Post link ready to send!"))},[t.state,n]);const[h,g]=D.useState(!0),[y,p]=D.useState(void 0),[S,x]=D.useState({}),v=m.useRef(null),b=m.useRef(null),[w,N]=D.useState(null),R=m.useRef(null),[C,_]=D.useState(!1),W=m.useCallback(()=>{const F=b.current;if(!F)return;const $=()=>{F&&(F.scrollTop=F.scrollHeight)};$(),requestAnimationFrame(()=>{$(),setTimeout(()=>{$()},100)})},[]),T=m.useRef(null),E=m.useRef(0),B=m.useRef(null);m.useLayoutEffect(()=>{if(a.length>0&&!h){const F=a.length,$=a[a.length-1],Z=($==null?void 0:$.id)||null,Pe=F!==E.current,ve=Z!==T.current;if(Pe||ve){E.current=F,T.current=Z;const re=()=>{const M=b.current;if(!M)return;const G=M.scrollHeight,P=document.querySelector(".fixed.bottom-0.bg-gray-900"),Y=P?P.getBoundingClientRect().height:80;M.scrollTop=G,M.scrollTo({top:G,behavior:"instant"}),requestAnimationFrame(()=>{M.scrollTop=G});const j=B.current;j&&requestAnimationFrame(()=>{j.scrollIntoView({behavior:"instant",block:"end",inline:"nearest"}),requestAnimationFrame(()=>{setTimeout(()=>{const O=j.getBoundingClientRect(),se=M.getBoundingClientRect(),K=window.innerHeight,me=document.querySelector(".fixed.bottom-0.bg-gray-900"),pe=me?me.getBoundingClientRect().height:Y,Ve=K-pe,Ce=O.top-se.top+M.scrollTop+O.height,Jt=Ve-se.top-150,Nt=Ce-Jt;M.scrollTop=Nt,M.scrollTo({top:Nt,behavior:"instant"}),requestAnimationFrame(()=>{M.scrollTop=Nt,M.scrollTo({top:Nt,behavior:"instant"})}),Nt>M.scrollTop&&setTimeout(()=>{const st=j.getBoundingClientRect(),Ye=M.getBoundingClientRect(),Bt=document.querySelector(".fixed.bottom-0.bg-gray-900"),we=Bt?Bt.getBoundingClientRect().height:pe,ot=window.innerHeight-we-Ye.top-180,he=st.top-Ye.top+M.scrollTop+st.height;if(he>M.scrollTop+ot){const je=he-ot;M.scrollTop=je,M.scrollTo({top:je,behavior:"instant"}),requestAnimationFrame(()=>{Math.abs(M.scrollTop-je)>1&&(M.scrollTop=je,M.scrollTo({top:je,behavior:"instant"}),setTimeout(()=>{M.scrollTop=je,M.scrollTo({top:je,behavior:"instant"})},50))})}},150)},50)})})};requestAnimationFrame(()=>{re(),setTimeout(re,50),setTimeout(re,150),setTimeout(re,300)})}}},[a,h]),m.useEffect(()=>{const F=b.current;if(!F)return;const $=new MutationObserver(()=>{const Z=F.scrollHeight,Pe=F.scrollTop,ve=F.clientHeight,re=Z-ve;Math.abs(Pe-re)<100&&re>0&&requestAnimationFrame(()=>{F.scrollTop=Z;const G=B.current;if(G){const P=document.querySelector(".fixed.bottom-0.bg-gray-900"),Y=P?P.getBoundingClientRect().height:80;requestAnimationFrame(()=>{const j=G.getBoundingClientRect(),se=window.innerHeight-Y,K=F.getBoundingClientRect(),pe=j.top-K.top+F.scrollTop+j.height,Ce=se-K.top-150,Ft=pe-Ce;F.scrollTop=Ft,F.scrollTo({top:Ft,behavior:"instant"}),requestAnimationFrame(()=>{F.scrollTop=Ft,F.scrollTo({top:Ft,behavior:"instant"})}),Ft>F.scrollTop&&setTimeout(()=>{const Tt=G.getBoundingClientRect(),Jt=F.getBoundingClientRect(),Nt=document.querySelector(".fixed.bottom-0.bg-gray-900"),st=Nt?Nt.getBoundingClientRect().height:Y,tt=window.innerHeight-st-Jt.top-180,Ze=Tt.top-Jt.top+F.scrollTop+Tt.height;if(Ze>F.scrollTop+tt){const ot=Ze-tt;F.scrollTop=ot,F.scrollTo({top:ot,behavior:"instant"}),requestAnimationFrame(()=>{Math.abs(F.scrollTop-ot)>1&&(F.scrollTop=ot,F.scrollTo({top:ot,behavior:"instant"}))})}},150)})}})});return $.observe(F,{childList:!0,subtree:!0,attributes:!1,characterData:!1}),()=>$.disconnect()},[]),m.useEffect(()=>{async function F(){n&&n==="Sarah@Artane"&&p("https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop")}if(F(),!n||!(r!=null&&r.handle))return;dx(r.handle,n).then(Z=>{const ve=[...Z].sort((G,P)=>G.timestamp-P.timestamp).map(G=>({...G,isFromMe:G.senderHandle===r.handle,senderAvatar:G.senderHandle===r.handle?r.avatarUrl||zn(r.handle):zn(n)}));console.log("=== LOADED MESSAGES ==="),ve.forEach((G,P)=>{var Y;console.log(`Message ${P+1}:`,{id:G.id,sender:G.senderHandle,text:(Y=G.text)==null?void 0:Y.substring(0,50),postId:G.postId||"NO POST ID",commentId:G.commentId||"NO COMMENT ID",commentText:G.commentText||"NO COMMENT TEXT",isSystemMessage:G.isSystemMessage,hasImage:!!G.imageUrl})}),console.log("=== END LOADED MESSAGES ==="),i(ve),g(!1),E.current=ve.length,T.current=ve.length>0?ve[ve.length-1].id:null,setTimeout(W,0),kE(r.handle,n).catch(()=>{});const re=Array.from(new Set(ve.map(G=>G.imageUrl).filter(Boolean)));Promise.all(re.map(async G=>[G,await Qk(G)])).then(G=>l(Object.fromEntries(G)));const M=new Set;ve.forEach(G=>{if(G.postId)console.log("Found postId in message field:",G.postId,"commentText:",G.commentText),M.add(G.postId);else if(G.text){const P=to(G.text);P&&(console.log("Found post ID in message text:",P),M.add(P))}}),console.log("Fetching posts for IDs:",Array.from(M)),Promise.all(Array.from(M).map(async G=>{var P,Y;try{console.log("Fetching post:",G);const j=await ra(G);j?(console.log("Successfully fetched post:",{postId:j.id,userHandle:j.userHandle,hasText:!!j.text,text:(P=j.text)==null?void 0:P.substring(0,50),hasMediaUrl:!!j.mediaUrl,mediaUrl:j.mediaUrl,hasMediaItems:!!(j.mediaItems&&j.mediaItems.length>0),mediaItemsCount:((Y=j.mediaItems)==null?void 0:Y.length)||0,hasTextStyle:!!j.textStyle,textStyle:j.textStyle}),x(O=>({...O,[G]:j}))):console.warn("Post not found:",G)}catch(j){console.error("Failed to fetch shared post:",G,j)}}))});const $=Z=>{var ve;const Pe=((ve=Z.detail)==null?void 0:ve.participants)||[];!Pe.includes((r==null?void 0:r.handle)||"")||!Pe.includes(n||"")||dx(r.handle,n).then(re=>{const G=[...re].sort((O,se)=>O.timestamp-se.timestamp).map(O=>({...O,isFromMe:O.senderHandle===r.handle,senderAvatar:O.senderHandle===r.handle?r.avatarUrl||zn(r.handle):zn(n)}));console.log("Live update - new messages:",G.map(O=>{var se;return{id:O.id,sender:O.senderHandle,text:(se=O.text)==null?void 0:se.substring(0,30),postId:O.postId,commentText:O.commentText,isSystemMessage:O.isSystemMessage}})),E.current=0,T.current=null,i(G);const P=new Set;G.forEach(O=>{if(O.postId)console.log("Live update - Found postId in message field:",O.postId,"commentText:",O.commentText),P.add(O.postId);else if(O.text){const se=to(O.text);se&&(console.log("Live update - Found post ID in message text:",se),P.add(se))}}),console.log("Live update - Fetching posts for IDs:",Array.from(P)),Promise.all(Array.from(P).map(async O=>{try{console.log("Live update - Fetching post:",O);const se=await ra(O);se?(console.log("Live update - Successfully fetched post:",O,"userHandle:",se.userHandle),x(K=>({...K,[O]:se}))):console.warn("Live update - Post not found:",O)}catch(se){console.error("Live update - Failed to fetch shared post:",O,se)}}));const Y=()=>{const O=b.current;if(!O)return;const se=O.scrollHeight;O.scrollTop=se;const K=B.current;if(K){const me=document.querySelector(".fixed.bottom-0.bg-gray-900"),pe=me?me.getBoundingClientRect().height:80;setTimeout(()=>{const Ve=K.getBoundingClientRect(),Ce=window.innerHeight-pe;if(Ve.bottom>Ce){const Ft=Ve.bottom-Ce+20;O.scrollTop=O.scrollTop+Ft}},10)}};setTimeout(Y,50),setTimeout(Y,150),setTimeout(Y,300);const j=Array.from(new Set(G.map(O=>O.imageUrl).filter(Boolean)));Promise.all(j.map(async O=>[O,await Qk(O)])).then(O=>l(Object.fromEntries(O)))})};return window.addEventListener("conversationUpdated",$),()=>window.removeEventListener("conversationUpdated",$)},[n,r==null?void 0:r.handle,W]);const H=async()=>{if(!c.trim()||!(r!=null&&r.handle)||!n)return;const F=u||to(c);F&&!S[F]&&ra(F).then(Z=>{Z&&x(Pe=>({...Pe,[F]:Z}))}).catch(Z=>{console.error("Failed to fetch shared post:",Z)});const $={id:`temp-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,senderHandle:r.handle,text:c,timestamp:Date.now(),isFromMe:!0,senderAvatar:r.avatarUrl||zn(r.handle),isSystemMessage:!1,postId:F||void 0};i(Z=>[...Z,$].sort((ve,re)=>ve.timestamp-re.timestamp)),d(""),f(null),setTimeout(()=>W(),100),await _i(r.handle,n,{text:c,postId:F||void 0})},q=async F=>{if(!(r!=null&&r.handle)||!n)return;const $={id:`temp-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,senderHandle:r.handle,text:F,timestamp:Date.now(),isFromMe:!0,senderAvatar:r.avatarUrl||zn(r.handle),isSystemMessage:!1};i(Z=>[...Z,$].sort((ve,re)=>ve.timestamp-re.timestamp)),_(!1),setTimeout(()=>W(),100),await _i(r.handle,n,{text:F})},ie=()=>{var F;(F=v.current)==null||F.click()},X=F=>{var Pe;const $=(Pe=F.target.files)==null?void 0:Pe[0];if(!$)return;const Z=new FileReader;Z.onloadend=()=>{const ve=Z.result;if(!(r!=null&&r.handle)||!n)return;const re={id:`temp-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,senderHandle:r.handle,imageUrl:ve,timestamp:Date.now(),isFromMe:!0,senderAvatar:r.avatarUrl||zn(r.handle),isSystemMessage:!1};i(M=>[...M,re].sort((P,Y)=>P.timestamp-Y.timestamp)),setTimeout(()=>W(),100),_i(r.handle,n,{imageUrl:ve})},Z.readAsDataURL($)},V=F=>{const $=new Date(F),Pe=new Date().getTime()-$.getTime(),ve=Math.floor(Pe/(1e3*60*60*24));return ve===0?"Today "+$.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):ve===1?"Yesterday "+$.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][$.getDay()]+" "+$.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},z=(F,$)=>{$.preventDefault(),$.stopPropagation(),N({message:F,x:$.type==="touchstart"?$.touches[0].clientX:$.clientX,y:$.type==="touchstart"?$.touches[0].clientY:$.clientY})},J=(F,$)=>{$.preventDefault(),$.stopPropagation(),N({message:F,x:$.clientX,y:$.clientY})},U=(F,$)=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{z(F,$)},500)},ue=()=>{R.current&&(clearTimeout(R.current),R.current=null)},fe=()=>{N(null)},Ae=()=>{w!=null&&w.message&&(d(`Replying to: ${w.message.text||"message"} - `),fe())},_e=()=>{if(!(w!=null&&w.message))return;const F=w.message.text||"";F&&navigator.clipboard.writeText(F).then(()=>{}),fe()},Re=()=>{w!=null&&w.message&&fe()},Se=()=>{w!=null&&w.message&&fe()},de=()=>{w!=null&&w.message&&(confirm("Report this message?"),fe())};return m.useEffect(()=>{const F=()=>{w&&fe()};if(w)return document.addEventListener("click",F),document.addEventListener("contextmenu",F),()=>{document.removeEventListener("click",F),document.removeEventListener("contextmenu",F)}},[w]),h?s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}):s.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[s.jsx("div",{className:"sticky top-0 bg-black border-b border-gray-800 z-10",children:s.jsxs("div",{className:"flex items-center px-4 py-3",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-900 rounded-full transition-colors",children:s.jsx(ua,{className:"w-6 h-6"})}),n&&s.jsxs("div",{className:"flex items-center ml-3 flex-1",children:[s.jsx(It,{src:y,name:n,size:"sm"}),s.jsx("div",{className:"ml-3 flex-1",children:s.jsx("div",{className:"flex items-center gap-1",children:s.jsx("span",{className:"font-medium",children:n})})})]})]})}),s.jsx("div",{ref:b,className:"flex-1 overflow-y-auto px-4 py-4 pb-40",style:{minHeight:0,maxHeight:"calc(100vh - 120px)"},children:s.jsx("div",{className:"space-y-3",children:a.map((F,$)=>{const Z=$===0||F.timestamp-a[$-1].timestamp>6e4,Pe=$===a.length-1;return s.jsxs(m.Fragment,{children:[Z&&F.isSystemMessage&&s.jsx("div",{className:"text-center py-2",children:s.jsx("span",{className:"text-xs text-gray-400",children:V(F.timestamp)})}),F.isSystemMessage&&s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-white text-sm",children:F.text})}),!F.isSystemMessage&&s.jsx("div",{ref:Pe?B:null,className:`flex ${F.isFromMe?"justify-end":"justify-start"} ${Z?"mt-4":""}`,children:F.isFromMe?(()=>{const ve=F.postId||(F.text?to(F.text):null),re=ve?S[ve]:null;if(ve&&!re&&console.log("Post ID detected but not yet loaded:",ve),re&&console.log("Rendering SharedPostCard for post:",re.id,"isTextOnly:",!re.mediaUrl&&(!re.mediaItems||re.mediaItems.length===0)&&re.text),re)return s.jsx("div",{className:"w-full flex justify-end mb-2",style:{maxWidth:"100%"},children:s.jsx("div",{style:{maxWidth:"448px",width:"100%"},children:s.jsx(Lf,{post:re})})});if(ve&&!re)return s.jsx("div",{className:"w-full flex justify-end mb-2",style:{maxWidth:"100%"},children:s.jsx("div",{style:{maxWidth:"448px",width:"100%"},children:s.jsx("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-gray-800 border border-gray-700 shadow-lg p-4",children:s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})})})});if(ve)return null;if(F.text&&(F.text.includes("/post/")||F.text.includes("http://")||F.text.includes("https://"))&&!ve){const G=to(F.text);if(G){if(S[G])return s.jsx("div",{className:"w-full flex justify-end mb-2",style:{maxWidth:"100%"},children:s.jsx("div",{style:{maxWidth:"448px",width:"100%"},children:s.jsx(Lf,{post:S[G]})})});S[G]||ra(G).then(P=>{P&&x(Y=>({...Y,[G]:P}))}).catch(P=>{console.error("Failed to fetch post from URL:",P)})}return s.jsx("div",{className:"w-full flex justify-end mb-2",style:{maxWidth:"100%"},children:s.jsx("div",{style:{maxWidth:"448px",width:"100%"},children:s.jsx("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-gray-800 border border-gray-700 shadow-lg p-4",children:s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})})})})}return s.jsxs("div",{className:"bg-purple-600 rounded-2xl px-4 py-2 max-w-[70%] break-words cursor-pointer select-none",onContextMenu:G=>J(F,G),onTouchStart:G=>U(F,G),onTouchEnd:ue,onTouchCancel:ue,onClick:G=>{F.text&&(F.text.includes("http://")||F.text.includes("https://"))&&(G.preventDefault(),G.stopPropagation())},children:[F.imageUrl&&s.jsxs("div",{className:"relative mb-2",children:[s.jsx("img",{src:F.imageUrl,alt:"Sent image",className:"max-w-full rounded-lg"}),F.imageUrl&&Wh(F.imageUrl)&&o[F.imageUrl]===!1&&s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-[10px] text-white/90 px-2 py-1 rounded",children:"Story unavailable"})})]}),F.text&&s.jsx("p",{className:"text-white text-sm",style:{userSelect:"text"},children:F.text})]})})():(()=>{const ve=F.postId,re=ve?S[ve]:null,M=F.commentText;if(ve&&console.log("Comment notification detected:",{commentPostId:ve,commentText:M,hasPost:!!re,messageId:F.id}),re&&M)return console.log("Rendering CommentCard for:",ve),s.jsxs("div",{className:"flex items-start gap-2 w-full mb-2",style:{maxWidth:"100%"},children:[F.senderAvatar&&s.jsx(It,{src:F.senderAvatar,name:F.senderHandle,size:"sm"}),s.jsx("div",{className:"flex-1 min-w-0",style:{maxWidth:"448px"},children:s.jsx(QY,{post:re,commentText:M,commenterHandle:F.senderHandle})})]});if(ve&&!re)return s.jsxs("div",{className:"flex items-start gap-2 w-full mb-2",style:{maxWidth:"100%"},children:[F.senderAvatar&&s.jsx(It,{src:F.senderAvatar,name:F.senderHandle,size:"sm"}),s.jsx("div",{className:"flex-1 min-w-0",style:{maxWidth:"448px"},children:s.jsx("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-gray-800 border border-gray-700 shadow-lg p-4",children:s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})})})]});const G=F.postId||(F.text?to(F.text):null),P=G?S[G]:null;if(G&&!P&&console.log("Post ID detected but not yet loaded:",G,"from field:",!!F.postId,"from text:",!F.postId),P&&console.log("Rendering SharedPostCard for post:",P.id,"isTextOnly:",!P.mediaUrl&&(!P.mediaItems||P.mediaItems.length===0)&&P.text),P)return s.jsxs("div",{className:"flex items-start gap-2 w-full mb-2",style:{maxWidth:"100%"},children:[F.senderAvatar&&s.jsx(It,{src:F.senderAvatar,name:F.senderHandle,size:"sm"}),s.jsx("div",{className:"flex-1 min-w-0",style:{maxWidth:"448px"},children:s.jsx(Lf,{post:P})})]});if(G&&!P)return s.jsxs("div",{className:"flex items-start gap-2 w-full mb-2",style:{maxWidth:"100%"},children:[F.senderAvatar&&s.jsx(It,{src:F.senderAvatar,name:F.senderHandle,size:"sm"}),s.jsx("div",{className:"flex-1 min-w-0",style:{maxWidth:"448px"},children:s.jsx("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-gray-800 border border-gray-700 shadow-lg p-4",children:s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})})})]});if(ve&&!re||G)return null;if(F.text&&(F.text.includes("/post/")||F.text.includes("http://")||F.text.includes("https://"))&&!G){const j=to(F.text);if(j){if(S[j])return s.jsxs("div",{className:"flex items-start gap-2 w-full mb-2",style:{maxWidth:"100%"},children:[F.senderAvatar&&s.jsx(It,{src:F.senderAvatar,name:F.senderHandle,size:"sm"}),s.jsx("div",{className:"flex-1 min-w-0",style:{maxWidth:"448px"},children:s.jsx(Lf,{post:S[j]})})]});S[j]||ra(j).then(O=>{O&&x(se=>({...se,[j]:O}))}).catch(O=>{console.error("Failed to fetch post from URL:",O)})}return s.jsxs("div",{className:"flex items-start gap-2 w-full mb-2",style:{maxWidth:"100%"},children:[F.senderAvatar&&s.jsx(It,{src:F.senderAvatar,name:F.senderHandle,size:"sm"}),s.jsx("div",{className:"flex-1 min-w-0",style:{maxWidth:"448px"},children:s.jsx("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-gray-800 border border-gray-700 shadow-lg p-4",children:s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})})})]})}return s.jsxs("div",{className:"flex items-start gap-2 max-w-[70%]",children:[F.senderAvatar&&s.jsx(It,{src:F.senderAvatar,name:F.senderHandle,size:"sm"}),s.jsxs("div",{className:"bg-gray-800 rounded-2xl px-4 py-2 break-words cursor-pointer select-none",onContextMenu:j=>J(F,j),onTouchStart:j=>U(F,j),onTouchEnd:ue,onTouchCancel:ue,onClick:j=>{F.text&&(F.text.includes("http://")||F.text.includes("https://"))&&(j.preventDefault(),j.stopPropagation())},children:[F.imageUrl&&s.jsxs("div",{className:"relative mb-2",children:[s.jsx("img",{src:F.imageUrl,alt:"Received image",className:"max-w-full rounded-lg"}),F.imageUrl&&Wh(F.imageUrl)&&o[F.imageUrl]===!1&&s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-[10px] text-white/90 px-2 py-1 rounded",children:"Story unavailable"})})]}),F.text&&!ve&&s.jsx("p",{className:"text-white text-sm",style:{userSelect:"text"},children:F.text})]})]})})()})]},F.id)})})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900 border-t border-gray-800 px-4 py-3 z-20",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[s.jsx("input",{type:"text",value:c,onChange:F=>d(F.target.value),onKeyPress:F=>{F.key==="Enter"&&H()},placeholder:"Message...",className:"flex-1 bg-gray-800 text-white placeholder-gray-500 px-4 py-2 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-600"}),c.trim()&&s.jsx("button",{onClick:H,className:"text-purple-600 hover:text-purple-500 transition-colors",children:s.jsx(np,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"flex items-center gap-2",children:!c.trim()&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:ie,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:s.jsx(KY,{className:"w-6 h-6 text-gray-400"})}),s.jsx("button",{className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:s.jsx(YY,{className:"w-6 h-6 text-gray-400"})}),s.jsx("input",{type:"file",ref:v,onChange:X,accept:"image/*",className:"hidden"})]})})]})}),w&&s.jsx("div",{className:"fixed bg-gray-900 border border-gray-700 rounded-lg shadow-2xl z-50 min-w-[200px]",style:{left:`${w.x}px`,top:`${w.y}px`,transform:"translate(-50%, -10px)"},onClick:F=>F.stopPropagation(),children:s.jsxs("div",{className:"py-2",children:[w.message&&s.jsx("div",{className:"px-4 py-2 text-xs text-gray-400 border-b border-gray-700",children:V(w.message.timestamp)}),s.jsxs("button",{onClick:Ae,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[s.jsx(xE,{className:"w-5 h-5"}),s.jsx("span",{children:"Reply"})]}),s.jsxs("button",{onClick:()=>{_(!0),fe()},className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[s.jsx(JY,{className:"w-5 h-5"}),s.jsx("span",{children:"Add sticker"})]}),s.jsxs("button",{onClick:Re,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[s.jsx(XY,{className:"w-5 h-5"}),s.jsx("span",{children:"Forward"})]}),s.jsxs("button",{onClick:_e,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[s.jsx(Vd,{className:"w-5 h-5"}),s.jsx("span",{children:"Copy"})]}),s.jsxs("button",{onClick:Se,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[s.jsx(ZY,{className:"w-5 h-5"}),s.jsx("span",{children:"Translate"})]}),s.jsxs("button",{onClick:de,className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-red-500 border-t border-gray-700",children:[s.jsx(qY,{className:"w-5 h-5"}),s.jsx("span",{children:"Report"})]}),s.jsxs("button",{onClick:()=>{fe()},className:"w-full text-left px-4 py-3 hover:bg-gray-800 flex items-center gap-3 text-white",children:[s.jsx(bE,{className:"w-5 h-5"}),s.jsx("span",{children:"More"})]})]})}),C&&s.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end justify-center",onClick:()=>_(!1),children:s.jsxs("div",{className:"bg-gray-900 rounded-t-3xl w-full max-w-md max-h-[60vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700 px-4 py-3 flex items-center justify-between",children:[s.jsx("h3",{className:"text-white font-semibold",children:"Add Sticker"}),s.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-white",children:s.jsx(ua,{className:"w-6 h-6 rotate-180"})})]}),s.jsx("div",{className:"p-4 grid grid-cols-4 gap-4",children:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].map(F=>s.jsx("button",{onClick:()=>q(F),className:"text-4xl hover:bg-gray-800 rounded-2xl p-4 transition-colors flex items-center justify-center aspect-square",children:F},F))}),s.jsxs("div",{className:"p-4 border-t border-gray-700",children:[s.jsx("h4",{className:"text-white font-semibold mb-3",children:"Hearts"}),s.jsx("div",{className:"grid grid-cols-6 gap-3",children:["","","","","","","","","","","","","","","","","","",""].map(F=>s.jsx("button",{onClick:()=>q(F),className:"text-3xl hover:bg-gray-800 rounded-xl p-3 transition-colors flex items-center justify-center aspect-square",children:F},F))})]}),s.jsxs("div",{className:"p-4 border-t border-gray-700",children:[s.jsx("h4",{className:"text-white font-semibold mb-3",children:"Gestures"}),s.jsx("div",{className:"grid grid-cols-6 gap-3",children:["","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].map(F=>s.jsx("button",{onClick:()=>q(F),className:"text-3xl hover:bg-gray-800 rounded-xl p-3 transition-colors flex items-center justify-center aspect-square",children:F},F))})]})]})})]})}const Fi=new Map;function tq(e){if(!e)return!1;const t=e.trim();return/^[\p{Emoji}\p{Emoji_Presentation}\p{Emoji_Modifier_Base}\p{Emoji_Modifier}\p{Emoji_Component}]+$/u.test(t)&&t.length<=10}function nq(e){return e?e.trim().toLowerCase().startsWith("replying to:"):!1}async function rq(e){const t={id:`notif-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,...e,timestamp:Date.now(),read:!1},n=Fi.get(e.toHandle)||[];return n.unshift(t),Fi.set(e.toHandle,n),window.dispatchEvent(new CustomEvent("notificationCreated",{detail:t})),window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{handle:e.toHandle}})),t}async function Kx(e){return Fi.get(e)||[]}async function Q_(e,t){const r=(Fi.get(t)||[]).find(a=>a.id===e);r&&(r.read=!0,window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{handle:t}})))}async function e3(e){(Fi.get(e)||[]).forEach(n=>n.read=!0),window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{handle:e}}))}async function sq(e){return(Fi.get(e)||[]).filter(n=>!n.read).length}async function Yx(e,t){const r=(Fi.get(t)||[]).filter(a=>a.id!==e);Fi.set(t,r),window.dispatchEvent(new CustomEvent("notificationsUpdated",{detail:{handle:t}}))}const aq=Object.freeze(Object.defineProperty({__proto__:null,createNotification:rq,deleteNotification:Yx,getNotifications:Kx,getUnreadNotificationCount:sq,isReplyToPost:nq,isStickerMessage:tq,markAllNotificationsRead:e3,markNotificationRead:Q_},Symbol.toStringTag,{value:"Module"}));function iq(){const e=Xt(),t=qn(),{user:n}=tn(),[r,a]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState(!0),[d,u]=m.useState("notifications"),f=m.useCallback(async()=>{if(!(n!=null&&n.handle))return;const[b,w]=await Promise.all([ux(n.handle),Kx(n.handle)]);a(b),o(w),c(!1)},[n==null?void 0:n.handle]);if(m.useEffect(()=>{if(!(n!=null&&n.handle))return;f();const b=()=>{ux(n.handle).then(a)},w=()=>{Kx(n.handle).then(o)};return window.addEventListener("conversationUpdated",b),window.addEventListener("notificationsUpdated",w),()=>{window.removeEventListener("conversationUpdated",b),window.removeEventListener("notificationsUpdated",w)}},[n==null?void 0:n.handle,f]),!n)return s.jsx("div",{className:"p-6",children:"Please sign in to view notifications."});const h=i.filter(b=>!b.read).length,g=r.reduce((b,w)=>b+w.unread,0),y=async b=>{!b.read&&(n!=null&&n.handle)&&(await Q_(b.id,n.handle),o(w=>w.map(N=>N.id===b.id?{...N,read:!0}:N))),b.type==="sticker"||b.type==="reply"?e(`/messages/${encodeURIComponent(b.fromHandle)}`):b.type==="dm"&&e(`/messages/${encodeURIComponent(b.fromHandle)}`)},p=b=>{switch(b.type){case"sticker":return`Sent you a sticker: ${b.message||""}`;case"reply":return"Replied to your post";case"dm":return"Sent you a message";case"follow_request":return"wants to follow you";default:return b.message||""}},S=b=>{switch(b){case"sticker":return s.jsx(Xl,{className:"w-5 h-5 text-purple-500"});case"reply":return s.jsx(xE,{className:"w-5 h-5 text-blue-500"});case"dm":return s.jsx(Uh,{className:"w-5 h-5 text-green-500"});case"follow_request":return s.jsx(kU,{className:"w-5 h-5 text-amber-500"});default:return s.jsx(Uh,{className:"w-5 h-5 text-gray-500"})}},x=async(b,w)=>{if(w.stopPropagation(),!(!(n!=null&&n.handle)||!(n!=null&&n.id)))try{AU(b.fromHandle,n.handle);const{toggleFollowForPost:N}=await En(()=>Promise.resolve().then(()=>t2),void 0),{posts:R}=await En(()=>Promise.resolve().then(()=>t2),void 0),C=R.find(_=>_.userHandle===b.fromHandle);C&&await N(n.id,C.id),await Yx(b.id,n.handle),await f(),$e.fire({title:"Follow Request Accepted",text:`You are now following ${b.fromHandle}`,icon:"success",timer:2e3,showConfirmButton:!1})}catch(N){console.error("Error accepting follow request:",N),$e.fire({title:"Error",text:"Failed to accept follow request",icon:"error"})}},v=async(b,w)=>{if(w.stopPropagation(),!!(n!=null&&n.handle))try{DU(b.fromHandle,n.handle),await Yx(b.id,n.handle),await f()}catch(N){console.error("Error denying follow request:",N),$e.fire({title:"Error",text:"Failed to deny follow request",icon:"error"})}};return s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("button",{onClick:()=>e("/feed"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Back to feed",children:s.jsx(ua,{className:"w-5 h-5"})}),s.jsx("h1",{className:"text-xl font-semibold",children:"Notifications"}),s.jsx("div",{className:"flex-1"}),s.jsx("button",{onClick:async()=>{n!=null&&n.handle&&(await jE(n.handle),await f())},className:"px-3 py-1 text-xs rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700",children:"Add mock DMs"})]}),s.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-800",children:[s.jsxs("button",{onClick:()=>u("notifications"),className:`px-4 py-2 font-medium transition-colors relative ${d==="notifications"?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-300"}`,children:["Notifications",h>0&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-pink-500 text-white text-xs rounded-full",children:h>9?"9+":h})]}),s.jsxs("button",{onClick:()=>u("conversations"),className:`px-4 py-2 font-medium transition-colors relative ${d==="conversations"?"text-purple-600 border-b-2 border-purple-600":"text-gray-500 hover:text-gray-300"}`,children:["Messages",g>0&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-pink-500 text-white text-xs rounded-full",children:g>9?"9+":g})]})]}),l?s.jsx("div",{className:"text-gray-500",children:"Loading"}):d==="notifications"?i.length===0?s.jsx("div",{className:"text-gray-500 text-center py-8",children:"No notifications yet."}):s.jsxs("div",{className:"space-y-2",children:[h>0&&s.jsx("div",{className:"flex justify-end mb-2",children:s.jsx("button",{onClick:async()=>{n!=null&&n.handle&&(await e3(n.handle),await f())},className:"text-xs text-purple-500 hover:text-purple-400",children:"Mark all as read"})}),i.map(b=>s.jsxs("div",{className:`w-full text-left flex items-center gap-3 py-3 px-2 rounded-lg transition-colors ${b.read?"hover:bg-gray-100 dark:hover:bg-gray-800":"bg-purple-900/20 hover:bg-purple-900/30 border-l-4 border-purple-500"}`,children:[s.jsxs("button",{onClick:()=>y(b),className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"flex-shrink-0",children:S(b.type)}),s.jsx(It,{name:b.fromHandle,src:zn(b.fromHandle),size:"sm"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:b.fromHandle}),s.jsx("div",{className:"text-xs text-gray-500 truncate",children:p(b)})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsx("div",{className:"text-[10px] text-gray-400",children:new Date(b.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),!b.read&&s.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"})]})]}),b.type==="follow_request"&&s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:w=>x(b,w),className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg font-medium transition-colors",children:"Accept"}),s.jsx("button",{onClick:w=>v(b,w),className:"px-3 py-1.5 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded-lg font-medium transition-colors",children:"Deny"})]})]},b.id))]}):r.length===0?s.jsx("div",{className:"text-gray-500",children:"No conversations yet."}):s.jsx("div",{className:"divide-y divide-gray-800/40",children:r.map(b=>s.jsxs("button",{onClick:()=>{const w=t.state;e(`/messages/${encodeURIComponent(b.otherHandle)}`,{state:w!=null&&w.sharePostUrl?{sharePostUrl:w.sharePostUrl,sharePostId:w.sharePostId}:void 0})},className:"w-full text-left flex items-center gap-3 py-3 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg px-2",children:[s.jsx(It,{name:b.otherHandle,src:zn(b.otherHandle),size:"sm"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:b.otherHandle}),b.lastMessage&&s.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[b.lastMessage.senderHandle===n.handle?"You: ":"",b.lastMessage.text||(b.lastMessage.imageUrl?"Photo":"Message")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[b.lastMessage&&s.jsx("div",{className:"text-[10px] text-gray-400",children:new Date(b.lastMessage.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),b.unread>0&&s.jsx("span",{className:"min-w-[18px] h-[18px] px-1 bg-pink-500 text-white text-[10px] leading-[18px] rounded-full text-center",children:b.unread>9?"9+":b.unread})]})]},b.otherHandle))})]})}const lm=[{id:"template-9",name:"Gazetteer Video",category:"Gazetteer",thumbnailUrl:"/placeholders/gazetteer-template.svg",audioUrl:void 0,audioDuration:15e3,clips:[{id:"clip-1",duration:15e3,startTime:0,mediaType:"video",transition:"cut"}],usageCount:4e4,createdAt:Date.now()+864e5,isTrending:!0},{id:"template-7",name:"Instagram Video",category:"Instagram",thumbnailUrl:"/placeholders/instagram-template.svg",audioUrl:void 0,audioDuration:15e3,clips:[{id:"clip-1",duration:15e3,startTime:0,mediaType:"video",transition:"cut"}],usageCount:5e4,createdAt:Date.now()+864e5,isTrending:!0},{id:"template-8",name:"TikTok Video",category:"TikTok",thumbnailUrl:"/placeholders/tiktok-template.svg",audioUrl:void 0,audioDuration:15e3,clips:[{id:"clip-1",duration:15e3,startTime:0,mediaType:"video",transition:"cut"}],usageCount:45e3,createdAt:Date.now()+864e5,isTrending:!0},{id:"template-10",name:"YouTube Shorts Video",category:"YouTube Shorts",thumbnailUrl:"/placeholders/youtube-shorts-template.svg",audioUrl:void 0,audioDuration:15e3,clips:[{id:"clip-1",duration:15e3,startTime:0,mediaType:"video",transition:"cut"}],usageCount:43e3,createdAt:Date.now()+864e5,isTrending:!0}],oq=["Gazetteer","Instagram","TikTok","YouTube Shorts"];function Zv(e){return new Promise(t=>setTimeout(t,e))}async function t3(e){await Zv(200);let t=[...lm];return e&&e!=="Gazetteer"&&(t=lm.filter(n=>n.category===e)),t.sort((n,r)=>{const a=n.id==="template-7"||n.id==="template-8"||n.id==="template-9",i=r.id==="template-7"||r.id==="template-8"||r.id==="template-9";if(a&&!i)return-1;if(!a&&i)return 1;if(a&&i){const o=["template-9","template-7","template-8"];return o.indexOf(n.id)-o.indexOf(r.id)}return n.isTrending&&!r.isTrending?-1:!n.isTrending&&r.isTrending?1:r.usageCount-n.usageCount})}async function Hc(e){return await Zv(100),lm.find(n=>n.id===e)||null}async function lq(e){await Zv(50);const t=lm.find(n=>n.id===e);t&&(t.usageCount+=1)}function cq(){const e=Xt(),t=m.useRef(null),n=m.useRef(null),r=m.useRef(null),a=m.useRef([]),i=m.useRef(null),o=m.useRef(!0),l=m.useRef(null),[c,d]=m.useState(!1),[u,f]=m.useState(null),[h,g]=m.useState(0),[y,p]=m.useState(0),[S,x]=m.useState(0),[v,b]=m.useState(0),[w,N]=m.useState(!1),[R,C]=m.useState(!0),_=m.useRef(null),[W,T]=m.useState("user"),[E,B]=m.useState(!0),[H,q]=m.useState(!0),[ie,X]=m.useState(!1),V=m.useRef(null),z=m.useRef(null),[J,U]=m.useState(!1),ue=m.useRef(null),[fe,Ae]=m.useState(null),[_e,Re]=m.useState(!1),[Se,de]=m.useState(null),[F,$]=m.useState(!1),Z=m.useRef(null),Pe=m.useRef(null),ve=m.useRef(null),re=m.useRef(null),M=m.useRef(null),G=m.useRef(null),P=m.useRef(!1),Y=m.useRef(null),[j,O]=m.useState(2),[se,K]=m.useState(3),[me,pe]=m.useState(!1),[Ve,De]=m.useState(!1),[Ce,Ft]=m.useState(!1),[Tt,Jt]=m.useState("For you"),[Nt,st]=m.useState(null),[Ye,Bt]=m.useState([]),[we,tt]=m.useState(!1),[Je,Ze]=m.useState(""),[ot,L]=m.useState(""),[he,je]=m.useState(""),[at,ut]=m.useState(!1),[gt,Ct]=m.useState(null),[ne,ge]=m.useState(!1),[Ne,Oe]=m.useState(!1),[Le,Me]=m.useState("None"),[ke,Ue]=m.useState(!1),[He,Mt]=m.useState(1),[Pt,fn]=m.useState(1),[ye,Ge]=m.useState(1),[nt,nn]=m.useState(0),[Ot,Hn]=m.useState(1),[Cs,Wt]=m.useState(!1),[ma,Gi]=m.useState([]);m.useState([]),m.useState(null),m.useState(!1),m.useRef(null),m.useRef([]);const Mn=m.useRef(["https://images.unsplash.com/photo-1519681393784-d120267933ba?w=1200","https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=1200","https://images.unsplash.com/photo-1503264116251-35a269479413?w=1200","https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=1200"]),Vs=m.useRef(0),ur=90;async function Uo(te,le,ze=!0){try{if(i.current&&(i.current.getTracks().forEach(vt=>vt.stop()),i.current=null),!ze&&!le){t.current&&(t.current.srcObject=null);return}const xt=await navigator.mediaDevices.getUserMedia({video:ze?{facingMode:te}:!1,audio:le});if(i.current=xt,t.current){t.current.srcObject=xt;try{await t.current.play()}catch{}}}catch(xt){console.error("Stream init error:",xt)}}function Xr(){const te=!H;if(q(te),i.current){const le=i.current.getVideoTracks()[0];le&&(le.enabled=te)}else te&&Uo(W,E,!0)}async function Wa(){const te=!ie;if(X(te),te)try{const le=W==="user"?"environment":"user",ze=await navigator.mediaDevices.getUserMedia({video:{facingMode:le},audio:!1});if(z.current=ze,V.current){V.current.srcObject=ze;try{await V.current.play()}catch{}}}catch(le){console.error("Dual camera init error:",le),X(!1)}else z.current&&(z.current.getTracks().forEach(le=>le.stop()),z.current=null),V.current&&(V.current.srcObject=null)}m.useEffect(()=>{if(!Se){Y.current=null;return}if(console.log("GS: Loading background from",Se.substring(0,50)),Se.includes("video")||/\.(mp4|webm|ogg)/i.test(Se)){const le=document.createElement("video");le.src=Se,le.loop=!0,le.muted=!0,le.playsInline=!0,le.onloadeddata=()=>{console.log("GS: Video background loaded");try{le.play()}catch{}Y.current=le},le.onerror=()=>console.error("GS: Video background failed to load")}else{const le=new Image;le.crossOrigin="anonymous",le.onload=()=>{console.log("GS: Image background loaded",le.width,"x",le.height),Y.current=le},le.onerror=()=>console.error("GS: Image background failed to load"),le.src=Se}},[Se]),m.useEffect(()=>{if(!_e){M.current&&(clearInterval(M.current),M.current=null),G.current&&(cancelAnimationFrame(G.current),G.current=null);return}let te=!1,le=null;async function ze(){var xt;try{window.SelfieSegmentation||await new Promise((lt,et)=>{const Et=document.createElement("script");Et.src="https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/selfie_segmentation.js",Et.onload=()=>lt(),Et.onerror=()=>et(new Error("Failed to load mediapipe")),document.body.appendChild(Et)});const vt=((xt=window.SelfieSegmentation)==null?void 0:xt.SelfieSegmentation)||window.SelfieSegmentation;if(!vt)throw new Error("SelfieSegmentation global not found");le=new vt({locateFile:lt=>`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${lt}`}),le.setOptions({modelSelection:1}),re.current=le,P.current=!0;const Qe=ve.current,St=t.current;if(!Qe||!St)return;const Ke=Qe.getContext("2d");if(!Ke)return;le.onResults(lt=>{if(te||!Qe||!Ke){console.log("GS: Skipping - cancelled:",te,"canvas:",!!Qe,"ctx:",!!Ke);return}if(!lt||!lt.segmentationMask||!lt.image){console.log("GS: Missing results",{hasMask:!!(lt!=null&&lt.segmentationMask),hasImage:!!(lt!=null&&lt.image)});return}const et=Qe.clientWidth||St.videoWidth||640,Et=Qe.clientHeight||St.videoHeight||480;(Qe.width!==et||Qe.height!==Et)&&(Qe.width=et,Qe.height=Et,console.log("GS: Canvas resized to",et,Et)),Ke.clearRect(0,0,Qe.width,Qe.height);const At=Y.current;let ct=!1;if(At)try{Ke.save(),Ke.filter=j>0?`blur(${j}px)`:"none",At instanceof HTMLImageElement?At.complete&&At.naturalWidth>0?(Ke.drawImage(At,0,0,Qe.width,Qe.height),ct=!0):console.log("GS: Image not ready yet",{complete:At.complete,naturalWidth:At.naturalWidth}):At instanceof HTMLVideoElement&&(At.readyState>=2&&At.videoWidth>0?(Ke.drawImage(At,0,0,Qe.width,Qe.height),ct=!0):console.log("GS: Video not ready yet",{readyState:At.readyState,videoWidth:At.videoWidth})),Ke.restore()}catch(jr){console.warn("GS: Background draw error:",jr)}ct||(Ke.fillStyle="black",Ke.fillRect(0,0,Qe.width,Qe.height));const cn=lt.segmentationMask,Sr=lt.image;if(cn&&Sr){const jr=document.createElement("canvas");jr.width=Qe.width,jr.height=Qe.height;const hn=jr.getContext("2d");hn&&(hn.drawImage(Sr,0,0,Qe.width,Qe.height),hn.globalCompositeOperation="destination-in",se>0?(hn.filter=`blur(${se}px)`,hn.drawImage(cn,0,0,Qe.width,Qe.height),hn.filter="none"):hn.drawImage(cn,0,0,Qe.width,Qe.height),Ke.drawImage(jr,0,0))}}),console.log("GS: Starting segmentation loop");const ft=async()=>{if(!(!P.current||te)){if(t.current&&t.current.readyState>=2)try{await le.send({image:t.current})}catch(lt){console.error("GS: Segmentation send error:",lt),P.current=!1;return}G.current=requestAnimationFrame(ft)}};G.current=requestAnimationFrame(ft)}catch(vt){console.error("Failed to initialize green screen segmentation:",vt),Re(!1)}}return ze(),()=>{var xt,vt;te=!0,M.current&&(clearInterval(M.current),M.current=null),G.current&&(cancelAnimationFrame(G.current),G.current=null);try{(vt=(xt=re.current)==null?void 0:xt.close)==null||vt.call(xt)}catch{}re.current=null,P.current=!1}},[_e,Se]),m.useEffect(()=>{if(!F)return;const te=le=>{le.target.closest(".green-screen-menu-container")||$(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[F]),m.useEffect(()=>(o.current=!0,H&&!u?Uo(W,E,H):u&&(i.current&&(i.current.getTracks().forEach(te=>te.stop()),i.current=null),t.current&&(t.current.srcObject=null)),()=>{if(o.current=!1,t.current&&(t.current.pause(),t.current.srcObject=null),r.current&&r.current.state!=="inactive")try{r.current.stop()}catch{}i.current&&(i.current.getTracks().forEach(te=>{try{te.stop()}catch{}}),i.current=null),u&&URL.revokeObjectURL(u),z.current&&(z.current.getTracks().forEach(te=>te.stop()),z.current=null)}),[W,E,H,u]);function Va(){var vt,Qe;const te=(vt=t.current)==null?void 0:vt.srcObject;if(!te)return;a.current=[];let le={};MediaRecorder.isTypeSupported("video/webm;codecs=vp9,opus")?le={mimeType:"video/webm;codecs=vp9,opus"}:MediaRecorder.isTypeSupported("video/webm;codecs=vp8,opus")?le={mimeType:"video/webm;codecs=vp8,opus"}:MediaRecorder.isTypeSupported("video/webm")?le={mimeType:"video/webm"}:MediaRecorder.isTypeSupported("video/mp4")&&(le={mimeType:"video/mp4"});let ze=te;if(_e&&ve.current){const St=ve.current.captureStream(30),Ke=(((Qe=i.current)==null?void 0:Qe.getAudioTracks())||[])[0];Ke&&St.addTrack(Ke),ze=St}const xt=new MediaRecorder(ze,le);r.current=xt,xt.ondataavailable=St=>{St.data&&St.data.size>0&&a.current.push(St.data)},xt.onstop=async()=>{if(a.current.length>0){const St=le.mimeType||"video/webm",Ke=new Blob(a.current,{type:St});l.current=Ke,console.log(" Recording stopped, blob created. Blob size:",Ke.size,"Type:",St);const ft=URL.createObjectURL(Ke);let lt=ft;try{console.log(" Uploading video to backend...",{size:Ke.size,type:St});const ct=new File([Ke],`video-${Date.now()}.webm`,{type:St}),{uploadFile:cn}=await En(()=>Promise.resolve().then(()=>ao),void 0),Sr=await cn(ct);if(Sr&&Sr.success&&Sr.fileUrl)lt=Sr.fileUrl,console.log(" Video uploaded to backend:",lt),URL.revokeObjectURL(ft),l.current=null;else throw new Error("Upload failed - invalid response: "+JSON.stringify(Sr))}catch(ct){console.error(" Failed to upload video to backend:",ct),console.error("Error details:",{errorMessage:ct instanceof Error?ct.message:String(ct),blobSize:Ke.size,blobType:St}),console.warn(" Using blob URL for preview - blob reference kept alive, will upload in InstantFiltersPage:",ft.substring(0,50))}const et=document.createElement("video");et.preload="metadata",et.muted=!0,et.playsInline=!0,et.crossOrigin="anonymous";let Et=!1;const At=ct=>{if(Et)return;Et=!0;const cn={id:`clip-${Date.now()}`,url:lt,duration:ct||0,trimStart:0,trimEnd:ct||0,speed:1,reverse:!1,blob:l.current||void 0},Sr=lt.startsWith("http://")||lt.startsWith("https://")?"backend":lt.startsWith("data:")?"data":"blob";console.log(" Clip created with URL type:",Sr,"duration:",ct),Gi(jr=>{const hn=[...jr,cn];return f(lt),g(ct||0),x(0),b(ct||0),setTimeout(()=>{const mn=hn.length>0?hn:[cn];mn.length>0&&(i.current&&(i.current.getTracks().forEach(Ki=>Ki.stop()),i.current=null),t.current&&(t.current.pause(),t.current.srcObject=null),e("/create/filters",{state:{videoUrl:mn[0].url,videoDuration:mn[0].duration,trimStart:mn[0].trimStart,trimEnd:mn[0].trimEnd,speed:mn[0].speed,reverse:mn[0].reverse,selectedFilter:Le,brightness:He,contrast:Pt,saturation:ye,hue:nt,clips:mn,mediaType:"video",musicTrackId:Nt}}))},500),hn})};et.onloadedmetadata=async()=>{let ct=et.duration,cn=0;const Sr=20;for(;(!isFinite(ct)||ct<=0||isNaN(ct))&&cn<Sr&&!Et;)await new Promise(jr=>setTimeout(jr,100)),ct=et.duration,cn++;if(isFinite(ct)&&ct>0&&!Et)console.log(" Video metadata loaded, duration:",ct),At(ct);else if(!Et)try{const jr=et.currentTime;if(et.currentTime=1e10,await new Promise(hn=>setTimeout(hn,300)),ct=et.duration,et.currentTime=jr,isFinite(ct)&&ct>0)console.log(" Got duration from seeking:",ct),At(ct);else{const hn=Math.max(1,Math.min(90,Math.round(Ke.size/15e4)));console.warn(" Could not get video duration, using estimate:",hn),At(hn)}}catch{const hn=Math.max(1,Math.min(90,Math.round(Ke.size/15e4)));console.warn(" Error seeking for duration, using estimate:",hn),At(hn)}},et.ondurationchange=()=>{const ct=et.duration;isFinite(ct)&&ct>0&&!Et&&(console.log(" Video duration changed, duration:",ct),At(ct))},et.onseeked=()=>{const ct=et.duration;isFinite(ct)&&ct>0&&!Et&&(console.log(" Video seeked, duration:",ct),At(ct))},et.onerror=ct=>{if(console.error(" Error loading video for duration:",ct),console.error("Video error details:",{error:et.error,networkState:et.networkState,readyState:et.readyState,urlType:lt.startsWith("data:")?"data":"blob",urlPreview:lt.substring(0,50)}),!Et){const cn=Math.max(1,Math.round(Ke.size/1e5));console.warn(" Using estimated duration due to error:",cn),At(cn)}},et.src=lt,et.load(),setTimeout(()=>{if(!Et){const ct=Math.max(1,Math.round(Ke.size/1e5));console.warn(" Duration detection timeout, using estimate:",ct),At(ct)}},5e3)}else console.error("No video chunks recorded")},xt.start(100),d(!0)}function Qv(){r.current&&r.current.state!=="inactive"&&(r.current.stop(),d(!1))}function ht(te){if(!isFinite(te))return"0:00";const le=Math.floor(te/60),ze=Math.floor(te%60);return`${le}:${ze.toString().padStart(2,"0")}`}function pa(){n.current&&(n.current.paused?n.current.play():n.current.pause())}m.useEffect(()=>{var te;if(u&&n.current){const le=n.current;(te=t.current)!=null&&te.srcObject&&(t.current.srcObject.getTracks().forEach(ft=>ft.stop()),t.current.srcObject=null);const ze=async()=>{let Ke=le.duration,ft=0;const lt=10;for(;(!isFinite(Ke)||Ke<=0||isNaN(Ke))&&ft<lt;)await new Promise(et=>setTimeout(et,100)),Ke=le.duration,ft++;if(!isFinite(Ke)||Ke<=0||isNaN(Ke)){let et=0;if(le.readyState>=2)try{const Et=le.currentTime;le.currentTime=1e10,await new Promise(At=>setTimeout(At,200)),et=le.duration,le.currentTime=Et}catch{}et>0&&isFinite(et)&&(Ke=et)}if(!isFinite(Ke)||Ke<=0||isNaN(Ke))Ke=5,g(Ke),x(0),b(Ke);else if(g(Ke),x(0),b(Ke),Ke>ur){$e.fire({icon:"warning",title:"Video too long",text:`Videos created here must be ${ur} seconds or less. Please record or select a shorter clip.`,confirmButtonText:"OK"}),f(null),p(0),N(!1);return}try{await le.play(),N(!0)}catch(et){console.error("Error playing preview video:",et)}},xt=()=>{p(le.currentTime)},vt=()=>{N(!0),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{C(!1)},3e3)},Qe=()=>{N(!1),_.current&&clearTimeout(_.current),C(!0)},St=async()=>{try{await le.play(),N(!0)}catch(Ke){console.error("Error playing preview video:",Ke)}};return le.addEventListener("loadedmetadata",ze),le.addEventListener("loadeddata",St),le.addEventListener("timeupdate",xt),le.addEventListener("play",vt),le.addEventListener("pause",Qe),le.addEventListener("error",Ke=>{console.error("Video error:",Ke)}),()=>{le.removeEventListener("loadedmetadata",ze),le.removeEventListener("loadeddata",St),le.removeEventListener("timeupdate",xt),le.removeEventListener("play",vt),le.removeEventListener("pause",Qe),_.current&&clearTimeout(_.current)}}},[u,w]);const ga=te=>{let le="",ze=!1;switch(te){case"None":le="";break;case"Beauty":le="brightness(1.1) contrast(0.95) saturate(1.2)";break;case"B&W":le="grayscale(100%)";break;case"Sepia":le="sepia(100%)";break;case"Vivid":le="brightness(1.1) contrast(1.2) saturate(1.5)";break;case"Cool":le="brightness(1.05) contrast(1.1) saturate(0.8) hue-rotate(10deg)";break;case"Vignette":le="brightness(0.9) contrast(1.1)",ze=!0;break;default:le=""}const xt=nt!==0?`hue-rotate(${nt*180}deg)`:"",vt=`brightness(${He}) contrast(${Pt}) saturate(${ye})${xt?` ${xt}`:""}`,Qe={};return le&&(He!==1||Pt!==1||ye!==1||nt!==0)?Qe.filter=`${le} ${vt}`:le?Qe.filter=le:(He!==1||Pt!==1||ye!==1||nt!==0)&&(Qe.filter=vt),ze&&(Qe.boxShadow="inset 0 0 200px rgba(0, 0, 0, 0.5)"),Qe},Ec=({className:te})=>s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:te,children:[s.jsx("path",{d:"M12 4 L12 8 M10 6 L14 6",strokeLinecap:"round"}),s.jsx("circle",{cx:"12",cy:"6",r:"1.5",fill:"currentColor"}),s.jsx("path",{d:"M6 16 L6 20 M4 18 L8 18",strokeLinecap:"round"}),s.jsx("circle",{cx:"6",cy:"18",r:"1.5",fill:"currentColor"}),s.jsx("path",{d:"M18 16 L18 20 M16 18 L20 18",strokeLinecap:"round"}),s.jsx("circle",{cx:"18",cy:"18",r:"1.5",fill:"currentColor"})]}),xa=({className:te,selected:le})=>s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:te,children:[s.jsx("rect",{x:"4",y:"4",width:"7",height:"16",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"13",y:"4",width:"7",height:"16",fill:le?"currentColor":"none",stroke:"currentColor"})]}),Ts=({className:te,selected:le})=>s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:te,children:[s.jsx("rect",{x:"4",y:"4",width:"16",height:"7",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"4",y:"13",width:"16",height:"7",fill:le?"currentColor":"none",stroke:"currentColor"})]}),$u=({className:te,selected:le})=>s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:te,children:[s.jsx("rect",{x:"4",y:"4",width:"7",height:"7",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"13",y:"4",width:"7",height:"7",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"4",y:"13",width:"7",height:"7",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"13",y:"13",width:"7",height:"7",fill:le?"currentColor":"none",stroke:"currentColor"})]}),zo=({className:te,selected:le})=>s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:te,children:[s.jsx("rect",{x:"4",y:"4",width:"4.5",height:"4.5",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"9.75",y:"4",width:"4.5",height:"4.5",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"15.5",y:"4",width:"4.5",height:"4.5",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"4",y:"9.75",width:"4.5",height:"4.5",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"9.75",y:"9.75",width:"4.5",height:"4.5",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"15.5",y:"9.75",width:"4.5",height:"4.5",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"4",y:"15.5",width:"4.5",height:"4.5",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"9.75",y:"15.5",width:"4.5",height:"4.5",fill:le?"currentColor":"none",stroke:"currentColor"}),s.jsx("rect",{x:"15.5",y:"15.5",width:"4.5",height:"4.5",fill:le?"currentColor":"none",stroke:"currentColor"})]});return s.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/80 to-transparent p-4 flex items-center justify-between",children:[s.jsx("button",{onClick:()=>e("/feed"),className:"p-2 bg-black/50 backdrop-blur-sm text-white rounded-full hover:bg-black/70 transition-colors",children:s.jsx(ui,{className:"w-6 h-6"})}),s.jsx("div",{className:"w-10"})]}),!u&&s.jsxs("div",{className:"absolute top-16 left-0 right-0 z-40 flex items-center justify-between px-6 py-2",children:[s.jsx("button",{title:"Flip camera",className:"p-2 rounded-lg bg-black/60 text-white hover:bg-black/80 active:scale-95 transition-all duration-200",onClick:()=>{const te=W==="user"?"environment":"user";T(te),Uo(te,E,H),ie&&z.current&&(z.current.getTracks().forEach(le=>le.stop()),Wa(),setTimeout(()=>Wa(),100))},children:s.jsx(Ab,{className:"w-4 h-4"})}),s.jsx("button",{title:ie?"Disable dual camera":"Enable dual camera",className:`p-2 rounded-lg ${ie?"bg-purple-600/80":"bg-black/60"} text-white hover:bg-black/80 active:scale-95 transition-all duration-200`,onClick:Wa,children:s.jsx(Vd,{className:"w-4 h-4"})}),s.jsx("button",{title:H?"Turn camera off":"Turn camera on",className:`p-2 rounded-lg ${H?"bg-black/60":"bg-red-600/80"} text-white hover:bg-black/80 active:scale-95 transition-all duration-200`,onClick:Xr,children:H?s.jsx(Fb,{className:"w-4 h-4"}):s.jsx(NU,{className:"w-4 h-4"})}),s.jsx("button",{title:E?"Mute mic":"Unmute mic",className:`p-2 rounded-lg ${E?"bg-black/60":"bg-red-600/80"} text-white hover:bg-black/80 active:scale-95 transition-all duration-200`,onClick:()=>{const te=!E;if(B(te),i.current){const le=i.current.getAudioTracks()[0];le&&(le.enabled=te)}else te&&Uo(W,!0,H)},children:E?s.jsx(hU,{className:"w-4 h-4"}):s.jsx(fU,{className:"w-4 h-4"})}),s.jsx("button",{title:me?"Hide guides":"Show guides",className:`p-2 rounded-lg ${me?"bg-white/70 text-black":"bg-black/60 text-white"} hover:bg-black/80 active:scale-95 transition-all duration-200`,onClick:()=>pe(!me),children:s.jsx("span",{className:"text-xs font-semibold",children:"G"})}),s.jsxs("div",{className:"relative green-screen-menu-container",children:[s.jsx("button",{title:_e?"Green screen options":"Enable green screen",className:`p-2 rounded-lg ${_e?"bg-green-600 shadow-lg shadow-green-500/50":"bg-black/60"} text-white hover:bg-green-600/80 active:scale-95 transition-all duration-200`,onClick:()=>$(!F),children:s.jsx("span",{className:"text-xs font-semibold",children:"GS"})}),s.jsx("input",{ref:Z,type:"file",accept:"image/*,video/*",className:"hidden",onChange:te=>{var xt;const le=(xt=te.target.files)==null?void 0:xt[0];if(!le)return;const ze=URL.createObjectURL(le);console.log("GS: File selected",{type:le.type,size:le.size,name:le.name}),de(ze),Re(!0),$(!1)}}),F&&s.jsx("div",{className:"absolute top-12 right-0 z-50 bg-black/90 backdrop-blur-sm rounded-xl border border-white/20 shadow-2xl p-2 min-w-[200px] green-screen-menu-container",children:_e?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>{var te;(te=Z.current)==null||te.click(),$(!1)},className:"w-full p-3 rounded-lg bg-gray-800/80 hover:bg-gray-700 text-white flex items-center gap-3 transition-all duration-200 text-left",children:[s.jsx(Os,{className:"w-5 h-5 text-green-400"}),s.jsx("span",{className:"text-sm font-medium",children:"Change Image"})]}),s.jsxs("button",{onClick:()=>{const te=Mn.current;Vs.current=(Vs.current+1)%te.length,de(te[Vs.current]),$(!1)},className:"w-full p-3 rounded-lg bg-gray-800/80 hover:bg-gray-700 text-white flex items-center gap-3 transition-all duration-200 text-left mt-2",children:[s.jsx(Sf,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"text-sm font-medium",children:"Next Preset"})]}),s.jsxs("button",{onClick:()=>{Re(!1),de(null),$(!1)},className:"w-full p-3 rounded-lg bg-red-600/80 hover:bg-red-600 text-white flex items-center gap-3 transition-all duration-200 text-left mt-2",children:[s.jsx(pt,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Disable"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>{var te;(te=Z.current)==null||te.click(),$(!1)},className:"w-full p-3 rounded-lg bg-gray-800/80 hover:bg-gray-700 text-white flex items-center gap-3 transition-all duration-200 text-left",children:[s.jsx(Os,{className:"w-5 h-5 text-green-400"}),s.jsx("span",{className:"text-sm font-medium",children:"Choose Image"})]}),s.jsxs("button",{onClick:()=>{const te=Mn.current;de(te[Vs.current]),Re(!0),$(!1)},className:"w-full p-3 rounded-lg bg-gray-800/80 hover:bg-gray-700 text-white flex items-center gap-3 transition-all duration-200 text-left mt-2",children:[s.jsx(Sf,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"text-sm font-medium",children:"Use Preset"})]})]})})]})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center bg-black relative",children:u?s.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",onMouseEnter:()=>{C(!0),_.current&&clearTimeout(_.current)},onMouseLeave:()=>{w&&(_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{C(!1)},3e3))},onClick:()=>{C(!0),_.current&&clearTimeout(_.current),pa()},onTouchStart:()=>{C(!0),_.current&&clearTimeout(_.current)},children:[s.jsx("video",{ref:n,src:u,autoPlay:!0,playsInline:!0,muted:!1,className:"w-full h-full object-contain",loop:!0,style:ga(Le)},u),R&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 transition-opacity",children:s.jsx("button",{onClick:te=>{te.stopPropagation(),pa()},className:"w-20 h-20 rounded-full bg-black/60 backdrop-blur-sm flex items-center justify-center hover:bg-black/80 transition-all hover:scale-110 shadow-2xl","aria-label":w?"Pause":"Play",children:w?s.jsx(zh,{className:"w-10 h-10 text-white ml-1"}):s.jsx(Yd,{className:"w-10 h-10 text-white ml-1"})})}),s.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/70 to-transparent p-4 transition-opacity ${R?"opacity-100":"opacity-0"}`,onClick:te=>te.stopPropagation(),children:[s.jsx("div",{className:"mb-3",children:s.jsx("div",{className:"w-full h-1 bg-white/20 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 transition-all duration-100",style:{width:`${h>0?y/h*100:0}%`}})})}),s.jsx("div",{className:"relative mb-3",children:s.jsxs("div",{className:"h-1.5 bg-white/20 rounded-full overflow-hidden cursor-pointer",onClick:te=>{if(!n.current)return;const le=te.currentTarget.getBoundingClientRect(),vt=(te.clientX-le.left)/le.width*h;n.current.currentTime=Math.max(0,Math.min(vt,h))},children:[s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-100",style:{width:`${h>0?y/h*100:0}%`}}),h>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-yellow-400 shadow-lg",style:{left:`${S/h*100}%`}}),s.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-yellow-400 shadow-lg",style:{left:`${(v||h)/h*100}%`}})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:te=>{te.stopPropagation(),pa()},className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center hover:bg-white/30 transition-colors active:scale-95","aria-label":w?"Pause":"Play",children:w?s.jsx(zh,{className:"w-5 h-5 text-white"}):s.jsx(Yd,{className:"w-5 h-5 text-white ml-0.5"})}),s.jsxs("span",{className:"text-white text-sm font-medium tabular-nums",children:[ht(y)," / ",ht(h)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{n.current&&(n.current.currentTime=Math.max(0,n.current.currentTime-1))},className:"px-2 py-1 rounded bg-white/10 text-white text-xs hover:bg-white/20 transition-colors",title:"Rewind 1s",children:"-1s"}),s.jsx("button",{onClick:()=>{n.current&&(n.current.currentTime=Math.min(h,n.current.currentTime+1))},className:"px-2 py-1 rounded bg-white/10 text-white text-xs hover:bg-white/20 transition-colors",title:"Forward 1s",children:"+1s"})]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("video",{ref:t,playsInline:!0,muted:!0,className:`w-full h-full ${_e?"hidden":"block"} object-cover`,style:ga(Le)}),s.jsx("canvas",{ref:ve,className:`${_e?"block":"hidden"} absolute inset-0 w-full h-full object-cover`,style:{zIndex:_e?10:0,...ga(Le)}}),ie&&!_e&&s.jsx("video",{ref:V,playsInline:!0,muted:!0,className:"absolute bottom-20 right-4 w-32 h-48 rounded-xl border-2 border-white/30 shadow-2xl object-cover z-20"})]})}),!u&&s.jsxs("div",{className:"absolute bottom-24 left-0 right-0 z-50 flex flex-col items-center justify-center gap-4",children:[!c&&fe===null?s.jsx("button",{onClick:()=>{Ae(3),setTimeout(()=>Ae(2),1e3),setTimeout(()=>Ae(1),2e3),setTimeout(()=>{Ae(null),Va()},3e3)},className:"w-20 h-20 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 border-4 border-white shadow-2xl flex items-center justify-center hover:scale-105 transition-all duration-300 active:scale-95","aria-label":"Record video",children:s.jsx(gE,{className:"w-10 h-10 text-white",fill:"white"})}):s.jsx("button",{onClick:Qv,className:`w-20 h-20 rounded-full border-4 border-white shadow-2xl flex items-center justify-center hover:scale-105 transition-all duration-500 active:scale-95 ${fe!==null?"bg-gradient-to-br from-green-500 via-yellow-500 to-red-500 animate-pulse":"bg-gradient-to-br from-red-500 to-red-700"}`,"aria-label":c?"Stop recording":"Recording starting...",children:c?s.jsx("div",{className:"w-8 h-8 rounded bg-white"}):fe!==null?s.jsx("div",{className:"text-white text-2xl font-bold",children:fe}):s.jsx("div",{className:"w-8 h-8 rounded bg-white"})}),s.jsx("button",{onClick:()=>{e("/create/text-only")},className:"w-10 h-10 rounded-lg bg-black/60 backdrop-blur-sm flex items-center justify-center border border-white/20 hover:bg-black/80 active:scale-95 transition-all cursor-pointer","aria-label":"Create text post",children:s.jsx(gc,{className:"w-6 h-6 text-white"})})]}),!u&&s.jsxs("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 z-50 flex flex-col gap-3",children:[s.jsx("button",{onClick:async()=>{try{const te=await Hc(Qt.TIKTOK);te?e("/template-editor",{state:{template:te}}):$e.fire({icon:"error",title:"Error",text:"Could not load TikTok template",timer:2e3,showConfirmButton:!1})}catch(te){console.error("Error loading TikTok template:",te),$e.fire({icon:"error",title:"Error",text:"Failed to load TikTok template",timer:2e3,showConfirmButton:!1})}},className:"w-10 h-10 rounded-lg bg-black/60 backdrop-blur-sm flex items-center justify-center border border-white/20 hover:bg-black/80 active:scale-95 transition-all cursor-pointer","aria-label":"Open TikTok template",children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-white",children:s.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.65 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})})}),s.jsx("button",{onClick:async()=>{try{const te=await Hc(Qt.INSTAGRAM);te?e("/template-editor",{state:{template:te}}):$e.fire({icon:"error",title:"Error",text:"Could not load Instagram template",timer:2e3,showConfirmButton:!1})}catch(te){console.error("Error loading Instagram template:",te),$e.fire({icon:"error",title:"Error",text:"Failed to load Instagram template",timer:2e3,showConfirmButton:!1})}},className:"w-10 h-10 rounded-lg bg-black/60 backdrop-blur-sm flex items-center justify-center border border-white/20 hover:bg-black/80 active:scale-95 transition-all cursor-pointer","aria-label":"Open Instagram template",children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-white",children:s.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),s.jsx("button",{onClick:async()=>{try{const te=await Hc(Qt.YOUTUBE_SHORTS);te?e("/template-editor",{state:{template:te}}):$e.fire({icon:"error",title:"Error",text:"Could not load YouTube Shorts template",timer:2e3,showConfirmButton:!1})}catch(te){console.error("Error loading YouTube Shorts template:",te),$e.fire({icon:"error",title:"Error",text:"Failed to load YouTube Shorts template",timer:2e3,showConfirmButton:!1})}},className:"w-10 h-10 rounded-lg bg-black/60 backdrop-blur-sm flex items-center justify-center border border-white/20 hover:bg-black/80 active:scale-95 transition-all cursor-pointer","aria-label":"Open YouTube Shorts template",children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-white",children:s.jsx("path",{d:"M17.77 10.32c-.77-.32-1.2-.5-1.2-.5L18 9.06c1.84-.96 2.53-3.23 1.56-5.06s-3.24-2.53-5.07-1.56L6 6.94c-1.29.68-2.07 2.04-2 3.49.07 1.42.93 2.67 2.22 3.25.03.01 1.2.5 1.2.5L6 14.94c-1.84.96-2.53 3.23-1.56 5.06.97 1.83 3.24 2.53 5.07 1.56l8.5-4.5c1.29-.68 2.06-2.04 1.99-3.49-.06-1.42-.92-2.67-2.21-3.25zM10 14.65v-5.3L15 12l-5 2.65z"})})})]}),!u&&s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-50 flex items-center justify-center gap-6 pb-4 bg-gradient-to-t from-black/80 via-black/60 to-transparent pt-6",children:[s.jsx("button",{onClick:async()=>{try{const te=await Hc(Qt.GAZETTEER);te?e("/template-editor",{state:{template:te}}):$e.fire({icon:"error",title:"Error",text:"Could not load Gazetteer template",timer:2e3,showConfirmButton:!1})}catch(te){console.error("Error loading Gazetteer template:",te),$e.fire({icon:"error",title:"Error",text:"Failed to load Gazetteer template",timer:2e3,showConfirmButton:!1})}},className:"text-white text-sm font-medium hover:opacity-70 transition-opacity cursor-pointer","aria-label":"Create a carousel",children:"Carousel"}),s.jsx("button",{onClick:()=>{var te;(te=ue.current)==null||te.click()},className:"text-white text-sm font-medium hover:opacity-70 transition-opacity cursor-pointer","aria-label":"Create a scenes",children:"Scenes"}),s.jsx("button",{onClick:()=>{e("/clip")},className:"text-white text-sm font-medium hover:opacity-70 transition-opacity cursor-pointer","aria-label":"Create stories",children:"Stories"})]}),Ve&&!u&&s.jsxs("div",{className:"absolute inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>De(!1)}),s.jsxs("div",{className:"relative w-full bg-gradient-to-b from-gray-900 to-gray-950 rounded-t-3xl p-6 pb-safe transform transition-transform duration-300 ease-out shadow-2xl border-t border-white/10",children:[s.jsx("div",{className:"w-16 h-1.5 bg-gray-500/50 rounded-full mx-auto mb-6"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[s.jsx(Ec,{className:"w-5 h-5 text-red-400"}),s.jsx("h3",{className:"text-white text-xl font-bold",children:"Effects"})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("button",{onClick:()=>{console.log("Boomerang option clicked"),De(!1)},className:"group flex items-center gap-4 p-4 bg-gray-800/80 hover:bg-purple-600/20 rounded-xl border border-gray-700/50 hover:border-purple-500/50 transition-all duration-200 active:scale-98",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500/30 to-purple-600/20 flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg shadow-purple-500/20",children:s.jsx(Xk,{className:"w-7 h-7 text-purple-400"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:"text-white font-semibold text-base mb-0.5",children:"Boomerang"}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Record a boomerang video"})]}),s.jsx("div",{className:"text-gray-500 group-hover:text-purple-400 transition-colors",children:s.jsx(ui,{className:"w-5 h-5 rotate-180"})})]}),s.jsxs("button",{onClick:()=>{if(u||ma.length>0){const te=ma.length>0?ma:u?[{id:`clip-${Date.now()}`,url:u,duration:h,trimStart:S,trimEnd:v||h,speed:Ot,reverse:Cs,blob:l.current||void 0}]:[];te.length>0&&(i.current&&(i.current.getTracks().forEach(le=>le.stop()),i.current=null),t.current&&(t.current.pause(),t.current.srcObject=null),e("/create/filters",{state:{videoUrl:te[0].url,videoDuration:te[0].duration,trimStart:te[0].trimStart,trimEnd:te[0].trimEnd,speed:te[0].speed,reverse:te[0].reverse,selectedFilter:Le,brightness:He,contrast:Pt,saturation:ye,hue:nt,clips:te,mediaType:"video",musicTrackId:Nt}}))}else $e.fire({icon:"info",title:"No Video to Edit",text:"Please record or select a video first",confirmButtonColor:"#6366f1",background:"#1f2937",color:"#fff"});De(!1)},className:"group flex items-center gap-4 p-4 bg-gray-800/80 hover:bg-green-600/20 rounded-xl border border-gray-700/50 hover:border-green-500/50 transition-all duration-200 active:scale-98",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-green-500/30 to-green-600/20 flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg shadow-green-500/20",children:s.jsx(Pb,{className:"w-7 h-7 text-green-400"})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:"text-white font-semibold text-base mb-0.5",children:"Edit"}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Edit video settings"})]}),s.jsx("div",{className:"text-gray-500 group-hover:text-green-400 transition-colors",children:s.jsx(ui,{className:"w-5 h-5 rotate-180"})})]})]})]})]}),Ne&&!u&&s.jsxs("div",{className:"absolute inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>Oe(!1)}),s.jsxs("div",{className:"relative w-full bg-gradient-to-b from-gray-900 to-gray-950 rounded-t-3xl p-6 pb-safe transform transition-transform duration-300 ease-out shadow-2xl border-t border-white/10",children:[s.jsx("div",{className:"w-16 h-1.5 bg-gray-500/50 rounded-full mx-auto mb-6"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[s.jsx(ox,{className:"w-5 h-5 text-purple-400"}),s.jsx("h3",{className:"text-white text-xl font-bold",children:"Filters"})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 mb-4 scrollbar-hide",children:["None","B&W","Sepia","Vivid","Cool","Vignette","Beauty"].map(te=>s.jsx("button",{onClick:()=>Me(te),className:`flex-shrink-0 px-4 py-3 rounded-xl font-medium text-sm transition-all duration-200 ${Le===te?"bg-purple-600 text-white shadow-lg shadow-purple-500/50":"bg-gray-800/80 text-gray-300 hover:bg-gray-700"}`,children:te},te))}),s.jsxs("button",{onClick:()=>{Ue(!ke),Oe(!1)},className:"w-full flex items-center justify-between p-4 bg-gray-800/80 hover:bg-gray-700 rounded-xl border border-gray-700/50 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(_l,{className:"w-5 h-5 text-blue-400"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-white font-semibold text-base",children:"Adjustments"}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Brightness, Contrast, Saturation, Hue"})]})]}),s.jsx(ui,{className:"w-5 h-5 text-gray-400 rotate-180"})]})]})]}),ke&&!u&&s.jsxs("div",{className:"absolute inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>Ue(!1)}),s.jsxs("div",{className:"relative w-full bg-gradient-to-b from-gray-900 to-gray-950 rounded-t-3xl p-6 pb-safe transform transition-transform duration-300 ease-out shadow-2xl border-t border-white/10",children:[s.jsx("div",{className:"w-16 h-1.5 bg-gray-500/50 rounded-full mx-auto mb-6"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[s.jsx(_l,{className:"w-5 h-5 text-blue-400"}),s.jsx("h3",{className:"text-white text-xl font-bold",children:"Adjustments"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ca,{className:"w-4 h-4 text-yellow-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Brightness"})]}),s.jsxs("span",{className:"text-xs font-semibold text-blue-400 bg-blue-500/20 px-2 py-0.5 rounded",children:[Math.round(He*100),"%"]})]}),s.jsx("input",{type:"range",min:.4,max:1.8,step:.01,value:He,onChange:te=>Mt(parseFloat(te.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${(He-.4)/1.4*100}%, #374151 ${(He-.4)/1.4*100}%, #374151 100%)`}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kd,{className:"w-4 h-4 text-purple-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Contrast"})]}),s.jsxs("span",{className:"text-xs font-semibold text-purple-400 bg-purple-500/20 px-2 py-0.5 rounded",children:[Math.round(Pt*100),"%"]})]}),s.jsx("input",{type:"range",min:.5,max:2,step:.01,value:Pt,onChange:te=>fn(parseFloat(te.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500",style:{background:`linear-gradient(to right, #a855f7 0%, #a855f7 ${(Pt-.5)/1.5*100}%, #374151 ${(Pt-.5)/1.5*100}%, #374151 100%)`}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sf,{className:"w-4 h-4 text-pink-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Saturation"})]}),s.jsxs("span",{className:"text-xs font-semibold text-pink-400 bg-pink-500/20 px-2 py-0.5 rounded",children:[Math.round(ye*100),"%"]})]}),s.jsx("input",{type:"range",min:0,max:2,step:.01,value:ye,onChange:te=>Ge(parseFloat(te.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-pink-500",style:{background:`linear-gradient(to right, #ec4899 0%, #ec4899 ${ye/2*100}%, #374151 ${ye/2*100}%, #374151 100%)`}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lx,{className:"w-4 h-4 text-green-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Hue"})]}),s.jsxs("span",{className:"text-xs font-semibold text-green-400 bg-green-500/20 px-2 py-0.5 rounded",children:[nt>0?"+":"",Math.round(nt*100),"%"]})]}),s.jsx("input",{type:"range",min:-1,max:1,step:.01,value:nt,onChange:te=>nn(parseFloat(te.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-green-500",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${(nt+1)/2*100}%, #374151 ${(nt+1)/2*100}%, #374151 100%)`}})]}),s.jsxs("button",{onClick:()=>{Mt(1),fn(1),Ge(1),nn(0)},className:"w-full p-3 rounded-xl bg-gray-800/80 hover:bg-gray-700 text-white font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx(Xk,{className:"w-4 h-4"}),"Reset to Default"]})]})]})]}),Ce&&!u&&s.jsxs("div",{className:"absolute inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 transition-opacity",onClick:()=>Ft(!1)}),s.jsxs("div",{className:"relative w-full bg-gray-900 rounded-t-3xl h-[85vh] flex flex-col transform transition-transform duration-300 ease-out",children:[s.jsx("div",{className:"w-12 h-1 bg-gray-600 rounded-full mx-auto mt-3 mb-4"}),s.jsxs("div",{className:"px-4 mb-4 flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search music",value:Je,onChange:te=>{Ze(te.target.value);const le=setTimeout(async()=>{if(te.target.value.length>2||te.target.value.length===0){tt(!0);try{const{getMusicLibrary:ze}=await En(()=>Promise.resolve().then(()=>ai),void 0),xt=await ze({genre:ot||void 0,mood:he||void 0,search:te.target.value||void 0});xt.success&&xt.data&&Bt(xt.data)}catch(ze){console.error("Failed to search music:",ze)}finally{tt(!1)}}},500);return()=>clearTimeout(le)},className:"w-full bg-gray-800 text-white placeholder-gray-400 rounded-lg pl-10 pr-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),s.jsxs("button",{className:"px-4 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center gap-2 text-white transition-colors",children:[s.jsx(vU,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Import"})]})]}),s.jsx("div",{className:"px-4 mb-4 flex gap-4 border-b border-gray-700 overflow-x-auto",children:["Library"].map(te=>s.jsx("button",{onClick:async()=>{if(Jt(te),Ye.length===0){tt(!0);try{const{getMusicLibrary:le}=await En(()=>Promise.resolve().then(()=>ai),void 0),ze=await le({genre:ot||void 0,mood:he||void 0,search:Je||void 0});ze.success&&ze.data&&Bt(ze.data)}catch(le){console.error("Failed to load music library:",le)}finally{tt(!1)}}},className:`pb-3 px-2 text-sm font-medium whitespace-nowrap transition-colors ${Tt===te?"text-white border-b-2 border-white":"text-gray-400"}`,children:te},te))}),s.jsxs("div",{className:"px-4 mb-4 grid grid-cols-2 gap-2",children:[s.jsxs("select",{value:ot,onChange:te=>{L(te.target.value),tt(!0),(async()=>{try{const{getMusicLibrary:le}=await En(()=>Promise.resolve().then(()=>ai),void 0),ze=await le({genre:te.target.value||void 0,mood:he||void 0,search:Je||void 0});ze.success&&ze.data&&Bt(ze.data)}catch(le){console.error("Failed to filter music:",le)}finally{tt(!1)}})()},className:"px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[s.jsx("option",{value:"",children:"All Genres"}),s.jsx("option",{value:"pop",children:"Pop"}),s.jsx("option",{value:"rock",children:"Rock"}),s.jsx("option",{value:"electronic",children:"Electronic"}),s.jsx("option",{value:"hip-hop",children:"Hip-Hop"}),s.jsx("option",{value:"jazz",children:"Jazz"}),s.jsx("option",{value:"classical",children:"Classical"}),s.jsx("option",{value:"ambient",children:"Ambient"})]}),s.jsxs("select",{value:he,onChange:te=>{je(te.target.value),tt(!0),(async()=>{try{const{getMusicLibrary:le}=await En(()=>Promise.resolve().then(()=>ai),void 0),ze=await le({genre:ot||void 0,mood:te.target.value||void 0,search:Je||void 0});ze.success&&ze.data&&Bt(ze.data)}catch(le){console.error("Failed to filter music:",le)}finally{tt(!1)}})()},className:"px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500",children:[s.jsx("option",{value:"",children:"All Moods"}),s.jsx("option",{value:"happy",children:"Happy"}),s.jsx("option",{value:"energetic",children:"Energetic"}),s.jsx("option",{value:"calm",children:"Calm"}),s.jsx("option",{value:"dramatic",children:"Dramatic"}),s.jsx("option",{value:"romantic",children:"Romantic"}),s.jsx("option",{value:"upbeat",children:"Upbeat"})]})]}),s.jsx("div",{className:"px-4 mb-4",children:s.jsxs("div",{className:"relative h-48 rounded-xl overflow-hidden bg-gradient-to-br from-purple-600 to-blue-600",children:[s.jsx("div",{className:"absolute inset-0 bg-black/30"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[s.jsx("div",{className:"text-white font-bold text-lg",children:"HARD"}),s.jsx("div",{className:"text-white/80 text-sm",children:"FKA twigs"})]}),s.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5",children:[!0,!1,!1,!1,!1].map((te,le)=>s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${te?"bg-white":"bg-white/40"}`},le))})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:we?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-500"})}):Ye.length>0?Ye.map(te=>{const le=Nt===te.id,ze=te.duration?`${Math.floor(te.duration/60)}:${(te.duration%60).toString().padStart(2,"0")}`:"N/A";return s.jsxs("button",{onClick:async()=>{st(te.id),Ft(!1),$e.fire({icon:"success",title:"Music Selected!",text:`"${te.title}" by ${te.artist||"Unknown"}`,confirmButtonColor:"#fbbf24",background:"#1f2937",color:"#fff",timer:2e3,showConfirmButton:!1})},className:`w-full flex items-center gap-3 p-3 hover:bg-gray-800 rounded-lg transition-colors mb-2 ${le?"bg-yellow-500/20 border border-yellow-500/50":""}`,children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex-shrink-0 flex items-center justify-center",children:s.jsx(As,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsx("div",{className:"text-white font-medium text-sm truncate",children:te.title}),s.jsx("div",{className:"text-gray-400 text-xs truncate",children:te.artist||"Unknown Artist"}),s.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[te.genre||"N/A","  ",te.mood||"N/A","  ",ze,te.license_type&&s.jsxs("span",{className:"ml-2",children:["(",te.license_type,")"]})]})]}),le&&s.jsx("div",{className:"w-6 h-6 rounded-full bg-yellow-500 flex items-center justify-center flex-shrink-0",children:s.jsx(Ib,{className:"w-4 h-4 text-black"})})]},te.id)}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(As,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"No tracks loaded"}),s.jsx("button",{onClick:async()=>{tt(!0);try{const{getMusicLibrary:te}=await En(()=>Promise.resolve().then(()=>ai),void 0),le=await te({genre:ot||void 0,mood:he||void 0,search:Je||void 0});le.success&&le.data&&Bt(le.data)}catch(te){console.error("Failed to load music library:",te),$e.fire({icon:"error",title:"Load Failed",text:te.message||"Failed to load music library.",confirmButtonColor:"#fbbf24",background:"#1f2937",color:"#fff"})}finally{tt(!1)}},className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg font-medium",children:"Load Music Library"})]})})]})]}),J&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>U(!1),children:s.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 w-80 max-w-[90vw] border border-white/20 shadow-2xl",onClick:te=>te.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-white text-lg font-semibold",children:"Gazetteer"}),s.jsx("button",{onClick:()=>U(!1),className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(pt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:async()=>{U(!1);try{const te=await Hc(Qt.GAZETTEER);te?e("/template-editor",{state:{template:te}}):$e.fire({icon:"error",title:"Error",text:"Could not load Gazetteer template",timer:2e3,showConfirmButton:!1})}catch(te){console.error("Error loading Gazetteer template:",te),$e.fire({icon:"error",title:"Error",text:"Failed to load Gazetteer template",timer:2e3,showConfirmButton:!1})}},className:"w-full p-4 rounded-xl bg-gradient-to-br from-green-500/20 to-white/10 border border-green-500/30 hover:border-green-500/50 transition-all text-left",children:[s.jsx("div",{className:"text-white font-semibold mb-1",children:"Create a carousel"}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Create a multi-clip carousel post"})]}),s.jsxs("button",{onClick:()=>{var te;U(!1),(te=ue.current)==null||te.click()},className:"w-full p-4 rounded-xl bg-gradient-to-br from-green-500/20 to-white/10 border border-green-500/30 hover:border-green-500/50 transition-all text-left",children:[s.jsx("div",{className:"text-white font-semibold mb-1",children:"Create a scenes"}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Select from camera roll"})]}),s.jsxs("button",{onClick:()=>{U(!1),e("/clip")},className:"w-full p-4 rounded-xl bg-gradient-to-br from-green-500/20 to-white/10 border border-green-500/30 hover:border-green-500/50 transition-all text-left",children:[s.jsx("div",{className:"text-white font-semibold mb-1",children:"Create a 24hr clip"}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Create a 24-hour story clip"})]})]})]})}),s.jsx("input",{ref:ue,type:"file",accept:"image/*,video/*",multiple:!0,className:"hidden",onChange:async te=>{var xt;const le=te.target.files;if(!le||le.length===0)return;const ze=[];for(const vt of Array.from(le))if(vt.type.startsWith("video/")){const Qe=URL.createObjectURL(vt),St=document.createElement("video");St.src=Qe,St.preload="metadata",await new Promise(Ke=>{let ft=!1;const lt=()=>{if(ft)return;ft=!0;const et=St.duration&&isFinite(St.duration)?St.duration:5,Et={id:`clip-${Date.now()}-${Math.random()}`,url:Qe,duration:et,trimStart:0,trimEnd:et,speed:1,reverse:!1,blob:vt};ze.push(Et),Ke()};St.addEventListener("loadedmetadata",lt),setTimeout(()=>{if(!ft){ft=!0;const et={id:`clip-${Date.now()}-${Math.random()}`,url:Qe,duration:5,trimStart:0,trimEnd:5,speed:1,reverse:!1,blob:vt};ze.push(et),Ke()}},5e3)})}else if(vt.type.startsWith("image/")){const Qe=URL.createObjectURL(vt),St={id:`clip-${Date.now()}-${Math.random()}`,url:Qe,duration:3,trimStart:0,trimEnd:3,speed:1,reverse:!1,blob:vt};ze.push(St)}ze.length>0&&e("/create/filters",{state:{videoUrl:ze[0].url,videoDuration:ze[0].duration,clips:ze,mediaType:(xt=ze[0].blob)!=null&&xt.type.startsWith("image/")?"image":"video",fromGazetteer:!0}}),ue.current&&(ue.current.value="")}}),s.jsx("input",{ref:Pe,type:"file",accept:"image/*,video/*",multiple:!0,className:"hidden",onChange:async te=>{const le=te.target.files;if(!le||le.length===0){console.log("No files selected");return}console.log(" Files selected:",le.length,Array.from(le).map(ze=>({name:ze.name,type:ze.type,size:ze.size})));for(const ze of Array.from(le))if(console.log("Processing file:",ze.name,ze.type),ze.type.startsWith("video/")){const xt=URL.createObjectURL(ze);console.log("Created blob URL:",xt);const vt=document.createElement("video");vt.src=xt,vt.preload="metadata",await new Promise(Qe=>{let St=!1;const Ke=()=>{if(St)return;St=!0;const ft=vt.duration&&isFinite(vt.duration)?vt.duration:5;console.log("Video duration:",ft),ft>ur&&$e.fire({icon:"warning",title:"Video Too Long",text:`Video "${ze.name}" is ${Math.round(ft)}s. Maximum is ${ur}s. It will be trimmed.`,confirmButtonText:"OK"});const lt={id:`clip-${Date.now()}-${Math.random()}`,url:xt,duration:Math.min(ft,ur),trimStart:0,trimEnd:Math.min(ft,ur),speed:1,reverse:!1,blob:ze};console.log("Created clip:",lt),Gi(et=>{const Et=[...et,lt];return Et.length===1&&(f(lt.url),g(lt.duration),x(0),b(lt.duration),setTimeout(()=>{const At=Et.length>0?Et:[lt];At.length>0&&(console.log("Navigating to edit page with clips:",At),i.current&&(i.current.getTracks().forEach(ct=>ct.stop()),i.current=null),t.current&&(t.current.pause(),t.current.srcObject=null),e("/create/filters",{state:{videoUrl:At[0].url,videoDuration:At[0].duration,trimStart:At[0].trimStart,trimEnd:At[0].trimEnd,speed:At[0].speed,reverse:At[0].reverse,selectedFilter:Le,brightness:He,contrast:Pt,saturation:ye,hue:nt,clips:At,mediaType:ze.type.startsWith("image/")?"image":"video",musicTrackId:Nt}}))},500)),Et}),Qe()};vt.onloadedmetadata=Ke,vt.oncanplay=()=>{St||(console.log("Video can play, using fallback duration"),Ke())},vt.onerror=ft=>{St||(St=!0,console.error("Error loading video:",ze.name,ft),$e.fire({icon:"error",title:"Error Loading Video",text:`Could not load "${ze.name}". Please try a different file.`,confirmButtonText:"OK"}),Qe())},setTimeout(()=>{if(!St){console.log("Video loading timeout, using default duration"),St=!0;const ft={id:`clip-${Date.now()}-${Math.random()}`,url:xt,duration:5,trimStart:0,trimEnd:5,speed:1,reverse:!1,blob:ze};Gi(lt=>{const et=[...lt,ft];return et.length===1&&(f(ft.url),g(ft.duration),x(0),b(ft.duration),setTimeout(()=>{e("/create/filters",{state:{videoUrl:ft.url,videoDuration:ft.duration,trimStart:0,trimEnd:ft.duration,speed:1,reverse:!1,selectedFilter:Le,brightness:He,contrast:Pt,saturation:ye,hue:nt,clips:[ft],mediaType:ze.type.startsWith("image/")?"image":"video",musicTrackId:Nt}})},500)),et}),Qe()}},5e3)})}else if(ze.type.startsWith("image/")){const xt=URL.createObjectURL(ze);console.log("Created image blob URL:",xt);const vt=3,Qe={id:`clip-${Date.now()}-${Math.random()}`,url:xt,duration:vt,trimStart:0,trimEnd:vt,speed:1,reverse:!1,blob:ze};console.log("Created image clip:",Qe),Gi(St=>{const Ke=[...St,Qe];return Ke.length===1&&(f(Qe.url),g(Qe.duration),x(0),b(Qe.duration),setTimeout(()=>{const ft=Ke.length>0?Ke:[Qe];ft.length>0&&(console.log("Navigating to edit page with image clip:",ft),i.current&&(i.current.getTracks().forEach(lt=>lt.stop()),i.current=null),t.current&&(t.current.pause(),t.current.srcObject=null),e("/create/filters",{state:{videoUrl:ft[0].url,videoDuration:ft[0].duration,trimStart:ft[0].trimStart,trimEnd:ft[0].trimEnd,speed:ft[0].speed,reverse:ft[0].reverse,selectedFilter:Le,brightness:He,contrast:Pt,saturation:ye,hue:nt,clips:ft,mediaType:ze.type.startsWith("image/")?"image":"video",musicTrackId:Nt}}))},500)),Ke})}else console.warn("File type not supported:",ze.type),$e.fire({icon:"info",title:"File Type Not Supported",text:`"${ze.name}" is not a supported file type. Please select a video or image file.`,confirmButtonText:"OK"});Pe.current&&(Pe.current.value="")}}),!u&&s.jsx(s.Fragment,{children:at?s.jsxs("div",{className:"absolute left-2 top-1/4 z-40 flex flex-col gap-3",children:[s.jsx("button",{title:"Vertical Split",onClick:()=>{Ct("vertical"),console.log("Vertical split selected")},className:`p-3 rounded-xl ${gt==="vertical"?"bg-purple-600 shadow-lg shadow-purple-500/50":"bg-black/60"} text-white hover:bg-purple-500/80 active:scale-95 transition-all duration-200`,children:s.jsx(xa,{className:"w-6 h-6",selected:gt==="vertical"})}),s.jsx("button",{title:"Horizontal Split",onClick:()=>{Ct("horizontal"),console.log("Horizontal split selected")},className:`p-3 rounded-xl ${gt==="horizontal"?"bg-purple-600 shadow-lg shadow-purple-500/50":"bg-black/60"} text-white hover:bg-purple-500/80 active:scale-95 transition-all duration-200`,children:s.jsx(Ts,{className:"w-6 h-6",selected:gt==="horizontal"})}),s.jsx("button",{title:"Grid 2x2",onClick:()=>{Ct("grid2x2"),console.log("2x2 grid selected")},className:`p-3 rounded-xl ${gt==="grid2x2"?"bg-purple-600 shadow-lg shadow-purple-500/50":"bg-black/60"} text-white hover:bg-purple-500/80 active:scale-95 transition-all duration-200`,children:s.jsx($u,{className:"w-6 h-6",selected:gt==="grid2x2"})}),s.jsx("button",{title:"Grid 3x3",onClick:()=>{Ct("grid3x3"),console.log("3x3 grid selected")},className:`p-3 rounded-xl ${gt==="grid3x3"?"bg-purple-600 shadow-lg shadow-purple-500/50":"bg-black/60"} text-white hover:bg-purple-500/80 active:scale-95 transition-all duration-200`,children:s.jsx(zo,{className:"w-6 h-6",selected:gt==="grid3x3"})})]}):ne?s.jsxs("div",{className:"absolute left-2 top-1/4 z-40 flex flex-col gap-3",children:[s.jsx("button",{title:"Choose Green Screen background",onClick:()=>{var te;(te=Z.current)==null||te.click()},className:`p-3 rounded-xl ${_e?"bg-green-600 shadow-lg shadow-green-500/50":"bg-black/60"} text-white hover:bg-green-500/80 active:scale-95 transition-all duration-200 flex items-center justify-center`,children:s.jsx(Os,{className:"w-5 h-5"})}),s.jsx("button",{title:"Preset background",onClick:()=>{const te=Mn.current;Vs.current=(Vs.current+1)%te.length,de(te[Vs.current]),Re(!0)},className:"p-3 rounded-xl bg-black/60 text-white hover:bg-purple-600/80 active:scale-95 transition-all duration-200 flex items-center justify-center",children:s.jsx(Sf,{className:"w-5 h-5"})}),_e&&s.jsxs("div",{className:"bg-black/60 rounded-xl p-3 space-y-4 backdrop-blur-sm border border-white/10",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_l,{className:"w-4 h-4 text-gray-300"}),s.jsx("span",{className:"text-xs font-medium text-gray-200",children:"Blur"})]}),s.jsx("span",{className:"text-xs font-semibold text-green-400 bg-green-500/20 px-2 py-0.5 rounded",children:j})]}),s.jsx("input",{type:"range",min:0,max:10,step:1,value:j,onChange:te=>O(parseInt(te.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-green-500",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${j/10*100}%, #374151 ${j/10*100}%, #374151 100%)`}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kd,{className:"w-4 h-4 text-gray-300"}),s.jsx("span",{className:"text-xs font-medium text-gray-200",children:"Feather"})]}),s.jsx("span",{className:"text-xs font-semibold text-green-400 bg-green-500/20 px-2 py-0.5 rounded",children:se})]}),s.jsx("input",{type:"range",min:0,max:8,step:1,value:se,onChange:te=>K(parseInt(te.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-green-500",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${se/8*100}%, #374151 ${se/8*100}%, #374151 100%)`}})]}),s.jsxs("button",{title:"Disable Green Screen",onClick:()=>{Re(!1),de(null)},className:"w-full p-2.5 rounded-lg bg-red-600/80 hover:bg-red-600 text-white active:scale-95 transition-all duration-200 flex items-center justify-center gap-2 mt-2",children:[s.jsx(pt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Disable"})]})]})]}):null}),me&&!u&&s.jsx("div",{className:"absolute inset-0 z-30 pointer-events-none",children:s.jsxs("div",{className:"absolute inset-0 grid grid-cols-3 grid-rows-3",children:[s.jsx("div",{className:"border border-white/30"}),s.jsx("div",{className:"border border-white/30"}),s.jsx("div",{className:"border border-white/30"}),s.jsx("div",{className:"border border-white/30"}),s.jsx("div",{className:"border border-white/30"}),s.jsx("div",{className:"border border-white/30"}),s.jsx("div",{className:"border border-white/30"}),s.jsx("div",{className:"border border-white/30"}),s.jsx("div",{className:"border border-white/30"})]})}),fe!==null&&s.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/40",children:s.jsx("div",{className:"text-white text-6xl font-bold",children:fe})})]})}const dq=[{id:"none",name:"None"},{id:"beauty",name:"Beauty"},{id:"bw",name:"B&W"},{id:"sepia",name:"Sepia"},{id:"vivid",name:"Vivid"},{id:"cool",name:"Cool"},{id:"vignette",name:"Vignette"}],If=[{id:"none",name:"None",url:""},{id:"tealorange",name:"Teal & Orange",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/teal_orange_16.png",size:16,tiles:4},{id:"film",name:"Film Warm",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/film_warm_16.png",size:16,tiles:4},{id:"bleachbypass",name:"Bleach Bypass",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/bleach_bypass_16.png",size:16,tiles:4},{id:"cinematic",name:"Cinematic",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/cinematic_16.png",size:16,tiles:4},{id:"vintage",name:"Vintage",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/vintage_16.png",size:16,tiles:4},{id:"dramatic",name:"Dramatic",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/dramatic_16.png",size:16,tiles:4},{id:"cooltone",name:"Cool Tone",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/cool_tone_16.png",size:16,tiles:4},{id:"warmtone",name:"Warm Tone",url:"https://raw.githubusercontent.com/trevorhobenshield/luts/main/warm_tone_16.png",size:16,tiles:4}];function uq(e,t,n,r){const a=e.canvas.width,i=e.canvas.height;e.clearRect(0,0,a,i),e.drawImage(t,-r*a,0,a,i),e.drawImage(n,a-r*a,0,a,i)}function fq(e,t,n,r){const a=e.canvas.width,i=e.canvas.height,o=1+r*1.2,l=.5+r*.5;e.clearRect(0,0,a,i),e.save(),e.translate(a/2,i/2),e.scale(o,o),e.drawImage(t,-a/2,-i/2,a,i),e.restore(),e.save(),e.translate(a/2,i/2),e.scale(l,l),e.globalAlpha=r,e.drawImage(n,-a/2,-i/2,a,i),e.restore(),e.globalAlpha=1}function PS(e,t,n,r){const a=e.canvas.width,i=e.canvas.height;e.clearRect(0,0,a,i),e.drawImage(t,0,0,a,i),e.globalAlpha=r,e.drawImage(n,0,0,a,i),e.globalAlpha=1}function hq({icon:e,label:t,onClick:n,isActive:r=!1,isEditsMenu:a=!1}){return s.jsxs("button",{onClick:n,className:`flex flex-col items-center text-sm transition-all ${r?"opacity-100":"opacity-90 hover:opacity-100"}`,children:[s.jsxs("div",{className:`p-3 rounded-full transition-all relative ${a?"bg-transparent border-2 border-white animate-pulse-glow":r?"bg-blue-600":"bg-gray-800 hover:bg-gray-700"} ${a&&r?"animate-spin-slow":""}`,children:[e,a&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-white/30 animate-ping"}),s.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-white/20 animate-pulse"})]})]}),s.jsx("span",{className:"mt-1 text-white",children:t})]})}function mq(){var rw,sw,aw,iw,ow,lw,cw;const e=Xt(),{user:t}=tn(),{state:n}=qn();m.useEffect(()=>{console.log(" InstantFiltersPage - Full location state:",n),console.log(" InstantFiltersPage - State type:",typeof n),console.log(" InstantFiltersPage - State keys:",n?Object.keys(n):"null")},[n]);const r=n||{},{videoUrl:a,videoDuration:i=0,selectedFilter:o,brightness:l,contrast:c,saturation:d,hue:u,trimStart:f,trimEnd:h,mediaType:g,clips:y}=r,[p,S]=m.useState(y||[]),x=m.useRef(null),[v,b]=m.useState(null),[w,N]=m.useState(null),R=k=>{if(k===0)return;const I=[...p];[I[k-1],I[k]]=[I[k],I[k-1]],S(I),console.log(" Moved clip earlier from index",k,"to",k-1)},C=k=>{if(k===p.length-1)return;const I=[...p];[I[k],I[k+1]]=[I[k+1],I[k]],S(I),console.log(" Moved clip later from index",k,"to",k+1)},_=async k=>{const I=k.target.files;if(!(!I||I.length===0)){for(const A of Array.from(I))if(A.type.startsWith("video/")||A.type.startsWith("image/")){const ae=URL.createObjectURL(A),oe=A.type.startsWith("image/")?"image":"video";let Q=3;if(A.type.startsWith("video/")){const ce=document.createElement("video");ce.src=ae,ce.preload="metadata",await new Promise(Fe=>{ce.onloadedmetadata=()=>{Q=ce.duration&&isFinite(ce.duration)?ce.duration:5,Fe()},ce.onerror=()=>Fe(),setTimeout(()=>Fe(),3e3)})}const ee={id:`clip-${Date.now()}-${Math.random()}`,url:ae,duration:Q,trimStart:0,trimEnd:Q,speed:1,reverse:!1,blob:A,mediaType:oe};S(ce=>[...ce,ee])}x.current&&(x.current.value="")}},W=k=>{switch(k){case"B&W":return"bw";case"Sepia":return"sepia";case"Vivid":return"vivid";case"Cool":return"cool";case"Vignette":return"vignette";case"Beauty":return"beauty";default:return"none"}},[T,E]=m.useState(o?W(o):"none"),[B,H]=m.useState(l??1),[q,ie]=m.useState(c??1),[X,V]=m.useState(d??1),[z,J]=m.useState(u??0);m.useState(.4);const U=m.useRef(null),ue=m.useRef(null),fe=m.useRef(null),Ae=m.useRef(null),_e=m.useRef(null),Re=m.useRef(null),[Se,de]=m.useState(!1),[F,$]=m.useState(null),[Z,Pe]=m.useState(null),[ve,re]=m.useState(!1),[M,G]=m.useState(0),[P,Y]=m.useState(1.2),[j,O]=m.useState(!0),[se,K]=m.useState(!1),[me,pe]=m.useState(.5),Ve=m.useRef(null),[De,Ce]=m.useState((r==null?void 0:r.stickers)||[]),[Ft,Tt]=m.useState(null),[Jt,Nt]=m.useState(!1),st=m.useRef(null),[Ye,Bt]=m.useState({width:0,height:0}),[we,tt]=m.useState(null),Je=m.useRef([]);m.useEffect(()=>{const k=()=>{st.current&&Bt({width:st.current.offsetWidth,height:st.current.offsetHeight})};return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[st.current]);const Ze=m.useRef(null);m.useState(!1);const[ot,L]=m.useState(!1),[he,je]=m.useState(!1),[at,ut]=m.useState(null),[gt,Ct]=m.useState(0),[ne,ge]=m.useState(0);m.useEffect(()=>{if(!we)return;const k=ne||i||90,I=50,A=oe=>{const Q=De.find(Fe=>Fe.id===we.stickerId);if(!Q)return;const ce=(oe.clientX-we.startX)/I;if(we.type==="drag"){const Fe=Math.max(0,we.startTime+ce),Ee=(Q.endTime||k)-(Q.startTime||0),Te=Math.min(k,Fe+Ee);Fe<Te&&Te<=k&&Ce(De.map(We=>We.id===Q.id?{...We,startTime:Fe,endTime:Te}:We))}else if(we.type==="resize-left"){const Fe=Math.max(0,Math.min(we.startTime+ce,(Q.endTime||k)-.1));Ce(De.map(Ee=>Ee.id===Q.id?{...Ee,startTime:Fe}:Ee))}else if(we.type==="resize-right"){const Fe=Math.min(k,Math.max(we.startTime+ce,(Q.startTime||0)+.1));Ce(De.map(Ee=>Ee.id===Q.id?{...Ee,endTime:Fe}:Ee))}},ae=()=>{tt(null)};return document.addEventListener("mousemove",A),document.addEventListener("mouseup",ae),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",ae)}},[we,De,ne,i]);const[Ne,Oe]=m.useState(f??0),[Le,Me]=m.useState(h??i),[ke,Ue]=m.useState(null),[He,Mt]=m.useState(null),Pt=m.useRef(null),[fn,ye]=m.useState(1),[Ge,nt]=m.useState(null),[nn,Ot]=m.useState(!1),[Hn,Cs]=m.useState(null),[Wt,ma]=m.useState([]);m.useState(null);const Gi=m.useRef({videoA:null,videoB:null,animationId:null}),[Mn,Vs]=m.useState(null),[ur,Uo]=m.useState(.7),[Xr,Wa]=m.useState(1),[Va,Qv]=m.useState(0);m.useState(null);const ht=m.useRef(null);m.useRef(null);const[pa,ga]=m.useState([]),[Ec,xa]=m.useState(!1),[Ts,$u]=m.useState({genre:"",mood:"",search:""}),[zo,te]=m.useState("library");m.useState(!1),m.useState({mood:"happy",genre:"pop",duration:30});const[le,ze]=m.useState(new Array(20).fill(5)),[xt,vt]=m.useState(0),[Qe,St]=m.useState(null),[Ke,ft]=m.useState(null),[lt,et]=m.useState(!1),Et=m.useRef(null),[At,ct]=m.useState(new Set),[cn,Sr]=m.useState(0),jr=m.useRef(null),hn=m.useRef(null),[mn,Ki]=m.useState(null),[Hu,s3]=m.useState(If[0]),[Yi,Sp]=m.useState(!0);m.useState(!1);const[$o,a3]=m.useState(null),[Fq,i3]=m.useState([]),[dn,qi]=m.useState(null),Wu=[{id:"music",name:"Music",icon:As},{id:"filters",name:"Filters",icon:ox},{id:"adjustments",name:"Adjust",icon:_l},{id:"lut",name:"LUT",icon:Os},{id:"trim",name:"Trim",icon:Db},{id:"speed",name:"Speed",icon:Ca},{id:"reverse",name:"Reverse",icon:Ei},{id:"multi-clip",name:"Multi-Clip",icon:Kd},{id:"transitions",name:"Transitions",icon:lx},{id:"overlays",name:"Overlays",icon:Xl},{id:"voiceover",name:"Voiceover",icon:qd},{id:"green-screen",name:"Green Screen",icon:Fb}],Ur=m.useMemo(()=>{if(g==="image")return!0;if(g==="video"||!a)return!1;const k=a.toLowerCase();return k.includes(".jpg")||k.includes(".jpeg")||k.includes(".png")||k.includes(".gif")||k.includes(".webp")||k.includes(".bmp")},[a,g]),[Jn,ew]=m.useState(a),[Xi,jp]=m.useState(0),[Bq,Vu]=m.useState(!1);m.useEffect(()=>{i>0&&(Le===0||Le>i)&&Me(i)},[i]);const tw=m.useRef(!1);if(m.useEffect(()=>{var k,I;!tw.current&&p&&p.length>0&&(((k=p[0])==null?void 0:k.speed)!==void 0&&ye(p[0].speed),((I=p[0])==null?void 0:I.reverse)!==void 0&&Ot(p[0].reverse),tw.current=!0)},[p]),m.useEffect(()=>{if(U.current&&!Ur){let k;if(p&&p.length>0){let I;Ge!==null&&p[Ge]?I=p[Ge]:I=p[0],k=(I==null?void 0:I.speed)||1}else k=fn;U.current.playbackRate=k,console.log(" Video playbackRate set to:",k,"(reverse will be applied on server)")}},[fn,p,Ge,Ur]),m.useEffect(()=>{if(!U.current||Ur||p.length<=1){p.length===0&&Jn&&ew(Jn);return}const k=U.current,I=p[Xi];if(I){const A=I.url;k.src!==A&&(k.src=A,k.load()),k.playbackRate=I.speed||1;const ae=()=>{Xi<p.length-1?(jp(ee=>ee+1),Vu(!0)):(jp(0),Vu(!1))},oe=()=>{Vu(!0)},Q=()=>{Vu(!1)};return k.addEventListener("ended",ae),k.addEventListener("play",oe),k.addEventListener("pause",Q),()=>{k.removeEventListener("ended",ae),k.removeEventListener("play",oe),k.removeEventListener("pause",Q)}}},[p,Xi,Ur,Jn]),m.useEffect(()=>{p.length>0&&jp(0)},[p.length]),m.useEffect(()=>{if(!Mn||!U.current)return;if(!Mn.startsWith("http")&&!Mn.startsWith("data:")&&!Mn.startsWith("blob:")){console.warn("Invalid music URL:",Mn);return}if(ht.current)ht.current.volume=ur;else try{const ee=Mn;if(!ee||!ee.startsWith("http")&&!ee.startsWith("blob:")&&!ee.startsWith("data:")){console.warn("Invalid music URL format:",ee);return}const ce=new Audio;ce.volume=ur,ce.loop=!0;const Fe=Te=>{console.warn("Music preview audio failed to load (this is okay - music will still be added when posting)"),ce&&(ce.__previewFailed=!0)};ce.addEventListener("error",Fe),ce.src=ee,ht.current=ce;const Ee=()=>{console.log("Music preview audio loaded successfully"),ht.current&&(ht.current.__previewFailed=!1)};ht.current.addEventListener("loadeddata",Ee);try{const Te=ht.current.load();Te&&typeof Te.catch=="function"&&Te.catch(We=>{console.warn("Could not load music preview (this is okay - music will still be added when posting):",We),ht.current&&(ht.current.__previewFailed=!0)})}catch(Te){console.warn("Could not load music preview (this is okay - music will still be added when posting):",Te),ht.current&&(ht.current.__previewFailed=!0)}}catch(ee){console.warn("Could not create music preview audio (this is okay - music will still be added when posting):",ee);return}const k=U.current,I=ht.current;k.muted&&(k.muted=!1),k.volume!==Xr&&(k.volume=Xr);const A=()=>{I.paused&&!I.__previewFailed&&(I.currentTime=k.currentTime+Va,I.play().catch(ee=>{console.warn("Could not play music preview (this is okay - music will still be added when posting):",ee)}))},ae=()=>{I.paused||I.pause()},oe=()=>{!I.paused&&Math.abs(I.currentTime-(k.currentTime+Va))>.5&&(I.currentTime=k.currentTime+Va)};k.addEventListener("play",A),k.addEventListener("pause",ae),k.addEventListener("timeupdate",oe),!k.paused&&!I.__previewFailed&&(I.currentTime=k.currentTime+Va,I.play().catch(ee=>{console.warn("Could not auto-play music preview (this is okay - music will still be added when posting):",ee)}));const Q=()=>{!k.paused&&I.paused&&!I.__previewFailed&&(I.currentTime=k.currentTime+Va,I.play().catch(ee=>{console.warn("Could not play music on video canPlay (this is okay - music will still be added when posting):",ee)}))};return k.addEventListener("canplay",Q),()=>{k.removeEventListener("play",A),k.removeEventListener("pause",ae),k.removeEventListener("timeupdate",oe),k.removeEventListener("canplay",Q),I&&I.pause()}},[Mn,ur,Va]),m.useEffect(()=>()=>{ht.current&&(ht.current.pause(),ht.current=null)},[]),m.useEffect(()=>{dn==="music"&&pa.length===0&&!Ec&&(console.log(" Music category selected, loading tracks..."),xa(!0),(async()=>{var k,I,A;try{console.log(" Attempting to load music from API...");const{getMusicLibrary:ae}=await En(()=>Promise.resolve().then(()=>ai),void 0),oe=await ae({});if(console.log(" API response:",oe),oe.success&&oe.data){const Q=Array.isArray(oe.data)?oe.data:[];if(console.log(` Loaded ${Q.length} music tracks from API`),Q.length>0)ga(Q);else throw console.warn(" API returned empty array, trying JSON fallback..."),new Error("API returned empty array")}else throw new Error("API returned no data")}catch(ae){console.warn(" Failed to load from API, trying JSON fallback:",ae),(((k=ae==null?void 0:ae.message)==null?void 0:k.includes("Failed to fetch"))||((I=ae==null?void 0:ae.message)==null?void 0:I.includes("NetworkError"))||((A=ae==null?void 0:ae.message)==null?void 0:A.includes("Cannot connect")))&&(console.warn(" Backend server appears to be offline. To use music library:"),console.warn("   1. Navigate to laravel-backend directory"),console.warn("   2. Run: php artisan serve"),console.warn("   3. Refresh this page"));try{console.log(" Attempting to load from royaltyFreeMusic.json...");const Q=await fetch("/royaltyFreeMusic.json");if(console.log(" JSON fetch response:",Q.status,Q.ok),Q.ok){const ee=await Q.json();if(console.log(" JSON data received:",ee),Array.isArray(ee)&&ee.length>0){const ce=ee.map(Fe=>({id:Fe.id,title:Fe.title,artist:Fe.artist||"Unknown Artist",genre:Fe.genre||"ambient",mood:Fe.mood||"calm",url:Fe.src||Fe.url,preview_url:Fe.src||Fe.url,cover:Fe.cover||Fe.image,license_type:Fe.license_type||"CC0",license_requires_attribution:Fe.license_requires_attribution||!1}));console.log(` Loaded ${ce.length} tracks from JSON fallback`),ga(ce)}else console.error(" JSON file is empty or invalid format")}else console.error(" Failed to fetch JSON file:",Q.status,Q.statusText),console.warn(" Tip: The royaltyFreeMusic.json file is not in the public folder")}catch(Q){console.error(" Failed to load from JSON fallback:",Q)}}finally{xa(!1),console.log(" Music loading completed")}})())},[dn]),m.useEffect(()=>{var wt,Wn,zr,kt,Vt,on,jn;const k=Re.current;if(!k||!dn||dn!=="transitions"){if(k){const jt=k.getContext("2d");jt&&(jt.clearRect(0,0,k.width,k.height),jt.fillStyle="#000000",jt.fillRect(0,0,k.width||400,k.height||225))}return}if(p.length<2||Wt.length===0||((wt=Wt[0])==null?void 0:wt.type)==="none"){const jt=k.getContext("2d");jt&&(jt.clearRect(0,0,k.width,k.height),jt.fillStyle="#000000",jt.fillRect(0,0,k.width||400,k.height||225));return}const I=k.getBoundingClientRect();I.width>0&&I.height>0?(k.width=I.width,k.height=I.height):(k.width=400,k.height=225);const A=k.getContext("2d");if(!A)return;const ae=((Wn=p[0])==null?void 0:Wn.mediaType)==="image"||((zr=p[0])==null?void 0:zr.url.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)),oe=((kt=p[1])==null?void 0:kt.mediaType)==="image"||((Vt=p[1])==null?void 0:Vt.url.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)),Q=ae?document.createElement("img"):document.createElement("video"),ee=oe?document.createElement("img"):document.createElement("video");Q.src=((on=p[0])==null?void 0:on.url)||"",ee.src=((jn=p[1])==null?void 0:jn.url)||"",ae||(Q.muted=!0,Q.playsInline=!0,Q.preload="metadata"),oe||(ee.muted=!0,ee.playsInline=!0,ee.preload="metadata");let ce=0,Fe=null,Ee=0;const Te=()=>{Ee++,Ee===2&&(ae&&oe?mt():(!ae&&Q.duration>0?Q.currentTime=Math.min(Q.duration*.5,Q.duration-.1):Ee++,!oe&&ee.duration>0?ee.currentTime=Math.min(ee.duration*.5,ee.duration-.1):Ee++))},We=()=>{Ee++,(Ee>=4||ae&&oe)&&mt()},mt=()=>{const jt=()=>{var $r;if(!A||!k)return;ce+=.02,ce>1&&(ce=0);const Ut=(($r=Wt[0])==null?void 0:$r.type)||"fade";Ut==="fade"||Ut==="crossfade"||Ut==="fadeblack"||Ut==="fadewhite"?PS(A,Q,ee,ce):Ut==="zoom"||Ut==="zoomin"||Ut==="zoomout"?fq(A,Q,ee,ce):Ut.includes("slide")||Ut.includes("wipe")?uq(A,Q,ee,ce):PS(A,Q,ee,ce),Fe=requestAnimationFrame(jt)};jt()};return Q.addEventListener("load",Te),ee.addEventListener("load",Te),ae||(Q.addEventListener("loadeddata",Te),Q.addEventListener("seeked",We),Q.load()),oe||(ee.addEventListener("loadeddata",Te),ee.addEventListener("seeked",We),ee.load()),Gi.current={videoA:ae?null:Q,videoB:oe?null:ee,animationId:Fe},()=>{Fe!==null&&cancelAnimationFrame(Fe),Q.removeEventListener("load",Te),ee.removeEventListener("load",Te),ae||(Q.removeEventListener("loadeddata",Te),Q.removeEventListener("seeked",We),Q.src=""),oe||(ee.removeEventListener("loadeddata",Te),ee.removeEventListener("seeked",We),ee.src=""),Q.src="",ee.src="",Gi.current={videoA:null,videoB:null,animationId:null}}},[p,Wt,dn]),m.useEffect(()=>{if(Mn&&!Ke)try{const k=new(window.AudioContext||window.webkitAudioContext);ft(k)}catch(k){console.warn("Web Audio API not supported:",k)}},[Mn,Ke]),m.useEffect(()=>{if(ht.current&&Mn&&Ke&&Qe&&lt){const k=Qe.frequencyBinCount,I=new Uint8Array(k),A=20,ae=()=>{if(!Qe||!ht.current||ht.current.paused){et(!1),Et.current&&(cancelAnimationFrame(Et.current),Et.current=null);return}Qe.getByteFrequencyData(I);const oe=Math.floor(k/A),Q=[];for(let Ee=0;Ee<A;Ee++){const Te=Ee*oe;let We=0;for(let mt=0;mt<oe;mt++)We+=I[Te+mt]||0;Q[Ee]=4+We/oe/255*40}ze(Q);let ee=0;const ce=Math.min(5,k);for(let Ee=0;Ee<ce;Ee++)ee+=I[Ee];const Fe=ee/(ce*255);vt(Ee=>Math.min(1,Ee*.8+Fe*.2)),Et.current=requestAnimationFrame(ae)};return ae(),()=>{Et.current&&(cancelAnimationFrame(Et.current),Et.current=null)}}},[Mn,Ke,Qe,lt]),m.useEffect(()=>{if(!He)return;const k=A=>{if(!Pt.current)return;const ae=Pt.current.getBoundingClientRect(),oe=A.clientX-ae.left,Q=Math.max(0,Math.min(1,oe/ae.width));if(ke!==null&&p[ke]){const ee=p[ke],ce=ee.duration,Fe=Q*ce;if(He==="start"){const Ee=Math.max(0,Math.min(Fe,ee.trimEnd-.1));S(Te=>Te.map((We,mt)=>mt===ke?{...We,trimStart:Ee}:We))}else if(He==="end"){const Ee=Math.max(ee.trimStart+.1,Math.min(Fe,ce));S(Te=>Te.map((We,mt)=>mt===ke?{...We,trimEnd:Ee}:We))}}else{if(i===0)return;const ee=Q*i;if(He==="start"){const ce=Math.max(0,Math.min(ee,Le-.1));Oe(ce)}else if(He==="end"){const ce=Math.max(Ne+.1,Math.min(ee,i));Me(ce)}}},I=()=>{Mt(null)};return window.addEventListener("mousemove",k),window.addEventListener("mouseup",I),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",I)}},[He,i,Ne,Le,ke,p]),m.useEffect(()=>{var A;if(console.log(" InstantFiltersPage - State received:",{videoUrl:a==null?void 0:a.substring(0,50),videoDuration:i,mediaType:g,isImage:Ur,hasState:!!n,stateKeys:n?Object.keys(n):[],clips:((A=n==null?void 0:n.clips)==null?void 0:A.length)||0}),!a){console.warn(" No videoUrl found, redirecting to instant create page"),e("/create/instant",{replace:!0});return}let k=a,I=p;if(a&&a.startsWith("blob:")){const ae=n==null?void 0:n.clips;ae&&ae.length>0?(ae[0].blob?(console.log(" Found blob in clips, recreating blob URL..."),k=URL.createObjectURL(ae[0].blob),console.log(" Recreated blob URL:",k.substring(0,50))):console.warn(" No blob stored in first clip, blob URL may be invalid"),I=ae.map((oe,Q)=>{if(oe.blob){const ee=URL.createObjectURL(oe.blob);return console.log(` Recreated blob URL for clip ${Q+1}:`,oe.id.substring(0,10)),{...oe,url:ee}}else if(oe.url.startsWith("blob:"))return console.warn(` Clip ${Q+1} has blob URL but no stored blob - may fail to load`),oe;return oe})):console.warn(" No clips array found, using provided blob URL (may be invalid)")}return k!==a&&ew(k),I!==p&&I.length>0&&S(I),()=>{if(Jn&&Jn.startsWith("blob:"))try{URL.revokeObjectURL(Jn)}catch{}p.forEach(ae=>{if(ae.url&&ae.url.startsWith("blob:"))try{URL.revokeObjectURL(ae.url)}catch{}})}},[a,e,Ur,g,i,n]),m.useEffect(()=>{(async()=>{try{const I=await t3("Gazetteer");i3(I),I.length>0&&a3(I[0])}catch(I){console.error("Error loading templates:",I)}})()},[]),!Jn)return console.error(" InstantFiltersPage - No videoUrl found!",{state:n,videoUrl:a,actualVideoUrl:Jn,location:window.location.href}),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-950",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No video found. Redirecting..."}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Check console for details"})]})});console.log(" InstantFiltersPage - Rendering preview with:",{videoUrl:Jn.substring(0,50),isImage:Ur,mediaType:g,hasVideoRef:!!U.current}),m.useEffect(()=>{if(!Jn)return;const k=U.current,I=ue.current;if(!k||!I){const ae=setTimeout(()=>{U.current&&ue.current},100);return()=>clearTimeout(ae)}let A=null;try{A=I.getContext("webgl")||I.getContext("experimental-webgl")}catch(ae){console.error("WebGL context error:",ae)}if(A)Sp(!0);else{Sp(!1);try{k.play().catch(()=>{})}catch{}return}fe.current=A;try{let ae=function(wn,An){const pn=A.createShader(wn);if(!pn)return null;if(A.shaderSource(pn,An),A.compileShader(pn),!A.getShaderParameter(pn,A.COMPILE_STATUS)){const Zi=A.getShaderInfoLog(pn);return console.error("Shader compile error:",Zi),A.deleteShader(pn),null}return pn},oe=function(wn){switch(wn){case"beauty":return 6;case"bw":return 1;case"sepia":return 2;case"vivid":return 3;case"cool":return 4;case"vignette":return 5;default:return 0}};const Q=`
attribute vec2 a_position;
attribute vec2 a_texCoord;
varying vec2 v_tex;
void main() {
  v_tex = vec2(a_texCoord.x, 1.0 - a_texCoord.y);
  gl_Position = vec4(a_position, 0.0, 1.0);
}`,ee=`
precision mediump float;
uniform sampler2D u_tex;
uniform sampler2D u_lut;
uniform float u_brightness;
uniform float u_contrast;
uniform float u_saturation;
uniform float u_hue;
uniform int u_mode; // 0 none, 1 bw, 2 sepia, 3 vivid, 4 cool, 5 vignette, 6 beauty
uniform vec2 u_resolution; // For beauty filter sampling
uniform int u_hasLut;
uniform float u_lutSize;  // e.g., 16.0
uniform float u_lutTiles; // e.g., 4.0 when 16 levels and 4x4 tiles
uniform float u_lutAmount; // 0..1 blend
varying vec2 v_tex;

vec3 rgb2hsv(vec3 c){
  vec4 K = vec4(0., -1./3., 2./3., -1.);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
  float d = q.x - min(q.w, q.y);
  float e = 1.0e-10;
  return vec3(abs(q.z + (q.w - q.y) / (6.*d + e)), d / (q.x + e), q.x);
}
vec3 hsv2rgb(vec3 c){
  vec4 K = vec4(1., 2./3., 1./3., 3.);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6. - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0., 1.), c.y);
}

void main(){
  vec4 tex = texture2D(u_tex, v_tex);
  vec3 col = tex.rgb;

  // hue/sat
  vec3 hsv = rgb2hsv(col);
  hsv.x = fract(hsv.x + u_hue); // hue rotate 0..1
  hsv.y *= u_saturation;
  col = hsv2rgb(hsv);

  // brightness/contrast
  col = (col - 0.5) * u_contrast + 0.5;
  col *= u_brightness;

  if (u_mode == 1) {
    float g = dot(col, vec3(0.299, 0.587, 0.114));
    col = vec3(g);
  } else if (u_mode == 2) {
    col = vec3(
      dot(col, vec3(0.393, 0.769, 0.189)),
      dot(col, vec3(0.349, 0.686, 0.168)),
      dot(col, vec3(0.272, 0.534, 0.131))
    );
  } else if (u_mode == 3) {
    col = clamp(col * vec3(1.1, 1.05, 1.2), 0.0, 1.0);
  } else if (u_mode == 4) {
    // cool tone by shifting hue slightly already covered; add slight blue boost
    col = clamp(col + vec3(-0.03, -0.01, 0.06), 0.0, 1.0);
  } else if (u_mode == 5) {
    vec2 uv = v_tex - 0.5;
    float d = length(uv) * 1.2;
    float vignette = smoothstep(1.0, u_brightness + 0.2 + 0.6, d);
    col *= (1.0 - vignette);
  } else if (u_mode == 6) {
    // Beauty filter: skin smoothing using simple gaussian-like blur
    vec2 texelSize = 1.0 / u_resolution;
    vec3 beauty = vec3(0.0);
    float total = 0.0;
    // Simple 3x3 kernel for skin smoothing
    for (int y = -1; y <= 1; y++) {
      for (int x = -1; x <= 1; x++) {
        vec2 offset = vec2(float(x), float(y)) * texelSize * 2.0;
        vec3 sample = texture2D(u_tex, v_tex + offset).rgb;
        // Weight by distance from center (gaussian-like)
        float weight = 1.0 / (1.0 + (abs(float(x)) + abs(float(y))) * 0.5);
        beauty += sample * weight;
        total += weight;
      }
    }
    beauty /= total;
    // Mix original with smoothed (70% smooth, 30% original for natural look)
    col = mix(col, beauty, 0.7);
    // Slight boost to skin tones (warm colors)
    col = mix(col, col * vec3(1.05, 1.02, 0.98), 0.3);
  }

  // 3D LUT sampling from tiled 2D texture (size x size tiles, each tile size x size)
  if (u_hasLut == 1 && u_lutAmount > 0.0) {
    float size = u_lutSize; // e.g., 16
    float tiles = u_lutTiles; // e.g., 4 when 16 levels
    // Clamp input color to [0,1]
    vec3 c = clamp(col, 0.0, 1.0);
    float blueIndex = c.b * (size - 1.0);
    float sliceX = mod(blueIndex, tiles);
    float sliceY = floor(blueIndex / tiles);
    // inner coords within tile (add half texel offset)
    vec2 tileScale = vec2(1.0 / (tiles * size));
    vec2 pix = c.rg * (size - 1.0) + 0.5;
    vec2 uv = (vec2(sliceX, sliceY) * size + pix) * tileScale;
    vec3 lutColor = texture2D(u_lut, uv).rgb;
    col = mix(col, lutColor, u_lutAmount);
  }

  gl_FragColor = vec4(col, tex.a);
}`,ce=ae(A.VERTEX_SHADER,Q),Fe=ae(A.FRAGMENT_SHADER,ee);if(!ce||!Fe)throw new Error("Failed to compile shaders");const Ee=A.createProgram();if(!Ee)throw new Error("Failed to create program");if(A.attachShader(Ee,ce),A.attachShader(Ee,Fe),A.linkProgram(Ee),!A.getProgramParameter(Ee,A.LINK_STATUS)){const wn=A.getProgramInfoLog(Ee);throw console.error("Program link error:",wn),A.deleteProgram(Ee),new Error("Failed to link program")}A.useProgram(Ee);const Te=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,Te),A.bufferData(A.ARRAY_BUFFER,new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),A.STATIC_DRAW);const We=A.getAttribLocation(Ee,"a_position"),mt=A.getAttribLocation(Ee,"a_texCoord");A.enableVertexAttribArray(We),A.enableVertexAttribArray(mt),A.vertexAttribPointer(We,2,A.FLOAT,!1,16,0),A.vertexAttribPointer(mt,2,A.FLOAT,!1,16,8);const wt=A.createTexture();A.bindTexture(A.TEXTURE_2D,wt),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE);const Wn=A.getUniformLocation(Ee,"u_brightness"),zr=A.getUniformLocation(Ee,"u_contrast"),kt=A.getUniformLocation(Ee,"u_saturation"),Vt=A.getUniformLocation(Ee,"u_hue"),on=A.getUniformLocation(Ee,"u_mode"),jn=A.getUniformLocation(Ee,"u_hasLut"),jt=A.getUniformLocation(Ee,"u_lutSize"),Ut=A.getUniformLocation(Ee,"u_lutTiles"),$r=A.getUniformLocation(Ee,"u_lutAmount"),Ji=A.getUniformLocation(Ee,"u_resolution");A.uniform1i(A.getUniformLocation(Ee,"u_tex"),0),A.uniform1i(A.getUniformLocation(Ee,"u_lut"),1);const Xe=()=>{const wn=I.parentElement;let An=I.clientWidth,pn=I.clientHeight;if(An===0||pn===0)if(wn){const Gs=wn.getBoundingClientRect();An=Gs.width||400,pn=Gs.height||711}else if(k.videoWidth>0&&k.videoHeight>0){const Gs=k.videoWidth/k.videoHeight;An=400,pn=An/Gs}else An=400,pn=711;if(An===0||pn===0){Ae.current=requestAnimationFrame(Xe);return}if((I.width!==An||I.height!==pn)&&(I.width=An,I.height=pn,A.viewport(0,0,An,pn)),k.readyState>=2&&k.videoWidth>0&&k.videoHeight>0)try{A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,wt),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,k)}catch(Gs){console.warn("WebGL texture update error (will retry):",Gs)}A.useProgram(Ee),A.uniform1f(Wn,B),A.uniform1f(zr,q),A.uniform1f(kt,X),A.uniform1f(Vt,z),A.uniform2f(Ji,An,pn);const Zi=oe(T);A.uniform1i(on,Zi),hn.current&&mn?(A.activeTexture(A.TEXTURE1),A.bindTexture(A.TEXTURE_2D,hn.current),A.uniform1i(jn,1),A.uniform1f(jt,mn.size),A.uniform1f(Ut,mn.tiles),A.uniform1f($r,cn),A.activeTexture(A.TEXTURE0)):(A.uniform1i(jn,0),A.uniform1f($r,0)),A.drawArrays(A.TRIANGLE_STRIP,0,4),Ae.current=requestAnimationFrame(Xe)},Gt=()=>{Ae.current==null&&(k.play().catch(()=>{}),Xe())};if(k.onloadedmetadata=Gt,k.onplay=Gt,k.readyState>=2)Gt();else try{k.play().catch(()=>{})}catch{}}catch(ae){console.error("WebGL initialization error:",ae),Sp(!1);try{const oe=U.current;oe&&oe.play().catch(()=>{})}catch{}}return()=>{Ae.current&&cancelAnimationFrame(Ae.current)}},[T,B,q,X,z,a,cn,mn]);async function o3(k){var oe;const I=(oe=k.target.files)==null?void 0:oe[0];if(!I)return;const A=URL.createObjectURL(I),ae=new Image;ae.crossOrigin="anonymous",ae.onload=()=>{const Q=fe.current;if(!Q)return;const ee=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,ee),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE);try{Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,0)}catch{}Q.texImage2D(Q.TEXTURE_2D,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,ae),hn.current=ee;const ce=ae.width;let Fe=16;ce%32===0&&(Fe=32);const Ee=Math.sqrt(ce/Fe),Te=Number.isFinite(Ee)&&Math.round(Ee)===Ee;Ki(Te?{size:Fe,tiles:Ee}:{size:16,tiles:4}),jr.current=ae,URL.revokeObjectURL(A)},ae.onerror=()=>URL.revokeObjectURL(A),ae.src=A}function l3(k){if(s3(k),!k.url){hn.current=null,Ki(null);return}const I=new Image;I.crossOrigin="anonymous",I.onload=()=>{const A=fe.current;if(!A)return;const ae=A.createTexture();A.bindTexture(A.TEXTURE_2D,ae),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE);try{A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,0)}catch{}if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,I),hn.current=ae,k.size&&k.tiles)Ki({size:k.size,tiles:k.tiles});else{const oe=I.width;let Q=16;oe%32===0&&(Q=32);const ee=Math.sqrt(oe/Q),ce=Number.isFinite(ee)&&Math.round(ee)===ee;Ki(ce?{size:Q,tiles:ee}:{size:16,tiles:4})}},I.onerror=()=>{console.warn("Failed to load LUT:",k.url),hn.current=null,Ki(null),Sr(0)},I.src=k.url}async function c3(){if(!ue.current||!U.current)return null;ut(null),de(!0);const k=ue.current,I=U.current;try{I.currentTime=0;const A=I.loop;I.loop=!1,await new Promise(Xe=>{I.readyState>=2?Xe(null):I.onloadeddata=()=>Xe(null)}),await I.play(),await new Promise(Xe=>{if(!I.paused&&I.currentTime>0){Xe();return}const Gt=setInterval(()=>{!I.paused&&I.currentTime>0&&(clearInterval(Gt),Xe())},100);setTimeout(()=>{clearInterval(Gt),Xe()},1e3)}),I.paused&&(console.warn("Video failed to play, retrying..."),await I.play().catch(Xe=>{throw console.error("Video play error:",Xe),new Error("Video failed to play")})),console.log("Video is playing",{currentTime:I.currentTime,paused:I.paused,readyState:I.readyState});let ae=0;const oe=30;if(await new Promise(Xe=>{const Gt=()=>{const wn=fe.current,An=Ae.current!==null,pn=I.readyState>=2&&I.videoWidth>0&&I.videoHeight>0,Zi=!I.paused&&I.currentTime>0;if(An&&pn&&Zi&&(ae++,ae>=5)){console.log("WebGL render loop is running, video is ready, starting export"),Xe();return}if(ae>=oe){console.warn("Timeout waiting for WebGL to be ready, proceeding anyway"),Xe();return}requestAnimationFrame(Gt)};setTimeout(()=>Gt(),100)}),I.paused)throw new Error("Video is not playing, cannot export");console.log("Video is ready for export",{readyState:I.readyState,videoWidth:I.videoWidth,videoHeight:I.videoHeight,canvasWidth:k.width,canvasHeight:k.height});const Q=cn,ee=mn;(cn>0||mn)&&console.log("Temporarily disabling LUT during export to prevent timeout");const ce=isFinite(I.duration)&&I.duration>0?I.duration:60,Fe=Math.min(ce*3e3,6e4);if(console.log("Export starting",{videoDuration:ce,maxExportTime:Fe,hasLut:!!mn,lutAmount:cn}),console.log("Exporting WebGL canvas (color filters only, AR filters skipped during export)"),console.log("Exporting WebGL canvas directly"),console.log("Canvas state before export:",{width:k.width,height:k.height,renderLoopActive:Ae.current!==null,videoPlaying:!I.paused,videoCurrentTime:I.currentTime}),Ae.current===null&&(console.warn("Render loop not running, attempting to start..."),I.readyState>=2)){const Xe=()=>{if(!fe.current||!U.current||!ue.current)return;const wn=U.current,An=ue.current}}const Ee=k.captureStream(24);console.log("Stream created:",{active:Ee.active,id:Ee.id,getTracks:Ee.getVideoTracks().length});const Te=Ee.getVideoTracks();if(Te.length===0)throw console.error("Stream has no video tracks!"),new Error("Export stream has no video tracks");console.log("Stream has",Te.length,"video track(s)");const We=[];let mt="video/webm;codecs=vp9";MediaRecorder.isTypeSupported(mt)||(mt="video/webm;codecs=vp8"),MediaRecorder.isTypeSupported(mt)||(mt="video/webm");const wt=new MediaRecorder(Ee,{mimeType:mt,videoBitsPerSecond:14e5});let Wn=0;wt.ondataavailable=Xe=>{Xe.data&&Xe.data.size>0&&(We.push(Xe.data),Wn++,console.log(`Chunk ${Wn} received:`,Xe.data.size,"bytes, total chunks:",We.length))};const zr=new Promise(Xe=>{wt.onstop=()=>{console.log("MediaRecorder stopped, chunks:",We.length),Xe()}}),kt=setTimeout(()=>{console.warn("Export timeout, stopping MediaRecorder"),wt.state!=="inactive"&&wt.stop()},Fe);wt.start(1e3),console.log("MediaRecorder started",{mimeType:mt,state:wt.state,videoTracks:Ee.getVideoTracks().length,audioTracks:Ee.getAudioTracks().length,streamActive:Ee.active}),I.paused&&(console.log("Video was paused, resuming..."),await I.play());const Vt=setTimeout(()=>{Wn===0&&wt.state==="recording"&&(console.error("No chunks received after 3 seconds - export may be failing"),console.log("Video state:",{paused:I.paused,currentTime:I.currentTime,readyState:I.readyState,ended:I.ended}),console.log("Canvas state:",{width:k.width,height:k.height,renderLoop:Ae.current!==null}))},3e3),on=()=>{console.log("Video ended, stopping export"),clearTimeout(kt),clearTimeout(Vt),wt.state!=="inactive"&&(wt.requestData(),wt.stop())};I.addEventListener("ended",on,{once:!0});const jn=setInterval(()=>{I.paused&&!I.ended&&(console.warn("Video paused during export, resuming..."),I.play().catch(Xe=>console.error("Failed to resume video:",Xe))),(I.ended||I.currentTime>=ce-.1&&ce>0)&&(clearInterval(jn),clearTimeout(kt),clearTimeout(Vt),wt.state!=="inactive"&&(wt.requestData(),wt.stop()))},100);if(await zr,clearTimeout(kt),clearInterval(jn),console.log("Export finished",{chunks:We.length,totalSize:We.reduce((Xe,Gt)=>Xe+(Gt instanceof Blob?Gt.size:Gt.length||0),0),videoDuration:ce,videoEnded:I.ended}),We.length===0)throw console.error("No chunks recorded"),new Error("Export failed: No video data recorded");const jt=We.reduce((Xe,Gt)=>Xe+(Gt instanceof Blob?Gt.size:Gt.length||0),0);if(jt<1e3)throw console.error("Export chunks too small:",jt),new Error("Export failed: Video data too small");const Ut=new Blob(We,{type:mt});if(Ut.size<1e3)throw console.error("Export blob too small:",Ut.size),new Error("Export failed: Blob too small");const $r=URL.createObjectURL(Ut);console.log("Export complete successfully",{blobSize:Ut.size,url:$r.substring(0,50)+"...",chunks:We.length,mimeType:mt});const Ji=document.createElement("video");return Ji.src=$r,Ji.onerror=()=>{console.error("Exported blob URL is invalid"),URL.revokeObjectURL($r)},ut($r),$r}catch(A){return console.error(A),null}finally{U.current&&(U.current.loop=wasLooping),de(!1)}}function d3(){const k=[];return T==="bw"?k.push("grayscale(1)"):T==="sepia"?k.push("sepia(0.8)"):T==="vivid"?k.push("saturate(1.6) contrast(1.1)"):T==="cool"&&k.push("hue-rotate(200deg) saturate(1.2)"),B!==1&&k.push(`brightness(${B})`),q!==1&&k.push(`contrast(${q})`),X!==1&&k.push(`saturate(${X})`),z!==0&&k.push(`hue-rotate(${z*360}deg)`),k.join(" ")}async function u3(){try{const k=U.current;if(!k)return null;await new Promise(jt=>{if(k.readyState>=1)return jt();const Ut=()=>{k.removeEventListener("loadedmetadata",Ut),jt()};k.addEventListener("loadedmetadata",Ut),setTimeout(()=>{k.removeEventListener("loadedmetadata",Ut),jt()},2e3)});const I=document.createElement("canvas"),A=k.videoWidth||720,ae=k.videoHeight||1280,oe=Math.max(A,ae),Q=oe>720?720/oe:1;I.width=Math.round(A*Q),I.height=Math.round(ae*Q);const ee=I.getContext("2d");if(!ee)return null;const ce=d3(),Fe=I.captureStream(24);let Ee="video/webm;codecs=vp9";MediaRecorder.isTypeSupported(Ee)||(Ee="video/webm;codecs=vp8"),MediaRecorder.isTypeSupported(Ee)||(Ee="video/webm");const Te=new MediaRecorder(Fe,{mimeType:Ee,videoBitsPerSecond:12e5}),We=[];Te.ondataavailable=jt=>{jt.data&&jt.data.size>0&&We.push(jt.data)};const mt=new Promise(jt=>{Te.onstop=()=>jt()});let wt=-1,Wn=!1;const zr=()=>{if(!(!ee||!k)&&!Wn){if(k.currentTime!==wt&&(ee.filter=ce||"none",ee.drawImage(k,0,0,I.width,I.height),wt=k.currentTime),k.ended){Wn=!0,Te.state!=="inactive"&&Te.stop();return}requestAnimationFrame(zr)}};k.currentTime=0,k.loop=!1,Te.start(500),await k.play(),requestAnimationFrame(zr);const kt=isFinite(k.duration)&&k.duration>0?k.duration:10,Vt=setTimeout(()=>{Te.state==="recording"&&Te.stop()},Math.min(2e4,kt*2e3));if(await mt,clearTimeout(Vt),We.length===0)return null;const on=new Blob(We,{type:Ee});if(on.size<1e3)return null;const jn=URL.createObjectURL(on);return ut(jn),jn}catch(k){return console.error("Canvas2D export failed:",k),null}}function Gu(){return T!=="none"||B!==1||q!==1||X!==1||z!==0||cn>0}function f3(){return at||a||null}async function h3(){if(a)try{const k=f3();if(!k)return;await OY({videoUrl:k,videoDuration:i||0}),await $e.fire({title:"Saved to Drafts!",html:`
                  <div style="text-align: center; padding: 20px 0;">
                    <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                      Your video has been saved. You can find it in your profile page.
                    </p>
                  </div>
                `,showConfirmButton:!0,confirmButtonText:"Done",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff",customClass:{popup:"instagram-style-modal",title:"instagram-modal-title",htmlContainer:"instagram-modal-content",confirmButton:"instagram-confirm-btn",actions:"instagram-modal-actions"},buttonsStyling:!0,timer:3e3,timerProgressBar:!1}),e("/feed")}catch(k){console.error("Error saving draft:",k),$e.fire({title:"Failed to Save",html:`
                  <div style="text-align: center; padding: 20px 0;">
                    <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                      There was an error saving your draft. Please try again.
                    </p>
                  </div>
                `,showConfirmButton:!0,confirmButtonText:"OK",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff",customClass:{popup:"instagram-style-modal",title:"instagram-modal-title",htmlContainer:"instagram-modal-content",confirmButton:"instagram-confirm-btn",actions:"instagram-modal-actions"},buttonsStyling:!0})}}async function m3(){var I,A,ae,oe,Q;if(!a||!t)return;let k=Z||(r==null?void 0:r.voiceoverUrl);if(F&&!k)try{const{uploadFile:ee}=await En(()=>Promise.resolve().then(()=>ao),void 0),ce=new File([F],"voiceover.webm",{type:"audio/webm"}),Fe=await ee(ce);Fe.success&&Fe.fileUrl&&(k=Fe.fileUrl,console.log(" Voice-over uploaded to server:",k))}catch(ee){console.error("Failed to upload voice-over:",ee)}$e.fire({title:"Processing...",html:`
              <div style="text-align: center; padding: 20px 0;">
                <div class="spinner" style="border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid #0095f6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                  Applying filters and preparing your video...
                </p>
              </div>
            `,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,background:"#262626",color:"#ffffff",didOpen:()=>{$e.showLoading()}});try{let ee=at;if(Gu()){de(!0);const kt=U.current;if(!kt){de(!1),await $e.close(),$e.fire({title:"Error",text:"Video not ready for export.",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff"});return}$e.update({html:`
                      <div style="text-align: center; padding: 20px 0;">
                        <div class="spinner" style="border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid #0095f6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                        <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                          Exporting video with filters...
                        </p>
                      </div>
                    `}),await kt.play().catch(()=>{});const Vt=kt.duration&&isFinite(kt.duration)?kt.duration:5,on=Math.min(3e4,Math.max(5e3,Vt*5e3));if(console.log("Exporting video with filters:",{hasFilters:Gu(),active:T,brightness:B,contrast:q,saturation:X,webglOk:Yi,videoReady:kt.readyState>=2,videoWidth:kt.videoWidth,videoHeight:kt.videoHeight}),ee=null,Yi&&ue.current){console.log("Using WebGL export");const jn=c3(),jt=new Promise(Ut=>setTimeout(()=>Ut(null),on));ee=await Promise.race([jn,jt]),console.log("WebGL export result:",ee?"success":"failed")}if(!ee){console.log("Using 2D canvas export");const jn=u3(),jt=new Promise(Ut=>setTimeout(()=>Ut(null),on));ee=await Promise.race([jn,jt]),console.log("2D canvas export result:",ee?"success":"failed")}de(!1),ee?console.log("Export successful, using exported video with filters"):(console.error("Export failed completely, using original video (filters will NOT be applied)"),await $e.close(),$e.fire({title:"Export Failed",text:"Could not export video with filters. Uploading original video.",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff",timer:3e3}))}let ce=ee||a;if(console.log("Final video URL for upload:",ce===a?"original (no filters)":"exported (with filters)"),ce&&(ce.startsWith("http://")||ce.startsWith("https://")))console.log(" Video already uploaded to backend, using URL:",ce);else if(ce&&ce.startsWith("blob:")){console.log(" Uploading blob URL video to backend...",ce.substring(0,50));try{const kt=p&&p.length>0?p[0]:null;let Vt;if(kt&&kt.blob)Vt=kt.blob,console.log(" Using blob reference from clip, size:",Vt.size);else{console.warn(" No blob reference found, trying to fetch from blob URL...");const Ut=await fetch(ce);if(!Ut.ok)throw new Error(`Failed to fetch blob: ${Ut.status} ${Ut.statusText}. Blob URL may be revoked.`);Vt=await Ut.blob(),console.log(" Fetched blob from URL, size:",Vt.size)}const on=new File([Vt],`video-${Date.now()}.webm`,{type:Vt.type}),{uploadFile:jn}=await En(()=>Promise.resolve().then(()=>ao),void 0),jt=await jn(on);if(jt.success&&jt.fileUrl)ce=jt.fileUrl,console.log(" Video uploaded to backend:",ce);else throw new Error("Upload failed - no fileUrl in response")}catch(kt){console.error(" Failed to upload video to backend:",kt),await $e.close();let Vt=kt instanceof Error?kt.message:"Please try again.",on="Upload Error";(Vt.includes("413")||Vt.includes("too large")||Vt.includes("Content Too Large"))&&(on="File Too Large for Upload",Vt=`The video file is too large to upload.

 FFmpeg WILL compress the video during rendering (this happens automatically).

 But we need to upload the raw video first, and PHP limits are too low:
    upload_max_filesize = 2M (needs 100M)
    post_max_size = 8M (needs 100M)

 To fix:
1. Edit php.ini:
   upload_max_filesize = 100M
   post_max_size = 100M

2. Restart: Stop (Ctrl+C) then run: php artisan serve

After that, the upload will work and FFmpeg will compress it automatically.`),$e.fire({title:on,html:`
                          <div style="text-align: center; padding: 20px 0;">
                            <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0; white-space: pre-line;">
                              ${Vt}
                            </p>
                          </div>
                        `,confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff",width:"500px"});return}}else if(ce&&ce.startsWith("data:")){console.log(" Converting data URL to file and uploading to backend...",ce.substring(0,50));try{const Vt=await(await fetch(ce)).blob(),on=new File([Vt],`video-${Date.now()}.webm`,{type:Vt.type}),{uploadFile:jn}=await En(()=>Promise.resolve().then(()=>ao),void 0),jt=await jn(on);if(jt.success&&jt.fileUrl)ce=jt.fileUrl,console.log(" Video uploaded to backend:",ce);else throw new Error("Upload failed - no fileUrl in response")}catch(kt){console.error(" Failed to upload data URL video to backend:",kt),await $e.close(),$e.fire({title:"Upload Error",html:`
                          <div style="text-align: center; padding: 20px 0;">
                            <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                              Failed to upload video.<br/>
                              Please try again.
                            </p>
                          </div>
                        `,confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff"});return}}else ce&&console.log(" Video URL ready:",ce.substring(0,50));if(ce&&(ce.startsWith("blob:")||ce.startsWith("data:"))){console.error(" CRITICAL: Blob/Data URL still present after upload attempt!",ce.substring(0,50)),$e.fire({title:"Upload Error",text:"Video upload failed. The video file could not be uploaded to the server. Please try again.",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff"});return}if(p.length===0&&!ce){$e.fire({title:"Error",text:"No video available to upload.",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff"});return}if($e.update({html:`
                  <div style="text-align: center; padding: 20px 0;">
                    <div class="spinner" style="border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid #0095f6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                    <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                      ${p.length>0?"Preparing clips...":"Uploading to news feed..."}
                    </p>
                  </div>
                `}),console.log(" About to create post with URL:",{urlType:ce.startsWith("blob:")?"blob":ce.startsWith("data:")?"data":"http",urlPreview:ce.substring(0,100),urlLength:ce.length,isBlob:ce.startsWith("blob:"),isData:ce.startsWith("data:")}),ce.startsWith("blob:")){console.error(" REFUSING to create post with blob URL - it will be revoked!"),$e.fire({title:"Upload Error",text:"Cannot upload video with temporary URL. Please try recording again.",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff"});return}let Fe;if(p.length>0){const kt=[];let Vt=0,on=0;const jn=Xe=>{switch(Xe){case"bw":return"B&W";case"sepia":return"Sepia";case"vivid":return"Vivid";case"cool":return"Cool";case"vignette":return"Vignette";case"beauty":return"Beauty";default:return"None"}},jt=Gu()?jn(T):"None";let Ut=Z||(r==null?void 0:r.voiceoverUrl);if(F&&!Ut)try{const{uploadFile:Xe}=await En(()=>Promise.resolve().then(()=>ao),void 0),Gt=new File([F],"voiceover.webm",{type:"audio/webm"}),wn=await Xe(Gt);wn.success&&wn.fileUrl&&(Ut=wn.fileUrl,console.log(" Voice-over uploaded to server:",Ut))}catch(Xe){console.error("Failed to upload voice-over:",Xe)}$e.update({html:`
                      <div style="text-align: center; padding: 20px 0;">
                        <div class="spinner" style="border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid #0095f6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                        <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                          Uploading ${p.length} clip${p.length>1?"s":""} to server...
                        </p>
                      </div>
                    `});const{uploadFile:$r}=await En(()=>Promise.resolve().then(()=>ao),void 0),Ji=[];for(let Xe=0;Xe<p.length;Xe++){const Gt=p[Xe];let wn=Gt.url;if(Gt.blob)try{const An=new File([Gt.blob],`clip-${Xe}-${Date.now()}.${Gt.mediaType==="image"?"jpg":"webm"}`,{type:Gt.mediaType==="image"?"image/jpeg":"video/webm"}),pn=await $r(An);if(pn.success&&pn.fileUrl)wn=pn.fileUrl,console.log(` Uploaded clip ${Xe+1}/${p.length} to server:`,wn.substring(0,50));else throw new Error("Upload failed")}catch(An){console.error(` Failed to upload clip ${Xe+1}:`,An),$e.fire({title:"Upload Error",text:`Failed to upload clip ${Xe+1}. Please try again.`,confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff"});return}else if(wn.startsWith("blob:")||wn.startsWith("data:"))try{const pn=await(await fetch(wn)).blob(),Zi=new File([pn],`clip-${Xe}-${Date.now()}.${Gt.mediaType==="image"?"jpg":"webm"}`,{type:pn.type}),Gs=await $r(Zi);if(Gs.success&&Gs.fileUrl)wn=Gs.fileUrl,console.log(` Uploaded clip ${Xe+1}/${p.length} to server:`,wn.substring(0,50));else throw new Error("Upload failed")}catch(An){console.error(` Failed to upload clip ${Xe+1}:`,An),$e.fire({title:"Upload Error",text:`Failed to upload clip ${Xe+1}. Please try again.`,confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff"});return}(wn.startsWith("http://")||wn.startsWith("https://"))&&Ji.push({...Gt,url:wn})}for(const Xe of Ji){const Gt=Math.min((Xe.trimEnd-Xe.trimStart)/Xe.speed,90-on);if(Gt<=0||(kt.push({id:Xe.id,mediaUrl:Xe.url,type:Xe.mediaType||"video",startTime:Vt,duration:Gt,trimStart:Xe.trimStart,trimEnd:Xe.trimEnd,speed:Xe.speed,reverse:Xe.reverse,originalDuration:Xe.duration,filters:Gu()?{name:jt,brightness:B,contrast:q,saturation:X,hue:z,lut:cn>0&&Hu.id!=="none"?{name:Hu.name,url:Hu.url,amount:cn,size:mn==null?void 0:mn.size,tiles:mn==null?void 0:mn.tiles}:void 0}:void 0}),Vt+=Gt,on+=Gt,on>=90))break}Fe={clips:kt,transitions:Wt.length>0?Wt:[],overlays:[],voiceoverUrl:Ut||(n==null?void 0:n.voiceoverUrl),musicUrl:Mn||void 0,musicVolume:Mn?ur:void 0,videoVolume:j?Xr:0,greenScreen:n!=null&&n.greenScreenEnabled?{enabled:!0,backgroundUrl:n==null?void 0:n.greenScreenBackgroundUrl}:void 0,totalDuration:on},console.log(" Multi-clip editTimeline created:",{clipCount:kt.length,totalDuration:on,clips:kt.map(Xe=>({id:Xe.id.substring(0,10),mediaUrl:Xe.mediaUrl.substring(0,50),duration:Xe.duration,speed:Xe.speed,reverse:Xe.reverse}))})}const Ee=(n==null?void 0:n.musicTrackId)||window.selectedMusicTrackId||void 0,Te=Ee?typeof Ee=="string"?parseInt(Ee,10):Ee:void 0,We=await yc(t.id,t.handle,"","",ce,"video",void 0,void 0,t.local,t.regional,t.national,void 0,($o==null?void 0:$o.id)||void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Fe,Te);console.log(" Post created, verifying URL:",{postId:We.id.substring(0,30),mediaUrl:((I=We.mediaUrl)==null?void 0:I.substring(0,50))||"undefined",mediaUrlType:(A=We.mediaUrl)!=null&&A.startsWith("blob:")?"blob":(ae=We.mediaUrl)!=null&&ae.startsWith("data:")?"data":"http",mediaItems:(oe=We.mediaItems)==null?void 0:oe.map(kt=>{var Vt,on,jn;return{type:kt.type,urlType:(Vt=kt.url)!=null&&Vt.startsWith("blob:")?"blob":(on=kt.url)!=null&&on.startsWith("data:")?"data":"http",urlPreview:(jn=kt.url)==null?void 0:jn.substring(0,50)}})});const mt=We.renderJobId||We.render_job_id,wt=We.finalVideoUrl||We.mediaUrl||ce;console.log(" === POST CREATED EVENT DEBUG (InstantFiltersPage) ==="),console.log("renderJobId:",mt),console.log("postId:",We.id),console.log("backendVideoUrl:",wt==null?void 0:wt.substring(0,50),"type:",wt!=null&&wt.startsWith("blob:")?"blob":wt!=null&&wt.startsWith("data:")?"data":"http"),console.log("newPost object:",{id:We.id.substring(0,30),mediaUrl:(Q=We.mediaUrl)==null?void 0:Q.substring(0,50),mediaType:We.mediaType,hasMediaItems:!!We.mediaItems});const Wn=mt?{postId:We.id,renderJobId:mt,videoUrl:wt||""}:{postId:We.id};console.log(" === DISPATCHING postCreated EVENT ==="),console.log("Event detail:",Wn),console.log("Has renderJobId:",!!mt);const zr=new CustomEvent("postCreated",{detail:Wn,bubbles:!0,cancelable:!0});window.dispatchEvent(zr),console.log(" postCreated event dispatched successfully"),console.log("Event defaultPrevented:",zr.defaultPrevented),await new Promise(kt=>setTimeout(kt,200)),await $e.close(),await $e.fire({title:"Posted!",html:`
                  <div style="text-align: center; padding: 20px 0;">
                    <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                      Your video has been posted to the news feed.
                    </p>
                  </div>
                `,showConfirmButton:!0,confirmButtonText:"Done",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff",customClass:{popup:"instagram-style-modal",title:"instagram-modal-title",htmlContainer:"instagram-modal-content",confirmButton:"instagram-confirm-btn",actions:"instagram-modal-actions"},buttonsStyling:!0,timer:2e3,timerProgressBar:!1}),e("/feed")}catch(ee){console.error("Error uploading post:",ee),$e.fire({title:"Failed to Upload",html:`
                  <div style="text-align: center; padding: 20px 0;">
                    <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                      There was an error uploading your video. Please try again.
                    </p>
                  </div>
                `,showConfirmButton:!0,confirmButtonText:"OK",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff",customClass:{popup:"instagram-style-modal",title:"instagram-modal-title",htmlContainer:"instagram-modal-content",confirmButton:"instagram-confirm-btn",actions:"instagram-modal-actions"}})}}const nw=k=>{qi(dn===k?null:k)};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                @keyframes slideUp {
                    from {
                        transform: translateY(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }
                .slider-thumb::-webkit-slider-thumb {
                    appearance: none;
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
                    border: 2px solid rgba(255, 255, 255, 0.9);
                    cursor: pointer;
                    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.5), 0 0 0 4px rgba(139, 92, 246, 0.1);
                    transition: all 0.2s ease;
                }
                .slider-thumb::-webkit-slider-thumb:hover {
                    transform: scale(1.1);
                    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.7), 0 0 0 6px rgba(139, 92, 246, 0.15);
                }
                .slider-thumb::-webkit-slider-thumb:active {
                    transform: scale(0.95);
                }
                .slider-thumb::-moz-range-thumb {
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
                    border: 2px solid rgba(255, 255, 255, 0.9);
                    cursor: pointer;
                    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.5);
                    transition: all 0.2s ease;
                }
                .slider-thumb::-moz-range-thumb:hover {
                    transform: scale(1.1);
                    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.7);
                }
                .category-sheet {
                    animation: slideUp 0.3s ease-out;
                }
                .scrollbar-hide {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
                .scrollbar-hide::-webkit-scrollbar {
                    display: none;
                }
                .custom-scrollbar {
                    scrollbar-width: thin;
                    scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
                }
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: rgba(255, 255, 255, 0.3);
                    border-radius: 3px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: rgba(255, 255, 255, 0.5);
                }
                @keyframes shimmerGradient {
                    0% {
                        background-position: 0% 0%;
                    }
                    100% {
                        background-position: 100% 0%;
                    }
                }
                @keyframes spin-slow {
                    from {
                        transform: rotate(0deg);
                    }
                    to {
                        transform: rotate(360deg);
                    }
                }
                .animate-spin-slow {
                    animation: spin-slow 3s linear infinite;
                }
                @keyframes pulse-glow {
                    0%, 100% {
                        box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
                    }
                    50% {
                        box-shadow: 0 0 0 8px rgba(255, 255, 255, 0);
                    }
                }
                .animate-pulse-glow {
                    animation: pulse-glow 2s ease-in-out infinite;
                }
            `}),s.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col z-50",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 bg-gradient-to-b from-black/80 to-transparent p-4 flex items-center justify-between",children:[s.jsx("button",{onClick:()=>e("/create/instant"),className:"p-2 rounded-full bg-black/50 backdrop-blur-sm text-white hover:bg-black/70 transition-colors",children:s.jsx(pt,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("h1",{className:"text-white text-lg font-bold",children:"Edit Video"}),s.jsx("p",{className:"text-white/60 text-xs",children:"Tap categories below to edit"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[$o&&s.jsx("div",{className:"px-3 py-1 bg-black/60 backdrop-blur-sm text-white text-xs font-semibold rounded-full",children:$o.name}),s.jsxs("button",{onClick:h3,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-700/90 backdrop-blur-sm text-white font-semibold hover:bg-gray-600 transition-all shadow-lg",children:[s.jsx(xU,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Save Draft"})]}),s.jsxs("button",{onClick:m3,disabled:ot||he,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 text-white font-semibold hover:from-blue-500 hover:to-blue-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[s.jsx(np,{className:"w-4 h-4"}),s.jsx("span",{children:"Upload to Newsfeed"})]})]})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center relative overflow-hidden pt-16 pb-40",style:{minHeight:0},children:s.jsx("div",{className:"relative w-full h-full max-w-md mx-auto",style:{minHeight:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:$o?s.jsx("div",{className:"relative aspect-[9/16] w-full rounded-lg overflow-hidden bg-gray-900 border border-white/20",children:s.jsxs("div",{className:"absolute inset-0 bg-black",children:[Ur?s.jsx("img",{src:Jn,alt:"Preview",className:"w-full h-full object-contain",style:{filter:T==="bw"?"grayscale(1)":T==="sepia"?"sepia(0.8)":T==="vivid"?"saturate(1.6) contrast(1.1)":T==="cool"?"hue-rotate(200deg) saturate(1.2)":"none",display:"block"},onLoad:()=>{console.log(" Image loaded in template preview")},onError:k=>{console.error(" Error loading image in template:",k)}}):s.jsx("video",{ref:U,src:Jn,playsInline:!0,muted:!1,volume:Xr,loop:!0,className:"w-full h-full object-contain cursor-pointer",onClick:k=>{k.stopPropagation();const I=U.current;I&&(I.paused?I.play().catch(A=>console.error("Error playing video:",A)):I.pause())},style:{filter:T==="bw"?"grayscale(1)":T==="sepia"?"sepia(0.8)":T==="vivid"?"saturate(1.6) contrast(1.1)":T==="cool"?"hue-rotate(200deg) saturate(1.2)":"none",display:"block"},onLoadedMetadata:()=>{const k=U.current;k&&ge(k.duration||0),console.log(" Video metadata loaded (template):",{duration:k==null?void 0:k.duration,videoWidth:k==null?void 0:k.videoWidth,videoHeight:k==null?void 0:k.videoHeight})},onTimeUpdate:()=>{const k=U.current;k&&Ct(k.currentTime||0)},onCanPlay:()=>{U.current,console.log(" Video can play (template)")},onLoadedData:()=>{U.current,console.log(" Video data loaded (template)")},onError:k=>{console.error(" Video error (template):",k),console.error("Video src:",Jn)},onPlay:()=>{console.log(" Video started playing (template)")}}),s.jsx("canvas",{ref:ue,className:Yi?"w-full h-full object-cover":"hidden",style:{display:Yi?"block":"none",width:"100%",height:"100%"}}),(()=>{var A,ae,oe,Q;if(console.log(" TEMPLATE MODE - Sticker render section",{stickersLength:De.length,containerSize:Ye,hasVideoContainer:!!st.current,hasVideoRef:!!U.current}),De.length===0)return null;const k=((A=st.current)==null?void 0:A.offsetWidth)||((ae=U.current)==null?void 0:ae.videoWidth)||400,I=((oe=st.current)==null?void 0:oe.offsetHeight)||((Q=U.current)==null?void 0:Q.videoHeight)||400;return s.jsx(s.Fragment,{children:De.map(ee=>{const ce=gt||0,Fe=ee.startTime??0,Ee=ee.endTime??(ne||i||90);return!(ce>=Fe&&ce<=Ee)||k===0&&I===0?null:s.jsx(Oa,{overlay:ee,onUpdate:We=>{Ce(De.map(mt=>mt.id===ee.id?We:mt))},onRemove:()=>{Ce(De.filter(We=>We.id!==ee.id)),Ft===ee.id&&Tt(null)},isSelected:Ft===ee.id,onSelect:()=>Tt(ee.id),containerWidth:k,containerHeight:I},ee.id)})})})()]})}):s.jsxs("div",{className:"relative w-full h-full rounded-lg overflow-hidden bg-gray-900",style:{minHeight:"400px"},children:[Ur?s.jsx("img",{src:Jn,alt:"Preview",className:"w-full h-full object-contain",style:{filter:T==="bw"?"grayscale(1)":T==="sepia"?"sepia(0.8)":T==="vivid"?"saturate(1.6) contrast(1.1)":T==="cool"?"hue-rotate(200deg) saturate(1.2)":"none",display:"block",maxWidth:"100%",maxHeight:"100%"},onLoad:()=>{console.log(" Image loaded successfully and visible")},onError:k=>{console.error(" Error loading image:",k)}}):s.jsxs("div",{ref:st,className:"relative w-full h-full",onLoad:()=>{st.current&&Bt({width:st.current.offsetWidth,height:st.current.offsetHeight})},children:[s.jsx("video",{ref:U,src:p.length>1&&((rw=p[Xi])==null?void 0:rw.url)||Jn,playsInline:!0,muted:!1,volume:Xr,loop:p.length<=1,autoPlay:!0,className:"w-full h-full object-contain",style:{filter:T==="bw"?"grayscale(1)":T==="sepia"?"sepia(0.8)":T==="vivid"?"saturate(1.6) contrast(1.1)":T==="cool"?"hue-rotate(200deg) saturate(1.2)":"none",display:"block"},onLoadedMetadata:()=>{const k=U.current;if(k&&ge(k.duration||0),st.current){const I=st.current.offsetWidth,A=st.current.offsetHeight;I>0&&A>0&&(Bt({width:I,height:A}),console.log(" Container size from video metadata:",{width:I,height:A}))}console.log(" Video metadata loaded:",{duration:k==null?void 0:k.duration,videoWidth:k==null?void 0:k.videoWidth,videoHeight:k==null?void 0:k.videoHeight,readyState:k==null?void 0:k.readyState,clipIndex:p.length>1?Xi:"single"})},onTimeUpdate:()=>{const k=U.current;k&&Ct(k.currentTime||0)},onCanPlay:()=>{if(U.current,console.log(" Video can play"),st.current){const k=st.current.offsetWidth,I=st.current.offsetHeight;k>0&&I>0&&(Bt({width:k,height:I}),console.log(" Container size from canPlay:",{width:k,height:I}))}},onLoadedData:()=>{U.current,console.log(" Video data loaded")},onError:k=>{var I;console.error(" Video error:",k),console.error("Video src:",p.length>1?(I=p[Xi])==null?void 0:I.url:Jn),console.error("Video element:",U.current)},onPlay:()=>{console.log(" Video started playing")}}),(()=>(console.log(" STICKER RENDER SECTION CALLED",{stickersLength:De.length,containerSize:Ye,hasVideoContainer:!!st.current,hasVideoRef:!!U.current,isImage:Ur,webglOk:Yi}),De.length===0?(console.log(" No stickers to render"),null):s.jsx(s.Fragment,{children:De.map(k=>{var ce,Fe,Ee,Te,We,mt;const I=gt||0,A=k.startTime??0,ae=k.endTime??(ne||i||90),oe=I>=A&&I<=ae,Q=Ye.width||((ce=st.current)==null?void 0:ce.offsetWidth)||((Fe=U.current)==null?void 0:Fe.videoWidth)||((Ee=U.current)==null?void 0:Ee.clientWidth)||400,ee=Ye.height||((Te=st.current)==null?void 0:Te.offsetHeight)||((We=U.current)==null?void 0:We.videoHeight)||((mt=U.current)==null?void 0:mt.clientHeight)||400;return console.log(` Processing sticker ${k.id} (${k.sticker.name}):`,{containerWidth:Q,containerHeight:ee,containerSize:Ye,videoContainerSize:st.current?{offsetWidth:st.current.offsetWidth,offsetHeight:st.current.offsetHeight}:"no container ref",videoSize:U.current?{videoWidth:U.current.videoWidth,videoHeight:U.current.videoHeight,clientWidth:U.current.clientWidth,clientHeight:U.current.clientHeight}:"no video ref",currentTime:I,startTime:A,endTime:ae,isVisible:oe,willRender:oe&&Q>0&&ee>0}),Q===0&&ee===0?(console.warn(` Sticker ${k.id} - Container size is 0, skipping render`),null):oe?(console.log(` Rendering sticker ${k.id} with size ${Q}x${ee}`),s.jsx(Oa,{overlay:k,onUpdate:wt=>{Ce(De.map(Wn=>Wn.id===k.id?wt:Wn))},onRemove:()=>{Ce(De.filter(wt=>wt.id!==k.id)),Ft===k.id&&Tt(null)},isSelected:Ft===k.id,onSelect:()=>Tt(k.id),containerWidth:Q,containerHeight:ee},k.id)):(console.log(` Sticker ${k.id} not visible (time: ${I.toFixed(2)}s, range: ${A.toFixed(2)}s-${ae.toFixed(2)}s)`),null)})})))(),p.length>1&&s.jsxs("div",{className:"absolute top-4 left-4 bg-black/70 backdrop-blur-sm px-3 py-1.5 rounded-lg text-white text-sm font-semibold",children:["Clip ",Xi+1," of ",p.length]})]}),s.jsx("canvas",{ref:ue,className:Yi?"w-full h-full object-cover":"hidden",style:{display:Yi?"block":"none",width:"100%",height:"100%"}})]})})}),s.jsxs("div",{className:"absolute bottom-24 left-0 right-0 z-40 px-4 py-3 bg-gradient-to-t from-black/95 via-black/90 to-transparent",children:[s.jsxs("div",{className:"relative h-16 bg-gray-800 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 flex",children:p.length>0?p.map((k,I)=>{const A=Math.round((k.trimEnd-k.trimStart)/k.speed),ae=p.reduce((ee,ce)=>ee+Math.round((ce.trimEnd-ce.trimStart)/ce.speed),0),oe=ae>0?A/ae*100:100/p.length,Q=k.mediaType==="image"||k.url.toLowerCase().includes(".jpg")||k.url.toLowerCase().includes(".png")||k.url.toLowerCase().includes(".jpeg");return s.jsx("div",{className:"border-r border-black/40 relative",style:{width:`${oe}%`},children:Q?s.jsx("img",{src:k.url,alt:`Clip ${I+1}`,className:"w-full h-full object-cover"}):s.jsx("video",{src:k.url,className:"w-full h-full object-cover",muted:!0,playsInline:!0})},k.id)}):Jn?Ur?s.jsx("img",{src:Jn,alt:"Video thumbnail",className:"w-full h-full object-cover"}):s.jsx("video",{src:Jn,className:"w-full h-full object-cover",muted:!0,playsInline:!0}):[1,2,3,4,5,6].map(k=>s.jsx("div",{className:"flex-1 bg-gray-700 border-r border-black/40"},k))}),ne>0&&s.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-red-500 pointer-events-none z-10",style:{left:`${Math.min(100,gt/ne*100)}%`}})]}),s.jsxs("div",{className:"text-right text-sm mt-1 opacity-70 text-white",children:[gt.toFixed(1)," / ",ne.toFixed(1),"s"]})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-black/40 backdrop-blur-xl border-t border-white/10 flex items-center justify-center z-40 pb-safe",children:s.jsx(hq,{icon:s.jsx(uU,{className:"w-6 h-6 text-white"}),label:"Edits Menu",onClick:()=>{dn?qi(null):nw("filters")},isActive:dn!==null,isEditsMenu:!0})}),dn&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60]",onClick:()=>qi(null)}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[70] bg-gradient-to-b from-black/98 via-black/95 to-black/98 backdrop-blur-xl rounded-t-3xl shadow-2xl border-t border-white/10 max-h-[70vh] overflow-y-auto category-sheet",children:[s.jsxs("div",{className:"sticky top-0 bg-black/98 backdrop-blur-xl z-10 border-b border-white/10 px-4 pt-4 pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[(()=>{const k=Wu.find(A=>A.id===dn),I=(k==null?void 0:k.icon)||ox;return s.jsx(I,{className:"w-5 h-5"})})(),((sw=Wu.find(k=>k.id===dn))==null?void 0:sw.name)||"Category"]}),s.jsx("button",{onClick:()=>qi(null),className:"p-2 rounded-full hover:bg-white/10 transition-colors","aria-label":"Close category",children:s.jsx(pt,{className:"w-5 h-5 text-white/70"})})]}),s.jsx("div",{className:"w-12 h-1 bg-white/30 rounded-full mx-auto"})]}),s.jsx("div",{className:"px-4 pt-2 pb-3 border-b border-white/10",children:s.jsx("div",{ref:_e,className:"flex gap-2 overflow-x-auto scrollbar-hide pb-2 focus:outline-none",style:{WebkitOverflowScrolling:"touch",scrollBehavior:"smooth"},tabIndex:0,onKeyDown:k=>{if(k.key==="ArrowLeft"||k.key==="ArrowRight"){k.preventDefault();const I=150;_e.current&&_e.current.scrollBy({left:k.key==="ArrowLeft"?-I:I,behavior:"smooth"})}},children:Wu.map(k=>{const I=k.icon,A=dn===k.id,ae=k.id==="multi-clip";return s.jsxs("div",{className:"relative flex-shrink-0",children:[ae&&p.length>0&&s.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-2 max-w-[calc(100vw-2rem)] overflow-x-auto scrollbar-hide pb-2 z-50",style:{maxWidth:"400px",WebkitOverflowScrolling:"touch"},onDragOver:oe=>{oe.preventDefault()},onDrop:oe=>{oe.target===oe.currentTarget&&oe.preventDefault()},children:[p.map((oe,Q)=>{const ee=Math.round((oe.trimEnd-oe.trimStart)/oe.speed),ce=oe.mediaType==="image"||oe.url.toLowerCase().includes(".jpg")||oe.url.toLowerCase().includes(".png")||oe.url.toLowerCase().includes(".jpeg"),Fe=v===oe.id,Ee=w===Q&&v!==oe.id;return s.jsxs("div",{draggable:!0,onDragStart:Te=>{console.log(" DRAG START - clip:",oe.id,"at index:",Q),b(oe.id),Te.dataTransfer.effectAllowed="move",Te.dataTransfer.dropEffect="move",Te.dataTransfer.setData("text/plain",oe.id),Te.dataTransfer.setData("application/json",JSON.stringify({clipId:oe.id,index:Q}))},onDragEnd:Te=>{console.log(" Drag ended for clip:",oe.id),b(null),N(null)},onDragEnter:Te=>{Te.preventDefault(),v&&v!==oe.id&&(console.log(" Drag entered index:",Q),N(Q))},onDragOver:Te=>{Te.preventDefault(),Te.stopPropagation(),Te.dataTransfer.dropEffect="move",v&&v!==oe.id&&N(Q)},onDragLeave:Te=>{const We=Te.currentTarget.getBoundingClientRect(),mt=Te.clientX,wt=Te.clientY;(mt<We.left||mt>We.right||wt<We.top||wt>We.bottom)&&w===Q&&N(null)},onDrop:Te=>{if(Te.preventDefault(),Te.stopPropagation(),console.log(" Drop on clip:",oe.id,"at index:",Q),v&&v!==oe.id){const We=p.findIndex(Wn=>Wn.id===v);console.log(" Reordering: moving clip from index",We,"to index",Q);const mt=[...p],[wt]=mt.splice(We,1);mt.splice(Q,0,wt),S(mt),console.log(" Clips reordered:",mt.map((Wn,zr)=>`Clip ${zr+1}: ${Wn.id.substring(0,10)}`))}b(null),N(null)},className:`relative flex-shrink-0 w-20 h-28 rounded-lg overflow-hidden bg-gray-800 border border-white/20 shadow-lg transition-all cursor-move select-none ${Fe?"opacity-50 scale-95":""} ${Ee?"border-blue-500 border-2 scale-105":""}`,style:{userSelect:"none",WebkitUserSelect:"none",touchAction:"pan-y",pointerEvents:"auto"},onPointerDown:Te=>{Te.target.closest("button")},children:[ce?s.jsx("img",{src:oe.url,alt:`Clip ${Q+1}`,className:"w-full h-full object-cover pointer-events-none",draggable:!1,onDragStart:Te=>Te.preventDefault()}):s.jsx("video",{src:oe.url,className:"w-full h-full object-cover pointer-events-none",muted:!0,playsInline:!0,draggable:!1,onDragStart:Te=>Te.preventDefault()}),s.jsxs("div",{className:"absolute top-1 right-1 bg-black/70 rounded px-1.5 py-1 flex items-center gap-0.5 pointer-events-none z-20",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-white"}),s.jsx("div",{className:"w-1 h-1 rounded-full bg-white"}),s.jsx("div",{className:"w-1 h-1 rounded-full bg-white"})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent px-1.5 py-1",children:s.jsxs("span",{className:"text-white text-[10px] font-medium",children:[ee,"s"]})}),s.jsxs("div",{className:"absolute left-1 top-1/2 -translate-y-1/2 flex flex-row gap-1 z-30 pointer-events-auto",children:[Q>0&&s.jsx("button",{onClick:Te=>{Te.stopPropagation(),Te.preventDefault(),R(Q)},onMouseDown:Te=>{Te.stopPropagation(),Te.preventDefault()},onTouchStart:Te=>{Te.stopPropagation()},className:"w-5 h-5 rounded bg-black/80 hover:bg-blue-600/90 active:bg-blue-700 flex items-center justify-center transition-colors pointer-events-auto shadow-lg",title:"Move earlier",style:{pointerEvents:"auto"},children:s.jsx(ui,{className:"w-3 h-3 text-white"})}),Q<p.length-1&&s.jsx("button",{onClick:Te=>{Te.stopPropagation(),Te.preventDefault(),C(Q)},onMouseDown:Te=>{Te.stopPropagation(),Te.preventDefault()},onTouchStart:Te=>{Te.stopPropagation()},className:"w-5 h-5 rounded bg-black/80 hover:bg-blue-600/90 active:bg-blue-700 flex items-center justify-center transition-colors pointer-events-auto shadow-lg",title:"Move later",style:{pointerEvents:"auto"},children:s.jsx(Yk,{className:"w-3 h-3 text-white"})})]}),s.jsx("button",{onClick:Te=>{Te.stopPropagation(),Te.preventDefault(),S(We=>We.filter(mt=>mt.id!==oe.id))},onMouseDown:Te=>{Te.stopPropagation(),Te.preventDefault()},onTouchStart:Te=>{Te.stopPropagation()},className:"absolute top-1 right-1 w-5 h-5 rounded-full bg-black/70 hover:bg-red-600/80 flex items-center justify-center transition-colors z-10",children:s.jsx(pt,{className:"w-3 h-3 text-white"})})]},oe.id)}),s.jsx("button",{onClick:()=>{var oe;return(oe=x.current)==null?void 0:oe.click()},className:"flex-shrink-0 w-20 h-28 rounded-lg bg-white/10 border-2 border-dashed border-white/30 hover:bg-white/20 hover:border-white/50 flex items-center justify-center transition-all",children:s.jsx(na,{className:"w-6 h-6 text-white"})})]}),s.jsx("button",{onClick:()=>nw(k.id),className:`rounded-lg p-[2px] transition-transform active:scale-[.98] flex-shrink-0 focus:outline-none focus:ring-0 focus-visible:outline-none focus-visible:ring-0 ${A?"animate-[shimmerGradient_3s_linear_infinite]":""}`,style:A?{background:"linear-gradient(to right, #2A1FC2, #1FC2C2, #000000, #2A1FC2, #1FC2C2, #000000)",backgroundSize:"400% 100%",outline:"none",boxShadow:"none"}:{},onFocus:oe=>{oe.currentTarget.style.outline="none",oe.currentTarget.style.boxShadow="none"},children:s.jsxs("span",{className:`flex flex-col items-center gap-0.5 rounded-md text-white transition-all ${A?"bg-gray-900 px-2 py-1.5":"bg-white/10 border border-white/20 hover:bg-white/20 px-2 py-1.5"}`,children:[s.jsx(I,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-[9px] font-medium whitespace-nowrap leading-tight",children:k.name})]})})]},k.id)})})}),s.jsxs("div",{className:"p-4",children:[dn==="filters"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:"Video Filters"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:dq.map(k=>s.jsx("button",{onClick:()=>E(k.id),className:`p-4 rounded-xl border-2 transition-all ${T===k.id?"bg-purple-500/30 border-purple-500/60":"bg-white/5 border-white/20 hover:bg-white/10"}`,children:s.jsx("span",{className:"text-white text-sm font-medium",children:k.name})},k.id))})]}),dn==="adjustments"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:"Color Adjustments"}),s.jsx("div",{className:"space-y-5",children:[{label:"Brightness",icon:"",value:B,min:.4,max:1.8,step:.01,onChange:k=>H(k),default:1},{label:"Contrast",icon:"",value:q,min:.5,max:2,step:.01,onChange:k=>ie(k),default:1},{label:"Saturation",icon:"",value:X,min:0,max:2,step:.01,onChange:k=>V(k),default:1},{label:"Hue",icon:"",value:z,min:-1,max:1,step:.001,onChange:k=>J(k),default:0}].map(({label:k,icon:I,value:A,min:ae,max:oe,step:Q,onChange:ee,default:ce})=>{const Fe=A===ce,Ee=(A-ae)/(oe-ae)*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:I}),s.jsx("span",{className:"text-sm font-semibold text-white",children:k})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[!Fe&&s.jsx("button",{onClick:()=>ee(ce),className:"text-xs text-white/60 hover:text-white transition-colors px-2 py-1 rounded hover:bg-white/10",title:"Reset to default",children:"Reset"}),s.jsxs("span",{className:"text-sm font-bold text-white/90 min-w-[3rem] text-right",children:[A>0?"+":"",((A-ce)*100).toFixed(0),"%"]})]})]}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"range",min:ae,max:oe,step:Q,value:A,onChange:Te=>ee(parseFloat(Te.target.value)),className:"w-full h-3 bg-white/10 rounded-full appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, rgba(139, 92, 246, 0.8) 0%, rgba(139, 92, 246, 0.8) ${Ee}%, rgba(255, 255, 255, 0.1) ${Ee}%, rgba(255, 255, 255, 0.1) 100%)`}})})]},k)})})]}),dn==="lut"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:"Color Grading"}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-sm font-semibold text-white",children:"LUT Intensity"})]}),s.jsxs("span",{className:"text-sm font-bold text-white/90 min-w-[3rem] text-right",children:[Math.round(cn*100),"%"]})]}),s.jsx("input",{type:"range",min:0,max:1,step:.01,value:cn,onChange:k=>Sr(parseFloat(k.target.value)),className:"w-full h-3 bg-white/10 rounded-full appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, rgba(139, 92, 246, 0.8) 0%, rgba(139, 92, 246, 0.8) ${cn*100}%, rgba(255, 255, 255, 0.1) ${cn*100}%, rgba(255, 255, 255, 0.1) 100%)`}})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Preset LUTs"}),s.jsx("select",{className:"w-full px-4 py-3 rounded-xl border border-white/20 bg-white/5 backdrop-blur-sm text-white text-sm font-medium hover:bg-white/10 focus:bg-white/10 focus:border-purple-500/50 transition-all cursor-pointer",value:Hu.id,onChange:k=>{const I=If.find(A=>A.id===k.target.value)||If[0];l3(I)},children:If.map(k=>s.jsx("option",{value:k.id,className:"bg-gray-900",children:k.name},k.id))})]}),s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Custom LUT"}),s.jsxs("label",{className:"block w-full px-4 py-3 rounded-xl border-2 border-dashed border-white/30 bg-white/5 backdrop-blur-sm text-white text-sm font-medium cursor-pointer hover:bg-white/10 hover:border-purple-500/50 transition-all text-center",children:[s.jsx("input",{type:"file",accept:"image/png",onChange:o3,className:"hidden"}),s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx(Os,{className:"w-4 h-4"}),"Choose LUT File"]})]}),mn&&s.jsx("div",{className:"px-3 py-2 rounded-lg bg-purple-500/20 border border-purple-500/30",children:s.jsxs("p",{className:"text-xs text-white/90 font-medium",children:[" Loaded: ",mn.size," grid (",mn.tiles,"",mn.tiles," tiles)"]})})]})]}),dn==="multi-clip"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:"Multi-Clip"}),p.length>0?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-white/70 text-sm mb-3",children:[p.length," clip",p.length!==1?"s":""," added. They will be stitched together in order."]}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide pb-2",children:[p.map((k,I)=>{const A=Math.round((k.trimEnd-k.trimStart)/k.speed),ae=k.mediaType==="image"||k.url.toLowerCase().includes(".jpg")||k.url.toLowerCase().includes(".png")||k.url.toLowerCase().includes(".jpeg"),oe=v===k.id,Q=w===I&&v!==k.id;return s.jsxs("div",{draggable:!0,onMouseDown:ee=>{console.log(" Mouse down on clip (bottom sheet):",k.id)},onDragStart:ee=>{console.log(" Drag started for clip (bottom sheet):",k.id,"at index:",I),b(k.id),ee.dataTransfer.effectAllowed="move",ee.dataTransfer.setData("text/plain",k.id),ee.dataTransfer.setData("application/json",JSON.stringify({clipId:k.id,index:I}))},onDragEnd:ee=>{console.log(" Drag ended (bottom sheet)"),b(null),N(null)},onDragEnter:ee=>{ee.preventDefault(),v&&v!==k.id&&(console.log(" Drag entered index (bottom sheet):",I),N(I))},onDragOver:ee=>{ee.preventDefault(),ee.stopPropagation(),ee.dataTransfer.dropEffect="move",v&&v!==k.id&&N(I)},onDragLeave:ee=>{const ce=ee.currentTarget.getBoundingClientRect(),Fe=ee.clientX,Ee=ee.clientY;(Fe<ce.left||Fe>ce.right||Ee<ce.top||Ee>ce.bottom)&&w===I&&N(null)},onDrop:ee=>{if(ee.preventDefault(),ee.stopPropagation(),console.log(" Drop on clip (bottom sheet):",k.id,"at index:",I),v&&v!==k.id){const ce=p.findIndex(Te=>Te.id===v);console.log(" Reordering (bottom sheet): moving clip from index",ce,"to index",I);const Fe=[...p],[Ee]=Fe.splice(ce,1);Fe.splice(I,0,Ee),S(Fe),console.log(" Clips reordered (bottom sheet):",Fe.map((Te,We)=>`Clip ${We+1}: ${Te.id.substring(0,10)}`))}b(null),N(null)},className:`relative flex-shrink-0 w-32 h-48 rounded-lg overflow-hidden bg-gray-800 border border-white/20 transition-all cursor-move select-none ${oe?"opacity-50 scale-95":""} ${Q?"border-blue-500 border-2 scale-105":""}`,style:{userSelect:"none",WebkitUserSelect:"none",touchAction:"pan-y"},children:[ae?s.jsx("img",{src:k.url,alt:`Clip ${I+1}`,className:"w-full h-full object-cover pointer-events-none",draggable:!1,onDragStart:ee=>ee.preventDefault()}):s.jsx("video",{src:k.url,className:"w-full h-full object-cover pointer-events-none",muted:!0,playsInline:!0,draggable:!1,onDragStart:ee=>ee.preventDefault()}),s.jsxs("div",{className:"absolute top-2 left-2 flex gap-1 opacity-70",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})]}),s.jsxs("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 flex flex-row gap-1.5 z-30 pointer-events-auto",children:[I>0&&s.jsx("button",{onClick:ee=>{ee.stopPropagation(),ee.preventDefault(),console.log(" Move earlier button clicked (bottom sheet) for clip at index",I),R(I)},onMouseDown:ee=>{ee.stopPropagation(),ee.preventDefault()},onTouchStart:ee=>{ee.stopPropagation()},className:"w-6 h-6 rounded bg-black/80 hover:bg-blue-600/90 active:bg-blue-700 flex items-center justify-center transition-colors pointer-events-auto shadow-lg",title:"Move earlier (left)",style:{pointerEvents:"auto"},children:s.jsx(ui,{className:"w-3.5 h-3.5 text-white"})}),I<p.length-1&&s.jsx("button",{onClick:ee=>{ee.stopPropagation(),ee.preventDefault(),console.log(" Move later button clicked (bottom sheet) for clip at index",I),C(I)},onMouseDown:ee=>{ee.stopPropagation(),ee.preventDefault()},onTouchStart:ee=>{ee.stopPropagation()},className:"w-6 h-6 rounded bg-black/80 hover:bg-blue-600/90 active:bg-blue-700 flex items-center justify-center transition-colors pointer-events-auto shadow-lg",title:"Move later (right)",style:{pointerEvents:"auto"},children:s.jsx(Yk,{className:"w-3.5 h-3.5 text-white"})})]}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent px-2 py-2",children:[s.jsxs("div",{className:"text-white text-xs font-medium",children:["Clip ",I+1]}),s.jsxs("div",{className:"text-white/80 text-[10px]",children:[A,"s"]})]}),s.jsx("button",{onClick:ee=>{ee.stopPropagation(),ee.preventDefault(),S(ce=>ce.filter(Fe=>Fe.id!==k.id))},onMouseDown:ee=>{ee.stopPropagation(),ee.preventDefault()},onTouchStart:ee=>{ee.stopPropagation()},className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-black/70 hover:bg-red-600/80 flex items-center justify-center transition-colors z-10",children:s.jsx(pt,{className:"w-4 h-4 text-white"})})]},k.id)}),s.jsxs("button",{onClick:()=>{var k;return(k=x.current)==null?void 0:k.click()},className:"flex-shrink-0 w-32 h-48 rounded-lg bg-white/10 border-2 border-dashed border-white/30 hover:bg-white/20 hover:border-white/50 flex flex-col items-center justify-center gap-2 transition-all",children:[s.jsx(na,{className:"w-8 h-8 text-white"}),s.jsx("span",{className:"text-white text-xs font-medium",children:"Add Clip"})]})]}),s.jsx("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/20 border border-blue-500/30",children:s.jsx("p",{className:"text-white/90 text-xs",children:" Clips will be stitched together in the order shown (left to right). Drag clips to reorder them, or use the left/right arrow buttons on each clip to move them earlier or later in the sequence."})})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Kd,{className:"w-12 h-12 text-white/30 mx-auto mb-4"}),s.jsx("p",{className:"text-white/70 text-sm mb-4",children:"No clips added yet. Add clips to stitch them together."}),s.jsxs("button",{onClick:()=>{var k;return(k=x.current)==null?void 0:k.click()},className:"px-6 py-3 rounded-xl bg-blue-600 hover:bg-blue-500 text-white font-semibold transition-colors flex items-center gap-2 mx-auto",children:[s.jsx(na,{className:"w-5 h-5"}),"Add First Clip"]})]})]}),dn==="trim"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:"Trim Video"}),p.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Select a clip to trim, or trim the main video below."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Select Clip to Trim"}),s.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-2",children:p.map((k,I)=>{const A=Math.round((k.trimEnd-k.trimStart)/k.speed),ae=ke===I;return s.jsxs("button",{onClick:()=>Ue(ae?null:I),className:`flex-shrink-0 w-24 h-32 rounded-lg overflow-hidden border-2 transition-all ${ae?"border-blue-500 bg-blue-500/20":"border-white/20 bg-gray-800/50 hover:border-white/40"}`,children:[k.mediaType==="image"?s.jsx("img",{src:k.url,alt:`Clip ${I+1}`,className:"w-full h-full object-cover"}):s.jsx("video",{src:k.url,className:"w-full h-full object-cover",muted:!0,playsInline:!0}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent px-2 py-1",children:[s.jsxs("div",{className:"text-white text-xs font-medium",children:["Clip ",I+1]}),s.jsxs("div",{className:"text-white/80 text-[10px]",children:[A,"s"]})]})]},k.id)})})]}),ke!==null&&p[ke]&&(()=>{const k=p[ke],I=k.trimStart,A=k.trimEnd,ae=k.duration;return s.jsxs("div",{className:"space-y-4 p-4 rounded-xl bg-gray-800/50 border border-white/10",children:[s.jsxs("h5",{className:"text-white font-semibold text-sm",children:["Trim Clip ",ke+1]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{ref:Pt,className:"relative h-12 bg-gray-900/50 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 flex",children:s.jsx("div",{className:"bg-blue-500/30 border-y border-blue-500/50",style:{width:`${(A-I)/ae*100}%`,marginLeft:`${I/ae*100}%`}})}),s.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-yellow-400 cursor-ew-resize z-10",style:{left:`${I/ae*100}%`},onMouseDown:oe=>{oe.preventDefault(),Mt("start")},children:s.jsx("div",{className:"absolute -top-1 -left-2 w-5 h-5 bg-yellow-400 rounded-full border-2 border-white shadow-lg"})}),s.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-yellow-400 cursor-ew-resize z-10",style:{left:`${A/ae*100}%`},onMouseDown:oe=>{oe.preventDefault(),Mt("end")},children:s.jsx("div",{className:"absolute -top-1 -left-2 w-5 h-5 bg-yellow-400 rounded-full border-2 border-white shadow-lg"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs text-white/70 font-medium",children:"Start Time"}),s.jsx("input",{type:"number",min:0,max:A-.1,step:.1,value:I.toFixed(1),onChange:oe=>{const Q=Math.max(0,Math.min(parseFloat(oe.target.value)||0,A-.1));S(ee=>ee.map((ce,Fe)=>Fe===ke?{...ce,trimStart:Q}:ce))},className:"w-full px-3 py-2 rounded-lg bg-gray-900/50 border border-white/20 text-white text-sm focus:border-blue-500 focus:outline-none"}),s.jsxs("span",{className:"text-xs text-white/50",children:[I.toFixed(1),"s"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs text-white/70 font-medium",children:"End Time"}),s.jsx("input",{type:"number",min:I+.1,max:ae,step:.1,value:A.toFixed(1),onChange:oe=>{const Q=Math.max(I+.1,Math.min(parseFloat(oe.target.value)||ae,ae));S(ee=>ee.map((ce,Fe)=>Fe===ke?{...ce,trimEnd:Q}:ce))},className:"w-full px-3 py-2 rounded-lg bg-gray-900/50 border border-white/20 text-white text-sm focus:border-blue-500 focus:outline-none"}),s.jsxs("span",{className:"text-xs text-white/50",children:[A.toFixed(1),"s"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-500/20 border border-blue-500/30",children:[s.jsx("span",{className:"text-white/90 text-sm font-medium",children:"Trimmed Duration:"}),s.jsxs("span",{className:"text-white font-bold text-lg",children:[(A-I).toFixed(1),"s"]})]})]})]})})()]}):s.jsx("div",{className:"space-y-4",children:Ur?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-white/60 text-sm",children:"Images cannot be trimmed. Trim is only available for videos."})}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{ref:Pt,className:"relative h-16 bg-gray-900/50 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 flex",children:s.jsx("div",{className:"bg-blue-500/30 border-y border-blue-500/50",style:{width:`${i>0?(Le-Ne)/i*100:0}%`,marginLeft:`${i>0?Ne/i*100:0}%`}})}),s.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-yellow-400 cursor-ew-resize z-10 hover:bg-yellow-300 transition-colors",style:{left:`${i>0?Ne/i*100:0}%`},onMouseDown:k=>{k.preventDefault(),Mt("start")},children:s.jsx("div",{className:"absolute -top-1 -left-2 w-5 h-5 bg-yellow-400 rounded-full border-2 border-white shadow-lg"})}),s.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-yellow-400 cursor-ew-resize z-10 hover:bg-yellow-300 transition-colors",style:{left:`${i>0?Le/i*100:0}%`},onMouseDown:k=>{k.preventDefault(),Mt("end")},children:s.jsx("div",{className:"absolute -top-1 -left-2 w-5 h-5 bg-yellow-400 rounded-full border-2 border-white shadow-lg"})}),s.jsxs("div",{className:"absolute bottom-1 left-2 text-white text-[10px] font-medium",children:[Ne.toFixed(1),"s"]}),s.jsxs("div",{className:"absolute bottom-1 right-2 text-white text-[10px] font-medium",children:[Le.toFixed(1),"s"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs text-white/70 font-medium",children:"Start Time (seconds)"}),s.jsx("input",{type:"number",min:0,max:Le-.1,step:.1,value:Ne.toFixed(1),onChange:k=>{const I=Math.max(0,Math.min(parseFloat(k.target.value)||0,Le-.1));Oe(I)},className:"w-full px-3 py-2 rounded-lg bg-gray-900/50 border border-white/20 text-white text-sm focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs text-white/70 font-medium",children:"End Time (seconds)"}),s.jsx("input",{type:"number",min:Ne+.1,max:i,step:.1,value:Le.toFixed(1),onChange:k=>{const I=Math.max(Ne+.1,Math.min(parseFloat(k.target.value)||i,i));Me(I)},className:"w-full px-3 py-2 rounded-lg bg-gray-900/50 border border-white/20 text-white text-sm focus:border-blue-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-500/20 border border-blue-500/30",children:[s.jsx("span",{className:"text-white/90 text-sm font-medium",children:"Trimmed Duration:"}),s.jsxs("span",{className:"text-white font-bold text-lg",children:[(Le-Ne).toFixed(1),"s"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{Oe(0)},className:"flex-1 px-4 py-2 rounded-lg bg-gray-800/50 hover:bg-gray-700/50 text-white text-sm font-medium transition-colors",children:"Reset Start"}),s.jsx("button",{onClick:()=>{Me(i)},className:"flex-1 px-4 py-2 rounded-lg bg-gray-800/50 hover:bg-gray-700/50 text-white text-sm font-medium transition-colors",children:"Reset End"})]})]})})})]}),dn==="speed"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:"Video Speed"}),p.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Select a clip to adjust speed, or adjust the main video below."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Select Clip to Adjust Speed"}),s.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-2",children:p.map((k,I)=>{const A=Ge===I;return s.jsxs("button",{onClick:()=>nt(A?null:I),className:`flex-shrink-0 w-24 h-32 rounded-lg overflow-hidden border-2 transition-all ${A?"border-purple-500 bg-purple-500/20":"border-white/20 bg-gray-800/50 hover:border-white/40"}`,children:[k.mediaType==="image"?s.jsx("img",{src:k.url,alt:`Clip ${I+1}`,className:"w-full h-full object-cover"}):s.jsx("video",{src:k.url,className:"w-full h-full object-cover",muted:!0,playsInline:!0}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent px-2 py-1",children:[s.jsxs("div",{className:"text-white text-xs font-medium",children:["Clip ",I+1]}),s.jsxs("div",{className:"text-white/80 text-[10px]",children:[k.speed,"x"]})]})]},k.id)})})]}),Ge!==null&&p[Ge]&&(()=>{const I=p[Ge].speed;return s.jsxs("div",{className:"space-y-4 p-4 rounded-xl bg-gray-800/50 border border-white/10",children:[s.jsxs("h5",{className:"text-white font-semibold text-sm",children:["Speed for Clip ",Ge+1]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ca,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"text-sm font-semibold text-white",children:"Speed"})]}),s.jsxs("span",{className:"text-sm font-bold text-white/90 min-w-[4rem] text-right",children:[I.toFixed(2),"x"]})]}),s.jsx("input",{type:"range",min:.25,max:4,step:.05,value:I,onChange:A=>{const ae=parseFloat(A.target.value);S(oe=>oe.map((Q,ee)=>ee===Ge?{...Q,speed:ae}:Q))},className:"w-full h-3 bg-white/10 rounded-full appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, rgba(139, 92, 246, 0.8) 0%, rgba(139, 92, 246, 0.8) ${(I-.25)/(4-.25)*100}%, rgba(255, 255, 255, 0.1) ${(I-.25)/(4-.25)*100}%, rgba(255, 255, 255, 0.1) 100%)`}}),s.jsxs("div",{className:"flex justify-between text-xs text-white/50",children:[s.jsx("span",{children:"0.25x (Slow)"}),s.jsx("span",{children:"1x (Normal)"}),s.jsx("span",{children:"4x (Fast)"})]})]}),s.jsx("div",{className:"grid grid-cols-5 gap-2",children:[.5,.75,1,1.5,2].map(A=>s.jsxs("button",{onClick:()=>{S(ae=>ae.map((oe,Q)=>Q===Ge?{...oe,speed:A}:oe))},className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${I===A?"bg-purple-600 text-white":"bg-gray-700/50 text-white/70 hover:bg-gray-600/50"}`,children:[A,"x"]},A))})]})})()]}):s.jsx("div",{className:"space-y-4",children:Ur?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-white/60 text-sm",children:"Images cannot have speed adjusted. Speed is only available for videos."})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ca,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"text-sm font-semibold text-white",children:"Playback Speed"})]}),s.jsxs("span",{className:"text-sm font-bold text-white/90 min-w-[4rem] text-right",children:[fn.toFixed(2),"x"]})]}),s.jsx("input",{type:"range",id:"speedSlider",min:.25,max:4,step:.05,value:fn,onChange:k=>{const I=parseFloat(k.target.value);ye(I)},className:"w-full h-3 bg-white/10 rounded-full appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, rgba(139, 92, 246, 0.8) 0%, rgba(139, 92, 246, 0.8) ${(fn-.25)/(4-.25)*100}%, rgba(255, 255, 255, 0.1) ${(fn-.25)/(4-.25)*100}%, rgba(255, 255, 255, 0.1) 100%)`}}),s.jsxs("div",{className:"flex justify-between text-xs text-white/50",children:[s.jsx("span",{children:"0.25x (Slow)"}),s.jsx("span",{children:"1x (Normal)"}),s.jsx("span",{children:"4x (Fast)"})]})]}),s.jsx("div",{className:"grid grid-cols-5 gap-2",children:[.5,.75,1,1.5,2].map(k=>s.jsxs("button",{"data-speed":k,onClick:()=>ye(k),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${fn===k?"bg-purple-600 text-white":"bg-gray-700/50 text-white/70 hover:bg-gray-600/50"}`,children:[k,"x"]},k))}),s.jsx("div",{className:"p-3 rounded-lg bg-purple-500/20 border border-purple-500/30",children:s.jsx("p",{className:"text-white/90 text-xs",children:" Speed adjustment is previewed here. The actual speed change will be applied on the server when you upload."})})]})})]}),dn==="reverse"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:"Reverse Playback"}),p.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Select a clip to reverse, or reverse the main video below."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Select Clip to Reverse"}),s.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-2",children:p.map((k,I)=>{const A=Hn===I;return s.jsxs("button",{onClick:()=>Cs(A?null:I),className:`flex-shrink-0 w-24 h-32 rounded-lg overflow-hidden border-2 transition-all ${A?"border-purple-500 bg-purple-500/20":"border-white/20 bg-gray-800/50 hover:border-white/40"}`,children:[k.mediaType==="image"?s.jsx("img",{src:k.url,alt:`Clip ${I+1}`,className:"w-full h-full object-cover"}):s.jsx("video",{src:k.url,className:"w-full h-full object-cover",muted:!0,playsInline:!0}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent px-2 py-1",children:[s.jsxs("div",{className:"text-white text-xs font-medium",children:["Clip ",I+1]}),s.jsx("div",{className:"text-white/80 text-[10px]",children:k.reverse?" Reversed":" Normal"})]})]},k.id)})})]}),Hn!==null&&p[Hn]&&(()=>{const I=p[Hn].reverse;return s.jsxs("div",{className:"space-y-4 p-4 rounded-xl bg-gray-800/50 border border-white/10",children:[s.jsxs("h5",{className:"text-white font-semibold text-sm",children:["Reverse for Clip ",Hn+1]}),s.jsx("button",{id:"reverseBtn",onClick:()=>{const A=!I;S(ae=>ae.map((oe,Q)=>Q===Hn?{...oe,reverse:A}:oe))},className:`w-full px-6 py-4 rounded-xl text-base font-semibold transition-all ${I?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-700/50 text-white/70 hover:bg-gray-600/50"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx(Ei,{className:`w-5 h-5 ${I?"rotate-180":""} transition-transform`}),s.jsx("span",{children:I?"Reversed":"Reverse Playback"})]})}),s.jsx("div",{className:"p-3 rounded-lg bg-purple-500/20 border border-purple-500/30",children:s.jsx("p",{className:"text-white/90 text-xs",children:" Reverse will be applied on the server when you upload. The reversal cannot be previewed in the browser."})})]})})()]}):s.jsx("div",{className:"space-y-4",children:Ur?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-white/60 text-sm",children:"Images cannot be reversed. Reverse is only available for videos."})}):s.jsxs(s.Fragment,{children:[s.jsx("button",{id:"reverseBtn",onClick:()=>{Ot(!nn)},className:`w-full px-6 py-4 rounded-xl text-base font-semibold transition-all ${nn?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-700/50 text-white/70 hover:bg-gray-600/50"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx(Ei,{className:`w-5 h-5 ${nn?"rotate-180":""} transition-transform`}),s.jsx("span",{children:nn?"Reversed":"Reverse Playback"})]})}),s.jsx("div",{className:"p-3 rounded-lg bg-purple-500/20 border border-purple-500/30",children:s.jsx("p",{className:"text-white/90 text-xs",children:" Reverse will be applied on the server when you upload. The reversal cannot be previewed in the browser."})})]})})]}),dn==="music"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-white font-semibold text-lg",children:"Music"}),Mn&&s.jsx("span",{className:"text-xs text-purple-400 bg-purple-500/20 px-2 py-1 rounded-full",children:"Selected"})]}),s.jsxs("div",{className:"flex gap-2 mb-4 bg-gray-800/30 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>te("library"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ${zo==="library"?"bg-purple-600 text-white shadow-lg":"text-white/60 hover:text-white/80"}`,children:"Library"}),s.jsx("button",{onClick:()=>te("ai"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ${zo==="ai"?"bg-purple-600 text-white shadow-lg":"text-white/60 hover:text-white/80"}`,children:"AI Generate"})]}),zo==="ai"&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-pink-600/20 rounded-xl p-6 border border-purple-500/30 text-center",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx(Ca,{className:"w-12 h-12 text-purple-400 mx-auto mb-3"}),s.jsx("h5",{className:"text-white font-semibold mb-2 text-lg",children:"AI Music Generation"}),s.jsx("p",{className:"text-white/60 text-sm mb-4",children:"AI music generation requires additional setup"})]}),s.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 mb-4 text-left",children:[s.jsx("p",{className:"text-yellow-200 text-sm mb-2",children:s.jsx("strong",{children:"Setup Required:"})}),s.jsx("p",{className:"text-yellow-100/80 text-xs mb-3",children:"AI music generation uses a self-hosted MusicGen service that needs to be running separately. This requires:"}),s.jsxs("ul",{className:"text-yellow-100/80 text-xs space-y-1 list-disc list-inside mb-3",children:[s.jsx("li",{children:"Python environment with MusicGen installed"}),s.jsx("li",{children:"Service running on http://localhost:5000"}),s.jsx("li",{children:"Additional dependencies and setup"})]}),s.jsxs("p",{className:"text-yellow-100/80 text-xs",children:["See ",s.jsx("code",{className:"bg-yellow-900/30 px-1 rounded",children:"musicgen-service/README.md"})," for setup instructions."]})]}),s.jsxs("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-4 mb-4",children:[s.jsx("p",{className:"text-blue-200 text-sm font-medium mb-2",children:" Use the Library Tab Instead"}),s.jsxs("p",{className:"text-blue-100/80 text-xs mb-3",children:["The ",s.jsx("strong",{children:"Library"})," tab has 17+ royalty-free tracks ready to use right now - no setup required!"]}),s.jsx("button",{onClick:()=>te("library"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-all text-sm",children:"Go to Library"})]})]})}),zo==="library"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search music...",value:Ts.search,onChange:k=>{$u({...Ts,search:k.target.value}),(k.target.value.length>2||k.target.value.length===0)&&(xa(!0),(async()=>{try{const{getMusicLibrary:I}=await En(()=>Promise.resolve().then(()=>ai),void 0),A=await I({search:k.target.value||void 0,genre:Ts.genre||void 0,mood:Ts.mood||void 0});A.success&&A.data&&ga(Array.isArray(A.data)?A.data:[])}catch(I){console.error("Failed to search music:",I)}finally{xa(!1)}})())},className:"w-full px-4 py-3 pl-10 rounded-xl bg-gray-800/50 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20"}),s.jsx(As,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["All","Pop","Rock","Electronic","Hip-Hop","Jazz","Classical","Ambient"].map(k=>s.jsx("button",{onClick:async()=>{var A,ae,oe;const I=k==="All"?"":k.toLowerCase();xa(!0);try{const{getMusicLibrary:Q}=await En(()=>Promise.resolve().then(()=>ai),void 0),ee=await Q({genre:I||void 0,mood:Ts.mood||void 0,search:Ts.search||void 0});ee.success&&ee.data&&(ga(Array.isArray(ee.data)?ee.data:[]),$u({...Ts,genre:I}))}catch(Q){console.error("Failed to filter music:",Q),(((A=Q==null?void 0:Q.message)==null?void 0:A.includes("Failed to fetch"))||((ae=Q==null?void 0:Q.message)==null?void 0:ae.includes("Cannot connect"))||((oe=Q==null?void 0:Q.message)==null?void 0:oe.includes("Connection refused")))&&$e.fire({title:"Backend Not Running",html:`
                                                                        <div style="text-align: center; padding: 10px 0;">
                                                                            <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0 0 10px 0;">
                                                                                The Laravel backend server needs to be running to filter music.
                                                                            </p>
                                                                            <p style="color: #ffffff; font-size: 12px; line-height: 18px; margin: 0;">
                                                                                Please start the backend server and try again.
                                                                            </p>
                                                                        </div>
                                                                    `,showConfirmButton:!0,confirmButtonText:"OK",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff",customClass:{popup:"instagram-style-modal",title:"instagram-modal-title",htmlContainer:"instagram-modal-content",confirmButton:"instagram-confirm-btn"}})}finally{xa(!1)}},className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all ${k==="All"&&!Ts.genre||Ts.genre===k.toLowerCase()?"bg-purple-600 text-white":"bg-gray-800/50 text-white/70 hover:bg-gray-700/50"}`,children:k},k))}),Ec?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-white/30 border-t-purple-500 rounded-full animate-spin mx-auto mb-3"}),s.jsx("p",{className:"text-white/60 text-sm",children:"Loading music..."})]}):pa.length>0?s.jsxs("div",{className:"grid grid-cols-1 gap-2 max-h-[500px] overflow-y-auto pr-1 custom-scrollbar",children:[s.jsxs("div",{className:"text-xs text-white/40 mb-2 px-1",children:[pa.length," tracks available - scroll to see more"]}),pa.map(k=>{const I=Mn&&window.selectedMusicTrackId===k.id;return s.jsx("div",{className:`group relative p-3 rounded-xl cursor-pointer transition-all ${I?"bg-gradient-to-r from-purple-600/30 to-pink-600/30 border-2 border-purple-500 shadow-lg shadow-purple-500/20":"bg-gray-800/50 border border-white/10 hover:bg-gray-700/50 hover:border-white/20"}`,onClick:async()=>{const A=typeof k.id=="string"?parseInt(k.id,10):k.id;window.selectedMusicTrackId=A;const ae=k.preview_url||k.url||`http://localhost:8000/api/music/file/${A}`;ht.current&&(ht.current.pause(),ht.current=null),Vs(ae),Wa(0),U.current&&(U.current.volume=0)},children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative w-14 h-14 rounded-lg bg-gradient-to-br from-purple-600/30 to-pink-600/30 flex items-center justify-center flex-shrink-0 overflow-hidden",children:[k.cover||k.image?s.jsx("img",{src:k.cover||k.image,alt:k.title,className:"w-full h-full object-cover",onError:A=>{A.target.style.display="none"}}):null,s.jsx(As,{className:`w-6 h-6 ${k.cover||k.image?"hidden":"text-purple-400"}`}),I&&s.jsx("div",{className:"absolute inset-0 bg-purple-500/40 flex items-center justify-center",children:s.jsx("div",{className:"w-3 h-3 rounded-full bg-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-white font-semibold truncate text-sm",children:k.title}),s.jsx("p",{className:"text-white/60 text-xs truncate mt-0.5",children:k.artist||"Unknown Artist"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[k.genre&&s.jsx("span",{className:"text-xs text-white/50 bg-white/10 px-2 py-0.5 rounded-full",children:k.genre}),k.mood&&s.jsx("span",{className:"text-xs text-white/50 bg-white/10 px-2 py-0.5 rounded-full",children:k.mood})]})]}),s.jsx("button",{onClick:A=>{A.stopPropagation();const ae=typeof k.id=="string"?parseInt(k.id,10):k.id;ct(oe=>{const Q=new Set(oe);return Q.has(ae)?Q.delete(ae):Q.add(ae),Q})},className:`w-8 h-8 rounded-full flex items-center justify-center transition-all flex-shrink-0 ${At.has(typeof k.id=="string"?parseInt(k.id,10):k.id)?"bg-red-500/20 hover:bg-red-500/30":"bg-white/5 hover:bg-white/10"}`,children:s.jsx(Ba,{className:`w-4 h-4 transition-colors ${At.has(typeof k.id=="string"?parseInt(k.id,10):k.id)?"text-red-500 fill-red-500":"text-white/60"}`})}),s.jsx("button",{onClick:async A=>{A.stopPropagation();const ae=typeof k.id=="string"?parseInt(k.id,10):k.id,oe=k.preview_url||k.url||`http://localhost:8000/api/music/file/${ae}`;if(!oe||!oe.startsWith("http")&&!oe.startsWith("blob:")&&!oe.startsWith("data:")){console.warn("Invalid music URL:",oe),$e.fire({icon:"info",title:"Preview Not Available",text:"Audio preview is not available for this track. The music will be added when you post.",confirmButtonColor:"#6366f1",background:"#1f2937",color:"#fff"});return}if(!ht.current||ht.current.src!==oe){ht.current&&(ht.current.pause(),ht.current=null);try{if(!Ke){const ee=new(window.AudioContext||window.webkitAudioContext);ft(ee)}const Q=new Audio;if(Q.volume=ur,Q.loop=!0,Q.addEventListener("error",ee=>{console.warn("Audio loading error:",ee,"URL:",oe),et(!1)}),Q.addEventListener("loadstart",()=>{console.log("Audio loading started:",oe)}),Q.addEventListener("canplay",()=>{console.log("Audio can play:",oe)}),Q.src=oe,ht.current=Q,Ke)try{const ee=Ke.createMediaElementSource(Q),ce=Ke.createAnalyser();ce.fftSize=256,ce.smoothingTimeConstant=.8,ee.connect(ce),ce.connect(Ke.destination),St(ce)}catch(ee){console.warn("Could not setup audio analyser:",ee)}try{await Q.play(),et(!0)}catch(ee){console.warn("Could not play preview (this is okay):",ee),et(!1)}Q.addEventListener("pause",()=>et(!1)),Q.addEventListener("play",()=>et(!0))}catch(Q){console.warn("Could not create audio preview:",Q),et(!1)}}else if(ht.current){const Q=ht.current.src;if(Q&&Q!==""&&Q!==window.location.href&&(Q.startsWith("http")||Q.startsWith("blob:")||Q.startsWith("data:")))if(ht.current.paused){const ce=ht.current.src,Fe=ce&&ce!==""&&ce!==window.location.href&&(ce.startsWith("http")||ce.startsWith("blob:")||ce.startsWith("data:")),Ee=ht.current.__previewFailed;if(!Fe||Ee)console.log("Preview not available for this track - music will be added when posting"),et(!1);else try{await ht.current.play(),et(!0)}catch(Te){console.warn("Could not resume playback:",Te),et(!1),ht.current&&(ht.current.__previewFailed=!0)}}else ht.current.pause(),et(!1);else{console.warn("Audio element has no valid source, recreating...");const ce=new Audio;ce.volume=ur,ce.loop=!0,ce.src=oe,ht.current=ce;try{await ce.play(),et(!0)}catch(Fe){console.warn("Could not play after recreating:",Fe),et(!1)}}}},className:`w-8 h-8 rounded-full flex items-center justify-center transition-all flex-shrink-0 ${lt&&window.selectedMusicTrackId===k.id?"bg-purple-500 hover:bg-purple-600":"bg-white/10 hover:bg-white/20"}`,children:lt&&window.selectedMusicTrackId===k.id?s.jsxs("div",{className:"w-3 h-3 flex items-center justify-center gap-0.5",children:[s.jsx("div",{className:"w-0.5 h-2 bg-white rounded-full"}),s.jsx("div",{className:"w-0.5 h-3 bg-white rounded-full"}),s.jsx("div",{className:"w-0.5 h-2 bg-white rounded-full"})]}):s.jsx(Yd,{className:"w-4 h-4 text-white ml-0.5"})})]})},k.id)})]}):pa.length===0&&!Ec?s.jsxs("div",{className:"text-center py-12 px-4",children:[s.jsx(As,{className:"w-16 h-16 text-white/20 mx-auto mb-3"}),s.jsx("p",{className:"text-white/60 text-sm font-medium mb-2",children:"Music Library Unavailable"}),s.jsx("p",{className:"text-white/40 text-xs mb-4",children:"The Laravel backend server needs to be running to load music tracks."}),s.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 text-left max-w-md mx-auto",children:[s.jsx("p",{className:"text-white/70 text-xs font-medium mb-2",children:"To start the backend:"}),s.jsxs("ol",{className:"text-white/50 text-xs space-y-1 list-decimal list-inside",children:[s.jsxs("li",{children:["Open terminal in the ",s.jsx("code",{className:"bg-gray-900/50 px-1 rounded",children:"laravel-backend"})," directory"]}),s.jsxs("li",{children:["Run: ",s.jsx("code",{className:"bg-gray-900/50 px-1 rounded",children:"php artisan serve"})]}),s.jsx("li",{children:"Refresh this page"})]})]}),s.jsx("button",{onClick:()=>{ga([]),xa(!1);const k=dn;qi(null),setTimeout(()=>qi(k),100)},className:"mt-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Retry Loading"})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(As,{className:"w-16 h-16 text-white/20 mx-auto mb-3"}),s.jsx("p",{className:"text-white/60 text-sm font-medium",children:"No music found"}),s.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Try different search terms or filters"})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 bg-black/85 rounded-t-3xl px-4 pb-6",children:[Mn&&lt&&s.jsxs("div",{className:"relative h-16 rounded-lg bg-gradient-to-b from-purple-900/20 to-pink-900/20 p-3 overflow-hidden mb-4",children:[s.jsx("div",{className:"absolute inset-0 opacity-30 blur-xl transition-opacity",style:{background:`radial-gradient(circle at center, rgba(168, 85, 247, ${xt*.8}), transparent)`}}),s.jsx("div",{className:"relative h-full flex items-end justify-center gap-1",children:le.map((k,I)=>s.jsx("div",{className:"w-1.5 bg-gradient-to-t from-purple-400 to-pink-400 rounded-full transition-all duration-75",style:{height:`${k}px`,minHeight:"4px"}},I))})]}),s.jsx("h5",{className:"text-white text-base font-semibold mb-4 text-center",children:"Audio Controls"}),s.jsxs("div",{className:"mb-5",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("span",{className:"text-lg w-7",children:""}),s.jsx("span",{className:"flex-1 text-white text-sm font-medium",children:"Original audio"}),s.jsx("span",{className:"w-10 text-right text-white/70 text-sm",children:Math.round(Xr*100)})]}),s.jsx("input",{type:"range",min:0,max:1,step:.01,value:Xr,onChange:k=>{const I=parseFloat(k.target.value);Wa(I),U.current&&(U.current.volume=I)},className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #fff 0%, #fff ${Xr*100}%, #555 ${Xr*100}%, #555 100%)`}})]}),Mn&&s.jsxs("div",{className:"mb-5",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx("span",{className:"text-lg w-7",children:""}),s.jsx("span",{className:"flex-1 text-white text-sm font-medium",children:"Added music"}),s.jsx("span",{className:"w-10 text-right text-white/70 text-sm",children:Math.round(ur*100)})]}),s.jsx("input",{type:"range",min:0,max:1,step:.01,value:ur,onChange:k=>{const I=parseFloat(k.target.value);Uo(I),ht.current&&(ht.current.volume=I)},className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #fff 0%, #fff ${ur*100}%, #555 ${ur*100}%, #555 100%)`}})]}),Mn&&s.jsxs("button",{onClick:()=>{Vs(null),et(!1),ht.current&&(ht.current.pause(),ht.current=null),Et.current&&(cancelAnimationFrame(Et.current),Et.current=null),St(null),window.selectedMusicTrackId=void 0,Wa(1),U.current&&(U.current.volume=1)},className:"w-full mt-4 px-4 py-2.5 text-sm rounded-lg bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 text-red-300 transition-colors font-medium flex items-center justify-center gap-2",children:[s.jsx(pt,{className:"w-4 h-4"}),"Remove Music"]})]})]})]}),dn==="transitions"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-white font-semibold text-lg",children:"Transitions"}),p.length<2&&s.jsx("span",{className:"text-xs text-white/50 bg-white/10 px-2 py-1 rounded-full",children:"Add 2+ clips to use transitions"})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:()=>{var k;return(k=x.current)==null?void 0:k.click()},className:"w-full px-4 py-3 bg-purple-600/20 hover:bg-purple-600/30 border-2 border-dashed border-purple-500/50 rounded-xl text-white font-medium transition-all flex items-center justify-center gap-2",children:[s.jsx(na,{className:"w-5 h-5"}),s.jsx("span",{children:"Add Video/Image Clip"})]})}),p.length>0&&s.jsxs("div",{className:"mb-4 p-3 bg-gray-800/30 rounded-lg",children:[s.jsxs("p",{className:"text-white/60 text-xs mb-2",children:["Current clips (",p.length,"):"]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:p.map((k,I)=>s.jsxs("div",{className:"px-2 py-1 bg-purple-500/20 border border-purple-500/40 rounded text-xs text-white flex items-center gap-1",children:[s.jsxs("span",{children:["Clip ",I+1]}),s.jsx("button",{onClick:()=>{S(A=>A.filter(ae=>ae.id!==k.id)),I<Wt.length&&ma(A=>A.filter((ae,oe)=>oe!==I&&oe!==I-1))},className:"ml-1 hover:text-red-400",children:s.jsx(pt,{className:"w-3 h-3"})})]},k.id))})]}),p.length>=2?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[{id:"none",name:"None",icon:"",ffmpeg:"none"},{id:"fade",name:"Fade",icon:"",ffmpeg:"fade"},{id:"crossfade",name:"Crossfade",icon:"",ffmpeg:"fade"},{id:"slideleft",name:"Slide Left",icon:"",ffmpeg:"slideleft"},{id:"slideright",name:"Slide Right",icon:"",ffmpeg:"slideright"},{id:"slideup",name:"Slide Up",icon:"",ffmpeg:"slideup"},{id:"slidedown",name:"Slide Down",icon:"",ffmpeg:"slidedown"},{id:"wiperight",name:"Wipe Right",icon:"",ffmpeg:"wiperight"},{id:"wipeleft",name:"Wipe Left",icon:"",ffmpeg:"wipeleft"},{id:"zoom",name:"Zoom",icon:"",ffmpeg:"zoom"},{id:"zoomin",name:"Zoom In",icon:"",ffmpeg:"zoomin"},{id:"zoomout",name:"Zoom Out",icon:"",ffmpeg:"zoomout"},{id:"spin",name:"Spin",icon:"",ffmpeg:"spin"},{id:"fadewhite",name:"Flash",icon:"",ffmpeg:"fadewhite"},{id:"fadeblack",name:"Fade Black",icon:"",ffmpeg:"fadeblack"}].map(k=>{var I;return s.jsxs("button",{onClick:()=>{const A=[];for(let ae=0;ae<p.length-1;ae++)A.push({type:k.id,duration:.5,direction:k.id.includes("slide")?"right":void 0});ma(A)},className:`p-4 rounded-xl border-2 transition-all ${Wt.length>0&&((I=Wt[0])==null?void 0:I.type)===k.id?"bg-purple-500/30 border-purple-500/60 shadow-lg shadow-purple-500/20":"bg-white/5 border-white/20 hover:bg-white/10 hover:border-white/30"}`,children:[s.jsx("div",{className:"text-2xl mb-1",children:k.icon}),s.jsx("div",{className:"text-white text-xs font-medium",children:k.name})]},k.id)})}),Wt.length>0&&((aw=Wt[0])==null?void 0:aw.type)!=="none"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white text-sm font-medium",children:"Transition Duration"}),s.jsxs("span",{className:"text-white/70 text-sm",children:[(iw=Wt[0])==null?void 0:iw.duration.toFixed(1),"s"]})]}),s.jsx("input",{type:"range",min:"0.1",max:"2.0",step:"0.1",value:((ow=Wt[0])==null?void 0:ow.duration)||.5,onChange:k=>{const I=parseFloat(k.target.value);ma(A=>A.map(ae=>({...ae,duration:I})))},className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"})]}),s.jsxs("div",{className:"mt-4 p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("p",{className:"text-white/60 text-xs mb-2",children:"Transitions between clips:"}),s.jsx("div",{className:"flex gap-2 flex-wrap mb-3",children:Array.from({length:p.length-1}).map((k,I)=>{var A;return s.jsxs("div",{className:"px-2 py-1 bg-purple-500/20 border border-purple-500/40 rounded text-xs text-white",children:["Clip ",I+1,"  ",I+2,": ",((A=Wt[I])==null?void 0:A.type)||"none"]},I)})}),Wt.length>0&&((lw=Wt[0])==null?void 0:lw.type)!=="none"&&p.length>=2&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-white/60 text-xs mb-2",children:"Preview (animated):"}),s.jsx("div",{className:"relative w-full bg-black rounded-lg overflow-hidden",style:{height:"180px",minHeight:"180px"},children:s.jsx("canvas",{ref:Re,className:"w-full h-full",style:{width:"100%",height:"100%",objectFit:"contain"}})})]})]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(lx,{className:"w-16 h-16 text-white/20 mx-auto mb-3"}),s.jsx("p",{className:"text-white/60 text-sm mb-2",children:p.length===0?"Add 2+ clips to use transitions":`Add ${2-p.length} more clip${2-p.length>1?"s":""} to use transitions`}),s.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Transitions appear between consecutive clips"}),p.length===1&&s.jsxs("div",{className:"mt-4 p-3 bg-gray-800/30 rounded-lg",children:[s.jsx("p",{className:"text-white/60 text-xs mb-2",children:"Current clips:"}),s.jsx("div",{className:"flex gap-2 justify-center",children:s.jsx("div",{className:"px-2 py-1 bg-purple-500/20 border border-purple-500/40 rounded text-xs text-white",children:"Clip 1"})})]})]})]}),dn==="voiceover"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-white font-semibold text-lg",children:"Voice Over"}),Z&&s.jsx("span",{className:"text-xs text-purple-400 bg-purple-500/20 px-2 py-1 rounded-full",children:"Recorded"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white text-sm font-medium",children:"Start Time"}),s.jsxs("span",{className:"text-white/70 text-sm",children:[M.toFixed(1),"s"]})]}),s.jsx("input",{type:"range",min:"0",max:ne||i||90,step:"0.1",value:M,onChange:k=>{const I=parseFloat(k.target.value);G(I),U.current&&(U.current.currentTime=I)},className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"}),s.jsxs("div",{className:"flex gap-2 text-xs text-white/50",children:[s.jsx("button",{onClick:()=>{if(U.current){const k=Math.max(0,U.current.currentTime-1);G(k),U.current.currentTime=k}},className:"px-2 py-1 bg-gray-800/50 rounded hover:bg-gray-700/50",children:"-1s"}),s.jsx("button",{onClick:()=>{if(U.current){const k=Math.min(ne||i||90,U.current.currentTime+1);G(k),U.current.currentTime=k}},className:"px-2 py-1 bg-gray-800/50 rounded hover:bg-gray-700/50",children:"+1s"})]})]}),s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("button",{onMouseDown:async()=>{try{const k=await navigator.mediaDevices.getUserMedia({audio:!0}),I=new MediaRecorder(k);Ve.current=I,Je.current=[],I.ondataavailable=A=>{A.data.size>0&&Je.current.push(A.data)},I.onstop=()=>{const A=new Blob(Je.current,{type:"audio/webm"});$(A);const ae=URL.createObjectURL(A);Pe(ae),U.current&&U.current.pause(),k.getTracks().forEach(oe=>oe.stop()),Ze.current&&(Ze.current.src=ae,Ze.current.load())},I.start(),re(!0),U.current&&(U.current.currentTime=M,U.current.play().catch(A=>{A.name!=="AbortError"&&A.name!=="NotAllowedError"&&console.warn("Video play error during voice-over:",A)}))}catch(k){console.error("Error starting voice-over recording:",k),re(!1);let I="Please allow microphone access to record voice-over.";k.name==="NotAllowedError"||k.name==="PermissionDeniedError"?I="Microphone access was denied. Please allow microphone access in your browser settings.":k.name==="NotFoundError"&&(I="No microphone found. Please connect a microphone and try again."),$e.fire({title:"Microphone Access Required",html:`
                                                                <div style="text-align: center; padding: 10px 0;">
                                                                    <p style="color: #ffffff; font-size: 14px; line-height: 20px; margin: 0;">
                                                                        ${I}
                                                                    </p>
                                                                </div>
                                                            `,showConfirmButton:!0,confirmButtonText:"OK",confirmButtonColor:"#0095f6",background:"#262626",color:"#ffffff"})}},onMouseUp:async()=>{Ve.current&&ve&&(Ve.current.stop(),re(!1),U.current&&U.current.pause())},onMouseLeave:()=>{Ve.current&&ve&&(Ve.current.stop(),re(!1),U.current&&U.current.pause())},className:`w-20 h-20 rounded-full text-white font-semibold transition-all flex items-center justify-center ${ve?"bg-red-600 scale-110 animate-pulse":"bg-red-500 hover:bg-red-600"}`,children:ve?s.jsx("div",{className:"w-4 h-4 bg-white rounded"}):s.jsx(qd,{className:"w-8 h-8"})}),s.jsx("p",{className:"text-white/60 text-sm text-center",children:ve?"Recording... Release to stop":"Hold to Record"})]}),Z&&s.jsxs("div",{className:"space-y-4 p-4 bg-gray-800/30 rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white text-sm font-medium",children:"Video Volume"}),s.jsxs("span",{className:"text-white/70 text-sm",children:[Math.round(Xr*100),"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:Xr,onChange:k=>{const I=parseFloat(k.target.value);Wa(I),U.current&&(U.current.volume=I)},disabled:!j,className:`w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb ${j?"":"opacity-50 cursor-not-allowed"}`}),!j&&s.jsx("p",{className:"text-white/50 text-xs",children:'Enable "Keep Original Audio" to adjust video volume'})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white text-sm font-medium",children:"Voice-over Volume"}),s.jsxs("span",{className:"text-white/70 text-sm",children:[Math.round(P*100),"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:P,onChange:k=>Y(parseFloat(k.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t border-white/10",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:se,onChange:k=>K(k.target.checked),className:"w-4 h-4 rounded"}),s.jsx("span",{className:"text-white text-sm",children:"Noise Reduction"})]}),se&&s.jsxs("div",{className:"ml-6 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white/70 text-xs",children:"Strength"}),s.jsxs("span",{className:"text-white/50 text-xs",children:[Math.round(me*100),"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:me,onChange:k=>pe(parseFloat(k.target.value)),className:"w-full h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"})]})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:j,onChange:k=>O(k.target.checked),className:"w-4 h-4 rounded"}),s.jsx("span",{className:"text-white text-sm",children:"Keep Original Audio"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{Ze.current&&(Ze.current.paused?Ze.current.play():Ze.current.pause())},className:"flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Preview"}),s.jsx("button",{onClick:()=>{$(null),Pe(null),Ze.current&&(Ze.current.src="")},className:"px-4 py-2 bg-red-600/20 hover:bg-red-600/30 border border-red-500/30 text-red-300 rounded-lg text-sm font-medium transition-colors",children:s.jsx(pt,{className:"w-4 h-4"})})]})]}),s.jsx("audio",{ref:Ze,style:{display:"none"}})]}),dn==="overlays"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-white font-semibold text-lg",children:"Stickers"}),s.jsxs("span",{className:"text-xs text-purple-400 bg-purple-500/20 px-2 py-1 rounded-full",children:[De.length," added"]})]}),s.jsxs("button",{onClick:()=>Nt(!0),className:"w-full px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsx(na,{className:"w-5 h-5"}),s.jsx("span",{children:"Add Sticker"})]}),s.jsx(gp,{isOpen:Jt,onClose:()=>Nt(!1),onSelectSticker:k=>{const I=ne||i||90,A={id:`sticker-${Date.now()}`,stickerId:k.id,sticker:k,x:50,y:50,scale:1,rotation:0,opacity:1,startTime:0,endTime:I};console.log(" Adding sticker:",A),console.log(" Current stickers before add:",De.length),Ce(ae=>{const oe=[...ae,A];return console.log(" Stickers after add:",oe.length,oe),oe}),Tt(A.id),Nt(!1),setTimeout(()=>{if(st.current){const ae=st.current.offsetWidth,oe=st.current.offsetHeight;ae>0&&oe>0&&(Bt({width:ae,height:oe}),console.log(" Forced container size update:",{width:ae,height:oe}))}},100),$e.fire({icon:"success",title:"Sticker Added!",text:`${k.name} has been added to your video`,timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"})}}),De.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"text-white/70 text-sm font-medium",children:"Added Stickers"}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:De.map(k=>s.jsxs("div",{className:`p-3 rounded-lg border ${Ft===k.id?"bg-purple-500/20 border-purple-500":"bg-gray-800/50 border-gray-700"}`,onClick:()=>Tt(k.id),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[k.sticker.emoji?s.jsx("span",{className:"text-2xl",children:k.sticker.emoji}):k.sticker.url?s.jsx("img",{src:k.sticker.url,alt:"",className:"w-8 h-8 object-contain"}):s.jsx("span",{className:"text-white/60 text-sm",children:k.sticker.name}),s.jsx("span",{className:"text-white/70 text-sm",children:k.sticker.name})]}),s.jsx("button",{onClick:I=>{I.stopPropagation(),Ce(De.filter(A=>A.id!==k.id)),Ft===k.id&&Tt(null)},className:"p-1 hover:bg-red-500/20 rounded transition-colors",children:s.jsx(pt,{className:"w-4 h-4 text-red-400"})})]}),Ft===k.id&&s.jsxs("div",{className:"mt-3 space-y-2 pt-3 border-t border-white/10",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white/70 text-xs",children:"Opacity"}),s.jsxs("span",{className:"text-white/50 text-xs",children:[Math.round(k.opacity*100),"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:k.opacity,onChange:I=>{const A=De.map(ae=>ae.id===k.id?{...ae,opacity:parseFloat(I.target.value)}:ae);Ce(A)},className:"w-full h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white/70 text-xs",children:"Scale"}),s.jsxs("span",{className:"text-white/50 text-xs",children:[Math.round(k.scale*100),"%"]})]}),s.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:k.scale,onChange:I=>{const A=De.map(ae=>ae.id===k.id?{...ae,scale:parseFloat(I.target.value)}:ae);Ce(A)},className:"w-full h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white/70 text-xs",children:"Rotation"}),s.jsxs("span",{className:"text-white/50 text-xs",children:[Math.round(k.rotation),""]})]}),s.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:k.rotation,onChange:I=>{const A=De.map(ae=>ae.id===k.id?{...ae,rotation:parseFloat(I.target.value)}:ae);Ce(A)},className:"w-full h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer slider-thumb"})]})]})]},k.id))})]}),De.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Xl,{className:"w-12 h-12 text-white/30 mx-auto mb-2"}),s.jsx("p",{className:"text-white/60 text-sm",children:"No stickers added yet"}),s.jsx("p",{className:"text-white/40 text-xs mt-1",children:'Click "Add Sticker" to get started'})]}),De.length>0&&(()=>{const k=ne||i||90,I=50,A=k*I;return s.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10",children:[s.jsx("h5",{className:"text-white/70 text-sm font-medium mb-3",children:"Sticker Timeline"}),s.jsx("div",{className:"relative w-full bg-gray-900 rounded-md overflow-x-auto",style:{minHeight:`${De.length*36+40}px`},children:s.jsxs("div",{className:"relative",style:{width:`${A}px`,minWidth:"100%",height:`${De.length*36+20}px`,padding:"8px"},children:[s.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-20 pointer-events-none",style:{left:`${(gt||0)*I+8}px`,height:`${De.length*36}px`}}),De.map((ae,oe)=>{const Q=(ae.startTime||0)*I,ee=((ae.endTime||k)-(ae.startTime||0))*I;return s.jsxs("div",{className:"relative mb-1",style:{height:"32px",top:`${oe*36}px`},children:[s.jsxs("div",{className:"absolute top-0 h-full bg-purple-500/70 hover:bg-purple-500 rounded-md cursor-move flex items-center justify-center group",style:{left:`${Q}px`,width:`${ee}px`,minWidth:"20px"},onMouseDown:ce=>{tt({stickerId:ae.id,type:"drag",startX:ce.clientX,startTime:ae.startTime||0})},children:[s.jsx("div",{className:"flex items-center gap-1 px-2 text-white text-xs pointer-events-none",children:ae.sticker.emoji?s.jsx("span",{className:"text-sm",children:ae.sticker.emoji}):ae.sticker.url?s.jsx("img",{src:ae.sticker.url,alt:"",className:"w-4 h-4 object-contain"}):s.jsx("span",{className:"truncate max-w-[80px] text-[10px]",children:ae.sticker.name})}),s.jsx("div",{className:"absolute left-0 top-0 h-full w-2 bg-white/80 hover:bg-white cursor-w-resize rounded-l-md opacity-0 group-hover:opacity-100 transition-opacity",onMouseDown:ce=>{ce.stopPropagation(),tt({stickerId:ae.id,type:"resize-left",startX:ce.clientX,startTime:ae.startTime||0})}}),s.jsx("div",{className:"absolute right-0 top-0 h-full w-2 bg-white/80 hover:bg-white cursor-e-resize rounded-r-md opacity-0 group-hover:opacity-100 transition-opacity",onMouseDown:ce=>{ce.stopPropagation(),tt({stickerId:ae.id,type:"resize-right",startX:ce.clientX,startTime:ae.endTime||k})}})]}),ee>60&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"absolute -top-4 left-0 text-white/50 text-[10px]",style:{left:`${Q}px`},children:[(ae.startTime||0).toFixed(1),"s"]}),s.jsxs("div",{className:"absolute -top-4 text-white/50 text-[10px]",style:{left:`${Q+ee}px`,transform:"translateX(-100%)"},children:[(ae.endTime||k).toFixed(1),"s"]})]})]},ae.id)}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-4 border-t border-white/10",children:Array.from({length:Math.ceil(k/5)+1}).map((ae,oe)=>{const Q=oe*5;if(Q>k)return null;const ee=Q*I;return s.jsx("div",{className:"absolute top-0 h-full border-l border-white/20",style:{left:`${ee}px`},children:s.jsxs("span",{className:"absolute -top-4 left-0.5 text-white/40 text-[10px]",children:[Q,"s"]})},oe)})})]})})]})})()]}),!["filters","adjustments","lut","multi-clip","trim","music","transitions","voiceover","overlays"].includes(dn)&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-white font-semibold text-sm mb-4 uppercase tracking-wider text-white/60",children:((cw=Wu.find(k=>k.id===dn))==null?void 0:cw.name)||"Category"}),s.jsxs("p",{className:"text-white/60 text-sm",children:[dn," options coming soon..."]})]})]})]})]})]}),s.jsx("input",{ref:x,type:"file",accept:"image/*,video/*",multiple:!0,className:"hidden",onChange:_})]})}function pq(){const e=Xt(),{user:t}=tn(),[n,r]=D.useState(!1),[a,i]=D.useState(!1),[o,l]=D.useState(!1),[c,d]=D.useState(!1),[u,f]=D.useState(!1);return D.useEffect(()=>{const h=setTimeout(()=>i(!0),200),g=setTimeout(()=>l(!0),800),y=setTimeout(()=>d(!0),1500),p=setTimeout(()=>f(!0),2200);if(!(new URLSearchParams(window.location.search).get("stay")==="true")){const v=setTimeout(()=>{r(!0),t?e("/feed",{replace:!0}):e("/login",{replace:!0})},3500);return()=>{clearTimeout(g),clearTimeout(y),clearTimeout(p),clearTimeout(v)}}return()=>{clearTimeout(h),clearTimeout(g),clearTimeout(y),clearTimeout(p)}},[t,e]),s.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center",style:{perspective:"1000px"},children:[s.jsxs("div",{className:"flex flex-col items-center gap-8",style:{transformStyle:"preserve-3d"},children:[s.jsx("div",{className:"flex items-center justify-center transition-all duration-700 ease-out",style:{opacity:a?1:0,transform:a?"scale(1) rotate(0deg)":"scale(0.5) rotate(-180deg)",filter:a?"blur(0px)":"blur(8px)"},children:s.jsx("img",{src:"/gazetteer logo 1/gazetteer logo 1.jpg",alt:"Gazetteer Logo",className:"w-24 h-24 object-contain rounded-full",style:{backgroundColor:"transparent"}})}),s.jsxs("div",{className:"flex flex-col items-center gap-2 min-h-[120px]",children:[s.jsx("div",{className:"text-center",children:s.jsx("span",{className:`text-4xl font-bold text-white tracking-tight transition-all duration-700 ease-out ${o?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 -translate-y-8"}`,style:{transform:o?"scale(1) translateY(0px)":"scale(0.3) translateY(-32px)",filter:o?"blur(0px)":"blur(4px)"},children:"EVERY"})}),s.jsx("div",{className:"text-center",children:s.jsx("span",{className:`text-4xl font-bold text-white tracking-tight transition-all duration-700 ease-out ${c?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 -translate-y-8"}`,style:{transform:c?"scale(1) translateY(0px)":"scale(0.3) translateY(-32px)",filter:c?"blur(0px)":"blur(4px)"},children:"STORY"})}),s.jsx("div",{className:"text-center",children:s.jsx("span",{className:`text-2xl font-semibold text-gray-300 tracking-tight transition-all duration-700 ease-out ${u?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 -translate-y-8"}`,style:{transform:u?"scale(1) translateY(0px)":"scale(0.3) translateY(-32px)",filter:u?"blur(0px)":"blur(4px)"},children:"HAS A LOCATION"})})]})]}),u&&s.jsxs("div",{className:"mt-16 flex gap-2 transition-opacity duration-500",style:{opacity:u?1:0},children:[s.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce shadow-lg",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-3 h-3 bg-pink-600 rounded-full animate-bounce shadow-lg",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full animate-bounce shadow-lg",style:{animationDelay:"300ms"}})]}),s.jsx("div",{className:"absolute bottom-8 text-gray-400 text-sm transition-opacity duration-500",style:{opacity:u?1:0},children:"Gazetteer 25"})]})}function gq(){const e=Xt(),t=qn(),{user:n}=tn(),r=t.state,[a,i]=m.useState(""),[o,l]=m.useState(""),[c,d]=m.useState(""),[u,f]=m.useState(""),[h,g]=m.useState(!1);if(m.useEffect(()=>{r||e("/boost")},[r,e]),!r)return null;const{post:y,feedType:p,price:S}=r,x=_=>{const W=_.replace(/\s+/g,"").replace(/[^0-9]/gi,""),T=W.match(/\d{4,16}/g),E=T&&T[0]||"",B=[];for(let H=0,q=E.length;H<q;H+=4)B.push(E.substring(H,H+4));return B.length?B.join(" "):W},v=_=>{const W=_.replace(/\D/g,"");return W.length>=2?W.substring(0,2)+"/"+W.substring(2,4):W},b=_=>{i(x(_.target.value))},w=_=>{d(v(_.target.value))},N=_=>{const W=_.target.value.replace(/\D/g,"");f(W.substring(0,3))},R=async _=>{_.preventDefault(),g(!0);try{await new Promise(T=>setTimeout(T,2e3)),n!=null&&n.id&&await kW(y.id,n.id,p,S),g(!1),(await $e.fire({icon:"success",title:"Payment Complete!",html:`
                    <p style="margin: 1rem 0; color: #374151;">Your payment is complete and your post is boosted for <strong>6 hours</strong> in the <strong>${C(p)}</strong>.</p>
                    <p style="margin-top: 1rem; color: #6B7280; font-size: 0.9rem;">Thank you for using our boost service!</p>
                `,showCancelButton:!0,confirmButtonText:"Back to Newsfeed",cancelButtonText:"Stay on Boost Page",confirmButtonColor:"#8B5CF6",cancelButtonColor:"#6B7280",customClass:{popup:"rounded-2xl",confirmButton:"px-6 py-2 rounded-lg font-semibold",cancelButton:"px-6 py-2 rounded-lg font-semibold"},buttonsStyling:!0,allowOutsideClick:!1,allowEscapeKey:!1})).isConfirmed?e("/feed",{state:{boostSuccess:!0,postId:y.id}}):e("/boost",{state:{boostSuccess:!0,postId:y.id}})}catch(W){console.error("Payment error:",W),g(!1)}},C=_=>{switch(_){case"local":return"Local Newsfeed";case"regional":return"Regional Newsfeed";case"national":return"National Newsfeed"}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-blue-50 dark:from-gray-900 dark:to-gray-950",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white/80 dark:bg-gray-950/80 backdrop-blur border-b border-gray-200 dark:border-gray-800 px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>e("/boost"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Back",children:s.jsx(ui,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Payment"})]})}),s.jsx("div",{className:"px-4 pt-6 pb-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-lg p-4 mb-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 uppercase tracking-wide",children:"Order Summary"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Boost Type"}),s.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:C(p)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Duration"}),s.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"6 hours"})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-800 pt-3 flex items-center justify-between",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Total"}),s.jsxs("span",{className:"text-2xl font-bold text-brand-600 dark:text-brand-400",children:["",S.toFixed(2)]})]})]})]})}),s.jsx("div",{className:"px-4 pb-6",children:s.jsxs("form",{onSubmit:R,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Number"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:s.jsx(rU,{className:"w-5 h-5 text-gray-400"})}),s.jsx("input",{type:"text",value:a,onChange:b,placeholder:"1234 5678 9012 3456",maxLength:19,required:!0,className:"w-full pl-12 pr-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cardholder Name"}),s.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),placeholder:"John Doe",required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expiry Date"}),s.jsx("input",{type:"text",value:c,onChange:w,placeholder:"MM/YY",maxLength:5,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CVV"}),s.jsx("input",{type:"text",value:u,onChange:N,placeholder:"123",maxLength:3,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-xl",children:[s.jsx(Oh,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 mt-0.5 flex-shrink-0"}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Your payment information is encrypted and secure. We use industry-standard SSL encryption to protect your data."})]}),s.jsx("button",{type:"submit",disabled:h,className:`w-full py-4 px-6 rounded-xl font-semibold text-white transition-all duration-200 ${h?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-brand-600 hover:bg-brand-700 dark:bg-brand-500 dark:hover:bg-brand-600 shadow-lg hover:shadow-xl active:scale-[0.98]"}`,children:h?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):`Pay ${S.toFixed(2)}`})]})})]})})}function xq(){const{collectionId:e}=Vy(),t=Xt(),n=qn(),{user:r}=tn(),a=_u(),i=(r==null?void 0:r.id)||"",[o,l]=m.useState([]),[c,d]=m.useState(!0),[u,f]=m.useState("Collection"),[h,g]=m.useState(!1),[y,p]=m.useState(null),[S,x]=m.useState(!1),[v,b]=m.useState(null),[w,N]=m.useState(!1),[R,C]=m.useState(null);function _(E,B){l(H=>H.map(q=>q.id===E?B(q):q))}function W(E){p(E),g(!0)}m.useEffect(()=>{const E=n.state;E!=null&&E.collectionName&&f(E.collectionName)},[n.state]),m.useEffect(()=>{e&&(r!=null&&r.id)&&T()},[e,r==null?void 0:r.id]);async function T(){if(!(!e||!(r!=null&&r.id))){d(!0);try{const B=(await TW(e)).map(H=>Mr(r.id,H));l(B)}catch(E){console.error("Error loading collection posts:",E)}finally{d(!1)}}}return r?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-brand-100 dark:from-gray-900 dark:to-gray-800 pb-20",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 flex items-center gap-4",children:[s.jsx("button",{onClick:()=>t("/profile"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Back",children:s.jsx(ui,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:u}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.length," ",o.length===1?"post":"posts"]})]})]})}),s.jsx("div",{className:"max-w-2xl mx-auto pt-6",children:c?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block w-8 h-8 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading posts..."})]}):o.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No posts in this collection yet"})}):s.jsx("div",{className:"space-y-6",children:o.map(E=>s.jsx(Dv,{post:E,onLike:async()=>{if(!a){_(E.id,H=>({...H,userLiked:!H.userLiked})),await Un({type:"like",postId:E.id,userId:i});return}const B=await Ri(i,E.id);_(E.id,H=>({...B})),window.dispatchEvent(new CustomEvent(`likeToggled-${E.id}`,{detail:{liked:B.userLiked,likes:B.stats.likes}}))},onFollow:async()=>{if(!a){await Un({type:"follow",postId:E.id,userId:i});return}const B=await aa(i,E.id);_(E.id,H=>({...B}))},onShare:async()=>{b(E),x(!0)},onOpenComments:()=>W(E.id),onView:async()=>{if(!a){await Un({type:"view",postId:E.id,userId:i});return}const B=await Zd(i,E.id);_(E.id,H=>({...B})),window.dispatchEvent(new CustomEvent(`viewAdded-${E.id}`))},onReclip:async()=>{if(E.userHandle===(r==null?void 0:r.handle)){console.log("Cannot reclip your own post");return}if(E.userReclipped){console.log("Post already reclipped by user, ignoring reclip request");return}if(!a){_(E.id,H=>({...H,userReclipped:!0,stats:{...H.stats,reclips:H.stats.reclips+1}})),await Un({type:"reclip",postId:E.id,userId:i,userHandle:(r==null?void 0:r.handle)||"Unknown@Unknown"}),window.dispatchEvent(new CustomEvent(`reclipAdded-${E.id}`));return}const{originalPost:B}=await Rl(i,E.id,(r==null?void 0:r.handle)||"Unknown@Unknown");_(E.id,H=>({...B})),window.dispatchEvent(new CustomEvent(`reclipAdded-${E.id}`,{detail:{reclips:B.stats.reclips}}))},onOpenScenes:()=>{C(E),N(!0)}},E.id))})}),y&&s.jsx(Yb,{postId:y,isOpen:h,onClose:()=>{g(!1),p(null)}}),v&&s.jsx(op,{post:v,isOpen:S,onClose:()=>{x(!1),b(null)}}),R&&s.jsx(Mu,{post:R,isOpen:w,onClose:()=>{N(!1),C(null)},onLike:async()=>{if(!a){_(R.id,B=>({...B,userLiked:!B.userLiked})),await Un({type:"like",postId:R.id,userId:i});return}const E=await Ri(i,R.id);_(R.id,B=>({...E})),C(E),window.dispatchEvent(new CustomEvent(`likeToggled-${R.id}`,{detail:{liked:E.userLiked,likes:E.stats.likes}}))},onFollow:async()=>{if(!a){await Un({type:"follow",postId:R.id,userId:i});return}const E=await aa(i,R.id);_(R.id,B=>({...E})),C(E)},onShare:async()=>{b(R),x(!0)},onOpenComments:()=>W(R.id),onReclip:async()=>{if(R.userHandle===(r==null?void 0:r.handle)){console.log("Cannot reclip your own post");return}if(R.userReclipped){console.log("Post already reclipped by user, ignoring reclip request");return}if(!a){_(R.id,B=>({...B,userReclipped:!0,stats:{...B.stats,reclips:B.stats.reclips+1}})),await Un({type:"reclip",postId:R.id,userId:i,userHandle:(r==null?void 0:r.handle)||"Unknown@Unknown"}),window.dispatchEvent(new CustomEvent(`reclipAdded-${R.id}`));return}const{originalPost:E}=await Rl(i,R.id,(r==null?void 0:r.handle)||"Unknown@Unknown");_(R.id,B=>({...E})),C(E),window.dispatchEvent(new CustomEvent(`reclipAdded-${R.id}`,{detail:{reclips:E.stats.reclips}}))}})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-50 to-brand-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Not Signed In"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please sign in to view collections"}),s.jsx("button",{onClick:()=>t("/login"),className:"px-6 py-3 bg-gradient-to-r from-brand-500 to-brand-600 text-white font-semibold rounded-xl shadow-lg hover:from-brand-600 hover:to-brand-700 transition-all duration-200",children:"Sign In"})]})})}function yq(){const e=Xt(),[t,n]=m.useState([]),[r,a]=m.useState("Gazetteer"),[i,o]=m.useState(!0),[l,c]=m.useState(null),d=m.useCallback(async()=>{o(!0),c(null);try{const h=await t3(r);n(h)}catch(h){const g=h instanceof Error?h.message:"Failed to load templates";c(g),console.error("Error loading templates:",h)}finally{o(!1)}},[r]);m.useEffect(()=>{d()},[d]);const u=m.useCallback(h=>{e("/template-editor",{state:{template:h}})},[e]),f=m.memo(({template:h,onSelect:g})=>s.jsxs("button",{onClick:()=>g(h),"aria-label":`Select ${h.name} template`,className:"relative aspect-[9/16] rounded-lg overflow-hidden bg-gray-900 group cursor-pointer border border-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-black",children:[s.jsxs("div",{className:"absolute inset-0 bg-gray-900",children:[s.jsx("img",{src:h.thumbnailUrl,alt:h.name,className:"w-full h-full object-cover",onError:y=>{const p=y.target;p.src.includes("via.placeholder")||(p.src="https://via.placeholder.com/400x600/1a1a1a/ffffff?text="+encodeURIComponent(h.name))}}),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors"})]}),s.jsx("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black/60 backdrop-blur-sm text-white text-xs font-semibold rounded",children:h.name}),s.jsx("div",{className:"absolute bottom-2 right-2 p-1.5 bg-black/60 backdrop-blur-sm rounded-full border border-white",children:s.jsx(na,{className:"w-4 h-4 text-white"})})]}));return f.displayName="TemplateCard",s.jsxs("div",{className:"min-h-screen bg-black text-white",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-black/80 backdrop-blur border-b border-gray-800",children:s.jsxs("div",{className:"max-w-md mx-auto px-4 h-14 flex items-center justify-between",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 rounded-full hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(pt,{className:"w-6 h-6"})}),s.jsx("h1",{className:"text-lg font-bold text-center",style:{background:fl.SILVER_WHITE,backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",animation:`shimmer ${fi.SHIMMER}ms linear infinite`},children:"Templates"}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"max-w-md mx-auto px-4 py-6",children:[s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"grid grid-cols-3 gap-3",children:oq.map(h=>s.jsx("button",{onClick:()=>a(h),"aria-pressed":r===h,"aria-label":`Filter templates by ${h}`,className:`px-4 py-2 text-sm font-medium whitespace-nowrap transition-colors text-center ${r===h?"text-white":"text-gray-400 hover:text-gray-300"}`,children:h},h))})}),i?s.jsxs("div",{className:"flex items-center justify-center py-12",role:"status","aria-label":"Loading templates",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin","aria-hidden":"true"}),s.jsx("span",{className:"sr-only",children:"Loading templates..."})]}):l?s.jsxs("div",{className:"text-center py-12 text-red-400",children:[s.jsx("p",{role:"alert",children:l}),s.jsx("button",{onClick:d,className:"mt-4 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:"Try Again"})]}):t.length===0?s.jsx("div",{className:"text-center py-12 text-gray-400",children:s.jsx("p",{children:"No templates found in this category"})}):s.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(h=>s.jsx(f,{template:h,onSelect:u},h.id))}),s.jsx("p",{className:"text-center text-sm mt-6 px-4",style:{background:fl.MARKETING,backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",animation:`shimmer ${fi.SHIMMER}ms linear infinite`},children:"Take your stories around the world with Gazetteer"}),s.jsx("div",{className:"mt-6 flex items-center justify-center pb-6",children:s.jsxs("div",{className:"w-full max-w-sm h-[200px] relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/20 via-cyan-500/20 to-indigo-500/20 blur-xl rounded-2xl"}),s.jsxs("div",{className:"relative rounded-2xl overflow-hidden border border-emerald-500/30 bg-gradient-to-br from-gray-900 to-black p-2",children:[s.jsx("img",{src:"/placeholders/world-map.jpg",alt:"World Map",className:"w-full h-full object-contain",style:{filter:"brightness(0.95) contrast(1.2)",opacity:.95},onError:h=>{const g=h.target;g.src="https://upload.wikimedia.org/wikipedia/commons/8/83/Equirectangular_projection_SW.jpg"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent pointer-events-none"})]})]})})]})]})}async function bq(e){return console.log("Automatic transcription from video requires a cloud service (Google Speech-to-Text, AWS Transcribe, etc.)"),console.log("Video URL:",e),null}let Ya=null;function vq(){var e;if(Ya)return Ya;if(typeof window<"u"&&typeof document<"u")return Ya="web",Ya;try{const t=require("react-native");if((e=t==null?void 0:t.Platform)!=null&&e.OS){const n=t.Platform.OS;return Ya=n==="ios"||n==="android"?n:"web",Ya}}catch{}return Ya="web",Ya}function bl(){return vq()==="web"}function n3(e){switch(e){case"tiktok":return["tiktok","tt_","tt-","tt ","tiktok_","tiktok-","tiktok ","musical","snapchat","saved","download","video","vid","mp4","mov","m4v"];case"instagram":return["instagram","reel","ig_","ig-","insta","ig ","instagram_","instagram-","instagram ","saved","download","video","vid","mp4","mov","m4v"];case"youtube-shorts":return["youtube","shorts","yt_","yt-","yt ","youtube_","youtube-","youtube ","saved","download","video","vid","mp4","mov","m4v"];default:return[]}}function wq(e,t){const n=n3(t),r=e.toLowerCase();return n.some(a=>r.includes(a.toLowerCase()))}function qx(e,t){const n=e.filter(r=>wq(r.name,t));return n.length>0?n:e.filter(r=>{const a=r.type||"";return a.startsWith("video/")||a.startsWith("image/")})}async function r3(e){return new Promise(t=>{const n=document.createElement("input");n.type="file",n.accept="video/*,image/*",n.multiple=!0,n.onchange=r=>{const a=Array.from(r.target.files||[]),i=qx(a,e);t(i)},n.click()})}async function kq(e){var t;if(bl())return r3(e);try{const r=await require("react-native-image-crop-picker").openPicker({mediaType:"video",multiple:!0}),a=n3(e),i=r.filter(o=>{const l=(o.filename||o.path||o.uri||"").toLowerCase();return a.some(c=>l.includes(c.toLowerCase()))});return i.length>0?i:r}catch(n){return console.error("Error picking files on native:",n),(t=n==null?void 0:n.message)!=null&&t.includes("cancel")||(n==null?void 0:n.code)==="E_PICKER_CANCELLED"?[]:[]}}async function MS(e){return bl()?r3(e):kq(e)}function Sq(){var ut,gt,Ct;const e=Xt(),t=qn(),{user:n}=tn(),r=(ut=t.state)==null?void 0:ut.template,[a,i]=m.useState(r);m.useEffect(()=>{if(r)i(r);else if(!a){const ne=sessionStorage.getItem("templateEditorState");if(ne)try{const ge=JSON.parse(ne);ge.template&&i(ge.template)}catch(ge){console.error("Error restoring template from sessionStorage:",ge)}}},[r,a]);const[o,l]=m.useState(new Map),[c,d]=m.useState(new Map),[u,f]=m.useState(0),[h,g]=m.useState(!1),[y,p]=m.useState(""),[S,x]=m.useState(""),[v,b]=m.useState(""),[w,N]=m.useState(!1),[R,C]=m.useState(""),[_,W]=m.useState(!1),[T,E]=m.useState(""),[B,H]=m.useState(!1),[q,ie]=m.useState(new Map),[X,V]=m.useState(!1),[z,J]=m.useState(!1),[U,ue]=m.useState(null),[fe,Ae]=m.useState([]),[_e,Re]=m.useState(!1),[Se,de]=m.useState("media"),F=m.useRef(null),$=m.useRef(null),Z=m.useRef(!1);m.useLayoutEffect(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},[]),m.useEffect(()=>{if(Se==="details"){window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0;const ne=()=>{const Ne=document.getElementById("post-details-section");if(Ne){const Oe=Ne.getBoundingClientRect(),Le=window.pageYOffset||document.documentElement.scrollTop,Me=Oe.top+Le;window.scrollTo({top:Me,left:0,behavior:"auto"}),document.documentElement.scrollTop=Me,document.body.scrollTop=Me,document.scrollingElement&&(document.scrollingElement.scrollTop=Me),Ne.scrollIntoView({block:"start",inline:"nearest",behavior:"auto"})}};ne();const ge=[setTimeout(ne,0),setTimeout(ne,10),setTimeout(ne,50),setTimeout(ne,100),setTimeout(ne,200),setTimeout(ne,300),setTimeout(ne,500),setTimeout(ne,800)];return()=>{ge.forEach(clearTimeout)}}else window.scrollTo(0,0)},[Se]);const Pe=m.useCallback(ne=>{if($.current=ne,ne&&Se==="details"){const ge=()=>{const Ne=ne.offsetTop;window.scrollTo(0,Ne),document.documentElement.scrollTop=Ne,document.body.scrollTop=Ne,ne.scrollIntoView({block:"start",behavior:"auto"})};ge(),setTimeout(ge,0),setTimeout(ge,50),setTimeout(ge,100)}},[Se]),ve=(a==null?void 0:a.id)===Qt.INSTAGRAM||(a==null?void 0:a.id)===Qt.TIKTOK||(a==null?void 0:a.id)===Qt.GAZETTEER||(a==null?void 0:a.id)===Qt.YOUTUBE_SHORTS,re=(a==null?void 0:a.id)===Qt.GAZETTEER,M=()=>re?TU:CU,[G,P]=m.useState(ve?[{id:"clip-1",mediaType:"video",duration:Jk}]:[]),Y=ve?G:(a==null?void 0:a.clips)||[];if(m.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,Se==="details"&&setTimeout(()=>{const ne=document.getElementById("post-details-section");if(ne){const ge=ne.getBoundingClientRect(),Ne=window.pageYOffset||document.documentElement.scrollTop,Oe=ge.top+Ne;window.scrollTo(0,Oe),ne.scrollIntoView({block:"start",behavior:"auto"})}},100)},[t.pathname,Se]),m.useEffect(()=>{if(Se==="details"){const ne=()=>{const Ne=document.getElementById("post-details-section");if(Ne){const Oe=Ne.getBoundingClientRect(),Le=window.pageYOffset||document.documentElement.scrollTop,ke=Oe.top+Le;window.scrollTo({top:ke,left:0,behavior:"auto"}),document.documentElement.scrollTop=ke,document.body.scrollTop=ke,document.scrollingElement&&(document.scrollingElement.scrollTop=ke),Ne.scrollIntoView({block:"start",inline:"nearest",behavior:"auto"}),setTimeout(()=>{Ne.getBoundingClientRect().top>5&&(window.scrollTo(0,ke),Ne.scrollIntoView({block:"start",behavior:"auto"}))},50)}};window.scrollTo(0,0),ne();const ge=[setTimeout(ne,10),setTimeout(ne,50),setTimeout(ne,100),setTimeout(ne,200),setTimeout(ne,400)];return()=>{ge.forEach(clearTimeout)}}},[Se]),m.useEffect(()=>{const ge=setTimeout(()=>{if(!a){const Ne=sessionStorage.getItem("templateEditorState");if(Ne)try{const Oe=JSON.parse(Ne);if(Oe.template){i(Oe.template);return}}catch{}e("/templates")}},100);return()=>clearTimeout(ge)},[a,e]),!a)return null;const j=Y[u]||Y[0],O=Y.filter(ne=>ne.mediaType==="text"?c.has(ne.id):o.has(ne.id)).length,se=Y.length>0&&Y.every(ne=>ne.mediaType==="text"?c.has(ne.id):o.has(ne.id));m.useEffect(()=>{const ne=t.state;if(ne!=null&&ne.textClipData&&(ne!=null&&ne.clipId)){const{text:ge,textStyle:Ne,clipId:Oe}=ne.textClipData,Le=sessionStorage.getItem("templateEditorState");if(Le)try{const Me=JSON.parse(Le);if(Me.template&&!a&&i(Me.template),Me.dynamicClips&&P(Me.dynamicClips),Me.userMedia){const ke=new Map;Me.userMedia.forEach(Ue=>{ke.set(Ue.id,{clipId:Ue.id,url:Ue.url,mediaType:Ue.mediaType})}),l(ke)}if(Me.textOnlyClips){const ke=new Map;Me.textOnlyClips.forEach(([Ue,He])=>{ke.set(Ue,He)}),d(ke)}if(Me.stickers){const ke=new Map;Me.stickers.forEach(([Ue,He])=>{ke.set(Ue,He)}),ie(ke)}Me.currentClipIndex!==void 0&&f(Me.currentClipIndex),Me.text!==void 0&&p(Me.text),Me.locationLabel!==void 0&&x(Me.locationLabel),Me.bannerText!==void 0&&b(Me.bannerText),Me.taggedUsers&&Ae(Me.taggedUsers),d(ke=>{const Ue=new Map(ke);return Ue.set(Oe,{text:ge,textStyle:Ne}),Ue}),sessionStorage.removeItem("templateEditorState")}catch(Me){console.error("Error restoring template editor state:",Me),d(ke=>{const Ue=new Map(ke);return Ue.set(Oe,{text:ge,textStyle:Ne}),Ue})}else d(Me=>{const ke=new Map(Me);return ke.set(Oe,{text:ge,textStyle:Ne}),ke});window.history.replaceState({...window.history.state,state:null},"")}},[t.state,a]);const K=m.useMemo(()=>(a==null?void 0:a.id)===Qt.INSTAGRAM?{background:fl.INSTAGRAM,backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:`shimmer ${fi.SHIMMER}ms linear infinite`,display:"block"}:(a==null?void 0:a.id)===Qt.TIKTOK?{background:fl.TIKTOK,backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:`shimmer ${fi.SHIMMER}ms linear infinite`,display:"block"}:(a==null?void 0:a.id)===Qt.GAZETTEER?{background:fl.GAZETTEER,backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:`shimmer ${fi.SHIMMER}ms linear infinite`,display:"block"}:(a==null?void 0:a.id)===Qt.YOUTUBE_SHORTS?{background:fl.YOUTUBE_SHORTS,backgroundSize:"200% 100%",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",animation:`shimmer ${fi.SHIMMER}ms linear infinite`,display:"block"}:{color:"white",display:"block"},[a==null?void 0:a.id]),me=Se==="media"&&o.size>0,pe=u>0,Ve=u<Y.length-1;m.useEffect(()=>{},[se,Se]);const De=()=>(a==null?void 0:a.id)===Qt.TIKTOK?"tiktok":(a==null?void 0:a.id)===Qt.INSTAGRAM?"instagram":(a==null?void 0:a.id)===Qt.YOUTUBE_SHORTS?"youtube-shorts":null;async function Ce(ne){var Ne,Oe;const ge=De();if(!ge){const Le=document.createElement("input");Le.type="file",Le.accept=ve?"image/*,video/mp4,.mp4":((Ne=Y.find(Me=>Me.id===ne))==null?void 0:Ne.mediaType)==="video"?"video/mp4,.mp4":"image/*",Le.onchange=Me=>Ft(ne,Me),Le.click();return}try{if(bl()){const Le=await MS(ge);if(Le.length===0){$e.fire({icon:"info",title:"No files selected",text:"Please select a video or image file.",timer:3e3,showConfirmButton:!1});return}const ke={target:{files:[Le[0]]}};Ft(ne,ke)}else{const Le=await MS(ge);if(Le.length===0){$e.fire({icon:"info",title:"No files selected",text:"Please select a video or image file.",timer:3e3,showConfirmButton:!1});return}const Me=Le[0],ke=(Oe=Me.mime)!=null&&Oe.startsWith("image/")?"image":"video",Ue=Me.path||Me.uri;if(!Ue){$e.fire({icon:"error",title:"Error",text:"Could not access file path.",timer:2e3,showConfirmButton:!1});return}if(l(Mt=>{const Pt=new Map(Mt);return Pt.set(ne,{clipId:ne,url:Ue,mediaType:ke,file:void 0}),Pt}),ve){const Mt=G.findIndex(Pt=>Pt.id===ne);Mt!==-1&&P(Pt=>{const fn=[...Pt];return fn[Mt]={...fn[Mt],mediaType:ke},fn})}const He=Y.findIndex(Mt=>Mt.id===ne);He<Y.length-1&&setTimeout(()=>{f(He+1)},300)}}catch(Le){console.error("Error selecting platform files:",Le),$e.fire({icon:"error",title:"Error",text:"Failed to select files. Please try again.",timer:2e3,showConfirmButton:!1})}}function Ft(ne,ge){var Me;const Ne=(Me=ge.target.files)==null?void 0:Me[0];if(!Ne)return;const Oe=De();if(Oe&&bl()&&(qx([Ne],Oe),!(Ne.type.startsWith("video/")||Ne.type.startsWith("image/")))){$e.fire({icon:"warning",title:"Invalid file type",text:"Please select a video or image file.",timer:3e3,showConfirmButton:!1});return}if(ve){if(Ne.type.startsWith("video/")&&!Ne.type.includes("mp4")&&!Ne.name.toLowerCase().endsWith(".mp4")){alert("Please select an MP4 video file or an image.");return}}else{const ke=Y.find(Ue=>Ue.id===ne);if((ke==null?void 0:ke.mediaType)==="video"&&!Ne.type.includes("mp4")&&!Ne.name.toLowerCase().endsWith(".mp4")){alert("Please select an MP4 video file only.");return}}const Le=Ne.type.startsWith("image/")?"image":"video";if(Le==="video"){const ke=URL.createObjectURL(Ne);if(ve){const He=G.findIndex(Mt=>Mt.id===ne);He!==-1&&P(Mt=>{const Pt=[...Mt];return Pt[He]={...Pt[He],mediaType:Le},Pt})}l(He=>{const Mt=new Map(He);return Mt.set(ne,{clipId:ne,url:ke,mediaType:Le,file:Ne}),Mt});const Ue=Y.findIndex(He=>He.id===ne);Ue<Y.length-1&&setTimeout(()=>{f(Ue+1)},300)}else{const ke=new FileReader;ke.onload=Ue=>{var Pt;const He=(Pt=Ue.target)==null?void 0:Pt.result;l(fn=>{const ye=new Map(fn);return ye.set(ne,{clipId:ne,url:He,mediaType:Le,file:Ne}),ye});const Mt=Y.findIndex(fn=>fn.id===ne);Mt<Y.length-1&&setTimeout(()=>{f(Mt+1)},300)},ke.readAsDataURL(Ne)}}function Tt(){u<Y.length-1&&f(u+1)}function Jt(){u>0&&f(u-1)}function Nt(ne){l(ge=>{const Ne=new Map(ge);return Ne.delete(ne),Ne})}function st(){if(!ve||Z.current)return;const ne=M();G.length>=ne||(Z.current=!0,P(ge=>{if(ge.length>=ne)return Z.current=!1,ge;const Ne=ge.map(ke=>{const Ue=ke.id.match(/^clip-(\d+)$/);return Ue?parseInt(Ue[1],10):0}).filter(ke=>ke>0),Me={id:`clip-${Ne.length>0?Math.max(...Ne)+1:ge.length+1}`,mediaType:"video",duration:Jk};return setTimeout(()=>{f(ge.length),Z.current=!1},100),[...ge,Me]}))}async function Ye(){if(!(Y.filter(ge=>o.has(ge.id)).length===0||!n)){g(!0);try{if(await lq((a==null?void 0:a.id)||""),!Y.some(Ue=>Ue.mediaType==="text"?c.has(Ue.id):o.has(Ue.id)))return;const Ne=Array.from(o.values())[0],Oe=[];Y.forEach(Ue=>{if(Ue.mediaType==="text"){const He=c.get(Ue.id);He&&Oe.push({url:`data:text/plain;base64,${btoa(He.text)}`,type:"text",duration:Ue.duration,text:He.text,textStyle:He.textStyle||{color:"#ffffff",size:"medium",background:"#000000"}})}else{const He=o.get(Ue.id);if(He){const Mt="effects"in Ue&&Array.isArray(Ue.effects)?Ue.effects:[];Oe.push({url:He.url,type:He.mediaType,duration:Ue.duration,effects:Mt})}}});const Le=[];Y.forEach(Ue=>{const He=q.get(Ue.id)||[];Le.push(...He)});const Me=fe&&Array.isArray(fe)&&fe.length>0?fe:void 0,ke=Oe.find(Ue=>Ue.type!=="text");await yc(n.id,n.handle,y.trim(),S.trim(),ke==null?void 0:ke.url,(ke==null?void 0:ke.type)==="text"||ke==null?void 0:ke.type,void 0,y.trim()||void 0,n.local,n.regional,n.national,Le.length>0?Le:void 0,(a==null?void 0:a.id)||void 0,Oe.filter(Ue=>Ue!==null),v.trim()||void 0,void 0,Me,w,R.trim()||void 0,_,T.trim()||void 0),window.dispatchEvent(new CustomEvent("postCreated")),e("/feed")}catch(ge){console.error("Error creating video from template:",ge),alert("Failed to create video. Please try again.")}finally{g(!1)}}}const Bt=j?j.mediaType==="text"?null:o.get(j.id):null,we=j&&j.mediaType==="text"?c.get(j.id):null,tt=j?q.get(j.id)||[]:[],Je=O>0?(u+1)/Math.max(Y.length,O)*100:0,[Ze,ot]=m.useState({width:0,height:0});m.useEffect(()=>()=>{o.forEach(ne=>{ne.url&&ne.url.startsWith("blob:")&&URL.revokeObjectURL(ne.url)})},[]),m.useEffect(()=>{if(F.current){const ne=()=>{var Ne;const ge=(Ne=F.current)==null?void 0:Ne.getBoundingClientRect();ge&&ot({width:ge.width,height:ge.height})};return ne(),window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)}},[Bt]);function L(ne){if(!j)return;const ge={id:`sticker-${Date.now()}-${Math.random()}`,stickerId:ne.id,sticker:ne,x:50,y:50,scale:1,rotation:0,opacity:1};ie(Ne=>{const Oe=new Map(Ne),Le=Oe.get(j.id)||[];return Oe.set(j.id,[...Le,ge]),Oe}),ue(ge.id)}function he(ne,ge,Ne){if(!j)return;const Oe={id:`text-sticker-${Date.now()}`,name:ne,category:"Text",emoji:void 0,url:void 0,isTrending:!1},Le={id:`sticker-${Date.now()}-${Math.random()}`,stickerId:Oe.id,sticker:{...Oe},x:50,y:50,scale:ge==="small"?.8:ge==="medium"?1:1.2,rotation:0,opacity:1};Le.textContent=ne,Le.textColor=Ne,Le.fontSize=ge,ie(Me=>{const ke=new Map(Me),Ue=ke.get(j.id)||[];return ke.set(j.id,[...Ue,Le]),ke}),ue(Le.id)}function je(ne,ge,Ne){ie(Oe=>{const Le=new Map(Oe),Me=Le.get(ne)||[],ke=Me.findIndex(Ue=>Ue.id===ge);return ke!==-1&&(Me[ke]=Ne,Le.set(ne,[...Me])),Le})}function at(ne,ge){ie(Ne=>{const Oe=new Map(Ne),Le=Oe.get(ne)||[];return Oe.set(ne,Le.filter(Me=>Me.id!==ge)),Oe}),U===ge&&ue(null)}return s.jsxs("div",{className:"min-h-screen bg-black text-white",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-black/80 backdrop-blur border-b border-gray-800",children:s.jsxs("div",{className:"max-w-md mx-auto px-4 h-14 flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>e(-1),className:"p-2 rounded-full hover:bg-gray-800 transition-colors flex items-center gap-2","aria-label":"Back",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),s.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),s.jsx("div",{className:"flex-1 mx-4",children:Se==="media"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm text-gray-400 mb-1",children:["Clip ",u+1," of ",O," ",ve&&`(Max ${M()})`]}),s.jsx("div",{className:"w-full h-1 bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${Je}%`}})})]}):s.jsx("div",{className:"text-sm font-medium text-white",children:"Post Details"})}),s.jsx("div",{className:"flex items-center gap-2"})]})}),me&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40",children:s.jsx("div",{className:"mx-auto max-w-md px-4 pt-3 pb-4",children:s.jsx("div",{className:"rounded-xl bg-black/85 backdrop-blur border border-white/10 p-2 shadow-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[ve&&Y.length<M()&&s.jsxs("button",{onClick:ne=>{ne.preventDefault(),ne.stopPropagation();const ge=M();Y.length<ge&&!Z.current&&st()},disabled:Y.length>=M()||Z.current,className:"flex-1 py-2.5 bg-black text-white border border-white/40 rounded-lg text-sm font-semibold hover:bg-black/80 transition-colors flex items-center justify-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(na,{className:"w-1.5 h-1.5"}),s.jsxs("span",{style:K,className:"text-sm",children:["Add Another Clip (",O,"/",M(),")"]})]}),s.jsxs("button",{onClick:()=>{de("details")},className:`py-2.5 bg-black text-white border border-white/40 rounded-lg text-sm font-semibold hover:bg-black/80 transition-colors flex items-center justify-center gap-1.5 ${ve&&Y.length<M()?"px-4":"w-full"}`,children:[s.jsx("span",{style:K,className:"text-sm",children:"Next"}),s.jsx("svg",{className:"w-1.5 h-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})})}),Se==="details"&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40",children:s.jsx("div",{className:"mx-auto max-w-md px-4 pt-3 pb-4",children:s.jsx("div",{className:"rounded-xl bg-black/85 backdrop-blur border border-white/10 p-2 shadow-lg",children:s.jsx("button",{onClick:Ye,disabled:o.size===0||h,className:"w-full py-2.5 bg-black text-white border border-white/40 rounded-lg text-sm font-semibold hover:bg-black/80 transition-colors flex items-center justify-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed",children:h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-sm",children:"Creating..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{style:K,className:"text-sm",children:"Post Now"}),s.jsx("svg",{className:"w-1.5 h-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})})})})}),s.jsx("div",{className:`max-w-md mx-auto px-4 py-4 ${me||Se==="details"?"pb-40":"pb-24"}`,children:Se==="media"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6",children:Bt||we?s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[Y.length>1&&s.jsxs("button",{onClick:Jt,disabled:!pe,className:`p-3 rounded-full border border-white/10 bg-black/60 hover:bg-black/80 transition-colors ${pe?"cursor-pointer":"opacity-30 cursor-not-allowed"}`,children:[s.jsx(ua,{className:"w-5 h-5 text-white"}),s.jsx("span",{className:"sr-only",children:"Previous clip"})]}),s.jsxs("div",{ref:F,className:"relative aspect-[9/16] max-h-[55vh] rounded-2xl overflow-hidden bg-gray-900 mx-auto shadow-lg",style:{aspectRatio:"9/16",maxHeight:"55vh",width:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},onClick:ne=>{(ne.target===ne.currentTarget||ne.target.tagName==="VIDEO"||ne.target.tagName==="IMG")&&ue(null)},children:[we?s.jsx("div",{className:"w-full h-full flex items-center justify-center p-4 bg-black",children:s.jsxs("div",{className:"w-full max-w-md rounded-2xl overflow-hidden bg-white border border-gray-200 shadow-2xl",style:{maxWidth:"100%",boxSizing:"border-box"},children:[s.jsx("div",{className:"flex items-start justify-between px-4 pt-4 pb-3 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:((Ct=(gt=n==null?void 0:n.handle)==null?void 0:gt.split("@")[0])==null?void 0:Ct.charAt(0).toUpperCase())||"U"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold flex items-center gap-1.5 text-gray-900 text-sm",children:s.jsx("span",{children:(n==null?void 0:n.handle)||"User"})}),s.jsx("div",{className:"text-xs text-gray-600 flex items-center gap-2 mt-0.5",children:S&&s.jsx(s.Fragment,{children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),S]})})})]})]})}),s.jsx("div",{className:"p-4 w-full overflow-hidden",style:{maxWidth:"100%",boxSizing:"border-box"},children:s.jsx("div",{className:"p-4 rounded-lg bg-black overflow-hidden w-full",style:{maxWidth:"100%",boxSizing:"border-box"},children:s.jsx("div",{className:"text-base leading-relaxed whitespace-pre-wrap font-normal text-white break-words w-full",style:{wordBreak:"break-word",overflowWrap:"anywhere",maxWidth:"100%",boxSizing:"border-box"},children:we.text})})})]})}):Bt?(()=>{const ne="effects"in j&&Array.isArray(j.effects)?j.effects:[];let ge=Bt.mediaType==="video"?s.jsx("video",{src:Bt.url,className:"w-full h-full object-cover",controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"metadata",style:{objectFit:"cover",width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0}}):s.jsx("img",{src:Bt.url,alt:`Clip ${u+1}`,className:"w-full h-full object-cover",style:{objectFit:"cover",width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0}});return ne.forEach(Ne=>{ge=s.jsx(Tv,{effect:Ne,isActive:!0,children:ge},Ne.type)}),ge})():null,(()=>"effects"in(j||{})&&j&&"effects"in j&&Array.isArray(j.effects)&&j.effects.length>0?s.jsx("div",{className:"absolute top-3 left-3 z-20 flex flex-wrap gap-1",children:Array.isArray(j.effects)&&j.effects.map((ge,Ne)=>s.jsx("div",{className:"px-2 py-1 bg-black/70 backdrop-blur-sm text-white text-xs rounded-full",title:`${ge.type}${ge.colorGrading?` - ${ge.colorGrading}`:""}`,children:ge.type==="color-grading"&&ge.colorGrading?s.jsx("span",{className:"capitalize",children:ge.colorGrading.replace("-"," ")}):s.jsx("span",{className:"capitalize",children:ge.type.replace("-"," ")})},Ne))}):null)(),tt.map(ne=>s.jsx(Oa,{overlay:ne,onUpdate:ge=>je((j==null?void 0:j.id)||"",ne.id,ge),onRemove:()=>at((j==null?void 0:j.id)||"",ne.id),isSelected:U===ne.id,onSelect:()=>ue(ne.id),containerWidth:Ze.width||400,containerHeight:Ze.height||711},ne.id)),s.jsx("button",{onClick:()=>Nt((j==null?void 0:j.id)||""),className:"absolute top-3 right-3 p-2 bg-black/70 backdrop-blur-sm text-white rounded-full hover:bg-black/90 transition-colors z-10",children:s.jsx(pt,{className:"w-4 h-4"})})]}),Y.length>1&&s.jsxs("button",{onClick:Tt,disabled:!Ve,className:`p-3 rounded-full border border-white/10 bg-black/60 hover:bg-black/80 transition-colors ${Ve?"cursor-pointer":"opacity-30 cursor-not-allowed"}`,children:[s.jsx(ix,{className:"w-5 h-5 text-white"}),s.jsx("span",{className:"sr-only",children:"Next clip"})]})]}):s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[Y.length>1&&s.jsxs("button",{onClick:Jt,disabled:!pe,className:`p-3 rounded-full border border-white/10 bg-black/60 hover:bg-black/80 transition-colors ${pe?"cursor-pointer":"opacity-30 cursor-not-allowed"}`,children:[s.jsx(ua,{className:"w-5 h-5 text-white"}),s.jsx("span",{className:"sr-only",children:"Previous clip"})]}),s.jsxs("label",{className:`block aspect-[9/16] max-h-[55vh] rounded-2xl cursor-pointer mx-auto bg-gray-900/30 transition-colors ${a.id===Qt.INSTAGRAM?"ig-animated-border":a.id===Qt.TIKTOK?"tt-animated-border":a.id===Qt.GAZETTEER?"gz-animated-border":a.id===Qt.YOUTUBE_SHORTS?"border-2 border-red-500/50":"border-2 border-dashed border-gray-700 hover:border-gray-600"}`,onClick:bl()?void 0:()=>{De()&&Ce((j==null?void 0:j.id)||"")},children:[bl()?s.jsx("input",{type:"file",accept:ve?"image/*,video/mp4,.mp4":(j==null?void 0:j.mediaType)==="video"?"video/mp4,.mp4":"image/*",onChange:ne=>{const ge=De();if(ge){const Ne=Array.from(ne.target.files||[]),Oe=qx(Ne,ge);if(Oe.length===0){$e.fire({icon:"warning",title:"No matching files",text:`No ${ge==="tiktok"?"TikTok":ge==="instagram"?"Instagram":"YouTube Shorts"} videos found. Please select files with matching filenames.`,timer:3e3,showConfirmButton:!1}),ne.target.value="";return}const Le={target:{files:[Oe[0]]}};Ft((j==null?void 0:j.id)||"",Le)}else Ft((j==null?void 0:j.id)||"",ne)},className:"hidden"}):null,s.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:ve?s.jsxs(s.Fragment,{children:[s.jsx(Os,{className:"w-12 h-12 text-gray-500 mb-4"}),s.jsx("div",{className:"text-white text-lg font-semibold mb-2",children:(a==null?void 0:a.id)===Qt.TIKTOK?"Add a TikTok video to your location newsfeed":(a==null?void 0:a.id)===Qt.INSTAGRAM?"Add an Instagram video to your location newsfeed":(a==null?void 0:a.id)===Qt.YOUTUBE_SHORTS?"Add a YouTube Shorts video to your location newsfeed":"Add Photo or Video"}),s.jsx("div",{className:"text-gray-400 text-sm",children:(a==null?void 0:a.id)===Qt.TIKTOK?"Tap to select your TikTok video":(a==null?void 0:a.id)===Qt.INSTAGRAM?"Tap to select your Instagram video":(a==null?void 0:a.id)===Qt.YOUTUBE_SHORTS?"Tap to select your YouTube Shorts video":"Tap to select image or MP4 video"}),s.jsx("div",{className:"text-gray-500 text-xs mt-2",children:Y.length===1?`Add ${EU}-${M()} items`:`Add up to ${M()-Y.length} more`})]}):s.jsxs(s.Fragment,{children:[(j==null?void 0:j.mediaType)==="video"?s.jsx(Fb,{className:"w-12 h-12 text-gray-500 mb-4"}):s.jsx(Os,{className:"w-12 h-12 text-gray-500 mb-4"}),s.jsxs("div",{className:"text-white text-lg font-semibold mb-2",children:["Add ",(j==null?void 0:j.mediaType)==="video"?"Video (MP4 only)":"Photo"]}),s.jsx("div",{className:"text-gray-400 text-sm",children:(j==null?void 0:j.mediaType)==="video"?"Tap to select MP4 video":"Tap to select from gallery"})]})})]}),Y.length>1&&s.jsxs("button",{onClick:Tt,disabled:!Ve,className:`p-3 rounded-full border border-white/10 bg-black/60 hover:bg-black/80 transition-colors ${Ve?"cursor-pointer":"opacity-30 cursor-not-allowed"}`,children:[s.jsx(ix,{className:"w-5 h-5 text-white"}),s.jsx("span",{className:"sr-only",children:"Next clip"})]})]})})}),s.jsx("div",{className:"flex items-center justify-center gap-2 mb-6 flex-wrap",children:Y.map((ne,ge)=>{const Ne=o.get(ne.id),Oe=ne.mediaType==="text"?c.get(ne.id):null,Le=Ne||Oe,Me=ge===u;return s.jsx("button",{onClick:()=>f(ge),className:`w-2 h-2 rounded-full transition-all ${Me?"bg-white w-8":Le?"bg-gray-500":"bg-gray-700"}`,"aria-label":`Go to clip ${ge+1}`},ne.id)})})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{id:"post-details-section",ref:Pe,className:"space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Caption"}),s.jsxs("div",{className:"relative rounded-xl",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl bg-gradient-to-r from-emerald-500 via-blue-500 to-violet-500 opacity-60 blur-sm animate-pulse"}),s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl overflow-hidden",children:s.jsx("div",{className:"absolute inset-0 rounded-xl",style:{background:"linear-gradient(90deg, transparent, rgba(59,130,246,0.35), transparent)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}})}),s.jsx("textarea",{value:y,onChange:ne=>p(ne.target.value),placeholder:"Start typing",className:"relative w-full p-3 bg-gray-900 text-white rounded-xl border border-gray-800 focus:outline-none focus:ring-2 focus:ring-white resize-none text-sm",rows:3,maxLength:500})]}),s.jsxs("div",{className:"text-right text-xs text-gray-500 mt-1",children:[y.length,"/500"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location"}),s.jsxs("div",{className:"relative rounded-xl",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl bg-gradient-to-r from-emerald-500 via-blue-500 to-violet-500 opacity-60 blur-sm animate-pulse"}),s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl overflow-hidden",children:s.jsx("div",{className:"absolute inset-0 rounded-xl",style:{background:"linear-gradient(90deg, transparent, rgba(59,130,246,0.35), transparent)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}})}),s.jsx("input",{type:"text",value:S,onChange:ne=>x(ne.target.value),placeholder:"Where did this happen?",className:"relative w-full p-3 bg-gray-900 text-white rounded-xl border border-gray-800 focus:outline-none focus:ring-2 focus:ring-white text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"News Ticker Banner"}),s.jsxs("div",{className:"relative rounded-xl",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl bg-gradient-to-r from-emerald-500 via-blue-500 to-violet-500 opacity-60 blur-sm animate-pulse"}),s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl overflow-hidden",children:s.jsx("div",{className:"absolute inset-0 rounded-xl",style:{background:"linear-gradient(90deg, transparent, rgba(59,130,246,0.35), transparent)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}})}),s.jsx("input",{type:"text",value:v,onChange:ne=>b(ne.target.value),placeholder:"Enter scrolling banner text...",maxLength:200,className:"relative w-full p-3 bg-gray-900 text-white rounded-xl border border-gray-800 focus:outline-none focus:ring-2 focus:ring-white text-sm"})]}),s.jsxs("div",{className:"text-right text-xs text-gray-500 mt-1",children:[v.length,"/200"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center gap-2",children:[s.jsx(xc,{className:"w-4 h-4"}),"Tag People"]}),s.jsxs("button",{onClick:()=>Re(!0),className:`w-full p-3 rounded-xl border-2 transition-colors flex items-center justify-between text-sm ${fe.length>0?"bg-brand-500/20 border-brand-500 text-white hover:bg-brand-500/30":"bg-gray-900 text-white border-gray-800 hover:bg-gray-800 hover:border-gray-700"}`,children:[s.jsx("span",{className:fe.length>0?"font-medium":"",children:fe.length>0?`${fe.length} ${fe.length===1?"person":"people"} tagged`:"Tap to tag people"}),fe.length>0&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[fe.slice(0,2).map(ne=>s.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-500 flex items-center justify-center text-xs font-semibold text-white",children:ne.charAt(0).toUpperCase()},ne)),fe.length>2&&s.jsxs("div",{className:"w-6 h-6 rounded-full bg-brand-600 flex items-center justify-center text-xs font-semibold text-white",children:["+",fe.length-2]})]})]})]}),((a==null?void 0:a.id)===Qt.INSTAGRAM||(a==null?void 0:a.id)===Qt.TIKTOK||(a==null?void 0:a.id)===Qt.GAZETTEER)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>N(!w),className:`p-1.5 rounded-lg transition-colors ${w?"bg-brand-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,"aria-label":"Toggle captions",children:s.jsx(gc,{className:"w-4 h-4"})}),s.jsx("span",{children:"Video Captions"}),s.jsx("span",{className:`text-xs ml-auto ${w?"text-brand-400":"text-gray-500"}`,children:w?"ON":"OFF"})]}),w&&s.jsxs("div",{className:"relative rounded-xl",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl bg-gradient-to-r from-emerald-500 via-blue-500 to-violet-500 opacity-60 blur-sm animate-pulse"}),s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-xl overflow-hidden",children:s.jsx("div",{className:"absolute inset-0 rounded-xl",style:{background:"linear-gradient(90deg, transparent, rgba(59,130,246,0.35), transparent)",backgroundSize:"200% 100%",animation:"shimmer 3s linear infinite"}})}),s.jsx("textarea",{value:R,onChange:ne=>C(ne.target.value),placeholder:"Enter caption text to display on video...",className:"relative w-full p-3 bg-gray-900 text-white rounded-xl border border-gray-800 focus:outline-none focus:ring-2 focus:ring-white resize-none text-sm",rows:3,maxLength:500})]}),w&&s.jsxs("div",{className:"text-right text-xs text-gray-500 mt-1",children:[R.length,"/500"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2 flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:async()=>{const ne=!_;if(W(ne),ne&&!T){const ge=Y[u]||Y[0],Ne=ge?o.get(ge.id):null;if(Ne&&Ne.mediaType==="video"&&Ne.url){H(!0);try{const Oe=await bq(Ne.url);Oe&&E(Oe)}catch(Oe){console.error("Transcription error:",Oe)}finally{H(!1)}}}},className:`p-1.5 rounded-lg transition-colors ${_?"bg-brand-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,"aria-label":"Toggle subtitles",children:s.jsx(tp,{className:"w-4 h-4"})}),s.jsx("span",{children:"Video Subtitles"}),s.jsx("span",{className:`text-xs ml-auto ${_?"text-brand-400":"text-gray-500"}`,children:_?"ON":"OFF"})]}),B&&s.jsxs("div",{className:"mb-2 text-sm text-brand-400 flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-brand-400 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Generating subtitles..."})]})]})]})]})})}),s.jsx(gp,{isOpen:X,onClose:()=>V(!1),onSelectSticker:L,onAddText:()=>J(!0)}),s.jsx(Z4,{isOpen:z,onClose:()=>J(!1),onConfirm:(ne,ge,Ne)=>{he(ne,ge,Ne),J(!1)}}),s.jsx(xp,{isOpen:_e,onClose:()=>Re(!1),onSelectUser:ne=>{if(!fe.includes(ne)){const ge=[...fe,ne];Ae(ge)}},taggedUsers:fe})]})}function jq({clips:e,currentTime:t,totalDuration:n,selectedClipId:r,onTimeChange:a,onClipSelect:i,onSplitClip:o,onReorderClips:l,onTrimClip:c,onDeleteClip:d}){const u=m.useRef(null),[f,h]=m.useState(null),[g,y]=m.useState(null),p=N=>{if(!u.current)return;const R=u.current.getBoundingClientRect(),W=(N.clientX-R.left)/R.width*n;a(W)},S=(N,R,C)=>{h(R),N.dataTransfer.effectAllowed="move"},x=(N,R)=>{N.preventDefault(),N.dataTransfer.dropEffect="move",y(R)},v=(N,R)=>{if(N.preventDefault(),f===null)return;const C=e.findIndex(_=>_.id===f);C!==-1&&C!==R&&l(C,R),h(null),y(null)},b=()=>{h(null),y(null)},w=N=>{const R=Math.floor(N/60),C=Math.floor(N%60);return`${R}:${C.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:w(t)}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:w(n)})]}),s.jsx("div",{ref:u,onClick:p,className:"relative h-20 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-x-auto cursor-pointer",children:s.jsxs("div",{className:"relative h-full flex items-center",style:{width:`${Math.max(100,n/5*100)}%`},children:[e.map((N,R)=>{const C=N.startTime/n*100,_=N.duration/n*100,W=r===N.id,T=f===N.id,E=g===R;return s.jsxs("div",{draggable:!0,onDragStart:B=>S(B,N.id),onDragOver:B=>x(B,R),onDrop:B=>v(B,R),onDragEnd:b,onClick:B=>{B.stopPropagation(),i(N.id)},className:`absolute h-full rounded border-2 transition-all ${W?"border-blue-500 bg-blue-100 dark:bg-blue-900":"border-gray-400 dark:border-gray-500 bg-gray-300 dark:bg-gray-600"} ${T?"opacity-50":""} ${E?"ring-2 ring-blue-400":""}`,style:{left:`${C}%`,width:`${_}%`,minWidth:"40px"},children:[s.jsx("div",{className:"h-full flex items-center justify-center p-1",children:N.type==="video"?s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-blue-500 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-semibold",children:"VID"})}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-500 to-teal-500 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-semibold",children:"IMG"})})}),W&&s.jsxs("div",{className:"absolute -top-8 left-0 right-0 flex items-center justify-center gap-1",children:[s.jsx("button",{onClick:B=>{B.stopPropagation(),o(N.id,N.startTime+N.duration/2)},className:"p-1 rounded bg-blue-500 text-white hover:bg-blue-600 transition-colors",title:"Split clip",children:s.jsx(Db,{className:"w-3 h-3"})}),s.jsx("button",{onClick:B=>{B.stopPropagation(),d(N.id)},className:"p-1 rounded bg-red-500 text-white hover:bg-red-600 transition-colors",title:"Delete clip",children:s.jsx(pt,{className:"w-3 h-3"})})]}),s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-2 cursor-move flex items-center justify-center bg-gray-400 dark:bg-gray-500 opacity-50 hover:opacity-100 transition-opacity",children:s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("div",{className:"w-0.5 h-0.5 bg-white rounded-full"}),s.jsx("div",{className:"w-0.5 h-0.5 bg-white rounded-full"}),s.jsx("div",{className:"w-0.5 h-0.5 bg-white rounded-full"})]})})]},N.id)}),s.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10 pointer-events-none",style:{left:`${t/n*100}%`},children:s.jsx("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 w-3 h-3 bg-red-500 rounded-full"})})]})}),r&&s.jsx("div",{className:"mt-2 px-2",children:(()=>{const N=e.find(R=>R.id===r);return N?s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:N.type==="video"?"Video":"Image"}),"  ",s.jsxs("span",{children:["Duration: ",w(N.duration)]}),(N.trimStart>0||N.trimEnd>0)&&s.jsxs(s.Fragment,{children:["  ",s.jsxs("span",{children:["Trimmed: ",w(N.trimStart)," - ",w(N.trimEnd)]})]})]}):null})()})]})}function Nq(){const e=Xt(),n=qn().state,[r,a]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState(0),[d,u]=m.useState(!1),[f,h]=m.useState(null),[g,y]=m.useState(!1);m.useState(0),m.useState(0);const[p,S]=m.useState(!0),x=m.useRef(null),v=m.useRef(null);m.useEffect(()=>{if(n){const B=[];if(n.mediaItems&&n.mediaItems.length>0){let H=0;n.mediaItems.forEach((q,ie)=>{const X=q.type==="video"?q.duration||5:3;B.push({id:`clip-${ie}`,mediaUrl:q.url,type:q.type,startTime:H,duration:X,trimStart:0,trimEnd:0,speed:1,reverse:!1,originalDuration:q.type==="video"?q.duration:void 0}),H+=X}),a(B),B.length>0&&h(B[0].id),S(!1)}else if(n.mediaUrl)if(n.mediaType==="video"){const H=document.createElement("video");H.src=n.mediaUrl,H.preload="metadata",H.crossOrigin="anonymous";const q=()=>{const X=H.duration&&isFinite(H.duration)?H.duration:5,V={id:"clip-0",mediaUrl:n.mediaUrl,type:"video",startTime:0,duration:X,trimStart:0,trimEnd:0,speed:1,reverse:!1,originalDuration:X};a([V]),h(V.id),S(!1),H.removeEventListener("loadedmetadata",q),H.removeEventListener("error",ie)},ie=()=>{const X={id:"clip-0",mediaUrl:n.mediaUrl,type:"video",startTime:0,duration:5,trimStart:0,trimEnd:0,speed:1,reverse:!1,originalDuration:5};a([X]),h(X.id),S(!1),H.removeEventListener("loadedmetadata",q),H.removeEventListener("error",ie)};H.addEventListener("loadedmetadata",q),H.addEventListener("error",ie)}else{const H={id:"clip-0",mediaUrl:n.mediaUrl,type:"image",startTime:0,duration:3,trimStart:0,trimEnd:0,speed:1,reverse:!1};a([H]),h(H.id),S(!1)}else S(!1)}else S(!1)},[n]);const b=m.useMemo(()=>{if(r.length===0)return 0;const B=r[r.length-1];return B.startTime+B.duration},[r]),w=m.useMemo(()=>r.length===0?null:r.find(B=>l>=B.startTime&&l<B.startTime+B.duration)||r[0],[r,l]);m.useEffect(()=>{if(!d||!x.current)return;const B=setInterval(()=>{c(H=>{const q=H+.1;return q>=b?(u(!1),0):q})},100);return()=>clearInterval(B)},[d,b]),m.useEffect(()=>{if(!x.current||!w||w.type!=="video"||r.length===0)return;const H=(l-w.startTime)*w.speed+w.trimStart;d?(x.current.currentTime=H,x.current.play().catch(()=>{})):x.current.pause()},[l,w,d]);const N=()=>{u(!d)},R=B=>{c(Math.max(0,Math.min(B,b)))},C=(B,H)=>{const q=r.find(U=>U.id===B);if(!q)return;const ie=H-q.startTime;if(ie<=0||ie>=q.duration)return;const X={...q,id:`${B}-1`,duration:ie,trimEnd:q.trimEnd+(q.duration-ie)},V={...q,id:`${B}-2`,startTime:H,duration:q.duration-ie,trimStart:q.trimStart+ie},z=r.findIndex(U=>U.id===B),J=[...r];J.splice(z,1,X,V),J.forEach((U,ue)=>{ue>z+1&&(U.startTime=J[ue-1].startTime+J[ue-1].duration)}),a(J)},_=(B,H)=>{const q=[...r],[ie]=q.splice(B,1);q.splice(H,0,ie);let X=0;q.forEach(V=>{V.startTime=X,X+=V.duration}),a(q)},W=(B,H,q)=>{a(ie=>ie.map(X=>{if(X.id===B){const V=X.originalDuration||X.duration,z=V;return{...X,trimStart:Math.max(0,Math.min(H,z)),trimEnd:Math.max(0,Math.min(q,z)),duration:V-H-q}}return X}))},T=B=>{var X;if(r.findIndex(V=>V.id===B)===-1)return;const q=r.filter(V=>V.id!==B);let ie=0;q.forEach(V=>{V.startTime=ie,ie+=V.duration}),a(q),f===B&&h(((X=q[0])==null?void 0:X.id)||null)},E=()=>{e("/create",{state:{editedMedia:{clips:r,transitions:i,totalDuration:b},mediaItems:r.map(H=>({url:H.mediaUrl,type:H.type,duration:H.duration}))}})};return p?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading video editor..."})]})}):r.length===0||!n?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:n?"No media to edit":"No media selected. Please go back and select a video or image to edit."}),s.jsx("button",{onClick:()=>e("/create"),className:"px-4 py-2 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 text-white font-medium hover:opacity-90 transition-opacity",children:"Go Back"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>e("/create"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(pt,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})}),s.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Video"}),s.jsx("button",{onClick:E,className:"px-4 py-2 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 text-white font-medium hover:opacity-90 transition-opacity",children:"Save"})]})}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:s.jsx("div",{ref:v,className:"relative w-full max-w-md aspect-[9/16] bg-black rounded-2xl overflow-hidden shadow-2xl",children:w&&s.jsx(s.Fragment,{children:w.type==="video"?s.jsx("video",{ref:x,src:w.mediaUrl,className:"w-full h-full object-cover",muted:!0,playsInline:!0}):s.jsx("img",{src:w.mediaUrl,alt:"",className:"w-full h-full object-cover"})})})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4",children:[s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[s.jsx("button",{onClick:()=>R(l-.1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(ua,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})}),s.jsx("button",{onClick:N,className:"w-12 h-12 rounded-full bg-gradient-to-tr from-green-500 via-blue-500 to-blue-600 flex items-center justify-center text-white hover:opacity-90 transition-opacity",children:d?s.jsx(zh,{className:"w-6 h-6"}):s.jsx(Yd,{className:"w-6 h-6 ml-0.5"})}),s.jsx("button",{onClick:()=>R(l+.1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(ix,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),s.jsx(jq,{clips:r,currentTime:l,totalDuration:b,selectedClipId:f,onTimeChange:R,onClipSelect:h,onSplitClip:C,onReorderClips:_,onTrimClip:W,onDeleteClip:T}),s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-4",children:[s.jsxs("button",{onClick:()=>{f&&C(f,l)},className:"flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Split clip at current time",children:[s.jsx(Db,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Split"})]}),s.jsxs("button",{onClick:()=>y(!g),className:`flex items-center gap-2 px-4 py-2 rounded-full ${g?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"} hover:opacity-90 transition-colors`,title:"Trim clip",children:[s.jsx(Ab,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Trim"})]})]})]})]})}var rn;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(rn||(rn={}));const Cq=(()=>{let e=0;return()=>e++})(),Tq=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),Eq=new Error("called FFmpeg.terminate()");var Jr,ii,Sa,ho,mo,cm,Tr;class _q{constructor(){Ga(this,Jr,null);Ga(this,ii,{});Ga(this,Sa,{});Ga(this,ho,[]);Ga(this,mo,[]);Nr(this,"loaded",!1);Ga(this,cm,()=>{_t(this,Jr)&&(_t(this,Jr).onmessage=({data:{id:t,type:n,data:r}})=>{switch(n){case rn.LOAD:this.loaded=!0,_t(this,ii)[t](r);break;case rn.MOUNT:case rn.UNMOUNT:case rn.EXEC:case rn.FFPROBE:case rn.WRITE_FILE:case rn.READ_FILE:case rn.DELETE_FILE:case rn.RENAME:case rn.CREATE_DIR:case rn.LIST_DIR:case rn.DELETE_DIR:_t(this,ii)[t](r);break;case rn.LOG:_t(this,ho).forEach(a=>a(r));break;case rn.PROGRESS:_t(this,mo).forEach(a=>a(r));break;case rn.ERROR:_t(this,Sa)[t](r);break}delete _t(this,ii)[t],delete _t(this,Sa)[t]})});Ga(this,Tr,({type:t,data:n},r=[],a)=>_t(this,Jr)?new Promise((i,o)=>{const l=Cq();_t(this,Jr)&&_t(this,Jr).postMessage({id:l,type:t,data:n},r),_t(this,ii)[l]=i,_t(this,Sa)[l]=o,a==null||a.addEventListener("abort",()=>{o(new DOMException(`Message # ${l} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(Tq));Nr(this,"load",({classWorkerURL:t,...n}={},{signal:r}={})=>(_t(this,Jr)||(_c(this,Jr,t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-224792ee.js",self.location),{type:"module"})),_t(this,cm).call(this)),_t(this,Tr).call(this,{type:rn.LOAD,data:n},void 0,r)));Nr(this,"exec",(t,n=-1,{signal:r}={})=>_t(this,Tr).call(this,{type:rn.EXEC,data:{args:t,timeout:n}},void 0,r));Nr(this,"ffprobe",(t,n=-1,{signal:r}={})=>_t(this,Tr).call(this,{type:rn.FFPROBE,data:{args:t,timeout:n}},void 0,r));Nr(this,"terminate",()=>{const t=Object.keys(_t(this,Sa));for(const n of t)_t(this,Sa)[n](Eq),delete _t(this,Sa)[n],delete _t(this,ii)[n];_t(this,Jr)&&(_t(this,Jr).terminate(),_c(this,Jr,null),this.loaded=!1)});Nr(this,"writeFile",(t,n,{signal:r}={})=>{const a=[];return n instanceof Uint8Array&&a.push(n.buffer),_t(this,Tr).call(this,{type:rn.WRITE_FILE,data:{path:t,data:n}},a,r)});Nr(this,"mount",(t,n,r)=>{const a=[];return _t(this,Tr).call(this,{type:rn.MOUNT,data:{fsType:t,options:n,mountPoint:r}},a)});Nr(this,"unmount",t=>{const n=[];return _t(this,Tr).call(this,{type:rn.UNMOUNT,data:{mountPoint:t}},n)});Nr(this,"readFile",(t,n="binary",{signal:r}={})=>_t(this,Tr).call(this,{type:rn.READ_FILE,data:{path:t,encoding:n}},void 0,r));Nr(this,"deleteFile",(t,{signal:n}={})=>_t(this,Tr).call(this,{type:rn.DELETE_FILE,data:{path:t}},void 0,n));Nr(this,"rename",(t,n,{signal:r}={})=>_t(this,Tr).call(this,{type:rn.RENAME,data:{oldPath:t,newPath:n}},void 0,r));Nr(this,"createDir",(t,{signal:n}={})=>_t(this,Tr).call(this,{type:rn.CREATE_DIR,data:{path:t}},void 0,n));Nr(this,"listDir",(t,{signal:n}={})=>_t(this,Tr).call(this,{type:rn.LIST_DIR,data:{path:t}},void 0,n));Nr(this,"deleteDir",(t,{signal:n}={})=>_t(this,Tr).call(this,{type:rn.DELETE_DIR,data:{path:t}},void 0,n))}on(t,n){t==="log"?_t(this,ho).push(n):t==="progress"&&_t(this,mo).push(n)}off(t,n){t==="log"?_c(this,ho,_t(this,ho).filter(r=>r!==n)):t==="progress"&&_c(this,mo,_t(this,mo).filter(r=>r!==n))}}Jr=new WeakMap,ii=new WeakMap,Sa=new WeakMap,ho=new WeakMap,mo=new WeakMap,cm=new WeakMap,Tr=new WeakMap;var AS;(function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"})(AS||(AS={}));const Rq=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const{result:a}=r;a instanceof ArrayBuffer?t(new Uint8Array(a)):t(new Uint8Array)},r.onerror=a=>{var i,o;n(Error(`File could not be read! Code=${((o=(i=a==null?void 0:a.target)==null?void 0:i.error)==null?void 0:o.code)||-1}`))},r.readAsArrayBuffer(e)}),Lq=async e=>{let t;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(n=>n.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)t=await Rq(e);else return new Uint8Array;return new Uint8Array(t)};function Iq(){const e=Xt(),{user:t}=tn(),[n,r]=D.useState([]),[a,i]=D.useState(0);D.useState(!1);const[o,l]=D.useState(0),[c,d]=D.useState(null),[u,f]=D.useState(null),[h,g]=D.useState(null),[y,p]=D.useState([]),[S,x]=D.useState([]),[v,b]=D.useState(null),[w,N]=D.useState(null),[R,C]=D.useState(new Map),[_,W]=D.useState(null),[T,E]=D.useState(""),[B,H]=D.useState("#FFFFFF"),[q,ie]=D.useState(36),[X,V]=D.useState("Arial"),[z,J]=D.useState(!1),[U,ue]=D.useState(!1),fe=D.useRef(null),Ae=D.useRef(null),_e=D.useRef(null),Re=D.useRef(null);D.useEffect(()=>{(async()=>{try{const M=new _q;Re.current=M,M.on("log",({message:G})=>{console.log("FFmpeg:",G)}),await M.load({coreURL:"/ffmpeg-core.js",wasmURL:"/ffmpeg-core.wasm"}),J(!0)}catch(M){console.error("Failed to load FFmpeg:",M),$e.fire({icon:"error",title:"FFmpeg Load Error",text:"Failed to load video processing library. Please refresh the page."})}})()},[]);const Se=D.useCallback(async(re,M=8)=>new Promise(G=>{const P=document.createElement("video");P.src=re.url,P.crossOrigin="anonymous",P.addEventListener("loadedmetadata",()=>{const Y=document.createElement("canvas"),j=Y.getContext("2d");Y.width=160,Y.height=Math.round(P.videoHeight/P.videoWidth*160)||90;const O=[];let se=0;const K=me=>{const pe=P.duration*me/Math.max(1,M-1);P.currentTime=Math.min(pe,P.duration-.001);const Ve=()=>{j.drawImage(P,0,0,Y.width,Y.height),O[me]=Y.toDataURL("image/jpeg",.7),se++,se===M&&(P.removeEventListener("seeked",Ve),G(O))};P.addEventListener("seeked",Ve,{once:!0})};for(let me=0;me<M;me++)K(me)}),P.addEventListener("error",()=>{G([])})}),[]),de=D.useCallback(async re=>{const M=[],G=new Map;for(let P=0;P<re.length;P++){const Y=re[P];if(!Y.type.startsWith("video/"))continue;const j=URL.createObjectURL(Y),O={id:Date.now()+P,url:j,duration:0,trimStart:0,trimEnd:0,blob:Y,file:Y};await new Promise(K=>{const me=document.createElement("video");me.src=j,me.addEventListener("loadedmetadata",()=>{O.duration=me.duration,O.trimEnd=me.duration,K()}),me.addEventListener("error",K)}),M.push(O);const se=await Se(O);G.set(O.id,se)}r(P=>[...P,...M]),C(P=>{const Y=new Map(P);return G.forEach((j,O)=>Y.set(O,j)),Y}),M.length>0&&n.length===0&&(i(0),d(M[0].id),setTimeout(()=>{var P;try{(P=fe.current)==null||P.play().catch(Y=>{Y.name!=="AbortError"&&console.error("Auto-play failed:",Y)})}catch(Y){console.error("Auto-play error:",Y)}},100))},[n.length,Se]),F=D.useCallback(()=>{const re=Ae.current,M=fe.current;if(!re||!M||M.readyState<2)return;const G=re.getContext("2d");if(!G||(G.clearRect(0,0,re.width,re.height),G.drawImage(M,0,0,re.width,re.height),!n[a]))return;const Y=n.slice(0,a).reduce((O,se)=>O+(se.trimEnd-se.trimStart),0),j=o-Y;y.forEach(O=>{if(j>=O.startTime&&j<=O.endTime){G.fillStyle=O.color,G.font=`${O.fontSize}px ${O.font}`,G.textBaseline="top";const se=O.x/100*re.width,K=O.y/100*re.height;G.fillText(O.text,se,K)}}),S.forEach(O=>{if(j>=O.startTime&&j<=O.endTime){const se=new Image;se.src=O.url,se.onload=()=>{const K=O.x/100*re.width,me=O.y/100*re.height,pe=O.width/100*re.width,Ve=O.height/100*re.height;G.drawImage(se,K,me,pe,Ve)}}})},[n,a,o,y,S]);D.useEffect(()=>{const re=fe.current;if(!re)return;const M=()=>{l(re.currentTime),F()};return re.addEventListener("timeupdate",M),()=>re.removeEventListener("timeupdate",M)},[F]),D.useEffect(()=>{if(h===null||!fe.current)return;const re=fe.current,M=!re.paused;re.pause(),re.currentTime=h,re.addEventListener("seeked",()=>{F(),M&&re.play().catch(()=>{})},{once:!0})},[h,F]),D.useEffect(()=>{const re=fe.current;if(!re)return;const M=()=>{Ae.current&&(Ae.current.width=re.videoWidth,Ae.current.height=re.videoHeight),F(),n.length>0&&a===0&&setTimeout(()=>{try{re.play().catch(G=>{G.name!=="AbortError"&&console.error("Auto-play failed:",G)})}catch(G){console.error("Auto-play error:",G)}},100)};return re.addEventListener("loadedmetadata",M),()=>re.removeEventListener("loadedmetadata",M)},[n,a,F]);const $=D.useCallback(()=>{if(!T.trim())return;const re={id:`text-${Date.now()}`,text:T,x:10,y:10,fontSize:q,color:B,font:X,startTime:o,endTime:o+5};p(M=>[...M,re]),E(""),W(null)},[T,q,B,X,o]),Z=D.useCallback(re=>{const M=Ae.current;if(!M)return;const G=M.getBoundingClientRect();(re.clientX-G.left)/G.width*100,(re.clientY-G.top)/G.height*100;for(const P of y){const Y=P.x/100*M.width,j=P.y/100*M.height,O=M.getContext("2d");if(O){O.font=`${P.fontSize}px ${P.font}`;const K=O.measureText(P.text).width,me=P.fontSize,pe=re.clientX-G.left,Ve=re.clientY-G.top,De=10;if(pe>=Y-De&&pe<=Y+K+De&&Ve>=j-De&&Ve<=j+me+De){b(P.id),N(P.id);return}}}for(const P of S){const Y=P.x/100*M.width,j=P.y/100*M.height,O=P.width/100*M.width,se=P.height/100*M.height,K=re.clientX-G.left,me=re.clientY-G.top,pe=10;if(K>=Y-pe&&K<=Y+O+pe&&me>=j-pe&&me<=j+se+pe){b(P.id),N(P.id);return}}b(null)},[y,S]);D.useEffect(()=>{if(!w)return;const re=G=>{const P=Ae.current;if(!P)return;const Y=P.getBoundingClientRect(),j=(G.clientX-Y.left)/Y.width*100,O=(G.clientY-Y.top)/Y.height*100,se=Math.max(0,Math.min(100,j)),K=Math.max(0,Math.min(100,O));p(me=>me.map(pe=>pe.id===w?{...pe,x:se,y:K}:pe)),x(me=>me.map(pe=>pe.id===w?{...pe,x:se,y:K}:pe))},M=()=>{N(null)};return document.addEventListener("mousemove",re),document.addEventListener("mouseup",M),()=>{document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",M)}},[w]);const Pe=D.useCallback(async()=>{if(!Re.current||!z||n.length===0){$e.fire({icon:"error",title:"Export Error",text:"FFmpeg not loaded or no clips to export"});return}ue(!0);try{const re=Re.current;for(const O of n)O.file&&await re.writeFile(`input-${O.id}.mp4`,await Lq(O.file));let M;if(n.length===1){const O=n[0],se=O.trimStart>0||O.trimEnd<O.duration,K=y.length>0||S.length>0;if(!se&&!K)M=["-i",`input-${O.id}.mp4`,"-c","copy","output.mp4"];else{let me="";se?(me+=`[0:v]trim=start=${O.trimStart}:end=${O.trimEnd},setpts=PTS-STARTPTS[v0];`,me+=`[0:a]atrim=start=${O.trimStart}:end=${O.trimEnd},asetpts=PTS-STARTPTS[a0];`):me+="[0:v]copy[v0];[0:a]copy[a0];",y.forEach((pe,Ve)=>{me+=`[v${Ve}]drawtext=text='${pe.text}':x=${pe.x}*W/100:y=${pe.y}*H/100:fontsize=${pe.fontSize}:fontcolor=${pe.color}[v${Ve+1}];`}),M=["-i",`input-${O.id}.mp4`,"-filter_complex",me,"-map","[v"+y.length+"]","-map","[a0]","output.mp4"]}}else{const O=n.map((se,K)=>`file 'input-${n[K].id}.mp4'`).join(`
`);await re.writeFile("concat.txt",O),M=["-f","concat","-safe","0","-i","concat.txt","-c","copy","output.mp4"]}await re.exec(M);const G=await re.readFile("output.mp4"),P=new Blob([G],{type:"video/mp4"}),Y=await new Promise((O,se)=>{const K=new FileReader;K.onloadend=()=>O(K.result),K.onerror=se,K.readAsDataURL(P)});if(Y.length>50*1024*1024){$e.fire({icon:"warning",title:"File Too Large",text:"Video is too large for local storage. Please start the backend server to upload."}),ue(!1);return}let j=Y;try{const O=await DE(P);O!=null&&O.url&&(j=O.url)}catch(O){console.log("Backend upload failed, using data URL:",O)}await yc((t==null?void 0:t.id)||"test user",(t==null?void 0:t.handle)||"test-user","","Ireland",j,"video",void 0,void 0,"Finglas","Dublin","Ireland"),$e.fire({icon:"success",title:"Video Exported!",text:"Your video has been posted to the feed."}),e("/feed")}catch(re){console.error("Export error:",re),$e.fire({icon:"error",title:"Export Failed",text:(re==null?void 0:re.message)||"Failed to export video"})}finally{ue(!1)}},[n,y,S,z,t,e]),ve=n[a];return s.jsxs("div",{className:"fixed inset-0 bg-gray-900 text-white z-50 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[s.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-800 rounded",children:s.jsx(ua,{className:"w-6 h-6"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Video Editor"}),s.jsx("button",{onClick:Pe,disabled:U||n.length===0,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded disabled:opacity-50",children:U?"Exporting...":"Next"})]}),s.jsxs("div",{className:"flex-1 flex items-center justify-center bg-black relative",children:[s.jsx("canvas",{ref:Ae,className:"max-w-full max-h-full",onMouseDown:Z}),s.jsx("video",{ref:fe,src:ve==null?void 0:ve.url,className:"hidden",playsInline:!0}),h!==null&&s.jsxs("div",{className:"absolute top-4 left-4 bg-black/70 px-3 py-1 rounded text-sm",children:["Preview: ",Math.floor(h/60),":",(h%60).toFixed(1).padStart(4,"0")]})]}),s.jsx("div",{className:"p-4 bg-gray-800 border-t border-gray-700",children:s.jsx("div",{className:"relative h-24 bg-gray-900 rounded overflow-hidden",onPointerMove:re=>{if(!u||c===null)return;const M=re.currentTarget.getBoundingClientRect(),G=re.clientX-M.left,P=n.reduce((se,K)=>se+K.duration,0),j=G/M.width*P,O=n.find(se=>se.id===c);if(O)if(u==="start"){const se=Math.max(0,Math.min(j,O.trimEnd-.1));r(K=>K.map(me=>me.id===c?{...me,trimStart:se}:me)),g(se)}else{const se=Math.min(O.duration,Math.max(j,O.trimStart+.1));r(K=>K.map(me=>me.id===c?{...me,trimEnd:se}:me)),g(se)}},onPointerUp:()=>{var re;if(u){f(null),g(null);try{(re=fe.current)==null||re.pause()}catch{}}},children:n.map((re,M)=>{const G=R.get(re.id)||[],P=n.slice(0,M).reduce((se,K)=>se+(K.trimEnd-K.trimStart),0),Y=re.trimEnd-re.trimStart,j=n.reduce((se,K)=>se+(K.trimEnd-K.trimStart),0),O=j>0?Y/j*100:0;return s.jsxs("div",{className:"absolute top-0 bottom-0 flex",style:{left:`${j>0?P/j*100:0}%`,width:`${O}%`},children:[G.map((se,K)=>s.jsx("img",{src:se,alt:"",className:"h-full object-cover",style:{width:`${100/Math.max(1,G.length)}%`}},K)),s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-white cursor-ew-resize hover:bg-blue-500",onPointerDown:se=>{var K;se.stopPropagation(),f("start"),d(re.id);try{(K=fe.current)==null||K.pause()}catch{}}}),s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-2 bg-white cursor-ew-resize hover:bg-blue-500",onPointerDown:se=>{var K;se.stopPropagation(),f("end"),d(re.id);try{(K=fe.current)==null||K.pause()}catch{}}})]},re.id)})})}),s.jsxs("div",{className:"p-4 bg-gray-800 border-t border-gray-700 flex items-center justify-around",children:[s.jsx("button",{onClick:()=>W(_==="text"?null:"text"),className:`p-3 rounded ${_==="text"?"bg-blue-600":"bg-gray-700"}`,children:s.jsx(gc,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>W(_==="sticker"?null:"sticker"),className:`p-3 rounded ${_==="sticker"?"bg-blue-600":"bg-gray-700"}`,children:s.jsx(Xl,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>{var re;(re=_e.current)==null||re.click()},className:"p-3 rounded bg-gray-700",children:s.jsx(Os,{className:"w-6 h-6"})}),s.jsx("input",{ref:_e,type:"file",accept:"video/*",multiple:!0,className:"hidden",onChange:re=>{re.target.files&&de(re.target.files)}})]}),_==="text"&&s.jsxs("div",{className:"absolute bottom-20 left-0 right-0 p-4 bg-gray-800 border-t border-gray-700",children:[s.jsx("input",{type:"text",value:T,onChange:re=>E(re.target.value),placeholder:"Enter text",className:"w-full p-2 bg-gray-700 rounded mb-2"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:B,onChange:re=>H(re.target.value),className:"w-12 h-10"}),s.jsx("input",{type:"number",value:q,onChange:re=>ie(Number(re.target.value)),className:"w-20 p-2 bg-gray-700 rounded"}),s.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-600 rounded",children:"Add"}),s.jsx("button",{onClick:()=>W(null),className:"px-4 py-2 bg-gray-700 rounded",children:"Cancel"})]})]}),v&&s.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-64 bg-gray-800 border-l border-gray-700 p-4 overflow-y-auto",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Overlay"}),(()=>{const re=y.find(P=>P.id===v),M=S.find(P=>P.id===v),G=re||M;return G?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",children:"X Position"}),s.jsx("input",{type:"number",value:G.x,onChange:P=>{re?p(Y=>Y.map(j=>j.id===v?{...j,x:Number(P.target.value)}:j)):M&&x(Y=>Y.map(j=>j.id===v?{...j,x:Number(P.target.value)}:j))},className:"w-full p-2 bg-gray-700 rounded"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",children:"Y Position"}),s.jsx("input",{type:"number",value:G.y,onChange:P=>{re?p(Y=>Y.map(j=>j.id===v?{...j,y:Number(P.target.value)}:j)):M&&x(Y=>Y.map(j=>j.id===v?{...j,y:Number(P.target.value)}:j))},className:"w-full p-2 bg-gray-700 rounded"})]}),re&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",children:"Text"}),s.jsx("input",{type:"text",value:re.text,onChange:P=>{p(Y=>Y.map(j=>j.id===v?{...j,text:P.target.value}:j))},className:"w-full p-2 bg-gray-700 rounded"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",children:"Color"}),s.jsx("input",{type:"color",value:re.color,onChange:P=>{p(Y=>Y.map(j=>j.id===v?{...j,color:P.target.value}:j))},className:"w-full h-10"})]})]})]}):null})()]})]})}function Pq(){const{user:e}=tn(),t=Xt(),n=qn(),r=D.useRef(null),[a,i]=D.useState("");D.useState(!1);const o=n.state,l=(o==null?void 0:o.isClip)===!0,c=o==null?void 0:o.clipId,d=o==null?void 0:o.templateId;D.useEffect(()=>{},[]);const u=a.trim().length>0;return s.jsxs("div",{className:"min-h-screen bg-black flex flex-col",style:{pointerEvents:"auto"},children:[s.jsx("div",{className:"sticky top-0 z-10 bg-black border-b border-gray-800 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-14",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>{l?t("/template-editor",{state:{template:{id:d}}}):t("/feed")},className:"p-2 -ml-2 text-white hover:bg-gray-900 rounded-full transition-colors","aria-label":"Back",children:s.jsx(ua,{className:"w-6 h-6"})}),s.jsx("div",{className:"relative p-0.5 rounded border border-white",children:s.jsx("div",{className:"p-0.5 rounded border border-white",children:s.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:s.jsx(ln,{className:"text-white",size:20})})})})]}),s.jsx("button",{onClick:()=>{if(u)if(l){const f=sessionStorage.getItem("templateEditorState");let h=null;if(f)try{h=JSON.parse(f).template}catch(g){console.error("Error reading template from sessionStorage:",g)}t("/template-editor",{state:{template:h||{id:d},textClipData:{text:a.trim(),textStyle:{color:"#ffffff",size:"medium",background:"#000000"},clipId:c},clipId:c}})}else t("/create/text-only/details",{state:{text:a.trim()}})},disabled:!u,className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors ${u?"gz-animated-border bg-gray-900/30 text-white hover:bg-gray-800/50":"bg-gray-700 text-gray-500 cursor-not-allowed opacity-50"}`,style:{visibility:"visible",display:"block"},children:l?"Add to Post":"Next"})]})}),s.jsx("div",{className:"flex-1 px-4 pb-4 overflow-y-auto",style:{paddingTop:"6rem",marginTop:"1rem"},children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(It,{src:e==null?void 0:e.avatarUrl,name:(e==null?void 0:e.name)||"User",size:"md"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("textarea",{ref:r,value:a,onChange:f=>i(f.target.value),placeholder:"What's on your mind?",maxLength:200,className:"w-full bg-gray-900/30 text-white text-xl resize-none border border-gray-700 rounded-lg outline-none min-h-[200px] px-4 py-3 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-gray-600 placeholder:text-gray-500",rows:8,autoFocus:!l,disabled:!1,readOnly:!1,style:{pointerEvents:"auto",width:"100%"}}),s.jsx("div",{className:"flex justify-end mt-2",children:s.jsxs("span",{className:`text-sm ${a.length>180?a.length>=200?"text-red-500":"text-yellow-500":"text-gray-500"}`,children:[a.length,"/200"]})})]})]})})]})}function Mq(){var v;const{user:e}=tn(),t=Xt(),r=((v=qn().state)==null?void 0:v.text)||"",a=D.useRef(null),i=D.useRef(null),[o,l]=D.useState(""),[c,d]=D.useState([]),[u,f]=D.useState(""),[h,g]=D.useState(!1),[y,p]=D.useState(!1);D.useLayoutEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");const b=document.getElementById("main");b&&(b.scrollTop=0,b.scrollTo(0,0)),window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,a.current&&(a.current.scrollTop=0)},[]),D.useEffect(()=>{const b=()=>{const N=document.getElementById("main");N&&(N.scrollTop=0,N.scrollTo({top:0,left:0,behavior:"instant"})),window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0,a.current&&(a.current.scrollTop=0,a.current.scrollTo(0,0)),i.current&&i.current.scrollIntoView({behavior:"instant",block:"start"})};b();const w=[setTimeout(b,0),setTimeout(b,10),setTimeout(b,50),setTimeout(b,100),setTimeout(b,200)];return requestAnimationFrame(()=>{b(),requestAnimationFrame(()=>{b(),requestAnimationFrame(b)})}),()=>{w.forEach(clearTimeout)}},[r]);const S=async()=>{if(!r.trim()){zt("Please add some text to your post");return}if(!e){zt("Please log in to create a post");return}p(!0);try{await yc(e.id,e.handle,r.trim(),o.trim(),void 0,void 0,void 0,void 0,e.local,e.regional,e.national,void 0,void 0,void 0,u.trim()||void 0,{color:"#ffffff",size:"medium",background:"#000000"},c.length>0?c:void 0),window.dispatchEvent(new CustomEvent("postCreated")),zt("Post created successfully!"),t("/feed")}catch(b){console.error("Error creating post:",b),zt("Failed to create post. Please try again.")}finally{p(!1)}},x=r.trim().length>0;return s.jsxs("div",{ref:a,className:"min-h-screen bg-black flex flex-col",style:{overflowY:"auto"},children:[s.jsx("div",{className:"sticky top-0 z-10 bg-black border-b border-gray-800 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-14",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>t("/create/text-only",{state:{text:r}}),className:"p-2 -ml-2 text-white hover:bg-gray-900 rounded-full transition-colors","aria-label":"Back",children:s.jsx(ua,{className:"w-6 h-6"})}),s.jsx("div",{className:"relative p-0.5 rounded border border-white",children:s.jsx("div",{className:"p-0.5 rounded border border-white",children:s.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:s.jsx(ln,{className:"text-white",size:20})})})})]}),s.jsx("button",{onClick:S,disabled:!x||y,className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors ${x&&!y?"gz-animated-border bg-gray-900/30 text-white hover:bg-gray-800/50":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:y?"Posting...":"Post"})]})}),r&&s.jsx("div",{ref:i,className:"px-4 pt-4 pb-4 border-b border-gray-800 flex-shrink-0",children:s.jsx("div",{className:"p-4 rounded-xl bg-gray-900/30 border border-gray-800",children:s.jsx("div",{className:"text-white text-base whitespace-pre-wrap break-words",children:r})})}),s.jsxs("div",{className:"flex-1 px-4 py-4 space-y-4 overflow-y-auto","data-main-content":!0,style:{scrollBehavior:"smooth"},children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-gray-900/30 border border-gray-800",children:[s.jsx(ln,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),s.jsx("input",{type:"text",value:o,onChange:b=>l(b.target.value),placeholder:"Add location",className:"flex-1 bg-transparent text-white placeholder-gray-500 text-base border-none outline-none"})]}),s.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center gap-3 p-4 rounded-xl bg-gray-900/30 border border-gray-800 hover:bg-gray-800/50 transition-colors",children:[s.jsx(xc,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("div",{className:"text-white font-medium",children:"Tag People"}),s.jsx("div",{className:"text-gray-400 text-sm",children:c.length>0?`${c.length} ${c.length===1?"person":"people"} tagged`:"Tag someone in your post"})]}),c.length>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[c.slice(0,2).map(b=>s.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-xs flex items-center justify-center font-semibold",children:b.charAt(0).toUpperCase()},b)),c.length>2&&s.jsxs("div",{className:"w-6 h-6 rounded-full bg-gray-600 text-gray-300 text-xs flex items-center justify-center font-semibold",children:["+",c.length-2]})]})]}),s.jsxs("div",{className:"p-4 rounded-xl bg-gray-900/30 border border-gray-800",children:[s.jsx("label",{className:"block text-white font-medium mb-2",children:"News Ticker Banner"}),s.jsx("input",{type:"text",value:u,onChange:b=>f(b.target.value),placeholder:"Enter banner text (e.g., Breaking news headline...)",maxLength:200,className:"w-full bg-transparent text-white placeholder-gray-500 text-base border-none outline-none"}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("span",{className:"text-xs text-gray-400",children:"Scrolling news ticker banner"}),s.jsxs("span",{className:`text-xs ${u.length>180?"text-red-500":"text-gray-500"}`,children:[u.length,"/200"]})]})]})]}),s.jsx(xp,{isOpen:h,onClose:()=>g(!1),onSelectUser:b=>{c.includes(b)||d([...c,b])},taggedUsers:c})]})}function Aq(){return s.jsx(Lb,{fallback:s.jsx("div",{className:"p-6 text-red-600",children:"Something went wrong."}),children:s.jsx(BU,{children:s.jsx(MV,{children:s.jsx(HI,{children:s.jsxs(OI,{children:[s.jsx(xn,{path:"/splash",element:s.jsx(pq,{})}),s.jsxs(xn,{path:"/",element:s.jsx(Av,{}),children:[s.jsx(xn,{index:!0,element:s.jsx(DI,{to:"/splash",replace:!0})}),s.jsx(xn,{path:"feed",element:s.jsx(q4,{})}),s.jsx(xn,{path:"create",element:s.jsx(GV,{})}),s.jsx(xn,{path:"create/instant",element:s.jsx(cq,{})}),s.jsx(xn,{path:"create/filters",element:s.jsx(mq,{})}),s.jsx(xn,{path:"create/video-editor",element:s.jsx(Iq,{})}),s.jsx(xn,{path:"create/text-only",element:s.jsx(Pq,{})}),s.jsx(xn,{path:"create/text-only/details",element:s.jsx(Mq,{})}),s.jsx(xn,{path:"templates",element:s.jsx(yq,{})}),s.jsx(xn,{path:"template-editor",element:s.jsx(Sq,{})}),s.jsx(xn,{path:"video-editor",element:s.jsx(Nq,{})}),s.jsx(xn,{path:"login",element:s.jsx(qV,{})}),s.jsx(xn,{path:"boost",element:s.jsx(X4,{})}),s.jsx(xn,{path:"payment",element:s.jsx(gq,{})}),s.jsx(xn,{path:"clip",element:s.jsx(OV,{})}),s.jsx(xn,{path:"stories",element:s.jsx(VY,{})}),s.jsx(xn,{path:"discover",element:s.jsx(WY,{})}),s.jsx(xn,{path:"search",element:s.jsx(zY,{})}),s.jsx(xn,{path:"profile",element:s.jsx(UY,{})}),s.jsx(xn,{path:"user/:handle",element:s.jsx(GY,{})}),s.jsx(xn,{path:"collection/:collectionId",element:s.jsx(xq,{})})]}),s.jsx(xn,{path:"messages/:handle",element:s.jsx(eq,{})}),s.jsx(xn,{path:"inbox",element:s.jsx(iq,{})})]})})})})})}function Dq(){({}).VITE_SENTRY_DSN&&BO({dsn:{}.VITE_SENTRY_DSN,release:{}.VITE_RELEASE_VERSION,integrations:[O6(),DO()],tracesSampleRate:.1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,environment:"production"})}Dq();En(()=>import("./vitals-19dc2f25.js"),[]).then(e=>e.initVitals());Ag.createRoot(document.getElementById("root")).render(s.jsx(m.StrictMode,{children:s.jsx(Aq,{})}));
